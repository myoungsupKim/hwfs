<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="frmSaveSample" classname="frmSelectSample2" left="0" top="0" width="540" height="758" titletext="New Form" onload="frmSaveSample_onload">
    <Layouts>
      <Layout>
        <Grid id="Grid00" taborder="0" useinputpanel="false" left="10" top="80" right="10" bottom="10" binddataset="ds_list" autofittype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="50" band="head"/>
                <Row size="50" band="head"/>
                <Row size="50"/>
                <Row size="50"/>
              </Rows>
              <Band id="head">
                <Cell colspan="2" text="User ID"/>
                <Cell col="2" text="APP"/>
                <Cell col="3" colspan="2" text="User 그룹"/>
                <Cell row="1" colspan="3" text="이름 (한)"/>
                <Cell row="1" col="3" colspan="2" text="이름 (영)"/>
              </Band>
              <Band id="body">
                <Cell colspan="2" edittype="normal" text="bind:USER_ID"/>
                <Cell col="2" edittype="normal" text="bind:APP_ID"/>
                <Cell col="3" colspan="2" edittype="normal" text="bind:ORG_ID"/>
                <Cell row="1" colspan="3" edittype="normal" text="bind:USER_NM"/>
                <Cell row="1" col="3" colspan="2" edittype="normal" text="bind:ENG_USER_NM"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btnSelect" taborder="1" text="조회" left="80" top="15" width="102" height="53" onclick="btnSelect_onclick"/>
        <Button id="btnAdd" taborder="2" text="추가" left="200" top="15" width="102" height="53" onclick="btnAdd_onclick"/>
        <Button id="btnDel" taborder="3" text="삭제" left="304" top="15" width="102" height="53" onclick="btnDel_onclick"/>
        <Button id="btnSave" taborder="4" text="저장" left="424" top="15" width="102" height="53" onclick="btnSave_onclick"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_list" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true">
        <ColumnInfo>
          <Column id="USER_ID" size="22" type="STRING"/>
          <Column id="APP_ID" size="2" type="STRING"/>
          <Column id="USER_NM" size="40" type="STRING"/>
          <Column id="ENG_USER_NM" size="50" type="STRING"/>
          <Column id="ORG_ID" size="20" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true">
        <ColumnInfo>
          <Column id="USER_NM" size="255" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[include "lib::sz_fsp_xp.xjs";

this.frmSaveSample_onload = function (obj:Form, e:LoadEventInfo)
{
	this.fsp_init();
}

this.btnSelect_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_search();
}

this.btnAdd_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.ds_list.addRow();
}

this.btnDel_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.ds_list.deleteRow(this.ds_list.rowposition);
}

this.btnSave_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.fn_save();
}

/*******************************************************************************
* 기      능   : 조회
* 설      명   : 
********************************************************************************/
this.fn_search = function ()
{
	this.fsp_clear();
	this.fsp_addSearch("sample:fsp_sample_sel", false);
	// connect the server 
	this.fsp_callService
	(
		""
		,""
		,"ds_cond=ds_cond"	// inDs
		,"ds_list=ds_list"	// outDs
		,""	// args 
		,"fn_afterSearch"
		,true
	);
}

/*******************************************************************************
* 기      능   : 저장
* 설      명   : 
********************************************************************************/
this.fn_save = function ()
{
	this.fsp_clear();
	this.fsp_addSave
	(
		"sample:fsp_sample_ins"	// insert
		, "sample:fsp_sample_upd"	// update
		, "sample:fsp_sample_del"	// delete
		, ""	// flag column 명
		, ""	// key sql id
		, 0	// key 증가 값
		, "" 
		, 0 
		, "B"	// 실행타입
	);
	// 서버 호출 
	this.fsp_callService
	(
		""
		,""
		,"ds_list=ds_list:U"	// inDs
		,""	// outDs
		,""	// args 
		,"fn_afterSave"
		,false
	);
// fsp_callService(actionName, cmdName, inData, outData [, otherArg [, callBackFnc [, isErrorNotCall [, isNotShow [, isSync [, trId, [svcDataUrl ]]]]]]] );
}

/*******************************************************************************
* 기      능   : search callback
********************************************************************************/
this.fn_afterSearch = function (ErrorCode, ErrorMsg)
{
	if(ErrorCode == "0") // 성공
	{
//		this.alert("Secc!!!");
	}
	else // 실패
	{
		this.alert("Error : " + ErrorCode + " : " + ErrorMsg);
	}
}

/*******************************************************************************
* 기      능   : save callback
********************************************************************************/
this.fn_afterSave = function (ErrorCode, ErrorMsg)
{
	if(ErrorCode == "0") // 성공
	{
		this.alert("저장이 되었습니다.");
	}
	else // 실패
	{
		this.alert("Error : " + ErrorCode + " : " + ErrorMsg);
	}
}
]]></Script>
  </Form>
</FDL>
