<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="SalsNonOccurReasonRept" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="매출미발생 사유보고" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="1" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 93 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static22" text="매출 거래처 목록" class="sta_WF_Title01" position="absolute 0 84 450 102" anchor="left top right"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 450 84" anchor="left top"/>
        <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 97 450 102" anchor="left top"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 461 71 1063 84" anchor="top right"/>
        <Grid id="grd_cust_list" taborder="30" binddataset="ds_arNonoccurList" autoenter="select" useinputpanel="false" cellsizingtype="col" nodataimage="URL('theme://images/grd_WF_NoDataImg.png')" position="absolute 0 102 452 710" anchor="all" autofittype="col" autofitbandtype="body" autosizebandtype="body">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="39"/>
                <Column size="94"/>
                <Column size="134"/>
                <Column size="134"/>
                <Column size="80"/>
                <Column size="103"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell style="align: ;" class="head_Excel"/>
                <Cell col="1" text="사업자번호"/>
                <Cell col="2" text="사업장"/>
                <Cell col="3" text="거래처"/>
                <Cell col="4" text="채권번호"/>
                <Cell col="5" text="담당자"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" text="bind:bizNo" mask="###-##-#####"/>
                <Cell col="2" displaytype="normal" edittype="none" style="align:left;" text="bind:upjangNm"/>
                <Cell col="3" displaytype="normal" edittype="none" style="align:left;" text="bind:custNm"/>
                <Cell col="4" text="bind:seq"/>
                <Cell col="5" displaytype="normal" text="bind:inchargeNm"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static40" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 452 71 462 721" anchor="top right"/>
        <Static id="Static28" text="사업부" class="sta_WFSA_label" position="absolute 15 40 77 61" anchor="left top"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 59 40 69 61" anchor="left top"/>
        <Static id="Static09" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 229 40 259 61" anchor="left top"/>
        <Static id="Static03" text="거래처" onclick="Static00_onclick" class="sta_WFSA_label" position="absolute 715 40 777 61" anchor="left top"/>
        <Static id="Static10" text="글자간격기준 w10" onclick="Static01_onclick" class="Guide01_AreaRed" visible="false" position="absolute 766 40 776 61" anchor="left top"/>
        <Static id="Static17" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 935 40 965 61" anchor="left top"/>
        <Static id="Static30" text="영업담당" onclick="Static00_onclick" class="sta_WFSA_label" position="absolute 967 40 1029 61" anchor="left top" visible="false"/>
        <Static id="Static31" text="글자간격기준 w10" onclick="Static01_onclick" class="Guide01_AreaRed" visible="false" position="absolute 1025 40 1035 61" anchor="left top"/>
        <Static id="Static32" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 1195 40 1225 61" anchor="left top"/>
        <Static id="Static18" text="거래처 현황" class="sta_WF_Title01" position="absolute 462 84 912 102" anchor="top right"/>
        <Static id="Static00" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 462 97 912 102" anchor="top right"/>
        <Static id="Static34" class="sta_WFDA_Labelbg" position="absolute 462 102 1237 129" anchor="top right"/>
        <Static id="Static01" class="sta_WFDA_Labelbg" position="absolute 462 128 1237 155" anchor="top right"/>
        <Static id="Static13" text="사업장" class="sta_WFDA_Label01" position="absolute 462 102 539 129" anchor="top right" style="color:#444444ff;"/>
        <Static id="Static12" text="대표자" class="sta_WFDA_Label01" position="absolute 1004 128 1081 155" anchor="top right" style="color:#444444ff;"/>
        <Static id="Static14" text="계약기간" class="sta_WFDA_Label01" position="absolute 720 128 797 155" anchor="top right" style="color:#444444ff;"/>
        <Static id="Static27" text="~" class="sta_WF_Dash" position="absolute 896 131 904 152" anchor="top right"/>
        <Static id="Static20" text="사업자번호" class="sta_WFDA_Label01" position="absolute 1004 102 1081 129" anchor="top right" style="color:#444444ff;"/>
        <Static id="Static21" text="조직명" class="sta_WFDA_Label01" position="absolute 462 128 539 155" anchor="top right"/>
        <Static id="Static23" text="영업담당" class="sta_WFDA_Label01" position="absolute 1297 51 1374 78" anchor="top right" enable="false" visible="false"/>
        <Static id="Static26" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 462 255 1016 268" anchor="top right"/>
        <Static id="Static33" class="sta_WFDA_Labelbg" position="absolute 462 154 1237 255" anchor="top right"/>
        <Static id="Static35" text="담보" class="sta_WFDA_Label01" position="absolute 462 154 539 255" anchor="top right" style="color:#444444ff;"/>
        <Static id="Static36" text="매출 미발생 사유" class="sta_WF_Title01" position="absolute 462 268 898 286" anchor="top right"/>
        <Static id="Static38" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 462 281 992 286" anchor="top right"/>
        <Static id="Static39" class="sta_WFDA_Labelbg" position="absolute 462 312 1237 339" anchor="top right"/>
        <Static id="Static41" text="거래내역" class="sta_WFDA_Label01" position="absolute 462 312 539 339" anchor="top right" style="color:#444444ff;"/>
        <Static id="Static44" class="sta_WFDA_Labelbg" position="absolute 462 462 1237 526" anchor="right bottom"/>
        <TextArea id="txt_nonoccurReason" taborder="101" scrollbars="fixedvert" position="absolute 541 465 1234 522" anchor="right bottom"/>
        <Static id="Static46" text="기준년월" class="sta_WFSA_label" position="absolute 542 315 604 336" anchor="top right"/>
        <Static id="Static47" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 598 315 608 336" anchor="top right"/>
        <Static id="Static48" text="조회년월 기준 6개월 거래내역을 조회합니다." class="sta_WF_DiscInfo" position="absolute 924 318 1227 337" anchor="top right"/>
        <Button id="btn_search" taborder="104" text="조회" class="btn_WF_Function" position="absolute 697 316 738 336" anchor="top right" onclick="btn_search_onclick"/>
        <Static id="Static49" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 687 316 697 337" anchor="top right"/>
        <Grid id="grd_deal_list" taborder="105" binddataset="ds_dealDescList" scrollbars="autovert" autoenter="select" useinputpanel="false" selecttype="cell" autofittype="col" oncellclick="GrdList2_oncellclick" onexpanddown="GrdList2_onexpanddown" position="absolute 462 339 1237 463" anchor="top right bottom">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="79"/>
                <Column size="82"/>
                <Column size="82"/>
                <Column size="80"/>
                <Column size="91"/>
                <Column size="86"/>
                <Column size="85"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
                <Row size="24"/>
                <Row size="24"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="채권잔액" taborder="undefined"/>
                <Cell col="1" displaytype="normal" edittype="normal" taborder="undefined" calendardisplay="display"/>
                <Cell col="2" taborder="undefined"/>
                <Cell col="3" taborder="undefined"/>
                <Cell col="4"/>
                <Cell col="5"/>
                <Cell col="6"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" edittype="none" style="align:center;" text="기초잔고"/>
                <Cell col="1" displaytype="number" edittype="none" style="align:right;" text="bind:gichoAmt01"/>
                <Cell col="2" displaytype="number" edittype="none" text="bind:gichoAmt02"/>
                <Cell col="3" displaytype="number" edittype="none" style="align:right;" text="bind:gichoAmt03"/>
                <Cell col="4" displaytype="number" text="bind:gichoAmt04"/>
                <Cell col="5" displaytype="number" text="bind:gichoAmt05"/>
                <Cell col="6" displaytype="number" text="bind:gichoAmt06"/>
                <Cell row="1" displaytype="text" style="align:center;" text="당월매출"/>
                <Cell row="1" col="1" displaytype="number" text="bind:machuAmt01"/>
                <Cell row="1" col="2" displaytype="number" text="bind:machuAmt02"/>
                <Cell row="1" col="3" displaytype="number" text="bind:machuAmt03"/>
                <Cell row="1" col="4" displaytype="number" text="bind:machuAmt04"/>
                <Cell row="1" col="5" displaytype="number" text="bind:machuAmt05"/>
                <Cell row="1" col="6" displaytype="number" text="bind:machuAmt06"/>
                <Cell row="2" displaytype="text" style="align:center;" text="당월입금"/>
                <Cell row="2" col="1" displaytype="number" text="bind:rcpAmt01"/>
                <Cell row="2" col="2" displaytype="number" text="bind:rcpAmt02"/>
                <Cell row="2" col="3" displaytype="number" text="bind:rcpAmt03"/>
                <Cell row="2" col="4" displaytype="number" text="bind:rcpAmt04"/>
                <Cell row="2" col="5" displaytype="number" text="bind:rcpAmt05"/>
                <Cell row="2" col="6" displaytype="number" text="bind:rcpAmt06"/>
                <Cell row="3" displaytype="text" style="align:center;" text="기말잔고"/>
                <Cell row="3" col="1" displaytype="number" text="bind:gimalAmt01"/>
                <Cell row="3" col="2" displaytype="number" text="bind:gimalAmt02"/>
                <Cell row="3" col="3" displaytype="number" text="bind:gimalAmt03"/>
                <Cell row="3" col="4" displaytype="number" text="bind:gimalAmt04"/>
                <Cell row="3" col="5" displaytype="number" text="bind:gimalAmt05"/>
                <Cell row="3" col="6" displaytype="number" text="bind:gimalAmt06"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static42" class="sta_WFDA_Labelbg" position="absolute 462 286 1237 313" anchor="top right"/>
        <Static id="Static43" text="보고번호" class="sta_WFDA_Label01" position="absolute 462 286 539 313" anchor="top right"/>
        <Edit id="edt_accdArNum" taborder="106" displaynulltext="자동채번" readonly="true" position="absolute 541 289 709 310" enable="false" anchor="top right"/>
        <Static id="Static45" text="보고일자" class="sta_WFDA_Label01" position="absolute 712 286 806 313" anchor="top right"/>
        <Static id="Static50" text="담당자" class="sta_WFDA_Label01" position="absolute 967 286 1061 313" anchor="top right"/>
        <Static id="Static51" text="매출미발생 사유" class="sta_WFDA_Label01" position="absolute 462 461 539 526" anchor="right bottom" style="color:#444444ff;"/>
        <Static id="Static52" class="sta_WFDA_Labelbg" position="absolute 462 525 1237 582" anchor="right bottom"/>
        <Static id="Static53" text="향후계획" class="sta_WFDA_Label01" position="absolute 462 525 539 582" anchor="right bottom" style="color:#444444ff;"/>
        <TextArea id="txt_diffafterPlan" taborder="102" scrollbars="fixedvert" position="absolute 541 529 1234 578" anchor="right bottom"/>
        <Edit id="edt_custName" taborder="111" readonly="true" position="absolute 1304 150 1480 171" anchor="top right" enable="true"/>
        <Edit id="edt_ceoNm" taborder="112" readonly="true" position="absolute 1083 131 1233 152" anchor="top right" enable="false"/>
        <Edit id="Edit04" taborder="113" readonly="true" position="absolute 541 131 717 152" anchor="top right" enable="false"/>
        <Edit id="edt_salesTeamMstSabunNm" taborder="116" readonly="false" position="absolute 1376 54 1482 75" oneditclick="Edit07_oneditclick" anchor="top right" enable="false" visible="false"/>
        <Edit id="edt_salesSabunNm" taborder="117" readonly="false" oneditclick="Edit07_oneditclick" position="absolute 1484 54 1574 75" anchor="top right" enable="false" visible="false"/>
        <MuSearchComponent id="edt_muNm" titletext="사업부 선택 Component" taborder="123" class="cmb_WF_Essential" position="absolute 69 40 229 61" bindDataset="ds_search" bindMuCdColumn="muCd" appendText="전체" onItemChangedEvent="fn_muItemChangedEvent"/>
        <UpjangSearchComponent id="edt_upjangNm12" titletext="업장 검색용 Component" taborder="124" class="edt_WF_Essential" visible="false" position="absolute 1527 222 1686 243" bindDataset="ds_search" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId=""/>
        <CustSearchComponent id="edt_custNm12" titletext="거래처 검색용 Component" taborder="125" visible="false" position="absolute 1527 254 1686 275" bindDataset="ds_search" eventBeforeTrigger="fn_custNmBeforeEvent" eventAfterTrigger="" bindCustCodeColumn="upjangCd" bindCustNameColumn="upjangNm"/>
        <PersonalSearchComponent id="edt_empNm" titletext="사원 검색용 Component" taborder="126" position="absolute 1035 40 1195 61" bindDataset="ds_search" bindSabunColumn="empNo" bindNmKorColumn="name" qoMuCd="" qoTmCd="" qoTmNm="" eventAfterTrigger="" eventBeforeTrigger="" visible="false"/>
        <Static id="Static02" text="팀" class="sta_WFSA_label" position="absolute 259 40 321 61" anchor="left top"/>
        <Static id="Static29" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 278 40 288 61" anchor="left top"/>
        <TmSearchComponent id="edt_tmNm" titletext="팀 검색용 Component" taborder="127" position="absolute 288 40 445 62" bindDataset="ds_search" bindTmCdColumn="tmCd" bindTmNmColumn="tmNm" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmChangedEvent" eventBeforeTrigger="" enable="true" visible="true" class="edt_WF_Essential"/>
        <Static id="Static54" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 445 40 475 61" anchor="left top"/>
        <MaskEdit id="msk_bizNo" taborder="128" position="absolute 1083 105 1232 125" mask="###-##-#####" style="align:right;" type="string" readonly="true" anchor="top right" enable="true"/>
        <ObjCalendar id="ObjCalendar_dealSdate" titletext="캘린더" taborder="129" text="ObjCalendar00" scrollbars="none" position="absolute 799 131 895 152" enable="true" anchor="top right"/>
        <ObjCalendar id="ObjCalendar_dealEdate" titletext="캘린더" taborder="130" text="ObjCalendar00" scrollbars="none" position="absolute 906 131 1002 152" enable="true" anchor="top right"/>
        <Grid id="grd_dambo" taborder="131" binddataset="ds_damboList" scrollbars="autovert" autoenter="select" useinputpanel="false" selecttype="cell" autofittype="col" oncellclick="GrdList2_oncellclick" onexpanddown="GrdList2_onexpanddown" position="absolute 540 156 1236 254" anchor="top right">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="180"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="No"/>
                <Cell col="1" text="담보종류" taborder="undefined"/>
                <Cell col="2" displaytype="normal" edittype="normal" text="보증금액" taborder="undefined" calendardisplay="display"/>
                <Cell col="3" text="설정일자"/>
                <Cell col="4" text="만기일자"/>
                <Cell col="5" text="해지일자" taborder="undefined"/>
                <Cell col="6" text="비          고"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" displaytype="normal" edittype="none" style="align:left;" text="bind:gubun"/>
                <Cell col="2" displaytype="number" edittype="none" text="bind:secureAmt"/>
                <Cell col="3" displaytype="date" text="bind:setupDate" calendardisplaynulltype="nulltext"/>
                <Cell col="4" displaytype="date" text="bind:expireDate" calendardisplaynulltype="nulltext"/>
                <Cell col="5" displaytype="date" edittype="none" text="bind:cancelDate" calendardisplaynulltype="nulltext"/>
                <Cell col="6" style="align:left;" text="bind:remark"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <ObjAtchFile id="grd_AtchFile" anchor="right bottom" titletext="Attach File Object" taborder="132" scrollbars="none" position="absolute 462 582 1237 712" onclick="grd_AtchFile_onclick"/>
        <ObjCalendar id="ObjCalendar_reptDate" titletext="캘린더" taborder="133" text="ObjCalendar00" scrollbars="none" position="absolute 808 289 965 310" class="cal_WF_Essential" anchor="top right"/>
        <ObjCalMonth id="ObjCalMonth_basisYymm" titletext="월력" taborder="134" text="ObjCalMonth00" scrollbars="none" position="absolute 608 316 687 337" anchor="top right"/>
        <PersonalSearchComponent id="PersonalSearchComponent_inchargeNm" titletext="사원 검색용 Component" taborder="138" text="PersonalSearchComponent00" position="absolute 1063 289 1234 310" bindDataset="ds_arNonoccurList" bindSabunColumn="incharge" bindNmKorColumn="inchargeNm" qoMuCd="" qoTmCd="" qoTmNm="" eventAfterTrigger="" eventBeforeTrigger="" class="edt_WF_Essential" anchor="top right"/>
        <Button id="btn_gwDraft" taborder="139" text="결재상신" onclick="btn_gwDraft_onclick" class="btn_WF_CRUD" position="absolute 709 0 779 25" anchor="left right"/>
        <Button id="btn_gwDetail" taborder="140" text="결재상세" onclick="btn_gwDetail_onclick" class="btn_WF_CRUD" position="absolute 781 0 851 25" anchor="left right"/>
        <Static id="Static24" text="거래처" class="sta_WFDA_Label01" position="absolute 720 102 797 129" anchor="top right" style="color:#444444ff;"/>
        <Static id="Static25" text="사업장" class="sta_WFSA_label" position="absolute 476 40 525 61" anchor="left top"/>
        <UpjangSearchComponent id="edt_upjangNm" titletext="업장 검색용 Component" taborder="141" text="UpjangSearchComponent00" position="absolute 528 40 694 61" bindDataset="ds_search" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId=""/>
        <Static id="Static37" text="글자간격기준 w10" onclick="Static01_onclick" class="Guide01_AreaRed" visible="false" position="absolute 518 40 528 61" anchor="left top"/>
        <Static id="Static55" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 694 40 724 61" anchor="left top"/>
        <UpjangSearchComponent id="edt_mainUpjang" titletext="업장 검색용 Component" taborder="143" onkeydown="comp_mainUpjang_onkeydown" text="UpjangSearchComponent00" enable="false" position="absolute 528 40 694 61" bindDataset="ds_search" bindUpjangCodeColumn="mainUpjangCd" bindUpjangNameColumn="mainUpjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId="FmsMainUpjang"/>
        <UpjangSearchComponent id="edt_upjangNm1" titletext="업장 검색용 Component" taborder="144" text="UpjangSearchComponent00" position="absolute 776 40 935 61" bindDataset="ds_search" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="fn_fmsUpjangBeforeEvent" eventAfterTrigger="" roleSetId="FmsUpjang"/>
        <Static id="Static56" text="본사" class="sta_WFSA_label" position="absolute 476 41 517 62" anchor="left top"/>
        <Static id="Static57" text="사업장" class="sta_WFSA_label" position="absolute 716 40 765 61" anchor="left top"/>
        <CustSearchComponent id="edt_custNm" titletext="거래처 검색용 Component" taborder="145" visible="false" position="absolute 776 40 935 61" bindDataset="ds_search" eventBeforeTrigger="fn_custPopup" eventAfterTrigger="" bindCustCodeColumn="custCd" bindCustNameColumn="custNm"/>
        <CustSearchComponent id="edt_custNm1" titletext="거래처 검색용 Component" taborder="146" visible="true" position="absolute 799 104 1002 125" bindDataset="ds_arNonoccurList" eventBeforeTrigger="fn_custPop" eventAfterTrigger="" bindCustCodeColumn="custCd" bindCustNameColumn="custNm" anchor="top right" enable="false"/>
        <UpjangSearchComponent id="edt_upjangNm00" titletext="업장 검색용 Component" taborder="147" text="UpjangSearchComponent00" position="absolute 541 104 718 125" bindDataset="ds_arNonoccurList" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId="" anchor="top right" enable="false" class="edt_WF_Essential"/>
        <UpjangSearchComponent id="edt_mainUpjang1" titletext="업장 검색용 Component" taborder="148" onkeydown="comp_mainUpjang_onkeydown" text="UpjangSearchComponent00" enable="false" position="absolute 541 104 718 125" bindDataset="ds_arNonoccurList" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId="FmsMainUpjang" anchor="top right" class="edt_WF_Essential"/>
        <UpjangSearchComponent id="edt_upjangNm2" titletext="업장 검색용 Component" taborder="149" text="UpjangSearchComponent00" position="absolute 799 104 1002 125" bindDataset="ds_arNonoccurList" bindUpjangCodeColumn="custCd" bindUpjangNameColumn="custNm" eventBeforeTrigger="fn_fmsUpjangBeforeEvent2" eventAfterTrigger="" roleSetId="FmsUpjang" anchor="top right" onclick="edt_upjangNm2_onclick" enable="false"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item14" compid="edt_upjangNm12" propid="visible" datasetid=" " columnid=""/>
      <BindItem id="item0" compid="edt_custName" propid="value" datasetid="ds_custList" columnid="custNm"/>
      <BindItem id="item1" compid="msk_bizNo" propid="value" datasetid="ds_arNonoccurList" columnid="bizNo"/>
      <BindItem id="item3" compid="edt_ceoNm" propid="value" datasetid="ds_arNonoccurList" columnid="ceoNm"/>
      <BindItem id="item4" compid="Edit04" propid="value" datasetid="ds_arNonoccurList" columnid="orgNm"/>
      <BindItem id="item5" compid="edt_salesTeamMstSabunNm" propid="value" datasetid="ds_custList" columnid="salesTeamMstSabunNm"/>
      <BindItem id="item6" compid="edt_salesSabunNm" propid="value" datasetid="ds_custList" columnid="salesSabunNm"/>
      <BindItem id="item7" compid="edt_accdArNum" propid="value" datasetid="ds_arNonoccurList" columnid="accdArNum"/>
      <BindItem id="item8" compid="txt_diffafterPlan" propid="value" datasetid="ds_arNonoccurList" columnid="diffafterPlan"/>
      <BindItem id="item9" compid="txt_nonoccurReason" propid="value" datasetid="ds_arNonoccurList" columnid="nonoccurReason"/>
      <BindItem id="item10" compid="edt_upjangNm" propid="visible" datasetid=" " columnid=""/>
      <BindItem id="item11" compid="ObjCalendar_dealSdate" propid="titletext" datasetid="ds_arNonoccurList" columnid="dealSdate"/>
      <BindItem id="item12" compid="ObjCalendar_dealEdate" propid="titletext" datasetid="ds_arNonoccurList" columnid="dealEdate"/>
      <BindItem id="item2" compid="edt_upjangNm00" propid="visible" datasetid=" " columnid=""/>
      <BindItem id="item13" compid="ObjCalMonth_basisYymm" propid="text" datasetid="ds_arNonoccurList" columnid="basisYymm"/>
      <BindItem id="item15" compid="ObjCalendar_reptDate" propid="text" datasetid="ds_arNonoccurList" columnid="reptDate"/>
    </Bind>
    <Objects>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_search" preload="true" updatecontrol="true" useclientlayout="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="tmNm" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="empNo" type="STRING" size="256"/>
          <Column id="name" type="STRING" size="256"/>
          <Column id="maskAuth" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="fileId" type="STRING" size="256"/>
          <Column id="basisSyymm" type="STRING" size="256"/>
          <Column id="basisEyymm" type="STRING" size="256"/>
          <Column id="basisAyymm" type="STRING" size="256"/>
          <Column id="mainUpjangCd" type="STRING" size="256"/>
          <Column id="mainUpjangNm" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_custList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_custList_onrowposchanged">
        <ColumnInfo>
          <Column id="bizNo" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="orgNm" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="salesTeamMstSabunNm" type="STRING" size="256"/>
          <Column id="salesSabunNm" type="STRING" size="256"/>
          <Column id="dealSdate" type="STRING" size="256"/>
          <Column id="dealEdate" type="STRING" size="256"/>
          <Column id="ceoNm" type="STRING" size="256"/>
          <Column id="fileId" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_damboList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="damboType" type="STRING" size="256"/>
          <Column id="damboAmt" type="STRING" size="256"/>
          <Column id="setDate" type="STRING" size="256"/>
          <Column id="expireDate" type="STRING" size="256"/>
          <Column id="terminDate" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="gubun" type="STRING" size="256"/>
          <Column id="secureAmt" type="STRING" size="256"/>
          <Column id="setupDate" type="STRING" size="256"/>
          <Column id="cancelDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_damboType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="string" size="255"/>
          <Column id="name" type="string" size="255"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">RE</Col>
            <Col id="name">부동산</Col>
          </Row>
          <Row>
            <Col id="code">SI</Col>
            <Col id="name">보증보험</Col>
          </Row>
          <Row>
            <Col id="code">HS</Col>
            <Col id="name">인보증</Col>
          </Row>
          <Row>
            <Col id="code">CS</Col>
            <Col id="name">현금보증</Col>
          </Row>
          <Row>
            <Col id="code">RP</Col>
            <Col id="name">질권</Col>
          </Row>
          <Row>
            <Col id="code">TC</Col>
            <Col id="name">채권양도</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_arNonoccurList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_arNonoccurList_onrowposchanged">
        <ColumnInfo>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="accdArNum" type="STRING" size="256"/>
          <Column id="accdArSeq" type="STRING" size="256"/>
          <Column id="reptDate" type="STRING" size="256"/>
          <Column id="incharge" type="STRING" size="256"/>
          <Column id="inchargeNm" type="STRING" size="256"/>
          <Column id="basisYymm" type="STRING" size="256"/>
          <Column id="nonoccurReason" type="STRING" size="256"/>
          <Column id="diffafterPlan" type="STRING" size="256"/>
          <Column id="fileId" type="STRING" size="256"/>
          <Column id="signInstanceId" type="STRING" size="256"/>
          <Column id="signProgressStatus" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="dealEdate" type="STRING" size="256"/>
          <Column id="dealSdate" type="STRING" size="256"/>
          <Column id="sysGb" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="bizNo" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="orgNm" type="STRING" size="256"/>
          <Column id="ceoNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_hdrDealDesc" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="yearMon" type="string" size="256"/>
          <Column id="krYearMon" type="string" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dealDescList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="arClass" type="string" size="255"/>
          <Column id="amt1" type="bigdecimal" size="255"/>
          <Column id="amt2" type="bigdecimal" size="255"/>
          <Column id="amt3" type="bigdecimal" size="255"/>
          <Column id="amt4" type="bigdecimal" size="255"/>
          <Column id="amt5" type="bigdecimal" size="255"/>
          <Column id="amt6" type="bigdecimal" size="255"/>
          <Column id="gichoAmt01" type="STRING" size="256"/>
          <Column id="gichoAmt02" type="STRING" size="256"/>
          <Column id="gichoAmt03" type="STRING" size="256"/>
          <Column id="gichoAmt04" type="STRING" size="256"/>
          <Column id="gichoAmt05" type="STRING" size="256"/>
          <Column id="gichoAmt06" type="STRING" size="256"/>
          <Column id="gimalAmt01" type="STRING" size="256"/>
          <Column id="gimalAmt02" type="STRING" size="256"/>
          <Column id="gimalAmt03" type="STRING" size="256"/>
          <Column id="gimalAmt04" type="STRING" size="256"/>
          <Column id="gimalAmt05" type="STRING" size="256"/>
          <Column id="gimalAmt06" type="STRING" size="256"/>
          <Column id="machuAmt01" type="STRING" size="256"/>
          <Column id="machuAmt02" type="STRING" size="256"/>
          <Column id="machuAmt03" type="STRING" size="256"/>
          <Column id="machuAmt04" type="STRING" size="256"/>
          <Column id="machuAmt05" type="STRING" size="256"/>
          <Column id="machuAmt06" type="STRING" size="256"/>
          <Column id="rcpAmt01" type="STRING" size="256"/>
          <Column id="rcpAmt02" type="STRING" size="256"/>
          <Column id="rcpAmt03" type="STRING" size="256"/>
          <Column id="rcpAmt04" type="STRING" size="256"/>
          <Column id="rcpAmt05" type="STRING" size="256"/>
          <Column id="rcpAmt06" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_fileList" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="refSeq" type="STRING" size="256"/>
          <Column id="appendSeq" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="fileSize" type="STRING" size="256"/>
          <Column id="fileExt" type="STRING" size="256"/>
          <Column id="encYn" type="STRING" size="256"/>
          <Column id="fileDesc" type="STRING" size="256"/>
          <Column id="fileUploadNm" type="STRING" size="256"/>
          <Column id="chk" type="INT" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_searchValid" preload="true" updatecontrol="true" useclientlayout="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="muCd">title:사업부,required:true</Col>
            <Col id="tmCd">title:팀,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_arNonoccurListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="reptDate" type="STRING" size="256"/>
          <Column id="incharge" type="STRING" size="256"/>
          <Column id="basisYymm" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="dealSdate" type="STRING" size="256"/>
          <Column id="dealEdate" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="reptDate">title:보고일자,required:true</Col>
            <Col id="incharge">title:담당자,required:true</Col>
            <Col id="basisYymm">title:기준년월,required:true</Col>
            <Col id="upjangCd">title:본사 및 사업장,required:true</Col>
            <Col id="dealSdate">title:계약기간,required:true</Col>
            <Col id="dealEdate">title:계약기간,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : Template
  파 일 명 : Template.xfdl
  기    능 : Design 및 Script Template

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.11.01   김윤기   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var thisMonth = fv_sToday.substring(0,6);
var fv_attachList;  //상신 첨부 파일 목록 (json)
var fv_RefSeq;
var fv_option = {buttons:[{id:"btn_gwDraft", action:"draft"}, {id:"btn_gwDetail", action:"detail"}]}; //결재 관련 버튼 정의


/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{
    // Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
    gfn_formOnLoad(this);
    
    // 초기값 셋팅
    fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	v_ds_check = "ds_custList;ds_damboList;ds_arNonoccurList";

	var nRow = ds_search.addRow();
    ds_search.setColumn(nRow, "muCd", g_Mu_Cd);            //사업부
    ds_search.setColumn(nRow, "muNm", g_Mu_Nm);
    ds_search.setColumn(nRow, "tmCd", g_Tm_Cd);            //팀
    ds_search.setColumn(nRow, "tmNm", g_Tm_Nm);
     //ds_search.setColumn(0, "maskAuth", SCAuth.getMaskAuth(this));
    ds_search.setColumn(0, "maskAuth", "0");
    
    //ObjCalendar_dealSdate.fn_initMonthCal(this, "", "", ds_custList, "dealSdate", "Y");
    //ObjCalendar_dealEdate.fn_initMonthCal(this, "", "", ds_custList, "dealEdate", "Y");

    ObjCalendar_reptDate.fn_initMonthCal(this, "", "", ds_arNonoccurList, "reptDate", "Y");
    ObjCalMonth_basisYymm.fn_initMonthCal(this, "", "", ds_arNonoccurList, "basisYymm", "Y");
    ObjCalendar_dealSdate.fn_initMonthCal(this, "", "", ds_arNonoccurList, "dealSdate", "Y");
    ObjCalendar_dealEdate.fn_initMonthCal(this, "", "", ds_arNonoccurList, "dealEdate", "Y");
   
	
    // 팀
    edt_tmNm.applyAuthLevel(edt_muNm);
    //	거래처
    edt_upjangNm.applyAuthLevel(edt_tmNm);
    edt_upjangNm00.applyAuthLevel(edt_tmNm);
    // 본사
    edt_mainUpjang.applyAuthLevel(edt_tmNm);
	edt_mainUpjang.setMainUpjang(true);
	edt_mainUpjang1.applyAuthLevel(edt_tmNm);
	edt_mainUpjang1.setMainUpjang(true);
    //edt_mainUpjang.applyMainUpjang(null);
    //edt_mainUpjang.setAlwaysFmsUpjang(true);
    
    // 본사소속 업장
    //edt_upjangNm1.applyAuthLevel(edt_tmNm);
    edt_upjangNm1.applyMainUpjang(edt_mainUpjang);
    //edt_upjangNm2.applyAuthLevel(edt_tmNm);
    edt_upjangNm2.applyMainUpjang(edt_mainUpjang1);
 	//edt_upjangNm.setAlwaysFmsUpjang(true);
	
    if(g_Mu_Cd != "2004") {
        edt_mainUpjang.visible = false;
        edt_upjangNm.visible = false;
        edt_mainUpjang1.visible = false;
        edt_upjangNm1.visible = false;
        edt_mainUpjang1.visible = false;
        edt_upjangNm2.visible = false;
        edt_custNm.visible   = true;
        edt_upjangNm.visible = true;
        edt_custNm1.visible   = true;
        edt_upjangNm00.visible = true;
        edt_upjangNm.setUpjangCode("");
        edt_custNm.setCustCode("");
        edt_mainUpjang.setUpjangCode("");
        edt_upjangNm1.setUpjangCode("");
        edt_mainUpjang1.setUpjangCode("");
        edt_upjangNm2.setUpjangCode("");
        Static03.visible = true;
        Static25.visible = true;
        Static56.visible = false;
        Static57.visible = false;
        Static13.text = "사업장";
        Static24.text = "거래처";
        grd_cust_list.setCellProperty("Head", 2, "text", "사업장");
        grd_cust_list.setCellProperty("Head", 3, "text", "거래처");
    } else { // 식재일 경우만
        edt_mainUpjang.visible = true;
        edt_upjangNm.visible = true;
        edt_mainUpjang.visible = true;
        edt_upjangNm1.visible = true;
        edt_mainUpjang1.visible = true;
        edt_upjangNm2.visible = true;
        edt_custNm.visible   = false;
        edt_upjangNm.visible = false;
        edt_custNm1.visible   = false;
        edt_upjangNm00.visible = false;
        edt_upjangNm.setUpjangCode("");
        edt_custNm.setCustCode("");
        edt_mainUpjang.setUpjangCode("");
        edt_upjangNm1.setUpjangCode("");
         edt_mainUpjang1.setUpjangCode("");
        edt_upjangNm2.setUpjangCode("");
        Static03.visible = false;
        Static25.visible = false;
        Static56.visible = true;
        Static57.visible = true;
        edt_mainUpjang.enable = true;
        Static13.text = "본사";
        Static24.text = "사업장";
        grd_cust_list.setCellProperty("Head", 2, "text", "본사");
        grd_cust_list.setCellProperty("Head", 3, "text", "사업장");
    }
 
    // 첨부파일 연결
    grd_AtchFile.setDataset("ds_fileList");
    
    //그룹웨어 연동 초기화
    SCGw.init (this);

    //그룹웨어 연동 버튼을 설정
    SCGw.setUserButton (this, fv_option, ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "signProgressStatus"));

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_close()
{
 	// v_ds_check 미사용시 변경사항 체크
    if (gfn_dsIsUpdated(ds_custList) == true || gfn_dsIsUpdated(ds_arNonoccurList) == true || gfn_dsIsUpdated(ds_fileList) == true) {
        // 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
        if (!gfn_confirm("confirm.before.movepage")) return false;
    }
    
    // 조회프로그램에도 Return true; 기술해 주세요!
    return true;
}


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
function fn_searchDataClear(){
	ds_search.setColumn(0, "upjangCd", "");
	ds_search.setColumn(0, "custCd", "");
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회조건 변경 이벤트
 *---------------------------------------------------------------------------------------------*/

//MU가 변경될 때에 대한 이벤트 -조회조건
function fn_muItemChangedEvent(obj, evt) {
    edt_tmNm.setTmCode("");
    edt_upjangNm.setUpjangCode("");
    edt_custNm.setCustCode("");
    ds_arNonoccurList.clearData();
    ds_damboList.clearData();
    ds_dealDescList.clearData();
    grd_AtchFile.fn_setClear();

     if(edt_muNm.getMuCode() != "2004") {
          edt_mainUpjang.visible = false;
        edt_upjangNm.visible = false;
        edt_mainUpjang1.visible = false;
        edt_upjangNm1.visible = false;
        edt_mainUpjang1.visible = false;
        edt_upjangNm2.visible = false;
        edt_custNm.visible   = true;
        edt_upjangNm.visible = true;
        edt_custNm1.visible   = true;
        edt_upjangNm00.visible = true;
        edt_upjangNm.setUpjangCode("");
        edt_custNm.setCustCode("");
        edt_mainUpjang.setUpjangCode("");
        edt_upjangNm1.setUpjangCode("");
        edt_mainUpjang1.setUpjangCode("");
        edt_upjangNm2.setUpjangCode("");
        Static03.visible = true;
        Static25.visible = true;
        Static56.visible = false;
        Static57.visible = false;
        Static13.text = "사업장";
        Static24.text = "거래처";
        grd_cust_list.setCellProperty("Head", 2, "text", "사업장");
        grd_cust_list.setCellProperty("Head", 3, "text", "거래처");
    } else { // 식재일 경우만
        edt_mainUpjang.visible = true;
        edt_upjangNm.visible = true;
        edt_mainUpjang.visible = true;
        edt_upjangNm1.visible = true;
        edt_mainUpjang1.visible = true;
        edt_upjangNm2.visible = true;
        edt_custNm.visible   = false;
        edt_upjangNm.visible = false;
        edt_custNm1.visible   = false;
        edt_upjangNm00.visible = false;
        edt_upjangNm.setUpjangCode("");
        edt_custNm.setCustCode("");
        edt_mainUpjang.setUpjangCode("");
        edt_upjangNm1.setUpjangCode("");
         edt_mainUpjang1.setUpjangCode("");
        edt_upjangNm2.setUpjangCode("");
        Static03.visible = false;
        Static25.visible = false;
        Static56.visible = true;
        Static57.visible = true;
        edt_mainUpjang.enable = true;
        Static13.text = "본사";
        Static24.text = "사업장";
        grd_cust_list.setCellProperty("Head", 2, "text", "본사");
        grd_cust_list.setCellProperty("Head", 3, "text", "사업장");
    }
}
//TM이 변경될 때에 대한 이벤트 -조회조건
function fn_tmChangedEvent(obj, data) {
	
    edt_upjangNm.setUpjangCode("");
    edt_custNm.setCustCode("");
    
	if(ds_arNonoccurList.rowcount > 0 && ds_arNonoccurList.getRowType(ds_arNonoccurList.rowposition) == Dataset.ROWTYPE_INSERT){
		ds_arNonoccurList.setColumn(ds_arNonoccurList.rowposition,"upjangNm","");
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 거래내역 헤더 셋팅
 *---------------------------------------------------------------------------------------------*/ 
function fn_hdrDealDesc() {
    for(i = 0; i < ds_hdrDealDesc.getRowCount(); i++) {
        grd_deal_list.setCellProperty("Head", i+1, "text", ds_hdrDealDesc.getColumn(i, "krYearMon"));
    }
    
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 거래내역 조회
 *---------------------------------------------------------------------------------------------*/ 
function btn_search_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_arNonoccurList.rowcount == 0) return;
	
    ds_search.setColumn(0, "basisSyymm", gfn_subStr(gfn_addMonth(ObjCalMonth_basisYymm.fn_getValue(), -5), 0, 6));
    ds_search.setColumn(0, "basisEyymm", ObjCalMonth_basisYymm.fn_getValue());

    fn_searchDealList();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 거래처 행 변경시 발생되는 조회 이벤트
 *---------------------------------------------------------------------------------------------*/
function ds_custList_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	var nRow =  ds_custList.rowposition;
	
	ds_search.setColumn(0, "custCd", ds_custList.getColumn(nRow, "custCd"));
	ds_search.setColumn(0, "seq", ds_custList.getColumn(nRow, "seq"));
	ds_search.setColumn(0, "fileId", ds_custList.getColumn(nRow, "fileId"));
	
	var basisYymm =ObjCalMonth_basisYymm.fn_getValue();
	ds_search.setColumn(0, "basisAyymm", gfn_getLastDate(gfn_subStr(basisYymm, 0, 6)));
	
		
	fn_searchList();
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{

	 // v_ds_check 사용시 공통버튼에서 변경사항 체크함
	 // 변경사항 체크
// 	 if (gfn_isDataChange() == true) {
// 		 var retValue = gfn_confirm("confirm.before.search");    // 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
// 		 if (retValue == false) return;
// 	 }
	
	    
	// 조회시 Validation Check
	if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;
	
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_cust_list);

    var strSvcID    = "search";
    var strURL      = "sm/saa/salsNonOccurReasonRept/selectCustList.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_arNonoccurList=ds_custList ds_hdrDealDesc=ds_hdrDealDesc";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_searchList()
{
	 // v_ds_check 미사용시 변경사항 체크
//     if (gfn_dsIsUpdated(ds_custList) == true || gfn_dsIsUpdated(ds_arNonoccurList) == true || gfn_dsIsUpdated(ds_fileList) == true) {
//         var retValue = gfn_confirm("confirm.before.search");    // 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
//         if (retValue == false) return;
//     }

    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_dambo);
	ds_fileList.clearData();
   
    var strSvcID    = "searchList";
    var strURL      = "sm/saa/salsNonOccurReasonRept/selectList.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_damboList=ds_damboList ds_fileList=ds_fileList";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_searchDealList()
{
	 // v_ds_check 사용시 공통버튼에서 변경사항 체크함
	 // 변경사항 체크
// 	 if (gfn_isDataChange() == true) {
// 		 var retValue = gfn_confirm("confirm.before.search");    // 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
// 		 if (retValue == false) return;
// 	 }
	var basisYymm = ObjCalMonth_basisYymm.fn_getValue();
	ds_search.setColumn(0, "basisSyymm", gfn_subStr(gfn_addMonth(ObjCalMonth_basisYymm.fn_getValue(), -5), 0, 6));
	ds_search.setColumn(0, "basisEyymm", ObjCalMonth_basisYymm.fn_getValue());
	ds_search.setColumn(0, "basisAyymm", gfn_getLastDate(gfn_subStr(basisYymm, 0, 6)));
				
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_deal_list);
	
    if(edt_muNm.getMuCode() == 2004){ // 식재일때
		ds_search.setColumn(0, "upjangCd", ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "custCd") );
		ds_search.setColumn(0, "mainUpjangCd", ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "upjangCd") );

		var strSvcID    = "searchDealDesc";
		var strURL      = "sm/saa/salsNonOccurReasonRept/selectDealList.xdo";
		var strInDs     = "ds_search=ds_search:A";
		var strOutDs    = "ds_dealDescList=ds_dealDescList ds_hdrDealDesc=ds_hdrDealDesc";
		var strArg      = "";
		var strCallback = "fn_callBack";
		var bAsync      = false;

		gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
		
    }else{
		ds_search.setColumn(0, "upjangCd", ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "upjangCd") );
		ds_search.setColumn(0, "custCd", ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "custCd") );

		var strSvcID    = "searchDealDescFs";
		var strURL      = "sm/saa/salsNonOccurReasonRept/selectDealListFs.xdo";
		var strInDs     = "ds_search=ds_search:A";
		var strOutDs    = "ds_dealDescList=ds_dealDescList ds_hdrDealDesc=ds_hdrDealDesc";
		var strArg      = "";
		var strCallback = "fn_callBack";
		var bAsync      = false;

		gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
    }
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{
	// FC사업지원부와 구매사업부는 입력 제한
	if(edt_muNm.getMuCode() == 2001 || edt_muNm.getMuCode() == 2005){
		gfn_alert("해당사업부는 입력 권한이 없습니다.");
		return;
	}
	
	// 초기화
// 	ds_custList.clearData();
		ds_damboList.clearData();
		grd_AtchFile.fn_setClear();
// 	ds_arNonoccurList.clearData();
// 	ds_dealDescList.clearData();

	if(gfn_isNull(edt_tmNm.getTmCode() )){
		gfn_alert("팀은 필수 입력사항 입니다.");
		return;
	}
		// 사업장, 거래처 팝업 활성화 설정
		edt_mainUpjang1.enable = true;
		edt_upjangNm00.enable = true;
		edt_upjangNm2.enable = true;
		edt_custNm1.enable = true;
		
	var nRow = ds_arNonoccurList.addRow();
	
	// 공통값들
	
	ds_arNonoccurList.setColumn(nRow, "muCd", edt_muNm.getMuCode() );
	ds_arNonoccurList.setColumn(nRow, "tmCd", edt_tmNm.getTmCode() );
	ds_arNonoccurList.setColumn(nRow, "reptDate", fv_sToday);
	ds_arNonoccurList.setColumn(nRow, "basisYymm", thisMonth);
	ds_arNonoccurList.setColumn(nRow, "dealSdate", fv_sToday);
	ds_arNonoccurList.setColumn(nRow, "dealEdate", fv_sToday);
	//ds_custList.setColumn(ds_custList.rowposition, "custNm",edt_custNm.getCustName());
	
	
	if(edt_muNm.getMuCode() != 2004){ // 식재가 아닐때
		//ds_arNonoccurList.setColumn(nRow, "custCd", edt_custNm.getCustCode() );
		//ds_arNonoccurList.setColumn(nRow, "custNm", edt_custNm.getCustName() );
		//ds_arNonoccurList.setColumn(nRow, "upjangCd", edt_upjangNm.getUpjangCode() );
		//ds_arNonoccurList.setColumn(nRow, "accdArNum", ds_custList.getColumn(ds_custList.rowposition, "seq"));
		
		
		if(edt_muNm.getMuCode() == "2002") {         // 급식 2002
			ds_arNonoccurList.setColumn(nRow, "sysGb", "001");
		}else if(edt_muNm.getMuCode() == "2003") {  // 외식
			ds_arNonoccurList.setColumn(nRow, "sysGb", "002");
		}
	
	}else{	// 식재일때
		ds_arNonoccurList.setColumn(nRow, "custCd", edt_upjangNm1.getUpjangCode() );
		ds_arNonoccurList.setColumn(nRow, "custNm", edt_upjangNm1.getUpjangName() );
		ds_arNonoccurList.setColumn(nRow, "upjangCd", edt_mainUpjang.getUpjangCode() );
		//ds_arNonoccurList.setColumn(nRow, "accdArNum", ds_custList.getColumn(ds_custList.rowposition, "seq"));
		ds_arNonoccurList.setColumn(nRow, "sysGb", "004");
	}
	
	//그룹웨어 연동 버튼을 설정
//	SCGw.setUserButton (this, fv_option, ds_arNonoccurList.getColumn(nRow, "signProgressStatus"));

}


/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{
    var nRow = ds_arNonoccurList.rowposition;

    if (ds_arNonoccurList.rowposition == -1)
    {
        gfn_alert("msg.err.grid.noselect", "삭제할 row");	// 선택된 항목이 없습니다.
        return;
    }
	if(ds_arNonoccurList.getColumn(nRow, "signProgressStatus") == "DRAFT"){
		gfn_alert("결재상신이 완료되어 삭제하실 수 없습니다.");
		return false;
	}
    var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
    if (rtVal == true)
    {
		if(ds_arNonoccurList.getRowType(nRow) == 2){
			ds_arNonoccurList.deleteRow(nRow);
		}else{
			ds_arNonoccurList.deleteRow(nRow);
        
			var strSvcID    = "save";
			var strURL      = "sm/saa/salsNonOccurReasonRept/deleteList.xdo";
			var strInDs     = "ds_arNonoccurList=ds_arNonoccurList:U ds_fileList=ds_fileList:A";
			var strOutDs    = "";
			var strArg      = "";
			var strCallback = "fn_callBack";
			var bAsync      = true;

			gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
		}
    }
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
	if (gfn_dsIsUpdated(ds_custList) == false && gfn_dsIsUpdated(ds_arNonoccurList) == false && gfn_dsIsUpdated(ds_fileList) == false) {
        gfn_alert("msg.save.nochange"); // 변경된 내역이 없습니다.
        return;
    }else{
		if(gfn_dsIsUpdated(ds_fileList) == true)
		{
			if(ds_arNonoccurList.getRowType(ds_arNonoccurList.rowposition) != "2") {
				ds_arNonoccurList.updatecontrol = false;
				ds_arNonoccurList.setRowType(ds_arNonoccurList.rowposition, "U");
				ds_arNonoccurList.updatecontrol = true;
			}
		}
	}
	
	// 결제상신이 완료된 건은 수정이 불가능하게 처리
	for(var i = 0; i < ds_arNonoccurList.rowcount; i++){
		if(ds_arNonoccurList.getRowType(i) == 4){
			if(ds_arNonoccurList.getColumn(i, "signProgressStatus") == "DRAFT"){
				gfn_alert("결재상신이 완료되어 수정하실 수 없습니다.");
				return false;
			}
		}
	}
	trace(ds_search.getColumn(ds_search.rowposition,"muCd"));
	if(ds_search.getColumn(ds_search.rowposition,"muCd") == "2004"){
		for(i = 0; i < ds_arNonoccurList.getRowCount(); i++) {
			trace(ds_arNonoccurList.getRowType(i));
			trace(gfn_isNull(ds_arNonoccurList.getColumn(i, "custCd")));
			if(ds_arNonoccurList.getRowType(i) == Dataset.ROWTYPE_INSERT && gfn_isNull(ds_arNonoccurList.getColumn(i, "custCd"))){
				ds_arNonoccurList.setColumn(i, "custCd", ds_arNonoccurList.getColumn(i, "upjangCd"));
				ds_arNonoccurList.setColumn(i, "custNm", ds_arNonoccurList.getColumn(i, "upjangNm"));
			}
		}
	}
	if (gfn_validCheck(ds_arNonoccurList, ds_arNonoccurListValid) == false)	return;

	
    // 첨부 파일 추가가 있을때만
    if(grd_AtchFile.fn_countDs("insert") > 0) {
        var rtn = grd_AtchFile.fn_uploadFile();
        if (rtn < 0)    return;
    }
	
    var strSvcID    = "save";
    var strURL      = "sm/saa/salsNonOccurReasonRept/saveList.xdo";
    var strInDs     = "ds_damboList=ds_damboList:U ds_arNonoccurList=ds_arNonoccurList:U ds_fileList=ds_fileList:A";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}
/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
    // 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
    if (nErrorCode < 0) {
		if (strSvcID == "saveSign") { //상신 후 결재정보 저장 시 오류가 난 경우
            ds_arNonoccurList.setColumn(ds_arNonoccurList.rowposition, "signInstanceId", "");
            ds_arNonoccurList.setColumn(ds_arNonoccurList.rowposition, "signProgressStatus", "");

            //그룹웨어 연동 버튼을 설정
            SCGw.setUserButton (this, fv_option, ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "signProgressStatus"));
        }
        return;
    }

    switch(strSvcID) {
        // 코드분류 조회
        case "search" :
				if(ds_arNonoccurList.rowcount == 0){
					ds_dealDescList.clearData();
				}
			// 사업장, 거래처 팝업 활성화 설정
			edt_mainUpjang1.enable = false;
			edt_upjangNm00.enable = false;
			edt_upjangNm2.enable = false;
			edt_custNm1.enable = false;
			ds_search.setColumn(0, "upjangCd", "");
			ds_search.setColumn(0, "custCd", "");
            break;
            
        case "searchList" :
			if(ds_arNonoccurList.getRowCount() == 0)
			{
				//fn_insert();
			}
			fn_searchDealList();
			fn_searchDataClear();
			//fn_searchDealList();
			
			break;
		
		case "searchDealDesc" :
			if(ds_hdrDealDesc.getRowCount() > 0) {
				fn_hdrDealDesc();
			}
			fn_searchDataClear();
			break;
			
		case "searchDealDescFs" :
			if(ds_hdrDealDesc.getRowCount() > 0) {
				fn_hdrDealDesc();
			}
			fn_searchDataClear();
			break;
            	
        // 저장
        case "save" :
            gfn_alert("msg.save.success");  // 저장 되었습니다.
            fn_searchDataClear();
            fn_search();
            break;
    }   
		//그룹웨어 연동 버튼을 설정
		SCGw.setUserButton (this, fv_option, ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "signProgressStatus"));
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 전자결재 상신에 첨부할 파일 목록 조회 (옵션-결재상신 전 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_searchSignAttachList()
{
    var strSvcID    = "searchSignAttachList";
    var strURL      = "sm/saa/salsNonOccurReasonRept/selectGwDraftAttachFile.xdo";
    var strInDs     = "";
    var strOutDs    = "";
    var strArg      = "refSeq=" + wrapQuote(!gfn_isNull(ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "fileId")) ? ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "fileId") : "");
    var strCallback = "fn_callBack";
    var bAsync      = false;    //sync 호출

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 전자결재정보를 저장 (옵션-결재상신 처리 후 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_saveSign()
{
    var strSvcID    = "saveSign";
    var strURL      = "sm/saa/salsNonOccurReasonRept/saveSignInfo.xdo";
    var strInDs     = "ds_arNonoccurList=ds_arNonoccurList:U";  //결재정보가 있는 데이터셋
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

//그룹웨어 상신 버튼 클릭 시 상신 팝업을 호출한다.
function btn_gwDraft_onclick(obj:Button,  e:ClickEventInfo)
{

  if(ds_arNonoccurList.rowcount == 0 ){
		gfn_alert("결재상신할 목록이 없습니다");
		return false;
    }
    
    var basisYymm = ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "basisYymm");
    
    //첨부파일 목록을 얻는다. - 업무에 맞게 처리
    fn_searchSignAttachList();
    //alert (fv_attachList);

    //그룹웨어에 전달할 파라메터 생성
    var arrParams   = SCGw.newParams ();

    //(필수) 결재문서 서비스명 - 문서양식별로 설정된 서비스명 설정
    SCGw.setParams (arrParams, SCGw.GW_SERVICE_NAME, "HWRC_FC_SAA_ACCDSALENON_REPT");

    //(필수) 본문 URL : (주의) .do로 호출해야 하며 GET 방식으로 파라미터를 전달 (id라는 key는 사용 불가)
    var sBodyUrl = "/sm/saa/salsNonOccurReasonRept/makeGwDraftContent.do?custCd=" + ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "custCd")
                   + "&accdArNum="  + ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "accdArNum")
                   + "&accdArSeq="  + ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "accdArSeq")
                   + "&basisSyymm=" + gfn_subStr(gfn_addMonth(basisYymm, -5), 0, 6)
                   + "&basisEyymm=" + gfn_subStr(basisYymm, 0, 6)
                   + "&basisAyymm=" + gfn_getLastDate(gfn_subStr(basisYymm, 0, 6))
                   + "&muCd=" + ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "muCd")
                   + "&mainUpjangCd=" + ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "upjangCd")
                   + "&upjangCd=" + ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "upjangCd")
                   + "&maskAuth=0";//   + SCAuth.getMaskAuth(this);

    SCGw.setParams (arrParams, SCGw.GW_BODY_URL, sBodyUrl);

    //(필수) 본문 제목 – 문서양식 별로 설정된 업무명
    SCGw.setParams (arrParams, SCGw.GW_BODY_TITLE, "매출미발생 사유 보고서");

    //(필수)문서 방향 : 가로 또는 세로 방향 (GW_VERTICAL, GW_HORIZONTAL)
    SCGw.setParams (arrParams, SCGw.GW_PORTRAIT, SCGw.GW_VERTICAL);

    //(선택)첨부문서 목록 : json 형태 문자열
    SCGw.setParams (arrParams, SCGw.GW_ATTACH_LIST, fv_attachList);

    //(선택)Client Id : 결재 instance id와 연관을 맺기위한 업무별 ID로 unique key를 이용, 생략하면 상신시각이 됨(최대 40 byte)
    //SCGw.setParams (arrParams, SCGw.GW_CLIENT_ID, edt_id.value);

    //그룹웨어 상신 팝업을 호출한다.
    SCGw.sendDraft (this, arrParams);
}

//그룹웨어 결재상세 버튼 클릭 시 결재상세 팝업을 호출한다.
function btn_gwDetail_onclick(obj:Button,  e:ClickEventInfo)
{
	 if(ds_arNonoccurList.rowcount == 0 ){
		gfn_alert("결재상세 목록이 없습니다");
		return false;
    }
    
    //그룹웨어 결재상세 팝업을 호출한다.
    SCGw.sendDetailView(this, ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "signInstanceId"));
}

//그룹웨어 상신 처리 후 반환되는 Instance Id를 처리한다. (업무 테이블에 update)
function scgw_ondraftnotify(instanceId)
{
    //alert("instance id=[" + instanceId + "]");
    ds_arNonoccurList.setColumn(ds_arNonoccurList.rowposition, "signInstanceId", instanceId);                //결재InstanceId 설정
    ds_arNonoccurList.setColumn(ds_arNonoccurList.rowposition, "signProgressStatus", SCGw.GW_DRAFT_STATUS);  //결재진행상태를 상신으로 설정
   
    //결재정보 저장
    fn_saveSign();
}

//거래처에 대한 Before Event Function(팀코드를 설정한다.)
function fn_custNmBeforeEvent(obj)
{
	obj.setTmCode(edt_tmNm.getTmCode());
	
	return true;
}

// 거래처 사업자번호 조회
function fn_CustAfterTrigger(obj, data){
	var bizNo = data.saupno;
}

function fn_custPopup(p){
	p.setQid("ScoUpjangCust");//거래처팝업에 반드시 필요
	p.setUpjang(edt_upjangNm.getUpjangCode() );
	return true;
}

function fn_custPop(p){
	p.setQid("ScoUpjangCust");//거래처팝업에 반드시 필요
	p.setUpjang(edt_upjangNm00.getUpjangCode() );
	return true;
}

// function grd_cust_list_oncellclick(obj:Grid, e:GridClickEventInfo)
// {
// 	
// 	var nRow =  ds_arNonoccurList.rowposition;
// 	
// 	if(gfn_isNull(ds_arNonoccurList.getColumn(nRow, "upjangCd")) || gfn_isNull(ds_arNonoccurList.getColumn(nRow, "upjangCd")) ){
// 		return;
// 	 }
// 	
// 	ds_search.setColumn(0, "muCd", ds_arNonoccurList.getColumn(nRow, "muCd"));
// 	if(edt_muNm.getMuCode()  != 2004){ // 식재 아닐때
// 		ds_search.setColumn(0, "upjangCd", ds_arNonoccurList.getColumn(nRow, "upjangCd"));
// 	}else{	// 식재일때
// 		ds_search.setColumn(0, "upjangCd", ds_arNonoccurList.getColumn(nRow, "custCd"));
// 	}
// 	ds_search.setColumn(0, "seq", ds_arNonoccurList.getColumn(nRow, "seq"));
// 	ds_search.setColumn(0, "fileId", ds_arNonoccurList.getColumn(nRow, "fileId"));
// 	
// 	var basisYymm =ObjCalMonth_basisYymm.fn_getValue();
// 	ds_search.setColumn(0, "basisAyymm", gfn_getLastDate(gfn_subStr(basisYymm, 0, 6)));
// 		
// 	fn_searchList();
// }

function ds_arNonoccurList_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	 if(obj.getRowCount() == -1 || obj.getRowCount() == 0) {
        return;
    }
    
	// 사업장, 거래처 팝업 활성화 설정
	if(obj.getRowType(e.newrow) == 2){
		edt_mainUpjang1.enable = true;
		edt_upjangNm00.enable = true;
		edt_upjangNm2.enable = true;
		edt_custNm1.enable = true;
		return;
	}else{
		edt_mainUpjang1.enable = false;
		edt_upjangNm00.enable = false;
		edt_upjangNm2.enable = false;
		edt_custNm1.enable = false;
	}
	
	var nRow =  ds_arNonoccurList.rowposition;
	
	// 거래내역 초기화
	ds_dealDescList.clearData();

	ds_search.setColumn(0, "muCd", ds_arNonoccurList.getColumn(nRow, "muCd"));
	if(edt_muNm.getMuCode()  != 2004){ // 식재 아닐때
		ds_search.setColumn(0, "upjangCd", ds_arNonoccurList.getColumn(nRow, "upjangCd"));
	}else{	// 식재일때
		ds_search.setColumn(0, "upjangCd", ds_arNonoccurList.getColumn(nRow, "custCd"));
	}
	ds_search.setColumn(0, "seq", ds_arNonoccurList.getColumn(nRow, "seq"));
	ds_search.setColumn(0, "fileId", ds_arNonoccurList.getColumn(nRow, "fileId"));
	
	var basisYymm =ObjCalMonth_basisYymm.fn_getValue();
	ds_search.setColumn(0, "basisAyymm", gfn_getLastDate(gfn_subStr(basisYymm, 0, 6)));
		
	fn_searchList();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 본사 선택 후 팀 사업장 호출 시 인자값 전달
 * o : object, c : name(comp id) 값(1개의 form에 upjangsearch 가 여러개일 경우 사용)
 *---------------------------------------------------------------------------------------------*/
function fn_fmsUpjangBeforeEvent(o, c)
{
	var v_mainUpjang = "";
	v_mainUpjang = gfn_transNullToEmpty(ds_search.getColumn(ds_search.rowposition, "mainUpjangCd"));		// 본사코드
	c.setMainUpjang(v_mainUpjang);
	return true;
}

function fn_fmsUpjangBeforeEvent2(o, c)
{
	var v_mainUpjang = "";
	v_mainUpjang = gfn_transNullToEmpty(ds_arNonoccurList.getColumn(ds_arNonoccurList.rowposition, "upjangCd"));		// 본사코드
	c.setMainUpjang(v_mainUpjang);
	return true;
}
]]></Script>
  </Form>
</FDL>
