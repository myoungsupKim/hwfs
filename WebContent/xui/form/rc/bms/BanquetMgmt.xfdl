<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="BanquetMgmt" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="Banquet Function Sheet" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="40" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 93 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static22" text="예약 리스트 (견적 상태)" class="sta_WF_Title01" position="absolute 0 84 450 102" anchor="left top right"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 450 84" anchor="left top"/>
        <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 97 450 102" anchor="left top"/>
        <Static id="Static18" text="예약정보" class="sta_WF_Title01" position="absolute 460 84 910 102" anchor="left top"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 460 71 910 84" anchor="left top"/>
        <Static id="Static20" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 460 97 910 102" anchor="left top"/>
        <Grid id="grd_eventList" taborder="39" binddataset="ds_reservList" autoenter="select" useinputpanel="false" cellsizingtype="col" nodataimage="URL('theme://images/grd_WF_NoDataImg.png')" position="absolute 0 102 449 710" anchor="left top bottom" autofittype="none">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="31"/>
                <Column size="100"/>
                <Column size="150"/>
                <Column size="78"/>
                <Column size="53"/>
                <Column size="65"/>
                <Column size="109"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell style="align: ;" class="head_Excel"/>
                <Cell col="1" text="행사명"/>
                <Cell col="2" text="행사기간"/>
                <Cell col="3" text="예약자명"/>
                <Cell col="4" text="구분"/>
                <Cell col="5" text="담당AM"/>
                <Cell col="6" text="예약번호"/>
              </Band>
              <Band id="body">
                <Cell text="expr:currow+1"/>
                <Cell col="1" displaytype="normal" style="align:left;" text="bind:reservNm"/>
                <Cell col="2" text="bind:reservDate"/>
                <Cell col="3" displaytype="normal" edittype="none" text="bind:rsvnNm" combodataset="ds_money" combocodecol="cd" combodatacol="cdNm"/>
                <Cell col="4" text="bind:kindCdNm"/>
                <Cell col="5" displaytype="normal" text="bind:amNm"/>
                <Cell col="6" style="align:center;" text="bind:reservNum"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static34" class="sta_WFDA_Labelbg" position="absolute 460 102 1236 129" anchor="left top"/>
        <Combo id="cbo_reservCd" taborder="12" position="absolute 1125 105 1233 126" anchor="left top" index="-1" class="cmb_WF_Essential"/>
        <Static id="Static13" text="예약번호" class="sta_WFDA_Label01" position="absolute 460 102 545 129" anchor="left top"/>
        <Static id="Static14" text="행사기간" class="sta_WFDA_Label01" position="absolute 649 102 730 129" anchor="left top"/>
        <Edit id="edt_reservNum" taborder="8" class="edt_WF_Essential" position="absolute 547 105 647 126" anchor="left top" tooltiptext="예약번호생성" style="align:center middle;" displaynulltext="자동생성" readonly="true"/>
        <Static id="Static40" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 450 71 460 710"/>
        <Static id="Static30" text="S/MGR" onclick="Static00_onclick" class="sta_WFSA_label" position="absolute 895 40 957 61" anchor="left top"/>
        <Static id="Static31" text="글자간격기준 w10" onclick="Static01_onclick" class="Guide01_AreaRed" visible="false" position="absolute 949 40 959 61" anchor="left top"/>
        <Edit id="edt_serAm" taborder="5" position="absolute 959 40 1036 61" style=":disabled {cursor:arrowwait;}" readonly="true" onkeydown="edt_serAm_onkeydown" uCode=""/>
        <Button id="btn_searchAm" taborder="6" tabstop="false" class="btn_WF_popSearch" position="absolute 1035 40 1056 61" onclick="btn_searchAm_onclick"/>
        <Static id="Static32" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 1056 40 1086 61" anchor="left top"/>
        <Static id="Static26" class="Guide01_AreaRed" visible="false" position="absolute 832 111 840 118"/>
        <Static id="Static33" text="~" class="sta_WF_Dash" position="absolute 840 105 856 126"/>
        <Static id="Static35" class="Guide01_AreaRed" visible="false" position="absolute 848 111 856 118"/>
        <Static id="Static63" class="Guide01_AreaRed" visible="false" position="absolute 1237 300 1238 348"/>
        <Static id="Static47" text="구분/종류" class="sta_WFDA_Label01" position="absolute 959 102 1038 129" anchor="left top"/>
        <Combo id="cbo_kindCd" taborder="11" class="cmb_WF_Essential" position="absolute 1040 105 1121 126" index="-1" value="null"/>
        <Static id="Static09" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 307 40 337 61"/>
        <Static id="Static03" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 74 40 84 61"/>
        <Static id="Static10" text="행사기간" class="sta_WFSA_label" position="absolute 15 40 77 61" anchor="left top"/>
        <Static id="Static11" text="~" class="sta_WF_Dash" position="absolute 191 40 207 61"/>
        <Static id="Static86" class="Guide01_AreaRed" visible="false" position="absolute 183 46 191 53"/>
        <Static id="Static17" class="Guide01_AreaRed" visible="false" position="absolute 199 46 207 53"/>
        <ObjCalendar id="cal_serchDateFr" titletext="캘린더" taborder="0" text="ObjCalendar00" scrollbars="none" position="absolute 83 40 183 61"/>
        <ObjCalendar id="cal_serchDateTo" titletext="캘린더" taborder="1" text="ObjCalendar00" scrollbars="none" position="absolute 207 40 307 61"/>
        <Static id="Static28" text="사업장" class="sta_WFSA_label" position="absolute 688 40 735 61" anchor="left top"/>
        <Static id="Static23" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 734 40 744 61" anchor="left top"/>
        <Static id="Static24" text="사업부" class="sta_WFSA_label" position="absolute 337 40 384 61" anchor="left top"/>
        <Static id="Static27" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 382 40 392 61" anchor="left top"/>
        <MuSearchComponent id="cbo_mu" titletext="사업부 선택 Component" taborder="2" onkeydown="cbo_mu_onkeydown" text="MuSearchComponent00" position="absolute 392 40 493 61" bindDataset="" bindMuCdColumn="" appendText="" onItemChangedEvent="fn_muChange" class="cmb_WF_Essential"/>
        <TmSearchComponent id="edt_tm" titletext="팀 검색용 Component" taborder="3" text="TmSearchComponent00" position="absolute 551 40 658 61" bindDataset="" bindTmCdColumn="" bindTmNmColumn="" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmChange" eventBeforeTrigger="" class="edt_WF_Essential"/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="4" text="UpjangSearchComponent00" position="absolute 743 40 865 61" bindDataset="" bindUpjangCodeColumn="" bindUpjangNameColumn="" eventBeforeTrigger="" eventAfterTrigger="fn_upjangChange" roleSetId="" class="edt_WF_Essential"/>
        <Static id="Static29" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 493 40 523 61" anchor="left top"/>
        <Static id="Static25" text="팀" class="sta_WFSA_label" position="absolute 523 40 547 61" anchor="left top"/>
        <Static id="Static48" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 541 40 551 61" anchor="left top"/>
        <Static id="Static50" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 658 40 688 61" anchor="left top"/>
        <Static id="Static51" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 865 40 895 61" anchor="left top"/>
        <Static id="Static53" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 13 635 778 647" anchor="left top"/>
        <ObjCalendar id="cal_strDate" titletext="캘린더" taborder="9" text="ObjCalendar00" scrollbars="none" position="absolute 732 105 832 126"/>
        <ObjCalendar id="cal_endDate" titletext="캘린더" taborder="10" text="ObjCalendar00" scrollbars="none" position="absolute 856 105 956 126"/>
        <Static id="Static39" class="sta_WFDA_Labelbg" position="absolute 460 258 1236 307" anchor="left top"/>
        <Static id="Static49" text="주소" class="sta_WFDA_Label01" position="absolute 460 258 545 307" anchor="left top"/>
        <AddrSearchComponent id="cmp_addr" titletext="주소검색 Component" taborder="36" text="AddrSearchComponent00" position="absolute 547 261 1234 304" bindDataset="ds_reservMst" isAutoDatasetRowChangedEvent="true" bindAddrColumn="addrInfo" eventBeforeTrigger="" eventAfterTrigger="" bindAddrKeyColumn="addrKey" isReadOnly="false"/>
        <Static id="Static45" text="구분" onclick="Static00_onclick" class="sta_WFSA_label" position="absolute 1086 40 1148 61" anchor="left top"/>
        <Static id="Static46" text="글자간격기준 w10" onclick="Static01_onclick" class="Guide01_AreaRed" visible="false" position="absolute 1118 40 1128 61" anchor="left top"/>
        <Combo id="cbo_searchKindCd" taborder="7" position="absolute 1128 40 1209 61"/>
        <Static id="Static78" text="전체 합계 금액" class="sta_WF_Title01" position="absolute 460 312 910 330" anchor="left top"/>
        <Static id="Static79" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 460 307 910 312" anchor="left top"/>
        <Grid id="grd_total" taborder="38" binddataset="ds_total" autoenter="select" useinputpanel="false" autofittype="col" fillareatype="linerow" position="absolute 460 327 1237 379">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="40"/>
                <Column size="80"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell colspan="2" text="연회장금액" taborder="undefined"/>
                <Cell col="2" colspan="2" text="식음금액" taborder="undefined"/>
                <Cell col="4" colspan="2" displaytype="normal" edittype="normal" text="객실금액" taborder="undefined" calendardisplay="display"/>
                <Cell col="6" colspan="2" text="기타금액" taborder="undefined"/>
                <Cell col="8" colspan="2" text="외부발주금액" taborder="undefined"/>
                <Cell col="10" text="합계금액" taborder="undefined"/>
              </Band>
              <Band id="body">
                <Cell displaytype="number" text="bind:bnqQty"/>
                <Cell col="1" displaytype="number" text="bind:bnqAmt"/>
                <Cell col="2" displaytype="number" edittype="none" style="align: ;" text="bind:fnbQty" editautoselect="false" editdisplay="edit" expandshow="hide" calendardisplay="edit"/>
                <Cell col="3" displaytype="number" edittype="none" text="bind:fnbAmt"/>
                <Cell col="4" displaytype="number" edittype="none" style="padding: ;" text="bind:roomQty" editautoselect="false" editdisplay="edit" expandshow="hide" calendardisplay="edit"/>
                <Cell col="5" displaytype="number" edittype="none" text="bind:roomAmt"/>
                <Cell col="6" displaytype="number" edittype="none" style="padding: ;" class="grd_edi" text="bind:etcQty" editautoselect="true" editdisplay="edit" expandshow="hide"/>
                <Cell col="7" displaytype="number" edittype="none" text="bind:etcAmt"/>
                <Cell col="8" displaytype="number" edittype="none" style="padding: ;" class="grd_edi" text="bind:outQty" editautoselect="true" editdisplay="edit" combodisplay="edit"/>
                <Cell col="9" displaytype="number" edittype="none" text="bind:outAmt"/>
                <Cell col="10" displaytype="number" edittype="none" text="bind:totAmt"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Tab id="tab_master" anchor="all" taborder="37" tabindex="0" scrollbars="autoboth" position="absolute 460 398 1237 709" style="showextrabutton:false;">
          <Tabpages>
            <Tabpage id="tab_banquetRoom" text="연회장/연회룸">
              <Layouts>
                <Layout>
                  <Static id="Static00" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static02" text="연회장/연회룸" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static12" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Button id="btn_dataAdd" taborder="5" onclick="tab_master_tab_banquetRoom_btn_dataAdd_onclick" class="btn_WF_GrdPlus" position="absolute 727 6 745 26" anchor="top right"/>
                  <Button id="btn_dataDel" taborder="6" onclick="tab_master_tab_banquetRoom_btn_dataDel_onclick" class="btn_WF_GrdMinus" position="absolute 747 6 765 26" anchor="top right"/>
                  <Grid id="grd_banquetRoom" taborder="7" binddataset="ds_banquetRoom" autoenter="select" useinputpanel="false" cellsizingtype="col" onexpanddown="tab_master_tab_banquetRoom_grd_banquetRoom_onexpanddown" position="absolute 10 31 766 211" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="28"/>
                          <Column size="159"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="50"/>
                          <Column size="50"/>
                          <Column size="49"/>
                          <Column size="70"/>
                          <Column size="40"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="124"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="연회룸"/>
                          <Cell col="2" text="시작일"/>
                          <Cell col="3" text="종료일"/>
                          <Cell col="4" colspan="2" text="시간" taborder="undefined"/>
                          <Cell col="6" text="인원수"/>
                          <Cell col="7" text="단가"/>
                          <Cell col="8" text="박수"/>
                          <Cell col="9" text="소계"/>
                          <Cell col="10" text="할인금액"/>
                          <Cell col="11" text="합계금액"/>
                          <Cell col="12" text="비고"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="padding: ;" text="expr:currow+1" expandshow="hide"/>
                          <Cell col="1" edittype="expand" text="bind:menuNm" editdisplay="display" expandshow="show"/>
                          <Cell col="2" displaytype="date" edittype="date" style="align: ;" text="bind:strDate" editautoselect="true" editdisplay="edit" calendardisplay="display" calendardisplaynulltype="none"/>
                          <Cell col="3" displaytype="date" edittype="date" text="bind:endDate" editautoselect="true" calendardisplay="display" calendardisplaynulltype="none"/>
                          <Cell col="4" displaytype="combo" edittype="combo" style="align:center;" text="bind:strTime" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName" combodisplayrowcount="10"/>
                          <Cell col="5" displaytype="combo" edittype="combo" style="align:center;" class="grd_edi" text="bind:endTime" editdisplay="edit" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName" combodisplayrowcount="10"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" text="bind:adltPsn" mask="#,###" editautoselect="true"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" style="padding: ;" class="grd_edi" text="bind:uprice" mask="#,###" editautoselect="true" editdisplay="edit" combodisplay="edit"/>
                          <Cell col="8" displaytype="number" edittype="masknumber" text="bind:quantity" mask="#,###" editautoselect="true"/>
                          <Cell col="9" displaytype="number" style="align:right middle;" class="grd_edi" text="bind:amt" editautoselect="true"/>
                          <Cell col="10" displaytype="number" edittype="masknumber" text="bind:discntAmt" mask="#,###" editautoselect="true"/>
                          <Cell col="11" displaytype="number" text="bind:totAmt" editautoselect="true"/>
                          <Cell col="12" displaytype="normal" edittype="text" class="grd_edi" text="bind:remark" editautoselect="true"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <TextArea id="txt_fnb" taborder="8" position="absolute 10 215 766 280" anchor="left right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab_fnb" text="Food &amp; Beverage" style="anchor:default;">
              <Layouts>
                <Layout>
                  <Static id="Static00" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static02" text="Food &amp; Beverage" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static12" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Grid id="grd_fnb" taborder="5" binddataset="ds_goods" autoenter="select" useinputpanel="false" cellsizingtype="col" onexpanddown="tab_master_tab_fnb_grd_fnb_onexpanddown" position="absolute 10 31 766 211" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="28"/>
                          <Column size="100"/>
                          <Column size="50"/>
                          <Column size="50"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="70"/>
                          <Column size="40"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="124"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="일자"/>
                          <Cell col="2" colspan="2" text="시간" taborder="undefined"/>
                          <Cell col="4" displaytype="normal" edittype="normal" text="업장명" calendardisplay="display"/>
                          <Cell col="5" text="메뉴명"/>
                          <Cell col="6" text="단가"/>
                          <Cell col="7" text="수량"/>
                          <Cell col="8" text="소계"/>
                          <Cell col="9" text="할인금액"/>
                          <Cell col="10" text="합계금액"/>
                          <Cell col="11" text="비고"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="padding: ;" text="expr:currow+1" expandshow="hide"/>
                          <Cell col="1" displaytype="date" edittype="date" style="align: ;" text="bind:strDate" editautoselect="true" editdisplay="edit" calendardisplay="display"/>
                          <Cell col="2" displaytype="combo" edittype="combo" style="align:center;" text="bind:strTime" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName" combodisplayrowcount="10"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="align:center;" class="grd_edi" text="bind:endTime" editdisplay="edit" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName" combodisplayrowcount="10"/>
                          <Cell col="4" displaytype="normal" edittype="expand" style="padding: ;" text="bind:outletNm" editautoselect="false" editdisplay="display" expandshow="show" calendardisplay="edit"/>
                          <Cell col="5" displaytype="normal" edittype="expand" style="background: ;" text="bind:menuNm" editdisplay="display" expandshow="show"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" style="padding: ;" class="grd_edi" text="bind:uprice" mask="#,###" editautoselect="true" editdisplay="edit" combodisplay="edit"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:quantity" mask="#,###" editautoselect="true"/>
                          <Cell col="8" displaytype="number" style="align:right middle;" class="grd_edi" text="bind:amt" editautoselect="true"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" text="bind:discntAmt" mask="#,###" editautoselect="true"/>
                          <Cell col="10" displaytype="number" text="bind:totAmt" editautoselect="true"/>
                          <Cell col="11" displaytype="normal" edittype="text" class="grd_edi" text="bind:remark" editautoselect="true"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_dataAdd" taborder="6" onclick="tab_master_tab_fnb_btn_dataAdd_onclick" class="btn_WF_GrdPlus" position="absolute 727 6 745 26" anchor="top right"/>
                  <Button id="btn_dataDel" taborder="7" onclick="tab_master_tab_fnb_btn_dataDel_onclick" class="btn_WF_GrdMinus" position="absolute 747 6 765 26" anchor="top right"/>
                  <Static id="Static48" class="Guide01_AreaRed" visible="false" position="absolute 745 4 747 22"/>
                  <Static id="Static50" class="Guide01_AreaRed" visible="false" position="absolute 765 4 766 52"/>
                  <Static id="Static51" class="Guide01_AreaRed" visible="false" position="absolute 605 26 766 30"/>
                  <TextArea id="txt_fnb" taborder="8" position="absolute 10 215 766 280" anchor="left right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab_other" text="Other">
              <Layouts>
                <Layout>
                  <Static id="Static53" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static54" text="Other" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static55" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute -12 26 438 31" anchor="left top"/>
                  <Grid id="grd_other" taborder="9" binddataset="ds_other" autoenter="select" useinputpanel="false" cellsizingtype="col" onexpanddown="tab_master_tab_other_grd_other_onexpanddown" position="absolute 10 31 766 211" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="28"/>
                          <Column size="100"/>
                          <Column size="50"/>
                          <Column size="50"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="70"/>
                          <Column size="40"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="124"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="시작일"/>
                          <Cell col="2" colspan="2" text="시간" taborder="undefined"/>
                          <Cell col="4" displaytype="normal" edittype="normal" text="업장명" calendardisplay="display"/>
                          <Cell col="5" text="메뉴명"/>
                          <Cell col="6" text="단가"/>
                          <Cell col="7" text="수량"/>
                          <Cell col="8" text="소계"/>
                          <Cell col="9" text="할인금액"/>
                          <Cell col="10" text="합계금액"/>
                          <Cell col="11" text="비고"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="padding: ;" text="expr:currow+1" expandshow="hide"/>
                          <Cell col="1" displaytype="date" edittype="date" style="align: ;" text="bind:strDate" editautoselect="true" editdisplay="edit" calendardisplay="display"/>
                          <Cell col="2" displaytype="combo" edittype="combo" style="align:center;" text="bind:strTime" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="align:center;" class="grd_edi" text="bind:endTime" editautoselect="true" editdisplay="edit" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="4" displaytype="normal" edittype="expand" style="padding: ;" text="bind:outletNm" editautoselect="false" editdisplay="display" expandshow="show" calendardisplay="edit"/>
                          <Cell col="5" displaytype="normal" edittype="expand" style="background: ;" text="bind:menuNm" editdisplay="display" expandshow="show"/>
                          <Cell col="6" displaytype="number" edittype="none" style="padding: ;" class="grd_edi" text="bind:uprice" editautoselect="true" editdisplay="edit" combodisplay="edit"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:quantity" mask="#,###" editautoselect="true"/>
                          <Cell col="8" displaytype="number" style="align:right middle;" class="grd_edi" text="bind:amt" editautoselect="true"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" text="bind:discntAmt" mask="#,###" editautoselect="true"/>
                          <Cell col="10" displaytype="number" text="bind:totAmt" editautoselect="true"/>
                          <Cell col="11" displaytype="text" edittype="text" class="grd_edi" text="bind:remark" editautoselect="true"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_dataAdd" taborder="10" onclick="tab_master_tab_other_btn_dataAdd_onclick" class="btn_WF_GrdPlus" position="absolute 727 6 745 26" anchor="top right"/>
                  <Button id="btn_dataDel" taborder="11" onclick="tab_master_tab_other_btn_dataDel_onclick" class="btn_WF_GrdMinus" position="absolute 747 6 765 26" anchor="top right"/>
                  <Static id="Static56" class="Guide01_AreaRed" visible="false" position="absolute 745 4 747 22"/>
                  <Static id="Static57" class="Guide01_AreaRed" visible="false" position="absolute 765 4 766 52"/>
                  <Static id="Static58" class="Guide01_AreaRed" visible="false" position="absolute 605 26 766 30"/>
                  <TextArea id="txt_other" taborder="12" position="absolute 10 215 766 280" anchor="left right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab_outside" text="외부 발주 내역">
              <Layouts>
                <Layout>
                  <Static id="Static59" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static60" text="외부 발주 내역" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static69" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Button id="btn_dataAdd" taborder="9" onclick="tab_master_tab_outside_btn_dataAdd_onclick" class="btn_WF_GrdPlus" position="absolute 727 6 745 26" anchor="top right"/>
                  <Button id="btn_dataDel" taborder="10" onclick="tab_master_tab_outside_btn_dataDel_onclick" class="btn_WF_GrdMinus" position="absolute 747 6 765 26" anchor="top right"/>
                  <Static id="Static70" class="Guide01_AreaRed" visible="false" position="absolute 745 4 747 22"/>
                  <Static id="Static74" class="Guide01_AreaRed" visible="false" position="absolute 765 4 766 52"/>
                  <Static id="Static75" class="Guide01_AreaRed" visible="false" position="absolute 605 26 766 30"/>
                  <Grid id="grd_outside" taborder="11" binddataset="ds_outside" autoenter="select" useinputpanel="false" cellsizingtype="col" onexpanddown="tab_master_tab_outside_grd_outside_onexpanddown" position="absolute 10 31 766 211" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="28"/>
                          <Column size="100"/>
                          <Column size="50"/>
                          <Column size="50"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="70"/>
                          <Column size="40"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="124"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="1" text="시작일"/>
                          <Cell col="2" colspan="2" text="시간" taborder="undefined"/>
                          <Cell col="4" displaytype="normal" edittype="normal" text="거래처명" calendardisplay="display"/>
                          <Cell col="5" text="상품명"/>
                          <Cell col="6" text="단가"/>
                          <Cell col="7" text="수량"/>
                          <Cell col="8" text="소계"/>
                          <Cell col="9" text="할인금액"/>
                          <Cell col="10" text="합계금액"/>
                          <Cell col="11" text="비고"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="checkbox" edittype="checkbox" style="padding: ;" text="bind:Check" expandshow="hide" combodisplay="display"/>
                          <Cell col="1" displaytype="date" edittype="date" style="align: ;" text="bind:strDate" editautoselect="true" editdisplay="edit" calendardisplay="display"/>
                          <Cell col="2" displaytype="combo" edittype="combo" text="bind:strTime" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName" combodisplayrowcount="10"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="padding: ;" class="grd_edi" text="bind:endTime" editautoselect="true" editdisplay="edit" combodataset="ds_reservTime" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="4" displaytype="normal" edittype="none" style="padding: ;" text="bind:vendorNm" editautoselect="false" editdisplay="edit" expandshow="hide" calendardisplay="edit"/>
                          <Cell col="5" displaytype="normal" edittype="expand" style="background: ;" text="bind:menuNm" editdisplay="display" expandshow="show"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" style="padding: ;" class="grd_edi" text="bind:uprice" editautoselect="true" editdisplay="edit" combodisplay="edit"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:quantity" mask="#,###" editautoselect="true"/>
                          <Cell col="8" displaytype="number" style="align:right middle;" class="grd_edi" text="bind:amt" editautoselect="true"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" text="bind:discntAmt" mask="#,###" editautoselect="true"/>
                          <Cell col="10" displaytype="number" text="bind:totAmt" editautoselect="true"/>
                          <Cell col="11" displaytype="normal" edittype="text" class="grd_edi" text="bind:remark" editautoselect="true"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <TextArea id="txt_outside" taborder="12" position="absolute 10 215 766 280" anchor="left right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab_file" text="첨부파일">
              <Layouts>
                <Layout>
                  <ObjAtchFile id="ObjAtchFile" anchor="all" titletext="Attach File Object" taborder="0" position="absolute 10 0 765 284"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab_room" text="Room">
              <Layouts>
                <Layout>
                  <Grid id="grd_room" taborder="4" binddataset="ds_room" autoenter="select" useinputpanel="false" cellsizingtype="col" onexpanddown="tab_master_tab_room_grd_room_onexpanddown" position="absolute 10 31 766 211" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="28"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="50"/>
                          <Column size="100"/>
                          <Column size="80"/>
                          <Column size="50"/>
                          <Column size="50"/>
                          <Column size="60"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="184"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="사업장"/>
                          <Cell col="2" text="도착일"/>
                          <Cell col="3" text="박수"/>
                          <Cell col="4" displaytype="normal" edittype="normal" text="출숙일" calendardisplay="display"/>
                          <Cell col="5" text="객실타입"/>
                          <Cell col="6" text="객실수"/>
                          <Cell col="7" text="인원수"/>
                          <Cell col="8" text="인당단가"/>
                          <Cell col="9" text="판매가격"/>
                          <Cell col="10" text="객실소계"/>
                          <Cell col="11" text="할인액"/>
                          <Cell col="12" text="합계금액"/>
                          <Cell col="13" text="비고"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="padding: ;" text="expr:currow+1" expandshow="hide" combodisplay="display"/>
                          <Cell col="1" displaytype="normal" edittype="expand" text="bind:outletNm" editdisplay="display" expandshow="show"/>
                          <Cell col="2" displaytype="date" edittype="date" style="align: ;" text="bind:arrivDate" editautoselect="true" editdisplay="edit" calendardisplay="display"/>
                          <Cell col="3" displaytype="number" edittype="masknumber" style="padding: ;" class="grd_edi" text="bind:lodgeDd" mask="#,###" editautoselect="true" editdisplay="edit"/>
                          <Cell col="4" displaytype="date" edittype="date" style="padding: ;" text="bind:chkotDate" editautoselect="true" calendardisplay="display"/>
                          <Cell col="5" displaytype="combo" edittype="combo" style="background: ;" text="bind:roomType" combodisplay="edit"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" style="padding: ;" class="grd_edi" text="bind:rmQty" mask="#,###" editautoselect="true" editdisplay="edit" expandshow="hide"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" style="align:right middle;padding: ;" class="grd_edi" text="bind:psn" mask="#,###" editautoselect="true" editdisplay="edit"/>
                          <Cell col="8" displaytype="number" edittype="none" style="padding: ;" class="grd_edi" text="bind:psnUprice" editautoselect="true" editdisplay="edit" combodisplay="edit"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" style="align:right middle;" class="grd_edi" text="bind:uprice" mask="#,###" editautoselect="true"/>
                          <Cell col="10" displaytype="number" style="align: ;" class="grd_edi" text="bind:amt" editautoselect="true"/>
                          <Cell col="11" displaytype="number" edittype="masknumber" text="bind:discntAmt" mask="#,###" editautoselect="true"/>
                          <Cell col="12" text="bind:totAmt" editautoselect="true"/>
                          <Cell col="13" displaytype="normal" edittype="text" class="grd_edi" text="bind:remark" editautoselect="true"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_dataAdd" taborder="5" onclick="tab_master_tab_room_btn_dataAdd_onclick" class="btn_WF_GrdPlus" position="absolute 727 6 745 26" anchor="top right"/>
                  <Button id="btn_dataDel" taborder="6" onclick="tab_master_tab_room_btn_dataDel_onclick" class="btn_WF_GrdMinus" position="absolute 747 6 765 26" anchor="top right"/>
                  <Static id="Static61" class="Guide01_AreaRed" visible="false" position="absolute 745 7 747 25"/>
                  <TextArea id="txt_room" taborder="7" position="absolute 10 215 766 280" anchor="left right bottom"/>
                  <Static id="Static54" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static55" text="Room Reservation" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static56" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Static id="Static57" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 682 0 766 6" anchor="top right"/>
                  <Static id="Static58" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 682 26 766 31" anchor="top right"/>
                  <Static id="Static59" class="Guide01_AreaRed" visible="false" position="absolute 765 4 766 52"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab_pay" text="    결  제   ">
              <Layouts>
                <Layout>
                  <Grid id="grd_payment" taborder="0" binddataset="ds_approvalList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 10 31 766 211" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="28"/>
                          <Column size="100"/>
                          <Column size="110"/>
                          <Column size="126"/>
                          <Column size="40"/>
                          <Column size="40"/>
                          <Column size="96"/>
                          <Column size="79"/>
                          <Column size="40"/>
                          <Column size="93"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="결제일자"/>
                          <Cell col="2" text="결제명"/>
                          <Cell col="3" text="참조번호"/>
                          <Cell col="4" text="상태"/>
                          <Cell col="5" text="할부"/>
                          <Cell col="6" text="승인번호"/>
                          <Cell col="7" text="금액"/>
                          <Cell col="8" colspan="2" text="매입사" taborder="undefined"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="padding: ;" text="expr:currow+1" expandshow="hide"/>
                          <Cell col="1" displaytype="date" edittype="none" style="align: ;" text="bind:approvalDt" editautoselect="true" editdisplay="edit" calendardisplay="edit"/>
                          <Cell col="2" text="bind:cardCpnNm"/>
                          <Cell col="3" text="bind:cardNoEnc"/>
                          <Cell col="4" text="bind:payStatus"/>
                          <Cell col="5" text="bind:div"/>
                          <Cell col="6" text="bind:approvalNo"/>
                          <Cell col="7" displaytype="number" text="bind:amt" editautoselect="true"/>
                          <Cell col="8" text="bind:purchaseCpnCd"/>
                          <Cell col="9" text="bind:purchaseCpnNm"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static54" text="Payment" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Button id="btn_payCancel" taborder="1" text="결제취소" class="btn_WF_Function" position="absolute 697 9 762 29" anchor="top right" onclick="tab_master_tab_pay_btn_payCancel_onclick"/>
                  <Button id="btn_approval" taborder="2" text="카드승인" class="btn_WF_Function" position="absolute 627 9 694 29" anchor="top right" onclick="tab_master_tab_pay_btn_approval_onclick"/>
                  <MaskEdit id="msk_payAmt" taborder="3" mask="#,###" autoselect="true" class="msk_WF_Essential" position="absolute 465 7 555 29" style="padding:3 0 0 -5;align:center middle;" anchor="top right"/>
                  <Static id="Static44" text="결제금액" class="sta_WFDA_Label01" position="absolute 386 7 465 29" anchor="top right"/>
                  <Button id="btn_cash" taborder="4" text="현금결제" class="btn_WF_Function" position="absolute 558 9 625 29" anchor="top right" onclick="tab_master_tab_pay_btn_cash_onclick"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static89" text="예약 세부 사항" class="sta_WF_Title01" position="absolute 460 384 910 402" anchor="left top"/>
        <Static id="Static60" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 461 425 471 708"/>
        <Static id="Static64" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1227 425 1237 708"/>
        <Static id="Static56" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 458 379 908 384" anchor="left top"/>
        <Static id="Static54" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 800 641 1250 654" anchor="left top"/>
        <Static id="Static62" class="sta_WFDA_Labelbg" position="absolute 460 206 1236 233" anchor="left top"/>
        <Static id="Static41" class="sta_WFDA_Labelbg" position="absolute 460 180 1236 207" anchor="left top"/>
        <Static id="Static42" text="이용자(담당)" class="sta_WFDA_Label01" position="absolute 460 180 545 207" anchor="left top"/>
        <Static id="Static43" text="부서명" class="sta_WFDA_Label01" position="absolute 649 180 730 207" anchor="left top"/>
        <Combo id="cbo_prcgDept" taborder="23" position="absolute 732 183 832 204" anchor="left top"/>
        <Static id="Static44" text="거래처구분" class="sta_WFDA_Label01" position="absolute 1037 180 1116 207" anchor="left top"/>
        <Combo id="cbo_custClass" taborder="25" position="absolute 1118 183 1233 204" anchor="left top"/>
        <Static id="Static76" class="sta_WFDA_Labelbg" position="absolute 460 128 1236 155" anchor="left top"/>
        <Static id="Static68" text="행사명" class="sta_WFDA_Label01" position="absolute 460 128 545 155" anchor="left top"/>
        <Edit id="edt_celeNm" taborder="13" autoselect="true" class="edt_WF_Essential" position="absolute 547 131 726 152" anchor="left top"/>
        <Static id="Static82" class="sta_WFDA_Labelbg" position="absolute 460 154 1236 181" anchor="left top"/>
        <Static id="Static83" text="휴대전화" class="sta_WFDA_Label01" position="absolute 460 206 545 233" anchor="left top"/>
        <Static id="Static87" text="인원수" class="sta_WFDA_Label01" position="absolute 959 154 1038 181" anchor="left top" style="font:arial,9;"/>
        <Static id="Static88" text="전화번호" class="sta_WFDA_Label01" position="absolute 689 206 763 233" anchor="left top"/>
        <Static id="Static37" text="예약자 명" class="sta_WFDA_Label01" position="absolute 729 128 803 155" anchor="left top"/>
        <Edit id="edt_rsvnNm" taborder="14" autoselect="true" class="edt_WF_Essential" position="absolute 805 131 956 152" anchor="left top"/>
        <Static id="Static02" class="sta_WFDA_Labelbg" position="absolute 460 232 1236 259" anchor="left top"/>
        <Static id="Static00" text="이메일주소" class="sta_WFDA_Label01" position="absolute 729 154 803 181" anchor="left top"/>
        <CheckBox id="chk_dmYn" taborder="33" text="DM 발송" value="true" position="absolute 932 235 1001 255"/>
        <CheckBox id="chk_emailYn" taborder="31" text="Email수신" value="true" position="absolute 766 235 844 255"/>
        <CheckBox id="chk_smsYn" taborder="32" text="SMS 수신" value="true" position="absolute 847 235 923 255"/>
        <CheckBox id="chk_vipYn" taborder="34" text="VIP" value="true" position="absolute 1010 235 1052 255"/>
        <ObjCalendar id="cal_acceptDate" titletext="캘린더" taborder="28" text="ObjCalendar00" scrollbars="none" position="absolute 988 209 1088 230"/>
        <TelephoneComponent id="uc_handPhone" titletext="전화번호Component(전화번호,휴대폰 번호-개인정보보안적용컴포넌트)" taborder="26" position="absolute 547 209 687 231" bindDataset="ds_reservMst" bindTelNo1Column="handPhone1" bindTelNo2Column="handPhone2" bindTelNo3Column="handPhone3"/>
        <TelephoneComponent id="uc_telNum" titletext="전화번호Component(전화번호,휴대폰 번호-개인정보보안적용컴포넌트)" taborder="27" position="absolute 765 209 905 231" bindDataset="ds_reservMst" bindTelNo1Column="telNum1" bindTelNo2Column="telNum2" bindTelNo3Column="telNum3"/>
        <Static id="Static52" text="상태" class="sta_WFDA_Label01" position="absolute 1090 206 1146 233" anchor="left top"/>
        <Combo id="cbo_reservStatus" taborder="29" readonly="false" class="cmb_WF_Essential" position="absolute 1148 209 1233 230"/>
        <Static id="Static21" text="수신여부" class="sta_WFDA_Label01" position="absolute 689 232 763 259" anchor="left top"/>
        <Edit id="edt_emailAddr" taborder="19" autoselect="true" onkeydown="edt_gubun_onkeydown" position="absolute 805 157 956 178" style=":disabled {cursor:arrowwait;}" userdata=""/>
        <Combo id="cbo_jobPosition" taborder="24" position="absolute 910 183 1035 204" anchor="left top"/>
        <Static id="Static12" text="접수일자" class="sta_WFDA_Label01" position="absolute 907 206 986 233" anchor="left top"/>
        <Edit id="edt_prcgNm" taborder="22" autoselect="true" onkeydown="edt_gubun_onkeydown" position="absolute 547 183 647 204" style=":disabled {cursor:arrowwait;}" userdata=""/>
        <Static id="Static36" text="예약시간" class="sta_WFDA_Label01" position="absolute 959 128 1038 155" anchor="left top"/>
        <Static id="Static01" text="직위" class="sta_WFDA_Label01" position="absolute 834 180 908 207" anchor="left top"/>
        <MaskEdit id="msk_psn" taborder="20" mask="#,###" autoselect="true" class="msk_WF_Essential" position="absolute 1040 157 1120 178" style="padding:3 0 0 -5;align:center middle;"/>
        <Combo id="cbo_strTime" taborder="15" class="cmb_WF_Essential" position="absolute 1040 131 1120 152"/>
        <Combo id="cbo_endTime" taborder="16" class="cmb_WF_Essential" position="absolute 1125 131 1212 152"/>
        <MaskEdit id="msk_maxPsn" taborder="21" mask="#,###" autoselect="true" class="msk_WF_Essential" position="absolute 1125 157 1212 178" style="padding:3 0 0 -5;align:center middle;"/>
        <Static id="Static65" text="거래처명" class="sta_WFDA_Label01" position="absolute 460 154 545 181" anchor="left top"/>
        <Edit id="edt_custNm" taborder="17" readonly="true" onkeydown="edt_custNm_onkeydown" position="absolute 547 157 705 178" style=":disabled {cursor:arrowwait;}" custCd=""/>
        <Button id="btn_searchAm00" taborder="18" tabstop="false" onclick="btn_custNm_onclick" class="btn_WF_popSearch" position="absolute 704 157 725 178"/>
        <Edit id="edt_amNm" taborder="30" readonly="true" onkeydown="edt_amNm_onkeydown" class="edt_WF_Essential" position="absolute 547 235 652 256" anchor="left top" uCode=""/>
        <Static id="Static66" text="S/MGR" class="sta_WFDA_Label01" position="absolute 460 232 545 259" anchor="left top"/>
        <Button id="btn_amSearch" taborder="65" tabstop="false" onclick="btn_amSearch_onclick" class="btn_WF_popSearchEssential" position="absolute 651 235 672 256"/>
        <CheckBox id="chk_taxYn" taborder="35" text="계산서발행" value="true" position="absolute 1056 235 1137 255"/>
        <Button id="Button81" taborder="67" text="연회행사지시서" class="btn_WF_Function" position="absolute 1136 77 1237 97" anchor="top right" onclick="Button81_onclick"/>
        <ActiveX id="kicc" visible="false" position="absolute 327 640 515 719" progid="{93137A73-7A61-4911-8018-C758BBE73F53}" useautobitmapcache="1" anchor="default" style="background:white;" taborder="68" Color="#ffffffff" OnRcvData="kicc_OnRcvData"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item19" compid="edt_reservNum" propid="value" datasetid="ds_reservMst" columnid="reservNum"/>
      <BindItem id="item24" compid="edt_serAm" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item25" compid="edt_serAm" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item9" compid="cbo_kindCd" propid="value" datasetid="ds_reservMst" columnid="kindCd"/>
      <BindItem id="item11" compid="cbo_reservCd" propid="value" datasetid="ds_reservMst" columnid="reservCd"/>
      <BindItem id="item28" compid="tab_master.tab_banquetRoom.txt_fnb" propid="value" datasetid="ds_reservMst" columnid="remarkFact"/>
      <BindItem id="item29" compid="tab_master.tab_fnb.txt_fnb" propid="value" datasetid="ds_reservMst" columnid="remarkFnb"/>
      <BindItem id="item30" compid="tab_master.tab_other.txt_other" propid="value" datasetid="ds_reservMst" columnid="remarkEtc"/>
      <BindItem id="item31" compid="tab_master.tab_outside.txt_outside" propid="value" datasetid="ds_reservMst" columnid="remarkOutside"/>
      <BindItem id="item32" compid="tab_master.tab_room.txt_room" propid="value" datasetid="ds_reservMst" columnid="remarkRoom"/>
      <BindItem id="item8" compid="cbo_prcgDept" propid="value" datasetid="ds_reservMst" columnid="prcgDept"/>
      <BindItem id="item17" compid="cbo_custClass" propid="value" datasetid="ds_reservMst" columnid="custClass"/>
      <BindItem id="item10" compid="edt_celeNm" propid="value" datasetid="ds_reservMst" columnid="reservNm"/>
      <BindItem id="item1" compid="edt_rsvnNm" propid="value" datasetid="ds_reservMst" columnid="rsvnNm"/>
      <BindItem id="item23" compid="chk_dmYn" propid="value" datasetid="ds_reservMst" columnid="dmYn"/>
      <BindItem id="item21" compid="chk_emailYn" propid="value" datasetid="ds_reservMst" columnid="emailYn"/>
      <BindItem id="item22" compid="chk_smsYn" propid="value" datasetid="ds_reservMst" columnid="smsYn"/>
      <BindItem id="item26" compid="chk_vipYn" propid="value" datasetid="ds_reservMst" columnid="vipYn"/>
      <BindItem id="item27" compid="cbo_reservStatus" propid="value" datasetid="ds_reservMst" columnid="reservStatus"/>
      <BindItem id="item3" compid="edt_emailAddr" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item5" compid="edt_emailAddr" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item20" compid="edt_emailAddr" propid="value" datasetid="ds_reservMst" columnid="emailAddr"/>
      <BindItem id="item16" compid="cbo_jobPosition" propid="value" datasetid="ds_reservMst" columnid="jobPosition"/>
      <BindItem id="item0" compid="edt_prcgNm" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item2" compid="edt_prcgNm" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item15" compid="edt_prcgNm" propid="value" datasetid="ds_reservMst" columnid="prcgNm"/>
      <BindItem id="item13" compid="msk_psn" propid="value" datasetid="ds_reservMst" columnid="psn"/>
      <BindItem id="item12" compid="cbo_strTime" propid="value" datasetid="ds_reservMst" columnid="strTime"/>
      <BindItem id="item14" compid="cbo_endTime" propid="value" datasetid="ds_reservMst" columnid="endTime"/>
      <BindItem id="item33" compid="msk_maxPsn" propid="value" datasetid="ds_reservMst" columnid="maxPsn"/>
      <BindItem id="item6" compid="edt_custNm" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item7" compid="edt_custNm" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item34" compid="edt_custNm" propid="value" datasetid="ds_reservMst" columnid="custNm"/>
      <BindItem id="item4" compid="edt_amNm" propid="value" datasetid="ds_reservMst" columnid="amNm"/>
      <BindItem id="item18" compid="chk_taxYn" propid="value" datasetid="ds_function" columnid="taxBill"/>
    </Bind>
    <Objects>
      <Dataset id="ds_reservList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_reservList_onrowposchanged">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="reservDate" type="STRING" size="256"/>
          <Column id="reservNm" type="STRING" size="256"/>
          <Column id="rsvnNm" type="STRING" size="256"/>
          <Column id="amNm" type="STRING" size="256"/>
          <Column id="kindCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_room" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_room_oncolumnchanged">
        <ColumnInfo>
          <Column id="Check" type="INT" size="256"/>
          <Column id="reservNum" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="arrivDate" type="STRING" size="8"/>
          <Column id="lodgeDd" type="BIGDECIMAL" size="22"/>
          <Column id="chkotDate" type="STRING" size="8"/>
          <Column id="roomType" type="STRING" size="50"/>
          <Column id="rmQty" type="BIGDECIMAL" size="22"/>
          <Column id="psn" type="BIGDECIMAL" size="22"/>
          <Column id="psnUprice" type="BIGDECIMAL" size="50"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="amt" type="BIGDECIMAL" size="22"/>
          <Column id="discntAmt" type="BIGDECIMAL" size="22"/>
          <Column id="totAmt" type="BIGDECIMAL" size="22"/>
          <Column id="remark" type="NVARCHAR2" size="4000"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_goods" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_goods_oncolumnchanged">
        <ColumnInfo>
          <Column id="Check" type="INT" size="256"/>
          <Column id="reservNum" type="STRING" size="50"/>
          <Column id="fnbClass" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="50"/>
          <Column id="menuNm" type="STRING" size="256"/>
          <Column id="menuClass" type="STRING" size="50"/>
          <Column id="menuClsfi" type="STRING" size="50"/>
          <Column id="menuSclass" type="STRING" size="18"/>
          <Column id="adltPsn" type="BIGDECIMAL" size="22"/>
          <Column id="childPsn" type="BIGDECIMAL" size="22"/>
          <Column id="quantity" type="BIGDECIMAL" size="22"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="amt" type="BIGDECIMAL" size="22"/>
          <Column id="discntAmt" type="STRING" size="256"/>
          <Column id="totAmt" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="8"/>
          <Column id="endDate" type="STRING" size="8"/>
          <Column id="strTime" type="STRING" size="6"/>
          <Column id="endTime" type="STRING" size="6"/>
          <Column id="remark" type="STRING" size="2000"/>
          <Column id="vendorCd" type="STRING" size="50"/>
          <Column id="orderConfirm" type="STRING" size="1"/>
          <Column id="orderDate" type="STRING" size="8"/>
          <Column id="orderCancelDate" type="STRING" size="8"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_other" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_other_oncolumnchanged">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="fnbClass" type="STRING" size="256"/>
          <Column id="seq" type="BIGDECIMAL" size="256"/>
          <Column id="outletCd" type="STRING" size="256"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="256"/>
          <Column id="menuNm" type="STRING" size="256"/>
          <Column id="menuClass" type="STRING" size="256"/>
          <Column id="menuClsfi" type="STRING" size="256"/>
          <Column id="menuSclass" type="STRING" size="256"/>
          <Column id="adltPsn" type="STRING" size="256"/>
          <Column id="childPsn" type="STRING" size="256"/>
          <Column id="quantity" type="STRING" size="256"/>
          <Column id="uprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="discntAmt" type="STRING" size="256"/>
          <Column id="totAmt" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="endDate" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="vendorCd" type="STRING" size="256"/>
          <Column id="orderConfirm" type="STRING" size="256"/>
          <Column id="orderDate" type="STRING" size="256"/>
          <Column id="orderCancelDate" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reservMst" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_reservMst_oncolumnchanged">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="kindCd" type="STRING" size="256"/>
          <Column id="acceptDate" type="STRING" size="256"/>
          <Column id="reservStatus" type="STRING" size="256"/>
          <Column id="reservCd" type="STRING" size="256"/>
          <Column id="outletCd" type="STRING" size="256"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="reservNm" type="STRING" size="256"/>
          <Column id="rsvnNm" type="STRING" size="256"/>
          <Column id="did1" type="STRING" size="256"/>
          <Column id="did2" type="STRING" size="256"/>
          <Column id="did3" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="endDate" type="STRING" size="256"/>
          <Column id="timeCd" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="4"/>
          <Column id="endTime" type="STRING" size="4"/>
          <Column id="strTimeNm" type="STRING" size="256"/>
          <Column id="endTimeNm" type="STRING" size="256"/>
          <Column id="beginDate" type="STRING" size="256"/>
          <Column id="psn" type="BIGDECIMAL" size="256"/>
          <Column id="maxPsn" type="BIGDECIMAL" size="256"/>
          <Column id="patronNum" type="STRING" size="256"/>
          <Column id="guestName1" type="STRING" size="256"/>
          <Column id="guestName2" type="STRING" size="256"/>
          <Column id="amCd" type="STRING" size="256"/>
          <Column id="amNm" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="sapCustCd" type="STRING" size="256"/>
          <Column id="telNum" type="STRING" size="256"/>
          <Column id="telNum1" type="STRING" size="256"/>
          <Column id="telNum2" type="STRING" size="256"/>
          <Column id="telNum3" type="STRING" size="256"/>
          <Column id="handPhone" type="STRING" size="256"/>
          <Column id="handPhone1" type="STRING" size="256"/>
          <Column id="handPhone2" type="STRING" size="256"/>
          <Column id="handPhone3" type="STRING" size="256"/>
          <Column id="faxNum" type="STRING" size="256"/>
          <Column id="faxNum1" type="STRING" size="256"/>
          <Column id="faxNum2" type="STRING" size="256"/>
          <Column id="faxNum3" type="STRING" size="256"/>
          <Column id="emailAddr" type="STRING" size="256"/>
          <Column id="emailYn" type="STRING" size="256"/>
          <Column id="smsYn" type="STRING" size="256"/>
          <Column id="dmYn" type="STRING" size="256"/>
          <Column id="didYn" type="STRING" size="256"/>
          <Column id="vipYn" type="STRING" size="256"/>
          <Column id="addrKey" type="STRING" size="256"/>
          <Column id="addrInfo" type="STRING" size="256"/>
          <Column id="remarkFact" type="STRING" size="256"/>
          <Column id="remarkFnb" type="STRING" size="256"/>
          <Column id="remarkRoom" type="STRING" size="256"/>
          <Column id="remarkEtc" type="STRING" size="256"/>
          <Column id="remarkOutside" type="STRING" size="256"/>
          <Column id="prvsReservStatus" type="STRING" size="256"/>
          <Column id="outletPatronType" type="STRING" size="256"/>
          <Column id="outletConfirmTime" type="STRING" size="256"/>
          <Column id="outletConfirmor" type="STRING" size="256"/>
          <Column id="setQty" type="STRING" size="256"/>
          <Column id="fiscalCust" type="STRING" size="256"/>
          <Column id="cancelDate" type="STRING" size="256"/>
          <Column id="cancelReason" type="STRING" size="256"/>
          <Column id="prcgNm" type="STRING" size="256"/>
          <Column id="prcgDept" type="STRING" size="256"/>
          <Column id="custClass" type="STRING" size="256"/>
          <Column id="jobPosition" type="STRING" size="256"/>
          <Column id="prcgDeptNm" type="STRING" size="256"/>
          <Column id="custClassNm" type="STRING" size="256"/>
          <Column id="jobPositionNm" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">Y</Col>
            <Col id="insYn">Y</Col>
            <Col id="delYn">Y</Col>
            <Col id="savYn">Y</Col>
            <Col id="prtYn">Y</Col>
            <Col id="exlYn">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_amEmpNo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="amCd" type="STRING" size="256"/>
          <Column id="amNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reservMstValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_reservMst_oncolumnchanged">
        <ColumnInfo>
          <Column id="acceptDate" type="STRING" size="256"/>
          <Column id="reservNm" type="STRING" size="256"/>
          <Column id="rsvnNm" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="endDate" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
          <Column id="psn" type="STRING" size="256"/>
          <Column id="amCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="acceptDate">title:접수일자,required:true</Col>
            <Col id="amCd">title:S/MGR,required:true</Col>
            <Col id="psn">title:인원수,required:true,min:1</Col>
            <Col id="endTime">title:종료시간,required:true,digits:true,comparemax:strTime:시작 시간</Col>
            <Col id="strTime">title:시작시간,required:true</Col>
            <Col id="endDate">title:종료일,required:true,digits:true,comparemax:strDate:시작 일자,date:true</Col>
            <Col id="strDate">title:시작일,required:true,date:true</Col>
            <Col id="rsvnNm">title:예약자명,required:true</Col>
            <Col id="reservNm">title:행사명,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_paramInfoValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="reservDtFr" type="STRING" size="256"/>
          <Column id="reservDtTo" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="reservDtFr">title:시작일,required:true</Col>
            <Col id="reservDtTo">title:행사종료일,comparemax:reservDtFr:행사시작일,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_paramInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="reservDtFr" type="STRING" size="256"/>
          <Column id="reservDtTo" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="outletCd" type="STRING" size="256"/>
          <Column id="fnbClass" type="STRING" size="256"/>
          <Column id="amCd" type="STRING" size="256"/>
          <Column id="kindCd" type="STRING" size="256"/>
          <Column id="maskAuth" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reservTime" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_outside" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_outside_oncolumnchanged">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="fnbClass" type="STRING" size="256"/>
          <Column id="seq" type="BIGDECIMAL" size="256"/>
          <Column id="outletCd" type="STRING" size="256"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="256"/>
          <Column id="menuNm" type="STRING" size="256"/>
          <Column id="menuClass" type="STRING" size="256"/>
          <Column id="menuClsfi" type="STRING" size="256"/>
          <Column id="menuSclass" type="STRING" size="256"/>
          <Column id="adltPsn" type="STRING" size="256"/>
          <Column id="childPsn" type="STRING" size="256"/>
          <Column id="quantity" type="STRING" size="256"/>
          <Column id="uprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="discntAmt" type="STRING" size="256"/>
          <Column id="totAmt" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="endDate" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="vendorCd" type="STRING" size="256"/>
          <Column id="vendorNm" type="STRING" size="256"/>
          <Column id="orderConfirm" type="STRING" size="256"/>
          <Column id="orderDate" type="STRING" size="256"/>
          <Column id="orderCancelDate" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reservListChk" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="reservDate" type="STRING" size="256"/>
          <Column id="reservTime" type="STRING" size="256"/>
          <Column id="reservNm" type="STRING" size="256"/>
          <Column id="rsvnNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_function" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_function_oncolumnchanged">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="50"/>
          <Column id="functionClass" type="STRING" size="1"/>
          <Column id="managerCd" type="STRING" size="50"/>
          <Column id="serverCd" type="STRING" size="50"/>
          <Column id="chefCd" type="STRING" size="50"/>
          <Column id="weddingHall" type="STRING" size="50"/>
          <Column id="diningHall" type="STRING" size="50"/>
          <Column id="giftRoom" type="STRING" size="50"/>
          <Column id="waitingRoom" type="STRING" size="50"/>
          <Column id="husb" type="STRING" size="50"/>
          <Column id="husbFather" type="STRING" size="50"/>
          <Column id="husbMonther" type="STRING" size="50"/>
          <Column id="husbTelNum" type="STRING" size="4000"/>
          <Column id="husbTelNum1" type="STRING" size="250"/>
          <Column id="husbTelNum2" type="STRING" size="250"/>
          <Column id="husbTelNum3" type="STRING" size="250"/>
          <Column id="husbHandPhone" type="STRING" size="4000"/>
          <Column id="husbHandPhone1" type="STRING" size="250"/>
          <Column id="husbHandPhone2" type="STRING" size="250"/>
          <Column id="husbHandPhone3" type="STRING" size="250"/>
          <Column id="husbAddrKey" type="STRING" size="256"/>
          <Column id="husbAddrKeyInfo" type="STRING" size="256"/>
          <Column id="bride" type="STRING" size="50"/>
          <Column id="brideFather" type="STRING" size="50"/>
          <Column id="brideMonther" type="STRING" size="50"/>
          <Column id="brideTelNum" type="STRING" size="256"/>
          <Column id="brideTelNum1" type="STRING" size="256"/>
          <Column id="brideTelNum2" type="STRING" size="256"/>
          <Column id="brideTelNum3" type="STRING" size="256"/>
          <Column id="brideHandPhone" type="STRING" size="256"/>
          <Column id="brideHandPhone1" type="STRING" size="256"/>
          <Column id="brideHandPhone2" type="STRING" size="256"/>
          <Column id="brideHandPhone3" type="STRING" size="256"/>
          <Column id="brideAddrKey" type="STRING" size="256"/>
          <Column id="brideAddrKeyInfo" type="STRING" size="256"/>
          <Column id="pacnNoMan" type="BIGDECIMAL" size="22"/>
          <Column id="vipNmsngl" type="STRING" size="100"/>
          <Column id="mikeQuantity" type="BIGDECIMAL" size="22"/>
          <Column id="edgeYn" type="STRING" size="1"/>
          <Column id="societyYn" type="STRING" size="1"/>
          <Column id="seatgstYn" type="STRING" size="1"/>
          <Column id="radioYn" type="STRING" size="1"/>
          <Column id="husbCd" type="STRING" size="50"/>
          <Column id="husbRemark" type="STRING" size="100"/>
          <Column id="brideCd" type="STRING" size="50"/>
          <Column id="brideRemark" type="STRING" size="100"/>
          <Column id="spclFact" type="STRING" size="2000"/>
          <Column id="consultingYn" type="STRING" size="1"/>
          <Column id="intdYn" type="STRING" size="1"/>
          <Column id="secndYn" type="STRING" size="1"/>
          <Column id="threeYn" type="STRING" size="1"/>
          <Column id="roomRemark" type="STRING" size="4000"/>
          <Column id="seminarRemark" type="NVARCHAR2" size="4000"/>
          <Column id="fnbRemark" type="NVARCHAR2" size="4000"/>
          <Column id="specialRemark" type="STRING" size="2000"/>
          <Column id="addFact" type="STRING" size="4000"/>
          <Column id="rmrkFact" type="STRING" size="4000"/>
          <Column id="tmchfSpeak" type="NVARCHAR2" size="4000"/>
          <Column id="gmSpeak" type="STRING" size="4000"/>
          <Column id="foodDiscnt" type="BIGDECIMAL" size="22"/>
          <Column id="bevgDiscnt" type="BIGDECIMAL" size="22"/>
          <Column id="etcDiscnt" type="BIGDECIMAL" size="22"/>
          <Column id="discntReason" type="STRING" size="2000"/>
          <Column id="taxBill" type="STRING" size="1"/>
          <Column id="cashSettle" type="STRING" size="1"/>
          <Column id="cardSettle" type="STRING" size="1"/>
          <Column id="crdtDd" type="STRING" size="8"/>
          <Column id="expectAmt" type="BIGDECIMAL" size="22"/>
          <Column id="actualAmt" type="BIGDECIMAL" size="22"/>
          <Column id="endContents" type="STRING" size="4000"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_goodsValid" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_goods_oncolumnchanged">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="menuCd" type="STRING" size="50"/>
          <Column id="strDate" type="STRING" size="8"/>
          <Column id="strTime" type="STRING" size="6"/>
          <Column id="endTime" type="STRING" size="6"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:사업장,required:true</Col>
            <Col id="menuCd">title:메뉴,required:true</Col>
            <Col id="strDate">title:시작일자,required:true,date:true</Col>
            <Col id="strTime">title:시작시간,required:true</Col>
            <Col id="endTime">title:종료시간,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_roomValid" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_room_oncolumnchanged">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="arrivDate" type="STRING" size="8"/>
          <Column id="lodgeDd" type="BIGDECIMAL" size="22"/>
          <Column id="chkotDate" type="STRING" size="8"/>
          <Column id="roomType" type="STRING" size="50"/>
          <Column id="rmQty" type="BIGDECIMAL" size="22"/>
          <Column id="psn" type="BIGDECIMAL" size="22"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:사업장,required:true</Col>
            <Col id="arrivDate">title:도착일자,required:true,date:true</Col>
            <Col id="chkotDate">title:최실일자,required:true,date:true</Col>
            <Col id="lodgeDd">title:박수,required:true,max:1</Col>
            <Col id="roomType">title:객실타입,required:true,</Col>
            <Col id="rmQty">title:객실수,required:true,</Col>
            <Col id="psn">title:인원수,required:true,</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_otherValid" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_other_oncolumnchanged">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:사업장,required:true</Col>
            <Col id="menuCd">title:메뉴,required:true</Col>
            <Col id="strDate">title:시작일자,required:true,date:true</Col>
            <Col id="strTime">title:시작시간,required:true</Col>
            <Col id="endTime">title:종료시간,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_outsideValid" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_outside_oncolumnchanged">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
          <Column id="vendorCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:사업장,required:true</Col>
            <Col id="menuCd">title:메뉴,required:true</Col>
            <Col id="strDate">title:시작일자,required:true,date:true</Col>
            <Col id="strTime">title:시작시간,required:true</Col>
            <Col id="endTime">title:종료시간,required:true</Col>
            <Col id="vendorCd">title:거래처,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_banquetRoom" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_banquetRoom_oncolumnchanged">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="50"/>
          <Column id="kindCd" type="STRING" size="256"/>
          <Column id="reservStatus" type="STRING" size="256"/>
          <Column id="fnbClass" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="50"/>
          <Column id="menuNm" type="STRING" size="256"/>
          <Column id="menuClass" type="STRING" size="50"/>
          <Column id="menuClsfi" type="STRING" size="50"/>
          <Column id="menuSclass" type="STRING" size="18"/>
          <Column id="adltPsn" type="BIGDECIMAL" size="22"/>
          <Column id="childPsn" type="BIGDECIMAL" size="22"/>
          <Column id="quantity" type="BIGDECIMAL" size="22"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="amt" type="BIGDECIMAL" size="22"/>
          <Column id="discntAmt" type="STRING" size="256"/>
          <Column id="totAmt" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="8"/>
          <Column id="endDate" type="STRING" size="8"/>
          <Column id="strTime" type="STRING" size="6"/>
          <Column id="endTime" type="STRING" size="6"/>
          <Column id="remark" type="STRING" size="2000"/>
          <Column id="vendorCd" type="STRING" size="50"/>
          <Column id="orderConfirm" type="STRING" size="1"/>
          <Column id="orderDate" type="STRING" size="8"/>
          <Column id="orderCancelDate" type="STRING" size="8"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_banquetRoomValid" preload="true" updatecontrol="true" useclientlayout="true" oncolumnchanged="ds_goods_oncolumnchanged">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="menuCd" type="STRING" size="50"/>
          <Column id="strDate" type="STRING" size="8"/>
          <Column id="endDate" type="STRING" size="8"/>
          <Column id="strTime" type="STRING" size="6"/>
          <Column id="endTime" type="STRING" size="6"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:사업장,required:true</Col>
            <Col id="menuCd">title:연회장/연회룸,required:true</Col>
            <Col id="strDate">title:시작일자,required:true,date:true</Col>
            <Col id="endDate">title:종료일자,required:true,date:true</Col>
            <Col id="strTime">title:시작시간,required:true</Col>
            <Col id="endTime">title:종료시간,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset enableevent="true" firefirstcount="0" firenextcount="0" id="ds_total" preload="true" updatecontrol="true" useclientlayout="true">
        <ColumnInfo>
          <Column id="bnqQty" type="STRING" size="256"/>
          <Column id="bnqAmt" type="STRING" size="256"/>
          <Column id="fnbQty" type="BIGDECIMAL" size="256"/>
          <Column id="fnbAmt" type="BIGDECIMAL" size="256"/>
          <Column id="etcQty" type="BIGDECIMAL" size="256"/>
          <Column id="etcAmt" type="BIGDECIMAL" size="256"/>
          <Column id="outQty" type="BIGDECIMAL" size="256"/>
          <Column id="outAmt" type="BIGDECIMAL" size="256"/>
          <Column id="roomQty" type="BIGDECIMAL" size="256"/>
          <Column id="roomAmt" type="BIGDECIMAL" size="256"/>
          <Column id="totAmt" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_paramInfoDuplication" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="256"/>
          <Column id="kindCd" type="STRING" size="256"/>
          <Column id="fnbClass" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="endDate" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_file" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="refSeq" type="STRING" size="256"/>
          <Column id="appendSeq" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="fileSize" type="STRING" size="256"/>
          <Column id="fileExt" type="STRING" size="256"/>
          <Column id="encYn" type="STRING" size="256"/>
          <Column id="fileDesc" type="STRING" size="256"/>
          <Column id="fileUploadNm" type="STRING" size="256"/>
          <Column id="chk" type="INT" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_approvalList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="refSys" type="STRING" size="50"/>
          <Column id="refNo" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="reqDocCd" type="STRING" size="2"/>
          <Column id="reqWcc" type="STRING" size="1"/>
          <Column id="reqCardNo" type="STRING" size="40"/>
          <Column id="reqDiv" type="STRING" size="2"/>
          <Column id="reqApprovalDt" type="STRING" size="6"/>
          <Column id="reqApprovalNo" type="STRING" size="12"/>
          <Column id="reqAmt" type="BIGDECIMAL" size="22"/>
          <Column id="reqCharge" type="BIGDECIMAL" size="22"/>
          <Column id="reqVat" type="BIGDECIMAL" size="22"/>
          <Column id="reqPosNo" type="STRING" size="20"/>
          <Column id="docCd" type="STRING" size="2"/>
          <Column id="resCd" type="STRING" size="4"/>
          <Column id="tid" type="STRING" size="8"/>
          <Column id="wcc" type="STRING" size="1"/>
          <Column id="cardDataEnc" type="STRING" size="200"/>
          <Column id="cardNoEnc" type="STRING" size="200"/>
          <Column id="div" type="STRING" size="2"/>
          <Column id="amt" type="BIGDECIMAL" size="22"/>
          <Column id="charge" type="BIGDECIMAL" size="22"/>
          <Column id="vat" type="BIGDECIMAL" size="22"/>
          <Column id="approvalNo" type="STRING" size="12"/>
          <Column id="approvalDt" type="STRING" size="12"/>
          <Column id="issueCpnCd" type="STRING" size="3"/>
          <Column id="cardCpnNm" type="STRING" size="20"/>
          <Column id="memberCd" type="STRING" size="12"/>
          <Column id="purchaseCpnCd" type="STRING" size="3"/>
          <Column id="purchaseCpnNm" type="STRING" size="20"/>
          <Column id="posNo" type="STRING" size="20"/>
          <Column id="dscDiv" type="STRING" size="1"/>
          <Column id="msg" type="STRING" size="2000"/>
          <Column id="cuser" type="STRING" size="20"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="20"/>
          <Column id="udate" type="DATETIME" size="7"/>
          <Column id="payStatus" type="STRING" size="256"/>
          <Column id="payCd" type="STRING" size="256"/>
          <Column id="payCancelYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payMst" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="salesDate" type="STRING" size="8"/>
          <Column id="receiptNum" type="STRING" size="50"/>
          <Column id="salsClass" type="STRING" size="50"/>
          <Column id="payCd" type="STRING" size="50"/>
          <Column id="payAmt" type="BIGDECIMAL" size="22"/>
          <Column id="exchAmt" type="BIGDECIMAL" size="22"/>
          <Column id="netAmt" type="BIGDECIMAL" size="22"/>
          <Column id="txfrAmt" type="BIGDECIMAL" size="22"/>
          <Column id="notaxAmt" type="BIGDECIMAL" size="22"/>
          <Column id="svc" type="BIGDECIMAL" size="22"/>
          <Column id="specTax" type="BIGDECIMAL" size="22"/>
          <Column id="eduTax" type="BIGDECIMAL" size="22"/>
          <Column id="ffTax" type="BIGDECIMAL" size="22"/>
          <Column id="vat" type="BIGDECIMAL" size="22"/>
          <Column id="fund" type="BIGDECIMAL" size="22"/>
          <Column id="wonAmt" type="BIGDECIMAL" size="22"/>
          <Column id="vanClass" type="STRING" size="50"/>
          <Column id="cashReceipt" type="STRING" size="50"/>
          <Column id="trackData" type="STRING" size="50"/>
          <Column id="payBasi" type="STRING" size="50"/>
          <Column id="payDspl" type="STRING" size="50"/>
          <Column id="validTerm" type="STRING" size="8"/>
          <Column id="keyinYn" type="STRING" size="1"/>
          <Column id="alltTerm" type="STRING" size="50"/>
          <Column id="apprvNum" type="STRING" size="50"/>
          <Column id="apprvKeyinYn" type="STRING" size="1"/>
          <Column id="apprvDdtt" type="DATETIME" size="7"/>
          <Column id="frncStorNum" type="STRING" size="50"/>
          <Column id="buycpnyCd" type="STRING" size="50"/>
          <Column id="buycpnyNm" type="STRING" size="50"/>
          <Column id="issuecpnyCd" type="STRING" size="50"/>
          <Column id="issuecpnyNm" type="STRING" size="50"/>
          <Column id="apprvNotice" type="STRING" size="50"/>
          <Column id="apprvMsg" type="STRING" size="100"/>
          <Column id="signYn" type="STRING" size="1"/>
          <Column id="vanCd" type="STRING" size="50"/>
          <Column id="trmlId" type="STRING" size="50"/>
          <Column id="chinaCardYn" type="STRING" size="1"/>
          <Column id="wonapprvNum" type="STRING" size="50"/>
          <Column id="wonapprvDate" type="STRING" size="8"/>
          <Column id="payCancelYn" type="STRING" size="1"/>
          <Column id="payDdtt" type="DATETIME" size="7"/>
          <Column id="salsYn" type="STRING" size="1"/>
          <Column id="payDiscntArPayCd" type="STRING" size="50"/>
          <Column id="payDiscntRat" type="BIGDECIMAL" size="22"/>
          <Column id="payDiscntOffline" type="STRING" size="1"/>
          <Column id="frexClass" type="STRING" size="50"/>
          <Column id="frexRat" type="BIGDECIMAL" size="22"/>
          <Column id="frexAmt" type="BIGDECIMAL" size="22"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="ref1" type="STRING" size="100"/>
          <Column id="ref2" type="STRING" size="100"/>
          <Column id="ref3" type="STRING" size="100"/>
          <Column id="ref4" type="STRING" size="100"/>
          <Column id="ref5" type="STRING" size="100"/>
          <Column id="controlYn" type="STRING" size="1"/>
          <Column id="useYn" type="STRING" size="1"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="cuser" type="STRING" size="20"/>
          <Column id="udate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="20"/>
          <Column id="empNo" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_paymentInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="O_RTN" type="STRING" size="256"/>
          <Column id="O_MESSAGE" type="STRING" size="256"/>
          <Column id="oRtn" type="STRING" size="256"/>
          <Column id="oMessage" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : EventMgmt
  파 일 명 : EventMgmt.xfdl
  기    능 : 예약등록

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2015.07.09   박대영   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";
include "lib::SCKicc.xjs";
/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_gridFlag=false;
var fv_reservNum="";
var v_arg;
/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{
    // Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
    gfn_formOnLoad(this);
    // 권한설정
	edt_tm.applyAuthLevel(cbo_mu);
	edt_upjang.applyAuthLevel(edt_tm);
	edt_upjang.setForcedRoleSet("OutletUpjang");
	
    v_arg = gfn_getScreenParams();
     
    // 초기값 셋팅
	fn_init();
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 예약현황에서 호출 시 실행
 *---------------------------------------------------------------------------------------------*/
function fn_getScreenParams(arrArg)
{
    v_arg = arrArg;
	 
    if (typeof v_arg != "undefined" && v_arg != null && v_arg != "")
    {
        if (v_arg[0] != "")
        { 
			fv_reservNum = v_arg[0];
            cal_serchDateFr.fn_initMonthCal(this, v_arg[1], "fn_calendarCallBackFr", null, null, "Y");	//검색 시작 일자
			cal_serchDateTo.fn_initMonthCal(this, v_arg[2], "fn_calendarCallBackTo", null, null, "Y");	//검색 종료 일자
			cbo_mu.setMuCode(v_arg[3]);
			edt_tm.setTmCode(v_arg[4]);
            edt_upjang.setUpjangCode(v_arg[5]);
            edt_serAm.uCode = v_arg[6];
            edt_serAm.value = v_arg[7];
            cbo_searchKindCd.value=v_arg[8];
            fn_search();
            
        }
    }
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	 //여러개는 ;구분한다.
	 v_ds_check = "ds_reservMst;ds_goods;ds_room;ds_other;ds_outside;ds_banquetRoom;ds_file";
	 
	// 첨부파일 연결
    tab_master.tab_file.ObjAtchFile.setDataset("ds_file");
     
	
	//grid, dataset Clear
	gfn_clearSortMark(grd_eventList);
	gfn_clearSortMark(tab_master.tab_fnb.grd_fnb);
	gfn_clearSortMark(tab_master.tab_room.grd_room);
	gfn_clearSortMark(tab_master.tab_other.grd_other);
	gfn_clearSortMark(tab_master.tab_outside.grd_outside);
	gfn_clearSortMark(tab_master.tab_banquetRoom.grd_banquetRoom);

	ds_reservMst.clearData();
	ds_goods.clearData();
	ds_room.clearData();
	ds_other.clearData();
	ds_outside.clearData();
	ds_total.clearData();
	ds_reservList.clearData();
	ds_banquetRoom.clearData();
	
	//날자  
 	cal_serchDateFr.fn_initMonthCal(this, fv_sToday, "fn_calendarCallBackFr", null, null, "Y");
 	cal_serchDateTo.fn_initMonthCal(this, fv_sToday, "fn_calendarCallBackTo", null, null, "Y");
 	SCCombo.bind(this, "ComCode", "cbo_searchKindCd",   null, {groupCode:"BMS_0013", useYn:"Y",defVal:""},SCCombo.CHOOSE);
 	
 	//입력화면 세팅작업
 	SCCombo.bind(this, "ComCode", "cbo_reservCd",      	null, {groupCode:"BMS_0005", useYn:"Y",defVal:"firstrow"});	                //행사종류
 	SCCombo.bind(this, "ComCode", "cbo_prcgDept",      	null, {groupCode:"BMS_0009", useYn:"Y",defVal:"firstrow"},SCCombo.CHOOSE);	//부서명
 	SCCombo.bind(this, "ComCode", "cbo_jobPosition",    null, {groupCode:"BMS_0010", useYn:"Y",defVal:"firstrow"},SCCombo.CHOOSE);	//직위
 	SCCombo.bind(this, "ComCode", "cbo_custClass",      null, {groupCode:"BMS_0006", useYn:"Y",defVal:"firstrow"},SCCombo.CHOOSE);	//거래처구분
 	SCCombo.bind(this, "ComCode", "cbo_kindCd",      	null, {groupCode:"BMS_0013", useYn:"Y",defVal:"firstrow"});	                //행사종류 1:연회,2웨딩,3캐이터링 여기서는 1,3만 필요
 	SCCombo.bind(this, "ComCode", "cbo_reservStatus",   null, {groupCode:"BMS_0016", useYn:"Y",defVal:"1"});	                    //예약상태
 	
 	cal_strDate.fn_initMonthCal(this, fv_sToday,    "fn_calendarCallBackStr", ds_reservMst, "strDate",    "Y"); //예약일자FR
 	cal_endDate.fn_initMonthCal(this, fv_sToday,    "fn_calendarCallBackEnd", ds_reservMst, "endDate",    "Y"); //예약일자TO
 	cal_acceptDate.fn_initMonthCal(this, fv_sToday, "fn_calendarCallBackAcc", ds_reservMst, "acceptDate", "Y"); //접수일자	
 	
 	SCCombo.bind(this, "ComCode", "cbo_strTime",      	null, {groupCode:"BMS_0015", useYn:"Y",defVal:"firstrow"});	                //행사시작시간
 	SCCombo.bind(this, "ComCode", "cbo_endTime",      	null, {groupCode:"BMS_0015", useYn:"Y",defVal:"firstrow"});	                //행사종료시간
 	
 	SCCombo.bind(this, "ComCode", "tab_master.tab_room.grd_room.roomType",  null, {groupCode:"BMS_0014", useYn:"Y",defVal:"firstrow"});	//room type
 	
 	fnc_reservTimeRead();
 	
 	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
// function fn_close()
// {	
//  
// }


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
	// 조회시 Validation Check

	ds_paramInfo.clearData();
	var nIdx = ds_paramInfo.addRow();
	ds_paramInfo.setColumn(nIdx, "reservDtFr", gfn_nvl(cal_serchDateFr.fn_getValue(),""));
	ds_paramInfo.setColumn(nIdx, "reservDtTo", gfn_nvl(cal_serchDateTo.fn_getValue(),""));
	ds_paramInfo.setColumn(nIdx, "muCd",  gfn_nvl(cbo_mu.getMuCode(),""));
	ds_paramInfo.setColumn(nIdx, "tmCd",  gfn_nvl(edt_tm.getTmCode(),""));
	ds_paramInfo.setColumn(nIdx, "outletCd",  gfn_nvl(edt_upjang.getUpjangCode(),""));
	ds_paramInfo.setColumn(nIdx, "amCd",  gfn_nvl(edt_serAm.uCode ,""));
	ds_paramInfo.setColumn(nIdx, "kindCd",  gfn_nvl(cbo_searchKindCd.value ,""));
	
	ds_paramInfo.setColumn(nIdx, "maskAuth", SCAuth.getMaskAuth(this));
	
	if (gfn_validCheck(ds_paramInfo, ds_paramInfoValid) == false)	return;	//기본자료는 꼭 입력되어야 함

	//trace(gfn_nvl(cbo_searchKindCd.value ,""));
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_eventList);
	ds_reservList.clearData();
	
    var strSvcID    = "search";
	var strURL      = "rc/bms/eventMgmt/reservList.xdo";
	var strInDs     = "ds_paramInfo=ds_paramInfo:A";
	var strOutDs    = "ds_reservList=ds_reservList";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}


function fn_selectList()
{ 
	//왼쪽 내역을 클릭하는 경우 상세 내역을 검색 한다.
 
 	gfn_clearSortMark(tab_master.tab_fnb.grd_fnb);
	gfn_clearSortMark(tab_master.tab_room.grd_room);
	gfn_clearSortMark(tab_master.tab_other.grd_other);
	gfn_clearSortMark(tab_master.tab_outside.grd_outside);
	gfn_clearSortMark(tab_master.tab_banquetRoom.grd_banquetRoom);

	ds_reservMst.clearData();
	ds_goods.clearData();
	ds_room.clearData();
	ds_other.clearData();
	ds_outside.clearData();
	ds_total.clearData();
	ds_banquetRoom.clearData();
	ds_file.clearData();

	var strSvcID    = "searchList";
	var strURL      = "rc/bms/eventMgmt/selectList.xdo";
	var strInDs     = "ds_paramInfo=ds_paramInfo:A";
	var strOutDs    = "ds_reservMst=ds_reservMst ds_banquetRoom=ds_banquetRoom ds_goods=ds_goods" 
	                + " ds_room=ds_room ds_other=ds_other ds_outside=ds_outside ds_function=ds_function ds_file=ds_file ds_approvalList=ds_approvalList";
	var strArg      = ""
	var strCallback = "fn_callBack";
	var bAsync      = true;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
	
	 
}
 
/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{	
	  //업장이 없는 경우 입력 불가
	 if (gfn_nvl(edt_upjang.getUpjangCode(),"") =="")
	 {
		gfn_alert("msg.noselect","사업장");
		return;
	 }
	 
	 //변경 또는 입력중에 입력(추가) 버튼을 누른 경우 
	var nRow = ds_reservMst.rowposition;
 	if (ds_reservMst.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
	{
		//var sMsg = "입력중 입니다. \r예를 누르면 입력중인 데이터가 사라집니다. \r진행 하시겠습니까?"; 
		if ( gfn_confirm("rc.bms.err.updateAfter", "확인", "C") == false) return;	
		 
	}
	
	ds_reservMst.clearData();
	ds_goods.clearData();
	ds_room.clearData();
	ds_other.clearData();
	ds_outside.clearData();
	ds_total.clearData();
	ds_banquetRoom.clearData();
	ds_function.clearData();
	ds_file.clearData();
	
	//data 추가및 기본값 설정 
	var nRow = ds_reservMst.addRow();
	ds_reservMst.setColumn(nRow,"outletCd",gfn_nvl(edt_upjang.getUpjangCode(),""));	//업장
	ds_reservMst.setColumn(nRow,"outletNm",gfn_nvl(edt_upjang.getUpjangName(),""));	//업장
	ds_reservMst.setColumn(nRow,"useYn","1");	//사용여부
	
	//신규행을 발생한 경우에 반드시 처리
	ds_reservMst.setColumn(nRow, "addrInfo", cmp_addr.newData());	//주소처리을위해 해당 필드 초기화
	ds_reservMst.setColumn(nRow, "acceptDate",fv_sToday);			//접수일자 오늘로 세팅
	ds_reservMst.setColumn(nRow, "strDate",fv_sToday);				//예약시작일자 오늘로 세팅
	ds_reservMst.setColumn(nRow, "endDate",fv_sToday);				//예약종료일자 오늘로 세팅
	ds_reservMst.setColumn(nRow, "reservStatus","1");  	            //신규는 예약으로 세팅 (1:예약 2:확정 3:종료 4:취소)
	ds_reservMst.setColumn(nRow, "kindCd","1");                     //행사종류 기본값으로 연회 세팅 (1:연회,2웨딩,3캐이터링 )
	ds_reservMst.setColumn(nRow, "psn","1");						//최소인원수
	
	//function sheet 에 저장 한다.
	var nRow = ds_function.addRow();
	ds_function.setColumn(nRow, "functionClass","1");                     //행사종류 기본값으로 연회 세팅 (1:연회,2웨딩,3캐이터링 )
	ds_function.setColumn(nRow, "useYn","1");
	
	//세팅값을 정확히 모르는 경우 공통코드에 입력된 세팅값이 변경 될수 있는 항목들
	cbo_reservCd.index=0;	//행사종류
	cbo_prcgDept.index=0;	//부서명
	cbo_jobPosition.index=0;	//직위
	cbo_custClass.index=0;	//거래처구분

	//로그인 사원이 AM이면 자동으로 세팅 한다.
  	fn_amSetting();
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{

	if (!gfn_dsIsUpdated(ds_reservMst) && !gfn_dsIsUpdated(ds_goods) && !gfn_dsIsUpdated(ds_room) &&
		!gfn_dsIsUpdated(ds_other) && !gfn_dsIsUpdated(ds_outside) && !gfn_dsIsUpdated(ds_banquetRoom) && 
		!gfn_dsIsUpdated(ds_file)  && !gfn_dsIsUpdated(ds_function) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
	// 저장시 Validation Check	
	if (gfn_validCheck(ds_reservMst, ds_reservMstValid) == false)	return;
	if (gfn_validCheck(ds_goods, ds_goodsValid) == false)	return;
	if (gfn_validCheck(ds_room, ds_roomValid) == false)	return;
	if (gfn_validCheck(ds_other, ds_otherValid) == false)	return;
	if (gfn_validCheck(ds_outside, ds_outsideValid) == false)	return;
	if (gfn_validCheck(ds_banquetRoom, ds_banquetRoomValid) == false)	return;
	if (ds_banquetRoom.rowcount == 0)  //연회룸이 없는 경우는 저장 불가
	{
		//gfn_alert("연회룸 자료가 없습니다. \r연회룸 최소 1건은 존재 해야 저장 가능 합니다.");	 
		//<UxDatasetClipBoard>
//   <Row>
//     <Col id="ID">rc.bms.err.saveAfter</Col>
//     <Col id="TEXT">연회룸 자료가 없습니다. @연회룸 최소 1건은 존재 해야 저장 가능 합니다.</Col>
//   </Row>

		gfn_alert("rc.bms.err.saveAfter");	 
 		return;
	}
	//확정인경우 확정일자 추가
	var statusNm = ds_reservMst.getColumn(ds_reservMst.rowposition, "reservStatus");  	            //신규는 예약으로 세팅 (1:예약 2:확정 3:종료 4:취소)
	if (statusNm == "2")
	{
		ds_reservMst.setColumn(ds_reservMst.rowposition, "beginDate",fv_sToday);
	}
	
	if(tab_master.tab_file.ObjAtchFile.fn_countDs("insert") > 0)
	{	
		var rtn = tab_master.tab_file.ObjAtchFile.fn_uploadFile();		
		if (rtn < 0)	return;
	}
	
	
	var strSvcID    = "save";
    var strURL      = "rc/bms/eventMgmt/saveData.xdo";
    var strInDs     = "ds_reservMst=ds_reservMst:U ds_banquetRoom=ds_banquetRoom:U ds_goods=ds_goods:U"
					+ " ds_room=ds_room:U ds_other=ds_other:U ds_outside=ds_outside:U ds_function=ds_function:U ds_file=ds_file:A";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);

}
 
/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
	if(ds_reservMst.rowposition == -1) 
	{
		gfn_alert("rc.bms.err.addAfter", "확인");	// 기본 정보 입력후 등록이 가능 합니다.
		return;
	}

	var sRow     = ds_reservMst.rowposition;
	var reservNum = gfn_nvl(ds_reservMst.getColumn(sRow ,"reservNum"),"");
	if (reservNum == "")
	{
		gfn_alert("저장후 작업 하십시오.", "확인");	// 기본 정보 입력후 등록이 가능 합니다.
		return;
	}
	  
	var arrParam = new Array();
	arrParam[0] = reservNum;
	var rtnVal = gfn_dialog("BanquetReport"				// dialogId
					   , "X_BMS::BanquetReportPop.xfdl"	// Url 
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
	
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		//로그인 사원이 AM인경우 초기값 세팅
		case "searchAmEmpNo":
			if (ds_amEmpNo.rowcount>0)
			{
				ds_reservMst.setColumn(ds_reservMst.rowposition, "amCd", ds_amEmpNo.getColumn(ds_amEmpNo.rowposition,"amCd"));
				ds_reservMst.setColumn(ds_reservMst.rowposition, "amNm", ds_amEmpNo.getColumn(ds_amEmpNo.rowposition,"amNm"));
			}
			else
			{
				ds_reservMst.setColumn(ds_reservMst.rowposition, "amCd","");
				ds_reservMst.setColumn(ds_reservMst.rowposition, "amNm","");
			}
						
			break;
        case "search" :
            //왼쪽 내역이 검색되면 예약번호가 존재 했을경우 해당 위치로 이동 한다.
            var iFindRowIdx = ds_reservList.findRow( "reservNum", fv_reservNum );								 
			if (iFindRowIdx != -1) //존재 한다는것임
			{ 
				ds_reservList.rowposition=iFindRowIdx
			}	
			fv_reservNum="";
            break;
        case "searchList":
			fnc_reservTime();  //시간처리
			fn_totalComp();   //합계처리
			break;
        case "reservsearch":
        
			break;
        case "searchTime":
			fn_getScreenParams(v_arg);
			break;
		//비동기식으로 처리한다.
		case "reservDuplicationCheck":
			break;
		//중복체크
		case "reservDuplicationCheckMst":
			 
			var nRowCnt = ds_reservListChk.rowcount;
			if (nRowCnt > 0 ) 
			{
				var nRow = ds_reservListChk.rowposition;
				if (gfn_nvl(ds_reservListChk.getColumn(nRow,"reservNum")) !=  gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"reservNum"),""))
				{
					var sMsg = "** 중복 예약 **   \r 예약번호 : " + ds_reservListChk.getColumn(nRow,"reservNum")
												+ "\r 행사명칭 : " + ds_reservListChk.getColumn(nRow,"reservNm")
												+ "\r 예약일자 : " + ds_reservListChk.getColumn(nRow,"reservDate") + " (" + ds_reservListChk.getColumn(nRow,"reservTime") + ")"
												+ "\r 예약자명 : " + ds_reservListChk.getColumn(nRow,"rsvnNm");
					gfn_alert(sMsg, "중복", "A");
					return;
				}
			}
			break;
        // 저장
        case "save" :
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			//예약번호가 존재 하는 경우 항상 예약 위치로 이동 한다.
			//fv_reservNum = ds_reservMst.getColumn(ds_reservMst.rowposition,"reservNum");
			fn_search();
            break;    

		//카드.현금 승인후
		case "selectApprovalData" :
			fn_paySave();
			break;
		//결제 완료 되면처리함
		case "savePaymeny" :
			
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			var oRtn = ds_paymentInfo.getColumn(ds_paymentInfo.rowposition,"oRtn");
			var oMessage = ds_paymentInfo.getColumn(ds_paymentInfo.rowposition,"oMessage");
			var pRtn = ds_paymentInfo.getColumn(ds_paymentInfo.rowposition,"O_Rtn");
			var pMessage = ds_paymentInfo.getColumn(ds_paymentInfo.rowposition,"O_Message");
			if (oRtn == "FALSE")
			{
				gfn_alert(oMessage +"/r 회계에 처리되지 않았습니다.");
			}
			if (pRtn == "FALSE")
			{
				gfn_alert(pMessage +"/r 회계에 처리되지 않았습니다.");
			}
			tab_master.tab_pay.msk_payAmt.value="";
			fn_paySelect();
			break;
		case "searchPayment" :
			break;
    }
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 달력 선택 후 callback function
 *---------------------------------------------------------------------------------------------*/
function fn_calendarCallBackFr()
{

}
function fn_calendarCallBackTo()
{

}
function fn_calendarCallBackStr()
{

}
function fn_calendarCallBackEnd()
{

}
function fn_calendarCallBackAcc()
{

}

/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/

//로그인 사원이 AM이면 DEFAULT로 세팅 한다.
function fn_amSetting()
{
	ds_amEmpNo.clearData();
	
	var strSvcID    = "searchAmEmpNo";
    var strURL      = "rc/bms/basAmMgmt/amEmpNoSearch.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_amEmpNo=ds_amEmpNo";
    var strArg      = "empNum="    + gfn_nvl(g_EmpNo ,"")
                    + " maskAuth=" + SCAuth.getMaskAuth(this);
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}
 
/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/

/*----------------------------------------------------------------------------------------------
 * 설명      : 사업부 변경되는 경우
 *---------------------------------------------------------------------------------------------*/
function fn_muChange(obj, event)
{
	edt_tm.setTmCode("");
	edt_upjang.setUpjangCode("");
	fn_clearDataSet();  
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 팀(운영부서) 변경되는 경우
 *---------------------------------------------------------------------------------------------*/
function fn_tmChange(obj, data)
{
	edt_upjang.setUpjangCode("");
	fn_clearDataSet();  
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 업장(사업장) 변경되는 경우
 *---------------------------------------------------------------------------------------------*/
function fn_upjangChange(obj,data)
{
	 
	fn_clearDataSet();  
}  

function fn_clearDataSet()
{
	ds_reservMst.clearData();
	ds_function.clearData();
	ds_reservMst.clearData();
	ds_goods.clearData();
	ds_room.clearData();
	ds_other.clearData();
	ds_outside.clearData();
	ds_total.clearData();
	ds_banquetRoom.clearData();
	ds_function.clearData();
	ds_file.clearData();
}
/*----------------------------------------------------------------------------------------------
 * 설명      : AM검색후 삭제 하는 경우
 *---------------------------------------------------------------------------------------------*/ 
function edt_serAm_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13) btn_teamCd_onclick();
	if ((e.keycode == 46) || (e.keycode == 8)) 
	{
		edt_serAm.uCode = "";   //코드
		edt_serAm.value = "";    //명	
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명      : AM 선택 버튼을 누른 경우
 *---------------------------------------------------------------------------------------------*/
function btn_searchAm_onclick(obj:Button,  e:ClickEventInfo)
{
	var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_BMS::AmPop.xfdl"			// Url
					   , null			// 배열
					   , null, null, null, null, null, false, true, -1);
 
	if (typeof rtnVal != "undefined" && rtnVal != null) 
	{
		if (rtnVal[0] == "OK")
		{	
			edt_serAm.uCode = rtnVal[1];
			edt_serAm.value = rtnVal[2];
			 
		}
	}
}
  
/*----------------------------------------------------------------------------------------------
 * 설명      : 시간이 변경되면 그리드에서 사용할 시간을 세팅 한다.
 *              그리드에서는 예약시간의 범위내에서만 선택 가능 하게 하기 위해서임.
 *---------------------------------------------------------------------------------------------*/
function fnc_reservTime()
{
	var nRow = ds_reservMst.rowposition;
	var strTime = gfn_nvl(ds_reservMst.getColumn(nRow, "strTime"),"");
	var endTime = gfn_nvl(ds_reservMst.getColumn(nRow, "endTime"),"");
	
	ds_reservTime.filter("code >= " + strTime + " && code <= " + endTime );
	//trace("code >= " + strTime + " && code <= " + endTime ); 
	 
}
function fnc_reservTimeRead()
{ 
	ds_reservTime.clearData();
	var strSvcID    = "searchTime";
    var strURL      = "rc/bms/basCodeMgmt/selectListSCC.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_reservTime=ds_codeList";
    var strArg      = "groupCode="    + "BMS_0015"
                    + " maskAuth="    + SCAuth.getMaskAuth(this);
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync); 
}
//예약자명을 입력하면 이용자(담당)에 값이 없는 경우 같은 값을 세팅 한다.
function ds_reservMst_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	 
	var nRow = ds_reservMst.rowposition;
	
	if (e.columnid == "emailYn")
	{
		var uesValue = obj.getColumn(nRow,"emailYn");
		obj.setColumn(nRow,"emailYn",(uesValue == "true" ? 1:0));
	}
	if (e.columnid == "smsYn")
	{
		var uesValue = obj.getColumn(nRow,"smsYn");
		obj.setColumn(nRow,"smsYn",(uesValue == "true" ? 1:0));
	}
	if (e.columnid == "dmYn")
	{
		var uesValue = obj.getColumn(nRow,"dmYn");
		obj.setColumn(nRow,"dmYn",(uesValue == "true" ? 1:0));
	}
	if (e.columnid == "vipYn")
	{
		var uesValue = obj.getColumn(nRow,"vipYn");
		obj.setColumn(nRow,"vipYn",(uesValue == "true" ? 1:0));
	}
	 
	
	//fucntion 
	if (e.columnid == "kindCd")
	{
		ds_function.setColumn(nRow, "functionClass",ds_reservMst.getColumn(nRow, "kindCd"));   
	}
	
	if (e.columnid == "rsvnNm")
	{
		var rsvnNm = ds_reservMst.getColumn(nRow, "rsvnNm");
		var prcgNm = gfn_nvl(ds_reservMst.getColumn(nRow, "prcgNm"),"");
		 
		if (prcgNm == "")
		{
			ds_reservMst.setColumn(nRow, "prcgNm", rsvnNm);
		}
	}
	
	//예약기간을 검색 한다. 
	if ((e.columnid == "strDate") || (e.columnid == "endDate"))
	{
		 
		var strDate = ds_reservMst.getColumn(nRow, "strDate");
		var endDate = ds_reservMst.getColumn(nRow, "endDate");
		 
		if (strDate > endDate)
		{
			gfn_alert("msg.err.validator.comparemin", "시작일^종료일");	// $1 이(가) $2 보다 큽니다.
			ds_reservMst.setColumn(nRow, "endDate",strDate);
			return;
		}
	}
	//예약시간
	if ((e.columnid == "strTime") || (e.columnid == "endTime"))
	{
		 
		var strTime = ds_reservMst.getColumn(nRow, "strTime");
		var endTime = ds_reservMst.getColumn(nRow, "endTime");
		 
		if (strTime > endTime)
		{
			
			gfn_alert("msg.err.validator.comparemin", "시작시간^종료시간");	// $1 이(가) $2 보다 큽니다.
			ds_reservMst.setColumn(nRow, "endTime",strTime);
			cbo_endTime.value=strTime;
			fnc_reservTime();
			return;
		}
		fnc_reservTime();
	}
	
	//인원수
	if (e.columnid == "psn")
	{
		var psnQty = ds_reservMst.getColumn(nRow, "psn");
		if (psnQty <= 0)
		{
			gfn_alert("msg.err.validator.min", "인원수^1");	// $1 은(는) $2 이상의 숫자만 입력 가능합니다.
			ds_reservMst.setColumn(nRow, "psn","1");
			ds_reservMst.setColumn(nRow, "maxPsn", "1");
			msk_psn.setFocus;
			return;
		}
		ds_reservMst.setColumn(nRow, "maxPsn", psnQty);
	}
	
	//전화번호 처리
	//전화번호 가각의 3개을 하나로 모아 둔다
		
	if ((e.columnid == "handPhone1") || (e.columnid == "handPhone2") || (e.columnid == "handPhone3") )
	{
		 
		var telNo = obj.getColumn(e.row, "handPhone1") +
					(obj.getColumn(e.row, "handPhone2") != null ? '-' + obj.getColumn(e.row, "handPhone2") : '') + 
					(obj.getColumn(e.row, "handPhone3") != null ? '-' + obj.getColumn(e.row, "handPhone3") : '');
		obj.setColumn(e.row, "handPhone", telNo);
	}
	
	//전화번호 가각의 3개을 하나로 모아 둔다
	if ((e.columnid == "telNum1") || (e.columnid == "telNum2") || (e.columnid == "telNum3") )
	{
		var telNo = obj.getColumn(e.row, "telNum1") +
					(obj.getColumn(e.row, "telNum2") != null ? '-' + obj.getColumn(e.row, "telNum2") : '') + 
					(obj.getColumn(e.row, "telNum3") != null ? '-' + obj.getColumn(e.row, "telNum3") : '');
		obj.setColumn(e.row, "telNum", telNo);
	}
	//전화번호 가각의 3개을 하나로 모아 둔다
	if ((e.columnid == "faxNum1") || (e.columnid == "faxNum2") || (e.columnid == "faxNum3") )
	{
		var faxNo = obj.getColumn(e.row, "faxNum1") +
					(obj.getColumn(e.row, "faxNum2") != null ? '-' + obj.getColumn(e.row, "faxNum2") : '') + 
					(obj.getColumn(e.row, "faxNum3") != null ? '-' + obj.getColumn(e.row, "faxNum3") : '');
		obj.setColumn(e.row, "faxNum", faxNo);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : function 내역...
 *---------------------------------------------------------------------------------------------*/

function ds_function_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if (e.columnid == "taxBill")
	{
		var uesValue = obj.getColumn(e.row,"taxBill");
		obj.setColumn(e.row,"taxBill",(uesValue == "true" ? 1:0));
		 
	}
}

//AM 선택
function btn_amSearch_onclick(obj:Button,  e:ClickEventInfo)
{
	var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_BMS::AmPop.xfdl"			// Url
					   , null			// 배열
					   , null, null, null, null, null, false, true, -1);
 
	if (typeof rtnVal != "undefined" && rtnVal != null) 
	{
		if (rtnVal[0] == "OK")
		{
			edt_amNm.uCode = rtnVal[1];
			edt_amNm.value = rtnVal[2];
			ds_reservMst.setColumn(ds_reservMst.rowposition , "amCd", rtnVal[1]);
		}
	}
}
//AM을 삭제 하는 경우 세팅값 초기화
function edt_amNm_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13) btn_amSearch_onclick();
	if ((e.keycode == 46) || (e.keycode == 8)) 
	{
		edt_amNm.uCode = "";    //코드
		edt_amNm.value = "";    //명칭
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 거래처 검색 버튼을 누른경우
 *---------------------------------------------------------------------------------------------*/
function btn_custNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var rtnVal = gfn_dialog("CodePop"				// dialogId
						   , "X_BMS::AccPop.xfdl"			// Url
						   , null			// 배열
						   , null, null, null, null, null, false, true, -1);
	//trace(nRowIdx + "===" + rtnVal);
	if (typeof rtnVal != "undefined" && rtnVal != null) 
	{
		if (rtnVal[0] == "OK")
		{
			var nRow = ds_reservMst.rowposition
			ds_reservMst.setColumn(nRow, "custCd",      rtnVal[1]);
			ds_reservMst.setColumn(nRow, "custNm",      rtnVal[2]);
			ds_reservMst.setColumn(nRow, "prcgNm",      rtnVal[3]);
			ds_reservMst.setColumn(nRow, "prcgDept",    rtnVal[4]);
			ds_reservMst.setColumn(nRow, "jobPosition", rtnVal[5]);
			ds_reservMst.setColumn(nRow, "custClass",   rtnVal[6]);
			ds_reservMst.setColumn(nRow, "telNum",      rtnVal[7]);
			ds_reservMst.setColumn(nRow, "telNum1",     rtnVal[8]);
			ds_reservMst.setColumn(nRow, "telNum2",     rtnVal[9]);
			ds_reservMst.setColumn(nRow, "telNum3",     rtnVal[10]);
			ds_reservMst.setColumn(nRow, "handPhone",   rtnVal[11]);
			ds_reservMst.setColumn(nRow, "handPhone1",  rtnVal[12]);
			ds_reservMst.setColumn(nRow, "handPhone2",  rtnVal[13]);
			ds_reservMst.setColumn(nRow, "handPhone3",  rtnVal[14]);
			ds_reservMst.setColumn(nRow, "emailAddr",   rtnVal[15]);
		 
		}
	}

	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 왼쪽 검색 내역을 선택 하면 상세내역을 검색 한다.
 *---------------------------------------------------------------------------------------------*/
function ds_reservList_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	var reservNum = ds_reservList.getColumn(ds_reservList.rowposition,"reservNum");
	if (gfn_nvl(reservNum,"") == "") return;
	
	//변경 또는 입력중에 그리드 ROW를 변경 하는 경우
	if(ds_reservList.rowposition == -1) 
	{
		return;
	}
	if (fv_gridFlag==true)
	{
		fv_gridFlag=false;
		return;
	}
	
	if (gfn_dsIsUpdated(ds_reservMst) || gfn_dsIsUpdated(ds_goods) || gfn_dsIsUpdated(ds_room) ||
		gfn_dsIsUpdated(ds_other) || gfn_dsIsUpdated(ds_outside))
 	{
		var retValue = gfn_confirm("confirm.before.moveropos");	// 해당 row의 위치를 이동하면 변경된 데이터가 사라집니다.@계속 진행 하시겠습니까?
		if (retValue == false) 
		{
			fv_gridFlag=true;
			ds_reservList.rowposition = e.oldrow;
			return;
		}
	}

	
	
	ds_paramInfo.clearData();
	var nRow = ds_paramInfo.addRow();
	ds_paramInfo.setColumn(nRow, "reservNum",  reservNum);
	ds_paramInfo.setColumn(nRow, "fnbClass",  "F");
	ds_paramInfo.setColumn(nRow, "maskAuth", SCAuth.getMaskAuth(this));
	fn_selectList();
	
	
     
}


/*----------------------------------------------------------------------------------------------
 * 설명      : Food & Beverage 추가 
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_fnb_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	if (fn_addCheck() == false) return; 
	var sRow = ds_reservMst.rowposition; 
	var nRow = ds_goods.addRow();
    
	ds_goods.setColumn(nRow, "reservNum", gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),"")); //예약번호
	ds_goods.setColumn(nRow, "fnbClass","F");
	ds_goods.setColumn(nRow, "seq", "");
	ds_goods.setColumn(nRow, "strDate",gfn_nvl(ds_reservMst.getColumn(sRow,"strDate"),""));		//일자
	ds_goods.setColumn(nRow, "strTime",gfn_nvl(ds_reservMst.getColumn(sRow,"strTime") ,""));	//시작시간
	ds_goods.setColumn(nRow, "endTime",gfn_nvl(ds_reservMst.getColumn(sRow,"endTime") ,""));	//종료시간
	ds_goods.setColumn(nRow, "outletCd",gfn_nvl(ds_reservMst.getColumn(sRow,"outletCd"),""));	//업장
	ds_goods.setColumn(nRow, "outletNm",gfn_nvl(ds_reservMst.getColumn(sRow,"outletNm"),""));	//업장명
	ds_goods.setColumn(nRow, "useYn",  "1");	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Food & Beverage 삭제 하는 처리
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_fnb_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_goods.rowposition;
	
	if(ds_goods.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_goods.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_goods.deleteRow(nRow);
		} else
		{
			ds_goods.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
			
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명      : Food & Beverage 그리드에서 입력 받는 부분 (시작일,업장,메뉴) 인경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_fnb_grd_fnb_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 4) //업장 --일자,시간시작,시간종료
	{
		var arrParam = new Array();
		arrParam[0] ="";
		var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_SLE::OutletInfoPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_goods.rowposition
				ds_goods.setColumn(nRow , "outletCd", rtnVal[1]);
				ds_goods.setColumn(nRow , "outletNm", rtnVal[2]);
			}
		}
	}
	if (e.col == 5) //메뉴선택
	{
		var nRow = ds_goods.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_goods.getColumn(nRow,"outletCd"),"");					// 업장 코드를 전송 한다.
		arrParam[1] = gfn_nvl(ds_goods.getColumn(nRow,"outletNm"),"");					// 업장 명를 전송 한다.
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		
		var rtnVal = gfn_dialog("MenuPop"				// dialogId
					   , "X_SLE::MenuPop.xfdl"			// Url
					   , {fv_Contents:arrParam}			// 배열 
					   , null, null, null, null, null, false, true, -1);

		if (rtnVal instanceof Object)
		{
			arr = rtnVal.datas;
			
			for(var i=0; i<rtnVal.dataRow; i++)
			{
				if (i==0)
				{
					var nRow = ds_goods.rowposition;
				}
				else
				{ 
					var nRow = ds_goods.addRow();
					ds_goods.setColumn(nRow, "reservNum", gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"reservNum"),""));
					ds_goods.setColumn(nRow, "fnbClass","F");
					ds_goods.setColumn(nRow, "seq", "");
					ds_goods.setColumn(nRow, "strDate",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate"),""));	//일자
					ds_goods.setColumn(nRow, "strTime",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strTime"),"")); //시작시간
					ds_goods.setColumn(nRow, "endTime",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"endTime"),"")); //종료시간
				}
				 
				ds_goods.setColumn(nRow , "outletCd",   gfn_trim(arr[i].outletCd));
				ds_goods.setColumn(nRow , "outletNm",   gfn_trim(arr[i].outletNm));
				ds_goods.setColumn(nRow , "menuClass",  gfn_trim(arr[i].menuClass));
				ds_goods.setColumn(nRow , "menuClsfi",  gfn_trim(arr[i].menuClsfi));
				ds_goods.setColumn(nRow , "menuSclass", gfn_trim(arr[i].menuSclass));
				ds_goods.setColumn(nRow , "menuCd",     gfn_trim(arr[i].menuCd));
				ds_goods.setColumn(nRow , "menuNm",     gfn_trim(arr[i].menuNm));
				ds_goods.setColumn(nRow , "uprice",     gfn_trim(arr[i].applyPrice));
				ds_goods.setColumn(nRow , "quantity","1");
				ds_goods.setColumn(nRow , "useYn","1");
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Food & Beverage 단가,수량,할인액이 변경되면 모두 다시 금액을 계산한다.
 *---------------------------------------------------------------------------------------------*/
function ds_goods_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var nRow = ds_goods.rowposition;
	if (e.columnid == "discntAmt") 
	{
		var dcAmt = Number(gfn_nvl(obj.getColumn(nRow,"discntAmt"),"0"));
	    if ((dcAmt >  0) && (dcAmt < 100))
		{
			var qty =   Number(gfn_nvl(obj.getColumn(nRow,"quantity"),"0"));
			var price = Number(gfn_nvl(obj.getColumn(nRow,"uprice"),"0"));
			var amt = price * qty; 
			var per = dcAmt /100;
			var dcAmt =  ( amt * per);
			//trace("dcAmt:" + Math.round( dcAmt));
			obj.setColumn(nRow,"discntAmt",Math.round(dcAmt));
		}
	}
	if (e.columnid == "strDate")
	{
		ds_goods.setColumn(nRow, "endDate",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate"),""));	//일자
	}
	if ((e.columnid == "quantity") || (e.columnid == "discntAmt"))
	{
		var qty =   gfn_nvl(ds_goods.getColumn(nRow,"quantity"),"0");
		var price = gfn_nvl(ds_goods.getColumn(nRow,"uprice"),"0");
		var dcAmt = gfn_nvl(ds_goods.getColumn(nRow,"discntAmt"),"0");
		ds_goods.setColumn(nRow , "amt", price * qty );
		ds_goods.setColumn(nRow , "totAmt", (price * qty) - dcAmt );
		fn_totalComp();   //합계처리		
	}
	
}
 


/*----------------------------------------------------------------------------------------------
 * 설명      : Room 추가 
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_room_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	
	if (fn_addCheck() == false) return;
	var sRow = ds_reservMst.rowposition; 
	var nRow = ds_room.addRow();
	
	var nDay ="";
	nDay = gfn_getDiffDay(ds_reservMst.getColumn(sRow,"strDate"), ds_reservMst.getColumn(sRow,"strDate"));	//웨딩은 같은당일임
	ds_room.setColumn(nRow, "reservNum", gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),""));
	ds_room.setColumn(nRow, "seq", "");
	ds_room.setColumn(nRow, "outletCd", gfn_nvl(ds_reservMst.getColumn(sRow,"outletCd"),""));	//업장
	ds_room.setColumn(nRow, "outletNm", gfn_nvl(ds_reservMst.getColumn(sRow,"outletNm"),""));	//업장
	ds_room.setColumn(nRow, "arrivDate",gfn_nvl(ds_reservMst.getColumn(sRow,"strDate"),""));	//도착일
	
	
	if (nDay == "0")
	{
		var nDate = gfn_addDate(ds_room.getColumn(nRow,"arrivDate"), 1 );
		ds_room.setColumn(nRow, "lodgeDd",  "1");
		ds_room.setColumn(nRow , "chkotDate", nDate );	//퇴실일
	}
	else
	{
		ds_room.setColumn(nRow, "lodgeDd",  gfn_nvl(nDay,""));
		ds_room.setColumn(nRow, "chkotDate",gfn_nvl(cal_endDate.fn_getValue(),""));	//퇴실일
	}
	ds_room.setColumn(nRow, "useYn",  "1");	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Room 입력된 내역을 삭제 하는 경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_room_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_room.rowposition;
	
	if(ds_room.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_room.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_room.deleteRow(nRow);
		} else
		{
			ds_room.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
			
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명      : Room 업장을 선택 하는 경우 Expand Down
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_room_grd_room_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 1) //업장 
	{
		var arrParam = new Array();
		arrParam[0] ="";
		var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_SLE::OutletInfoPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_room.rowposition
				ds_room.setColumn(nRow , "outletCd", rtnVal[1]);
				ds_room.setColumn(nRow , "outletNm", rtnVal[2]);
			}
		}
	}
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Room 박수 단가,수량,할인액이 변경되면 모두 다시 금액을 계산한다.
 *---------------------------------------------------------------------------------------------*/
function ds_room_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	//도착일,박수,퇴실일이 변경되면 계산을 다시 한다.
	if ((e.columnid == "arrivDate") || (e.columnid == "chkotDate") || (e.columnid == "lodgeDd"))
	{
		var nRow  = ds_room.rowposition;
		var arrDt = gfn_nvl(ds_room.getColumn(nRow,"arrivDate"),"");
		var chkDt = gfn_nvl(ds_room.getColumn(nRow,"chkotDate"),"");
		var dayQt = gfn_nvl(ds_room.getColumn(nRow,"lodgeDd"),"0");
		
		//도착일이 변경된경우
		if ((e.columnid == "arrivDate") || (e.columnid == "chkotDate"))
		{
			//상단 예약일과 비교
			var mStrDate = ds_reservMst.getColumn(nRow, "strDate");
			var mEndDate = ds_reservMst.getColumn(nRow, "endDate");
			 
			if ((mStrDate > arrDt) || (mEndDate < arrDt))
			{
				gfn_alert("msg.err.validator.comparemin", "시작일^예약기간");	// $1 이(가) $2 보다 큽니다.
				obj.setColumn(nRow, "arrivDate",mStrDate);
				var dd = gfn_getDiffDay(mStrDate, chkDt);
				ds_room.setColumn(nRow , "lodgeDd", dd );
				return;
			}
			if ((mStrDate > chkDt) || (mEndDate < chkDt))
			{
				gfn_alert("msg.err.validator.comparemin", "종료일^예약기간");	// $1 이(가) $2 보다 큽니다.
				obj.setColumn(nRow, "chkotDate",mEndDate);
				var dd = gfn_getDiffDay(arrDt, mEndDate);
				ds_room.setColumn(nRow , "lodgeDd", dd );
				return;
			}
			 
			if (arrDt > chkDt)
			{
				gfn_alert("msg.err.validator.comparemin", "시작일^종료일");	// $1 이(가) $2 보다 큽니다.
				obj.setColumn(nRow, "chkotDate",arrDt);
				ds_room.setColumn(nRow , "lodgeDd", "1" );
				return;
			}
			
			//숙박일수 계산	
			var dd = gfn_getDiffDay(arrDt, chkDt);
			ds_room.setColumn(nRow , "lodgeDd", dd );
		}
		
		//숙박일을 변경한경
		if (e.columnid == "lodgeDd") 
		{
			var dd = gfn_getDiffDay(arrDt, chkDt);
			if (dd < dayQt)
			{
				gfn_alert("msg.err.validator.comparemin", "박수^예약기간");	// $1 이(가) $2 보다 큽니다.
				ds_room.setColumn(nRow , "chkotDate", dd );
				return;
			}
			
			var nDate = gfn_addDate(arrDt, dayQt );
			ds_room.setColumn(nRow , "chkotDate", nDate );
		}
	}
	if (e.columnid == "discntAmt") 
	{
		var dcAmt = Number(gfn_nvl(obj.getColumn(nRow,"discntAmt"),"0"));
	    if ((dcAmt >  0) && (dcAmt < 100))
		{
			var qty =   Number(gfn_nvl(obj.getColumn(nRow,"rmQty"),"0"));
			var price = Number(gfn_nvl(obj.getColumn(nRow,"uprice"),"0"));
			var amt = price * qty; 
			var per = dcAmt /100;
			var dcAmt =  ( amt * per);
			//trace("dcAmt:" + Math.round( dcAmt));
			obj.setColumn(nRow,"discntAmt",Math.round(dcAmt));
		}
	}
	//if ((e.columnid == "rmQty") || (e.columnid == "uprice") || (e.columnid == "discntAmt") || (e.columnid == "psn") || (e.columnid == "lodgeDd"))
	//{
		var nRow = ds_room.rowposition;
		var dayCnt = gfn_nvl(ds_room.getColumn(nRow,"lodgeDd"),"0");
		var rmQty    = gfn_nvl(ds_room.getColumn(nRow,"rmQty"),"0");
		var price  = gfn_nvl(ds_room.getColumn(nRow,"uprice"),"0");
		var dcAmt  = gfn_nvl(ds_room.getColumn(nRow,"discntAmt"),"0");
		var psn    = gfn_nvl(ds_room.getColumn(nRow,"psn"),"0");
		
		ds_room.setColumn(nRow , "amt", price * rmQty * dayCnt );
		ds_room.setColumn(nRow , "totAmt", (price * rmQty * dayCnt) - dcAmt );
		ds_room.setColumn(nRow , "psnUprice", ((price * rmQty * dayCnt) - dcAmt ) / psn );		
		fn_totalComp();   //합계처리
	//}
}



/*----------------------------------------------------------------------------------------------
 * 설명      : Other 내역추가 하는 경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_other_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	if (fn_addCheck() == false) return;
	var sRow = ds_reservMst.rowposition; 
	var nRow = ds_other.addRow();

	ds_other.setColumn(nRow, "reservNum", gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),""));
	ds_other.setColumn(nRow, "fnbClass","O");
	ds_other.setColumn(nRow, "seq", "");
	ds_other.setColumn(nRow, "strDate",gfn_nvl(ds_reservMst.getColumn(sRow,"strDate"),""));	//일자
	ds_other.setColumn(nRow, "strTime",gfn_nvl(ds_reservMst.getColumn(sRow,"strTime"),""));	            //시작시간
	ds_other.setColumn(nRow, "endTime",gfn_nvl(ds_reservMst.getColumn(sRow,"endTime"),""));	            //종료시간
	ds_other.setColumn(nRow, "outletCd",gfn_nvl(ds_reservMst.getColumn(sRow,"outletCd"),""));	//사업장
	ds_other.setColumn(nRow, "outletNm",gfn_nvl(ds_reservMst.getColumn(sRow,"outletNm"),""));	//사업장명
	ds_other.setColumn(nRow, "useYn",  "1");	
 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Other 내역을 삭제 하는 경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_other_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_other.rowposition;
	
	if(ds_other.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}
	
	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_other.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_other.deleteRow(nRow);
		} else
		{
			ds_other.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
			
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명      : Other 입력 처리 부분 Expand Down
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_other_grd_other_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 4) //업장 
	{
		var arrParam = new Array();
		arrParam[0] ="";
		var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_SLE::OutletInfoPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_other.rowposition
				ds_other.setColumn(nRow , "outletCd", rtnVal[1]);
				ds_other.setColumn(nRow , "outletNm", rtnVal[2]);
			}
		}
	}
	if (e.col == 5) //메뉴선택
	{
		var nRow = ds_other.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_other.getColumn(nRow,"outletCd"),"");					// 업장 코드를 전송 한다.
		arrParam[1] = gfn_nvl(ds_other.getColumn(nRow,"outletNm"),"");					// 업장 명를 전송 한다.
		arrParam[2] = "OO";
		arrParam[3] = "기타";					// 업장 명를 전송 한다.
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		
		var rtnVal = gfn_dialog("MenuPop"				// dialogId
					   , "X_SLE::MenuPop.xfdl"			// Url
					   , {fv_Contents:arrParam}			// 배열 
					   , null, null, null, null, null, false, true, -1);

		if (rtnVal instanceof Object)
		{
			arr = rtnVal.datas;
			
			for(var i=0; i<rtnVal.dataRow; i++)
			{
				if (i==0)
				{
					var nRow = ds_other.rowposition;
				}
				else
				{ 
					var nRow = ds_other.addRow();
					ds_other.setColumn(nRow, "reservNum", gfn_nvl(edt_reservNum.value,""));
					ds_other.setColumn(nRow, "fnbClass","O");
					ds_other.setColumn(nRow, "seq", "");
					
					ds_other.setColumn(nRow, "strDate",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate"),""));	 //일자
					ds_other.setColumn(nRow, "strTime",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate") ,"")); //시작시간
					ds_other.setColumn(nRow, "endTime",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate") ,"")); //종료시간
				}
				 
				ds_other.setColumn(nRow , "outletCd",   gfn_trim(arr[i].outletCd));
				ds_other.setColumn(nRow , "outletNm",   gfn_trim(arr[i].outletNm));
				ds_other.setColumn(nRow , "menuClass",  gfn_trim(arr[i].menuClass));
				ds_other.setColumn(nRow , "menuClsfi",  gfn_trim(arr[i].menuClsfi));
				ds_other.setColumn(nRow , "menuSclass", gfn_trim(arr[i].menuSclass));
				ds_other.setColumn(nRow , "menuCd",     gfn_trim(arr[i].menuCd));
				ds_other.setColumn(nRow , "menuNm",     gfn_trim(arr[i].menuNm));
				ds_other.setColumn(nRow , "uprice",     gfn_trim(arr[i].applyPrice));
				ds_other.setColumn(nRow , "quantity","1");
				ds_other.setColumn(nRow , "useYn","1");
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Other dataSet 수량,단가,할인 정보가 변경되는 경우 재 계산
 *---------------------------------------------------------------------------------------------*/
function ds_other_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var nRow = ds_other.rowposition;
	if (e.columnid == "discntAmt") 
	{
		var dcAmt = Number(gfn_nvl(obj.getColumn(nRow,"discntAmt"),"0"));
	    if ((dcAmt >  0) && (dcAmt < 100))
		{
			var qty =   Number(gfn_nvl(obj.getColumn(nRow,"quantity"),"0"));
			var price = Number(gfn_nvl(obj.getColumn(nRow,"uprice"),"0"));
			var amt = price * qty; 
			var per = dcAmt /100;
			var dcAmt =  ( amt * per);
			//trace("dcAmt:" + Math.round( dcAmt));
			obj.setColumn(nRow,"discntAmt",Math.round(dcAmt));
		}
	}
	if (e.columnid == "strDate")
	{
		ds_other.setColumn(nRow, "endDate", ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate") );	//일자
	}
	if ((e.columnid == "quantity") || (e.columnid == "discntAmt"))
	{
		var qty =   gfn_nvl(ds_other.getColumn(nRow,"quantity"),"0");
		var price = gfn_nvl(ds_other.getColumn(nRow,"uprice"),"0");
		var dcAmt = gfn_nvl(ds_other.getColumn(nRow,"discntAmt"),"0");
		ds_other.setColumn(nRow , "amt", price * qty );
		ds_other.setColumn(nRow , "totAmt", (price * qty) - dcAmt );
		fn_totalComp();   //합계처리		
	}
	
}


/*----------------------------------------------------------------------------------------------
 * 설명      : ds_outside 내역을 추가 하는 경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_outside_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	if (fn_addCheck() == false) return;
	var sRow = ds_reservMst.rowposition;
	var nRow = ds_outside.addRow();

	ds_outside.setColumn(nRow, "reservNum", gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),""));
	ds_outside.setColumn(nRow, "fnbClass","P");
	ds_outside.setColumn(nRow, "seq", "");
	ds_outside.setColumn(nRow, "strDate",gfn_nvl(ds_reservMst.getColumn(sRow,"strDate"),""));	//일자
	ds_outside.setColumn(nRow, "strTime",gfn_nvl(ds_reservMst.getColumn(sRow,"strTime") ,""));	            //시작시간
	ds_outside.setColumn(nRow, "endTime",gfn_nvl(ds_reservMst.getColumn(sRow,"endTime") ,""));	            //종료시간
	
	ds_outside.setColumn(nRow, "outletCd",gfn_nvl(ds_reservMst.getColumn(sRow,"outletCd"),""));	//업장
	ds_outside.setColumn(nRow, "outletNm",gfn_nvl(ds_reservMst.getColumn(sRow,"outletNm"),""));	//업장	
	ds_outside.setColumn(nRow, "useYn",  "1");	
}


/*----------------------------------------------------------------------------------------------
 * 설명      : ds_outside 내역을 삭제 하는 경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_outside_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_outside.rowposition;
	
	if(ds_outside.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}
	
	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_outside.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_outside.deleteRow(nRow);
		} else
		{
			ds_outside.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
			
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : ds_outside Expand Down 그리드에서 거래처,거래처메뉴 선택
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_outside_grd_outside_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
// 	if (e.col == 4) //거래처 
// 	{
// 		var rtnVal = gfn_dialog("CodePop"				// dialogId
// 						   , "X_BMS::AccPop.xfdl"			// Url
// 						   , null			// 배열
// 						   , null, null, null, null, null, false, true, -1);
// 		//trace(nRowIdx + "===" + rtnVal);
// 		if (typeof rtnVal != "undefined" && rtnVal != null) 
// 		{
// 			if (rtnVal[0] == "OK")
// 			{
// 				var nRow = ds_outside.rowposition
// 				ds_outside.setColumn(nRow , "vendorCd",  rtnVal[1]);
// 				ds_outside.setColumn(nRow , "vendorNm",  rtnVal[2]);
// 				 
// 			}
// 		}
// 	}
	
	if (e.col == 5) //거래처 구매가능 상품
	{
		var nRow = ds_outside.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_outside.getColumn(nRow,"outletCd"),"");	// 업장 코드를 전송 한다.
		arrParam[1] = gfn_nvl(ds_outside.getColumn(nRow,"outletNm"),"");	// 업장 명를 전송 한다.
		arrParam[3] = gfn_nvl(ds_outside.getColumn(nRow,"vendorNm"),"");	//외부거래처명
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		
		var rtnVal = gfn_dialog("OutsideMenuPop"		// dialogId
					   , "X_BMS::OutsideMenuPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열 
					   , null, null, null, null, null, false, true, -1);

		if (rtnVal instanceof Object)
		{
			arr = rtnVal.datas;
			
			for(var i=0; i<rtnVal.dataRow; i++)
			{
				if (i==0)
				{
					var nRow = ds_outside.rowposition;
				}
				else
				{ 
					var nRow = ds_outside.addRow();
					ds_outside.setColumn(nRow, "reservNum", gfn_nvl(edt_reservNum.value,""));
					ds_outside.setColumn(nRow, "fnbClass","P");
					ds_outside.setColumn(nRow, "seq", "");
					ds_outside.setColumn(nRow, "strDate",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate"),""));  //일자
					ds_outside.setColumn(nRow, "strTime",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"strTime"),""));  //시작시간
					ds_outside.setColumn(nRow, "endTime",gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"endTime"),""));  //종료시간
				} 
				ds_outside.setColumn(nRow , "outletCd",   gfn_trim(arr[i].outletCd));
				ds_outside.setColumn(nRow , "outletNm",   gfn_trim(arr[i].outletNm));
				ds_outside.setColumn(nRow , "vendorCd",   gfn_trim(arr[i].vendorCd));
				ds_outside.setColumn(nRow , "vendorNm",   gfn_trim(arr[i].vendorNm));
				ds_outside.setColumn(nRow , "menuCd",     gfn_trim(arr[i].menuCd));
				ds_outside.setColumn(nRow , "menuNm",     gfn_trim(arr[i].menuNm));
				ds_outside.setColumn(nRow , "uprice",     gfn_trim(arr[i].useAmt));
				ds_outside.setColumn(nRow , "quantity","1");
				ds_outside.setColumn(nRow , "useYn","1");
			}
		}
	}

	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : ds_outside 수량,할인 금액이 변경되면 합계를 계산한다.
 *---------------------------------------------------------------------------------------------*/
function ds_outside_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var nRow = ds_outside.rowposition;
	if (e.columnid == "discntAmt") 
	{
		var dcAmt = Number(gfn_nvl(obj.getColumn(nRow,"discntAmt"),"0"));
	    if ((dcAmt >  0) && (dcAmt < 100))
		{
			var qty =   Number(gfn_nvl(obj.getColumn(nRow,"quantity"),"0"));
			var price = Number(gfn_nvl(obj.getColumn(nRow,"uprice"),"0"));
			var amt = price * qty; 
			var per = dcAmt /100;
			var dcAmt =  ( amt * per);
			//trace("dcAmt:" + Math.round( dcAmt));
			obj.setColumn(nRow,"discntAmt",Math.round(dcAmt));
		}
	}
	if (e.columnid == "strDate")
	{
		ds_outside.setColumn(nRow, "endDate", ds_reservMst.getColumn(ds_reservMst.rowposition,"strDate") );	//일자
	}
	if ((e.columnid == "quantity") || (e.columnid == "discntAmt") || (e.columnid == "uprice"))
	{
		var qty =   gfn_nvl(ds_outside.getColumn(nRow,"quantity"),"0");
		var price = gfn_nvl(ds_outside.getColumn(nRow,"uprice"),"0");
		var dcAmt = gfn_nvl(ds_outside.getColumn(nRow,"discntAmt"),"0");
		ds_outside.setColumn(nRow , "amt", price * qty );
		ds_outside.setColumn(nRow , "totAmt", (price * qty) - dcAmt );
		fn_totalComp();   //합계처리
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 전체 합계를 계산 한다.
 *---------------------------------------------------------------------------------------------*/
function fn_totalComp()
{
	if (ds_total.rowcount == 0)
	{
		ds_total.addRow();
	}
	var nRow = ds_total.rowposition;
	//변수초기화
	var bnqQty  =0;
	var bnqAmt  =0;
	var fnbQty  =0;
	var fnbAmt  =0;
	var roomQty =0;
	var roomAmt =0;
	var etcQty  =0;
	var etcAmt  =0;
	var outQty  =0;
	var outAmt  =0;
	//연회룸합계
	for(var j = 0 ; j <= ds_banquetRoom.getRowCount()-1 ; j++)
	{
		bnqQty = bnqQty + Number(gfn_nvl(ds_banquetRoom.getColumn(j, "quantity"),""));
		bnqAmt = bnqAmt + Number(ds_banquetRoom.getColumn(j, "totAmt"));
		 
	}
	
	//식음합계
	for(var j = 0 ; j <= ds_goods.getRowCount()-1 ; j++)
	{
		fnbQty = fnbQty + Number(ds_goods.getColumn(j, "quantity"));
		fnbAmt = fnbAmt + Number(ds_goods.getColumn(j, "totAmt"));
	}
	//객실합계
	for(var j = 0 ; j <= ds_room.getRowCount()-1 ; j++)
	{
		roomQty = roomQty + Number(ds_room.getColumn(j, "rmQty"));
		roomAmt = roomAmt + Number(ds_room.getColumn(j, "totAmt"));
	}
	//기타합계
	for(var j = 0 ; j <= ds_other.getRowCount()-1 ; j++)
	{
		etcQty = etcQty + Number(ds_other.getColumn(j, "quantity"));
		etcAmt = etcAmt + Number(ds_other.getColumn(j, "totAmt"));
	}
	//외부 발주 합계
	for(var j = 0 ; j <= ds_outside.getRowCount()-1 ; j++)
	{
		outQty = outQty + Number(ds_outside.getColumn(j, "quantity"));
		outAmt = outAmt + Number(ds_outside.getColumn(j, "totAmt"));
	}
	
	 
	ds_total.setColumn(nRow,"bnqQty",bnqQty);
	ds_total.setColumn(nRow,"bnqAmt",bnqAmt);
	
	ds_total.setColumn(nRow,"fnbQty",fnbQty);
	ds_total.setColumn(nRow,"fnbAmt",fnbAmt);
	
	ds_total.setColumn(nRow,"roomQty",roomQty);
	ds_total.setColumn(nRow,"roomAmt",roomAmt);
	
	ds_total.setColumn(nRow,"etcQty",etcQty);
	ds_total.setColumn(nRow,"etcAmt",etcAmt);
	
	ds_total.setColumn(nRow,"outQty",outQty);
	ds_total.setColumn(nRow,"outAmt",outAmt);
	
	ds_total.setColumn(nRow,"totAmt",fnbAmt + roomAmt + etcAmt + outAmt + bnqAmt);
	 
	
}

 
/*----------------------------------------------------------------------------------------------
 * 설명      : ds_banquetRoom 내역을 추가 하는 경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_banquetRoom_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{ 
	if (fn_addCheck() == false) return;
	var sRow = ds_reservMst.rowposition;
	var nRow = ds_banquetRoom.addRow();

	ds_banquetRoom.setColumn(nRow, "reservNum", gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),""));
	ds_banquetRoom.setColumn(nRow, "reservStatus", gfn_nvl(ds_reservMst.getColumn(sRow,"reservStatus"),"")); //예약상태 중복 체크를 위해서
	ds_banquetRoom.setColumn(nRow, "kindCd", gfn_nvl(ds_reservMst.getColumn(sRow,"kindCd"),"")); 			 //예약상태 중복 체크를 위해서 연회,웨딩,케이터링
	ds_banquetRoom.setColumn(nRow, "fnbClass","R");
	ds_banquetRoom.setColumn(nRow, "seq", "");
	ds_banquetRoom.setColumn(nRow, "uprice", "0");
	ds_banquetRoom.setColumn(nRow, "strTime",gfn_nvl(ds_reservMst.getColumn(sRow,"strTime") ,""));	//시작시간
	ds_banquetRoom.setColumn(nRow, "endTime",gfn_nvl(ds_reservMst.getColumn(sRow,"endTime") ,"")); //종료시간
	ds_banquetRoom.setColumn(nRow, "strDate",gfn_nvl(ds_reservMst.getColumn(sRow,"strDate"),""));	//일자
	ds_banquetRoom.setColumn(nRow, "endDate",gfn_nvl(ds_reservMst.getColumn(sRow,"endDate"),""));	//일자
	ds_banquetRoom.setColumn(nRow, "outletCd",gfn_nvl(ds_reservMst.getColumn(sRow,"outletCd"),"")); //업장
	ds_banquetRoom.setColumn(nRow, "useYn",  "1");	
	
}


/*----------------------------------------------------------------------------------------------
 * 설명      : ds_banquetRoom 내역을 삭제 하는 경우
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_banquetRoom_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	
	var nRow = ds_banquetRoom.rowposition;
	
	if(ds_banquetRoom.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}
	
	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_banquetRoom.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_banquetRoom.deleteRow(nRow);
		} else
		{
			ds_banquetRoom.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
			
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : grd_banquetRoom Expand Down 그리드에서 연회룸을 선택 하는 POPUP
 *---------------------------------------------------------------------------------------------*/
function tab_master_tab_banquetRoom_grd_banquetRoom_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 1) //연회룸 선택 화면
	{
		var nRow = ds_banquetRoom.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_banquetRoom.getColumn(nRow,"outletCd"),"");	// 업장 코드를 전송 한다.
		arrParam[1] = gfn_nvl(cbo_mu.getMuCode(),"");	// 사업부
		arrParam[2] = gfn_nvl(edt_tm.getTmCode(),"");	// 팀
		//arrParam[3] = "10";	// 연회룸만 검색 한다.
		

		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		
		var rtnVal = gfn_dialog("BasBnqMgmtPop"				// dialogId
						   , "X_BMS::BasBnqMgmtPop.xfdl"	// Url 
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		//trace(nRowIdx + "===" + rtnVal);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_banquetRoom.rowposition
				ds_banquetRoom.enableevent = false;
				ds_banquetRoom.setColumn(nRow , "menuNm",  rtnVal[2]);
				ds_banquetRoom.setColumn(nRow , "menuClass",  rtnVal[3]);
				ds_banquetRoom.setColumn(nRow , "menuClsfi",  rtnVal[4]);
				ds_banquetRoom.setColumn(nRow , "menuSclass",  rtnVal[5]);
				ds_banquetRoom.enableevent = true; 
				ds_banquetRoom.setColumn(nRow , "uprice",  rtnVal[6]);
				ds_banquetRoom.setColumn(nRow , "menuCd",  rtnVal[1]);
			}
		}
	}
	
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : ds_banquetRoom 수량,할인 금액이 변경되면 합계를 계산한다.
 *---------------------------------------------------------------------------------------------*/
function ds_banquetRoom_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if   ((e.columnid == "remark") || (e.columnid == "adltPsn") || (e.columnid == "menuNm")) return;

	var nRow = obj.rowposition;
	
	
	
	//예약기간을 검색 한다. 
	if ((e.columnid == "strDate") || (e.columnid == "endDate") )
	{
		var mStrDate = ds_reservMst.getColumn(nRow, "strDate");
		var mEndDate = ds_reservMst.getColumn(nRow, "endDate");
		
		var nStrDate = obj.getColumn(nRow, "strDate");
		var nEndDate = obj.getColumn(nRow, "endDate");
		var nQty    =  obj.getColumn(nRow,"quantity");
		
		if ((mStrDate > nStrDate) || (mEndDate < nStrDate))
		{
			gfn_alert("msg.err.validator.comparemin", "시작일^예약기간");	// $1 이(가) $2 보다 큽니다.
			obj.setColumn(nRow, "strDate",mStrDate);
			if (dd==0) dd=1;
			var dd = gfn_getDiffDay(mStrDate, nEndDate);
			obj.setColumn(nRow , "quantity", dd );
			return;
		}
		if ((mStrDate > nEndDate) || (mEndDate < nEndDate))
		{
			gfn_alert("msg.err.validator.comparemin", "종료일^예약기간");	// $1 이(가) $2 보다 큽니다.
			obj.setColumn(nRow, "endDate",mEndDate);
			if (dd==0) dd=1;
			var dd = gfn_getDiffDay(nStrDate, mEndDate);
			obj.setColumn(nRow , "quantity", dd );
			return;
		}
		 
		if (nStrDate > nEndDate)
		{
			gfn_alert("msg.err.validator.comparemin", "시작일^종료일");	// $1 이(가) $2 보다 큽니다.
			obj.setColumn(nRow, "endDate",nStrDate);
			obj.setColumn(nRow , "quantity", 1 );
			return;
		}
	 
		//숙박일수 계산	
		var dd = gfn_getDiffDay(nStrDate, nEndDate);
		if (dd==0) dd=1;
		obj.setColumn(nRow , "quantity", dd );
	}
	
	//예약기간 변경 또는 예약 시간 변경 
	if ((e.columnid == "menuCd") || (e.columnid == "strDate") || (e.columnid == "endDate") || (e.columnid == "strTime") || (e.columnid == "endTime"))
	{
		if (gfn_nvl(obj.getColumn(nRow, "menuCd"),"") == "" ) return;
		if (gfn_nvl(obj.getColumn(nRow, "strTime"),"") == "" ) return;
		if (gfn_nvl(obj.getColumn(nRow, "endTime"),"") == "" ) return;
		//중복 예약 체크 
		if (fn_duplicationChk() == false) return;
	}
 
	//별도 계산할 필요가 없음
	if ((e.columnid == "strTime") || (e.columnid == "endTime")) return;
	//숙박일을 변경한경
// 	if (e.columnid == "quantity") 
// 	{
// 		var dd = gfn_getDiffDay(mStrDate, mEndDate);
// 		
// 		if (dd < nQty)
// 		{
// 			gfn_alert("msg.err.validator.comparemin", "박수^예약기간");	// $1 이(가) $2 보다 큽니다.
// 			obj.setColumn(nRow , "endDate", dd );
// 			return;
// 		}
// 		var nDate = gfn_addDate(nStrDate, nQty );
// 		obj.setColumn(nRow , "endDate", nDate );
// 	}  
	if (e.columnid == "discntAmt") 
	{
		var dcAmt = Number(gfn_nvl(obj.getColumn(nRow,"discntAmt"),"0"));
	    if ((dcAmt >  0) && (dcAmt < 100))
		{
			var qty =   Number(gfn_nvl(obj.getColumn(nRow,"quantity"),"0"));
			var price = Number(gfn_nvl(obj.getColumn(nRow,"uprice"),"0"));
			var amt = price * qty; 
			var per = dcAmt /100;
			var dcAmt =  ( amt * per);
			//trace("dcAmt:" + Math.round( dcAmt));
			obj.setColumn(nRow,"discntAmt",Math.round(dcAmt));
		}
	}
	
	
	var qty =   gfn_nvl(obj.getColumn(nRow,"quantity"),"0");
	var price = gfn_nvl(obj.getColumn(nRow,"uprice"),"0");
	var dcAmt = gfn_nvl(obj.getColumn(nRow,"discntAmt"),"0");
	obj.setColumn(nRow , "amt", price * qty );
	obj.setColumn(nRow , "totAmt", (price * qty) - dcAmt );
	fn_totalComp();   //합계처리
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : ds_banquetRoom 중복 예약 체크
 *---------------------------------------------------------------------------------------------*/
function fn_duplicationChk()
{ 


	//입력 창에 같은 것이 존재 하는가 확인
	
	for(var i = 0; i < ds_banquetRoom.rowcount; i++)
	{
		var iMenuCd   = ds_banquetRoom.getColumn(i,"menuCd");
		var iStrDate  = ds_banquetRoom.getColumn(i,"strDate");
		var iEndDate  = ds_banquetRoom.getColumn(i,"endDate");
		var iStrTime  = ds_banquetRoom.getColumn(i,"strTime");
		var iEndTime  = ds_banquetRoom.getColumn(i,"endTime");
	
		for(var j = i+1; j < ds_banquetRoom.rowcount; j++)
		{
			var jMenuCd   = ds_banquetRoom.getColumn(j,"menuCd");
			var jStrDate  = ds_banquetRoom.getColumn(j,"strDate");
			var jEndDate  = ds_banquetRoom.getColumn(j,"endDate");
			var jStrTime  = ds_banquetRoom.getColumn(j,"strTime");
			var jEndTime  = ds_banquetRoom.getColumn(j,"endTime");
			//1 메뉴코드가 같은가
			if (iMenuCd == jMenuCd) 
			{
				//기간이 중복 되는가?
				if ((jStrDate >= iStrDate) && ( jStrDate <= iEndDate))
				{
					//시간 체크
					//if ((jStrTime >= iStrTime) && ( jStrTime <= iEndTime)) return false;  //이건아되여
					//if ((jEndTime >= iStrTime) && ( jEndTime <= iEndTime)) return false;  //이건아되여
					//위의 두개를 한개로
					if ( ((jStrTime > iStrTime) && ( jStrTime < iEndTime)) || ((jEndTime > iStrTime) && ( jEndTime < iEndTime)) )
					{
						gfn_alert( i + " 행에 중복 예약이 있습니다.", "중복확인","A");
						return false;  //이건아되여
					}
				}
				
				if ((jEndDate >= iStrDate) && ( jEndDate <= iEndDate))
				{
					//시간 체크
					//if ((jStrTime >= iStrTime) && ( jStrTime <= iEndTime)) return false;  //이건아되여
					//if ((jEndTime >= iStrTime) && ( jEndTime <= iEndTime)) return false;  //이건아되여
					if (((jStrTime > iStrTime) && ( jStrTime < iEndTime)) || ((jEndTime > iStrTime) && ( jEndTime < iEndTime)))
					{
						gfn_alert( i + " 행에 중복 예약이 있습니다.", "중복확인","A");
						return false;
					}
				}
			}
		}
	}
	
	//DataBase 에 존재 하는가 확인
	var kindCd  = ds_reservMst.getColumn(ds_reservMst.rowposition,"kindCd");		//1연회,2웨딩,3케이터링
	var sRow     = ds_banquetRoom.rowposition;
	var outletCd = ds_banquetRoom.getColumn(sRow,"outletCd");
	var fnbClass = ds_banquetRoom.getColumn(sRow,"fnbClass");
	var menuCd   = ds_banquetRoom.getColumn(sRow,"menuCd");
	var strDate  = ds_banquetRoom.getColumn(sRow,"strDate");
	var endDate  = ds_banquetRoom.getColumn(sRow,"endDate");
	var strTime  = ds_banquetRoom.getColumn(sRow,"strTime");
	var endTime  = ds_banquetRoom.getColumn(sRow,"endTime");
	

	ds_paramInfoDuplication.clearData();
	var nRow = ds_paramInfoDuplication.addRow();
	ds_paramInfoDuplication.setColumn(nRow,"outletCd", outletCd);
	ds_paramInfoDuplication.setColumn(nRow,"kindCd", kindCd);
	ds_paramInfoDuplication.setColumn(nRow,"fnbClass", fnbClass);
	ds_paramInfoDuplication.setColumn(nRow,"menuCd", menuCd);
	ds_paramInfoDuplication.setColumn(nRow,"strDate", strDate);
	ds_paramInfoDuplication.setColumn(nRow,"endDate", endDate);
	ds_paramInfoDuplication.setColumn(nRow,"strTime", strTime);
	ds_paramInfoDuplication.setColumn(nRow,"endTime", endTime);
	
	var strSvcID    = "reservDuplicationCheck";
	var strURL      = "rc/bms/eventMgmt/reservDuplicationCheck.xdo";
	var strInDs     = "ds_paramInfoDuplication=ds_paramInfoDuplication:A";
	var strOutDs    = "ds_reservListChk=ds_reservListChk";
	var strArg      = ""
	var strCallback = "fn_callBack";
	var bAsync      = false;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
	var nRowCnt = ds_reservListChk.rowcount;
	if (nRowCnt > 0 ) 
	{
		var nRow = ds_reservListChk.rowposition;
		if (gfn_nvl(ds_reservListChk.getColumn(nRow,"reservNum")) !=  gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"reservNum"),""))
		{
			var sMsg = "** 중복 예약 **   \r 예약번호 : " + ds_reservListChk.getColumn(nRow,"reservNum")
										+ "\r 행사명칭 : " + ds_reservListChk.getColumn(nRow,"reservNm")
										+ "\r 예약일자 : " + ds_reservListChk.getColumn(nRow,"reservDate") + " (" + ds_reservListChk.getColumn(nRow,"reservTime") + ")"
										+ "\r 예약자명 : " + ds_reservListChk.getColumn(nRow,"rsvnNm");
			gfn_alert(sMsg, "중복", "A");
			
			ds_banquetRoom.setColumn(sRow,"menuCd","");
			ds_banquetRoom.setColumn(sRow,"menuNm","");
			return false;
		}
	}
}
 
 
 
/*----------------------------------------------------------------------------------------------
 * 설명      : 상단 입력 없이 하단을 입력 하려 하는 경우
 *---------------------------------------------------------------------------------------------*/
function fn_addCheck()
{

	if(ds_reservMst.rowposition == -1) return false;
	var sRow     = ds_reservMst.rowposition;
	var kindCd   = gfn_nvl(ds_reservMst.getColumn(sRow,"kindCd"),"");		//1연회,2웨딩,3케이터링
	var outletCd = gfn_nvl(ds_reservMst.getColumn(sRow,"outletCd"),"");
	var strDate  = gfn_nvl(ds_reservMst.getColumn(sRow,"strDate"),"");
	var endDate  = gfn_nvl(ds_reservMst.getColumn(sRow,"endDate"),"");
	var strTime  = gfn_nvl(ds_reservMst.getColumn(sRow,"strTime"),"");
	var endTime  = gfn_nvl(ds_reservMst.getColumn(sRow,"endTime"),"");
	if ((kindCd == "") || (outletCd == "") || (strDate == "") || (endDate =="") || (strTime == "") || (endTime ==""))
	{
		//rc.bms.err.addAfter	기본 정보 입력후 등록이 가능 합니다.

		gfn_alert("rc.bms.err.addAfter", "확인");	// 기본 정보 입력후 등록이 가능 합니다.
		return false;
	}
	
}
 
function Button81_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_reservMst.rowposition == -1) 
	{
		gfn_alert("rc.bms.err.addAfter", "확인");	// 기본 정보 입력후 등록이 가능 합니다.
		return;
	}
	if (fn_addCheck() == false) return;
	
	var sRow     = ds_reservMst.rowposition;
	var reservNum = gfn_nvl(ds_reservMst.getColumn(sRow ,"reservNum"),"");
	if (reservNum == "")
	{
		gfn_alert("저장후 작업 하십시오.", "확인");	// 기본 정보 입력후 등록이 가능 합니다.
		return;
	}
	
	var amCd     = gfn_nvl(ds_reservMst.getColumn(sRow,"amCd"),"");
	var amNm     = gfn_nvl(ds_reservMst.getColumn(sRow,"amNm"),"");
	var reservNm = gfn_nvl(ds_reservMst.getColumn(sRow,"reservNm"),"");
	
	var psn = gfn_nvl(ds_reservMst.getColumn(sRow,"psn"),"");
	var maxPsn = gfn_nvl(ds_reservMst.getColumn(sRow,"maxPsn"),"");
	var rsvnNm = gfn_nvl(ds_reservMst.getColumn(sRow,"rsvnNm"),"");
	
	var handPhone  = gfn_nvl(ds_reservMst.getColumn(sRow,"handPhone"),"");
	var handPhone1 = gfn_nvl(ds_reservMst.getColumn(sRow,"handPhone1"),"");
	var handPhone2 = gfn_nvl(ds_reservMst.getColumn(sRow,"handPhone2"),"");
	var handPhone3 = gfn_nvl(ds_reservMst.getColumn(sRow,"handPhone3"),"");
	 
	var strDate  = gfn_nvl(ds_reservMst.getColumn(sRow,"strDate"),"");
	var endDate  = gfn_nvl(ds_reservMst.getColumn(sRow,"endDate"),"");
	var strTime  = gfn_nvl(ds_reservMst.getColumn(sRow,"strTime"),"");
	var endTime  = gfn_nvl(ds_reservMst.getColumn(sRow,"endTime"),"");
	
	var arrParam = new Array();
	arrParam[0] = reservNum;
	
	arrParam[1] = amCd;
	arrParam[2] = amNm;
	arrParam[3] = reservNm;
	
	arrParam[4] = psn;
	arrParam[5] = maxPsn;
	arrParam[6] = rsvnNm;
	
	arrParam[7] = handPhone;
	arrParam[8] = handPhone1;
	arrParam[9] = handPhone2;
	arrParam[10] = handPhone3;
	
	arrParam[11] = strDate;
	arrParam[12] = endDate;
	arrParam[13] = strTime;
	arrParam[14] = endTime;
		 
	var rtnVal = gfn_dialog("BanquetReport"				// dialogId
					   , "X_BMS::BanquetReport.xfdl"	// Url 
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	 
}



/*----------------------------------------------------------------------------------------------
 * 설명      : 카드 승인 처리
 *---------------------------------------------------------------------------------------------*/  
function tab_master_tab_pay_btn_approval_onclick(obj:Button,  e:ClickEventInfo)
{
	var rtn = fn_paymentCheck();
	if (rtn.isCheck == false) return;
	
	var rtn1 = SCKicc.approval("BMS", rtn.nReservNum, rtn.inPayAmt );
	if (rtn1 instanceof Object) {
		//refNo, resCd (0000:성공, 그외는 실패)
		if (rtn1.resCd == "0000") {
			 fn_paySave();
		}
		else {
			gfn_alert(rtn1.msg);
		}
	}
	else {
		gfn_alert("결재를 취소했습니다.");
		tab_master.tab_pay.msk_payAmt.value="";
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 카드 승인 취소 및 현금 결제 취소 처리 한다.
 *              카드 -> 승인취소 루틴 처리 
 *              현금 -> (-) 전표 발생
 *---------------------------------------------------------------------------------------------*/  
function tab_master_tab_pay_btn_payCancel_onclick(obj:Button,  e:ClickEventInfo)
{
	
	if (ds_approvalList.rowcount == 0) return;
	if (gfn_nvl(ds_approvalList.getColumn(ds_approvalList.rowposition, "refNo") ,"") == "")
	{
		gfn_alert("취소할 내역을 선택 하십시오!", "확인");	 
		return;
	}
	tab_master.tab_pay.msk_payAmt.value="";
	var reservNum = ds_approvalList.getColumn(ds_approvalList.rowposition, "refNo")
	var seqNum    = ds_approvalList.getColumn(ds_approvalList.rowposition, "seq")
	var payAmt    = ds_approvalList.getColumn(ds_approvalList.rowposition, "amt")
	if  (ds_approvalList.getColumn(ds_approvalList.rowposition, "payCd") == "20") 
	{
		var rtn = SCKicc.cancel("BMS",reservNum ,seqNum );
		if (rtn instanceof Object) {
		//refNo, resCd (0000:성공, 그외는 실패)
			if (rtn.resCd == "0000") 
			{
				 fn_paySave();
			}
			else 
			{
				gfn_alert(rtn.msg);
			}
		}
		else {
			gfn_alert("결재를 취소했습니다.");
			
		}
	}
	else
	{
	 // 전표취소
		var rtVal = gfn_confirm("현금 결제 취소를 진행 하시겠습니까?" );	// 선택된 자료를 삭제 하시겠습니까?
		if (rtVal == false)  return;
		
		fn_cashSave(reservNum,payAmt,"Y");
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 현금인경우 승인없이 저장 처리만 한다.
 *---------------------------------------------------------------------------------------------*/  
function tab_master_tab_pay_btn_cash_onclick(obj:Button,  e:ClickEventInfo)
{
	 
	var rtn = fn_paymentCheck();
	if (rtn.isCheck == false) return;
	
	var rtVal = gfn_confirm("현금 결제를 진행 하시겠습니까?" 
							+ "\r\r 현금영수증은 처리 할수 없습니다."
							+ "\r 행사종료후 Easy Check 승인 하시기 바랍니다.");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == false)  return;
	
	fn_cashSave(rtn.nReservNum,rtn.inPayAmt,"N");
	 
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 현금저장 
 *---------------------------------------------------------------------------------------------*/  
function fn_cashSave(reservNum, payAmt, cancelTy)
{
	var outletCd = gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"outletCd"),"");
	var custCd = gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"custCd"),"");
	var custNm = gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"custNm"),"");
	
	var netAmt = Math.round(payAmt  / 1.1);
	var vat = payAmt - netAmt;
	
	ds_payMst.clearData();
	ds_payMst.addRow();
	ds_payMst.setColumn(0,"reservNum", reservNum);
	ds_payMst.setColumn(0,"seq", "");
	ds_payMst.setColumn(0,"outletCd", outletCd);
	ds_payMst.setColumn(0,"salesDate", fv_sToday);
    ds_payMst.setColumn(0,"salsClass","현금");
    ds_payMst.setColumn(0,"payCd","10");
	ds_payMst.setColumn(0,"payAmt", payAmt );
	ds_payMst.setColumn(0,"exchAmt","0");
	
	ds_payMst.setColumn(0,"netAmt",netAmt);
	ds_payMst.setColumn(0,"vat",vat);
	 
	ds_payMst.setColumn(0,"payCancelYn",cancelTy);
	ds_payMst.setColumn(0,"useYn","1");
	ds_payMst.setColumn(0,"salsYn","Y");
	ds_payMst.setColumn(0, "empNo",  gfn_nvl(g_EmpNo,""));
	ds_payMst.setColumn(0, "ref1",  gfn_nvl(custCd,""));
	ds_payMst.setColumn(0, "ref2",  gfn_nvl(custNm,""));
		
	var strSvcID    = "savePaymeny";
    var strURL      = "rc/bms/eventMgmt/saveDataPayment.xdo";
    var strInDs     = "ds_payMst=ds_payMst:U "; 
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 카드승인되었으면 저장 처리 한다.
 *---------------------------------------------------------------------------------------------*/  
function fn_paySave()
{
 
	var sRow       = ds_reservMst.rowposition;
	var nReservNum = gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),"");
	var outletCd   = gfn_nvl(ds_reservMst.getColumn(sRow,"outletCd"),"");
	
	ds_payMst.clearData();
	var strSvcID    = "selectListCardVan";
	var strURL      = "rc/bms/eventMgmt/selectListCardVan.xdo";
	var strInDs     = "";
	var strOutDs    = "ds_payMst=ds_payMst";
	var strArg      = "reservNum="  + nReservNum
					+ " outletCd="  + outletCd; 
	var strCallback = "fn_callBack";
	var bAsync      = false;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
	 
	if (ds_payMst.rowcount > 0)
	{
		var custCd = gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"custCd"),"");
		var custNm = gfn_nvl(ds_reservMst.getColumn(ds_reservMst.rowposition,"custNm"),"");
		ds_payMst.setColumn(0, "ref1",  gfn_nvl(custCd,""));
		ds_payMst.setColumn(0, "ref2",  gfn_nvl(custNm,""));
		ds_payMst.setColumn(0, "empNo",  gfn_nvl(g_EmpNo,""));
		
		ds_payMst.updatecontrol = false;
		var bSucc = ds_payMst.setRowType(0, Dataset.ROWTYPE_INSERT);
		ds_payMst.updatecontrol = true;
		
		var strSvcID    = "savePaymeny";
		var strURL      = "rc/bms/eventMgmt/saveDataPayment.xdo";
		var strInDs     = "ds_payMst=ds_payMst:U "; 
		var strOutDs    = "";
		var strArg      = "";
		var strCallback = "fn_callBack";
		var bAsync      = true;
		
		gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
	}
	else
	{
		gfn_alert("처리중 오류 발생", "확인");	 
		return 
	}
	 
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 카드 저장후 내역을 보여 준다.
 *---------------------------------------------------------------------------------------------*/  
function fn_paySelect()
{
	 
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(tab_master.tab_pay.grd_payment);
	ds_approvalList.clearData();
	
	var sRow        = ds_reservMst.rowposition;
	var nReservNum  = gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),"");
	
    var strSvcID    = "searchPayment";
	var strURL      = "rc/bms/eventMgmt/selectListPayment.xdo";
	var strInDs     = "";
	var strOutDs    = "ds_approvalList=ds_approvalList";
	var strArg      = "reservNum="  + nReservNum; 
	var strCallback = "fn_callBack";
	var bAsync      = true;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 현금 카드 결제시 입력 내역을 체크 한다.
 *---------------------------------------------------------------------------------------------*/  
function fn_paymentCheck()
{
	var rtn = {isCheck:false, nReservNum:0, inPayAmt:0};
	
	var sRow     = ds_reservMst.rowposition;
	var nReservNum   = gfn_nvl(ds_reservMst.getColumn(sRow,"reservNum"),"");
	var custCd   = gfn_nvl(ds_reservMst.getColumn(sRow,"custCd"),"");
	if (nReservNum == "") 
	{
		gfn_alert("자료 저장후 결제를 입력 하십시오!", "확인");	 
		rtn.isCheck = false;
		return rtn;
	}
	
	if (custCd == "") 
	{
		gfn_alert("거래처 없이 결제가 불가능 합니다!", "확인");	 
		rtn.isCheck = false;
		return rtn;
	}
	
	if ( gfn_nvl(tab_master.tab_pay.msk_payAmt.value ,"") == "") 
	{
		gfn_alert("결제할 금액을 입력 하십시오!", "확인");	 
		rtn.isCheck = false;
		return rtn;
	}
	
	var totAmt = ds_total.getColumn(ds_total.rowposition,"totAmt");
	 
	var accTotAmt =0;
	//총결제 금액을 읽어 온다.
	for(var i = 0; i < ds_approvalList.rowcount; i++)
	{
		var payCancelYn = ds_approvalList.getColumn(i,"payCancelYn"); 
		if (payCancelYn == "Y")
		{
			accTotAmt = accTotAmt - Number(gfn_nvl(ds_approvalList.getColumn(i,"amt"),"0")); 
		}
		else
		{
			accTotAmt = accTotAmt + Number(gfn_nvl(ds_approvalList.getColumn(i,"amt"),"0")); 
		}
	}
	var inPayAmt = tab_master.tab_pay.msk_payAmt.value 
	var balAmt = totAmt - accTotAmt
	 
	if (inPayAmt > balAmt)
	{
		var sMsg = "** 받을금액이 많습니다. **   \r 남은금액 : " + balAmt;
												
		gfn_alert(sMsg, "확인");	 
		rtn.isCheck = false;
		return rtn;
	}
	
	rtn.isCheck = true;
	rtn.nReservNum = nReservNum;
	rtn.inPayAmt = inPayAmt;
	return rtn;
}
]]></Script>
  </Form>
</FDL>
