<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="DcEventMgmt" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" scrollbars="autoboth" onload="form_onload" titletext="제휴이벤트">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="4" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Tab id="tab_prmt" taborder="5" tabindex="0" scrollbars="autoboth" position="absolute 0 391 1237 710" style="showextrabutton:false;" anchor="left right bottom">
          <Tabpages>
            <Tabpage id="tpg_prmt" text="기본정보">
              <Layouts>
                <Layout>
                  <Div id="div_prmt" anchor="left bottom" taborder="14" position="absolute 0 0 1234 287">
                    <Layouts>
                      <Layout width="1242" height="283">
                        <Static id="Static13" class="sta_WFDA_Labelbg" position="absolute 103 214 774 241" anchor="left top"/>
                        <Static id="Static06" class="sta_WFDA_Labelbg" position="absolute 103 188 774 215" anchor="left top"/>
                        <Static id="Static08" class="sta_WFDA_Labelbg" position="absolute 103 84 774 111" anchor="left top"/>
                        <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 103 110 774 137" anchor="left top"/>
                        <Static id="Static10" class="sta_WFDA_Labelbg" position="absolute 103 136 774 163" anchor="left top"/>
                        <Static id="Static49" class="sta_WFDA_Labelbg" position="absolute 103 58 774 85" anchor="left top"/>
                        <Static id="Static31" class="sta_WFDA_Labelbg" position="absolute 103 32 774 59" anchor="left top"/>
                        <Static id="Static32" text="프로모션코드" class="sta_WFDA_Label01" position="absolute 0 32 104 59" anchor="left top"/>
                        <Static id="Static54" text="프로모션 기본정보 등록/조회" class="sta_WF_Title01" position="absolute 0 13 450 31" anchor="left top"/>
                        <Static id="Static55" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 0 450 13" anchor="left top"/>
                        <Static id="Static56" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 26 450 31" anchor="left top"/>
                        <Static id="Static24" text="프로모션명" class="sta_WFDA_Label01" position="absolute 258 32 362 59" anchor="left top"/>
                        <Static id="Static23" text="할인값" class="sta_WFDA_Label01" position="absolute 0 58 104 85" anchor="left top"/>
                        <Static id="Static12" text="적용대상" class="sta_WFDA_Label01" position="absolute 515 84 619 111" anchor="left top"/>
                        <Static id="Static34" text="고객연동여부" class="sta_WFDA_Label01" position="absolute 258 188 362 215" anchor="left top"/>
                        <Static id="Static35" text="고객구분" class="sta_WFDA_Label01" position="absolute 515 188 619 215" anchor="left top"/>
                        <Static id="Static48" text="제한기준" class="sta_WFDA_Label01" position="absolute 1 214 105 241" anchor="left top"/>
                        <Static id="Static51" text="사용여부" class="sta_WFDA_Label01" position="absolute 515 214 619 241" anchor="left top"/>
                        <MaskEdit id="msk_discntValue" taborder="3" displaynulltext="0" mask="#,###.00" class="msk_WF_Essential" position="absolute 106 61 255 82" anchor="default"/>
                        <Static id="Static01" text="한도제한" class="sta_WFDA_Label01" position="absolute 258 214 362 241" anchor="left top"/>
                        <Edit id="edt_prmtNm" taborder="1" class="edt_WF_Essential" position="absolute 364 35 770 56" anchor="left top"/>
                        <Combo id="cbo_applyObj" taborder="7" class="cmb_WF_Essential" position="absolute 621 87 770 108" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_applyObj_onitemchanged"/>
                        <Combo id="cbo_patronGrClass" taborder="20" position="absolute 364 191 513 212" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_patronGrClass_onitemchanged"/>
                        <Edit id="edt_patronClass" taborder="21" onkeydown="edt_gubun_onkeydown" position="absolute 621 191 770 212" style=":disabled {cursor:arrowwait;}" userdata="" anchor="default" oneditclick="Tab00_tabpage9_Div00_edt_gubun00_oneditclick"/>
                        <MaskEdit id="msk_limitLimi" taborder="23" displaynulltext="0" mask="#,###" position="absolute 364 217 513 238" anchor="default"/>
                        <CheckBox id="chk_useYn" taborder="24" text="사용여부" position="absolute 621 218 697 237" anchor="default"/>
                        <Edit id="edt_prmtCd" taborder="0" class="edt_WF_Essential" position="absolute 106 35 255 56" anchor="left top" readonly="true"/>
                        <Edit id="edt_limiBasis" taborder="22" onkeydown="edt_gubun_onkeydown" position="absolute 107 217 255 238" style=":disabled {cursor:arrowwait;}" userdata="" anchor="default"/>
                        <Grid id="grd_prmtOutlet" taborder="25" binddataset="ds_prmtOutlet" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" position="absolute 798 31 1231 284" anchor="all" resizeX="0" resizeY="0" moveX="0" moveY="0" onexpanddown="tab_prmt_tpg_prmt_div_prmt_grd_prmtOutlet_onexpanddown">
                          <Formats>
                            <Format id="default">
                              <Columns>
                                <Column size="32"/>
                                <Column size="82"/>
                                <Column size="193"/>
                                <Column size="60"/>
                              </Columns>
                              <Rows>
                                <Row size="24" band="head"/>
                                <Row size="24"/>
                              </Rows>
                              <Band id="head">
                                <Cell class="head_Excel"/>
                                <Cell col="1" colspan="2" text="사업장명" taborder="undefined"/>
                                <Cell col="3" text="사용여부"/>
                              </Band>
                              <Band id="body">
                                <Cell style="align:center middle;" text="expr:currow+1"/>
                                <Cell col="1" style="align:left middle;" text="bind:outletCd"/>
                                <Cell col="2" displaytype="normal" edittype="expr:(ds_prmtOutlet.getRowType(currow) == 2)?&quot;expand&quot;:&quot;none&quot;" style="align:left;" text="bind:outletNm" editdisplay="expr:(ds_prmtOutlet.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;" expandshow="expr:(ds_prmtOutlet.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                                <Cell col="3" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:useYn"/>
                              </Band>
                            </Format>
                          </Formats>
                        </Grid>
                        <Static id="Static03" class="sta_WFDA_Labelbg" position="absolute 103 162 774 189" anchor="left top"/>
                        <Static id="Static05" text="프로모션설명" class="sta_WFDA_Label01" position="absolute 258 58 362 85" anchor="left top"/>
                        <Edit id="edt_prmtExpl" taborder="4" position="absolute 364 61 770 82" anchor="left top"/>
                        <Combo id="cbo_dupYn" taborder="8" position="absolute 106 113 255 134" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_dupYn_onitemchanged"/>
                        <Static id="Static17" text="프로모션 기간" class="sta_WFDA_Label01" position="absolute 258 110 362 137" anchor="left top"/>
                        <Static id="Static25" text="시즌관리여부" class="sta_WFDA_Label01" position="absolute 0 136 104 163" anchor="left top"/>
                        <Static id="Static26" text="시즌구분" class="sta_WFDA_Label01" position="absolute 258 136 362 163" anchor="left top"/>
                        <Static id="Static29" text="주중주말" class="sta_WFDA_Label01" position="absolute 515 136 619 163" anchor="left top"/>
                        <Static id="Static40" text="사후정산여부" class="sta_WFDA_Label01" position="absolute 0 162 104 189" anchor="left top"/>
                        <Combo id="cbo_cpnyafterAdjustYn" taborder="16" position="absolute 106 165 255 186" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_cpnyafterAdjustYn_onitemchanged"/>
                        <Static id="Static41" text="사후정산비율" class="sta_WFDA_Label01" position="absolute 258 162 362 189" anchor="left top"/>
                        <Static id="Static00" text="신용카드연동" class="sta_WFDA_Label01" position="absolute 0 188 104 215" anchor="left top"/>
                        <Combo id="cbo_creditcardGrYn" taborder="19" position="absolute 106 191 255 212" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_creditcardGrYn_onitemchanged"/>
                        <ObjCalendar id="cal_startDd" titletext="캘린더" taborder="9" text="ObjCalendar00" scrollbars="none" position="absolute 364 113 459 134" anchor="default"/>
                        <ObjCalendar id="cal_endDd" titletext="캘린더" taborder="10" text="ObjCalendar00" scrollbars="none" position="absolute 460 113 553 134" anchor="default"/>
                        <Combo id="cbo_wendClass" taborder="15" position="absolute 621 139 770 160" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_wendClass_onitemchanged"/>
                        <Combo id="cbo_sesnClass" taborder="14" position="absolute 364 139 513 160" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_sesnClass_onitemchanged"/>
                        <Combo id="cbo_sesnmgmtYn" taborder="13" position="absolute 106 139 255 160" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_sesnmgmtYn_onitemchanged"/>
                        <Combo id="cbo_prmtClsf" taborder="5" class="cmb_WF_Essential" position="absolute 106 87 255 108" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_prmtClsf_onitemchanged"/>
                        <MaskEdit id="msk_cpnyafterAdjustRate" taborder="17" displaynulltext="0" mask="#,###.##" position="absolute 364 165 513 186" value="12.32" anchor="default"/>
                        <Static id="Static02" text="시간" class="sta_WFDA_Label01" position="absolute 555 110 619 137" anchor="left top"/>
                        <MaskEdit id="msk_startTime" taborder="11" type="string" mask="##:##" onkillfocus="msk_startTime_onkillfocus" onchar="msk_startTime_onchar" position="absolute 621 113 689 134" tooltiptext="시작시간" style="padding:3 0 0 -5;align:center middle;" anchor="default"/>
                        <MaskEdit id="msk_endTime" taborder="12" type="string" mask="##:##" position="absolute 702 113 770 134" tooltiptext="종료시간" style="padding:3 0 0 -5;align:center middle;" anchor="default"/>
                        <Combo id="cbo_prmtDiv" taborder="6" class="cmb_WF_Essential" position="absolute 364 87 513 108" anchor="default" onitemchanged="tab_prmt_tpg_prmt_div_prmt_cbo_prmtDiv_onitemchanged"/>
                        <Static id="Static07" text="프로모션분류" class="sta_WFDA_Label01" position="absolute 0 84 104 111" anchor="left top"/>
                        <Static id="Static11" text="프로모션구분" class="sta_WFDA_Label01" position="absolute 258 84 362 111" anchor="left top"/>
                        <Static id="Static16" text="중복여부" class="sta_WFDA_Label01" position="absolute 0 110 104 137" anchor="left top"/>
                        <Static id="Static45" text="사후정산거래처" class="sta_WFDA_Label01" position="absolute 515 162 619 189" anchor="left top"/>
                        <Edit id="edt_cpnyafterAdjustCust" taborder="18" onkeydown="edt_gubun_onkeydown" position="absolute 621 165 770 186" style=":disabled {cursor:arrowwait;}" userdata="" anchor="default"/>
                        <Static id="Static14" text="프로모션 적용 업장" class="sta_WF_Title01" position="absolute 798 13 979 31" anchor="left top"/>
                        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 798 0 1209 13" anchor="left top"/>
                        <Static id="Static18" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 798 26 1208 31" anchor="left top"/>
                        <Button id="btn_dataAdd" taborder="26" class="btn_WF_GrdPlus" position="absolute 1193 7 1211 27" anchor="default" onclick="tab_prmt_tpg_prmt_div_prmt_btn_dataAdd_onclick"/>
                        <Button id="btn_dataDel" taborder="27" class="btn_WF_GrdMinus" position="absolute 1213 7 1231 27" anchor="default" onclick="tab_prmt_tpg_prmt_div_prmt_btn_dataDel_onclick"/>
                        <Static id="Static19" class="Guide01_AreaRed" visible="false" position="absolute 1073 27 1234 31" anchor="default"/>
                        <Static id="Static20" class="Guide01_AreaRed" visible="false" position="absolute 1211 9 1213 27" anchor="default"/>
                      </Layout>
                    </Layouts>
                  </Div>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tpg_cond" text="조건설정">
              <Layouts>
                <Layout width="1235" height="366">
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 0 450 13"/>
                  <Static id="Static22" text="조건설정" class="sta_WF_Title01" position="absolute 0 13 450 31"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 26 450 31"/>
                  <Grid id="grd_prmtCond" taborder="1" binddataset="ds_prmtCond" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" fillareatype="none" onselectchanged="grd_event_onselectchanged" ontextchanged="grd_event_ontextchanged" position="absolute -1 31 1233 291" anchor="all" resizeX="0" resizeY="0" moveX="0" moveY="0" onexpanddown="tab_prmt_tpg_cond_grd_prmtCond_onexpanddown">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="32"/>
                          <Column size="60"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="80"/>
                          <Column size="100"/>
                          <Column size="60"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" colspan="2" text="업장명" taborder="undefined"/>
                          <Cell col="3" text="구분"/>
                          <Cell col="4" text="분류"/>
                          <Cell col="5" text="소분류"/>
                          <Cell col="6" text="코드"/>
                          <Cell col="7" text="대상명"/>
                          <Cell col="8" text="대상구분"/>
                          <Cell col="9" text="적용대상"/>
                          <Cell col="10" text="최소수량"/>
                          <Cell col="11" text="최대수량"/>
                          <Cell col="12" text="최소금액"/>
                          <Cell col="13" text="최대금액"/>
                          <Cell col="14" text="선택체크"/>
                          <Cell col="15" text="할인값"/>
                          <Cell col="16" text="사용여부"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align:center middle;" text="expr:currow+1"/>
                          <Cell col="1" style="align:left middle;" text="bind:outletCd"/>
                          <Cell col="2" displaytype="normal" edittype="expand" text="bind:outletNm" expandshow="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="3" edittype="expand" text="bind:menuClassNm" expandshow="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="4" edittype="expand" text="bind:menuClsfiNm" expandshow="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="5" edittype="expand" text="bind:menuSclassNm" expandshow="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="6" displaytype="normal" edittype="expand" text="bind:menuCd" expandshow="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="7" displaytype="text" edittype="text" text="bind:applyObjNm"/>
                          <Cell col="8" displaytype="combo" edittype="combo" text="bind:applyObjClass" combodisplay="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;"/>
                          <Cell col="9" displaytype="combo" edittype="combo" text="bind:applyObj" combodisplay="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;"/>
                          <Cell col="10" displaytype="number" edittype="masknumber" text="bind:minQuantity" mask="#,###.##"/>
                          <Cell col="11" displaytype="number" edittype="masknumber" text="bind:maxQuantity" mask="#,###.##"/>
                          <Cell col="12" displaytype="number" edittype="masknumber" text="bind:minAmt" mask="#,###.##"/>
                          <Cell col="13" displaytype="number" edittype="masknumber" text="bind:maxAmt" mask="#,###.##"/>
                          <Cell col="14" displaytype="combo" edittype="combo" text="bind:choiceCheck" combodisplay="expr:(ds_prmtCond.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;"/>
                          <Cell col="15" displaytype="number" edittype="masknumber" text="bind:discntValue" mask="#,###.##"/>
                          <Cell col="16" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:useYn"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_dataAdd" taborder="2" class="btn_WF_GrdPlus" position="absolute 1193 7 1211 27" onclick="tab_prmt_tpg_cond_btn_dataAdd_onclick" anchor="right bottom"/>
                  <Button id="btn_dataDel" taborder="3" class="btn_WF_GrdMinus" position="absolute 1213 7 1231 27" onclick="tab_prmt_tpg_cond_btn_dataDel_onclick" anchor="right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tpg_mixs" text="믹스설정">
              <Layouts>
                <Layout>
                  <Static id="Static00" text="믹스설정" class="sta_WF_Title01" position="absolute 0 13 450 31"/>
                  <Static id="Static01" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 0 450 13"/>
                  <Static id="Static02" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 26 450 31"/>
                  <Grid id="grd_prmtMix" taborder="1" binddataset="ds_prmtMixs" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" fillareatype="none" onselectchanged="grd_event_onselectchanged" ontextchanged="grd_event_ontextchanged" position="absolute -1 31 1233 291" anchor="all" resizeX="0" resizeY="0" moveX="0" moveY="0" onexpanddown="tab_prmt_tpg_mixs_grd_prmtMix_onexpanddown">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="32"/>
                          <Column size="60"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="152"/>
                          <Column size="115"/>
                          <Column size="60"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" colspan="2" text="업장명" taborder="undefined"/>
                          <Cell col="3" text="구분"/>
                          <Cell col="4" text="분류"/>
                          <Cell col="5" text="소분류"/>
                          <Cell col="6" text="코드"/>
                          <Cell col="7" text="조건명"/>
                          <Cell col="8" text="조건체크"/>
                          <Cell col="9" text="사용여부"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align:center middle;" text="expr:currow+1"/>
                          <Cell col="1" style="align:left middle;" text="bind:outletCd"/>
                          <Cell col="2" displaytype="normal" edittype="expand" text="bind:outletNm" expandshow="expr:(ds_prmtMixs.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="3" edittype="expand" text="bind:menuClassNm" expandshow="expr:(ds_prmtMixs.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="4" edittype="expand" text="bind:menuClsfiNm" expandshow="expr:(ds_prmtMixs.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="5" edittype="expand" text="bind:menuSclassNm" expandshow="expr:(ds_prmtMixs.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="6" edittype="expand" text="bind:menuCd" expandshow="expr:(ds_prmtMixs.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="7" displaytype="text" edittype="text" text="bind:condNm"/>
                          <Cell col="8" displaytype="combo" edittype="combo" text="bind:condCheck" combodisplay="expr:(ds_prmtMixs.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;"/>
                          <Cell col="9" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:useYn"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_dataAdd" taborder="2" class="btn_WF_GrdPlus" position="absolute 1193 7 1211 27" onclick="tab_prmt_tpg_mixs_btn_dataAdd_onclick" anchor="right bottom"/>
                  <Button id="btn_dataDel" taborder="3" class="btn_WF_GrdMinus" position="absolute 1213 7 1231 27" onclick="tab_prmt_tpg_mixs_btn_dataDel_onclick" anchor="right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tpg_rcpt" text="영수증설정">
              <Layouts>
                <Layout>
                  <Grid id="grd_prmtRcpt" taborder="0" binddataset="ds_prmtRcpt" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" fillareatype="none" onselectchanged="grd_event_onselectchanged" ontextchanged="grd_event_ontextchanged" position="absolute -1 31 1234 291" anchor="all" resizeX="0" resizeY="0" moveX="0" moveY="0" onexpanddown="tab_prmt_tpg_rcpt_grd_prmtRcpt_onexpanddown" oncellclick="tab_prmt_tpg_rcpt_grd_prmtRcpt_oncellclick">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="32"/>
                          <Column size="120"/>
                          <Column size="184"/>
                          <Column size="554"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="100"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" colspan="2" text="적용 프로모션코드" taborder="undefined"/>
                          <Cell col="3" text="메시지"/>
                          <Cell col="4" text="바코드"/>
                          <Cell col="5" text="CUT 여부"/>
                          <Cell col="6" text="사용여부"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align:center middle;" text="expr:currow+1"/>
                          <Cell col="1" style="align:left middle;" text="bind:applPrmtCd"/>
                          <Cell col="2" displaytype="normal" edittype="expand" text="bind:applPrmtCdNm" expandshow="expr:(ds_prmtRcpt.getRowType(currow) == 2)?&quot;show&quot;:&quot;hide&quot;"/>
                          <Cell col="3" displaytype="text" edittype="text" text="bind:msg" editdisplay="expr:(ds_prmtRcpt.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;"/>
                          <Cell col="4" displaytype="checkbox" edittype="checkbox" text="bind:barCdYn"/>
                          <Cell col="5" displaytype="checkbox" edittype="checkbox" text="bind:cutYn"/>
                          <Cell col="6" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:useYn"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static54" text="영수증설정" class="sta_WF_Title01" position="absolute 0 13 450 31" anchor="left top"/>
                  <Static id="Static55" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 0 450 13" anchor="left top"/>
                  <Static id="Static56" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 26 450 31" anchor="left top"/>
                  <Button id="btn_dataAdd" taborder="1" class="btn_WF_GrdPlus" position="absolute 1193 7 1211 27" onclick="tab_prmt_tpg_rcpt_btn_dataAdd_onclick" anchor="right bottom"/>
                  <Button id="btn_dataDel" taborder="2" class="btn_WF_GrdMinus" position="absolute 1213 7 1231 27" onclick="tab_prmt_tpg_rcpt_btn_dataDel_onclick" anchor="right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tpg_card" text="카드프리픽스">
              <Layouts>
                <Layout width="1235" height="291">
                  <Static id="Static54" text="카드 프리픽스 정보 등록/조회" class="sta_WF_Title01" position="absolute 0 13 450 31" anchor="left top"/>
                  <Static id="Static55" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 0 450 13" anchor="left top"/>
                  <Static id="Static56" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 26 450 31" anchor="left top"/>
                  <Grid id="grd_prmtCard" taborder="1" binddataset="ds_prmtCard" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" fillareatype="none" position="absolute -1 31 1233 290" anchor="all" resizeX="0" resizeY="0" moveX="0" moveY="0">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="32"/>
                          <Column size="200"/>
                          <Column size="200"/>
                          <Column size="60"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="FROMCARD" taborder="undefined"/>
                          <Cell col="2" text="TO CARD" taborder="undefined"/>
                          <Cell col="3" text="사용여부"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align:center middle;" text="expr:currow+1"/>
                          <Cell col="1" displaytype="text" edittype="text" style="align:left middle;" text="bind:fromCard" editdisplay="expr:(ds_prmtCard.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;"/>
                          <Cell col="2" displaytype="text" edittype="text" text="bind:toCard" editdisplay="expr:(ds_prmtCard.getRowType(currow) == 2)?&quot;display&quot;:&quot;edit&quot;"/>
                          <Cell col="3" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:useYn"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_dataAdd" taborder="2" class="btn_WF_GrdPlus" position="absolute 1193 7 1211 27" onclick="tab_prmt_tpg_card_btn_dataAdd_onclick" anchor="right bottom"/>
                  <Button id="btn_dataDel" taborder="3" class="btn_WF_GrdMinus" position="absolute 1213 7 1231 27" onclick="tab_prmt_tpg_card_btn_dataDel_onclick" anchor="right bottom"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1238 71" anchor="left top right"/>
        <Static id="Static02" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 1 30 94 40"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 450 84"/>
        <Static id="Static03" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1 40 16 61"/>
        <Static id="Static12" text="기간" class="sta_WFSA_label" position="absolute 17 40 112 61" anchor="left top"/>
        <Static id="Static14" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 552 40 582 61"/>
        <Static id="Static30" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 383 39 393 60"/>
        <Static id="Static31" text="프로모션명" class="sta_WFSA_label" position="absolute 313 40 392 61" anchor="left top"/>
        <Static id="Static13" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 49 40 59 61" anchor="left top"/>
        <Static id="Static16" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 283 40 313 61" anchor="left top"/>
        <Static id="Static32" text="~" class="sta_WF_Dash" position="absolute 167 40 183 61"/>
        <Static id="Static86" class="Guide01_AreaRed" visible="false" position="absolute 159 46 167 53"/>
        <Static id="Static33" class="Guide01_AreaRed" visible="false" position="absolute 175 46 183 53"/>
        <ObjCalendar id="cal_serchDateFr" titletext="캘린더" taborder="1" text="ObjCalendar00" scrollbars="none" position="absolute 59 40 159 61"/>
        <ObjCalendar id="cal_serchDateTo" titletext="캘린더" taborder="2" text="ObjCalendar00" scrollbars="none" position="absolute 183 40 283 61"/>
        <Edit id="edt_serchPrmtNm" taborder="3" ontextchanged="edt_serchAmNm_ontextchanged" position="absolute 393 40 552 61" style=":disabled {cursor:arrowwait;}"/>
        <Static id="Static22" text="제휴 이벤트 " class="sta_WF_Title01" position="absolute 0 84 450 102"/>
        <Static id="Static17" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 97 450 102"/>
        <Grid id="grd_prmt" taborder="7" binddataset="ds_prmtList" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" fillareatype="none" position="absolute 1 103 1237 390" anchor="all" resizeX="0" resizeY="0" moveX="0" moveY="0">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="32"/>
                <Column size="101"/>
                <Column size="144"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="61"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="50"/>
                <Column size="50"/>
                <Column size="82"/>
                <Column size="100"/>
                <Column size="62"/>
                <Column size="69"/>
                <Column size="100"/>
                <Column size="62"/>
                <Column size="83"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="79"/>
                <Column size="60"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" colspan="2" text="프로모션명" taborder="undefined"/>
                <Cell col="3" text="할인값"/>
                <Cell col="4" text="설명"/>
                <Cell col="5" text="분류"/>
                <Cell col="6" text="구분"/>
                <Cell col="7" text="적용대상"/>
                <Cell col="8" text="중복허용"/>
                <Cell col="9" colspan="2" text="시작 ~ 종료일" taborder="undefined"/>
                <Cell col="11" colspan="2" text="시간" taborder="undefined"/>
                <Cell col="13" text="시즌관리"/>
                <Cell col="14" text="시즌구분"/>
                <Cell col="15" text="주중주말"/>
                <Cell col="16" text="고객연동"/>
                <Cell col="17" text="고객구분"/>
                <Cell col="18" text="사후정산"/>
                <Cell col="19" text="사후정산비율"/>
                <Cell col="20" text="사후정산거래처"/>
                <Cell col="21" text="제한기준"/>
                <Cell col="22" text="한도제한"/>
                <Cell col="23" text="신용카드연동"/>
                <Cell col="24" text="사용여부"/>
              </Band>
              <Band id="body">
                <Cell style="align:center middle;" text="expr:currow+1"/>
                <Cell col="1" text="bind:prmtCd"/>
                <Cell col="2" style="align:left;" text="bind:prmtNm"/>
                <Cell col="3" style="align:right;" text="bind:discntValue" mask="#,###.00" editdisplay="edit"/>
                <Cell col="4" style="align:left;" text="bind:prmtExpl" editdisplay="edit"/>
                <Cell col="5" displaytype="normal" text="bind:prmtClsfNm" combodisplay="edit"/>
                <Cell col="6" displaytype="normal" text="bind:prmtDivNm" combodisplay="edit"/>
                <Cell col="7" displaytype="normal" text="bind:applyObjNm" combodisplay="edit"/>
                <Cell col="8" displaytype="normal" edittype="none" text="bind:dupYnNm"/>
                <Cell col="9" displaytype="date" edittype="none" text="bind:startDd" calendardisplay="edit"/>
                <Cell col="10" displaytype="date" edittype="none" text="bind:endDd" calendardisplay="edit"/>
                <Cell col="11" edittype="none" text="bind:startTime" mask="##:##"/>
                <Cell col="12" edittype="none" text="bind:endTime" mask="##:##"/>
                <Cell col="13" displaytype="normal" edittype="none" text="bind:sesnmgmtYnNm"/>
                <Cell col="14" displaytype="normal" text="bind:sesnClassNm" combodisplay="edit"/>
                <Cell col="15" displaytype="normal" text="bind:wendClassNm" combodisplay="edit"/>
                <Cell col="16" displaytype="normal" edittype="none" text="bind:patronGrClassNm"/>
                <Cell col="17" displaytype="normal" text="bind:patronClass" editdisplay="edit"/>
                <Cell col="18" displaytype="normal" edittype="none" text="bind:cpnyafterAdjustYnNm"/>
                <Cell col="19" text="bind:cpnyafterAdjustRate" editdisplay="edit"/>
                <Cell col="20" text="bind:cpnyafterAdjustCust" editdisplay="edit"/>
                <Cell col="21" text="bind:limiBasis" editdisplay="edit"/>
                <Cell col="22" text="bind:limitLimi" editdisplay="edit"/>
                <Cell col="23" displaytype="normal" edittype="none" text="bind:creditcardGrYnNm"/>
                <Cell col="24" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:useYn"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Button id="btn_dataAdd" taborder="8" onclick="tab_prmt_tpg_prmt_div_prmt_btn_dataAdd_onclick" class="btn_WF_GrdPlus" position="absolute 1018 -423 1036 -403"/>
        <Button id="btn_dataDel" taborder="9" onclick="tab_prmt_tpg_prmt_div_prmt_btn_dataDel_onclick" class="btn_WF_GrdMinus" position="absolute 1038 -423 1056 -403"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item6" compid="tab_prmt.tabpage9.Div00.edt_gubun03" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item7" compid="tab_prmt.tabpage9.Div00.edt_gubun03" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item21" compid="tab_prmt.tabpage9.Div00.cal_diaryDate" propid="text" datasetid="ds_scheduleMgmt" columnid="diaryDate"/>
      <BindItem id="item4" compid="tab_prmt.tabpage9.Div00.cal_diaryDate00" propid="text" datasetid="ds_scheduleMgmt" columnid="diaryDate"/>
      <BindItem id="item0" compid="edt_serchPrmtNm" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item1" compid="edt_serchPrmtNm" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item2" compid="tab_prmt.tabpage9.Div00.edt_gubun00" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item3" compid="tab_prmt.tabpage9.Div00.edt_gubun00" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item5" compid="tab_prmt.tabpage9.Div00.chk_useYn" propid="value" datasetid="ds_posFnctSet" columnid="useYn"/>
      <BindItem id="item8" compid="tab_prmt.tabpage9.Div00.msk_startTime00" propid="value" datasetid="ds_scheduleMgmt" columnid="startTime"/>
      <BindItem id="item9" compid="tab_prmt.tabpage9.Div00.msk_endTime00" propid="value" datasetid="ds_scheduleMgmt" columnid="endTime"/>
      <BindItem id="item10" compid="tab_prmt.tabpage9.Div00.edt_gubun01" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item11" compid="tab_prmt.tabpage9.Div00.edt_gubun01" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item12" compid="tab_prmt.tpg_prmt.div_prmt.edt_prmtCd" propid="value" datasetid="ds_prmt" columnid="prmtCd"/>
      <BindItem id="item13" compid="tab_prmt.tpg_prmt.div_prmt.edt_prmtNm" propid="value" datasetid="ds_prmt" columnid="prmtNm"/>
      <BindItem id="item15" compid="tab_prmt.tpg_prmt.div_prmt.msk_discntValue" propid="value" datasetid="ds_prmt" columnid="discntValue"/>
      <BindItem id="item16" compid="tab_prmt.tpg_prmt.div_prmt.edt_prmtExpl" propid="value" datasetid="ds_prmt" columnid="prmtExpl"/>
      <BindItem id="item17" compid="tab_prmt.tpg_prmt.div_prmt.cbo_prmtClsf" propid="value" datasetid="ds_prmt" columnid="prmtClsf"/>
      <BindItem id="item18" compid="tab_prmt.tpg_prmt.div_prmt.cbo_prmtDiv" propid="value" datasetid="ds_prmt" columnid="prmtDiv"/>
      <BindItem id="item19" compid="tab_prmt.tpg_prmt.div_prmt.cbo_applyObj" propid="value" datasetid="ds_prmt" columnid="applyObj"/>
      <BindItem id="item20" compid="tab_prmt.tpg_prmt.div_prmt.cbo_dupYn" propid="value" datasetid="ds_prmt" columnid="dupYn"/>
      <BindItem id="item22" compid="tab_prmt.tpg_prmt.div_prmt.cal_startDd" propid="text" datasetid="ds_prmt" columnid="startDd"/>
      <BindItem id="item23" compid="tab_prmt.tpg_prmt.div_prmt.cal_endDd" propid="text" datasetid="ds_prmt" columnid="endDd"/>
      <BindItem id="item26" compid="tab_prmt.tpg_prmt.div_prmt.msk_startTime" propid="value" datasetid="ds_prmt" columnid="startTime"/>
      <BindItem id="item27" compid="tab_prmt.tpg_prmt.div_prmt.msk_endTime" propid="value" datasetid="ds_prmt" columnid="endTime"/>
      <BindItem id="item28" compid="tab_prmt.tpg_prmt.div_prmt.cbo_sesnmgmtYn" propid="value" datasetid="ds_prmt" columnid="sesnmgmtYn"/>
      <BindItem id="item29" compid="tab_prmt.tpg_prmt.div_prmt.cbo_sesnClass" propid="value" datasetid="ds_prmt" columnid="sesnClass"/>
      <BindItem id="item30" compid="tab_prmt.tpg_prmt.div_prmt.cbo_wendClass" propid="value" datasetid="ds_prmt" columnid="wendClass"/>
      <BindItem id="item31" compid="tab_prmt.tpg_prmt.div_prmt.cbo_cpnyafterAdjustYn" propid="value" datasetid="ds_prmt" columnid="cpnyafterAdjustYn"/>
      <BindItem id="item32" compid="tab_prmt.tpg_prmt.div_prmt.msk_cpnyafterAdjustRate" propid="value" datasetid="ds_prmt" columnid="cpnyafterAdjustRate"/>
      <BindItem id="item33" compid="tab_prmt.tpg_prmt.div_prmt.edt_cpnyafterAdjustCust" propid="value" datasetid="ds_prmt" columnid="cpnyafterAdjustCust"/>
      <BindItem id="item34" compid="tab_prmt.tpg_prmt.div_prmt.cbo_creditcardGrYn" propid="value" datasetid="ds_prmt" columnid="creditcardGrYn"/>
      <BindItem id="item35" compid="tab_prmt.tpg_prmt.div_prmt.cbo_patronGrClass" propid="value" datasetid="ds_prmt" columnid="patronGrClass"/>
      <BindItem id="item36" compid="tab_prmt.tpg_prmt.div_prmt.edt_patronClass" propid="value" datasetid="ds_prmt" columnid="patronClass"/>
      <BindItem id="item37" compid="tab_prmt.tpg_prmt.div_prmt.edt_limiBasis" propid="value" datasetid="ds_prmt" columnid="limiBasis"/>
      <BindItem id="item38" compid="tab_prmt.tpg_prmt.div_prmt.msk_limitLimi" propid="value" datasetid="ds_prmt" columnid="limitLimi"/>
      <BindItem id="item39" compid="tab_prmt.tpg_prmt.div_prmt.chk_useYn" propid="value" datasetid="ds_prmt" columnid="useYn"/>
    </Bind>
    <Objects>
      <Dataset id="ds_prmt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_prmt_oncolumnchanged">
        <ColumnInfo>
          <Column id="prmtCd" type="STRING" size="50"/>
          <Column id="bcCd" type="STRING" size="50"/>
          <Column id="bcNm" type="STRING" size="256"/>
          <Column id="discntValue" type="BIGDECIMAL" size="22"/>
          <Column id="prmtNm" type="STRING" size="100"/>
          <Column id="prmtExpl" type="STRING" size="400"/>
          <Column id="prmtClsf" type="STRING" size="50"/>
          <Column id="prmtClsfNm" type="STRING" size="256"/>
          <Column id="prmtDiv" type="STRING" size="50"/>
          <Column id="prmtDivNm" type="STRING" size="256"/>
          <Column id="applyObj" type="STRING" size="50"/>
          <Column id="applyObjNm" type="STRING" size="256"/>
          <Column id="dupYn" type="STRING" size="1"/>
          <Column id="dupYnNm" type="STRING" size="256"/>
          <Column id="startDd" type="STRING" size="8"/>
          <Column id="startTime" type="STRING" size="6"/>
          <Column id="endDd" type="STRING" size="8"/>
          <Column id="endTime" type="STRING" size="6"/>
          <Column id="sesnmgmtYn" type="STRING" size="1"/>
          <Column id="sesnmgmtYnNm" type="STRING" size="256"/>
          <Column id="sesnClass" type="STRING" size="50"/>
          <Column id="sesnClassNm" type="STRING" size="256"/>
          <Column id="wendClass" type="STRING" size="50"/>
          <Column id="wendClassNm" type="STRING" size="256"/>
          <Column id="patronGrClass" type="STRING" size="1"/>
          <Column id="patronGrClassNm" type="STRING" size="256"/>
          <Column id="patronClass" type="STRING" size="50"/>
          <Column id="cpnyafterAdjustYn" type="STRING" size="1"/>
          <Column id="cpnyafterAdjustYnNm" type="STRING" size="256"/>
          <Column id="cpnyafterAdjustRate" type="BIGDECIMAL" size="22"/>
          <Column id="cpnyafterAdjustAcct" type="STRING" size="50"/>
          <Column id="limitLimi" type="BIGDECIMAL" size="22"/>
          <Column id="limiBasis" type="STRING" size="50"/>
          <Column id="creditcardGrYn" type="STRING" size="1"/>
          <Column id="creditcardGrYnNm" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="1"/>
          <Column id="cpnyafterAdjustCust" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prmtOutlet" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_prmtOutlet_oncolumnchanged">
        <ColumnInfo>
          <Column id="prmtCd" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prmtRcpt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="prmtCd" type="STRING" size="50"/>
          <Column id="prmtNm" type="STRING" size="256"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="applPrmtCd" type="STRING" size="50"/>
          <Column id="applPrmtCdNm" type="STRING" size="256"/>
          <Column id="barCdYn" type="STRING" size="50"/>
          <Column id="cutYn" type="STRING" size="1"/>
          <Column id="msg" type="STRING" size="200"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prmtCard" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="prmtCd" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="fromCard" type="STRING" size="50"/>
          <Column id="toCard" type="STRING" size="50"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prmtMixs" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="prmtCd" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="menuClass" type="STRING" size="50"/>
          <Column id="menuClassNm" type="STRING" size="256"/>
          <Column id="menuClsfi" type="STRING" size="50"/>
          <Column id="menuClsfiNm" type="STRING" size="256"/>
          <Column id="menuSclass" type="STRING" size="50"/>
          <Column id="menuSclassNm" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="50"/>
          <Column id="condNm" type="STRING" size="100"/>
          <Column id="condCheck" type="STRING" size="50"/>
          <Column id="condCheckNm" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prmtCond" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_prmtCond_oncolumnchanged">
        <ColumnInfo>
          <Column id="prmtCd" type="STRING" size="50"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="outletNm" type="STRING" size="256"/>
          <Column id="menuClass" type="STRING" size="50"/>
          <Column id="menuClassNm" type="STRING" size="256"/>
          <Column id="menuClsfi" type="STRING" size="50"/>
          <Column id="menuClsfiNm" type="STRING" size="256"/>
          <Column id="menuSclass" type="STRING" size="50"/>
          <Column id="menuSclassNm" type="STRING" size="256"/>
          <Column id="menuCd" type="STRING" size="50"/>
          <Column id="applyObjNm" type="STRING" size="256"/>
          <Column id="applyObjClass" type="STRING" size="50"/>
          <Column id="applyObj" type="STRING" size="50"/>
          <Column id="applyNm" type="STRING" size="256"/>
          <Column id="minQuantity" type="BIGDECIMAL" size="22"/>
          <Column id="maxQuantity" type="BIGDECIMAL" size="22"/>
          <Column id="minAmt" type="BIGDECIMAL" size="22"/>
          <Column id="maxAmt" type="BIGDECIMAL" size="22"/>
          <Column id="choiceCheck" type="STRING" size="1"/>
          <Column id="discntValue" type="BIGDECIMAL" size="22"/>
          <Column id="useYn" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prmtValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="discntValue" type="BIGDECIMAL" size="22"/>
          <Column id="prmtNm" type="STRING" size="100"/>
          <Column id="startDd" type="STRING" size="8"/>
          <Column id="endDd" type="STRING" size="8"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="discntValue">title:할인값,required:true</Col>
            <Col id="prmtNm">title:프로모션명,required:true</Col>
            <Col id="startDd">title:시작일,required:true</Col>
            <Col id="endDd">title:종료일,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_prmtOutletValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_prmtOutlet_oncolumnchanged">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="50"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:지점코드,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_prmtRcptValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="applPrmtCd" type="STRING" size="50"/>
          <Column id="msg" type="STRING" size="200"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="applPrmtCd">title:프로모션코드,required:true</Col>
            <Col id="msg">title:영수증 내역,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_prmtCardValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="fromCard" type="STRING" size="50"/>
          <Column id="toCard" type="STRING" size="50"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="fromCard">title:카드프리픽스 시작,required:true,digits:true</Col>
            <Col id="toCard">title:카드프리픽스 종료,required:true,digits:true,comparemax:fromCard:시작 카드번호</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_prmtMixsValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="condNm" type="STRING" size="100"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:업장코드,required:true</Col>
            <Col id="condNm">title:조건명,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_prmtCondValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_prmtCond_oncolumnchanged">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="applyObjNm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:업장코드,required:true</Col>
            <Col id="applyObjNm">title:대상명,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">Y</Col>
            <Col id="insYn">Y</Col>
            <Col id="delYn">Y</Col>
            <Col id="savYn">Y</Col>
            <Col id="prtYn">Y</Col>
            <Col id="exlYn">Y</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_prmtList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_prmtList_onrowposchanged">
        <ColumnInfo>
          <Column id="prmtCd" type="STRING" size="50"/>
          <Column id="bcCd" type="STRING" size="50"/>
          <Column id="bcNm" type="STRING" size="256"/>
          <Column id="discntValue" type="BIGDECIMAL" size="22"/>
          <Column id="prmtNm" type="STRING" size="100"/>
          <Column id="prmtExpl" type="STRING" size="400"/>
          <Column id="prmtClsf" type="STRING" size="50"/>
          <Column id="prmtClsfNm" type="STRING" size="256"/>
          <Column id="prmtDiv" type="STRING" size="50"/>
          <Column id="prmtDivNm" type="STRING" size="256"/>
          <Column id="applyObj" type="STRING" size="50"/>
          <Column id="applyObjNm" type="STRING" size="256"/>
          <Column id="dupYn" type="STRING" size="1"/>
          <Column id="dupYnNm" type="STRING" size="256"/>
          <Column id="startDd" type="STRING" size="8"/>
          <Column id="startTime" type="STRING" size="6"/>
          <Column id="endDd" type="STRING" size="8"/>
          <Column id="endTime" type="STRING" size="6"/>
          <Column id="sesnmgmtYn" type="STRING" size="1"/>
          <Column id="sesnmgmtYnNm" type="STRING" size="256"/>
          <Column id="sesnClass" type="STRING" size="50"/>
          <Column id="sesnClassNm" type="STRING" size="256"/>
          <Column id="wendClass" type="STRING" size="50"/>
          <Column id="wendClassNm" type="STRING" size="256"/>
          <Column id="patronGrClass" type="STRING" size="1"/>
          <Column id="patronGrClassNm" type="STRING" size="256"/>
          <Column id="patronClass" type="STRING" size="50"/>
          <Column id="cpnyafterAdjustYn" type="STRING" size="1"/>
          <Column id="cpnyafterAdjustYnNm" type="STRING" size="256"/>
          <Column id="cpnyafterAdjustRate" type="BIGDECIMAL" size="22"/>
          <Column id="cpnyafterAdjustAcct" type="STRING" size="50"/>
          <Column id="limitLimi" type="BIGDECIMAL" size="22"/>
          <Column id="limiBasis" type="STRING" size="50"/>
          <Column id="creditcardGrYn" type="STRING" size="1"/>
          <Column id="creditcardGrYnNm" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="1"/>
          <Column id="cpnyafterAdjustCust" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <InitValue/>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : DcEventMngt
  파 일 명 : DcEventMngt.xfdl
  기    능 : 할인정보 세팅 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2015.04.16   박대영   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";
include "lib::LimsUtil.xjs";


/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_gridFlag=false;

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	// 업데이트여부를 체크할 DataSet, 여러개 있을 경우 ;로 구분
	v_ds_check = "ds_prmt;ds_prmtOutlet;ds_prmtRcpt;ds_prmtCard;ds_prmtMixs;ds_prmtCond";
	tab_prmt.tabindex = 0;
	 
 	cal_serchDateFr.fn_initMonthCal(this, gfn_subStr(fv_sToday,0,4) + "0101", "fn_calendarFromCallBack", null, null, "Y");
 	cal_serchDateTo.fn_initMonthCal(this, fv_sToday, "fn_calendarToCallBack", null, null, "Y");
	
	//기본정보 comboBox에 세팅한기
	
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_prmtClsf",      null, {groupCode:"SLE_0030", useYn:"Y",defVal:"firstrow"});	//프로모션분류
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_prmtDiv",       null, {groupCode:"SLE_0031", useYn:"Y",defVal:"firstrow"});	//프로모션구분
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_applyObj",      null, {groupCode:"SLE_0032", useYn:"Y",defVal:"firstrow"});	//적용대상
 	
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_sesnClass",     null, {groupCode:"SLE_0040", useYn:"Y",defVal:""},SCCombo.CHOOSE);	//시즌구분
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_wendClass",     null, {groupCode:"SLE_0041", useYn:"Y",defVal:"0"});					//주중주말
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_patronGrClass", null, {groupCode:"SLE_0051", useYn:"Y",defVal:"N"});					//고객연동구분
 	 	
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_dupYn",      	      null, {groupCode:"SLE_0003", useYn:"Y",defVal:"0"});	//중복여부     (예/아니요)
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_sesnmgmtYn", 	      null, {groupCode:"SLE_0003", useYn:"Y",defVal:"0"});	//시즌관리여부(예/아니요)
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_cpnyafterAdjustYn", null, {groupCode:"SLE_0003", useYn:"Y",defVal:"0"});	//사후정산여부(예/아니요)
 	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_prmt.div_prmt.cbo_creditcardGrYn",    null, {groupCode:"SLE_0003", useYn:"Y",defVal:"0"});	//신용카드연동(예/아니요)
 	
 	//날자 dataset은 수동으로 해야 함...(this,defaultData,callback,DataSet,Field,필수)
 	tab_prmt.tpg_prmt.div_prmt.cal_startDd.fn_initMonthCal(this, fv_sToday, "fn_calendarFromCallBack", ds_prmt, "startDd", "Y");
 	tab_prmt.tpg_prmt.div_prmt.cal_endDd.fn_initMonthCal(this, "", "fn_calendarToCallBack", ds_prmt, "endDd", "Y");
 	
	
	//grid Combo Setting [조건설정]
	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_cond.grd_prmtCond.applyObjClass",      null, {groupCode:"SLE_0033", useYn:"Y"});	//대상구분
	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_cond.grd_prmtCond.applyObj",           null, {groupCode:"SLE_0034", useYn:"Y"});	//적용대상
	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_cond.grd_prmtCond.choiceCheck",        null, {groupCode:"SLE_0036", useYn:"Y"});	//선택체크
	
	//밀스설정
	SCCombo.bind(this, "ComCode", "tab_prmt.tpg_mixs.grd_prmtMix.condCheck",   null, {groupCode:"SLE_0035", useYn:"Y",defVal:"0"});	//조건체크( AND OR)
	
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
// function fn_close()
// {	
//  
// }


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
	 
    // Grid sort 표시 초기화(필수)v_ds_check = "ds_prmt;ds_prmtOutlet;ds_prmtRcpt;ds_prmtCard;ds_prmtMixs;ds_prmtCond";
    //gfn_clearSortMark(grd_prmt;grd_prmtOutlet;grd_prmtCond;grd_prmtMix;grd_prmtRcpt;grd_prmtCard);
    
    gfn_clearSortMark(grd_prmt);
    
    ds_prmtList.clearData();
	ds_prmt.clearData();
	ds_prmtOutlet.clearData();
	ds_prmtCond.clearData();
	ds_prmtMixs.clearData();
	ds_prmtRcpt.clearData();
	ds_prmtCard.clearData();

	 
	var strSvcID    = "searchList";
	var strURL      = "rc/sle/dcEventMgmt/searchList.xdo";
	var strInDs     = "";
	var strOutDs    = "ds_prmtList=ds_prmtList";
	var strArg      = "bcCd="         + "ALL"
					+ " startDd="     + gfn_nvl(cal_serchDateFr.fn_getValue(),"")
					+ " endDd="       + gfn_nvl(cal_serchDateTo.fn_getValue(),"")
					+ " prmtNm="      + gfn_nvl(edt_serchPrmtNm.value,"")
					+ " maskAuth="    + SCAuth.getMaskAuth(this);
			 
	var strCallback = "fn_callBack";
	var bAsync      = true;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_selectList()
{ 
	//상단 내역을 클릭하는 경우 하단 내역을 검색 한다.
	
 	
	//선택된 행을 수정할수 있게 처리 한다.
	ds_prmt.updatecontrol = false;
	var nRow = ds_prmtList.rowposition;
	ds_prmt.clearData();
	var nRowIdx = ds_prmt.addRow();	//행추가
	var bSucc;
	bSucc = ds_prmt.copyRow(nRowIdx, ds_prmtList, nRow);	//해당 선택된 행 복사
	bSucc = ds_prmt.setRowType(nRowIdx, Dataset.ROWTYPE_NORMAL);
	ds_prmt.updatecontrol = true;
	
	gfn_clearSortMark(tab_prmt.tpg_prmt.div_prmt.grd_prmtOutlet);
	gfn_clearSortMark(tab_prmt.tpg_cond.grd_prmtCond);
	gfn_clearSortMark(tab_prmt.tpg_mixs.grd_prmtMix);
	gfn_clearSortMark(tab_prmt.tpg_rcpt.grd_prmtRcpt);
	gfn_clearSortMark(tab_prmt.tpg_card.grd_prmtCard);

	ds_prmtOutlet.clearData();
	ds_prmtCond.clearData();
	ds_prmtMixs.clearData();
	ds_prmtRcpt.clearData();
	ds_prmtCard.clearData();

	var strSvcID    = "search";
	var strURL      = "rc/sle/dcEventMgmt/selectList.xdo";
	var strInDs     = "";
	var strOutDs    = "ds_prmtOutlet=ds_prmtOutlet ds_prmtCond=ds_prmtCond ds_prmtMixs=ds_prmtMixs ds_prmtRcpt=ds_prmtRcpt ds_prmtCard=ds_prmtCard";

	var strArg      = "prmtCd="    + gfn_nvl(ds_prmt.getColumn(ds_prmt.rowposition ,"prmtCd"),"")
					+ " maskAuth=" + SCAuth.getMaskAuth(this);
				 
	var strCallback = "fn_callBack";
	var bAsync      = true;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{	

// 	//변경 또는 입력중에 입력(추가) 버튼을 누른 경우 
// 	if (gfn_dsIsUpdated(ds_prmt) || gfn_dsIsUpdated(ds_prmtOutlet) || gfn_dsIsUpdated(ds_prmtCard) ||
// 		gfn_dsIsUpdated(ds_prmtCond) || gfn_dsIsUpdated(ds_prmtMixs) || gfn_dsIsUpdated(ds_prmtRcpt)
// 		)
//  	{
// 		var retValue = gfn_confirm("confirm.before.moveropos");	// 해당 row의 위치를 이동하면 변경된 데이터가 사라집니다.@계속 진행 하시겠습니까?
// 		if (retValue == false) return;
// 	}
 	//현재 입력중인내역이 신규 이면 다음것을 입력 할수는 없다 한번에 1개씩 입력 해야 한다.
 	var nRow = ds_prmt.rowposition;
 	if (ds_prmt.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
	{
		gfn_alert("msg.err.updateafter", "");	// 선택된 항목이 없습니다.
		return;
	} 
 	
 	
 	
	var nRow = ds_prmt.addRow();
	
	gfn_clearSortMark(tab_prmt.tpg_prmt.div_prmt.grd_prmtOutlet);
	gfn_clearSortMark(tab_prmt.tpg_cond.grd_prmtCond);
	gfn_clearSortMark(tab_prmt.tpg_mixs.grd_prmtMix);
	gfn_clearSortMark(tab_prmt.tpg_rcpt.grd_prmtRcpt);
	gfn_clearSortMark(tab_prmt.tpg_card.grd_prmtCard);

	ds_prmtOutlet.clearData();
	ds_prmtCond.clearData();
	ds_prmtMixs.clearData();
	ds_prmtRcpt.clearData();
	ds_prmtCard.clearData();


	//화면기본 설정
	
	tab_prmt.tpg_prmt.div_prmt.cbo_prmtClsf.index=0;
	tab_prmt.tpg_prmt.div_prmt.cbo_prmtDiv.index=0;
	tab_prmt.tpg_prmt.div_prmt.cbo_applyObj.index=0;
	tab_prmt.tpg_prmt.div_prmt.cbo_sesnClass.index=0;
	tab_prmt.tpg_prmt.div_prmt.cbo_wendClass.index=0;
	tab_prmt.tpg_prmt.div_prmt.cbo_patronGrClass.index=0;
	tab_prmt.tpg_prmt.div_prmt.cbo_dupYn.index=1;
	tab_prmt.tpg_prmt.div_prmt.cbo_sesnmgmtYn.index=1;
	tab_prmt.tpg_prmt.div_prmt.cbo_cpnyafterAdjustYn.index=1;
	tab_prmt.tpg_prmt.div_prmt.cbo_creditcardGrYn.index=1; 

	//dataSet 설정
	ds_prmt.setColumn(nRow,"useYn","1");
	ds_prmt.setColumn(nRow,"bcCd","ALL");
	ds_prmt.setColumn(nRow,"bcNm","ALL");
	ds_prmt.setColumn(nRow, "prmtClsfNm", tab_prmt.tpg_prmt.div_prmt.cbo_prmtClsf.text );
	ds_prmt.setColumn(nRow, "prmtDivNm",  tab_prmt.tpg_prmt.div_prmt.cbo_prmtDiv.text );
	ds_prmt.setColumn(nRow, "applyObjNm", tab_prmt.tpg_prmt.div_prmt.cbo_applyObj.text );
	ds_prmt.setColumn(nRow, "dupYnNm", tab_prmt.tpg_prmt.div_prmt.cbo_dupYn.text );
	ds_prmt.setColumn(nRow, "sesnmgmtYnNm", tab_prmt.tpg_prmt.div_prmt.cbo_sesnmgmtYn.text );
	ds_prmt.setColumn(nRow, "sesnClassNm", tab_prmt.tpg_prmt.div_prmt.cbo_sesnClass.text );
	ds_prmt.setColumn(nRow, "wendClassNm", tab_prmt.tpg_prmt.div_prmt.cbo_wendClass.text );
	ds_prmt.setColumn(nRow, "cpnyafterAdjustYnNm", tab_prmt.tpg_prmt.div_prmt.cbo_cpnyafterAdjustYn.text );
	ds_prmt.setColumn(nRow, "creditcardGrYnNm", tab_prmt.tpg_prmt.div_prmt.cbo_creditcardGrYn.text );
	ds_prmt.setColumn(nRow, "patronGrClassNm", tab_prmt.tpg_prmt.div_prmt.cbo_patronGrClass.text );
	ds_prmt.setColumn(nRow,"startDd", fv_sToday);
  	ds_prmt.setColumn(nRow,"endDd", fv_sToday);
  	ds_prmt.setColumn(nRow,"useYn","1");
   
  	tab_prmt.tpg_prmt.div_prmt.edt_prmtNm.setFocus();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{
	var nRow = ds_prmt.rowposition;
	
	if(ds_prmt.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		//기본정보
		if (ds_prmt.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_prmt.deleteRow(nRow);
		} else
		{
			ds_prmt.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		//업장정보
		for(var j = ds_prmtOutlet.getRowCount()-1 ; j == 0 ; j--)
		{
			if (ds_prmtOutlet.getRowType(j) == Dataset.ROWTYPE_INSERT)
			{
				ds_prmtOutlet.deleteRow(j);
			} else
			{
				ds_prmtOutlet.setColumn(j, "useYn", 0);
				bIsProcRow = true;
			}
		}
		//조건정보 
		for(var j = ds_prmtCond.getRowCount()-1 ; j == 0  ; j++)
		{
			if (ds_prmtCond.getRowType(j) == Dataset.ROWTYPE_INSERT)
			{
				ds_prmtCond.deleteRow(j);
			} else
			{
				ds_prmtCond.setColumn(j, "useYn", 0);
				bIsProcRow = true;
			}
		}

		//믹스정보
		for(var j = ds_prmtMixs.getRowCount()-1 ; j == 0 ; j++)
		{
			if (ds_prmtMixs.getRowType(j) == Dataset.ROWTYPE_INSERT)
			{
				ds_prmtMixs.deleteRow(j);
			} else
			{
				ds_prmtMixs.setColumn(j, "useYn", 0);
				bIsProcRow = true;
			}
		}
		//영수증
		for(var j = ds_prmtRcpt.getRowCount()-1 ; j == 0 ; j++)
		{
			if (ds_prmtRcpt.getRowType(j) == Dataset.ROWTYPE_INSERT)
			{
				ds_prmtRcpt.deleteRow(j);
			} else
			{
				ds_prmtRcpt.setColumn(j, "useYn", 0);
				bIsProcRow = true;
			}
		}
		//카드프리픽스
		for(var j = ds_prmtCard.getRowCount()-1  ; j == 0 ; j++)
		{
			if (ds_prmtCard.getRowType(j) == Dataset.ROWTYPE_INSERT)
			{
				ds_prmtCard.deleteRow(j);
			} else
			{
				ds_prmtCard.setColumn(j, "useYn", 0);
				bIsProcRow = true;
			}
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{ 
	
	if (!gfn_dsIsUpdated(ds_prmt) && !gfn_dsIsUpdated(ds_prmtOutlet) && !gfn_dsIsUpdated(ds_prmtCard) &&
		!gfn_dsIsUpdated(ds_prmtCond) && !gfn_dsIsUpdated(ds_prmtMixs) && !gfn_dsIsUpdated(ds_prmtRcpt)
		)
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	if (gfn_validCheck(ds_prmt, ds_prmtValid) == false)	return;	//기본자료는 꼭 입력되어야 함

	//자료가 있는 경우 체크
	if (ds_prmtOutlet.rowcount != -1)
	{
		if (gfn_validCheck(ds_prmtOutlet, ds_prmtOutletValid) == false)	return;	//지점체크
	}
	if (ds_prmtCond.rowcount != -1)
	{
		if (gfn_validCheck(ds_prmtCond, ds_prmtCondValid) == false)	return;	//조건
	}
	if (ds_prmtMixs.rowcount != -1)
	{
		if (gfn_validCheck(ds_prmtMixs, ds_prmtMixsValid) == false)	return;	//믹스
	}
	if (ds_prmtRcpt.rowcount != -1)
	{
		if (gfn_validCheck(ds_prmtRcpt, ds_prmtRcptValid) == false)	return;	//영수증
	}
	if (ds_prmtCard.rowcount != -1)
	{
		if (gfn_validCheck(ds_prmtCard, ds_prmtCardValid) == false)	return;	//카드
	}
	
	//if (fn_validCheck() == false) return;	//조건과 믹스의 중복자료 체크
 
    var strSvcID    = "save";
    var strURL      = "rc/sle/dcEventMgmt/saveData.xdo";
    var strInDs     = "ds_prmt=ds_prmt:U ds_prmtOutlet=ds_prmtOutlet:U ds_prmtCond=ds_prmtCond:U " 
                    + "ds_prmtMixs=ds_prmtMixs:U ds_prmtRcpt=ds_prmtRcpt:U ds_prmtCard=ds_prmtCard:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
     
     gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
	
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		// 코드분류 조회
        case "search" :
            
            break;
        case "searchList":
			 
			break;
        // 저장
        case "save" :
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			fn_search();
            break;    
    }
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 달력 선택 후 callback function
 *---------------------------------------------------------------------------------------------*/
function fn_calendarFromCallBack()
{

}
function fn_calendarToCallBack()
{

}
/*----------------------------------------------------------------------------------------------
 * 설명      : 달력 선택 후 callback function
 *---------------------------------------------------------------------------------------------*/
function fn_validCheck()
{

	//업장 등록은 등록 시점에 바로 체크 한다.
	
	//조건설정 같은 값이 조재 하면 안된다.
// 	for(var j = 0 ; j <= ds_prmtCond.getRowCount()-1 ; j++)
// 	{
// //		var nKey = gfn_nvl(ds_prmtCond.getColumn(j,"outletCd"),"") + gfn_nvl(ds_prmtCond.getColumn(j,"outletCd"),"") + 
// 		
// 		//대중소메뉴코드가 없는 경우는 체크 하지 않는다.
// 		
// 		var iFindRowIdx = ds_prmtCond.findRowExpr( "outletCd == '"   + gfn_nvl(ds_prmtCond.getColumn(j, "outletCd"),"")  + "'"
// 											 + " && menuClass == '"  + gfn_nvl(ds_prmtCond.getColumn(j, "menuClass"),"") + "'"
// 											 + " && menuClsfi == '"  + gfn_nvl(ds_prmtCond.getColumn(j, "menuClsfi"),"") + "'"
// 											 + " && menuSclass == '" + gfn_nvl(ds_prmtCond.getColumn(j, "menuSclass"),"") + "'"
// 					                         + " && menuCd == '"     + gfn_nvl(ds_prmtCond.getColumn(j, "menuCd"),"") + "'");
// 		//자기 자신을 제외하고 검색된 행이 존재할 시에는 중복 메시지를 표시한다.
// 		if (iFindRowIdx != j && iFindRowIdx != -1)
// 		{
// 			var sMsg = "[조건설정 TAB ]" + "\r"
// 			         + "업장: " + ds_prmtCond.getColumn(j,"outletCd") + "\r"
// 					 + "구분: " + ds_prmtCond.getColumn(j,"menuClass") + "\r"
// 					 + "분류: " + ds_prmtCond.getColumn(j,"menuClsfi") + "\r"
// 					 + "소분류 : " + ds_prmtCond.getColumn(j,"menuSclass") + "\r"
// 					 + "코드 : " + ds_prmtCond.getColumn(j,"menuCd")+ "\r";
// 					 
// 			gfn_alert("msg.err.duplicatedata", sMsg); //msg.err.duplicatedata   =  입력하신 $1 은(는) 이미 등록된 자료입니다.
// 			 
// 
// 			return false;	
// 		}
// 	}

	//믹스설정 같은 값이 조재 하면 안된다.
// 	for(var j = 0 ; j <= ds_prmtMixs.getRowCount()-1 ; j++)
// 	{
// //		var nKey = gfn_nvl(ds_prmtCond.getColumn(j,"outletCd"),"") + gfn_nvl(ds_prmtCond.getColumn(j,"outletCd"),"") + 
// 		var iFindRowIdx = ds_prmtMixs.findRowExpr( "outletCd == '"   + gfn_nvl(ds_prmtMixs.getColumn(j, "outletCd"),"")  + "'"
// 											 + " && menuClass == '"  + gfn_nvl(ds_prmtMixs.getColumn(j, "menuClass"),"") + "'"
// 											 + " && menuClsfi == '"  + gfn_nvl(ds_prmtMixs.getColumn(j, "menuClsfi"),"") + "'"
// 											 + " && menuSclass == '" + gfn_nvl(ds_prmtMixs.getColumn(j, "menuSclass"),"") + "'"
// 					                         + " && menuCd == '"     + gfn_nvl(ds_prmtMixs.getColumn(j, "menuCd"),"") + "'");
// 		//자기 자신을 제외하고 검색된 행이 존재할 시에는 중복 메시지를 표시한다.
// 		if (iFindRowIdx != j && iFindRowIdx != -1)
// 		{
// 			var sMsg = "[믹스설정 TAB ]" + "\r"
// 					 + "업장 : " + ds_prmtMixs.getColumn(j,"outletCd") + "\r"
// 					 + "구분 : " + ds_prmtMixs.getColumn(j,"menuClass") + " : " + ds_prmtMixs.getColumn(j,"menuClassNm") +  "\r"
// 					 + "분류 : " + ds_prmtMixs.getColumn(j,"menuClsfi") + " : " | ds_prmtMixs.getColumn(j,"menuClsfiNm") +"\r"
// 					 + "소분류 : " + ds_prmtMixs.getColumn(j,"menuSclass") + " : " + ds_prmtMixs.getColumn(j,"menuSclassNm") + "\r"
// 					 + "코드 : " + ds_prmtMixs.getColumn(j,"menuCd") + " : " + ds_prmtMixs.getColumn(j,"condNm")+ "\r";
// 					 
// 			gfn_alert("msg.err.duplicatedata", sMsg); //msg.err.duplicatedata   =  입력하신 $1 은(는) 이미 등록된 자료입니다.
// 			return false;	
// 		}
// 	}
// 	
	//영수증 설정 입력 시점에 같은 프로모션은 등록 불가능 하게 체크 한다.
	
	//카드 프리픽스는 체크 안함
	
	
	return true;
}
 
//프로모션 적용업장 추가
function tab_prmt_tpg_prmt_div_prmt_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmt.rowposition;
	if(ds_prmt.rowposition == -1) 
	{
		gfn_alert("msg.noinput", "기본정보");	// 입력할 수 없는 자료 입니다.
		return;
	}

//2015.06.16
// 	//코드가 입력 되지 않았을 경우
// 	if(gfn_nvl(ds_prmt.getColumn(nRow,"prmtCd"),"") == "") 
// 	{
// 		gfn_alert("msg.noinput", "프로모션코드");	// 입력할 수 없는 자료 입니다.
// 		return;
// 	}

	//혹 0000 전체가 있는 경우 추가 할수 없다.
	var iFindRowIdx = ds_prmtOutlet.findRow("outletCd", "0000");
	if ( iFindRowIdx != -1)
	{
		if (ds_prmtOutlet.getColumn(iFindRowIdx,"useYn") == 1 )
		{
			gfn_alert("rc.sle.no.input.data", "");
			return;
		}
	}
	//정상 추가 한다.
	var nRow = ds_prmtOutlet.addRow();
	ds_prmtOutlet.setColumn(nRow,"useYn","1");
	ds_prmtOutlet.setColumn(nRow,"prmtCd", ds_prmt.getColumn(ds_prmt.rowposition,"prmtCd"));
	//ds_prmtOutlet.setColumn(nRow,"bcCd", ds_prmt.getColumn(ds_prmt.rowposition,"bcCd"));
}

//프로모션적용업장 삭제 
function tab_prmt_tpg_prmt_div_prmt_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmtOutlet.rowposition;
	
	if(ds_prmtOutlet.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_prmtOutlet.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_prmtOutlet.deleteRow(nRow);
		} else
		{
			ds_prmtOutlet.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}

 //프로모션 업장을 선택한다.
function tab_prmt_tpg_prmt_div_prmt_grd_prmtOutlet_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 2)
	{
		var arrParam = new Array();
		arrParam[0] ="ALL";
		var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_SLE::OutletInfoPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_prmtOutlet.rowposition
				ds_prmtOutlet.setColumn(nRow , "outletCd", rtnVal[1]);
				ds_prmtOutlet.setColumn(nRow , "outletNm", rtnVal[2]);
			}
		}
	}
}

//프로묘션 업장 추가시 중복 업장 체크
function ds_prmtOutlet_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	
	//신규 추가행에 대해서만 처리한다.
	if (obj.getRowType(obj.rowposition) == Dataset.ROWTYPE_INSERT)
	{
		if (e.columnid == "outletNm")
		{
			 
 			var outletCd = obj.getColumn(e.row, "outletCd");
			if ((outletCd == "0000") && (obj.rowposition != 0))
			{
				gfn_alert("rc.sle.no.data", "");	// 입력할 수 없는 자료 입니다.
				obj.setColumn(e.row, "outletCd", "");
				obj.setColumn(e.row, e.columnid, "");
				return;	
			}
			
// 			var serCd = obj.getColumn(e.row, "outletCd"); 
// 			for(var i=0; i < obj.rowcount; i++)
// 			{
// 				var outletCd = obj.getColumn(i, "outletCd");
// 				var useYn    = obj.getColumn(i, "useYn");
// 				if (e.row != i)
// 				{
// 					if ( (outletCd == serCd) && (useYn ==1))
// 					{
// 						gfn_alert("msg.err.duplicatedata", serCd); //msg.err.duplicatedata   =  입력하신 $1 은(는) 이미 등록된 자료입니다.
// 						obj.setColumn(e.row, "outletCd", "");
// 						obj.setColumn(e.row, e.columnid, "");
// 						return;	
// 
// 					}
// 				}
// 			}
			
			
			//이미 등록된 그룹코드가 존재하는지를 확인한다.
			var iFindRowIdx = obj.findRow("outletCd", obj.getColumn(e.row, "outletCd"), 0, obj.rowcount);
			//자기 자신을 제외하고 검색된 행이 존재할 시에는 중복 메시지를 표시한다.
			if (iFindRowIdx != e.row && iFindRowIdx != -1)
			{
				var sMsg = obj.getColumn(e.row, "outletCd");
				gfn_alert("msg.err.duplicatedata", sMsg); //msg.err.duplicatedata   =  입력하신 $1 은(는) 이미 등록된 자료입니다.
				obj.setColumn(e.row, "outletCd", "");
				obj.setColumn(e.row, e.columnid, "");
				return;	
			}
		}
	}

}

//COMBO BOX 선택시 data set 처리
 
function tab_prmt_tpg_prmt_div_prmt_cbo_prmtClsf_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "prmtClsfNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_prmtDiv_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "prmtDivNm", obj.text );
}
 

function tab_prmt_tpg_prmt_div_prmt_cbo_applyObj_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "applyObjNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_dupYn_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "dupYnNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_sesnmgmtYn_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "sesnmgmtYnNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_sesnClass_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "sesnClassNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_wendClass_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "wendClassNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_cpnyafterAdjustYn_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "cpnyafterAdjustYnNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_creditcardGrYn_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "creditcardGrYnNm", obj.text );
}

function tab_prmt_tpg_prmt_div_prmt_cbo_patronGrClass_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_prmt.setColumn(ds_prmt.rowposition, "patronGrClassNm", obj.text );
}


//조건설정추가
function tab_prmt_tpg_cond_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmt.rowposition;
	if(ds_prmt.rowposition == -1) 
	{
		gfn_alert("msg.noinput", "기본정보");	// 입력할 수 없는 자료 입니다.
		return;
	}

//2015.06.16
// 	//코드가 입력 되지 않았을 경우
// 	if(gfn_nvl(ds_prmt.getColumn(nRow,"prmtCd"),"") == "") 
// 	{
// 		gfn_alert("msg.noinput", "프로모션코드");	// 입력할 수 없는 자료 입니다.
// 		return;
// 	}
		
	var nRow = ds_prmtCond.addRow();
	ds_prmtCond.setColumn(nRow,"prmtCd",ds_prmt.getColumn(ds_prmt.rowposition,"prmtCd"));
	ds_prmtCond.setColumn(nRow,"useYn","1");
}

//조건설정 삭제
function tab_prmt_tpg_cond_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmtCond.rowposition;
	
	if(ds_prmtCond.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_prmtCond.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_prmtCond.deleteRow(nRow);
		} else
		{
			ds_prmtCond.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}

//조건설정 그리드 영역
function tab_prmt_tpg_cond_grd_prmtCond_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 2)
	{
		var arrParam = new Array();
		arrParam[0] ="ALL";
		//arrParam[0] ="";
		var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_SLE::OutletInfoPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_prmtCond.rowposition
				ds_prmtCond.setColumn(nRow , "outletCd", rtnVal[1]);
				ds_prmtCond.setColumn(nRow , "outletNm", rtnVal[2]);
				ds_prmtCond.setColumn(nRow , "menuClass", "");
				ds_prmtCond.setColumn(nRow , "menuClassNm", "");
				//ds_prmtCond.setColumn(nRow , "applyObjNm", "");
				ds_prmtCond.setColumn(nRow , "menuClsfi","");
				ds_prmtCond.setColumn(nRow , "menuClsfiNm","");
				ds_prmtCond.setColumn(nRow , "menuSclass","");
				ds_prmtCond.setColumn(nRow , "menuSclassNm","");
				ds_prmtCond.setColumn(nRow , "menuCd","");

			}
		}
	}
	
	//대분류
	if (e.col == 3)
	{
		var nRow = ds_prmtCond.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtCond.getColumn(nRow,"outletCd"),"");
		arrParam[1] = gfn_nvl( "","");					// 대중소 분류 대분류 코드를 검색 해라.
		arrParam[2] = gfn_nvl( "00","");
		arrParam[3] = gfn_nvl( "00","");
		arrParam[4] = "CHOOSE";
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		  
		var rtnVal = gfn_dialog("MenuGrpPop"				// dialogId
						   , "X_SLE::MenuGrpPop.xfdl"		// Url
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		 
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_prmtCond.rowposition
				ds_prmtCond.setColumn(nRow , "menuClass", rtnVal[1]);
				ds_prmtCond.setColumn(nRow , "menuClassNm", rtnVal[2]);
				if (ds_prmtCond.getColumn(nRow , "applyObjNm") == "")
				{	
					ds_prmtCond.setColumn(nRow , "applyObjNm", rtnVal[2]);
				}
				//중,소,메뉴코드 clear
				ds_prmtCond.setColumn(nRow,"menuClsfi","");
				ds_prmtCond.setColumn(nRow,"menuClsfiNm","");
				ds_prmtCond.setColumn(nRow,"menuSclass","");
				ds_prmtCond.setColumn(nRow,"menuSclassNm","");
				ds_prmtCond.setColumn(nRow,"menuCd","");
			}
		}
	}
	//중분류
	if (e.col == 4)
	{
		var nRow = ds_prmtCond.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtCond.getColumn(nRow,"outletCd"),"");
		arrParam[1] = gfn_nvl(ds_prmtCond.getColumn(nRow,"menuClass"),"");					// 대중소 분류 대분류 코드를 검색 해라.
		arrParam[2] = gfn_nvl( "","");
		arrParam[3] = gfn_nvl( "00","");
		arrParam[4] = "CHOOSE";
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		if (gfn_nvl(arrParam[1],"") == "")
		{
			gfn_alert("msg.noselect","대분류");
			return;
		}
		 
		var rtnVal = gfn_dialog("MenuGrpPop"				// dialogId
						   , "X_SLE::MenuGrpPop.xfdl"		// Url
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{

				
				ds_prmtCond.setColumn(nRow , "menuClsfi", rtnVal[1]);
				ds_prmtCond.setColumn(nRow , "menuClsfiNm", rtnVal[2]);
				
				if (ds_prmtCond.getColumn(nRow , "applyObjNm") == "")
				{	
					ds_prmtCond.setColumn(nRow , "applyObjNm", rtnVal[2]);
				}
				
				
				//중,소,메뉴코드 clear
				ds_prmtCond.setColumn(nRow,"menuSclass","");
				ds_prmtCond.setColumn(nRow,"menuSclassNm","");
				ds_prmtCond.setColumn(nRow,"menuCd","");
			}
		}
	}
	//소분류
	if (e.col == 5)
	{
		 
		var nRow = ds_prmtCond.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtCond.getColumn(nRow,"outletCd"),"");
		arrParam[1] = gfn_nvl(ds_prmtCond.getColumn(nRow,"menuClass"),"");					 
		arrParam[2] = gfn_nvl(ds_prmtCond.getColumn(nRow,"menuClsfi"),"");
		arrParam[3] = gfn_nvl( "","");
		arrParam[4] = "CHOOSE";
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		if (gfn_nvl(arrParam[1],"") == "")
		{
			gfn_alert("msg.noselect","대분류");
			return;
		}
		if (gfn_nvl(arrParam[2],"") == "")
		{
			gfn_alert("msg.noselect","중분류");
			return;
		} 
		var rtnVal = gfn_dialog("MenuGrpPop"				// dialogId
						   , "X_SLE::MenuGrpPop.xfdl"		// Url
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				ds_prmtCond.setColumn(nRow , "menuSclass", rtnVal[1]);
				ds_prmtCond.setColumn(nRow , "menuSclassNm", rtnVal[2]);
				if (ds_prmtCond.getColumn(nRow , "applyObjNm") == "")
				{	
					ds_prmtCond.setColumn(nRow , "applyObjNm", rtnVal[2]);
				}
				
				//메뉴코드 clear
				ds_prmtCond.setColumn(nRow,"menuCd","");
			}
		}
	}
	
	//메뉴코드
	if (e.col == 6)
	{
		var nRow = ds_prmtCond.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtCond.getColumn(nRow,"outletCd"),"");					// 업장 코드를 전송 한다.
		arrParam[1] = gfn_nvl(ds_prmtCond.getColumn(nRow,"outletNm"),"");					// 업장 명를 전송 한다.
		
		arrParam[2] =gfn_nvl(ds_prmtCond.getColumn(nRow,"menuClass"),"");
		arrParam[3] =gfn_nvl(ds_prmtCond.getColumn(nRow,"menuClassNm"),"");
		
		arrParam[4] =gfn_nvl(ds_prmtCond.getColumn(nRow,"menuClsfi"),"");
		arrParam[5] =gfn_nvl(ds_prmtCond.getColumn(nRow,"menuClsfiNm"),"");
		
		arrParam[6] =gfn_nvl(ds_prmtCond.getColumn(nRow,"menuSclass"),"");
		arrParam[7] =gfn_nvl(ds_prmtCond.getColumn(nRow,"menuSclassNm"),"");
		
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		
		var rtnVal = gfn_dialog("MenuPop"				// dialogId
					   , "X_SLE::MenuPop.xfdl"			// Url
					   , {fv_Contents:arrParam}			// 배열 
					   , null, null, null, null, null, false, true, -1);

		if (rtnVal instanceof Object)
		{
			arr = rtnVal.datas;
			
			for(var i=0; i<rtnVal.dataRow; i++)
			{
				if (i==0)
				{
					var nRow = ds_prmtCond.rowposition;
				}
				else
				{ 
					var nRow = ds_prmtCond.addRow();
				}
				ds_prmtCond.setColumn(nRow,"prmtCd",ds_prmt.getColumn(ds_prmt.rowposition,"prmtCd"));
				ds_prmtCond.setColumn(nRow , "outletCd", gfn_trim(arr[i].outletCd));
				ds_prmtCond.setColumn(nRow , "outletNm", gfn_trim(arr[i].outletNm));
				ds_prmtCond.setColumn(nRow , "menuClass", gfn_trim(arr[i].menuClass));
				ds_prmtCond.setColumn(nRow , "menuClassNm",gfn_trim(arr[i].menuClassNm));
				ds_prmtCond.setColumn(nRow , "menuClsfi", gfn_trim(arr[i].menuClsfi));
				ds_prmtCond.setColumn(nRow , "menuClsfiNm", gfn_trim(arr[i].menuClsfiNm));
				ds_prmtCond.setColumn(nRow , "menuSclass", gfn_trim(arr[i].menuSclass));
				ds_prmtCond.setColumn(nRow , "menuSclassNm",gfn_trim(arr[i].menuSclassNm));
				ds_prmtCond.setColumn(nRow , "menuCd", gfn_trim(arr[i].menuCd));
				
				if (ds_prmtCond.getColumn(nRow , "applyObjNm") == "")
				{	
					ds_prmtCond.setColumn(nRow , "applyObjNm", gfn_trim(arr[i].menuNm));
				}
				
				ds_prmtCond.setColumn(nRow , "useYn","1");
			}
		}
	}
}
 
//믹스설정 추가
function tab_prmt_tpg_mixs_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmt.rowposition;
	if(ds_prmt.rowposition == -1) 
	{
		gfn_alert("msg.noinput", "기본정보");	// 입력할 수 없는 자료 입니다.
		return;
	}
	 
//2015.06.16	 
// 	//코드가 입력 되지 않았을 경우
// 	if(gfn_nvl(ds_prmt.getColumn(nRow,"prmtCd"),"") == "") 
// 	{
// 		gfn_alert("msg.noinput", "프로모션코드");	// 입력할 수 없는 자료 입니다.
// 		return;
// 	}

	//정상 추가 한다.
	var nRow = ds_prmtMixs.addRow();
	ds_prmtMixs.setColumn(nRow,"prmtCd",ds_prmt.getColumn(ds_prmt.rowposition,"prmtCd"));
	ds_prmtMixs.setColumn(nRow,"useYn","1");
}

function tab_prmt_tpg_mixs_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmtMixs.rowposition;
	
	if(ds_prmtMixs.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_prmtMixs.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_prmtMixs.deleteRow(nRow);
		} else
		{
			ds_prmtMixs.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}

//믹스설정 그리드 영역
function tab_prmt_tpg_mixs_grd_prmtMix_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 2)
	{
		var arrParam = new Array();
		//arrParam[0] ="ALL";
		arrParam[0] ="";
		var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_SLE::OutletInfoPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_prmtMixs.rowposition
				ds_prmtMixs.setColumn(nRow,"outletCd", rtnVal[1]);
				ds_prmtMixs.setColumn(nRow,"outletNm", rtnVal[2]);
				ds_prmtMixs.setColumn(nRow,"menuClass", "");
				ds_prmtMixs.setColumn(nRow,"menuClassNm", "");
				//ds_prmtMixs.setColumn(nRow,"condNm", "");
				ds_prmtMixs.setColumn(nRow,"menuClsfi","");
				ds_prmtMixs.setColumn(nRow,"menuClsfiNm","");
				ds_prmtMixs.setColumn(nRow,"menuSclass","");
				ds_prmtMixs.setColumn(nRow,"menuSclassNm","");
				ds_prmtMixs.setColumn(nRow,"menuCd","");
			}
		}
	}
	
	//대분류
	if (e.col == 3)
	{
		var nRow = ds_prmtMixs.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"outletCd"),"");
		arrParam[1] = gfn_nvl( "","");					// 대중소 분류 대분류 코드를 검색 해라.
		arrParam[2] = gfn_nvl( "00","");
		arrParam[3] = gfn_nvl( "00","");
		arrParam[4] = "CHOOSE";
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		  
		var rtnVal = gfn_dialog("MenuGrpPop"				// dialogId
						   , "X_SLE::MenuGrpPop.xfdl"		// Url
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_prmtMixs.rowposition
				ds_prmtMixs.setColumn(nRow , "menuClass", rtnVal[1]);
				ds_prmtMixs.setColumn(nRow , "menuClassNm", rtnVal[2]);
				if (ds_prmtMixs.getColumn(nRow , "condNm") == "")
				{
					ds_prmtMixs.setColumn(nRow , "condNm", rtnVal[2]);
				}
				//중,소,메뉴코드 clear
				ds_prmtMixs.setColumn(nRow,"menuClsfi","");
				ds_prmtMixs.setColumn(nRow,"menuClsfiNm","");
				ds_prmtMixs.setColumn(nRow,"menuSclass","");
				ds_prmtMixs.setColumn(nRow,"menuSclassNm","");
				ds_prmtMixs.setColumn(nRow,"menuCd","");
			}
		}
	}
	//중분류
	if (e.col == 4)
	{
		var nRow = ds_prmtMixs.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"outletCd"),"");
		arrParam[1] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuClass"),"");					// 대중소 분류 대분류 코드를 검색 해라.
		arrParam[2] = gfn_nvl( "","");
		arrParam[3] = gfn_nvl( "00","");
		arrParam[4] = "CHOOSE";
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		if (gfn_nvl(arrParam[1],"") == "")
		{
			gfn_alert("msg.noselect","대분류");
			return;
		}
		 
		var rtnVal = gfn_dialog("MenuGrpPop"				// dialogId
						   , "X_SLE::MenuGrpPop.xfdl"		// Url
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{

				
				ds_prmtMixs.setColumn(nRow , "menuClsfi", rtnVal[1]);
				ds_prmtMixs.setColumn(nRow , "menuClsfiNm", rtnVal[2]);
				if (ds_prmtMixs.getColumn(nRow , "condNm") == "")
				{
					ds_prmtMixs.setColumn(nRow , "condNm", rtnVal[2]);
				}
				
				//중,소,메뉴코드 clear
				ds_prmtMixs.setColumn(nRow,"menuSclass","");
				ds_prmtMixs.setColumn(nRow,"menuSclassNm","");
				ds_prmtMixs.setColumn(nRow,"menuCd","");
			}
		}
	}
	//소분류
	if (e.col == 5)
	{
		 
		var nRow = ds_prmtMixs.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"outletCd"),"");
		arrParam[1] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuClass"),"");					 
		arrParam[2] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuClsfi"),"");
		arrParam[3] = gfn_nvl( "","");
		arrParam[4] = "CHOOSE";
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		if (gfn_nvl(arrParam[1],"") == "")
		{
			gfn_alert("msg.noselect","대분류");
			return;
		}
		if (gfn_nvl(arrParam[2],"") == "")
		{
			gfn_alert("msg.noselect","중분류");
			return;
		} 
		var rtnVal = gfn_dialog("MenuGrpPop"				// dialogId
						   , "X_SLE::MenuGrpPop.xfdl"		// Url
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				ds_prmtMixs.setColumn(nRow , "menuSclass", rtnVal[1]);
				ds_prmtMixs.setColumn(nRow , "menuSclassNm", rtnVal[2]);
				if (ds_prmtMixs.getColumn(nRow , "condNm") == "")
				{
					ds_prmtMixs.setColumn(nRow , "condNm", rtnVal[2]);
				}
				//메뉴코드 clear
				ds_prmtMixs.setColumn(nRow,"menuCd","");
			}
		}
	}
	
	//메뉴코드
	if (e.col == 6)
	{
		var nRow = ds_prmtMixs.rowposition
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"outletCd"),"");					// 업장 코드를 전송 한다.
		arrParam[1] = gfn_nvl(ds_prmtMixs.getColumn(nRow,"outletNm"),"");					// 업장 명를 전송 한다.
		
		arrParam[2] =gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuClass"),"");
		arrParam[3] =gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuClassNm"),"");
		
		arrParam[4] =gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuClsfi"),"");
		arrParam[5] =gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuClsfiNm"),"");
		
		arrParam[6] =gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuSclass"),"");
		arrParam[7] =gfn_nvl(ds_prmtMixs.getColumn(nRow,"menuSclassNm"),"");
		
		if (gfn_nvl(arrParam[0],"") == "")
		{
			gfn_alert("msg.noselect","업장");
			return;
		}
		
		var rtnVal = gfn_dialog("MenuPop"				// dialogId
					   , "X_SLE::MenuPop.xfdl"			// Url
					   , {fv_Contents:arrParam}			// 배열 
					   , null, null, null, null, null, false, true, -1);

		if (rtnVal instanceof Object)
		{
			arr = rtnVal.datas;
			
			for(var i=0; i<rtnVal.dataRow; i++)
			{
				if (i==0)
				{
					var nRow = ds_prmtMixs.rowposition;
				}
				else
				{ 
					var nRow = ds_prmtMixs.addRow();
				}
				ds_prmtMixs.setColumn(nRow , "useYn","1");
				ds_prmtMixs.setColumn(nRow , "outletCd", gfn_trim(arr[i].outletCd));
				ds_prmtMixs.setColumn(nRow , "outletNm", gfn_trim(arr[i].outletNm));
				ds_prmtMixs.setColumn(nRow , "menuClass", gfn_trim(arr[i].menuClass));
				ds_prmtMixs.setColumn(nRow , "menuClassNm",gfn_trim(arr[i].menuClassNm));
				ds_prmtMixs.setColumn(nRow , "menuClsfi", gfn_trim(arr[i].menuClsfi));
				ds_prmtMixs.setColumn(nRow , "menuClsfiNm", gfn_trim(arr[i].menuClsfiNm));
				ds_prmtMixs.setColumn(nRow , "menuSclass", gfn_trim(arr[i].menuSclass));
				ds_prmtMixs.setColumn(nRow , "menuSclassNm",gfn_trim(arr[i].menuSclassNm));
				ds_prmtMixs.setColumn(nRow , "menuCd", gfn_trim(arr[i].menuCd));
				if (ds_prmtMixs.getColumn(nRow , "condNm") == "")
				{
					ds_prmtMixs.setColumn(nRow , "condNm", gfn_trim(arr[i].menuNm));
				}
				
			}
		}
	}
}

//영수증 설정 추가
function tab_prmt_tpg_rcpt_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmt.rowposition;
	if(ds_prmt.rowposition == -1) 
	{
		gfn_alert("msg.noinput", "기본정보");	// 입력할 수 없는 자료 입니다.
		return;
	}
//2015.06.16	
// 	//코드가 입력 되지 않았을 경우
// 	if(gfn_nvl(ds_prmt.getColumn(nRow,"prmtCd"),"") == "") 
// 	{
// 		gfn_alert("msg.noinput", "프로모션코드");	// 입력할 수 없는 자료 입니다.
// 		return;
// 	}
	//정상 추가 한다.
	var nRow = ds_prmtRcpt.addRow();
	ds_prmtRcpt.setColumn(nRow,"prmtCd", ds_prmt.getColumn(ds_prmt.rowposition,"prmtCd"));
	ds_prmtRcpt.setColumn(nRow,"useYn","1");
}

function tab_prmt_tpg_rcpt_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmtRcpt.rowposition;
	
	if(ds_prmtRcpt.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_prmtRcpt.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_prmtRcpt.deleteRow(nRow);
		} else
		{
			ds_prmtRcpt.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}


 //영수증 이전 프로모션 선택
function tab_prmt_tpg_rcpt_grd_prmtRcpt_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	//프로모션 검색
	if (e.col == 2)
	{
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_prmt.getColumn(ds_prmt.rowposition,"bcCd"),"");
		trace(arrParam[0]);
		var rtnVal = gfn_dialog("CodePop"				// dialogId
					   , "X_SLE::DcEventMgmtPop.xfdl"	// Url
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
		if (typeof rtnVal != "undefined" && rtnVal != null) 
		{
			if (rtnVal[0] == "OK")
			{
				var nRow = ds_prmtRcpt.rowposition
				ds_prmtRcpt.setColumn(nRow , "applPrmtCd", rtnVal[1]);
				ds_prmtRcpt.setColumn(nRow , "applPrmtCdNm", rtnVal[2]);
 			}
		}
	}
}

//영수증 중복 체크 코드값
function ds_prmtRcpt_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	//신규 추가행에 대해서만 처리한다.
 	if (obj.getRowType(obj.rowposition) == Dataset.ROWTYPE_INSERT)
 	{
 		if (e.columnid == "prmtCd")
 		{
  			//이미 등록된 그룹코드가 존재하는지를 확인한다.
 			var iFindRowIdx = obj.findRow("applPrmtCd", obj.getColumn(e.row, "applPrmtCd"), 0, obj.rowcount);
 			//자기 자신을 제외하고 검색된 행이 존재할 시에는 중복 메시지를 표시한다.
 			if (iFindRowIdx != e.row && iFindRowIdx != -1)
 			{
 				var sMsg = obj.getColumn(e.row, "applPrmtCd");
 				gfn_alert("msg.err.duplicatedata", sMsg); //msg.err.duplicatedata   =  입력하신 $1 은(는) 이미 등록된 자료입니다.
 				obj.setColumn(e.row, e.columnid, "");
 				return;	
 			}
 		}
 	}	

}
//영수증 메시지 입력창 별도 처리 
function tab_prmt_tpg_rcpt_grd_prmtRcpt_oncellclick(obj:Grid, e:GridClickEventInfo)
{
// 	if (e.cell == 3)
// 	{
// 		// LayerPopup으로 넘겨줄 변수
// 		var objArg = {
// 			sObjInputFuc : "fn_setGridParamValue",	// callback function
// 			sSccGroupCd : "",			// 공통코드 GroupCode
// 			outDs : null,							// DataSet을 넘길경우 사용
// 			sParam1 : ds_prmtRcpt.getColumn(ds_prmtRcpt.rowposition, "msg")
// 		};
// 		var sPlayerPopup = {
// 			 objGubun	   : 'grid'								// Object구분 : comp -> component, grid -> Grid
// 			,evtGrid       : e									// Grid에서 사용, comp인 경우 null세팅
// 			,objInput	   : obj
// 			,nPwidth       : 451								// 요건 고정
// 			,nPheight      : 172								// 요거도 고정
// 			,sPpopupDivNm  : '프로모션 영수증설정'					// LayerDiv명
// 			,sPopupUrl     : 'X_SLE::PrmtRcptPop.xfdl'
// 			,objArg        : objArg
// 			,objForm       : this
// 		};
// 		LimsUtil.gfn_objMultiComboLayerPopup(sPlayerPopup);
// 	}
}

function fn_setGridParamValue(retVal)
{
	var value = retVal.split('\r\n');
	ds_prmtRcpt.setColumn(ds_prmtRcpt.rowposition, "msg", retVal);
	//ds_prmtRcpt.setColumn(ds_prmtRcpt.rowposition, "column3", value[0]);
}

//카드프리픽스추가
function tab_prmt_tpg_card_btn_dataAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmt.rowposition;
	if(ds_prmt.rowposition == -1) 
	{
		gfn_alert("msg.noinput", "기본정보");	// 입력할 수 없는 자료 입니다.
		return;
	} 

//2015.06.16	
// 	//코드가 입력 되지 않았을 경우
// 	if(gfn_nvl(ds_prmt.getColumn(nRow,"prmtCd"),"") == "") 
// 	{
// 		gfn_alert("msg.noinput", "프로모션코드");	// 입력할 수 없는 자료 입니다.
// 		return;
// 	}
	//정상 추가 한다.
	var nRow = ds_prmtCard.addRow();
	ds_prmtCard.setColumn(nRow,"prmtCd",ds_prmt.getColumn(ds_prmt.rowposition,"prmtCd"));
	ds_prmtCard.setColumn(nRow,"useYn","1");
}

function tab_prmt_tpg_card_btn_dataDel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_prmtCard.rowposition;
	
	if(ds_prmtCard.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "delete row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		var bIsProcRow = false;
		if (ds_prmtCard.getRowType(nRow) == Dataset.ROWTYPE_INSERT)
		{
			ds_prmtCard.deleteRow(nRow);
		} else
		{
			ds_prmtCond.setColumn(nRow, "useYn", 0);
			bIsProcRow = true;
		}
		
		if (!bIsProcRow) return;
		
		sMsg = gfn_getMessage("msg.action.success", "");
		sMsg = sMsg += "\r\r" + gfn_getMessage("rc.sle.save.data", "");
		
		//실제 저장처리를 수행할 지를 알려준다.
		if (gfn_confirm(sMsg, "", "C"))
		{
			fn_save();
		}
		else
		{
			sMsg = gfn_getMessage("rc.sle.resave.data","");  //"변경된 자료는 나중에 저장하시기 바랍니다.";
			gfn_alert(sMsg, "", "A");
		}
	}
}  
 
function ds_prmtList_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	var nRow = ds_prmtList.rowposition;
	if(ds_prmtList.rowposition == -1) 
	{
		return;
	}
	if (fv_gridFlag==true)
	{
		fv_gridFlag=false;
		return;
	}
	
	//변경 또는 입력중에 그리드 ROW를 변경 하는 경우
	if (gfn_dsIsUpdated(ds_prmt) || gfn_dsIsUpdated(ds_prmtOutlet) || gfn_dsIsUpdated(ds_prmtCard) ||
		gfn_dsIsUpdated(ds_prmtCond) || gfn_dsIsUpdated(ds_prmtMixs) || gfn_dsIsUpdated(ds_prmtRcpt)
		)
 	{
		var retValue = gfn_confirm("confirm.before.moveropos");	// 해당 row의 위치를 이동하면 변경된 데이터가 사라집니다.@계속 진행 하시겠습니까?
		if (retValue == false) 
		{
			fv_gridFlag=true;
			ds_prmtList.rowposition = e.oldrow;
			return;
		}
	}

	fn_selectList();
}

 
 
/*----------------------------------------------------------------------------------------------
 * 설명      : checkBox 의 values true false 이기 때문에 여기서 변경해주자
 *---------------------------------------------------------------------------------------------*/
function ds_prmt_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if (e.columnid == "useYn")
	{
		var uesValue = obj.getColumn(obj.rowposition,"useYn");
		obj.setColumn(obj.rowposition,"useYn",(uesValue == "true" ? 1:0));
	}
	
}
]]></Script>
  </Form>
</FDL>
