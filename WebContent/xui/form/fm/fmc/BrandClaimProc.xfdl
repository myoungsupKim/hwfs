<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="BrandClaimProc" classname="sam_MasterDetail" position="absolute 0 0 1252 725" titletext="클레임처리(브랜드)" onload="form_onload">
    <Layouts>
      <Layout>
        <cmpPageObj id="cmpPageObj" titletext="cmpPageObj" taborder="1" scrollbars="none" class="sta_paging_Bg" position="absolute 0 439 1017 463" anchor="left top right"/>
        <Static id="Static06" text="w15" visible="false" position="absolute 1237 0 1252 710" class="Guide01_AreaRed" anchor="top right"/>
        <Static id="Static71" visible="false" position="absolute 0 710 1252 725" class="Guide01_AreaRed" text="h15" anchor="left bottom"/>
        <Div id="div_cmnBtn" taborder="21" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" anchor="left top right" position="absolute 0 0 1237 30" positiontype="position"/>
        <Static id="Static29" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 123" anchor="left top right"/>
        <Static id="Static43" text="W10" visible="false" position="absolute 516 30 779 40" style="background:#ff000055;align:center middle;"/>
        <Static id="Static44" text="W10" visible="false" position="absolute 14 112 1214 122" style="background:#ff000055;align:center middle;"/>
        <Static id="Static45" text="W15" visible="false" position="absolute -1 30 14 97" style="background:#ff000055;align:center middle;"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 910 40 920 61" anchor="left top"/>
        <Static id="Static51" text="W05." visible="false" position="absolute 0 61 538 66" style="background:#ff000055;align:center middle;"/>
        <Static id="Static04" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 76 66 86 87" anchor="left top"/>
        <ObjCalendar id="cal_fromDate" taborder="11" position="absolute 170 92 270 113" value="20150207" dateformat="yyyy-MM-dd ddd"/>
        <Static id="Static85" text="~" class="sta_WF_Dash" position="absolute 270 92 286 113"/>
        <ObjCalendar id="cal_toDate" taborder="12" position="absolute 281 92 381 113" value="20150207" dateformat="yyyy-MM-dd ddd"/>
        <Static id="Static18" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 485 66 515 87" anchor="left top"/>
        <Static id="Static17" text="W05." visible="false" position="absolute 541 61 1079 66" style="background:#ff000055;align:center middle;"/>
        <Static id="Static23" text="클레임목록" class="sta_WF_Title01" position="absolute 0 139 450 157" anchor="left top"/>
        <Static id="Static24" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 158 450 163" anchor="left top"/>
        <Static id="Static36" text="반품자재" class="sta_WFSA_label" position="absolute 281 66 341 87" anchor="left top"/>
        <Static id="Static37" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 339 66 349 87" anchor="left top"/>
        <Edit id="edt_returnItemSearch" taborder="6" onkeydown="edt_gubun_onkeydown" position="absolute 349 66 466 87" style=":disabled {cursor:arrowwait;}" userdata="" readonly="true"/>
        <Button id="btn_returnItemSearch" taborder="22" tabstop="false" class="btn_WF_popSearch" position="absolute 465 66 486 87" onclick="btn_returnItemSearch_onclick"/>
        <Static id="Static38" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 1003 40 1033 61" anchor="left top"/>
        <Grid id="grd_list" taborder="15" binddataset="ds_list" useinputpanel="false" cellsizingtype="col" position="absolute 0 162 1237 700" anchor="all" autoenter="select" onselectchanged="grd_list_onselectchanged" onmousemove="grd_list_OnMouseOver" onexpanddown="grd_list_onexpanddown" cellmovingtype="col" autosizingtype="none" autofittype="col" oncellclick="grd_list_oncellclick" onkeydown="grd_list_onkeydown">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="40" band="left"/>
                <Column size="100"/>
                <Column size="210"/>
                <Column size="80"/>
                <Column size="110"/>
                <Column size="144"/>
                <Column size="106"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="3" class="head_Excel" taborder="undefined"/>
                <Cell col="1" rowspan="3" displaytype="checkbox" edittype="checkbox" taborder="undefined"/>
                <Cell col="2" text="구분"/>
                <Cell col="3" text="업장"/>
                <Cell col="4" text="자재코드"/>
                <Cell col="5" text="바코드"/>
                <Cell col="6" text="자재명" taborder="undefined"/>
                <Cell col="7" text="발주량"/>
                <Cell col="8" text="입고수량"/>
                <Cell col="9" text="요청량"/>
                <Cell col="10" class="grd_WF_Essential" text="반품수량"/>
                <Cell col="11" text="납품업체"/>
                <Cell col="12" text="센터경유"/>
                <Cell row="1" col="2" text="센터" taborder="undefined"/>
                <Cell row="1" col="3" text="창고명" taborder="undefined"/>
                <Cell row="1" col="4" colspan="2" text="규격" taborder="undefined"/>
                <Cell row="1" col="6" text="단위"/>
                <Cell row="1" col="7" text="접수일자및시간" taborder="undefined"/>
                <Cell row="1" col="8" text="입고일자"/>
                <Cell row="1" col="9" text="입고요청일자"/>
                <Cell row="1" col="10" text="입고요청시간"/>
                <Cell row="1" col="11" text="회계수정일"/>
                <Cell row="1" col="12" text="진행사항"/>
                <Cell row="2" col="2" text="클레임유형"/>
                <Cell row="2" col="3" text="클레임상세내역"/>
                <Cell row="2" col="4" colspan="2" text="요청사항" taborder="undefined"/>
                <Cell row="2" col="6" class="grd_WF_Essential" text="처리결과"/>
                <Cell row="2" col="7" colspan="2" class="grd_WF_Essential" text="상세처리내역" taborder="undefined"/>
                <Cell row="2" col="9" class="grd_WF_Essential" text="처리부서"/>
                <Cell row="2" col="10" class="grd_WF_Essential" text="처리자"/>
                <Cell row="2" col="11" class="grd_WF_Essential" text="책임소재"/>
                <Cell row="2" col="12" text="간선정보"/>
              </Band>
              <Band id="body">
                <Cell rowspan="3" text="bind:NO" expr="currow+1" taborder="undefined"/>
                <Cell col="1" rowspan="3" displaytype="expr:fn_checkSet(currow)" edittype="expr:fn_checkSet(currow)" text="bind:chk" taborder="undefined"/>
                <Cell col="2" style="align:center;" text="bind:gubun"/>
                <Cell col="3" style="align:left;" text="bind:upjangnm"/>
                <Cell col="4" displaytype="text" style="align:center middle;" text="bind:itemCode"/>
                <Cell col="5" displaytype="text" style="align:center middle;" text="bind:winItemCd"/>
                <Cell col="6" displaytype="normal" edittype="none" style="align:left;" text="bind:itemName" taborder="undefined"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:poQty" mask="#,##0.00"/>
                <Cell col="8" displaytype="number" edittype="none" style="align:right;" text="bind:dlvyQty" mask="#,##0.00"/>
                <Cell col="9" displaytype="number" edittype="expr:iif(prcsStatus == '01','masknumber','none')" style="align:right;" text="bind:reqQty" mask="#,##0.00" editautoselect="true"/>
                <Cell col="10" displaytype="number" edittype="expr:iif(prcsStatus == '01','masknumber',iif(prcsStatus == '11','masknumber','none'))" style="align:right;" text="bind:procRtQty" mask="#,##0.00" editautoselect="true"/>
                <Cell col="11" displaytype="normal" style="align:left middle;" text="bind:custNm"/>
                <Cell col="12" displaytype="normal" style="align:center;" text="bind:centerFlag" expr="expr:centerFlag=='VC'?'직송':centerFlag" editautoselect="true"/>
                <Cell row="1" col="2" displaytype="text" style="align:center middle;" text="bind:centerName" taborder="undefined"/>
                <Cell row="1" col="3" displaytype="text" text="bind:subinvName" taborder="undefined"/>
                <Cell row="1" col="4" colspan="2" style="align:left middle;" text="bind:itemSize" taborder="undefined"/>
                <Cell row="1" col="6" text="bind:poUom"/>
                <Cell row="1" col="7" text="bind:updateDate" mask="####-##-## ##:##" taborder="undefined"/>
                <Cell row="1" col="8" text="bind:needDate" mask="####-##-##"/>
                <Cell row="1" col="9" text="bind:reqDate" mask="####-##-##"/>
                <Cell row="1" col="10" text="bind:reqTime" mask="##:##"/>
                <Cell row="1" col="11" displaytype="date" edittype="expr:buCd == '2004' ? 'date' : 'none'" text="bind:transDate"/>
                <Cell row="1" col="12" displaytype="combo" text="bind:prcsStatus" combodataset="ds_prcsStatus" combocodecol="code" combodatacol="codeName"/>
                <Cell row="2" col="2" displaytype="combo" edittype="expr:iif(prcsStatus == '01','combo','none')" text="bind:ctClaimKind" combodataset="ds_ctClaimKind" combocodecol="code" combodatacol="codeName"/>
                <Cell row="2" col="3" displaytype="normal" edittype="readonly" style="align:left middle;" text="bind:claimMemo" expandshow="show" expandsize="20"/>
                <Cell row="2" col="4" colspan="2" displaytype="combo" edittype="expr:iif(prcsStatus == '01','combo','none')" text="bind:reqKind" taborder="undefined" combodataset="ds_reqKind" combocodecol="code" combodatacol="codeName"/>
                <Cell row="2" col="6" displaytype="combo" edittype="expr:iif(prcsStatus == '01','combo',iif(prcsStatus == '11','combo','none'))" text="bind:ctKind" combodataset="ds_ctKind" combocodecol="code" combodatacol="codeName"/>
                <Cell row="2" col="7" colspan="2" edittype="expr:iif(prcsStatus &lt; 08, 'text','readonly')" style="align:left;" text="bind:ctMemo" taborder="undefined" expandshow="show" expandsize="20"/>
                <Cell row="2" col="9" edittype="expr:iif(prcsStatus == '01','expand',iif(prcsStatus == '11','expand','none'))" text="bind:partTmNm" expandshow="expr:iif(prcsStatus == '01','show',iif(prcsStatus == '11','show','hide'))" expandsize="20"/>
                <Cell row="2" col="10" edittype="expr:iif(prcsStatus == '01','expand',iif(prcsStatus == '11','expand','none'))" text="bind:nmKor" expandshow="expr:iif(prcsStatus == '01','show',iif(prcsStatus == '11','show','hide'))" expandsize="20"/>
                <Cell row="2" col="11" displaytype="combo" edittype="expr:iif(prcsStatus == '01','combo',iif(prcsStatus == '11','combo','none'))" text="bind:linkDept" combodataset="ds_linkDept" combocodecol="code" combodatacol="codeName"/>
                <Cell row="2" col="12" displaytype="text" style="align:center middle;background:EXPR(iif(map == '',&quot;URL('')&quot;,&quot;URL('theme://images/new/grd_WF_Camerabtn.png') center middle &quot;));background2:EXPR(iif(map == '',&quot;URL('')&quot;,&quot;URL('theme://images/new/grd_WF_Camerabtn.png') center middle &quot;));selectbackground:EXPR(iif(map == '',&quot;URL('')&quot;,&quot;URL('theme://images/new/grd_WF_Camerabtn.png') center middle &quot;));" text="bind:fromCntrNm"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static47" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 695 450 710" anchor="left top"/>
        <Edit id="edt_commit" taborder="23" imemode="hangul" ontextchanged="Edit00_ontextchanged" position="absolute 1333 106 1493 127" anchor="left top" visible="false"/>
        <Static id="Static58" text="반송번호" class="sta_WFSA_label" position="absolute 1265 105 1341 126" anchor="left top" visible="false"/>
        <Static id="Static61" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 1323 106 1333 127" anchor="left top"/>
        <Static id="Static00" text="w02" class="Guide01_AreaRed" visible="false" position="absolute 1199 106 1201 126" anchor="top right"/>
        <Button id="btn_process" taborder="16" text="처리" class="btn_WF_Function" position="absolute 982 133 1028 153" anchor="top right" onclick="btn_process_onclick"/>
        <Static id="Static01" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 1144 124 1237 134" anchor="left top"/>
        <Static id="Static03" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 1079 153 1172 163" anchor="left top"/>
        <Static id="Static05" text="h15" class="Guide01_AreaRed" visible="false" position="absolute -1 122 449 137" anchor="left top"/>
        <Static id="Static08" text="w02" class="Guide01_AreaRed" visible="false" position="absolute 1161 107 1163 127" anchor="top right"/>
        <Static id="Static09" text="센터" class="sta_WFSA_label" position="absolute 14 40 102 61" anchor="left top"/>
        <Static id="Static10" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 77 40 87 61" anchor="left top"/>
        <Static id="Static12" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 251 66 281 87" anchor="left top"/>
        <Static id="Static13" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 1207 40 1237 61" anchor="left top"/>
        <Static id="Static15" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 1323 80 1333 101" anchor="left top"/>
        <Button id="btn_cancel" taborder="17" text="처리취소" class="btn_WF_Function" position="absolute 1033 133 1100 153" anchor="top right" onclick="btn_cancel_onclick" visible="true" tooltiptext="요청상태로 변경합니다."/>
        <Combo id="cbo_center" taborder="24" value="전체" onitemchanged="cbo_center01_onitemchanged" class="cmb_WF_Essential" position="absolute 156 15 252 36" anchor="left top" type="filter" innerdataset="ds_center" displayrowcount="10" inputmode="upper" codecolumn="centerCode" datacolumn="centerName" visible="false"/>
        <Static id="Static19" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 755 66 785 87" anchor="left top"/>
        <Static id="Static20" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 860 66 870 87" anchor="left top"/>
        <Static id="Static22" text="진행상태" class="sta_WFSA_label" visible="true" position="absolute 515 66 591 87" anchor="left top"/>
        <Static id="Static25" text="처리자" class="sta_WFSA_label" position="absolute 785 41 839 62" anchor="left top"/>
        <Static id="Static21" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 648 66 658 87" anchor="left top"/>
        <PersonalSearchComponent id="comp_sawon" titletext="사원 검색용 Component" taborder="8" text="PersonalSearchComponent00" position="absolute 870 40 1030 61" bindDataset="ds_search" bindSabunColumn="schSabun" bindNmKorColumn="" qoMuCd="" qoTmCd="" qoTmNm="" eventAfterTrigger="" eventBeforeTrigger="" qoCcCd="" qoCcNm=""/>
        <Combo id="cbo_prcsStatus" taborder="7" position="absolute 583 66 755 87" anchor="left top" codecolumn="code" datacolumn="codeName" innerdataset="@ds_prcsStatus" index="-1"/>
        <Combo id="cbo_ctKind" taborder="25" innerdataset="@ds_ctKind" codecolumn="code" datacolumn="codeName" position="absolute 1333 80 1493 101" anchor="left top" visible="false" index="-1"/>
        <Static id="Static14" text="처리유형" class="sta_WFSA_label" position="absolute 1265 80 1325 101" anchor="left top" visible="false"/>
        <Static id="Static26" text="창고" class="sta_WFSA_label" position="absolute 516 44 559 61" anchor="left top"/>
        <Static id="Static27" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 573 40 583 61" anchor="left top"/>
        <Static id="Static30" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 251 40 281 61" anchor="left top"/>
        <Static id="Static32" text="업장" class="sta_WFSA_label" position="absolute 281 42 319 63" anchor="left top"/>
        <Static id="Static33" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 77 66 87 87" anchor="left top"/>
        <UpjangSearchComponent id="comp_upjang" titletext="업장 검색용 Component" taborder="3" text="UpjangSearchComponent00" position="absolute 348 40 486 63" bindDataset="ds_search" bindUpjangCodeColumn="schUpjang" bindUpjangNameColumn="schUpjangNm" eventBeforeTrigger="" eventAfterTrigger="fn_upjangSet" roleSetId="StUpjang"/>
        <Static id="Static35" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 339 40 349 61" anchor="left top"/>
        <Static id="Static39" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 486 40 516 61" anchor="left top"/>
        <Combo id="cbo_subinvCode" taborder="4" innerdataset="ds_subinv" codecolumn="subinvCode" datacolumn="subinvName" position="absolute 583 40 755 61" anchor="left top"/>
        <Static id="Static07" text="W05." visible="false" position="absolute 0 87 1250 92" style="background:#ff000055;align:center middle;"/>
        <Static id="Static31" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 161 91 171 112" anchor="left top"/>
        <Radio id="rdo_gubun" taborder="10" columncount="2" rowcount="0" index="0" codecolumn="codecolumn" datacolumn="datacolumn" value="1" position="absolute 16 89 154 117" onitemclick="rdo_gubun_onitemclick">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">1</Col>
                <Col id="datacolumn">입고일자</Col>
              </Row>
              <Row>
                <Col id="codecolumn">2</Col>
                <Col id="datacolumn">처리일자</Col>
              </Row>
            </Rows>
          </Dataset>
        </Radio>
        <Static id="Static50" text="요청사항" class="sta_WFSA_label" position="absolute 14 65 90 86" anchor="left top"/>
        <Static id="Static52" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 77 92 87 113" anchor="left top"/>
        <Combo id="cbo_prcsStatus00" taborder="5" innerdataset="@ds_reqKind" codecolumn="code" datacolumn="codeName" position="absolute 86 66 252 87" anchor="left top"/>
        <Static id="Static02" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 485 91 515 112" anchor="left top"/>
        <Static id="Static28" text="업체" class="sta_WFSA_label" position="absolute 515 92 591 113" anchor="left top"/>
        <Static id="Static53" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 648 92 658 113" anchor="left top"/>
        <Edit id="edt_cust" taborder="13" readonly="true" onkeydown="edt_cust_onkeydown" position="absolute 583 92 735 114" style=":disabled {cursor:arrowwait;}" userdata=""/>
        <Button id="btn_cust" taborder="14" tabstop="false" onclick="btn_cust_onclick" class="btn_WF_popSearch" position="absolute 734 92 755 114"/>
        <Button id="btn_reqCancel" taborder="18" text="요청취소" class="btn_WF_Function" position="absolute 1106 133 1166 153" anchor="top right" onclick="btn_reqCancel_onclick"/>
        <Static id="Static54" text="※ 일반자재의 경우 '반품','감량' 등록만 가능합니다.  ※ DC(재고상품)의 경우 '반품'만 가능합니다.&#13;&#10;※ 창고가 변경된 자재는 클레임 처리가 불가능합니다." position="absolute 425 124 990 161" anchor="top right" style="color:red;font:arial,9,bold;" class="sta_WFSA_labelBg"/>
        <Edit id="edt_centerCode" taborder="0" readonly="true" class="edt_WF_Essential" position="absolute 87 40 231 61"/>
        <Button id="btn_centerCode" taborder="37" tabstop="false" onclick="btn_centerCode_onclick" class="btn_WF_popSearch" position="absolute 230 40 251 61"/>
        <Button id="btn_photo" taborder="19" text="사진정보" class="btn_WF_Custom" position="absolute 1171 133 1236 154" anchor="top right" onclick="btn_photo_onclick" visible="false"/>
        <Static id="Static56" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 755 40 785 61" anchor="left top"/>
        <Static id="Static16" text="회계수정일" class="sta_WFSA_label" position="absolute 785 68 860 85" anchor="left top"/>
        <ObjCalendar id="cal_transDt" titletext="캘린더" taborder="9" position="absolute 870 66 1030 87"/>
        <Static id="Static34" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 860 40 870 61" anchor="left top"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged" cancolumnchange="ds_list_cancolumnchange" onrowposchanged="ds_list_onrowposchanged">
        <ColumnInfo>
          <Column id="chk" type="BIGDECIMAL" size="255"/>
          <Column id="upjang" type="BIGDECIMAL" size="255"/>
          <Column id="upjangnm" type="STRING" size="255"/>
          <Column id="itemCode" type="STRING" size="255"/>
          <Column id="itemName" type="STRING" size="255"/>
          <Column id="itemSize" type="STRING" size="255"/>
          <Column id="poUom" type="STRING" size="255"/>
          <Column id="poQty" type="BIGDECIMAL" size="255"/>
          <Column id="reqQty" type="BIGDECIMAL" size="255"/>
          <Column id="transMamount" type="STRING" size="255"/>
          <Column id="procRtQty" type="BIGDECIMAL" size="255"/>
          <Column id="ctClaimKind" type="STRING" size="255"/>
          <Column id="claimMemo" type="STRING" size="255"/>
          <Column id="reqKind" type="STRING" size="255"/>
          <Column id="ctKind" type="STRING" size="255"/>
          <Column id="ctMemo" type="STRING" size="255"/>
          <Column id="partTmCd" type="STRING" size="255"/>
          <Column id="partTmNm" type="STRING" size="255"/>
          <Column id="mngSabun" type="STRING" size="255"/>
          <Column id="nmKor" type="STRING" size="255"/>
          <Column id="prcsStatus" type="STRING" size="255"/>
          <Column id="transMprice" type="STRING" size="255"/>
          <Column id="transDate" type="STRING" size="256"/>
          <Column id="transQty" type="BIGDECIMAL" size="255"/>
          <Column id="procAmt" type="STRING" size="255"/>
          <Column id="poId" type="BIGDECIMAL" size="255"/>
          <Column id="subinvName" type="STRING" size="256"/>
          <Column id="ccNm" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="needDate" type="STRING" size="256"/>
          <Column id="claimDate" type="STRING" size="256"/>
          <Column id="needQaDate" type="STRING" size="256"/>
          <Column id="needQaTime" type="STRING" size="256"/>
          <Column id="linkDept" type="STRING" size="256"/>
          <Column id="buCd" type="STRING" size="256"/>
          <Column id="whClose" type="STRING" size="256"/>
          <Column id="centerCode" type="STRING" size="255"/>
          <Column id="centerName" type="STRING" size="255"/>
          <Column id="photo" type="BIGDECIMAL" size="255"/>
          <Column id="transId" type="STRING" size="256"/>
          <Column id="winItemCd" type="STRING" size="256"/>
          <Column id="hnrUpjangYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="schCenterCode" type="STRING" size="256"/>
          <Column id="schFromDate" type="STRING" size="256"/>
          <Column id="schToDate" type="STRING" size="256"/>
          <Column id="schCtKind" type="STRING" size="256"/>
          <Column id="schReturnDate" type="STRING" size="256"/>
          <Column id="schReturnItem" type="STRING" size="256"/>
          <Column id="schReturnNum" type="STRING" size="256"/>
          <Column id="schSabun" type="STRING" size="256"/>
          <Column id="schSubinv" type="STRING" size="256"/>
          <Column id="schPrcsStatus" type="STRING" size="256"/>
          <Column id="schUpjang" type="STRING" size="256"/>
          <Column id="schUpjangNm" type="STRING" size="256"/>
          <Column id="schMuCd" type="STRING" size="256"/>
          <Column id="schGubun" type="STRING" size="256"/>
          <Column id="schCust" type="STRING" size="256"/>
          <Column id="schReqKind" type="STRING" size="256"/>
          <Column id="schCode" type="STRING" size="256"/>
          <Column id="schTmCd" type="STRING" size="256"/>
          <Column id="schTransDt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_center" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="centerCode" type="STRING" size="256"/>
          <Column id="centerName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="schCenterCode" type="STRING" size="256"/>
          <Column id="schFromDate" type="STRING" size="256"/>
          <Column id="schToDate" type="STRING" size="256"/>
          <Column id="schCtKind" type="STRING" size="256"/>
          <Column id="schReturnDate" type="STRING" size="256"/>
          <Column id="schReturnItem" type="STRING" size="256"/>
          <Column id="schReturnNum" type="STRING" size="256"/>
          <Column id="schSabun" type="STRING" size="256"/>
          <Column id="schSubinv" type="STRING" size="256"/>
          <Column id="schPrcsStatus" type="STRING" size="256"/>
          <Column id="schMuCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="schCenterCode">title:센터,required:true</Col>
            <Col id="schFromDate">title:시작일,required:true,comparemin:schToDate:종료일</Col>
            <Col id="schToDate">title:종료일,required:true,comparemax:schFromDate:시작일</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_ctKind" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="255"/>
          <Column id="code" type="STRING" size="255"/>
          <Column id="codeName" type="STRING" size="255"/>
          <Column id="sortSeq" type="STRING" size="255"/>
          <Column id="systemYn" type="STRING" size="255"/>
          <Column id="set1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_prcsStatus" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="255"/>
          <Column id="code" type="STRING" size="255"/>
          <Column id="codeName" type="STRING" size="255"/>
          <Column id="sortSeq" type="STRING" size="255"/>
          <Column id="systemYn" type="STRING" size="255"/>
          <Column id="set1" type="STRING" size="256"/>
          <Column id="set5" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_save" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged">
        <ColumnInfo>
          <Column id="chk" type="BIGDECIMAL" size="255"/>
          <Column id="upjang" type="BIGDECIMAL" size="255"/>
          <Column id="upjangnm" type="STRING" size="255"/>
          <Column id="itemCode" type="STRING" size="255"/>
          <Column id="itemName" type="STRING" size="255"/>
          <Column id="itemSize" type="STRING" size="255"/>
          <Column id="poUom" type="STRING" size="255"/>
          <Column id="transMprice" type="STRING" size="255"/>
          <Column id="transQty" type="BIGDECIMAL" size="255"/>
          <Column id="transMamount" type="STRING" size="255"/>
          <Column id="procRdQty" type="BIGDECIMAL" size="255"/>
          <Column id="procRtQty" type="BIGDECIMAL" size="255"/>
          <Column id="procAmt" type="STRING" size="255"/>
          <Column id="ctKind" type="STRING" size="255"/>
          <Column id="claimRemark" type="STRING" size="255"/>
          <Column id="prcsStatus" type="STRING" size="255"/>
          <Column id="winItemCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">Y</Col>
            <Col id="insYn">N</Col>
            <Col id="delYn">N</Col>
            <Col id="savYn">Y</Col>
            <Col id="prtYn">N</Col>
            <Col id="exlYn">N</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_ctClaimKind" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="255"/>
          <Column id="code" type="STRING" size="255"/>
          <Column id="codeName" type="STRING" size="255"/>
          <Column id="sortSeq" type="STRING" size="255"/>
          <Column id="systemYn" type="STRING" size="255"/>
          <Column id="set1" type="STRING" size="256"/>
          <Column id="attr04" type="STRING" size="256"/>
          <Column id="attr05" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reqKind" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="256"/>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
          <Column id="set1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged" cancolumnchange="ds_list_cancolumnchange">
        <ColumnInfo>
          <Column id="chk" type="BIGDECIMAL" size="255"/>
          <Column id="upjang" type="BIGDECIMAL" size="255"/>
          <Column id="upjangnm" type="STRING" size="255"/>
          <Column id="itemCode" type="STRING" size="255"/>
          <Column id="itemName" type="STRING" size="255"/>
          <Column id="itemSize" type="STRING" size="255"/>
          <Column id="poUom" type="STRING" size="255"/>
          <Column id="poQty" type="BIGDECIMAL" size="255"/>
          <Column id="reqQty" type="BIGDECIMAL" size="255"/>
          <Column id="transMamount" type="STRING" size="255"/>
          <Column id="procRtQty" type="BIGDECIMAL" size="255"/>
          <Column id="ctClaimKind" type="STRING" size="255"/>
          <Column id="claimMemo" type="STRING" size="255"/>
          <Column id="reqKind" type="STRING" size="255"/>
          <Column id="ctKind" type="STRING" size="255"/>
          <Column id="ctMemo" type="STRING" size="255"/>
          <Column id="partTmCd" type="STRING" size="255"/>
          <Column id="partTmNm" type="STRING" size="255"/>
          <Column id="mngSabun" type="STRING" size="255"/>
          <Column id="nmKor" type="STRING" size="255"/>
          <Column id="prcsStatus" type="STRING" size="255"/>
          <Column id="transMprice" type="STRING" size="255"/>
          <Column id="transQty" type="BIGDECIMAL" size="255"/>
          <Column id="procAmt" type="STRING" size="255"/>
          <Column id="poId" type="BIGDECIMAL" size="255"/>
          <Column id="subinvName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="ctKind">title:처리내역,required:true</Col>
            <Col id="ctMemo">title:상세처리내역,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_subinv" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="subinvCode" type="STRING" size="256"/>
          <Column id="subinvName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_saleDate" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="saleDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_linkDept" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="255"/>
          <Column id="code" type="STRING" size="255"/>
          <Column id="codeName" type="STRING" size="255"/>
          <Column id="sortSeq" type="STRING" size="255"/>
          <Column id="systemYn" type="STRING" size="255"/>
          <Column id="set1" type="STRING" size="256"/>
          <Column id="set5" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_common" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="256"/>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item10" compid="edt_returnItemSearch" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item11" compid="edt_returnItemSearch" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item1" compid="cbo_center" propid="value" datasetid="ds_search" columnid="schCenterCode"/>
      <BindItem id="item2" compid="edt_commit" propid="value" datasetid="ds_search" columnid="schReturnNum"/>
      <BindItem id="item0" compid="cbo_prcsStatus" propid="value" datasetid="ds_search" columnid="schPrcsStatus"/>
      <BindItem id="item3" compid="cbo_subinvCode" propid="value" datasetid="ds_search" columnid="schSubinv"/>
      <BindItem id="item4" compid="rdo_gubun" propid="value" datasetid="ds_search" columnid="schGubun"/>
      <BindItem id="item5" compid="cbo_prcsStatus00" propid="value" datasetid="ds_search" columnid="schReqKind"/>
      <BindItem id="item6" compid="edt_cust" propid="userdata" datasetid="ds_search" columnid="schCust"/>
      <BindItem id="item7" compid="edt_cust" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : 클레임처리(브랜드)
  파 일 명 : BrandClaimProc.xfdl
  기    능 : 클레임처리(브랜드) 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2021.08.17   DEV02   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";
include "U_lib::lib_conversionCom.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_eventChange = false;
var fv_eventMove = false;
var fv_colId = '';
var fv_msg;

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 초기값 셋팅
	fn_init();
	
	cbo_prcsStatus.setSelect(1,0);
	
	if(gfn_subStr(gfn_today(),6,8) == '01')
	{
		alert("금일은 당월의 1일 입니다. 전달 클레임 처리에 유의하시기바랍니다.");
	}
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{	
	var nRow = ds_search.addRow();
	//cal_fromDate.fn_initMonthCal(this, "20200101", "", ds_search, "schFromDate", 'Y');
	cal_fromDate.fn_initMonthCal(this, gfn_today(), "", ds_search, "schFromDate", 'Y');
	cal_toDate.fn_initMonthCal(this, gfn_today(), "", ds_search, "schToDate", 'Y');
	cal_transDt.fn_initMonthCal(this, "", "", ds_search, "schTransDt", 'N');
	//cal_request.fn_initMonthCal(this, "", "", ds_search, "schReturnDate", 'N')
	
	//공통코드 호출
	//[PJT]주문채널통합 간혹 조회조건이 설정 안되는 경우가 있어 동기로 변경함.(fn_searchCenter callback에서 처리)
	SCCombo.bind(this, "ComCode", "grd_list.prcsStatus", ds_prcsStatus, {groupCode:"C00"}, SCCombo.ALL, false);   //처리현황 
	SCCombo.bind(this, "ComCode", "grd_list.ctKind", ds_ctKind, {groupCode:"C03"},SCCombo.CHOOSE);   //센터처리유형
	SCCombo.bind(this, "ComCode", "grd_list.ctClaimKind", ds_ctClaimKind, {groupCode:"C05", useYn:"Y", set5:"브랜드"}); //센터클레임유형[PJT]주문채널통합
	SCCombo.bind(this, "ComCode", "grd_list.reqKind", ds_reqKind, {groupCode:"C02"}, SCCombo.CHOOSE); 
	SCCombo.bind(this, "ComCode", "grd_list.linkDept", ds_linkDept, {groupCode:"C06", useYn:"Y"});     // 책임부서
			
	ds_prcsStatus.filter("set1=='Y'||code==''");
	ds_ctKind.filter("code <> 'C0309'"); // 브랜드업장 클레임의 경우 '리조트감량' 코드 미노출

	rdo_gubun.index = 0;
	
	
	
	
	
	// 팀 초기화
	//comp_tm.applyAuthLevel(comp_mu);
	
	// 본사
	//comp_mainUpjang.applyAuthLevel(comp_tm);
	//comp_mainUpjang.setMainUpjang(true);
	
	// 사업장(식재사업 제외)	
	//comp_upjang1.applyAuthLevel(comp_tm);
	
	// 사업장(식재사업)
	//comp_upjang.applyAuthLevel(comp_tm);
	//comp_upjang.applyMainUpjang(comp_mainUpjang);
	
	//comp_tm.setTmCode("");
	//comp_tm.setTmName("");
	//comp_mainUpjang.setUpjangCode("");
	//comp_mainUpjang.setUpjangName("");
	
	
	
	comp_upjang.setRoleSetId("BrandUpjang");	// 브랜드 유통사업장 roleSetId
	comp_upjang.setUpjangCode("");
	comp_upjang.setUpjangName("");
	
	
	comp_sawon.setCcCode(g_Cc_Cd);
	comp_sawon.setCcName(g_Cc_Nm);
	

// 	comp_sawon.setSabun(g_EmpNo);
// 	comp_sawon.setNmKor(g_Name);
//	cal_requestDate.fn_initMonthCal(this, "", "", ds_search, "schRequstDate", '')
	
	// calendar 초기화(해당Form, 값지정, 값변경시 실행할 callBack함수, dataset과 bind)
	//cal_from.fn_initMonthCal(this, gfn_today(), "fn_calendarCallBack", ds_search, "DATE_FROM");	
	
		// 팀 초기화
	
	// 소영 주석
	//edt_muCode.userdata = application.g_Mu_Cd;
	//edt_muCode.value = application.g_Mu_Nm
	
	fn_searchCenter();
}

// /*----------------------------------------------------------------------------------------------
//  * 설명      : 월력 값 변경시 호출되는 callBack 함수
//  *---------------------------------------------------------------------------------------------*/
// function fn_monthCallBack()
// {
// 
// }
// 
// /*----------------------------------------------------------------------------------------------
//  * 설명      : calendar 값 변경시 호출되는 callBack 함수
//  *---------------------------------------------------------------------------------------------*/
// function fn_calendarCallBack()
// {
// 
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_close()
{
	// 변경사항 체크(입력 프로그램일때 변경되는 Dataset 전체 기술)
	if (gfn_dsIsUpdated(ds_list) == true) 
	{
		// 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
        if (!gfn_confirm("confirm.before.movepage")) return false;
    }
    
    // 조회프로그램에도 Return true; 기술해 주세요!
	return true;
}


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
	ds_search.setColumn(0,'schReturnItem',edt_returnItemSearch.userdata);
	
	
	//trace(ds_search.saveXML());
	
	// 변경사항 체크
	if (gfn_dsIsUpdated(ds_list) == true) 
	{
		var retValue = gfn_confirm("confirm.before.search");	// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
		if (retValue == false) return;
	}

	// 조회시 Validation Check
	if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;

    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_list);
    
    var strSvcID    = "search";
    var strURL      = "fm/fmc/claimProc/selectBrandList.xdo";//[PJT]주문채널통합
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_list=ds_list";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{	

	/*var nRow = ds_list.addRow();	
	
	ds_list.setColumn(nRow, "GUBUN", 'AD');
	ds_list.setColumn(nRow, "INPUT_USER", gfn_getUserId());
	
	// Grid 입력 cell 지정
	grd_list.setFocus();
	grd_list.setCellPos(1);
	*/
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
 function fn_delete()
 {
// 	var nRow = ds_list.rowposition;
// 	
// 	if(ds_list.rowposition == -1) 
// 	{
// 		gfn_alert("msg.err.grid.noselect", "삭제할 row");	// 선택된 항목이 없습니다.
// 		return;
// 	}
// 
// 	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
// 	if (rtVal == true) 
// 	{	
// 		ds_list.deleteRow(nRow);
// 	}
 }

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save(str)
{
	/*시스템 통제 시간 체크 - 특정일자에 사용을 할 수 없게 한다.*/
	mfn_GetSystemWorkCheck("PO");
	if (ds_common.getColumn(0, 0) == "Y")
	{
		g_Message("EE", "시스템 변경 작업중이라 현 화면을 사용할 수 없습니다. \n사용불가시간(" + ds_common.getColumn(0, 1) + " ~ " + ds_common.getColumn(0, 2) + ") ");
		return false; 
	}
	
	// 변경사항 체크
	if (gfn_dsIsUpdated(ds_list) == false) 
	{
		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
		return;
	}
	
	// 저장시 Validation Check	
	//if (gfn_validCheck(grd_list, ds_listValid) == false)	return;
	for(var i=0; i<ds_list.getRowCount(); i++)
	{
		if(ds_list.getColumn(i, "chk") == 1 && str != 'cancel'){	
			//if ( ds_list.getColumn(i, "ctClaimKind") != "C0519" || ds_list.getColumn(i, "ctClaimKind") != "C0595" ) {	// 업체주의요청건 제외
			if ( ds_list.getColumn(i, "ctClaimKind") != "C05039" || ds_list.getColumn(i, "ctClaimKind") != "C0595" ) {	// 업체주의요청건 제외
				if(!ds_list.getColumn(i,'procRtQty'))
				{
					gfn_message("A", "반품수량을 입력하셔야 합니다.");
					grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'procRtQty'));
					grd_list.showEditor(true);
					grd_list.setFocus();
					return true;
				}
			
				if(Number(ds_list.getColumn(i,'procRtQty')) > Number(ds_list.getColumn(i,'poQty')))
				{
					gfn_message("A", "반품수량은 발주량보다 많을 수 없습니다.");
					grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'reqQty'));
					grd_list.showEditor(true);
					grd_list.setFocus();
					return true;
				}
					
				if(!ds_list.getColumn(i,'ctKind'))
				{
					gfn_message("A", "처리내역을 입력하셔야 합니다.");
					grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'ctKind'));
					grd_list.showEditor(true);
					grd_list.setFocus();
					return true;
				}
				
				if(!ds_list.getColumn(i,'ctMemo'))
				{
					gfn_message("A", "상세처리내역을 입력하셔야 합니다.");
					grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'ctMemo'));
					grd_list.showEditor(true);
					grd_list.setFocus();
					return true;
				}

				if(!ds_list.getColumn(i,'partTmNm'))
				{
					gfn_message("A", "처리부서을 입력하셔야 합니다.");
					grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'partTmNm'));
					grd_list.showEditor(true);
					grd_list.setFocus();
					return true;
				}			
				
				if(!ds_list.getColumn(i,'nmKor'))
				{
					gfn_message("A", "처리담당자을 입력하셔야 합니다.");
					grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'nmKor'));
					grd_list.showEditor(true);
					grd_list.setFocus();
					return true;
				}

				if(!ds_list.getColumn(i,'linkDept'))
				{
					gfn_message("A", "책임소재을 입력하셔야 합니다.");
					grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'linkDept'));
					grd_list.showEditor(true);
					grd_list.setFocus();
					return true;
				}
			}
		}
		
		if ( ds_list.getColumn(i, "ctClaimKind") == "C05039" || ds_list.getColumn(i, "ctClaimKind") == "C0595" ) {	
			if ( (ds_list.getColumn(i, "reqKind") == "C0201") || (ds_list.getColumn(i, "reqKind") == "C0202") ) {
				gfn_alert("반품/감량시 complaints는 선택할 수 없습니다.");
				grd_list.setCellPos(grd_list.getBindCellIndex("Body", 'reqKind'));
				grd_list.showEditor(true);
				grd_list.setFocus();
				return true;
			}
		}	
	}
	
	ds_save.clearData();
		
	ds_list.filter("chk==1");
	ds_save.copyData(ds_list, true);
	ds_list.filter("");
	
	if(ds_save.getRowCount() == 0)
	{
		gfn_message("A", "체크된 항목이 없습니다.");
		return;
	}
	
	// 취소, 처리 예외 체크
	if(str == 'cancel')
	{
		for(var i=0; i<ds_save.rowcount; i++)
		{
			if(ds_save.getColumn(i,'prcsStatus') == '09')
			{
				gfn_message("A", "처리완료된 클레임건은 취소 할 수 없습니다.");
				return;
			}
			else if(ds_save.getColumn(i,'prcsStatus') == '08')
			{
				gfn_message("A", "이미 취소된 클레임건 입니다.");
				return;
			}
			else if(ds_save.getColumn(i,'prcsStatus') == '10')
			{
				gfn_message("A", "이미 취소된 클레임건 입니다.");
				return;
			}
		}
	}
	else
	{
		for(var i=0; i<ds_save.rowcount; i++)
		{
			if(ds_save.getColumn(i,'prcsStatus') == '09')
			{
				gfn_message("A", "이미 처리완료된 클레임건 입니다.");
				return;
			}
			else if(ds_save.getColumn(i,'prcsStatus') == '08')
			{
				gfn_message("A", "취소된 클레임건은 처리 할 수 없습니다.");
				return;
			}
			else if(ds_save.getColumn(i,'prcsStatus') == '10')
			{
				gfn_message("A", "이미 취소된 클레임건 입니다.");
				return;
			}
		}
	}
	
	if(!fn_ctKindCheck()) return;
	
	// 취소, 처리 prcsStatus값 변경 및 ds_save 업데이트 타입으로 변경
	ds_list.filter("chk==1");
	ds_save.updatecontrol = false
	if(str == 'cancel')	// 취소
	{
		for(var i=0; i<ds_save.rowcount; i++)
		{
			ds_save.setRowType(i,'u');
			ds_save.setColumn(i,'prcsStatus','10');
			//ds_list.setColumn(i,'prcsStatus','08');
		}
		
	}
	else if(str == 'process')		// 처리
	{
		for(var i=0; i<ds_save.rowcount; i++)
		{
			ds_save.setRowType(i,'u');
			ds_save.setColumn(i,'prcsStatus','09');
			//ds_list.setColumn(i,'prcsStatus','09');
		}
	}
	else		// 처리중
	{
		for(var i=0; i<ds_save.rowcount; i++)
		{
			ds_save.setRowType(i,'u');
			ds_save.setColumn(i,'prcsStatus','11');
			//ds_list.setColumn(i,'prcsStatus','09');
		}
	}
	ds_list.filter("");
	
    var strSvcID    = "save";
    var strURL      = "fm/fmc/claimProc/saveList.xdo";
    var strInDs     = "ds_list=ds_save:U ds_list=ds_list";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
	
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		//fn_search();
		return;
	}
	
    switch(strSvcID)
    {
        case "search" :    		// 코드분류 조회
            //trace(ds_list.saveXML());
            //if(ds_list.getRowCount() > 0)ds_list.addColumn("reqKindNm","STRING");
            //ds_list.addColumn("transDate","STRING");
            break;
            		
        case "save" :			// 저장
			if(fv_msg == undefined)
				gfn_alert("msg.save.success");	// 저장 되었습니다.
			else 
				gfn_alert("저장 되었습니다.\n\n"+fv_msg);

			fn_search();
            break;    
        
        case "searchCenter" :			// 저장
			cbo_center.index = 0;
			//cbo_prcsStatus.index = 1;
			/*	기본 업장 셋팅 제거.	*/
			ds_search.setColumn(0,"schUpjang","");
			ds_search.setColumn(0,"schUpjangNm","");
            fn_center_init();
			cbo_prcsStatus.index = 1;
            break;    
		// 업장에 대한 창고리스트 조회
        case "searchSubinv" :
            if (ds_subinv.getRowCount() == 0) {
				//서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_subinv, fv_objColInfo);
            }
            break;
    
		// 매출마감일자 GET
        case "searchDate" :
            //trace(ds_saleDate.saveXML());
            if (ds_saleDate.getRowCount() == 0) {
				//서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_saleDate, fv_objColInfo);
            }
            break;

        case "cancel" :
			gfn_alert("msg.action.success");
			fn_search();
            break;    
            
            
    }
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 센터정보 조회
 *---------------------------------------------------------------------------------------------*/
function fn_searchCenter()
{
    var strSvcID    = "searchCenter";
    var strURL      = "fm/fms/upriceContractUpjangSet/selectCenter.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_center=ds_center";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 센터 COMBO 초기화 
 *---------------------------------------------------------------------------------------------*/
function fn_center_init()
{
	var defVal = "";
	var defValNm = "";
	var iCnt = 0;
	// 전체 SET
	for (var i = 0 ; i < ds_center.getRowCount() ; i++)
	{
		// Dataset이 선택된 것만 적용
		if (ds_center.getColumn(i, "centerCode")!='*') {
			iCnt++;
			if (iCnt==1) defVal = ds_center.getColumn(i, "centerCode");
			else defVal = defVal + "," + ds_center.getColumn(i, "centerCode");
			if (iCnt==1) defValNm = ds_center.getColumn(i, "centerName");
			else defValNm = defValNm + "," + ds_center.getColumn(i, "centerName");
		}
	}
	// 센터코드 다중 COMP SET
	edt_centerCode.value = defValNm;
	edt_centerCode.userdata = defVal;
	ds_search.setColumn(0, "schCode", defVal);	
}

/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 업장선택 팝업 호출 이후 창고 COMBO LIST SET
 *---------------------------------------------------------------------------------------------*/
// function fn_upjangSet()
// {
// 	comp_tm.setTmCode("");
// 	comp_tm.setTmName("");
// 	comp_mainUpjang.setUpjangCode("");
// 	comp_mainUpjang.setUpjangName("");
// 	cbo_subinvCode.value = "";
// 	cbo_subinvCode.userdata = "";
// 	
// 	// 창고 DataSet 초기화
// 	ds_subinv.clearData();
// 	
// 	// 선택한 업장에 창고정보 SET
// 	var nRow= ds_search.rowposition;
// 	var schUpjang = ds_search.getColumn(nRow, "schUpjang");
// 
// 	if(schUpjang!="") {
// 		fn_searchSubinv();
// 		fn_saleDateGet();
// 	}
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 업장선택 팝업 호출 이후 최종마감일자를 GET
 *              보정등록 시 마감일자를 CHECK 하기 위한 용도
 *---------------------------------------------------------------------------------------------*/
function fn_saleDateGet()
{
   	//서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장 
	fv_objColInfo = gfn_getDatasetInfo (ds_saleDate);
    
    var strSvcID    = "searchDate";
    var strURL      = "fm/fmf/saleModifyWork/selectDate.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_saleDate=ds_saleDate";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 업장에 대한 창고리스트 가져오기
 *---------------------------------------------------------------------------------------------*/
function fn_searchSubinv()
{
   	//서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장 
	fv_objColInfo = gfn_getDatasetInfo (ds_subinv);
    
    var strSvcID    = "searchSubinv";
    var strURL      = "fm/fms/spContFact/selectSubinv.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_subinv=ds_subinv";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : form에서 Key Down시 단축키들 지정(공통에서 자동생성, 화면에 스크립트 작성시 화면 스크립트만 실행됨)
 *---------------------------------------------------------------------------------------------*/
// function form_onkeydown(obj:Form, e:KeyEventInfo)
// {
// 	gfn_formKeyDown(obj, e);
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : Grid Header Click시 정렬(공통에서 자동생성, 화면에 스크립트 작성시 화면 스크립트만 실행됨)
 *---------------------------------------------------------------------------------------------*/
// function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
// {
// 	gfn_gridSort(obj, e);
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 부서코드 변경시 업장 선택
 *---------------------------------------------------------------------------------------------*/
// function fn_mu()
// {
// 	if(comp_mu.getMuCode() == '2004')	// 식재사업부 일경우
// 	{
// 		comp_upjang.visible  = false;	// ST_UPJANG
// 		comp_upjang1.visible = true;	// FMS_UPJANG
// 	}
// 	else
// 	{
// 		comp_upjang.visible  = true;	// ST_UPJANG
// 		comp_upjang1.visible = false;	// FMS_UPJANG
// 	}
// 	
// 	fn_upjangSet();
// 	comp_upjang.setUpjangCode("");
// 	comp_upjang.setUpjangName("");
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 반품자재 팝업 버튼 Click시
 *---------------------------------------------------------------------------------------------*/
function btn_returnItemSearch_onclick(obj:Button,  e:ClickEventInfo)
{

	var dataSet = new Dataset();
	dataSet.addRow();
	dataSet.addColumn("designTitle", "STRING", "100");
	dataSet.setColumn(0,"designTitle","반품자재 조회")
	dataSet.addColumn("designItemCode", "STRING", "100");
	dataSet.setColumn(0,"designItemCode","자재코드")
	dataSet.addColumn("designItemName", "STRING", "100");
	dataSet.setColumn(0,"designItemName","자재명")
	
	var searchStrURL = "fm/fmc/claimProc/returnItemSearch.xdo"

	var strArg = "schFromDate="+wrapQuote(ds_search.getColumn(0,'schFromDate'))
			   + " schToDate="+wrapQuote(ds_search.getColumn(0,'schToDate'))
			   + " schCode="+wrapQuote(ds_search.getColumn(0,'schCode'))
			   + " schCenterCode="+wrapQuote(cbo_center.value)
			   + " ctKind="+wrapQuote(cbo_ctKind.value);
			   ;
	/*		   
	var strArg = "schFromDate="+ds_search.getColumn(0,'schFromDate')
			   + " schToDate="+ds_search.getColumn(0,'schToDate')
			   + " ctKind="+ds_search.getColumn(0,'ctKind');
			   */
	//[[팝업창을 호출한다.
	var strId       = "ReturnItemSearchPop";
	var strURL      = "X_FMC::SearchPop.xfdl";
	var objArgument = {
		P_DATASET : dataSet,
		fa_strURL : searchStrURL,
		fa_strArg : strArg
	};
	var nWidth      = 513;
	var nHeight     = 495;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";

	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
	if (arrRtn instanceof Object)
	{
 		edt_returnItemSearch.userdata = arrRtn.code;
 		edt_returnItemSearch.value = arrRtn.name;
		
	}
	//팝업창을 호출한다.
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 코드 key Down시
 *---------------------------------------------------------------------------------------------*/
function edt_gubun_onkeydown(obj:Edit, e:KeyEventInfo)
{
	//trace("edt_gubun_onkeydown : e.altKey : " + e.altKey + " / e.ctrlKey : " + e.ctrlKey + " / e.keycode : " + e.keycode);
	// function fs_fn_edt_OnKeyDown(obj, nChar, strTabObj) 함수와 동일

	gfn_edtKeyDown(obj, e);
	
	// Enter 키 시 추가 기능
	if(e.keycode == 12) 
	{
		// 조회
		//fn_search();
		//return true;		// gfn_formKeyDown 실행 안함
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 툴팁
 *---------------------------------------------------------------------------------------------*/
function grd_list_OnMouseOver(obj:Grid, e:GridMouseEventInfo)
{
	var strMsg = ""
	if(e.cell == 24)//[PJT]주문채널통합
	{
		strMsg = ds_list.getColumn(e.row,"claimMemo");
	}
	else if(e.cell == 27)//[PJT]주문채널통합
	{
		strMsg = ds_list.getColumn(e.row,"ctMemo");
	}
	else if(e.cell == 28)  //처리부서//[PJT]주문채널통합
	{
		strMsg = "F3키를 누르면 로그인 사용자로 자동 입력됩니다.";
	}
	else if(e.cell == 29) //처리담당자//[PJT]주문채널통합
	{
		strMsg = "F3키를 누르면 로그인 사용자로 자동 입력됩니다.";
	}
		
	if(e.row == -1)	 strMsg = ""
	grd_list.tooltiptext = strMsg;
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 그리드 검색버튼 클릭
 *---------------------------------------------------------------------------------------------*/
function grd_list_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	//trace("cell : " + e.cell);
	
	if(e.cell == 24)//[PJT]주문채널통합
	{
		fn_showText(ds_list, 'claimMemo', true);
	}
	else if(e.cell == 27)//[PJT]주문채널통합
	{
		fn_showText(ds_list, 'ctMemo', false);
	}
	else if(e.cell == 28)	// 처리부서//[PJT]주문채널통합
	{
		//[[팝업창을 호출한다.
		var strId       = "TmSearch";
		var strURL      = "cmn::TmSearchPop.xfdl";
		var objArgument = {
			P_BU_CD : "",
			P_MU_CD : g_Mu_Cd,
			P_TM_CD : "",
			P_USE_YN: "",
			P_ALL_MU : false
		};
		var nWidth      = 513;
		var nHeight     = 495;
		var strStyle    = "";
		var nLeft       = -1;
		var nTop        = -1;
		var isModeless  = false;
		var bShowTitle  = true;
		var strAlign    = "-1";

		// 리턴값을 배열로 받을 경우	
		var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
		
		if (arrRtn instanceof Object)
		{
			ds_list.setColumn(e.row, 'partTmCd', arrRtn.tmCd);
			ds_list.setColumn(e.row, 'partTmNm', arrRtn.tmNm);
		}
	}
	else if(e.cell == 29)	// 담당자//[PJT]주문채널통합
	{
		//[[팝업창을 호출한다.
		var strId       = "PersonalSearch";
		var strURL      = "cmn::PersonalSearchPop.xfdl";
		if(ds_list.getColumn(e.row, 'partTmCd').length != 0)
		{
			var objArgument = {
				P_MU_CD : "",
				P_TM_CD : ds_list.getColumn(e.row, 'partTmCd'),
				P_TM_NM : ds_list.getColumn(e.row, 'partTmNm'),
				P_CC_CD : "",
				P_CC_NM : "",
				P_ALL_MU : "FALSE"
			};
		}else{
			var objArgument = {
				P_MU_CD : g_Mu_Cd,
				P_TM_CD : g_Tm_Cd,
				P_TM_NM : g_Tm_Nm,
				P_CC_CD : g_Cc_Cd,
				P_CC_NM : g_Cc_Nm,
				P_ALL_MU : "FALSE"
			};
		}
		var nWidth      = 726;
		var nHeight     = 495;
		var strStyle    = "";
		var nLeft       = -1;
		var nTop        = -1;
		var isModeless  = false;
		var bShowTitle  = true;
		var strAlign    = "-1";

		// 리턴값을 배열로 받을 경우	
		var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
		
		if (arrRtn instanceof Object)
		{
			ds_list.setColumn(e.row, 'mngSabun', arrRtn.sabun);
			ds_list.setColumn(e.row, 'nmKor', arrRtn.nmKor);
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 텍스트 내용
 *---------------------------------------------------------------------------------------------*/
function fn_showText(ds, colId, readOnly)
{
	var strId       = colId;
	var strURL      = "X_FMC::TextArea.xfdl";
	var objArgument = {
		 P_TST_CONTENT : ds.getColumn(ds.rowposition, colId)
		,P_READ_ONLY : readOnly
	};
	var nWidth      = 790;
	var nHeight     = 440;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	
	var text = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
	if (text != undefined) ds.setColumn(ds.rowposition, colId, text);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : CHK BOX (요청, 처리중만 활성화)
 *---------------------------------------------------------------------------------------------*/
function fn_checkSet(nRow)
{
	var edit_type = "none";
	
	if (ds_list.getColumn(nRow, "prcsStatus")=="01" || ds_list.getColumn(nRow, "prcsStatus")=="11") edit_type = "checkbox"; //요청 , 처리중 일때 활성화
	
	if(ds_list.getColumn(nRow,"reqKind") == "C0206" && ds_list.getColumn(nRow,"ctKind") != "C0301" && ds_list.getColumn(nRow,"ctKind") != "C0303") edit_type = "checkbox";//업체주의요청
	
	if(ds_list.getColumn(nRow,"ctKind") == "C0302") edit_type = "checkbox";//기타입고
	
	if(ds_list.getColumn(nRow,"ctKind") == "C0304") edit_type = "checkbox";//업체교환
	
	if(ds_list.getColumn(nRow,"ctKind") == "C0305") edit_type = "checkbox";//업체직송
	
	if(ds_list.getColumn(nRow,"ctKind") == "C0306") edit_type = "checkbox";//익일입고
	
	if(ds_list.getColumn(nRow,"ctKind") == "C0307") edit_type = "checkbox";//현지구매
	
	if(ds_list.getColumn(nRow,"ctKind") == "C0308") edit_type = "checkbox";//기타
	
	if(ds_list.getColumn(nRow, "prcsStatus")=="09" && ds_list.getColumn(nRow,"ticketYn") == "Y") edit_type = "none";//식권일경우 일단 체크 불가.
	
	return edit_type;
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 감량 반품 체크
 *---------------------------------------------------------------------------------------------*/
function ds_list_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	
	if(e.columnid == 'chk') return;

	if(e.oldvalue != e.newvalue)obj.setColumn(e.row , "chk" , 1);
	
	var v_cond, nRow; 
	
	if(e.columnid == 'ctClaimKind') //클레임유형
	{	
		ds_list.setColumn(e.row,"linkDept",""); // 변동시 초기화
	
		nRow = ds_ctClaimKind.findRow("code", ds_list.getColumn(e.row,"ctClaimKind"))
		
		var arr;
		if(ds_list.getColumn(e.row,"centerFlag")=="DC") {
			arr = gfn_trim(ds_ctClaimKind.getColumn(nRow,"attr05")).split(",");
		}else {
			arr = gfn_trim(ds_ctClaimKind.getColumn(nRow,"attr04")).split(",");	
		}
		
		v_cond = "gfn_length(gfn_trim(set5))==0";
		
		for(var j = 0 ; j < arr.length; j++){
			v_cond = v_cond + " || gfn_trim(set5)=='" + arr[j] +"'";
		}
		ds_linkDept.filter(v_cond);		
	}

	if(e.columnid == 'reqQty') // 요청량 12
	{
		if(obj.getColumn(e.row, 'reqQty') > obj.getColumn(e.row, 'dlvyQty')){
			fv_colId = 'reqQty';
			gfn_message("A", '입고량을 초과하여 요청은 불가합니다!');
			//fv_eventChange = true;
			obj.setColumn(e.row,e.columnid,e.oldvalue);
			//fv_eventChange = false;
			//fv_eventMove = e.row;
			fn_setFocus(e.row, fv_colId);
			return;
		}
		if(e.newvalue > 0){
			var filter = "poId =='" +obj.getColumn(e.row,"poId")+ "' && poNum == '" + obj.getColumn(e.row,"poNum")+"'";
			obj.filter(filter);
			var reqQty = ds_list.getSum("reqQty");
			obj.filter("");
			if(ds_list.getColumn(e.row,"dlvyQty") < reqQty){
				gfn_message("A", "입고량보다 요청수량이 많습니다.");
				obj.setColumn(e.row, "reqQty", e.oldvalue);
				return;
			}
		}
		ds_list.setColumn(e.row,"procRtQty",0);
	}
	if(e.columnid == 'procRtQty') // 반품 12
	{
		if(obj.getColumn(e.row, 'procRtQty') > obj.getColumn(e.row, 'reqQty')){
			fv_colId = 'reqQty';
			gfn_message("A", '요청량을 초과하여 반송은 불가합니다!');
			//fv_eventChange = true;
			obj.setColumn(e.row,e.columnid,e.oldvalue);
			//fv_eventChange = false;
			//fv_eventMove = e.row;
			fn_setFocus(e.row, fv_colId);
			return;
		}
		if(e.newvalue > 0){
			var filter = "poId =='" +obj.getColumn(e.row,"poId")+ "' && poNum == '" + obj.getColumn(e.row,"poNum")+"'";
			obj.filter(filter);
			var reqQty = ds_list.getSum("procRtQty");
			obj.filter("");
			if(ds_list.getColumn(e.row,"poQty") < reqQty){
				gfn_message("A", "발주량보다 반품수량이 많습니다.");
				obj.setColumn(e.row, "procRtQty", e.oldvalue);
				return;
			}
		}
	}
	
	if(e.columnid == "procRtQty"){
		var poAmt = Number(ds_list.getColumn(e.row, "unitPrice") * e.newvalue);
		obj.setColumn(e.row,"poAmt", poAmt);
	}
	
	if(e.columnid == "transDate"){
		if(gfn_subStr(obj.getColumn(e.row,"needDate"),0,6) == gfn_subStr(e.newvalue,0,6) && obj.getColumn(e.row,"whClose") == "N"){
			gfn_alert("해당월은 구매 마감 되어 변경 할 수 없습니다.");
			obj.setColumn(e.row , e.columnid, e.oldvalue);
			return;
		}
	}
	
	if(e.columnid == "reqTime") {
		if(!gfn_isTime(e.newvalue + "00")) {
			gfn_message("A", "시간 형식에서 벗어났습니다.");
			obj.setColumn(e.row, "reqTime", obj.getOrgColumn(e.row, "reqTime"));
		}
	}
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 그리드 포커스 지정
 *---------------------------------------------------------------------------------------------*/
function fn_setFocus(nRow, colId)
{
	grd_list.setCellPos(grd_list.getBindCellIndex("Body", colId));
	ds_list.rowposition = nRow;
	grd_list.showEditor(true);
	grd_list.setFocus();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 값 변경시 포커스 지정 여부
 *---------------------------------------------------------------------------------------------*/
function grd_list_onselectchanged(obj:Grid, e:GridSelectEventInfo)
{	
	if(fv_eventMove!= false)
	{
		fn_setFocus(fv_eventMove, fv_colId);
		fv_eventMove = false;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 취소 버튼
 *---------------------------------------------------------------------------------------------*/
 function btn_cancel_onclick(obj:Button,  e:ClickEventInfo)
{
	/*시스템 통제 시간 체크 - 특정일자에 사용을 할 수 없게 한다.*/
	mfn_GetSystemWorkCheck("PO");
	if (ds_common.getColumn(0, 0) == "Y")
	{
		g_Message("EE", "시스템 변경 작업중이라 현 화면을 사용할 수 없습니다. \n사용불가시간(" + ds_common.getColumn(0, 1) + " ~ " + ds_common.getColumn(0, 2) + ") ");
		return false; 
	}
	
	if(ds_list.findRow("chk",1) == -1){
		gfn_alert("처리취소 할 클레임을 선택해 주세요.");
		return;
	}
	for(var i=0; i<ds_list.rowcount; i++)
	{
		if(ds_list.getColumn(i,"chk") == "1"){		
			if(ds_list.getColumn(i,'prcsStatus') != '09' && ds_list.getColumn(i,'prcsStatus') != '11')
			{
				ds_list.rowposition = i;
				gfn_message("A", "처리완료 또는 처리중인 클레임만 취소가 가능합니다.");
				return;
			}
			if(ds_list.getColumn(i,'prcsStatus') == '09'){//처리완료 건
				if(ds_list.getColumn(i,'ticketYn') == 'Y')
				{
					ds_list.rowposition = i;
					gfn_message("A", "식권은 처리취소가 불가능 합니다.");
					return;
				}
				/*
				if(ds_list.getColumn(i,'legcyReqNo') == 'EAI')
				{
					ds_list.rowposition = i;
					gfn_message("A", "일반자재는 처리취소가 불가능 합니다.");
					return;
				}
				*/
				if(ds_list.getColumn(i,"ctKind") ==  "C0301"||
				   ds_list.getColumn(i,"ctKind") ==  "C0303"){
					ds_list.rowposition = i;
					gfn_message("A", "처리결과가 감량 또는 반품일 경우 처리취소가 불가능합니다.");
					return;
				}			
			}
		}
	}
	
	if (!gfn_confirm("해당 자료의 클레임 처리취소를 하시겠습니까?\n\n요청 상태로 변경 됩니다.")) return;
	
	    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_list);

    var strSvcID    = "cancel";
    var strURL      = "fm/fmc/claimProc/cancelList.xdo";
    var strInDs     = "ds_list=ds_list:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 처리 버튼
 *---------------------------------------------------------------------------------------------*/
function btn_process_onclick(obj:Button,  e:ClickEventInfo)
{
	/*시스템 통제 시간 체크 - 특정일자에 사용을 할 수 없게 한다.*/
	mfn_GetSystemWorkCheck("PO");
	if (ds_common.getColumn(0, 0) == "Y")
	{
		g_Message("EE", "시스템 변경 작업중이라 현 화면을 사용할 수 없습니다. \n사용불가시간(" + ds_common.getColumn(0, 1) + " ~ " + ds_common.getColumn(0, 2) + ") ");
		return false; 
	}
	
	if(ds_list.findRow("chk",1) == -1){
		gfn_alert("처리할 클레임을 선택해 주세요.");
		return;
	}
	for(var i=0;i < ds_list.getRowCount() ; i++){
		if(ds_list.getColumn(i,"chk") == "1"){
			if(ds_list.getColumn(i,"clsFlag") == "Y"){
				ds_list.rowposition = i;
				gfn_alert("수불 마감이 완료되어 본 작업이 불가능합니다.");
				return;
			}
			
			//if ( ds_list.getColumn(i, "ctClaimKind") != "C0519" && ds_list.getColumn(i, "ctClaimKind") != "C0595" ) {	// 업체주의요청건 제외
			if ( ds_list.getColumn(i, "ctClaimKind") != "C05039" && ds_list.getColumn(i, "ctClaimKind") != "C0595" ) {	// 업체주의요청건 제외
				if(Number(ds_list.getColumn(i,"procRtQty")) <= 0 ){
					var msg = (i+1)+"행의 반품수량은 필수 입니다.";
					ds_list.rowposition = i;
					gfn_alert( msg);
					return;
				}
			}
			
			
			if ( ds_list.getColumn(i, "ctClaimKind") == "C05039" || ds_list.getColumn(i, "ctClaimKind") == "C0595" ) {	
				if ( (ds_list.getColumn(i, "reqKind") == "C0201") || (ds_list.getColumn(i, "reqKind") == "C0202") ) {
					gfn_alert("반품/감량시 complaints는 선택할 수 없습니다.");
					return;
				}
			}
			
			if(gfn_subStr(ds_list.getColumn(i,"transDate"),0,6) != gfn_subStr(ds_list.getColumn(i,"needDate"),0,6)){
				//gfn_alert("수정일은 "+gfn_subStr(ds_list.getColumn(i,"needDate"),0,4)+"년 "+gfn_subStr(ds_list.getColumn(i,"needDate"),4,2)+"월달 이여야 합니다.\n\n입고월과 다릅니다.");
				//fn_setFocus(i , "transDate");
				//return;
			}
			
			if(ds_list.getColumn(i , "lineStatus") == "PD"){
				ds_list.rowposition = i;
				gfn_alert("해당 주문건은 [발주취소]건 입니다.\n클레임처리 할 수 없습니다.");
				return;
			}
			if(ds_list.getColumn(i , "lineStatus") == "IV"){
				ds_list.rowposition = i;
				gfn_alert("해당 주문건은 [정산완료]건 입니다.\n클레임처리 할 수 없습니다.");
				return;
			}
			if(ds_list.getColumn(i , "lineStatus") == "DL"){
				ds_list.rowposition = i;
				gfn_alert("해당 주문건은 [배송중]건 입니다.\n클레임처리 할 수 없습니다.");
				return;
			}
		}
	}

	if (!gfn_confirm("해당 클레임건을 처리 하시겠습니까?")) return;
	fn_save('process');
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 창고코드 팝업 버튼 Click시
 *---------------------------------------------------------------------------------------------*/
function btn_gubun_onclick(obj:Button,  e:ClickEventInfo)
{
	var dataSet = new Dataset();
	dataSet.addRow();
	dataSet.addColumn("designTitle", "STRING", "100");
	dataSet.setColumn(0,"designTitle","창고 조회");
	dataSet.addColumn("designItemCode", "STRING", "100");
	dataSet.setColumn(0,"designItemCode","창고코드");
	dataSet.addColumn("designItemName", "STRING", "100");
	dataSet.setColumn(0,"designItemName","창고명");
	
	var searchStrURL = "fm/fmc/claimProcStatus/subinvSearch.xdo"

	
	var strId       = "popUpTemplate";
	var strURL      = "X_FMC::SearchPop.xfdl";
	var objArgument = {P_DATASET : dataSet,
					   fa_strURL : searchStrURL,
					   fa_strArg : ""
					  };
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";

	// 리턴값을 배열로 받을 경우	
	//var arrRtn = gfn_dialog("popUpTemplate", "sample::TemplatePop.xfdl", {arg1:"aaa",arg2:"bbb",arg3:arrArg,arg4:ds_gubunList});
	var arrRtn = gfn_dialog(strId, strURL, objArgument);
	
	if (arrRtn instanceof Object)
	{
 		edt_subinv.userdata = arrRtn.code;
 		edt_subinv.value = arrRtn.name;
		
	}
	//팝업창을 호출한다.
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 반품시 수량이 0인지 체크
 *---------------------------------------------------------------------------------------------*/
function fn_ctKindCheck()
{
	for(var i=0; i<ds_list.rowcount; i++)
	{
		if(ds_list.getColumn(i,"chk") == '1')
		{
			if(ds_save.getColumn(i,"procRtQty") == 0)
			{
				//if ( ds_list.getColumn(i, "ctClaimKind") != "C0519" && ds_list.getColumn(i, "ctClaimKind") != "C0595" ) {	// 업체주의요청건 제외
				if ( ds_list.getColumn(i, "ctClaimKind") != "C05039" && ds_list.getColumn(i, "ctClaimKind") != "C0595" ) {	// 업체주의요청건 제외
					fn_setFocus(i, "procRtQty");
					gfn_message("A", "반품 수량이 0 입니다.");
					return false;
				}
			}
		}
	}
	return true;
}

function ds_list_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid == "transDate"){//수정일.
		/*
		if(gfn_subStr(e.newvalue,0,6) != gfn_subStr(ds_list.getColumn(e.row,"needDate"),0,6)){
			gfn_alert("수정일은 "+gfn_subStr(ds_list.getColumn(e.row,"needDate"),0,4)+"년 "+gfn_subStr(ds_list.getColumn(e.row,"needDate"),4,2)+"월달 이여야 합니다.\n\n입고월과 다릅니다.");
			return false;
		}
		*/
		
		if(e.newvalue > gfn_today()){
			gfn_alert("수정일은 오늘보다 미래일 수 없습니다.");
			return false;
		}
		if(e.newvalue < ds_list.getColumn(e.row,"needDate")){
			gfn_alert("수정일은 입고일["+gfn_getFormat(ds_list.getColumn(e.row,"needDate"), "@@@@-@@-@@")+"] 보다 과거일 수 없습니다.");
			return false;
		}
	}
	if(e.columnid == "procRtQty" || e.columnid == "procRdQty"){	
		if(e.newvalue < 0){
			gfn_alert("반품수량은 0보다 작을수 없습니다.");
			return false;
		}
		//소숫점발주여부
		if ( (obj.getColumn(e.row,"pointFlag") != "Y") && (Math.ceil(toNumber(e.newvalue)) != toNumber(e.newvalue)) )
		{
		//	sMsg = "해당 자재는 소숫점 발주가 불가합니다.";
		//	gfn_alert(sMsg, "", "A");
		//	return false;
		}
	}
	
	
	if(e.columnid == "ctKind"){
	/*
		if("C0201" == ds_list.getColumn(e.row,"reqKind") && e.newvalue != "C0301"){//감량
			gfn_alert("요청사항이 반품(실물X) 입니다. \n\n감량으로 처리하시거나 요청 취소후 재 요청 하시기 바랍니다.");
			return false;
		}
		if("C0202" == ds_list.getColumn(e.row,"reqKind") && e.newvalue != "C0303"){//반품
			gfn_alert("요청사항이 반품(실물O) 입니다. \n\n반품으로 처리하시거나 요청 취소후 재 요청 하시기 바랍니다.");
			return false;
		}
		if("C0203" == ds_list.getColumn(e.row,"reqKind") || "C0204" == ds_list.getColumn(e.row,"reqKind") || "C0205" == ds_list.getColumn(e.row,"reqKind")){//교환
			if(e.newvalue == "C0301" || e.newvalue == "C0303"){//감량 또는 반품
				var frow = ds_reqKind.findRow("code", ds_list.getColumn(e.row,"reqKind"))
				var reqKind = ds_reqKind.getColumn(frow,"codeName");
				gfn_alert("요청사항이 "+reqKind+" 입니다. \n\n감량 또는 반품으로 처리 할 수 없습니다.\n요청취소 후 요청사항을 변경해 주세요.");
				return false;
			}
		}
		*/
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 약도 버튼 클릭시 팝업 호출
 *---------------------------------------------------------------------------------------------*/
function grd_list_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	var text = grd_list.getCellProperty("Body",e.cell,"text");
	
 	//trace("e.cell : " + e.cell);
 	//trace("e.col : " + e.col);
	
	//[PJT]주문채널통합
	if(e.cell == 31  && e.col == 12)	fn_showRoughMap(e.row);
	
	if(e.cell == 19) //처리담당자
	{
		if(ds_list.getColumn(e.row,"buCd") != "2004"){
			var strMsg = "식재사업부 클레임건만 변경이 가능합니다.";
			//gfn_alert(strMsg);
		}
	}
	
	// 클레임유형 - 책임소제 연결구성
	var v_cond, nRow, arr; 
	
	nRow = ds_ctClaimKind.findRow("code", ds_list.getColumn(e.row,"ctClaimKind"))
	if(ds_list.getColumn(e.row,"centerFlag")=="DC") {
		arr = gfn_trim(ds_ctClaimKind.getColumn(nRow,"attr05")).split(",");
	}else {
		arr = gfn_trim(ds_ctClaimKind.getColumn(nRow,"attr04")).split(",");	
	}
	v_cond = "gfn_length(gfn_trim(set5))==0";
	for(var j = 0 ; j < arr.length; j++){
		v_cond = v_cond + " || gfn_trim(set5)=='" + arr[j] +"'";
	}
	ds_linkDept.filter(v_cond);	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 약도 버튼 클릭시 팝업 호출
 *---------------------------------------------------------------------------------------------*/
function fn_showRoughMap(row)
{
	if(ds_list.getColumn(row, 'map') == null || ds_list.getColumn(row, 'map').length == 0)return;
	
	var strId       = "RoughMapPop";
	var strURL      = "X_FMC::RoughMapPop.xfdl";
	var objArgument = {
		 P_IMG_FILE : ds_list.getColumn(ds_list.rowposition, 'map')
	};
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	
	var text = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 그리드 키 입력시 처리부서,처리자 자동 입력.
 *---------------------------------------------------------------------------------------------*/
function grd_list_onkeydown(obj:Grid, e:KeyEventInfo)
{
	if(ds_list.getColumn(ds_list.rowposition, 'prcsStatus') == '01' || ds_list.getColumn(ds_list.rowposition, 'prcsStatus') == '11')
	{
		if(e.keycode == 114)	// F3
		{
			ds_list.setColumn(ds_list.rowposition, 'partTmCd', g_Tm_Cd);
			ds_list.setColumn(ds_list.rowposition, 'partTmNm', g_Tm_Nm);
			ds_list.setColumn(ds_list.rowposition, 'mngSabun', g_EmpNo);
			ds_list.setColumn(ds_list.rowposition, 'nmKor', g_Name);
		}
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 업체 팝업.
 *---------------------------------------------------------------------------------------------*/
function btn_cust_onclick(obj:Button,  e:ClickEventInfo)
{
	// 팝업창을 호출한다	
	var strId       = "SaleCustSearch";
	var strURL      = "X_FMS::SalePriceCustSearchPop.xfdl";
	var objArgument = {
		P_DATASET : ds_search
	};
	
	var nWidth      = 513;
	var nHeight     = 495;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	
	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
	if (arrRtn instanceof Object)
	{
		edt_cust.value    = arrRtn["custNm"];
		edt_cust.userdata = arrRtn["custCd"];
		obj.userdata       = arrRtn["custNm"];
		ds_search.setColumn(ds_search.rowposition,"schCust",arrRtn["custCd"]);
	}
}


function edt_cust_onkeydown(obj:Edit, e:KeyEventInfo)
{
		// Del 키
	if(e.keycode == 46) 
	{		
		edt_cust.value="";
		edt_cust.userdata="";
		ds_search.setColumn(ds_search.rowposition, "schCust",	"");
	}
}
function btn_reqCancel_onclick(obj:Button,  e:ClickEventInfo)
{
	/*시스템 통제 시간 체크 - 특정일자에 사용을 할 수 없게 한다.*/
	mfn_GetSystemWorkCheck("PO");
	if (ds_common.getColumn(0, 0) == "Y")
	{
		g_Message("EE", "시스템 변경 작업중이라 현 화면을 사용할 수 없습니다. \n사용불가시간(" + ds_common.getColumn(0, 1) + " ~ " + ds_common.getColumn(0, 2) + ") ");
		return false; 
	}
	
	if(ds_list.rowcount == 0){
		gfn_alert("데이터가 없습니다.");
		return;
	}
	
	if(ds_list.findRow("chk",1) == -1){
		gfn_alert("요청취소할 데이터를 선택 해 주세요.");
		return;
	}
	
	for(var i=0; i<ds_list.rowcount; i++)
	{
		if(ds_list.getColumn(i, "chk") == 1 && ds_list.getColumn(i,'prcsStatus') != '01')
		{
			gfn_message("A", "클레임 요청한건에 대해서만 취소 할 수 있습니다.");
			return;
		}
	}
	if (!gfn_confirm("해당 클레임건을 요청취소 하시겠습니까?")) return;
	
    var strSvcID    = "cancel";
    var strURL      = "fm/fmc/claimProc/reqCancelList.xdo";
    var strInDs     = "ds_list=ds_list:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
	
}

// 센터코드 클릭
function btn_centerCode_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_centerCodePop();
}

function fn_centerCodePop()
{
	// 팝업창을 호출한다	
	var strId       = "CenterCodePop";
	var strURL      = "X_FMO::CenterCodePop.xfdl";
	var objArgument = {
		P_DATASET : ds_search
	};
	
	var nWidth      = 281;
	var nHeight     = 330;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	
	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
	if (arrRtn instanceof Object)
	{
		// 리턴값 처리
		edt_centerCode.value    = arrRtn["centerName"];
		edt_centerCode.userdata = arrRtn["centerCode"];
		
		// ds_search SET
		ds_search.setColumn(0, "schCode", arrRtn["centerCode"]);
	}
}


// 사진정보 클릭
function btn_photo_onclick(obj:Button,  e:ClickEventInfo)
{
 	if(ds_list.rowposition == -1) {
		gfn_alert("데이터가 없습니다.");
		return;
	}
	
	fn_ClaimReqPhotoPopup("R");
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 사진 팝업을 호출한다.   (arg 현재 사용x)
 *---------------------------------------------------------------------------------------------*/
function fn_ClaimReqPhotoPopup(arg)
{
	var arrParam = new Array();

	var rtnVal = gfn_dialog("ClaimReqPhotoPop"					// Dialog ID
							, "X_FMC::ClaimReqPhotoPop.xfdl"	// Form URL
							, {pv_poId:ds_list.getColumn(ds_list.rowposition, 'poId')
							  ,pv_poNum:ds_list.getColumn(ds_list.rowposition, 'poNum')
							  ,pv_claimNum:ds_list.getColumn(ds_list.rowposition, 'claimNum')
							  ,pv_upjang:ds_list.getColumn(ds_list.rowposition, 'upjang')
							  ,pv_centerCode:ds_list.getColumn(ds_list.rowposition, 'centerCode')
							  ,pv_subinvCode:ds_list.getColumn(ds_list.rowposition, 'subinvCode')
							  ,pv_itemCode:ds_list.getColumn(ds_list.rowposition, 'itemCode')
							  ,pv_itemName:ds_list.getColumn(ds_list.rowposition, 'itemName')
							  ,pv_itemSize:ds_list.getColumn(ds_list.rowposition, 'itemSize')
							  ,pv_mode:arg}
							, null, null, null, null, null, false, true, -1);

}



function ds_list_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	if (obj.getColumn(obj.rowposition, "photo")>0) {
		btn_photo.visible = true;
	} else {
		btn_photo.visible = false;
	}
	
}

]]></Script>
  </Form>
</FDL>
