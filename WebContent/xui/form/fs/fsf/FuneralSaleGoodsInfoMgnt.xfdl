<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FuneralSaleGoodsInfoMgnt" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="판매상품군 정보관리(FuneralSaleGoodsIngoMgnt)" scrollbars="autoboth" onload="form_onload" ontimer="FuneralSaleGoodsInfoMgnt_ontimer">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="0" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 450 84" anchor="left top"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 93 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static21" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1159 71 1237 77" anchor="top right"/>
        <Tab id="tab_funeralSaleGoodsInfoMgnt" anchor="all" taborder="4" tabindex="0" scrollbars="autoboth" position="absolute 0 84 1254 710" style="showextrabutton:false;">
          <Tabpages>
            <Tabpage id="tabpage1" text="판매 상품 등록">
              <Layouts>
                <Layout width="1255" height="598">
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 1234 13" anchor="left top"/>
                  <Static id="Static22" text="식사류" class="sta_WF_Title01" position="absolute 10 13 85 31" anchor="default" onclick="Tab00_tabpage2_Static22_onclick"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 1234 31" anchor="left top"/>
                  <Button id="btn_addMealClassList" taborder="1" class="btn_WF_GrdPlus" position="absolute 363 8 381 28" anchor="default" onclick="fn_addRow"/>
                  <Button id="btn_deleteMealClassList" taborder="2" class="btn_WF_GrdMinus" position="absolute 383 8 401 28" anchor="default" onclick="fn_remove"/>
                  <Static id="Static00" text="매점상품" class="sta_WF_Title01" position="absolute 422 13 532 31" anchor="default"/>
                  <Button id="btn_addStoreClassList" taborder="5" class="btn_WF_GrdPlus" position="absolute 776 8 794 28" anchor="default" onclick="fn_addRow"/>
                  <Button id="btn_deleteStoreClassList" taborder="6" class="btn_WF_GrdMinus" position="absolute 796 8 814 28" anchor="default" onclick="fn_remove"/>
                  <Static id="Static01" text="기타상품" class="sta_WF_Title01" position="absolute 835 13 980 31" anchor="default"/>
                  <Button id="btn_addEtcClassList" taborder="8" class="btn_WF_GrdPlus" position="absolute 1197 8 1215 28" anchor="top right" onclick="fn_addRow"/>
                  <Button id="btn_deleteEtcClassList" taborder="9" class="btn_WF_GrdMinus" position="absolute 1217 8 1235 28" anchor="top right" onclick="fn_remove"/>
                  <Static id="Static19" text="h317" class="Guide01_AreaRed" visible="false" position="absolute 403 11 423 376" anchor="left top"/>
                  <Static id="Static02" text="h317" class="Guide01_AreaRed" visible="false" position="absolute 816 11 836 372" anchor="left top"/>
                  <Button id="btn_searchStoreGoods" taborder="4" text="매점상품조회" class="btn_WF_Function" position="absolute 685 8 774 28" onclick="fn_searchStoreGoodsPopup" anchor="default"/>
                  <Grid id="grd_mealClassList" taborder="0" binddataset="ds_mealClassList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 10 31 403 588" anchor="left top bottom" autofittype="col" selecttype="row" onenteredit="tab_funeralSaleGoodsInfoMgnt_tabpage1_grd_mealClassList_onenteredit">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="69"/>
                          <Column size="170"/>
                          <Column size="60"/>
                          <Column size="100"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="분류"/>
                          <Cell col="1" text="상품명" taborder="undefined"/>
                          <Cell col="2" text="단위"/>
                          <Cell col="3" text="금액"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="combo" edittype="combo" text="bind:goodsClassCd" combodataset="ds_goodsType" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="1" displaytype="text" edittype="text" style="align:left;" text="bind:detailGoodsNm" editlimit="50" editimemode="hangul"/>
                          <Cell col="2" displaytype="text" edittype="text" style="align:center;" text="bind:unit" editlimit="22"/>
                          <Cell col="3" displaytype="number" edittype="masknumber" style="align:right;" text="bind:lastUprice" mask="###,###,##0" editlimit="12"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Grid id="grd_storeClassList" taborder="3" binddataset="ds_storeClassList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 423 31 816 588" anchor="left top bottom" autofittype="col">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="170"/>
                          <Column size="60"/>
                          <Column size="100"/>
                          <Column size="62"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="상품명" taborder="undefined"/>
                          <Cell col="1" text="단위"/>
                          <Cell col="2" text="금액"/>
                          <Cell col="3" text="VAT"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" edittype="expr:regYn=='Y'?'none':'text'" style="align:left;" text="bind:detailGoodsNm" editlimit="50" editimemode="hangul"/>
                          <Cell col="1" displaytype="text" edittype="text" style="align:center;" text="bind:unit" editlimit="22"/>
                          <Cell col="2" displaytype="number" edittype="expr:regYn=='Y'?'none':'masknumber'" style="align:right;" text="bind:lastUprice" mask="###,###,##0" editlimit="12"/>
                          <Cell col="3" displaytype="combo" edittype="combo" text="bind:goodsType" editlimit="2" combodataset="ds_tax" combocodecol="code" combodatacol="codeName"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Grid id="grd_etcClassList" taborder="7" binddataset="ds_etcClassList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 836 31 1235 310" anchor="all" autofittype="col">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="130"/>
                          <Column size="50"/>
                          <Column size="80"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="상품명" taborder="undefined"/>
                          <Cell col="1" text="단위"/>
                          <Cell col="2" text="금액"/>
                          <Cell col="3" text="매출포함여부"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" edittype="text" style="align:left middle;" text="bind:detailGoodsNm" editlimit="50" editimemode="hangul"/>
                          <Cell col="1" displaytype="text" edittype="text" style="align:center;" text="bind:unit" editlimit="22"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" style="align:right;" text="bind:lastUprice" mask="###,###,##0" editlimit="12"/>
                          <Cell col="3" displaytype="combo" edittype="combo" text="bind:salsIncludeYn" combodataset="ds_localUseYn" combocodecol="code" combodatacol="codeName" combodisplay="edit"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static58" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 10 597" anchor="default"/>
                  <TextArea id="TextArea00" taborder="10" position="absolute 470 431 729 526" value="매점 상품 조회 버튼 선택시 매점 상품 목록 팝업(멀티 선택) / 행추가해서 매점에서 팔지만 구매에 없는 data 입력 / 매점 상품의 경우 코드는 구매자재코드 사용하고 임의로 등록한 건은 우리가 임의로 코드 생성" wordwrap="both" visible="false" anchor="default"/>
                  <TextArea id="TextArea01" taborder="129" value="매출포함여부는 default가 N이다." wordwrap="both" position="absolute 895 174 1094 209" visible="false" anchor="default"/>
                  <Grid id="grd_custClassList" taborder="130" binddataset="ds_custClassList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 836 348 1235 588" anchor="left right bottom">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="130"/>
                          <Column size="50"/>
                          <Column size="80"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="상품명" taborder="undefined"/>
                          <Cell col="1" text="단위"/>
                          <Cell col="2" text="금액"/>
                          <Cell col="3" text="매출포함여부"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" edittype="text" style="align:left middle;" text="bind:detailGoodsNm" editlimit="50" editimemode="hangul"/>
                          <Cell col="1" displaytype="text" edittype="text" style="align:center;" text="bind:unit" editlimit="22"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" style="align:right;" text="bind:lastUprice" mask="###,###,##0" editlimit="12"/>
                          <Cell col="3" displaytype="combo" edittype="combo" text="bind:salsIncludeYn" combodataset="ds_localUseYn" combocodecol="code" combodatacol="codeName" combodisplay="edit"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static03" text="h317" class="Guide01_AreaRed" visible="false" position="absolute 1236 14 1256 375" anchor="left top"/>
                  <Static id="Static04" text="협력업체" class="sta_WF_Title01" position="absolute 835 330 980 348" anchor="left right bottom"/>
                  <Button id="btn_addCustClassList" taborder="131" onclick="fn_addRow" class="btn_WF_GrdPlus" position="absolute 1197 323 1215 343" anchor="right bottom"/>
                  <Button id="btn_deleteCustClassList" taborder="132" onclick="fn_remove" class="btn_WF_GrdMinus" position="absolute 1217 323 1235 343" anchor="right bottom"/>
                  <Static id="Static05" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 343 1234 348" anchor="left top"/>
                  <Static id="Static06" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 7 310 1231 323" anchor="left top"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="세트 등록" taborder="0">
              <Layouts>
                <Layout>
                  <Grid id="grd_mclassList" taborder="0" binddataset="ds_mclassList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 10 31 1235 151" anchor="left top right" oncloseup="fn_mClsCloseUp" ondropdown="fn_mClsDropDown" style="background:transparent;">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="160"/>
                          <Column size="150"/>
                          <Column size="80"/>
                          <Column size="100"/>
                          <Column size="100"/>
                          <Column size="590"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="업장명" taborder="undefined"/>
                          <Cell col="1" text="세트명"/>
                          <Cell col="2" text="정렬순서"/>
                          <Cell col="3" text="사용중지 여부"/>
                          <Cell col="4" text="사용중지 일자"/>
                          <Cell col="5" text="비고"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" style="align:center;" text="bind:upjangnm" editimemode="hangul" editacceptsenter="false" suppress="0"/>
                          <Cell col="1" displaytype="text" edittype="text" text="bind:setNm" editimemode="hangul" editacceptsenter="false"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" text="bind:sortOrder" editacceptsenter="false"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="align:center;" text="bind:useYn" editacceptsenter="false" combodataset="ds_useClass" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="4" displaytype="date" edittype="expr:useYn=='N'?'date':'none'" text="bind:useStopDate" editacceptsenter="false" calendardisplaynulltype="none"/>
                          <Cell col="5" displaytype="text" edittype="text" text="bind:remark" editacceptsenter="false"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static21" class="sta_WFSA_Labelbg01" position="absolute 10 183 579 224" anchor="default"/>
                  <Static id="Static00" text="세트명 등록" onclick="Tab00_tabpage7_Static00_onclick" class="sta_WF_Title01" position="absolute 8 13 308 31" anchor="default"/>
                  <Static id="Static58" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 10 597"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 1234 13" anchor="left top"/>
                  <Button id="btn_addMClassList" taborder="1" class="btn_WF_GrdPlus" position="absolute 1196 8 1214 28" anchor="top right" onclick="fn_addRow"/>
                  <Button id="btn_deleteMClassList" taborder="2" class="btn_WF_GrdMinus" position="absolute 1216 8 1234 28" anchor="top right" onclick="fn_remove" visible="true"/>
                  <Static id="Static01" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 151 1234 164" anchor="left top"/>
                  <Static id="Static22" text="판매 상품 목록" onclick="Tab00_tabpage2_Static22_onclick" class="sta_WF_Title01" position="absolute 10 164 150 182" anchor="default"/>
                  <Static id="Static02" text="세트 등록" class="sta_WF_Title01" position="absolute 609 164 719 182" anchor="left top"/>
                  <Static id="Static19" text="h317" class="Guide01_AreaRed" visible="false" position="absolute 584 182 604 313" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 177 1234 182" anchor="left top"/>
                  <Static id="Static23" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 10 182 103 192" anchor="left top"/>
                  <Static id="Static03" text="상품분류" class="sta_WFSA_label01" position="absolute 25 192 87 213" anchor="default"/>
                  <Static id="Static24" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 10 213 103 223" anchor="left top"/>
                  <Combo id="cbo_goodsClass" taborder="3" position="absolute 93 192 253 213" anchor="default" innerdataset="@ds_goodsClass" codecolumn="code" datacolumn="codeName" index="0" text="전체" oncloseup="tab_funeralSaleGoodsInfoMgnt_tabpage2_cbo_goodsClass_oncloseup" displaynulltext="전체"/>
                  <Static id="Static27" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 253 192 283 213" anchor="left top"/>
                  <Static id="Static17" text="w05" class="Guide01_AreaRed" visible="false" position="absolute 577 311 586 356" anchor="left top"/>
                  <Static id="Static18" text="w05" class="Guide01_AreaRed" visible="false" position="absolute 602 311 611 356" anchor="left top"/>
                  <Button id="btn_rightMove" taborder="5" class="btn_WF_rightMove" position="absolute 584 311 604 331" anchor="default" onclick="fn_moveRight"/>
                  <Button id="btn_leftMove" taborder="6" class="btn_WF_leftMove" position="absolute 584 336 604 356" anchor="default" onclick="fn_moveLeft"/>
                  <Grid id="grd_funeralGoodsList" taborder="4" binddataset="ds_funeralGoodsList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 10 224 579 588" anchor="left top bottom" autofittype="col">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="30"/>
                          <Column size="80"/>
                          <Column size="186"/>
                          <Column size="70"/>
                          <Column size="100"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="2" text="상품분류"/>
                          <Cell col="3" text="상품명"/>
                          <Cell col="4" text="단위"/>
                          <Cell col="5" text="최종단가"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align:right;" text="expr:currow+1"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                          <Cell col="2" displaytype="combo" edittype="none" text="bind:goodsClassCd" suppress="0" combodataset="ds_goodsClass" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="3" displaytype="text" edittype="none" text="bind:detailGoodsNm" editlimit="50" suppress="0"/>
                          <Cell col="4" displaytype="text" edittype="none" style="align:center;" text="bind:unit" editlimit="22"/>
                          <Cell col="5" displaytype="number" edittype="none" text="bind:lastUprice" mask="###,###,##0" editlimit="12"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Grid id="grd_sclassList" taborder="9" binddataset="ds_sclassList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 609 210 1235 588" anchor="all" autofittype="col">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="40"/>
                          <Column size="97"/>
                          <Column size="80"/>
                          <Column size="200"/>
                          <Column size="80"/>
                          <Column size="70"/>
                          <Column size="100"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="2" text="세트명"/>
                          <Cell col="3" text="상품분류"/>
                          <Cell col="4" text="상품명"/>
                          <Cell col="5" text="단위"/>
                          <Cell col="6" text="개수"/>
                          <Cell col="7" text="최종단가"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align:right;" text="expr:currow+1"/>
                          <Cell col="1" displaytype="expr:fn_checkSet(currow)" edittype="expr:fn_checkSet(currow)" text="bind:chk"/>
                          <Cell col="2" displaytype="text" text="bind:setNm"/>
                          <Cell col="3" displaytype="combo" text="bind:goodsClassCd" suppress="0" combodataset="ds_goodsClass" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="4" displaytype="text" edittype="none" text="bind:detailGoodsNm" editlimit="50" suppress="0"/>
                          <Cell col="5" displaytype="text" edittype="none" style="align:center;" text="bind:unit" editlimit="22"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" text="bind:ea" mask="###,###,##0"/>
                          <Cell col="7" displaytype="number" edittype="none" text="bind:lastUprice" mask="###,###,##0" editlimit="12"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static72" class="sta_WFDA_Labelbg" position="absolute 610 182 1235 209" anchor="left top"/>
                  <Combo id="cbo_setCd" taborder="7" value="001" innerdataset="@ds_setCd" codecolumn="setCd" datacolumn="setNm" position="absolute 718 185 906 206" onitemchanged="fn_getSetCode"/>
                  <Edit id="edt_setCd" taborder="8" position="absolute 1022 185 1231 206" style="background:#e4e4e4ff;"/>
                  <Static id="Static04" text="세트 코드" onclick="Static33_onclick" class="sta_WFDA_Label01" position="absolute 913 182 1019 209"/>
                  <Static id="Static33" text="세트명" onclick="Static33_onclick" class="sta_WFDA_Label01" position="absolute 610 182 716 209"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage3" text="판매 상품 목록">
              <Layouts>
                <Layout>
                  <Static id="Static01" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static02" text="현황" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Grid id="grd_saleGoodsTotalList" taborder="0" binddataset="ds_saleGoodsTotalList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 9 31 1235 588" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="240"/>
                          <Column size="120"/>
                          <Column size="120"/>
                          <Column size="240"/>
                          <Column size="100"/>
                          <Column size="120"/>
                          <Column size="120"/>
                          <Column size="74"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="업장명" taborder="undefined"/>
                          <Cell col="2" text="상품구분"/>
                          <Cell col="3" text="상품코드"/>
                          <Cell col="4" text="상품명"/>
                          <Cell col="5" text="단위"/>
                          <Cell col="6" text="수량"/>
                          <Cell col="7" text="금액"/>
                          <Cell col="8" displaytype="text" text="사용여부"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align:center;background:white;background2:white;" text="expr:currow+1"/>
                          <Cell col="1" displaytype="text" style="align:left;background:white;background2:white;" text="bind:upjangnm" suppress="1"/>
                          <Cell col="2" displaytype="text" style="align:center;background:white;background2:white;" text="bind:mclassNm" suppress="2"/>
                          <Cell col="3" displaytype="text" style="align:center;background:white;background2:white;" text="bind:sclassCd" suppress="0"/>
                          <Cell col="4" displaytype="text" style="align:left;background:white;background2:white;" text="bind:sclassNm"/>
                          <Cell col="5" displaytype="text" style="align:center;background:white;background2:white;" text="bind:unit"/>
                          <Cell col="6" displaytype="number" style="background:white;background2:white;" text="bind:ea" mask="###,###,##0"/>
                          <Cell col="7" displaytype="number" style="align:right;background:white;background2:white;" text="bind:lastUprice" mask="###,###,##0"/>
                          <Cell col="8" displaytype="combo" style="background:white;background2:white;" text="bind:useYn" combodataset="ds_useClass" combocodecol="code" combodatacol="codeName"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static58" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 10 597"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static59" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 700 1239 710"/>
        <Static id="Static12" text="사업부" class="sta_WFSA_label" position="absolute 15 40 77 61" anchor="left top"/>
        <Static id="Static13" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 60 40 70 61" anchor="left top"/>
        <Static id="Static14" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 230 40 260 61" anchor="left top"/>
        <Static id="Static32" text="팀" class="sta_WFSA_label" position="absolute 260 40 322 61" anchor="left top"/>
        <Static id="Static33" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 279 40 289 61" anchor="left top"/>
        <Static id="Static34" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 446 40 476 61" anchor="left top"/>
        <Static id="Static40" text="장례식장" class="sta_WFSA_label" position="absolute 477 40 539 61" anchor="left top"/>
        <Static id="Static41" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 535 40 545 61" anchor="left top"/>
        <UpjangSearchComponent id="edt_upjangNm" titletext="업장 검색용 Component" taborder="3" class="edt_WF_Essential" position="absolute 545 40 724 61" bindDataset="ds_search" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="fn_upjangChangedEvent" roleSetId="StUpjang"/>
        <TmSearchComponent id="edt_tmNm" titletext="팀 검색용 Component" taborder="2" class="edt_WF_Essential" position="absolute 289 40 446 62" bindDataset="ds_search" bindTmCdColumn="tmCd" bindTmNmColumn="tmNm" qoBuCd="" qoMuCd="" qoUseYn="Y" eventAfterTrigger="fn_tmChangedEvent" eventBeforeTrigger=""/>
        <MuSearchComponent id="edt_muNm" titletext="사업부 선택 Component" taborder="1" class="cmb_WF_Essential" position="absolute 75 40 234 61" bindDataset="ds_search" bindMuCdColumn="muCd" appendText="전체" onItemChangedEvent="fn_muItemChangedEvent"/>
        <Static id="Static02" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 724 40 754 61" anchor="left top"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item14" compid="edt_upjangNm" propid="visible" datasetid=" " columnid="upjangNm"/>
      <BindItem id="item0" compid="tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_goodsClass" propid="value" datasetid="ds_search" columnid="goodsClassCd"/>
      <BindItem id="item1" compid="tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd" propid="value" datasetid="ds_search" columnid="setCd"/>
    </Bind>
    <Objects>
      <Dataset id="ds_mealClassList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="salsIncludeYn" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="useStopDate" type="STRING" size="256"/>
          <Column id="sortOrder" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
          <Column id="oldGoodsClassCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_unitType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="tmNm" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="cuserId" type="STRING" size="256"/>
          <Column id="cuserNm" type="STRING" size="256"/>
          <Column id="srchParam" type="STRING" size="256"/>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="setCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_etcClassList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="salsIncludeYn" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="useStopDate" type="STRING" size="256"/>
          <Column id="sortOrder" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_storeClassList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="salsIncludeYn" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="useStopDate" type="STRING" size="256"/>
          <Column id="sortOrder" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="goodsType" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_useYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mclassList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_mclassList_oncolumnchanged">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="upjangnm" type="STRING" size="256"/>
          <Column id="setCd" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="sortOrder" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="useStopDate" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_goodsClass_onrowposchanged">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">004</Col>
            <Col id="codeName">밥류</Col>
          </Row>
          <Row>
            <Col id="code">005</Col>
            <Col id="codeName">탕류</Col>
          </Row>
          <Row>
            <Col id="code">002</Col>
            <Col id="codeName">매점류</Col>
          </Row>
          <Row>
            <Col id="code">003</Col>
            <Col id="codeName">기타류</Col>
          </Row>
          <Row>
            <Col id="code">006</Col>
            <Col id="codeName">협력업체</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_funeralGoodsList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="salsIncludeYn" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="useStopDate" type="STRING" size="256"/>
          <Column id="sortOrder" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sclassList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="setCd" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="flag" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_setCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="setCd" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="sortOrder" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_saleGoodsTotalList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="upjangnm" type="STRING" size="256"/>
          <Column id="mclassCd" type="STRING" size="256"/>
          <Column id="mclassNm" type="STRING" size="256"/>
          <Column id="sclassCd" type="STRING" size="256"/>
          <Column id="sclassNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_useClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">Y</Col>
            <Col id="codeName">사용</Col>
          </Row>
          <Row>
            <Col id="code">N</Col>
            <Col id="codeName">미사용</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_classListValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="detailGoodsNm">title:상품명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
            <Col id="lastUprice">title:금액,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_storeClassListVaild" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="goodsType" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="detailGoodsNm">title:상품명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
            <Col id="lastUprice">title:금액,required:true</Col>
            <Col id="goodsType">title:과면세여부,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_etcClassListValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="detailGoodsNm">title:상품명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_localUseYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">Y</Col>
            <Col id="codeName">Y</Col>
          </Row>
          <Row>
            <Col id="code">N</Col>
            <Col id="codeName">N</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_goodsDeleteYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="delYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
          <Column id="sortSeq" type="STRING" size="256"/>
          <Column id="set1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_custClassList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="salsIncludeYn" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="useStopDate" type="STRING" size="256"/>
          <Column id="sortOrder" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_custClassListValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="detailGoodsNm">title:상품명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_tax" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">과세</Col>
            <Col id="codeName">과세</Col>
          </Row>
          <Row>
            <Col id="code">면세</Col>
            <Col id="codeName">면세</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_check" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="tmNm" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="cuserId" type="STRING" size="256"/>
          <Column id="cuserNm" type="STRING" size="256"/>
          <Column id="srchParam" type="STRING" size="256"/>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="setCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_mealClassListValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="goodsClassCd">title:분류,required:true</Col>
            <Col id="detailGoodsNm">title:상품명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
            <Col id="lastUprice">title:금액,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : Template
  파 일 명 : Template.xfdl
  기    능 : Design 및 Script Template 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.11.01   김윤기   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_mealClassListColInfo;  // ds_mealClassList 데이터셋 컬럼정보
var fv_storeClassListColInfo; // ds_storeClassList  데이터셋 컬럼정보
var fv_etcClassListColInfo;   // ds_etcClassList  데이터셋 컬럼정보	
var fv_custClassListColInfo;   // ds_custClassList  데이터셋 컬럼정보	
var fv_setCdColInfo;		  // ds_setCd 데이터셋 컬럼정보
var fv_mclassListColInfo;			// ds_mclassList 데이터셋 컬럼정보
var fv_funeralGoodsListColInfo;		// ds_funeralGoodsList 데이터셋 컬럼정보
var fv_sclassListColInfo;			// ds_sclassList 데이터셋 컬럼정보
var fv_saleGoodsTotalListColInfo;	// ds_saleGoodsTotalList 데이터셋 컬럼정보

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*
 ******************************************************************************************
 * 함  수  명   : form_onload()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : Form Load (필수)
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 초기값 셋팅
	fn_init();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_init()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 초기값 설정
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_init()
{
 	
//	SCCombo.bind(this, "ComCode", "cbo_goodsType", ds_goodsType, {groupCode:"GOODS_TYPE", useYn:"Y",defVal:""},SCCombo.ALL);	// 상품구분
// 	SCCombo.bind(this, "ComCode", "grd_classGoodsMaster.goodsClassCd", ds_goodsType, {groupCode:"GOODS_TYPE", useYn:"Y"});
//  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_mealClassList.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"", defVal:""});		// 품목 단위
//  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_storeClassList.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"Y", defVal:""});
//  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_etcClassList.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"Y", defVal:""});
//  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_funeralGoodsList.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"Y", defVal:""});
//  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_sclassList.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"Y", defVal:""});
//  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_saleGoodsTotalList.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"Y", defVal:""});
 // 	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_etcClassList.salsIncludeYn", ds_useYn, {groupCode:"USE_YN", useYn:"Y", defVal:"N"});	// 여부
 
  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_mealClassList.goodsClassCd", ds_goodsType, {groupCode:"GOODS_TYPE", useYn:"Y"});
  	SCCombo.bind(this, "ComCode", "tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_goodsClass", ds_goodsClass, {groupCode:"GOODS_TYPE", useYn:"Y"});
  	
 	
 	ds_search.clearData();
	var nRow= ds_search.addRow();		
	ds_search.setColumn(0, "muCd", g_Mu_Cd);            //사업부
    ds_search.setColumn(0, "muNm", g_Mu_Nm);
    ds_search.setColumn(0, "tmCd", g_Tm_Cd);            //팀
    ds_search.setColumn(0, "tmNm", g_Tm_Nm);
    ds_search.setColumn(0, "upjangCd", g_Upjang);       //업장
    ds_search.setColumn(0, "upjangNm", g_UpjangNm);
    ds_search.setColumn(0, "funeralHallCd", g_Upjang);
    
    edt_tmNm.applyAuthLevel(edt_muNm);
    edt_upjangNm.applyAuthLevel(edt_tmNm);
    edt_upjangNm.applyMainUpjang(null);
    
    // 급식, 식재, 외식, 구매 사업부는 팀, 업장 변경 불가.
	if((gfn_indexOf(ds_search.getColumn(0,"muNm"), "FS", 0) >= 0)
			||(gfn_indexOf(ds_search.getColumn(0,"muNm"), "식재", 0) >= 0)
			||(gfn_indexOf(ds_search.getColumn(0,"muNm"), "외식", 0) >= 0)
			||(gfn_indexOf(ds_search.getColumn(0,"muNm"), "구매", 0) >= 0)) {
		
		edt_tmNm.enable     = false;
		edt_upjangNm.enable = false;
		
	// FC사업지원본부는 사업부/팀/업장 변경 가능	
	}else if(gfn_indexOf(ds_search.getColumn(0,"muNm"), "FC", 0) >= 0) {
		edt_tmNm.enable     = true;
		edt_upjangNm.enable = true;
	}
	
	ds_goodsType.filter("set1==001");
    
 	fn_searchCode();
}

/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*
 ******************************************************************************************
 * 함  수  명   : fn_searchCode()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 상품분류 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchCode()
{
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	fv_setCdColInfo = gfn_getDatasetInfo(ds_setCd);			
	ds_setCd.clearData();
	
    var strSvcID    = "searchSetCdCombo";
    var strURL      = "fs/fsf/funeralSaleGoodsInfoMgnt/selectSetCdCombo.xdo";
	var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_setCd=ds_setCd";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_search()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_search()
{
	// 팀담당자일경우 기준정보 관리
	if((gfn_posCase(g_UpjangNm, "장례식장", 0) == -1) && (g_AuthLevel<>"70" && g_AuthLevel<>"99" && g_AuthLevel<>"999")) {
		
	// 장례식장 관계자일경우 세트코드 조회(MU 권한자, 관리자, 전산관리자 포함)
	}else {
	
	}
	
	// Grid sort 표시 초기화(필수)
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_mealClassList);
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_storeClassList);
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_etcClassList);
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList);
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_funeralGoodsList);
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_sclassList);
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage3.grd_saleGoodsTotalList);

	
	
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	fv_mealClassListColInfo    = gfn_getDatasetInfo(ds_mealClassList);
	fv_storeClassListColInfo   = gfn_getDatasetInfo(ds_storeClassList);
	fv_etcClassListColInfo     = gfn_getDatasetInfo(ds_etcClassList);	
	fv_custClassListColInfo     = gfn_getDatasetInfo(ds_custClassList);	
	fv_mclassListColInfo	   = gfn_getDatasetInfo(ds_mclassList);			// ds_mclassList 데이터셋 컬럼정보
	fv_funeralGoodsListColInfo = gfn_getDatasetInfo(ds_funeralGoodsList);	// ds_funeralGoodsList 데이터셋 컬럼정보
	fv_sclassListColInfo	   = gfn_getDatasetInfo(ds_sclassList);			// ds_sclassList 데이터셋 컬럼정보
	fv_saleGoodsTotalListColInfo = gfn_getDatasetInfo(ds_saleGoodsTotalList);	// ds_saleGoodsTotalList 데이터셋 컬럼정보
	
	ds_mealClassList.clearData();
	ds_storeClassList.clearData();
	ds_etcClassList.clearData();
	ds_custClassList.clearData();
	ds_mclassList.clearData();
	ds_funeralGoodsList.clearData();
	ds_sclassList.clearData();
	ds_saleGoodsTotalList.clearData();
	
	ds_search.setColumn(0, "funeralHallCd", ds_search.getColumn(0, "upjangCd"));
	//ds_search.setColumn(0, "goodsClassCd", tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_goodsClass.value);
	//ds_search.setColumn(0, "setCd", tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd.value);
	ds_search.setColumn(0, "goodsClassCd", "");
	ds_search.setColumn(0, "setCd", "");
	
	// setCd 에 조건 초기화, 세트등록 탭에 세트등록 그리드 초기화
	this.tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_sclassList.setFormatColProperty(2,"size",97);
	
	
	var strSvcID    = "searchFuneralSaleGoodsInputList";
	var strURL      = "fs/fsf/funeralSaleGoodsInfoMgnt/selectFuneralSaleGoodsInputList.xdo";
	var strInDs     = "ds_search=ds_search:A";
	var strOutDs    = "ds_mealClassList=ds_mealClassList ds_storeClassList=ds_storeClassList ds_etcClassList=ds_etcClassList ds_custClassList=ds_custClassList ";
	    strOutDs   += "ds_mclassList=ds_mclassList ds_funeralGoodsList=ds_funeralGoodsList ds_sclassList=ds_sclassList ds_saleGoodsTotalList=ds_saleGoodsTotalList";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;
	
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_searchTab2GoodsList()
{
	// 팀담당자일경우 기준정보 관리
	if((gfn_posCase(g_UpjangNm, "장례식장", 0) == -1) && (g_AuthLevel<>"70" && g_AuthLevel<>"99" && g_AuthLevel<>"999")) {
		
	// 장례식장 관계자일경우 세트코드 조회(MU 권한자, 관리자, 전산관리자 포함)
	}else {
	
	}
	
	// Grid sort 표시 초기화(필수)
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_funeralGoodsList);
	
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	fv_funeralGoodsListColInfo = gfn_getDatasetInfo(ds_funeralGoodsList);	// ds_funeralGoodsList 데이터셋 컬럼정보
	
	ds_funeralGoodsList.clearData();
	
	ds_search.setColumn(0, "funeralHallCd", ds_search.getColumn(0, "upjangCd"));
	//ds_search.setColumn(0, "goodsClassCd", tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_goodsClass.value);
	//ds_search.setColumn(0, "setCd", tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd.value);
	
	var strSvcID    = "searchTab2GoodsList";
	var strURL      = "fs/fsf/funeralSaleGoodsInfoMgnt/selectTab2GoodsList.xdo";
	var strInDs     = "ds_search=ds_search:A";
	var strOutDs    = "ds_funeralGoodsList=ds_funeralGoodsList";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;
	
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_searchTab2SetList()
{

	// 팀담당자일경우 기준정보 관리
	if((gfn_posCase(g_UpjangNm, "장례식장", 0) == -1) && (g_AuthLevel<>"70" && g_AuthLevel<>"99" && g_AuthLevel<>"999")) {
		
	// 장례식장 관계자일경우 세트코드 조회(MU 권한자, 관리자, 전산관리자 포함)
	}else {
	
	}
	
	// Grid sort 표시 초기화(필수)
	gfn_clearSortMark(tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_sclassList);
	
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	fv_sclassListColInfo	   = gfn_getDatasetInfo(ds_sclassList);			// ds_sclassList 데이터셋 컬럼정보
	
	ds_sclassList.clearData();
	
	ds_search.setColumn(0, "funeralHallCd", ds_search.getColumn(0, "upjangCd"));
	//ds_search.setColumn(0, "goodsClassCd", tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_goodsClass.value);
	//ds_search.setColumn(0, "setCd", tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd.value);
	
	var strSvcID    = "searchTab2SetList";
	var strURL      = "fs/fsf/funeralSaleGoodsInfoMgnt/selectTab2SetList.xdo";
	var strInDs     = "ds_search=ds_search:A";
	var strOutDs    = "ds_sclassList=ds_sclassList";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;
	
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_insert()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 입력처리
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_insert()
{	
		
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_delete()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 삭제처리
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_delete()
{
	
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_save()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 저장처리
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_save()
{
	// MU 권한자, 관리자, 전산관리자 일 경우, 기준정보 관리, 세트코드 생성 처리 허용
	if(g_AuthLevel=="70" || g_AuthLevel=="99" || g_AuthLevel=="999") {
		
	// 팀담당자일경우 기준정보 관리
 	}else if(gfn_posCase(g_UpjangNm, "장례식장", 0) == -1) {
 		
	// 장례식장 관계자일경우 세트코드 생성 처리
	}else{
		
	}
	
	if(!gfn_dsIsUpdated(ds_mealClassList) && !gfn_dsIsUpdated(ds_storeClassList)&& !gfn_dsIsUpdated(ds_etcClassList)
		&& !gfn_dsIsUpdated(ds_mclassList) && !gfn_dsIsUpdated(ds_sclassList) && !gfn_dsIsUpdated(ds_custClassList)) {
		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
		return;
	}
	
	// 저장시 Validation Check	
	if (gfn_validCheck(ds_mealClassList, ds_mealClassListValid) == false || gfn_validCheck(ds_storeClassList, ds_storeClassListVaild) == false || gfn_validCheck(ds_etcClassList, ds_etcClassListValid) == false || gfn_validCheck(ds_custClassList, ds_custClassListValid) == false)	return;
	
	for(var i=0; i<ds_storeClassList.rowcount; i++)
	{
		if(toNumber(ds_storeClassList.getColumn(i, "lastUprice")) <= 0)
		{
			gfn_alert("매점상품 금액은 0 보다 커야 합니다.");
			tab_funeralSaleGoodsInfoMgnt.tabindex = 0;
			tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_storeClassList.setFocus();
			ds_storeClassList.rowposition = i;
			return;
		}
	}
	
	for(var i=0; i<ds_etcClassList.rowcount; i++)
	{
		if((ds_etcClassList.getColumn(i, "salsIncludeYn")=="Y") && ((toNumber(ds_etcClassList.getColumn(i, "lastUprice")) <= 0)||(gfn_isNull(ds_etcClassList.getColumn(i, "lastUprice")))))
		{
			gfn_alert("매출포함여부가 'Y'인 기타상품 금액은 0 보다 커야 합니다.");
			tab_funeralSaleGoodsInfoMgnt.tabindex = 0;
			tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_etcClassList.setFocus();
			ds_etcClassList.rowposition = i;
			return;
		}
	}
	
	for(var i=0; i<ds_custClassList.rowcount; i++)
	{
		if((ds_custClassList.getColumn(i, "salsIncludeYn")=="Y") && ((toNumber(ds_custClassList.getColumn(i, "lastUprice")) <= 0)||(gfn_isNull(ds_custClassList.getColumn(i, "lastUprice")))))
		{
			gfn_alert("매출포함여부가 'Y'인 협력업체 금액은 0 보다 커야 합니다.");
			tab_funeralSaleGoodsInfoMgnt.tabindex = 0;
			tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_custClassList.setFocus();
			ds_custClassList.rowposition = i;
			return;
		}
	}
	
	// 세트명리스트 체크
	for(var i=0; i<ds_mclassList.rowcount; i++) {
		
		if(gfn_isNull(ds_mclassList.getColumn(i, "setNm"))) {
			gfn_alert("세트명이 누락되었습니다.");
			tab_funeralSaleGoodsInfoMgnt.tabindex = 1;
			tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.setFocus();
			ds_mclassList.rowposition = i;
			return;
		}
		
		if(ds_mclassList.getColumn(i, "useYn")=="N" && gfn_isNull(ds_mclassList.getColumn(i, "useStopDate"))) {
			gfn_alert("사용중지일자가 누락되었습니다.");
			tab_funeralSaleGoodsInfoMgnt.tabindex = 1;
			tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.setFocus();
			ds_mclassList.rowposition = i;
			return;
		}
	}
	
	// 세트 갯수 체크
	for(var i=0; i<ds_sclassList.rowcount; i++) {
		if(gfn_isNull(ds_sclassList.getColumn(i, "ea"))||toNumber(ds_sclassList.getColumn(i, "ea")) <= 0)
		{
			gfn_alert("세트 갯수가 누락되었습니다.");
			tab_funeralSaleGoodsInfoMgnt.tabindex = 1;
			tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_sclassList.setFocus();
			ds_sclassList.rowposition = i;
			return;
		}
	}
	
	var strSvcID    = "save";
	var strURL      = "fs/fsf/funeralSaleGoodsInfoMgnt/saveFuneralSaleGoodsInputList.xdo";
	var strInDs     = "ds_mealClassList=ds_mealClassList:U ds_storeClassList=ds_storeClassList:U ds_etcClassList=ds_etcClassList:U ";
	    strInDs    += "ds_mclassList=ds_mclassList:U ds_sclassList=ds_sclassList:U ds_custClassList=ds_custClassList:U"
	var strOutDs    = "";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;
	
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 단기 버튼 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_Close()
{
	this.close();
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, cdCnt, nErrorCode, strErrorMsg)
{	
	switch(strSvcID)
    {
		case "searchSetCdCombo":
			if(ds_setCd.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_setCd, fv_setCdColInfo);
			}
			
			var insRw1 = 0;
			if(ds_goodsClass.getColumn(0, "codeName") <> "전 체") {
				insRw1 = ds_goodsClass.insertRow(0);
				ds_goodsClass.setColumn(insRw1, "code", "");
				ds_goodsClass.setColumn(insRw1, "codeName", "전 체");
				tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_goodsClass.index = 0;
			}
			
			// 전체 삭제
			var insRw2 = ds_setCd.insertRow(0);
			ds_setCd.setColumn(insRw2, "setCd", "");
			ds_setCd.setColumn(insRw2, "setNm", "전 체");
			tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd.index = 0;
			
			break;
		
		case "searchFuneralSaleGoodsInputList" :
			if(ds_mealClassList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_mealClassList, fv_mealClassListColInfo);
			}
			if(ds_storeClassList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_storeClassList, fv_storeClassListColInfo);
			}
			if(ds_etcClassList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_etcClassList, fv_etcClassListColInfo);
			}
			if(ds_custClassList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_custClassList, fv_custClassListColInfo);
			}
			if(ds_mclassList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_mclassList, fv_mclassListColInfo);
			}
			if(ds_funeralGoodsList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_funeralGoodsList, fv_funeralGoodsListColInfo);
			}
			if(ds_sclassList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_sclassList, fv_sclassListColInfo);
			}
			if(ds_saleGoodsTotalList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_saleGoodsTotalList, fv_saleGoodsTotalListColInfo);
			}
			fn_searchCode();		
			break;	
         
        case "searchTab2GoodsList" :
			if(ds_funeralGoodsList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_funeralGoodsList, fv_funeralGoodsListColInfo);
			}
			
			break;		
	
		case "searchTab2SetList" :
			if(ds_sclassList.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_sclassList, fv_sclassListColInfo);
			}
			
			break;		    
        case "save":
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			fn_search();
			break;
    }
}


/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/
 /*
  ******************************************************************************************
  * 함  수  명   : getDtlCode
  * 입      력   : 없음
  * 반      환   : 없음
  * 기      능   : 상세코드 자동생성
  * 작  성  자   : 백정훈
  * 작성  일자   : 2015-04-03
  * ----------------------------------------------------------------------------------------
  * HISTORY    :
  ******************************************************************************************
  */
 function getDtlCode(curCode) {
 	
 	var dtlCode = "";
 	var curNum = toNumber(curCode)+1;
 	if(gfn_length(curNum) == 1) {
 		dtlCode = "00"+curNum;
 	}else if(gfn_length(curNum) == 2) {
 		dtlCode = "0"+curNum;
 	}else if(gfn_length(curNum) == 3) {
 		dtlCode = curNum.toString();
 	}
 	return dtlCode;
 }


/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 부서 세팅 
 *---------------------------------------------------------------------------------------------*/
//MU가 변경될 때에 대한 이벤트
function fn_muItemChangedEvent(obj, evt)
{
    edt_tmNm.setTmCode("");
    edt_upjangNm.setUpjangCode("");
        
    ds_search.setColumn(0,"muCd", edt_muNm.getMuCode());
    ds_search.setColumn(0,"muNm", edt_muNm.getMuName());
}

//TM이 변경될 때에 대한 이벤트
function fn_tmChangedEvent(obj, data)
{
    edt_upjangNm.setUpjangCode("");   
    ds_search.setColumn(0,"tmCd", edt_tmNm.getTmCode());
    ds_search.setColumn(0,"tmNm", edt_tmNm.getTmName());
}

//upjang이 변경될 때에 대한 이벤트
function fn_upjangChangedEvent(obj, data) {
    ds_search.setColumn(0,"upjangCd", edt_upjangNm.getUpjangCode());
    ds_search.setColumn(0,"upjangNm", edt_upjangNm.getUpjangName());
}


/*
 ******************************************************************************************
 * 함  수  명   : fn_searchSetDeleteYn()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 세트상품 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchSetDeleteYn(goodsClassCd, detailGooodsCd)
{
	// ds_check 에 값을 복사 후 조건 Dataset으로 이용
// 	ds_search.setColumn(0, "goodsClassCd", goodsClassCd);
// 	ds_search.setColumn(0, "detailGoodsCd", detailGooodsCd);

	ds_check.setColumn(0, "funeralHallCd", ds_search.getColumn(0, "funeralHallCd"));
	ds_check.setColumn(0, "goodsClassCd", goodsClassCd);
	ds_check.setColumn(0, "detailGoodsCd", detailGooodsCd);
	
    var strSvcID    = "searchSetDeleteYn";
    var strURL      = "fs/fsf/funeralSaleGoodsInfoMgnt/selectSetDeleteYn.xdo";
	var strInDs     = "ds_search=ds_check:A";
    var strOutDs    = "ds_goodsDeleteYn=ds_goodsDeleteYn";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
    
    return true;
}



/*
 ******************************************************************************************
 * 함  수  명   : fn_searchGoodsDeleteYn()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 상품분류 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchGoodsDeleteYn(goodsClassCd, detailGooodsCd)
{
	// ds_check 에 값을 복사 후 조건 Dataset으로 이용
// 	ds_search.setColumn(0, "goodsClassCd", goodsClassCd);
// 	ds_search.setColumn(0, "detailGoodsCd", detailGooodsCd);

	ds_check.setColumn(0, "funeralHallCd", ds_search.getColumn(0, "funeralHallCd"));
	ds_check.setColumn(0, "goodsClassCd", goodsClassCd);
	ds_check.setColumn(0, "detailGoodsCd", detailGooodsCd);
	
	
    var strSvcID    = "searchGoodsDeleteYn";
    var strURL      = "fs/fsf/funeralSaleGoodsInfoMgnt/selectGoodsDeleteYn.xdo";
	var strInDs     = "ds_search=ds_check:A";
    var strOutDs    = "ds_goodsDeleteYn=ds_goodsDeleteYn";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
    
    return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_plus_onclick()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 판매상품목록 행추가 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function btn_plus_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_insert(obj.name);
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_minus_onclick()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 판매상품목록 행삭제 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function btn_minus_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_delete(obj.name);
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_minus_onclick()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 판매상품목록 저장
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function btn_save_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_save();
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_rightMove_onclick()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : From 판매상품목록 To 판매상품군 등록 리스트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function btn_rightMove_onclick(obj:Button,  e:ClickEventInfo)
{
// 	var nCnt = ds_classGoodsMaster.getCaseCount("chk==1");
// 	if(nCnt==0)
// 	{
// 		gfn_alert("msg.err.grid.noselect");	// 선택된 항목이 없습니다.
// 		return;
// 	}else{	
// 	
// 		if(gfn_isNull(edt_goodsClassNm.value)) {
// 			gfn_alert("msg.err.validator.required", "세트명");
// 			edt_goodsClassNm.setFocus();
// 			return;
// 		}else if(gfn_isNull(edt_sortOrder.value)) {
// 			gfn_alert("msg.err.validator.required", "정렬순서");
// 			edt_sortOrder.setFocus();
// 			return;
// 		}
// 		
// 		ds_classGoodsTemp.clearData();
// 		var addRw = 0;
// 		for(var i=0; i<ds_classGoodsMaster.rowcount; i++) {
// 			
// 			if(ds_classGoodsMaster.getColumn(i, "chk")==1) {
// 				addRw = ds_classGoodsTemp.addRow();
// 				ds_classGoodsTemp.copyRow(addRw, ds_classGoodsMaster, i);
// 				ds_classGoodsTemp.setColumn(addRw, "goodsClassCd", edt_goodsClassCd.value);
// 				ds_classGoodsTemp.setColumn(addRw, "goodsClassNm", edt_goodsClassNm.value);
// 				ds_classGoodsTemp.setColumn(addRw, "sortOrder", edt_sortOrder.value);	
// 				ds_classGoodsTemp.setColumn(addRw, "detailGoodsCd", getDtlCode(gfn_nvl(ds_classGoodsTemp.getMax("detailGoodsCd"), "000")));
// 				ds_classGoodsTemp.setColumn(addRw, "remark", edt_remark.value);
// 				ds_classGoodsTemp.setColumn(addRw, "useYn", chk_useYn.value);
// 				ds_classGoodsTemp.setColumn(addRw, "useStopDate", cal_useStopDate.mae_cal.value);
// 			}
// 		}
// 		ds_classGoodsMaster.reset();
// 	}
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_leftMove_onclick()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : From 판매상품군 등록 리스트  To 판매상품목록
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function btn_leftMove_onclick(obj:Button,  e:ClickEventInfo)
{
	// 판매상품군 입력정보 체크
// 	if(gfn_isNull(edt_goodsClassNm.value)) {
// 		gfn_alert("msg.err.validator.required",sta_goodsClassNm.text);
// 		edt_goodsClassNm.setSelect();
// 		return;
// 	}
// 	
// 	if(gfn_isNull(edt_sortOrder.value)) {
// 		gfn_alert("msg.err.validator.required",sta_sortOrder.text);
// 		edt_sortOrder.setSelect();
// 		return;
// 	}	
// 	
// 	var nCnt = ds_classGoodsTemp.getCaseCount("chk==1");
// 	var addRw = 0;
// 	if(nCnt==0)
// 	{
// 		gfn_alert("msg.err.grid.noselect");	// 선택된 항목이 없습니다.
// 		return;
// 	}else{
// 			
// 		if (gfn_dsIsUpdated(ds_classGoodsTemp)) {
// 			var retValue = gfn_confirm("confirm.before.moveropos");
// 			if (retValue == false) return;
// 		}
// 		
// 		for(var i=0; i<ds_classGoodsTemp.rowcount; i++) {
// 			
// 			if(ds_classGoodsTemp.getColumn(i, "chk")==1) {
// 				
// 				addRw = ds_classGoodsInput.addRow();
// 				ds_classGoodsInput.copyRow(addRw, ds_classGoodsTemp, i);
// 				ds_classGoodsInput.setColumn(addRw, "funeralHallCd", g_Upjang);
// 			}
// 		}
// 		
// 		edt_goodsClassCd.value="";
// 		edt_goodsClassNm.value="";
// 		edt_sortOrder.value="";
// 		edt_remark.value="";
// 		chk_useYn.value = "N";
// 		cal_useStopDate.mae_cal.value ="";
// 		ds_classGoodsTemp.clearData();
// 	}
}

/*
 ******************************************************************************************
 * 함  수  명   : grd_onheadclick()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 모두선택/모두해제 체크박스
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function grd_onheadclick(obj:Grid, e:GridClickEventInfo)
{	
	if(obj.getCellProperty("Head" ,e.cell ,"edittype") == "checkbox")
	{
		gfn_setGridCheckAll(obj,e);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_enterDown
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : Grid 행추가
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_enterDown(obj:Grid, e:KeyEventInfo)
{
/*	
	var nRow = 0;
	if(e.keycode == 13) {
		
		if(gfn_isNull(edt_goodsClassNm.value)) {
			gfn_alert("msg.err.validator.required", "세트명");
			edt_goodsClassNm.setFocus();
			return;
		}else if(gfn_isNull(edt_sortOrder.value)) {
			gfn_alert("msg.err.validator.required", "정렬순서");
			edt_sortOrder.setFocus();
			return;
		}
		
		if(obj.name == "grd_classGoodsMaster") {
			var curRw = ds_classGoodsMaster.rowposition;
			nRow = ds_classGoodsTemp.addRow();
			ds_classGoodsTemp.copyRow(nRow, ds_classGoodsMaster, curRw);
			ds_classGoodsTemp.setColumn(nRow, "goodsClassCd", edt_goodsClassCd.value);
			ds_classGoodsTemp.setColumn(nRow, "goodsClassNm", edt_goodsClassNm.value);
			ds_classGoodsTemp.setColumn(nRow, "sortOrder", edt_sortOrder.value);	
			ds_classGoodsTemp.setColumn(nRow, "detailGoodsCd", getDtlCode(gfn_nvl(ds_classGoodsTemp.getMax("detailGoodsCd"), "000")));
			ds_classGoodsTemp.setColumn(nRow, "remark", edt_remark.value);
			ds_classGoodsTemp.setColumn(nRow, "useYn", chk_useYn.value);
			ds_classGoodsTemp.setColumn(nRow, "useStopDate", cal_useStopDate.mae_cal.value);			
		}else {			
			nRow = ds_classGoodsTemp.addRow();
			ds_classGoodsTemp.setColumn(nRow, "goodsClassCd", edt_goodsClassCd.value);
			ds_classGoodsTemp.setColumn(nRow, "goodsClassNm", edt_goodsClassNm.value);
			ds_classGoodsTemp.setColumn(nRow, "sortOrder", edt_sortOrder.value);	
		//	ds_classGoodsTemp.setColumn(nRow, "detailGoodsCd", getDtlCode(gfn_nvl(ds_classGoodsTemp.getMax("detailGoodsCd"), "000")));
			ds_classGoodsTemp.setColumn(nRow, "remark", edt_remark.value);
			ds_classGoodsTemp.setColumn(nRow, "useYn", chk_useYn.value);
			ds_classGoodsTemp.setColumn(nRow, "useStopDate", cal_useStopDate.mae_cal.value);
		}
	}
*/
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_addRow()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_addRow(obj:Button,e)
{
	var addRw = 0;
	// TAB1_식사류
	if(obj.name == "btn_addMealClassList") {
		addRw = ds_mealClassList.addRow();
		ds_mealClassList.setColumn(addRw, "funeralHallCd", ds_search.getColumn(0,"upjangCd"));
		ds_mealClassList.setColumn(addRw, "goodsClassCd", "004");
		ds_mealClassList.setColumn(addRw, "goodsClassNm", "밥류");
		ds_mealClassList.setColumn(addRw, "detailGoodsCd", "");
//		tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_mealClassList.showEditor(true);
//		tab_funeralSaleGoodsInfoMgnt.tabpage1.grd_mealClassList.setCellPos(0);
		
	// TAB1_매점류
	}else if(obj.name == "btn_addStoreClassList") {
		addRw = ds_storeClassList.addRow();
		ds_storeClassList.setColumn(addRw, "funeralHallCd",ds_search.getColumn(0,"upjangCd"));
		ds_storeClassList.setColumn(addRw, "goodsClassCd", "002");
		ds_storeClassList.setColumn(addRw, "goodsClassNm", "매점상품");
		ds_storeClassList.setColumn(addRw, "detailGoodsCd", "");
	
	// TAB1_기타
	}else if(obj.name == "btn_addEtcClassList") {
		addRw = ds_etcClassList.addRow();
		ds_etcClassList.setColumn(addRw, "funeralHallCd",ds_search.getColumn(0,"upjangCd"));
		ds_etcClassList.setColumn(addRw, "goodsClassCd", "003");
		ds_etcClassList.setColumn(addRw, "goodsClassNm", "기타");
		ds_etcClassList.setColumn(addRw, "detailGoodsCd", "");
		ds_etcClassList.setColumn(addRw, "salsIncludeYn", "N");
	
	// TAB1_협력업체
	}else if(obj.name == "btn_addCustClassList") {
		addRw = ds_custClassList.addRow();
		ds_custClassList.setColumn(addRw, "funeralHallCd",ds_search.getColumn(0,"upjangCd"));
		ds_custClassList.setColumn(addRw, "goodsClassCd", "006");
		ds_custClassList.setColumn(addRw, "goodsClassNm", "협력업체");
		ds_custClassList.setColumn(addRw, "detailGoodsCd", "");
		ds_custClassList.setColumn(addRw, "salsIncludeYn", "N");
	
	
	// TAB2_세트명 등록
	}else if(obj.name == "btn_addMClassList") {
		//var rowCnt = ds_mclassList.getRowCount();
		//ds_mclassList.rowposition = rowCnt - 1;
		//ds_mclassList.rowposition = rowCnt;
		addRw = ds_mclassList.addRow();
		ds_mclassList.setColumn(addRw, "funeralHallCd", ds_search.getColumn(0,"upjangCd"));
		ds_mclassList.setColumn(addRw, "upjangnm", ds_search.getColumn(0,"upjangNm"));
		ds_mclassList.setColumn(addRw, "setNm", "");
		ds_mclassList.setColumn(addRw, "useYn", "Y");	
	
	}
	
}


/*
 ******************************************************************************************
 * 함  수  명   : fn_remove()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_remove(obj:Button,  e:ClickEventInfo)
{
	if((obj.name == "btn_deleteMealClassList")||(obj.name == "btn_deleteStoreClassList")||(obj.name == "btn_deleteEtcClassList")||(obj.name == "btn_deleteCustClassList")) {
		// 삭제 가능여부 체크
				
		if(obj.name == "btn_deleteMealClassList") {
			
			if(ds_mealClassList.rowcount==0 || ds_mealClassList.rowposition < 0) {
				gfn_alert("식사류 상품리스트에 상품이 존재하지 않거나, 선택되지 않았습니다.");
				return;
			}

 			// 세트상품 이력 체크
			var rtn = fn_searchSetDeleteYn(ds_mealClassList.getColumn(ds_mealClassList.rowposition, "goodsClassCd"),ds_mealClassList.getColumn(ds_mealClassList.rowposition, "detailGoodsCd"));
			
			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
				// 삭제처리
				if(ds_goodsDeleteYn.getColumn(0, "delYn")!="Y") {
 					gfn_alert("세트상품에 포함된 상품은 삭제할 수 없습니다.");
					return;
				}	
			}
			
 			// 판매상품 이력 체크
 			var rtn = fn_searchGoodsDeleteYn(ds_mealClassList.getColumn(ds_mealClassList.rowposition, "goodsClassCd"),ds_mealClassList.getColumn(ds_mealClassList.rowposition, "detailGoodsCd"));
 			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
 				if(ds_goodsDeleteYn.getColumn(0, "delYn")=="Y") {
 					ds_mealClassList.deleteRow(ds_mealClassList.rowposition);
 				}else {
 					gfn_alert("판매이력이 있는 상품은 삭제할 수 없습니다.");
 					alert("123");
 					return;
 				}
 			}
			
			
		}else if(obj.name == "btn_deleteStoreClassList") {
			
			if(ds_storeClassList.rowcount==0 || ds_storeClassList.rowposition < 0) {
				gfn_alert("매점상품 리스트에 상품이 존재하지 않거나, 선택되지 않았습니다.");
				return;
			}
			

 			// 세트상품 이력 체크
 			var rtn = fn_searchSetDeleteYn(ds_storeClassList.getColumn(ds_storeClassList.rowposition, "goodsClassCd"),ds_storeClassList.getColumn(ds_storeClassList.rowposition, "detailGoodsCd"));
 			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
 				if(ds_goodsDeleteYn.getColumn(0, "delYn")!="Y") {
 					gfn_alert("세트상품에 포함된 상품은 삭제할 수 없습니다.");
 					return;
 				}
 			}

			// 판매상품 이력 체크
			var rtn = fn_searchGoodsDeleteYn(ds_storeClassList.getColumn(ds_storeClassList.rowposition, "goodsClassCd"),ds_storeClassList.getColumn(ds_storeClassList.rowposition, "detailGoodsCd"));
			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
				if(ds_goodsDeleteYn.getColumn(0, "delYn")=="Y") {
					ds_storeClassList.deleteRow(ds_storeClassList.rowposition);
				}else {
					gfn_alert("판매이력이 있는 상품은 삭제할 수 없습니다.");
					return;
				}
			}
			
		}else if(obj.name == "btn_deleteEtcClassList") {
			
			if(ds_etcClassList.rowcount==0 || ds_etcClassList.rowposition < 0) {
				gfn_alert("기타상품 리스트에 상품이 존재하지 않거나, 선택되지 않았습니다.");
				return;
			}
			
 			// 세트상품 이력 체크
			var rtn = fn_searchSetDeleteYn(ds_etcClassList.getColumn(ds_etcClassList.rowposition, "goodsClassCd"),ds_etcClassList.getColumn(ds_etcClassList.rowposition, "detailGoodsCd"));
			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
				
				if(ds_goodsDeleteYn.getColumn(0, "delYn")!="Y") {
 					gfn_alert("세트상품에 포함된 상품은 삭제할 수 없습니다.");
					return;
				}
			}
			
			// 판매상품 이력 체크
			var rtn = fn_searchGoodsDeleteYn(ds_etcClassList.getColumn(ds_etcClassList.rowposition, "goodsClassCd"),ds_etcClassList.getColumn(ds_etcClassList.rowposition, "detailGoodsCd"));
			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
				if(ds_goodsDeleteYn.getColumn(0, "delYn")=="Y") {
					ds_etcClassList.deleteRow(ds_etcClassList.rowposition);
				}else {
					gfn_alert("판매이력이 있는 상품은 삭제할 수 없습니다.");
					return;
				}
			}
			
			
	
		}else if(obj.name == "btn_deleteCustClassList") {
			if(ds_custClassList.rowcount==0 || ds_custClassList.rowposition < 0) {
				gfn_alert("협력업체상품 리스트에 상품이 존재하지 않거나, 선택되지 않았습니다.");
				return;
			}
 			// 세트상품 이력 체크
			var rtn = fn_searchSetDeleteYn(ds_custClassList.getColumn(ds_custClassList.rowposition, "goodsClassCd"),ds_custClassList.getColumn(ds_custClassList.rowposition, "detailGoodsCd"));
			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
				
				if(ds_goodsDeleteYn.getColumn(0, "delYn")!="Y") {
 					gfn_alert("세트상품에 포함된 상품은 삭제할 수 없습니다.");
					return;
				}
			}				
			
			// 판매상품 이력 체크
			var rtn = fn_searchGoodsDeleteYn(ds_custClassList.getColumn(ds_custClassList.rowposition, "goodsClassCd"),ds_custClassList.getColumn(ds_custClassList.rowposition, "detailGoodsCd"));
			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
				if(ds_goodsDeleteYn.getColumn(0, "delYn")=="Y") {
					ds_custClassList.deleteRow(ds_custClassList.rowposition);
				}else {
					gfn_alert("판매이력이 있는 상품은 삭제할 수 없습니다.");
					return;
				}
			}
			
			
		}	
	}
	
	// TAB2_세트명 삭제
	if(obj.name == "btn_deleteMClassList") {		
		
		if(ds_mclassList.rowcount==0 || ds_mclassList.rowposition < 0) {
			gfn_alert("세트명 리스트에 목록이 존재하지 않거나, 선택되지 않았습니다.");
			return;
		}
		
		ds_mclassList.deleteRow(ds_mclassList.rowposition);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchStoreGoodsPopup()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchStoreGoodsPopup(obj:Button,  e:ClickEventInfo)
{
	var strId       = "FuneralSaleStoreGoodsPopup";
	var strURL      = "X_FSF::FuneralSaleStoreGoodsPopup.xfdl";
	var objArgument = {argFuneralHallCd:ds_search.getColumn(0, "upjangCd")};
	var nWidth      = 646;
	var nHeight     = 450;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = true;
	var bShowTitle  = true;
	var strAlign    = "-1";
	// 리턴값을 배열로 받을 경우
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_moveRight()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 세트등록 이동
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_moveRight(obj:Button,  e:ClickEventInfo)
{
	// 생성기준 combo 체크
	if(gfn_nvl(ds_search.getColumn(0, "setCd"))=="") {
		gfn_alert("생성대상 세트명이 선택되지 않았습니다.");
		tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd.setFocus();
		return;
	}

	
// 	if(gfn_isNull(ds_search.getColumn(0, "setCd"))) {
// 		gfn_alert("생성대상 세트명이 선택되지 않았습니다.");
// 		tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd.setFocus();
// 		return;
// 	}
	
	
	
	var nCnt = ds_funeralGoodsList.getCaseCount("chk==1");
	if(nCnt==0) {
		gfn_alert("msg.err.grid.noselect");	// 선택된 항목이 없습니다.
		return;
	}else if(ds_mclassList.rowposition < 0) {
		
		gfn_alert("생성대상 세트명이 존재하지 않습니다.");
		return;

	}else {
		
		var addRw = 0;
		var strExpr  = "";
		var fndRw = 0;	
		for(var i=0; i<ds_funeralGoodsList.rowcount; i++) {
			
			if(ds_funeralGoodsList.getColumn(i, "chk")==1) {
				
				strExpr  = "funeralHallCd=='"+ds_mclassList.getColumn(ds_mclassList.rowposition, "funeralHallCd")
				           +"'&&setCd=='"+ds_search.getColumn(0, "setCd")
				           +"'&&goodsClassCd=='"+ds_funeralGoodsList.getColumn(i, "goodsClassCd")
						   +"'&&detailGoodsCd=='"+ds_funeralGoodsList.getColumn(i, "detailGoodsCd")+"'";
				fndRw = ds_sclassList.findRowExpr(strExpr);
				
				// 중복된건 존재시
				if(fndRw >=0) {
					
					gfn_alert("등록대상에 중복건이 존재합니다.");
					ds_funeralGoodsList.rowposition = i;
					return;				
				}
			}
		}
		
		for(var i=0; i<ds_funeralGoodsList.rowcount; i++) {
			
			if(ds_funeralGoodsList.getColumn(i, "chk")==1) {				
				
				addRw = ds_sclassList.addRow();				
				ds_sclassList.setColumn(addRw, "funeralHallCd", ds_mclassList.getColumn(ds_mclassList.rowposition, "funeralHallCd"));
				ds_sclassList.setColumn(addRw, "setCd", ds_search.getColumn(0, "setCd"));
				
				ds_sclassList.setColumn(addRw, "setNm", tab_funeralSaleGoodsInfoMgnt.tabpage2.cbo_setCd.text);	
				
				ds_sclassList.setColumn(addRw, "goodsClassCd", ds_funeralGoodsList.getColumn(i, "goodsClassCd"));
				ds_sclassList.setColumn(addRw, "detailGoodsCd", ds_funeralGoodsList.getColumn(i, "detailGoodsCd"));
				ds_sclassList.setColumn(addRw, "detailGoodsNm", ds_funeralGoodsList.getColumn(i, "detailGoodsNm"));
				ds_sclassList.setColumn(addRw, "unit", ds_funeralGoodsList.getColumn(i, "unit"));
				//ds_sclassList.setColumn(addRw, "ea", ds_funeralGoodsList.getColumn(i, "ea"));
				ds_sclassList.setColumn(addRw, "lastUprice", ds_funeralGoodsList.getColumn(i, "lastUprice"));
				ds_sclassList.setColumn(addRw, "useYn", "Y");			
			}
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_moveLeft()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 생성대상 삭제 처리
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_moveLeft(obj:Button,  e:ClickEventInfo)
{
	// 판매상품 이력 체크
	for(var i=ds_sclassList.rowcount; i>=0; i--) {
		if(ds_sclassList.getColumn(i, "chk")==1) {
		
 			// 판매상품 이력 체크
 			var rtn = fn_searchGoodsDeleteYn(ds_sclassList.getColumn(i, "goodsClassCd"),ds_sclassList.getColumn(i, "detailGoodsCd"));
 			if(rtn==true && ds_goodsDeleteYn.rowcount>0) {
 				if(ds_goodsDeleteYn.getColumn(0, "delYn")!="Y") {
 					gfn_alert("판매이력이 있는 상품은 삭제할 수 없습니다.");
 					ds_sclassList.rowposition = i;
 					return;
 				}
 			}
		}
	}

	for(var i=ds_sclassList.rowcount; i>=0; i--) {
		
		if(ds_sclassList.getColumn(i, "chk")==1) {
			ds_sclassList.deleteRow(i);		
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_getSetCode()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 세트코드 display
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_getSetCode(obj:Combo, e:ItemChangeEventInfo)
{
	tab_funeralSaleGoodsInfoMgnt.tabpage2.edt_setCd.value = e.postvalue;
	
	var v_value = tab_funeralSaleGoodsInfoMgnt.tabpage2.edt_setCd.value;
	
	if (v_value == '') {
		this.tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_sclassList.setFormatColProperty(2,"size",97);
	} else {
		this.tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_sclassList.setFormatColProperty(2,"size",0);
	}
	
	fn_searchTab2SetList();
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 그리드 생성 CHECK 에 대한 활성화/비활성화 처리
 *---------------------------------------------------------------------------------------------*/
function fn_checkSet(nRow)
{
	var edit_type = "";
	
	if (ds_sclassList.getColumn(nRow, "flag")=="ALL") edit_type = "none";
	else edit_type = "checkbox";
		
	return edit_type;
}


/*----------------------------------------------------------------------------------------------
 * 설명      : tab2 상품군 콤보 컨트롤시 재조회
 *---------------------------------------------------------------------------------------------*/
function tab_funeralSaleGoodsInfoMgnt_tabpage2_cbo_goodsClass_oncloseup(obj:Combo, e:ComboCloseUpEventInfo)
{
	fn_searchTab2GoodsList();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_grdEnter()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : Grid 추가
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_grdEnter(obj:Grid, e:KeyEventInfo)
{
	if(e.keycode==13) {
		var ckInfo = new EventInfo();
		if(obj.name == "grd_mealClassList") {
			fn_addRow(tab_funeralSaleGoodsInfoMgnt.tabpage1.btn_addMealClassList,  ckInfo);			
		}else if(obj.name == "grd_storeClassList") {
			fn_addRow(tab_funeralSaleGoodsInfoMgnt.tabpage1.btn_addStoreClassList,  ckInfo);
		}else if(obj.name == "grd_etcClassList") {
			fn_addRow(tab_funeralSaleGoodsInfoMgnt.tabpage1.btn_addEtcClassList,  ckInfo);
		}else if(obj.name == "grd_mclassList") {
			fn_addRow(tab_funeralSaleGoodsInfoMgnt.tabpage2.btn_addMClassList,  ckInfo);
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_mClsCloseUp()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 사용중지여부 선택에 따른 사용중지일자 설정.
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_mClsCloseUp(obj:Grid, e:GridEditEventInfo)
{
 	if(!gfn_isNull(e.value) && (e.value=="N") && gfn_isNull(ds_mclassList.getColumn(e.row, "useStopDate"))) {
   		ds_mclassList.setColumn(e.row, "useStopDate", fv_sToday);
  		setTimer(111, 50);
  		curRw = e.row;
  	}else if(!gfn_isNull(e.value) && e.value=="Y"){
   		ds_mclassList.setColumn(e.row, "useStopDate", "");
  		setTimer(112, 50);
  		curRw = e.row;
   	}
}

var curRw = 0;
function ds_mclassList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{	
	if(e.columnid=="useYn" && e.newvalue=="N") {
		setTimer(111, 50);
		curRw = e.row;
	}else if(e.columnid=="useYn" && e.newvalue=="Y") {
		setTimer(112, 50);
		curRw = e.row;
	}
}

function FuneralSaleGoodsInfoMgnt_ontimer(obj:Form, e:TimerEventInfo)
{
	if(e.timerid == 111) {
		killTimer(111);
		ds_mclassList.rowposition = curRw;
		ds_mclassList.enableevent = false;
		ds_mclassList.setColumn(curRw, "useStopDate", fv_sToday);
		tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.setCellPos(4);
		//tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.showEditor(true);
		tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.setEditText(fv_sToday);
		ds_mclassList.enableevent = true;		
		
	}else if(e.timerid == 112) {
		killTimer(112);
		ds_mclassList.rowposition = curRw;
		ds_mclassList.enableevent = false;
		ds_mclassList.setColumn(curRw, "useStopDate", "");
		tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.setCellPos(4);
		//tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.showEditor(true);
		tab_funeralSaleGoodsInfoMgnt.tabpage2.grd_mclassList.setEditText("");
		ds_mclassList.enableevent = true;		
	}
}
]]></Script>
  </Form>
</FDL>
