<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSA00050E" onkeydown="fn_form_OnKeyDown" onload="form_onload" titletext="식단기본정보설정" position="absolute 0 0 1252 725" scrollbars="none">
    <Layouts>
      <Layout>
        <Tab id="Tab00" onchanged="Tab00_OnChanged" taborder="3" tabstop="false" position="absolute 0 84 1237 710" showextrabutton="false" canchange="Tab00_canchange" anchor="all">
          <Tabpages>
            <Tabpage id="tab1" taborder="1" text="업장별 식당관리" position="absolute 2 24 976 594" scrollbars="none">
              <Layouts>
                <Layout width="1235" height="637">
                  <Button id="btn_Add" onclick="Tab00_tab1_btn_Add_OnClick" taborder="2" text="" position="absolute 248 276 269 297" class="btn_WF_rightMove" image=""/>
                  <Grid autofittype="col" binddataset="ds_hall_class" enable="true" cellsizebandtype="allband" id="grd_hall_class" useinputpanel="false" autofitminwidth="100" selecttype="row" oncelldblclick="Tab00_tab1_grd_hall_class_OnCellDblClick" taborder="-1" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 10 31 238 589" readonly="true" anchor="left top bottom">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="52"/>
                          <Column size="120"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="0"/>
                        </Columns>
                        <Rows>
                          <Row size="35" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="text" text="코드"/>
                          <Cell col="1" displaytype="text" text="식 당 군"/>
                          <Cell col="2" displaytype="text" text="과면세"/>
                          <Cell col="3" displaytype="text" text="영양기준"/>
                          <Cell col="4" displaytype="text" text="연회여부"/>
                          <Cell col="5" displaytype="text" text="코너구분"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" style="align:left;background:white;background2:white;" text="bind:CODE"/>
                          <Cell col="1" displaytype="text" style="align:left;background:white;background2:white;" text="bind:CODE_NAME"/>
                          <Cell col="2" displaytype="text" style="align:left;" text="bind:SET1"/>
                          <Cell col="3" displaytype="text" style="align:left;" text="bind:SET2"/>
                          <Cell col="4" displaytype="text" style="align:left;" text="bind:SET3"/>
                          <Cell col="5" displaytype="text" style="align:left;" text="bind:SET4"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Grid autoenter="select" binddataset="ds_HALL_MST" readonly="false" enable="true" id="grd_HALL_MST" useinputpanel="false" onmousemove="Tab00_tab1_grd_HALL_MST_OnMouseOver" taborder="5" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 279 31 1225 588" selecttype="row" autofittype="col" anchor="all">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="180"/>
                          <Column size="160"/>
                          <Column size="200"/>
                          <Column size="77"/>
                          <Column size="120"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="35"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="0"/>
                        </Columns>
                        <Rows>
                          <Row size="35" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="text" text="UPJANG"/>
                          <Cell col="1" displaytype="text" text="UPJANGNM"/>
                          <Cell col="2" displaytype="text" text="HALL_CD"/>
                          <Cell col="3" displaytype="text" text="HALL_CLASS"/>
                          <Cell col="4" displaytype="text" text="식당명"/>
                          <Cell col="5" displaytype="text" text="입고처"/>
                          <Cell col="6" displaytype="text" text="비고(TEXT)"/>
                          <Cell col="7" displaytype="text" text="최종&#10;수정일"/>
                          <Cell col="8" displaytype="text" text="최종&#10;수정자"/>
                          <Cell col="9" displaytype="text" text="레시피&#10;분류"/>
                          <Cell col="10" displaytype="text" text="병원&#10;식단주기"/>
                          <Cell col="11" displaytype="text" text="사용&#10;여부"/>
                          <Cell col="12" displaytype="text" text="OUTVAT_YN"/>
                          <Cell col="13" displaytype="text" text="NUT_MGMT_TYPE"/>
                          <Cell col="14" displaytype="text" text="CATER_YN"/>
                          <Cell col="15" displaytype="text" text="CORNER_TYPE"/>
                          <Cell col="16" displaytype="text" text="MENU_CYCLE_TYPE"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="align:left;" text="bind:UPJANG"/>
                          <Cell col="1" displaytype="text" style="align:left;" text="bind:UPJANGNM"/>
                          <Cell col="2" displaytype="text" style="align:left;" text="bind:HALL_CD"/>
                          <Cell col="3" displaytype="text" style="align:left;" text="bind:HALL_CLASS"/>
                          <Cell col="4" displaytype="text" style="align:left;background:white;background2:white;" text="bind:HALL_NAME"/>
                          <Cell col="5" displaytype="combo" edittype="combo" style="align:left;background:white;background2:white;" text="bind:SUBINV_CODE" combodataset="ds_subinv" combocodecol="SUBINV_CODE" combodatacol="SUBINV_NAME" combodisplayrowcount="10"/>
                          <Cell col="6" displaytype="text" edittype="normal" style="align:left;background:white;background2:white;" text="bind:REMARK" editlimit="200"/>
                          <Cell col="7" displaytype="date" style="align:center;background:white;background2:white;" text="bind:UDATE"/>
                          <Cell col="8" displaytype="text" style="align:center;background:white;background2:white;" text="bind:UUSER"/>
                          <Cell col="9" displaytype="combo" edittype="combo" style="align:left;background:white;background2:white;" text="bind:RECIPE_CLASS" combodataset="ds_recipe" combocodecol="RECIPE_CLASS" combodatacol="RECIPE_NAME" combodisplayrowcount="10"/>
                          <Cell col="10" displaytype="combo" edittype="combo" style="align:left;background:white;background2:white;" text="bind:MENU_CYCLE" combodataset="ds_menu_cycle" combocodecol="CODE" combodatacol="CODE_NAME" combodisplayrowcount="10"/>
                          <Cell col="11" displaytype="checkbox" edittype="checkbox" style="background:white;background2:white;" text="bind:USE_YN"/>
                          <Cell col="12" displaytype="text" style="align:left;" text="bind:OUTVAT_YN"/>
                          <Cell col="13" displaytype="text" style="align:left;" text="bind:NUT_MGMT_TYPE"/>
                          <Cell col="14" displaytype="text" style="align:left;" text="bind:CATER_YN"/>
                          <Cell col="15" displaytype="text" style="align:left;" text="bind:CORNER_TYPE"/>
                          <Cell col="16" displaytype="text" style="align:left;" text="bind:MENU_CYCLE_TYPE"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static22" text="식당리스트" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 287 13 615 28" anchor="left top"/>
                  <Static id="Static00" text="식당군" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 10 13 207 28" anchor="left top"/>
                  <Static id="Static01" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 152 10 173"/>
                  <Static id="Static04" text="h10" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 0 627 144 637" anchor="top right"/>
                  <Static id="Static05" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1225 160 1235 181"/>
                  <Static id="Static08" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 1225 13" anchor="left top"/>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 598" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static10" visible="false" position="absolute 1225 0 1235 598" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static06" visible="false" position="absolute 10 588 1225 598" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static02" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 948 31" anchor="left top"/>
                  <Static id="Static03" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 238 13 248 588"/>
                  <Static id="Static09" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 269 13 279 588"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab2" scrollbars="none" text="식단운영정보관리">
              <Layouts>
                <Layout width="1235" height="637">
                  <Static id="Static24" class="sta_WFDA_Labelbg" position="absolute 800 57 1225 84" anchor="default"/>
                  <Static id="Static15" text="식단리스트" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 10 182 338 197" anchor="left top"/>
                  <CheckBox id="chk_SHOW_USE" taborder="12" text="사용식단만 보기" onclick="Tab00_tab2_chk_SHOW_USE_OnClick" position="absolute 1114 181 1223 196" anchor="top right"/>
                  <Static id="Static16" text="식당선택(하나만)" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 10 13 162 26" anchor="left top"/>
                  <Static id="Static17" text="끼니선택(다중)" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 210 13 319 26" anchor="left top"/>
                  <Static id="Static18" text="코너선택(다중)" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 353 13 484 26" anchor="left top"/>
                  <Static id="Static19" text="생성목록(삭제:선택Delete)" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 502 13 705 26" anchor="left top"/>
                  <Grid id="grd_HALL_DTL" taborder="13" tabstop="false" binddataset="ds_HALL_DTL" wheelscrollrow="1" autoenter="select" useinputpanel="false" cellmovingtype="col" autofittype="col" oncellclick="Tab00_tab2_grd_HALL_DTL_OnCellClick" onheadclick="grd_List_OnHeadClick" position="absolute 9 200 1225 588" anchor="all">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="0"/>
                          <Column size="30"/>
                          <Column size="0"/>
                          <Column size="133"/>
                          <Column size="50"/>
                          <Column size="104"/>
                          <Column size="138"/>
                          <Column size="80"/>
                          <Column size="64"/>
                          <Column size="64"/>
                          <Column size="68"/>
                          <Column size="70"/>
                          <Column size="40"/>
                          <Column size="40"/>
                          <Column size="50"/>
                          <Column size="50"/>
                          <Column size="38"/>
                          <Column size="70"/>
                          <Column size="100"/>
                          <Column size="34"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell rowspan="2" displaytype="text" text="UPJANG"/>
                          <Cell col="1" rowspan="2" displaytype="text" class="head_Excel"/>
                          <Cell col="2" rowspan="2" displaytype="text" text="HALL_CD"/>
                          <Cell col="3" rowspan="2" displaytype="text" class="grd_WF_Essential" text="식당명"/>
                          <Cell col="4" rowspan="2" displaytype="text" class="grd_WF_Essential" text="끼니"/>
                          <Cell col="5" rowspan="2" displaytype="text" class="grd_WF_Essential" text="코너"/>
                          <Cell col="6" rowspan="2" displaytype="text" text="코너정의&#10;(TEXT)"/>
                          <Cell col="7" rowspan="2" displaytype="text" class="grd_WF_Essential" text="배식방법"/>
                          <Cell col="8" rowspan="2" displaytype="text" class="grd_WF_Essential" text="식단가&#10;VAT제외"/>
                          <Cell col="9" rowspan="2" displaytype="text" class="grd_WF_Essential" text="평균식수"/>
                          <Cell col="10" rowspan="2" class="grd_WF_Essential" text="소요량&#13;&#10;기준(%)" taborder="undefined"/>
                          <Cell col="11" rowspan="2" displaytype="text" class="grd_WF_Essential" text="자재&#10;입고일"/>
                          <Cell col="12" colspan="2" text="입고제외일" taborder="undefined"/>
                          <Cell col="14" colspan="2" displaytype="text" class="grd_WF_Essential" text="배식시간">
                            <Cell colspan="2" displaytype="text" text="배식시간"/>
                          </Cell>
                          <Cell col="16" rowspan="2" displaytype="text" text="영양&#10;기준"/>
                          <Cell col="17" rowspan="2" displaytype="text" text="최종&#10;수정일"/>
                          <Cell col="18" rowspan="2" displaytype="text" text="최종&#10;수정자"/>
                          <Cell col="19" rowspan="2" displaytype="text" text="사용&#10;여부"/>
                          <Cell row="1" col="12" text="토"/>
                          <Cell row="1" col="13" text="일"/>
                          <Cell row="1" col="14" displaytype="text" text="시작"/>
                          <Cell row="1" col="15" displaytype="text" text="종료"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="align:left;" text="bind:UPJANG"/>
                          <Cell col="1" displaytype="text" style="align:left;background2:white;" expr="expr:currow+1"/>
                          <Cell col="2" displaytype="text" style="align:left;" text="bind:HALL_CD"/>
                          <Cell col="3" displaytype="text" style="align:left;background2:white;" text="bind:HALL_NAME" suppress="1"/>
                          <Cell col="4" displaytype="combo" edittype="expr:setEditExpr(iif( expr_GetRowType(currow) == &quot;insert&quot;, &quot;combo&quot;, &quot;none&quot; ))" editfilter="expr:setfilterExpr(iif( expr_GetRowType(currow) == &quot;insert&quot;, &quot;combo&quot;, &quot;none&quot; ))" style="align:center;background2:white;" text="bind:MEAL" suppress="2" combodataset="ds_meal" combocodecol="CODE" combodatacol="CODE_NAME" combodisplayrowcount="10" combodisplaynulltext="true"/>
                          <Cell col="5" displaytype="combo" edittype="expr:setEditExpr(iif( expr_GetRowType(currow) == &quot;insert&quot;, &quot;combo&quot;, &quot;none&quot; ))" editfilter="expr:setfilterExpr(iif( expr_GetRowType(currow) == &quot;insert&quot;, &quot;combo&quot;, &quot;none&quot; ))" style="align:left;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:CORNER" combodataset="ds_corner_grd" combocodecol="CODE" combodatacol="CODE_NAME" combodisplayrowcount="10"/>
                          <Cell col="6" displaytype="text" edittype="normal" style="align:left;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:CORNER_DESC" editlimit="180"/>
                          <Cell col="7" displaytype="combo" edittype="combo" style="align:center;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:RATION_METHOD" combodataset="ds_ration_method" combocodecol="CODE" combodatacol="CODE_NAME" combodisplayrowcount="10" combodisplaynulltext="true"/>
                          <Cell col="8" displaytype="number" edittype="expr:setEditExpr(iif(gfn_subStr(HALL_CD,0,3)=='005','none','masknumber'))" editfilter="expr:setfilterExpr(iif(gfn_subStr(HALL_CD,0,3)=='005','none','number'))" style="align:right middle;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));color:EXPR(iif(gfn_subStr(HALL_CD,0,3)=='005','white',-1));" text="bind:MEAL_UPRICE" mask="###,###,###.##" editautoselect="true" editlimitbymask="both"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" editfilter="number" style="align:right middle;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:AVG_MEAL_QTY" mask="###,###,###.##" editautoselect="true" editlimitbymask="both"/>
                          <Cell col="10" displaytype="number" edittype="masknumber" style="background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:NEED_RATE" mask="###.##" editlimit="6" editautoselect="true" editlimitbymask="both"/>
                          <Cell col="11" displaytype="combo" edittype="combo" style="align:center;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:D_DAY" combodataset="ds_d_day" combocodecol="SET1" combodatacol="CODE_NAME" combodisplayrowcount="10"/>
                          <Cell col="12" displaytype="checkbox" edittype="checkbox" style="background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:SAT_YN"/>
                          <Cell col="13" displaytype="checkbox" edittype="checkbox" style="background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:SUN_YN"/>
                          <Cell col="14" displaytype="text" edittype="normal" editfilter="number" style="align:center;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:FIRST_START_TIME" mask="##:##" editlimit="4" editlimitbymask="none"/>
                          <Cell col="15" displaytype="text" edittype="normal" editfilter="number" style="align:center;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:FIRST_END_TIME" mask="##:##" editlimit="4" editlimitbymask="none"/>
                          <Cell col="16" displaytype="button" style="align:center;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));color:EXPR(iif(NUT_YN!='Y','red',-1));" expr="expr:iif(NUT_YN!='Y','입력','수정')"/>
                          <Cell col="17" displaytype="date" style="align:center;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:UDATE"/>
                          <Cell col="18" displaytype="text" style="align:center;background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:UUSER"/>
                          <Cell col="19" displaytype="checkbox" edittype="checkbox" style="background:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));background2:EXPR(iif(USE_YN&lt;&gt;'1','#EEEEEE','white'));" text="bind:USE_YN"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <ListBox id="lstMEAL" taborder="1" tabstop="false" multiselect="true" innerdataset="@ds_meal" codecolumn="CODE" datacolumn="CODE_NAME" onitemchanged="Tab00_tab2_lstMEAL_OnChanged" position="absolute 210 31 343 172" scrollbars="autovert"/>
                  <ListBox id="lstCORNER" taborder="2" tabstop="false" multiselect="true" innerdataset="@ds_corner" codecolumn="CODE" datacolumn="CODE_NAME" onitemchanged="Tab00_tab2_lstCORNER_OnChanged" onitemclick="Tab00_tab2_lstCORNER_OnClick" position="absolute 353 31 492 172" scrollbars="autovert"/>
                  <ListBox id="lstHALL" taborder="0" tabstop="false" index="1" innerdataset="ds_HALL_MST" codecolumn="HALL_CD" datacolumn="HALL_NAME" onitemchanged="Tab00_tab2_lstHALL_OnChanged" position="absolute 10 31 200 172"/>
                  <ListBox id="lstMEAL_CORNER" taborder="3" tabstop="false" multiselect="true" innerdataset="ds_meal_corner" codecolumn="MEAL_CORNER_CODE" datacolumn="MEAL_CORNER_NAME" onkeydown="Tab00_tab2_lstMEAL_CORNER_OnKeyDown" position="absolute 502 31 681 172" onitemclick="Tab00_tab2_lstMEAL_CORNER_onitemclick"/>
                  <MaskEdit id="mEd_FIRST_START_TIME" taborder="8" type="string" mask="##:##" canchange="Tab00_tab2_mEd_FIRST_START_TIME_CanChange" position="absolute 1069 60 1222 81" style="align:center;" autoselect="true" anchor="default"/>
                  <MaskEdit id="mEd_MEAL_UPRICE" taborder="5" position="absolute 803 60 955 81" autoselect="true" anchor="default" mask="###,###,###.##" limitbymask="both"/>
                  <Static id="Static05" text="h10" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 0 627 144 637" anchor="top right"/>
                  <Static id="Static08" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 1009 13" anchor="left top"/>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 598" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static10" visible="false" position="absolute 1225 0 1235 598" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static04" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 948 31" anchor="left top"/>
                  <Static id="Static22" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 10 172 1225 182" anchor="left top"/>
                  <Static id="Static06" visible="false" position="absolute 10 588 1225 598" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static14" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 195 1225 200" anchor="left top"/>
                  <Static id="Static09" text="배식방법" class="sta_WFDA_Label01" position="absolute 691 31 801 58" anchor="default"/>
                  <Static id="Static20" text="식단가VAT제외" class="sta_WFDA_Label01" position="absolute 691 57 801 84" anchor="default"/>
                  <Static id="Static37" class="sta_WFDA_Labelbg" position="absolute 800 31 1225 58" anchor="default"/>
                  <Static id="Static21" text="자재입고일" class="sta_WFDA_Label01" position="absolute 957 31 1067 58" anchor="default"/>
                  <Static id="Static23" text="배식시작시간" class="sta_WFDA_Label01" position="absolute 957 57 1067 84" anchor="default"/>
                  <Static id="Static25" text="평균식수" class="sta_WFDA_Label01" position="absolute 691 83 801 110" anchor="default"/>
                  <Static id="Static26" class="sta_WFDA_Labelbg" position="absolute 800 83 1225 110" anchor="default"/>
                  <Static id="Static27" text="배식종료시간" class="sta_WFDA_Label01" position="absolute 957 83 1067 110" anchor="default"/>
                  <MaskEdit id="mEd_FIRST_END_TIME" taborder="9" type="string" mask="##:##" canchange="Tab00_tab2_mEd_FIRST_END_TIME_CanChange" position="absolute 1069 86 1222 107" style="align:center;" autoselect="true" anchor="default"/>
                  <MaskEdit id="mEd_AVG_MEAL_QTY" taborder="6" position="absolute 803 86 955 107" autoselect="true" anchor="default" mask="###,###,###.##" limitbymask="both"/>
                  <Static id="Static01" text="입고제외일" class="sta_WFDA_Label01" position="absolute 691 109 801 136" anchor="default"/>
                  <Static id="Static02" class="sta_WFDA_Labelbg" position="absolute 800 109 1225 136" anchor="default"/>
                  <Static id="Static00" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 200 13 210 172"/>
                  <Static id="Static11" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 343 13 353 172"/>
                  <Static id="Static12" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 492 13 502 172"/>
                  <Static id="Static13" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 681 13 691 172"/>
                  <CheckBox id="chk_SAT_YN" taborder="14" text="토요일" position="absolute 804 112 863 132" anchor="default"/>
                  <CheckBox id="chk_SUN_YN" taborder="15" text="일요일" position="absolute 876 112 954 132" anchor="default"/>
                  <Static id="Static03" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1071 26 1225 31" anchor="default"/>
                  <Static id="Static28" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1071 0 1225 6" anchor="top right"/>
                  <Static id="Static29" text="w02" class="Guide01_AreaRed" visible="false" position="absolute 1158 6 1160 26" anchor="default"/>
                  <Button id="btn_excelUpload" taborder="16" text="식단추가" onclick="Tab00_tab2_bnt_Add_Hall_Dtl_OnClick" class="btn_WF_Function" position="absolute 1160 6 1225 26" anchor="default"/>
                  <Button id="btn_fullScreen" taborder="17" text="CLEAR" onclick="Tab00_tab2_btn_Clear_OnClick" class="btn_WF_Function" position="absolute 1093 6 1158 26" anchor="default"/>
                  <Static id="Static70" text="※ Description 예시문 입니다." class="sta_WF_DiscInfoN" position="absolute 544 908 782 923"/>
                  <Static id="Static30" class="sta_WFDA_Label01" position="absolute 691 135 1225 172" anchor="default"/>
                  <MaskEdit id="mEd_NEED_RATE" taborder="18" autoselect="true" position="absolute 1069 112 1222 133" mask="###.##" limitbymask="both"/>
                  <Static id="Static31" text="소요량기준(%)" class="sta_WFDA_Label01" position="absolute 957 109 1067 136"/>
                  <Static id="Static32" text="입고제외일에 체크시 식단등록 자재입고 예정일에서 제외하여 계산됩니다." class="sta_WF_DiscPoint" position="absolute 698 146 1222 161"/>
                  <Static id="Static33" text="식단 자동 추가시 기본(Default) 입력 사항" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 691 13 1019 26" anchor="left top"/>
                  <Combo id="cbo_ration_method" taborder="4" innerdataset="ds_ration_method" codecolumn="CODE" datacolumn="CODE_NAME" displayrowcount="10" onitemchanged="Tab00_tab2_cbo_ration_method_onitemchanged" position="absolute 803 34 955 55" anchor="default"/>
                  <Combo id="cbo_d_day" taborder="7" innerdataset="ds_d_day" codecolumn="SET1" datacolumn="CODE_NAME" displayrowcount="10" position="absolute 1069 34 1222 55" anchor="default"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Div id="div_cmnBtn" anchor="left top right" taborder="2" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30"/>
        <Static id="Static06" text="w15" onclick="Static06_onclick" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" onclick="Static71_onclick" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 93 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static49" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1074 71 1237 77" anchor="top right"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 500 84"/>
        <Static id="Static09" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 516 40 546 61" anchor="left top"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 59 40 69 61" anchor="left top"/>
        <Static id="Static13" text="팀" class="sta_WFSA_label" position="absolute 15 41 53 62"/>
        <Static id="Static34" text="W10" visible="false" position="absolute 34 40 44 61" style="background:#ff000055;align:center middle;"/>
        <TmSearchComponent id="edt_tm" titletext="팀 검색용 Component" taborder="0" text="TmSearchComponent00" position="absolute 44 40 178 61" bindDataset="" bindTmCdColumn="" bindTmNmColumn="" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmChange" eventBeforeTrigger=""/>
        <Static id="Static14" text="사업장" class="sta_WFSA_label" position="absolute 207 41 277 62"/>
        <Static id="Static15" text="W10" visible="false" position="absolute 253 40 263 61" style="background:#ff000055;align:center middle;"/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="1" text="UpjangSearchComponent00" position="absolute 263 40 516 61" bindDataset="" bindUpjangCodeColumn="" bindUpjangNameColumn="" eventBeforeTrigger="" eventAfterTrigger="fn_SearchSubInvRecipe" roleSetId=""/>
        <Static id="Static16" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 178 40 208 61"/>
        <MuSearchComponent id="cbo_mu" titletext="사업부 선택 Component" taborder="8" text="MuSearchComponent00" position="absolute 798 80 914 101" bindDataset="" bindMuCdColumn="" appendText="" onItemChangedEvent="fn_muChange" visible="false"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_hall_class">
        <ColumnInfo>
          <Column id="CODE" size="50" type="STRING"/>
          <Column id="CODE_NAME" size="100" type="STRING"/>
          <Column id="SET1" size="100" type="STRING"/>
          <Column id="SET2" size="100" type="STRING"/>
          <Column id="SET3" size="100" type="STRING"/>
          <Column id="SET4" size="100" type="STRING"/>
          <Column id="SET5" size="100" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_HALL_MST" cancolumnchange="ds_HALL_MST_CanColumnChange">
        <ColumnInfo>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="HALL_CD" size="100" type="STRING"/>
          <Column id="HALL_CLASS" size="100" type="STRING"/>
          <Column id="SUBINV_CODE" size="100" type="STRING"/>
          <Column id="D_DAY" size="100" type="STRING"/>
          <Column id="HALL_NAME" size="100" type="STRING"/>
          <Column id="OUTVAT_YN" size="100" type="STRING"/>
          <Column id="NUT_MGMT_TYPE" size="100" type="STRING"/>
          <Column id="CATER_YN" size="100" type="STRING"/>
          <Column id="CORNER_TYPE" size="100" type="STRING"/>
          <Column id="MENU_CYCLE_TYPE" size="100" type="STRING"/>
          <Column id="RECIPE_CLASS" size="100" type="STRING"/>
          <Column id="MENU_CYCLE" size="100" type="STRING"/>
          <Column id="USE_YN" size="22" type="NUMBER"/>
          <Column id="REMARK" size="200" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
          <Column id="UDATE" size="7" type="DATE"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recipe">
        <ColumnInfo>
          <Column id="RECIPE_CLASS" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_menu_cycle">
        <ColumnInfo>
          <Column id="CODE" size="20" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_subinv">
        <ColumnInfo>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
          <Column id="SUBINV_NAME" size="256" type="STRING"/>
          <Column id="OUTVAT_FLAG" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_HALL_DTL" cancolumnchange="ds_HALL_DTL_CanColumnChange">
        <ColumnInfo>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="HALL_CD" size="20" type="STRING"/>
          <Column id="HALL_NAME" size="50" type="STRING"/>
          <Column id="MEAL" size="20" type="STRING"/>
          <Column id="CORNER" size="20" type="STRING"/>
          <Column id="CORNER_DESC" size="50" type="STRING"/>
          <Column id="RATION_METHOD" size="20" type="STRING"/>
          <Column id="MEAL_UPRICE" size="22" type="BIGDECIMAL"/>
          <Column id="AVG_MEAL_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="D_DAY" size="22" type="BIGDECIMAL"/>
          <Column id="FIRST_START_TIME" size="4" type="STRING"/>
          <Column id="FIRST_END_TIME" size="4" type="STRING"/>
          <Column id="NUT_TYPE" size="20" type="STRING"/>
          <Column id="NUT_YN" size="1" type="STRING"/>
          <Column id="USE_YN" size="1" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
          <Column id="UDATE" size="7" type="DATE"/>
          <Column id="NUT_MGMT_TYPE" size="20" type="STRING"/>
          <Column id="CORNER_TYPE" size="20" type="STRING"/>
          <Column id="SAT_YN" type="STRING" size="256"/>
          <Column id="SUN_YN" type="STRING" size="256"/>
          <Column id="NEED_RATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_meal">
        <ColumnInfo>
          <Column id="CODE" size="20" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_corner">
        <ColumnInfo>
          <Column id="CODE" size="20" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
          <Column id="SET2" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ration_method">
        <ColumnInfo>
          <Column id="CODE" size="20" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_d_day">
        <ColumnInfo>
          <Column id="SET1" size="20" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_meal_corner">
        <ColumnInfo>
          <Column id="MEAL_CORNER_NAME" size="256" type="STRING"/>
          <Column id="MEAL_CORNER_CODE" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_corner_grd">
        <ColumnInfo>
          <Column id="CODE" size="20" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
          <Column id="SET2" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind/>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분: IFIS/메뉴관리/기준정보/업장특성설정
 * 프로그램명: FSA00050E.XML
 * 기ㅡㅡㅡ능: 업장특성설정
 * 작ㅡ성ㅡ자: 한화S&C 박종세
 * 작성ㅡ일자: 2007-11-16
 * ----------------------------------------------------------------------------------------
 * HISTORY    : [고도화]-요일입고여부(토/일) 체크박스 추가, 소요량기준값 추가-김민수
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "lib::sc_comon.js"
//@@컨버터에서 주석처리 #include "lib::tit_comm_0001.js"
//@@컨버터에서 주석처리 #include "lib::lib_comm_0001.js"
//@@컨버터에서 주석처리 #include "lib::sc_sql_common.js"
//@@컨버터에서 주석처리 #include "lib::fs_common.js"


//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================

//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
     gfn_formOnLoad(this);
     
     fn_InitForm();
}

function fn_InitForm()
{
	// 권한설정
	edt_tm.applyAuthLevel(cbo_mu);
	edt_upjang.applyAuthLevel(edt_tm);

	//----------업장권한설정---------------------------
	// fn_SetAuth("","","ed_Upjang", "btn_Upjang"); 

	//////////////////////////////////////////////////////
	/// 사업장 권한일 경우 해당 사업장 고정값
	/// 2008.05.16
	/////////////////////////////////////////////////////
//    	if(toNumber(g_AuthLevel) < 99)
// 	{
// 		ed_UPJANG.enable = false;
// 		btn_Upjang.enable = false;
// 	}

	// action 정보 생성 초기화
	fsp_init(this);

	// 기초 데이터 초기화
	fn_InitData();

	if(gfn_length(edt_upjang.getUpjangCode())>0)
	{
	  // 창고 및 레시피 전체 데이터 가져오기
      fn_SearchSubInvRecipe();
      
	}

	// 데이터 변경체크
	v_ds_check = "ds_HALL_MST;ds_HALL_DTL";
	
	// 입고제외일에서 일요일은 기본설정처리
	Tab00.tab2.chk_SUN_YN.value = 1;
}

function Common_Btn_common_OnClick(obj)
{
	switch(obj.name)
	{
		case "btn_Search":
			 fn_search();
			break;
		case "btn_Insert":
			//fn_Insert();
			break;
		case "btn_Delete":
			//fn_Delete();
			break;
		case "btn_Save":
			//fn_Save();
			break;
		case "btn_Print":
			//fn_Print();
			break;
		case "btn_Close":
			fn_Close();
			break;
		case "btn_Help":
			fn_help();
			break;
		default:
			break;
	}
}

function fn_InitData()
{

	//----------------------------------------------
	// Combo DataSet create
	//----------------------------------------------
	var v_ds;
	var v_fil_cond;

	v_ds = fn_common_code("'FS0022','FS0023','FS0024','FS0025','FS0026'","","","blk","Y");

	//-->FS0022 :코너
	v_fil_cond = "GROUP_CODE == 'FS0022'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_corner,v_ds.name);
	//-->그리드에 사용할 코너 데이터셋
	CopyF(ds_corner_grd,ds_corner);
	//blank삭제
	ds_corner.deleteRow(0);


	//-->FS0023 :끼니
	v_fil_cond = "GROUP_CODE == 'FS0023'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_meal,v_ds.name);
	//blank삭제
	ds_meal.deleteRow(0);

	//-->FS0024 :배색방법
	v_fil_cond = "GROUP_CODE == 'FS0024'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_ration_method,v_ds.name);
	//blank삭제
	ds_ration_method.deleteRow(0);

	//-->FS0025 :식단주기
	v_fil_cond = "GROUP_CODE == 'FS0025'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_menu_cycle,v_ds.name);

    //-->FS0026 :자재입고일
	v_fil_cond = "GROUP_CODE == 'FS0026'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_d_day,v_ds.name);
	//blank삭제
	ds_d_day.deleteRow(0);
}



//---------------------------------------------
// 창고데이터 조회 레시피 분류 조회 ==> 전체조회
//---------------------------------------------
function fn_SearchSubInvRecipe()
{
	if(gfn_isNull(edt_upjang.getUpjangCode())) return;

	// action 정보 초기화
	fsp_clear(this);

	// 창고데이터 조회
	fsp_addSearch(this, "fs/fsa:FSA00050E_S003");

	// 레시피분류 조회
	fsp_addSearch(this, "fs/fsa:FSA00050E_S004");

	// 서버 호출
	http.Sync		= true;
	fsp_callService(this, "", "", "", "ds_subinv=ds_subinv ds_recipe=ds_recipe" , "UPJANG="+ edt_upjang.getUpjangCode() +" BLANK='Y'", "");
	http.Sync		= false;

	// 조회 실시 --->> 식당마스터 디테일 모두 조회
	fn_Search_All();

}

//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*------------------------------------------------------------
	1. Function ID : fn_Search()
	2. 개       요 : 업무프로세스에 따른 조회작업
	3. 기       능 : 검색버튼 입력 시 처리되는 작업
	4. 인 수 설 명:
*------------------------------------------------------------*/
function fn_search()
{
    //텝 구분
   var tabIndex = Tab00.tabindex;

   switch(tabIndex)
    {
		case 0:
		   // TAB1 --------------
		  fn_Search_HALL_MST();
		  break;

		case 1:
		  // TAB2 --------------
		  fn_Search_HALL_DTL();
		  break;

		default :
		   break;
   }

}

function fn_Search_All()
{
  fn_Search_HALL_MST();
  fn_Search_HALL_DTL();
}
/*****************************************************************************************
  * 기      능   :  식당군 및 식당 마스터 조회
/*****************************************************************************************/
function fn_Search_HALL_MST()
{
    //필수 입력사항 체크-----------------------------------------------------------------------
    if(gfn_length(edt_upjang.getUpjangCode()) == 0)
    {
	    g_Message("EE", "사업장을 선택해주세요.");
	    return;
    }

    //조회 조건만들기-----------------------------------------------------------------------
    var strUPJANG = edt_upjang.getUpjangCode();

  	// action 정보 삭제 초기화
	fsp_clear(this);

	// 서버에서 조회할 정보 추가
	// 식당군조회
	fsp_addSearch(this, "fs/fsa:FSA00050E_S001");
	// 업장식당마스터조회
	fsp_addSearch(this, "fs/fsa:FSA00050E_S002");

	// 서버 호출
	http.Sync = true;
	fsp_callService(this, "", "", "", "ds_hall_class=ds_out ds_HALL_MST=ds_list" , "UPJANG="+ wrapQuote(strUPJANG), "fn_After_Search");
   //조회 실행-----------------------------------------------------------------------------
	http.Sync = false;
}

/*****************************************************************************************
  * 기      능   :  식당군 및 식당 디테일 조회
/*****************************************************************************************/
function fn_Search_HALL_DTL()
{
    if(gfn_length(edt_upjang.getUpjangCode()) == 0)
    {
	    g_Message("EE", "사업장을 선택해주세요.");
	    return;
    }
    
    //조회 조건만들기-----------------------------------------------------------------------
    var strUPJANG = edt_upjang.getUpjangCode();

	// action 정보 삭제 초기화
	fsp_clear(this);

	// 서버에서 조회할 정보 추가
	// 업장식당디테일조회
	fsp_addSearch(this, "fs/fsa:FSA00050E_S005");

	// 서버 호출
	http.Sync = true;
	fsp_callService(this, "", "", "", "ds_HALL_DTL=ds_HALL_DTL" , "UPJANG="+ wrapQuote(strUPJANG), "fn_After_Search");
   //조회 실행-----------------------------------------------------------------------------
	http.Sync = false;
}
// 조회 후 콜백함수
function fn_After_Search()
{
   //텝 구분
   var tabIndex = Tab00.tabindex;

   switch(tabIndex)
    {
		case 0:
		   // TAB1 --------------
			// 데이터셋 플래그 클리어
			ds_HALL_MST.applyChange();
		  break;
		case 1 :
		  // TAB2 --------------
	   	  // 데이터셋 플래그 클리어
			ds_HALL_DTL.applyChange();

		  //==================================================
		  // 식당군 필터적용
		  //==================================================
  		    ds_HALL_MST.filter("gfn_subStr(HALL_CD,0,3)<>'010'&&gfn_subStr(HALL_CD,0,3)<>'012'");

  		  //==================================================
  		  // 식단 사용여부 필터적용
  		  //==================================================
  		  if(Tab00.tab2.chk_SHOW_USE.value>0)
		  {
			  //필터를 적용한다.
			  ds_HALL_DTL.filter("USE_YN==1");
		  }
		  else
		  {
			  ds_HALL_DTL.filter("");
		  }

  		  break;
		default :
		  break;
    }
}

/*------------------------------------------------------------
	1. Function ID : fn_Insert()
	2. 개       요 : 업무프로세스에 따른 입력작업
	3. 기       능 : 입력버튼 입력 시 처리되는 작업
	4. 인 수 설 명:
*------------------------------------------------------------*/
function fn_insert()
{

   //탭구분
	var tabIndex = Tab00.tabindex;

    switch(tabIndex)
		{
		  case 0 :
			  // TAB1 --------------
   		      // MutiSelect
				var rowCnt = GetLastRow(ds_hall_class)     ;

				var selectedcnt = 0;
				var selectedStr = '';

				for(var row=0; row <= rowCnt; row++)
				{
					  if(ds_hall_class.getSelect(row))
					  {
						 if(selectedcnt==0) {
							 selectedStr = "" + row;
						  }
						 else {
							 selectedStr = selectedStr + "," + row;
						 }
						 selectedcnt++;
					  }
				}

				var selectArr = gfn_split(selectedStr,',');

				//필터전의 ds_HALL_MST 데이터 건수

				for(var i=0; i < selectedcnt;  i++)
				{
			       //1) 업장코드
			       var UPJANG = edt_upjang.getUpjangCode();

			       //2) 식당군코드
			       var HALL_CLASS =  ds_hall_class.getColumn(selectArr[i],"CODE");

			       //3) 식당코드
			       //---1.식당군으로 필터를 사용한다.
			       ds_HALL_MST.filter("HALL_CLASS=='"+ HALL_CLASS +"'");

			       //---2.해당하는 식당군의 식당코드중에 최대값을 구한다.
			        var Max_HALL_CD_SEQ = "01";

			       if(ds_HALL_MST.rowcount>0){
						Max_HALL_CD_SEQ = toNumber(gfn_right(ds_HALL_MST.getMax("HALL_CD"), 2)) + 1;
 		                if(Max_HALL_CD_SEQ<10){
						   Max_HALL_CD_SEQ = "0" + Max_HALL_CD_SEQ;
			            }
			        }

			       var HALL_CD = HALL_CLASS + Max_HALL_CD_SEQ;
			       //--3. 필터를 해제한다.
			       ds_HALL_MST.filter("");

			       // 식당명
			       var HALL_NAME = ds_hall_class.getColumn(selectArr[i],"CODE_NAME") + Max_HALL_CD_SEQ;

			       // 사용_여부 (USE_YN --> 1 로 셋팅)
				   var USE_YN = "Y";

			       // 과면세 여부(OUTVAT_FLAG -->식당군 SET1값 (N:과세, Y:면세)
				   var OUTVAT_YN = ds_hall_class.getColumn(selectArr[i],"SET1");

			       // 영양관리기준 (NUT_MGMT_TYPE-->식당군 SET2값 (1식당,2코너)
			       var NUT_MGMT_TYPE = ds_hall_class.getColumn(selectArr[i],"SET2");

			       // 연회_여부 (CATER_YN --> 식당군 SET3값 연회여부(Y:연회,N:일반))
			       var CATER_YN = ds_hall_class.getColumn(selectArr[i],"SET3");

			       // 코너_구분 (CORNER_TYPE --> 식당군 SET4값 (1일반,2병원))
			       var CORNER_TYPE = ds_hall_class.getColumn(selectArr[i],"SET4");

				   // 메뉴주기_구분 (MENU_CYCLE_TYPE --> 식당군 SET5값 (1일반,2병원))
			       var MENU_CYCLE_TYPE = ds_hall_class.getColumn(selectArr[i],"SET5");

					// 카페테리아_여부 (CAFE_YN ---> 식당군 ATTR02값이 카페연부(Y:카페, N:일반)
					var CAFE_YN = ds_hall_class.getColumn(selectArr[i],"ATTR02");

				   ds_HALL_MST.addRow();

			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"UPJANG", UPJANG);
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"HALL_CLASS", HALL_CLASS);
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"HALL_CD", HALL_CD);
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"HALL_NAME", HALL_NAME);
			      // 수정요구사항 - 이명희 추가시 설명을 ""으로 해주세요.
			      // ds_HALL_MST.SetColumn(ds_HALL_MST.row,"REMARK", HALL_NAME);
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"REMARK", "");
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"USE_YN", iif(USE_YN=='Y',1,0));
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"OUTVAT_YN", OUTVAT_YN);
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"NUT_MGMT_TYPE", NUT_MGMT_TYPE);

				   //연회여부 ==> SET3
				   ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"CATER_YN", CATER_YN);

			       //카페여부 ==> Attr02
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"CAFE_YN",  CAFE_YN);

			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"CORNER_TYPE", CORNER_TYPE);
			       ds_HALL_MST.setColumn(ds_HALL_MST.rowposition,"MENU_CYCLE_TYPE", MENU_CYCLE_TYPE);

			      // 수정요구사항 - 이명희 식당 추가시 포커싱이 가게 해주세요.
			      // ds_HALL_MST.Sort("HALL_CLASS,HALL_CD");
			 	}

			  break;
		  case 1 :
			  // TAB2 --------------
			  Tab00_tab2_bnt_Add_Hall_Dtl_OnClick("");

			  break;
		  default :
		      break;
		}

}

function fn_SetDefaultNewRow()
{
   //탭구분
 	var tabIndex = Tab00.tabindex;

    switch(tabIndex)
		{
		  case 0 :
			  // TAB1 --------------
			  break;
		  case 1 :
			  // TAB2 --------------
			  break;
		  default :
		      break;
		}
}

//---------------------------------------------
// ▶ 버튼을 클릭할때
//---------------------------------------------
function Tab00_tab1_btn_Add_OnClick(obj:Button, e:ClickEventInfo)
{
 fn_insert();
}

//----------------------------------------------
// 탭에 있는 식당군 더블 클릭할때
//----------------------------------------------
function Tab00_tab1_grd_hall_class_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{
 fn_insert();
}





/*------------------------------------------------------------
	1. Function ID : fn_Delete()
	2. 개       요 : 업무프로세스에 따른 정보 삭제작업
	3. 기       능 : 삭제버튼 입력 시 처리되는 작업
	4. 인 수 설 명 :
*------------------------------------------------------------*/
function fn_delete()
{
     //탭구분
 	var tabIndex = Tab00.tabindex;

	switch(tabIndex)
	{
		  case 0 :
			    // TAB1 --------------
   			    // 삭제 확인메세지 호출
				if (!mfn_Call_DeleteMsg()){ return false; }

			   // 데이터셋이 Insert일 경우는 DeleteRow만 실행한다.
				if(mfn_chk_rowtypeInsert_deleteRow(ds_HALL_MST)){return false;}

				// TO DO 식당마스터를 삭제하기전에  지울수 있는지 확인한다.
				if(!fn_chk_canDeleteRow(ds_HALL_MST)){return false;}

				// 데이터셋 삭제
				ds_HALL_MST.deleteRow(ds_HALL_MST.rowposition);

				// 트랜잭션 시작
				fsp_clear(this);

				//식당마스터 삭제
				fsp_addSave(this, "", "","fs/fsa:FSA00050E_D001", "", "", "", "");

				//식당디테일 삭제
				fsp_addSave(this, "", "","fs/fsa:FSA00050E_D002", "", "", "", "");

				//식당영양성분삭제
				fsp_addSave(this, "", "","fs/fsa:FSA00050E_D003", "", "", "", "");

				// 서버 호출
				fsp_callService(this, "", "", "ds_in=ds_HALL_MST:U", "", "", "fn_Search_All");

				// 트랜잭션 종료
			  break;
		  case 1 :
			  // TAB2 --------------
		      // 삭제 확인메세지 호출
				if (!mfn_Call_DeleteMsg()){ return false; }

				// 데이터셋이 Insert일 경우는 DeleteRow만 실행한다.
				if(mfn_chk_rowtypeInsert_deleteRow(ds_HALL_DTL)){return false;}

				// TO DO 식당디테일를 삭제하기전에  지울수 있는지 확인한다.
				if(!fn_chk_canDeleteRow(ds_HALL_DTL)){return false;}

				// 데이터셋 삭제
				ds_HALL_DTL.deleteRow(ds_HALL_DTL.rowposition);


				// 트랜잭션 시작
				fsp_clear(this);

				//식당디테일 삭제
				fsp_addSave(this, "", "","fs/fsa:FSA00050E_D002", "", "", "", "");

				//식당영양성분삭제
				fsp_addSave(this, "", "","fs/fsa:FSA00050E_D003", "", "", "", "");

				// 서버 호출
				fsp_callService(this, "", "", "ds_in=ds_HALL_DTL:U", "", "", "fn_Search_All");

				// 트랜잭션 종료
			  break;
		  default :
		      break;
	}
}

//-----------------------------------------------------------------------------
// TO DO 식당마스터, 디테일을  삭제하기전에 지울수 있는지 확인.
//-----------------------------------------------------------------------------
function fn_chk_canDeleteRow(ds_target)
{
	var UPJANG = "";
    var HALL_CD = "";
    var MEAL = "";
    var CORNER = "";
    var ds_where = "";

    //필수 입력사항 체크-----------------------------------------------------------------------
    if(gfn_length(edt_upjang.getUpjangCode()) == 0)
    {
	    g_Message("EE", "사업장을 선택해주세요.");
	    return;
    }

    //조회 조건만들기-----------------------------------------------------------------------
    UPJANG = edt_upjang.getUpjangCode();
    HALL_CD = ds_target.getColumn(ds_target.rowposition,"HALL_CD");
    MEAL = ds_target.getColumn(ds_target.rowposition,"MEAL");
    CORNER = ds_target.getColumn(ds_target.rowposition,"CORNER");

    ds_where= "UPJANG=" + wrapQuote(UPJANG) + " HALL_CD=" + wrapQuote(HALL_CD) + " MEAL=" + wrapQuote(MEAL) + " CORNER=" + wrapQuote(CORNER);

    // 결과값 임시 데이터셋 생성
	var dsObj;
	create("Dataset", "ds_row_cnt");
	dsObj = eval("ds_row_cnt");
	dsObj.addColumn("ROW_CNT", "BIGDECIMAL", 100);
	dsObj.addRow();
	dsObj.setColumn(0, "ROW_CNT", "0");

	// action 정보 삭제 초기화
	fsp_clear(this);

	// 서버에서 조회할 정보 추가 - 식단데이터에서 카운터 확인
	fsp_addSearch(this, "fs/fsa:FSA00050E_S006");
	// 서버 호출
	http.Sync = true;
	fsp_callService(this, "", "", "", "ds_row_cnt=ds_row_cnt" , ds_where, "");

	//조회 실행-----------------------------------------------------------------------------
	http.Sync = false;

	if(dsObj.getColumn(0,"ROW_CNT")!="0"){
		g_Message("EE", "식단 데이터에 이미 추가된 데이터가 있습니다.\n\n데이터를 삭제할 수 없습니다.");
		// 임시 데이터셋 삭제
		Destroy("ds_row_cnt");
		return false;
	}
	else {
		// 임시 데이터셋 삭제
		Destroy("ds_row_cnt");
		return true;
	}
}


/*------------------------------------------------------------
	1. Function ID : fn_Save()
	2. 개       요 : 업무프로세스에 따른 정보 저장작업
	3. 기       능 : 저장버튼 입력 시 처리되는 작업
	4. 인 수 설 명 :
*------------------------------------------------------------*/
function fn_save()
{
  //텝 구분
   var tabIndex = Tab00.tabindex;

   switch(tabIndex)
    {
		case 0:
		   // TAB1 --------------
			// 데이터 유효성 검사
			 if (!fn_DataValidation()){
				return;
			 }

			// action 정보 초기화
			fsp_clear(this);

			fsp_addSave(this
			, "fs/fsa:FSA00050E_I001"
			, "fs/fsa:FSA00050E_U001"
			, ""
			, ""
			, ""
			, ""
			, ""
			);

			// 서버 호출 후 조회
			fsp_callService(this, "", "", "ds_in=ds_HALL_MST:U", "" , "", "fn_Search_HALL_MST");
			// 트랜잭션 종료

		  break;
		case 1 :
		  // TAB2 -------------

			// 데이터 유효성 검사
			 if (!fn_DataValidation()){
				return;
			 }

			// 트랜잭션 시작
			//var InDS=""; InDS="FSA00050E_T001=ds_HALL_DTL:U";
			//transaction("FSA00050E_T001","S_FSA::FSA00050E_T001.jsp", InDS, "", "","fn_Search_HALL_DTL");

			var actionName, cmdName, inData, outData, otherArg, callBackFnc, isErrorNotCall, isNotShow, isSync;

			actionName		= "FSA00050E_T001";
			cmdName			= "U_svc::" + "fs/fsa/FSA00050E_T001.jsp";
			inData			= "FSA00050E_T001=ds_HALL_DTL:U";
			outData			= "";
			callBackFnc		= "fn_Search_HALL_DTL";
			isErrorNotCall  = true;                    // @param isErrorNotCall  에러 발생 시 Callback 함수 호출 여부
			isNotShow       = false;                   // @param isNotShow  처리중입니다. 메시지 창 보여줄지 여부 설정하기
			isSync          = false;                   // @param isSync  동기식으로 설정할지 여부

			jsp_transaction(this, actionName, cmdName ,inData ,outData, otherArg, callBackFnc, isErrorNotCall, isNotShow, isSync);

			// 트랜잭션 종료

		  break;
		default :
		  break;
    }

}

//데이터 유효성검사
function fn_DataValidation(){
     var blnRtn = true;
    //탭구분
 	var tabIndex = Tab00.tabindex;
    switch(tabIndex)
	{
		  case 0 :
			  // TAB1 --------------
			  if(!gfn_dsIsUpdated(ds_HALL_MST))
			  {
				g_Message("EE","변경된 데이터가 없습니다.");
				return false;
			  }

   			  var checkRow = ds_HALL_MST.findRowExpr("gfn_length(SUBINV_CODE)==0&&CATER_YN=='N'");

   			  if(checkRow!=-1)
   			  {
   			    g_Message("EE","연회(행사)식당을 제외한 모든 식당은 반드시 창고를 설정하여야 합니다."+"\n\n식당에 맞는 창고를 선택하여 주십시요.");
   			    blnRtn=false;
   			  }

   			  var checkRow = ds_HALL_MST.findRowExpr("MENU_CYCLE_TYPE==2&&gfn_length(MENU_CYCLE)==0");
   			  if(checkRow!=-1)
   			  {
   			    g_Message("EE","병원용 식당은 반드시 식단주기 설정하여야 합니다."+"\n\n식당에 맞는 식단주기를 선택하여 주십시요.");
   			    blnRtn=false;
   			  }


			  break;
		  case 1 :
			  // TAB2 --------------
			  if(!gfn_dsIsUpdated(ds_HALL_DTL))
			  {
				g_Message("EE","변경된 데이터가 없습니다.");
				return false;
			  }

			  var checkRow0 = ds_HALL_DTL.findRowExpr("gfn_length(HALL_CD)==0");
			  if(checkRow0!=-1)
			  {
			  	g_Message("EE", "식당은 필수입력입니다. 입력하여 주십시요.");
			    blnRtn=false;
			    return blnRtn;
			  }

			  var checkRow1 = ds_HALL_DTL.findRowExpr("gfn_length(MEAL)==0");
			  if(checkRow1!=-1)
   			  {
   			    g_Message("EE", "끼니는 필수입력입니다. 입력하여 주십시요.");
			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(4);

   			    return blnRtn;
   			  }

   			  var checkRow2 = ds_HALL_DTL.findRowExpr("gfn_length(CORNER)==0");
   			  if(checkRow2!=-1)
   			  {
   			    g_Message("EE", "코너는 필수입력입니다. 입력하여 주십시요.");
   			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(5);

   			    return blnRtn;
   			  }

   			  //수정요청사항 - 이명희 배식방법 필수입력
   			  var checkRow7 = ds_HALL_DTL.findRowExpr("gfn_length(RATION_METHOD)==0");
   			  if(checkRow7!=-1)
   			  {
   			    g_Message("EE", "배식방법은 필수입력입니다. 입력하여 주십시요.");
   			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(7);

   			    return blnRtn;
   			  }

   			  //카페테리아 식당은 식단가가 필요없음.
   			  var checkRow3 = ds_HALL_DTL.findRowExpr("gfn_subStr(HALL_CD,0,3)<>'005'&&MEAL_UPRICE==");
   			  if(checkRow3!=-1)
   			  {
   			    g_Message("EE", "식단가는 필수입력입니다. 입력하여 주십시요.");
   			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(8);

   			    return blnRtn;
   			  }


   			  //수정요청사항 - 이명희 평균식수 필수입력
   			  var checkRow8 = ds_HALL_DTL.findRowExpr("AVG_MEAL_QTY==");
   			  if(checkRow8!=-1)
   			  {
   			    g_Message("EE", "평균식수는 필수입력입니다. 입력하여 주십시요.");
   			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(9);

   			    return blnRtn;
   			  }


   			  var checkRow4 = ds_HALL_DTL.findRowExpr("D_DAY==");
   			  if(checkRow4!=-1)
   			  {
   			    g_Message("EE", "자재입고일은 필수입력입니다. 입력하여 주십시요.");
   			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(10);

   			    return blnRtn;
   			  }

   			  var checkRow5 = ds_HALL_DTL.findRowExpr("gfn_length(FIRST_START_TIME)==0");
   			  if(checkRow5!=-1)
   			  {
   			    g_Message("EE", "배식시작시간은 필수입력입니다. 입력하여 주십시요.");
   			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(11);


   			    return blnRtn;
   			  }

   			  var checkRow6 = ds_HALL_DTL.findRowExpr("gfn_length(FIRST_END_TIME)==0");
   			  if(checkRow6!=-1)
   			  {
   			    g_Message("EE", "배식종료시간은 필수입력입니다. 입력하여 주십시요.");
   			    blnRtn=false;

   			    Tab00.tab2.grd_HALL_DTL.setFocus();
   			    Tab00.tab2.grd_HALL_DTL.setCellPos(12);

   			    return blnRtn;
   			  }



			  break;
		  default :
		     break;
	}
     return blnRtn;
}

/*------------------------------------------------------------
	1. Function ID : fn_Print()
	2. 개       요 : 업무프로세스에 따른 인쇄 처리
	3. 기       능 : 인쇄버튼 입력 시 처리되는 작업
	4. 인 수 설 명 :
*------------------------------------------------------------*/
function fn_print()
{
}

/*------------------------------------------------------------
	1. Function ID : fn_Close()
	2. 개       요 : 업무프로세스에 따른 폼 종료
	3. 기       능 : 닫기버튼 입력 시 처리되는 작업
	4. 인 수 설 명 :
*------------------------------------------------------------*/
function fn_Close()
{
	this.close();
}

/*------------------------------------------------------------
	1. Function ID : fn_Help()
	2. 개       요 : 업무프로세스에 따른 도움말
	3. 기       능 : 도움말버튼 입력 시 처리되는 작업
	4. 인 수 설 명 :
*------------------------------------------------------------*/
function fn_help()
{
  //탭구분
 	var tabIndex = Tab00.tabindex;

    switch(tabIndex)
	{
		  case 0 :
			  // TAB1 --------------
			  break;
		  case 1 :
			  // TAB2 --------------
			  break;
		  default :
		      break;
	}
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================


function Tab00_OnChanged(obj:Tab, e:TabIndexChangeEventInfo)
{
	//탭구분
 	var tabIndex = Tab00.tabindex;

    switch(tabIndex)
	{
			case 0 :
			  // TAB1 --------------
   			  ds_HALL_MST.filter("");
			  break;
		  case 1 :
			  // TAB2 --------------
			  ds_HALL_MST.filter("gfn_subStr(HALL_CD,0,3)<>'010'&&gfn_subStr(HALL_CD,0,3)<>'012'");
			  break;
		  default :
		      break;
	}
}



function Tab00_OnChanging(obj:Tab, e:TabIndexChangeEventInfo)
{	//탭구분
 	var tabIndex = Tab00.tabindex;

    switch(tabIndex)
	{
			case 0 :
			  // TAB1 --------------
   				if(gfn_dsIsUpdated(ds_HALL_DTL)){
					g_Message("01", "식당운영정보관리에 변경된 데이터가 있습니다. \n\n현재 데이터를 저장하시거나 또는 조회를 눌러서 초기화 하십시요.");
					return false;
				}

			  break;
		  case 1 :
			  // TAB2 --------------
				if(gfn_dsIsUpdated(ds_HALL_MST)){
					g_Message("01", "업장별 식당관리에 변경된 데이터가 있습니다. \n\n현재 데이터를 저장하시거나 또는 조회를 눌러서 초기화 하십시요.");
					return false;
				}
			  break;
		  default :
		      break;
	}

}




//=========================================================================================
// TAB 1 이벤트 모음
//=========================================================================================
// 컬럼 데이터 선택시 체크 및 확인
function ds_HALL_MST_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{

  switch (e.columnid)
   {

		case "SUBINV_CODE": //창고선택시 면제식당의 경우 면세창고만, 일반일 경우 일반창고 선택

			//선택된 데이터 인덱스 찾기
			var tempIdx = ds_subinv.findRow("SUBINV_CODE", e.newvalue);

			var OUTVAT_YN = ds_subinv.getColumn(tempIdx, "OUTVAT_FLAG");

			if (OUTVAT_YN!=ds_HALL_MST.getColumn(e.row,"OUTVAT_YN"))
			{
				g_Message("EE", "창고를 선택할 때 과세/면세 창고를 맞게 선택하여 주십시요.");
				return false;
			}
			break;

		case "MENU_CYCLE": //식단주기 선택시 병원일 경우만 선택 일반일 경우 선택할 수 없음.
			if (ds_HALL_MST.getColumn(e.row,"MENU_CYCLE_TYPE")=='1') {
				g_Message("EE", "식단주기는 병원식당군에 해당하는 식당만 선택할 수 있습니다.");
				return false;
			}
			break;

	    default:
		    break;

	}
}


//=========================================================================================
// TAB 2 이벤트 모음
//=========================================================================================
function Tab00_tab2_lstHALL_OnChanged(obj:ListBox, e:ItemChangeEventInfo)
{
		//선택된 데이터 인덱스 찾기
		var tempIdx = ds_HALL_MST.findRow("HALL_CD", e.postvalue);
		var CORNER_TYPE = ds_HALL_MST.getColumn(tempIdx, "CORNER_TYPE");
		
		
    v_ds = fn_common_code("'FS0023'","","","blk","Y");

// 	//-->FS0022 :코너
// 	v_fil_cond = "GROUP_CODE == 'FS0022'";
// 	v_ds.filter(v_fil_cond);
// 	CopyF(ds_corner,v_ds.name);
// 	//-->그리드에 사용할 코너 데이터셋
// 	CopyF(ds_corner_grd,ds_corner);
// 	//blank삭제
// 	ds_corner.deleteRow(0);
// 

	//-->FS0023 :끼니
	v_fil_cond = "GROUP_CODE == 'FS0023'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_meal,v_ds.name);
	//blank삭제
	ds_meal.deleteRow(0);

		//FS00022 SET2가 코너타입을 정의한다.
	ds_corner.filter("SET2=="+ wrapQuote(CORNER_TYPE));

	//초기화
	//끼니+코더 데이터셋 삭제
	ds_meal_corner.clearData();
	Tab00.tab2.lstCORNER.setSelect(-1,false);




		// 수정요청사항 - 2008.04.11 이명희
		// 카페테리아 식당은 식단가, 영양기준 입력칸을 disable 로 표시한다.

}

//-=============================================================================
//끼니까 바뀔경우
function Tab00_tab2_lstMEAL_OnChanged(obj:ListBox, e:ItemChangeEventInfo)
{ fn_make_meal_corner(); }

//코너가 바뀔경우
function Tab00_tab2_lstCORNER_OnChanged(obj:ListBox, e:ItemChangeEventInfo)
{ fn_make_meal_corner(); }

//코너를 클릭할 경우
function Tab00_tab2_lstCORNER_OnClick(obj:ListBox, e:ListBoxClickEventInfo)
{ fn_make_meal_corner(); }

function fn_make_meal_corner()
{
	var intMealSelCnt = Tab00.tab2.lstMEAL.getSelectedCount();
	if(intMealSelCnt<0) return;
	var intCornerSelCnt = Tab00.tab2.lstCORNER.getSelectedCount();
	if(intCornerSelCnt<0) return;

	var MEAL_NAME, MEAL_CODE, CORNER_NAME, CORNER_CODE;

	for(var i=0;i<ds_meal.rowcount;i++){

        //trace('Tab00.tab2.lstMEAL.getSelect(i) => ' + Tab00.tab2.lstMEAL.getSelect(i));

		if(Tab00.tab2.lstMEAL.getSelect(i)){
			MEAL_CODE =ds_meal.getColumn(i,"CODE");
			MEAL_NAME =ds_meal.getColumn(i,"CODE_NAME");

			for(var j=0;j<ds_corner.rowcount;j++){

				if(Tab00.tab2.lstCORNER.getSelect(j)){
					CORNER_CODE =ds_corner.getColumn(j,"CODE");
					CORNER_NAME =ds_corner.getColumn(j,"CODE_NAME");

					if(ds_meal_corner.findRow("MEAL_CORNER_CODE",MEAL_CODE+CORNER_CODE)==-1)
					{
						var nRow = ds_meal_corner.addRow();
						ds_meal_corner.setColumn(nRow,"MEAL_CORNER_NAME", MEAL_NAME + " : " + CORNER_NAME);
						ds_meal_corner.setColumn(nRow,"MEAL_CORNER_CODE", MEAL_CODE + CORNER_CODE);
						ds_meal_corner.setColumn(nRow,"MEAL", MEAL_CODE);
						ds_meal_corner.setColumn(nRow,"CORNER", CORNER_CODE);
					}
				}
			}
		}
    }
    
    //trace(ds_meal_corner.saveXML());

    Sort(ds_meal_corner,"MEAL_CORNER_NAME"); 
}
//==========================================================================================

// LIST 끼니_코너에서 삭제키를 누를때
function Tab00_tab2_lstMEAL_CORNER_OnKeyDown(obj:ListBox, e:KeyEventInfo)
{
	//key code :46 -->> Delete Key 클릭시 선택없음.
	if(e.keycode==46){
		var ds_rowcnt=ds_meal_corner.rowcount;
		for(var i=ds_rowcnt-1;i>=0;i--){
			if(Tab00.tab2.lstMEAL_CORNER.getSelect(i))
			   { ds_meal_corner.deleteRow(i); }
		}
	}
}

//-------------------------------------------------
//식단 자동 추가 이벤트 fn_Insert()
//-------------------------------------------------
function Tab00_tab2_bnt_Add_Hall_Dtl_OnClick(obj:Button, e:ClickEventInfo)
{
	var intHallSelCnt = Tab00.tab2.lstHALL.getSelectedCount();
	if(intHallSelCnt<0) return;

	var intMealConerCnt = Tab00.tab2.lstMEAL_CORNER.length;
	if(intMealConerCnt<=0) return;

   //단건처리
   var UPJANG=edt_upjang.getUpjangCode();
   var HALL_CD=Tab00.tab2.lstHALL.value; var tempIdx = ds_HALL_MST.findRow("HALL_CD", HALL_CD);
   var HALL_NAME = ds_HALL_MST.getColumn(tempIdx, "HALL_NAME");
   var NUT_MGMT_TYPE = ds_HALL_MST.getColumn(tempIdx,"NUT_MGMT_TYPE");  						   // 영양관리기준1.식당2.식당+코너
   var NUT_TYPE = ds_hall_class.getColumn(ds_hall_class.findRow("CODE", gfn_left(HALL_CD,3)),"SET4");  // 기본적인 영양구분을 위해서 설정
   var CORNER_TYPE = ds_HALL_MST.getColumn(tempIdx, "CORNER_TYPE");                                // 코너필터를 사용하기위해 설정

   var RATION_METHOD=Tab00.tab2.cbo_ration_method.value;
   var MEAL_UPRICE=Tab00.tab2.mEd_MEAL_UPRICE.value;
   var AVG_MEAL_QTY=Tab00.tab2.mEd_AVG_MEAL_QTY.value;
   var D_DAY=Tab00.tab2.cbo_d_day.value;
   var FIRST_START_TIME=Tab00.tab2.mEd_FIRST_START_TIME.value;
   var FIRST_END_TIME=Tab00.tab2.mEd_FIRST_END_TIME.value;
   
   // 요일입고여부, 소요량기준 추가
   var SAT_YN=Tab00.tab2.chk_SAT_YN.value;
   var SUN_YN=Tab00.tab2.chk_SUN_YN.value;
   var NEED_RATE=Tab00.tab2.mEd_NEED_RATE.value;

   if(gfn_isNull(NEED_RATE))
   {
      NEED_RATE = "100";
   }

   /////// 업장
	if(gfn_length(UPJANG)==0)
	{
		g_Message("EE", "식단을 추가하려는 업장을 선택하여 주십시요.");
		return false;
	}

	/////// 식당
	if(gfn_length(HALL_CD)==0)
	{
		g_Message("EE", "식단을 추가하려는 식당을 선택하여 주십시요.");
		return false;
	}


   //식당 사용여부 확인
   var USE_YN_HALL_MST=ds_HALL_MST.getColumn(tempIdx,"USE_YN");

   //식당사용여부 N일경우 식당운영을 만들지 않는다.
   if(USE_YN_HALL_MST==0){g_Message("EE", "현재 선택하신 식당은 사용불가입니다.\n\n식단을 추가 할 수 없습니다."); return false; }


   //다중처리

   for(var i=0;i<ds_meal_corner.rowcount;i++)
   {

		//행사식당은 식당운영을 만들지 않는다.
		if(gfn_subStr(HALL_CD,0,3)=="010") { continue; }

		var MEAL= ds_meal_corner.getColumn(i,"MEAL");
		var CORNER=ds_meal_corner.getColumn(i,"CORNER");

		if(ds_HALL_DTL.findRowExpr("UPJANG=="+wrapQuote(UPJANG)+"&&HALL_CD=="+wrapQuote(HALL_CD)+"&&MEAL=="+wrapQuote(MEAL)+"&&CORNER=="+wrapQuote(CORNER))==-1)
		{
			ds_HALL_DTL.addRow();
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"UPJANG",UPJANG);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"HALL_CD",HALL_CD);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"HALL_NAME",HALL_NAME);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"MEAL",MEAL);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"CORNER",CORNER);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"RATION_METHOD",RATION_METHOD);
			if(gfn_subStr(HALL_CD,0,3)=='005')
		    {
			    MEAL_UPRICE=0;
			}
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"MEAL_UPRICE",MEAL_UPRICE);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"AVG_MEAL_QTY",AVG_MEAL_QTY);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"D_DAY",D_DAY);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"FIRST_START_TIME",FIRST_START_TIME);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"FIRST_END_TIME",FIRST_END_TIME);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"NUT_YN",'N'); //INSERT 할때 영양구분존재여부는 N으로 설정한다.
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"USE_YN",1);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"NUT_MGMT_TYPE", NUT_MGMT_TYPE);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"NUT_TYPE", NUT_TYPE);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"CORNER_TYPE", CORNER_TYPE);
			
			// 요일입고여부, 소요량기준 추가
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"SAT_YN", SAT_YN);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"SUN_YN", SUN_YN);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"NEED_RATE", NEED_RATE);
		}

   }

   //식당 디테일 데이터 정렬
   //ds_HALL_DTL.Sort("CORNER,MEAL");

}

//-------------------------------------------------
//Clear버튼을 클릭할 때 이벤트함수
//-------------------------------------------------
function Tab00_tab2_btn_Clear_OnClick(obj:Button, e:ClickEventInfo)
{
// 	Tab00.tab2.lstMEAL.index = -1;
// 	Tab00.tab2.lstCORNER.index = -1;//.setSelect(-1,false); 

    ds_meal.clearData();

    v_ds = fn_common_code("'FS0022', 'FS0023'","","","blk","Y");
 
	v_fil_cond = "GROUP_CODE == 'FS0023'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_meal,v_ds.name);
	//blank삭제
	ds_meal.deleteRow(0); 

    ds_corner.clearData();

	//-->FS0022 :코너
	v_fil_cond = "GROUP_CODE == 'FS0022'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_corner,v_ds.name);
	//blank삭제
	ds_corner.deleteRow(0);

    fn_make_meal_corner();

	ds_meal_corner.clearData();


	this.Tab00.tab2.cbo_ration_method.index=-1;
	this.Tab00.tab2.cbo_d_day.index=-1;
	this.Tab00.tab2.mEd_MEAL_UPRICE.value="";
	this.Tab00.tab2.mEd_AVG_MEAL_QTY.value="";
	this.Tab00.tab2.mEd_FIRST_START_TIME.value="";
	this.Tab00.tab2.mEd_FIRST_END_TIME.value="";
	
	// 요일입고여부, 소요량기준 추가
	this.Tab00.tab2.chk_SAT_YN.value=0;
	this.Tab00.tab2.chk_SUN_YN.value=1;
	this.Tab00.tab2.mEd_NEED_RATE.value="";
}

//-------------------------------------------------
//배식시작시간 종료시간 체크함수 - 텍스트박스 및 데이터셋에서 모두 체크
//-------------------------------------------------
function Tab00_tab2_mEd_FIRST_START_TIME_CanChange(obj:MaskEdit, e:ChangeEventInfo)
{
//	if(!mfn_chk_timeformat(replace(strText,":",""))){ return false; }
//	if(!mfn_chk_timeBetween(replace(strText,":",""), Tab00.tab2.mEd_FIRST_END_TIME.value,"","","<")){ return false; }
}

function Tab00_tab2_mEd_FIRST_END_TIME_CanChange(obj:MaskEdit, e:ChangeEventInfo)
{
//	if(!mfn_chk_timeformat(replace(strText,":",""))){ return false; }
//	if(!mfn_chk_timeBetween(Tab00.tab2.mEd_FIRST_START_TIME.value, replace(strText,":",""),"","","<")){ return false; }
}

function ds_HALL_DTL_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	//
	//배식시간은 체크할 필요 없음. - 이명희 요청사항(2008.06.17)
	//

	// if(strColumnID=="FIRST_START_TIME"){
		// if(length(varNewValue)==0){return true;}
		// if(!mfn_chk_timeformat(replace(varNewValue,":",""))){ return false; }
		// if(!mfn_chk_timeBetween(replace(varNewValue,":",""),obj.GetColumn(nRow,"FIRST_END_TIME"),"","","<")){ return false; }
	// }

	// if(strColumnID=="FIRST_END_TIME"){
		// if(length(varNewValue)==0){return true;}
		// if(!mfn_chk_timeformat(replace(varNewValue,":",""))){ return false; }
		// if(!mfn_chk_timeBetween(obj.GetColumn(nRow,"FIRST_START_TIME"), replace(varNewValue,":",""),"","","<")){ return false; }
	// }



	if(e.columnid=="USE_YN")
	{
	  //현재 선택된 로우의 식당코드를 가져온다.
	  var UPJANG  = ds_HALL_DTL.getColumn(e.row, "UPJANG");
	  var HALL_CD = ds_HALL_DTL.getColumn(e.row, "HALL_CD");

	  var schRow  = ds_HALL_MST.findRowExpr("UPJANG=="+wrapQuote(UPJANG)+"&&HALL_CD=="+wrapQuote(HALL_CD));

	  if(schRow>0)
	  {
		if(ds_HALL_MST.getColumn(schRow,"USE_YN")<1)
		{
			g_Message("EE", "현재 선택하신 식당은 사용불가입니다.\n\n사용여부를 사용으로 할 수 없습니다.");
			ds_HALL_DTL.setColumn(e.row,"USE_YN",0);
			return false;
		}

	  }
	}

}

//---------------------------------------------------------
// 영양기준설정 버틀을 클릭할 때 - FSA00080E 를 호출한다.
//---------------------------------------------------------
function Tab00_tab2_grd_HALL_DTL_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	//1.nCell이 영양입력버튼이면
	//strCellProp를 얻어올때 그리드 디자인에 적용된 nCell의 위치를 가져오니 주의 할 것.
	var strCellProp=obj.getCellProperty("body", e.cell, "displaytype");

	if(strCellProp=="button")
	{
		//체크로직 현재 선택된 로우가 normal이 아니면 저장하라는 메세지를 보여준다.
		if (ToLower(GetRowType(ds_HALL_DTL,e.row))!="normal") {
			g_Message("EE", "저장한 식단의 경우만 영양기준을 입력할 수 있습니다. 저장한 후 사용하세요.");
			return false;
		}


		if(gfn_subStr(ds_HALL_DTL.getColumn(e.row,"HALL_CD"),0,3)=="005")
		{
			g_Message("EE", "카페테리아 식당은 영양기준을 입력할 수 없습니다.");
			return false;
		}


	//2.업장코드, 식당코드, 코너, 끼니, NUT_MGMT_TYPE(영양관리구분1:식당, 2:식당+코너)을 가져온다.
		var UPJANG        = ds_HALL_DTL.getColumn(e.row, "UPJANG");
		var UPJANGNM      = edt_upjang.getUpjangCode();
		var HALL_CD       = ds_HALL_DTL.getColumn(e.row, "HALL_CD");
		var HALL_NAME     = ds_HALL_DTL.getColumn(e.row, "HALL_NAME");
		var CORNER        = ds_HALL_DTL.getColumn(e.row, "CORNER");
		var CORNER_NAME   = ds_corner_grd.getColumn(FindRowNF(ds_corner_grd,"CODE",CORNER),"CODE_NAME");
		var MEAL  		  = ds_HALL_DTL.getColumn(e.row, "MEAL");
		var NUT_MGMT_TYPE = ds_HALL_DTL.getColumn(e.row, "NUT_MGMT_TYPE");
		var NUT_TYPE      = ds_HALL_DTL.getColumn(e.row, "NUT_TYPE");
		var SET2          = ds_HALL_DTL.getColumn(e.row, "SET2"); // 1:일반식, 2:병원식

		//	var MEAL        = ds_HALL_DTL.GetColumn(nRow, "MEAL"); --> 영양기준의 최소단위는 코너이다.따라서 끼니는 불필요.

		//	g_Debug("ds_corner_grd");
		//	mfn_show_dataset(ds_corner_grd,"d");

		//3.위의 인수를 팝업창에 넘긴다.
		var strURL="U_FSA::FSA00080E.xfdl";
		var arg={pUPJANG:UPJANG,pUPJANGNM:UPJANGNM,pHALL_CD:HALL_CD,pHALL_NAME:HALL_NAME,pCORNER:CORNER,pCORNER_NAME:CORNER_NAME,pMEAL:MEAL,pNUT_MGMT_TYPE:NUT_MGMT_TYPE,pNUT_TYPE:NUT_TYPE,pSET2:SET2};
		gfn_dialog("", strURL,arg);

		//4.데이터를 처리한다.

		//처리후 다시 조회
		fn_Search_HALL_DTL();
	}
}

function Tab00_tab1_grd_HALL_MST_OnMouseOver(obj:Grid, e:GridMouseEventInfo)
{
	var strMsg = "";
	var v_Value;

	if (e.cell == 9)
	{
		strMsg = "선택하실 경우 선택한 레시피분류가 식단등록시\n레시피검색 기본값으로 자동설정됩니다.";
	}

	 Tab00.tab1.grd_HALL_MST.tooltiptext = strMsg;
}


//사용식단만 보기 이벤트
//체크할 때 ds_HALL_DTL에 필터를 적용한다.
function Tab00_tab2_chk_SHOW_USE_OnClick(obj:CheckBox, e:ClickEventInfo)
{
	if(obj.isChecked()>0)
	{
		//필터를 적용한다.
		ds_HALL_DTL.filter("USE_YN==1");
	}
	else
	{
		ds_HALL_DTL.filter("");
	}

}
 

function Tab00_canchange(obj:Tab, e:TabIndexChangeEventInfo)
{
//var tabIndex = Tab00.tabindex;

    gfn_updateToDatasetAll(obj);

    switch(e.postindex)
	{
		  case 0 :
			  // TAB1 --------------
   				if(gfn_dsIsUpdated(ds_HALL_DTL)){
					g_Message("01", "식당운영정보관리에 변경된 데이터가 있습니다. \n\n현재 데이터를 저장하시거나 또는 조회를 눌러서 초기화 하십시요.");
					return false;
				}

			  break;
		  case 1 :
			  // TAB2 --------------
				if(gfn_dsIsUpdated(ds_HALL_MST)){
					g_Message("01", "업장별 식당관리에 변경된 데이터가 있습니다. \n\n현재 데이터를 저장하시거나 또는 조회를 눌러서 초기화 하십시요.");
					return false;
				}
			  break;
		  default :
		      break;
	}
}
function Tab00_tab2_bnt_Add_Hall_Dtl_onclick(obj:Button,  e:ClickEventInfo)
{
var intHallSelCnt = Tab00.tab2.lstHALL.getSelectedCount();
	if(intHallSelCnt<0) return;

	var intMealConerCnt = Tab00.tab2.lstMEAL_CORNER.length;
	if(intMealConerCnt<=0) return;

   //단건처리
   var UPJANG=edt_upjang.getUpjangCode();
   var HALL_CD=Tab00.tab2.lstHALL.value; var tempIdx = ds_HALL_MST.findRow("HALL_CD", HALL_CD);
   var HALL_NAME = ds_HALL_MST.getColumn(tempIdx, "HALL_NAME");
   var NUT_MGMT_TYPE = ds_HALL_MST.getColumn(tempIdx,"NUT_MGMT_TYPE");  						   // 영양관리기준1.식당2.식당+코너
   var NUT_TYPE = ds_hall_class.getColumn(ds_hall_class.findRow("CODE", gfn_left(HALL_CD,3)),"SET4");  // 기본적인 영양구분을 위해서 설정
   var CORNER_TYPE = ds_HALL_MST.getColumn(tempIdx, "CORNER_TYPE");                                // 코너필터를 사용하기위해 설정

   var RATION_METHOD=Tab00.tab2.cbo_ration_method.value;
   var MEAL_UPRICE=Tab00.tab2.mEd_MEAL_UPRICE.value;
   var AVG_MEAL_QTY=Tab00.tab2.mEd_AVG_MEAL_QTY.value;
   var D_DAY=Tab00.tab2.cbo_d_day.value;
   var FIRST_START_TIME=Tab00.tab2.mEd_FIRST_START_TIME.value;
   var FIRST_END_TIME=Tab00.tab2.mEd_FIRST_END_TIME.value;

   /////// 업장
	if(gfn_length(UPJANG)==0)
	{
		g_Message("EE", "식단을 추가하려는 업장을 선택하여 주십시요.");
		return false;
	}

	/////// 식당
	if(gfn_length(HALL_CD)==0)
	{
		g_Message("EE", "식단을 추가하려는 식당을 선택하여 주십시요.");
		return false;
	}


   //식당 사용여부 확인
   var USE_YN_HALL_MST=ds_HALL_MST.getColumn(tempIdx,"USE_YN");

   //식당사용여부 N일경우 식당운영을 만들지 않는다.
   if(USE_YN_HALL_MST==0){g_Message("EE", "현재 선택하신 식당은 사용불가입니다.\n\n식단을 추가 할 수 없습니다."); return false; }


   //다중처리

   for(var i=0;i<ds_meal_corner.rowcount;i++)
   {

		//행사식당은 식당운영을 만들지 않는다.
		if(gfn_subStr(HALL_CD,0,3)=="010") { continue; }

		var MEAL= ds_meal_corner.getColumn(i,"MEAL");
		var CORNER=ds_meal_corner.getColumn(i,"CORNER");

		if(ds_HALL_DTL.findRowExpr("UPJANG=="+wrapQuote(UPJANG)+"&&HALL_CD=="+wrapQuote(HALL_CD)+"&&MEAL=="+wrapQuote(MEAL)+"&&CORNER=="+wrapQuote(CORNER))==-1)
		{
			ds_HALL_DTL.addRow();
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"UPJANG",UPJANG);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"HALL_CD",HALL_CD);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"HALL_NAME",HALL_NAME);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"MEAL",MEAL);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"CORNER",CORNER);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"RATION_METHOD",RATION_METHOD);
			if(gfn_subStr(HALL_CD,0,3)=='005')
		    {
			    MEAL_UPRICE=0;
			}
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"MEAL_UPRICE",MEAL_UPRICE);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"AVG_MEAL_QTY",AVG_MEAL_QTY);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"D_DAY",D_DAY);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"FIRST_START_TIME",FIRST_START_TIME);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"FIRST_END_TIME",FIRST_END_TIME);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"NUT_YN",'N'); //INSERT 할때 영양구분존재여부는 N으로 설정한다.
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"USE_YN",1);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"NUT_MGMT_TYPE", NUT_MGMT_TYPE);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"NUT_TYPE", NUT_TYPE);
			ds_HALL_DTL.setColumn(ds_HALL_DTL.rowposition,"CORNER_TYPE", CORNER_TYPE);
		}

   }

   //식당 디테일 데이터 정렬
   //ds_HALL_DTL.Sort("CORNER,MEAL");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_muChange(obj, event)
 * 기ㅡㅡㅡ능 : 사업부 변경시 운영부서, 사업장 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function fn_muChange(obj, event)
{
	edt_tm.setTmCode("");
	edt_upjang.setUpjangCode("");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_tmChange(obj, data)
 * 기ㅡㅡㅡ능 : 운영부서 변경시 사업장 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function fn_tmChange(obj, data)
{
	if(gfn_isNull(edt_tm.getTmCode()))
	{
		cbo_mu.setMuCode("");
	}
	edt_upjang.setUpjangCode("");
}]]></Script>
  </Form>
</FDL>
