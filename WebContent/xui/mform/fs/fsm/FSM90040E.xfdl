<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FSM90040E" classname="SAMPLE01" inheritanceid="" position="absolute 0 0 1252 725" titletext="식수예측(병원식)" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="8" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 1237 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 1237 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static10" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 420 40 450 61" anchor="left top"/>
        <Static id="Static14" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 495 40 505 61" anchor="left top"/>
        <Static id="Static15" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 637 40 667 61" anchor="left top"/>
        <Static id="Static23" text="제공일" class="sta_WFSA_label" position="absolute 667 41 727 62" anchor="left top"/>
        <Static id="Static24" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 712 40 722 61" anchor="left top"/>
        <ObjCalendar id="cal_menuDate" anchor="left top" titletext="캘린더" taborder="3" scrollbars="none" position="absolute 722 40 817 61"/>
        <Static id="Static00" text="식당명" class="sta_WFSA_label" position="absolute 450 41 510 62" anchor="left top"/>
        <Combo id="cbo_hall" taborder="2" position="absolute 505 40 637 61" index="-1" innerdataset="@ds_cboHall" codecolumn="HALL_CD" datacolumn="HALL_NAME" onitemchanged="cbo_hall_onitemchanged"/>
        <Static id="Static41" text="발주자재가 있는 식단, 식단(실재식단)에 실식수 인원이 등록되어 있는 경우 입력 또는 수정 할 수 없습니다." class="sta_WF_DiscPoint" position="absolute 577 115 1237 130" anchor="top right"/>
        <CheckBox id="chk_month" taborder="4" text="한달조회" position="absolute 826 40 896 60" onclick="chk_month_onclick"/>
        <Static id="Static13" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 896 40 926 61" anchor="left top"/>
        <Static id="Static16" text="코너" class="sta_WFSA_label" position="absolute 926 41 986 62" anchor="left top"/>
        <Static id="Static17" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 957 40 967 61" anchor="left top"/>
        <Combo id="cbo_corner" taborder="5" position="absolute 967 40 1072 61" innerdataset="@ds_cboCorner" codecolumn="CORNER" datacolumn="CORNER_NAME" onitemchanged="cbo_corner_onitemchanged"/>
        <Static id="Static18" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 1072 40 1102 61" anchor="left top"/>
        <Static id="Static20" text="끼니" class="sta_WFSA_label" position="absolute 1102 41 1162 62" anchor="left top"/>
        <Static id="Static21" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 1133 40 1143 61" anchor="left top"/>
        <Combo id="cbo_meal" taborder="6" innerdataset="@ds_cboMeal" codecolumn="MEAL" datacolumn="MEAL_NAME" position="absolute 1143 40 1222 61"/>
        <Static id="Static22" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1222 40 1237 61" anchor="left top"/>
        <Static id="Static25" text="식단목표 식재료율(%)" class="sta_WFDA_Label01" position="absolute 0 76 145 103" anchor="left top" style="background:#e1e6f6ff;font:Gulim,9;"/>
        <Static id="Static26" text="식단주기" class="sta_WFDA_Label01" position="absolute 235 76 303 103" anchor="left top"/>
        <Static id="Static27" text="주기식단일" class="sta_WFDA_Label01" position="absolute 377 76 457 103" anchor="left top"/>
        <Static id="Static02" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 71 1237 76"/>
        <Edit id="edt_menuCycle" taborder="29" position="absolute 302 76 378 103" style="background:white;padding:0 0 0 0;align:center middle;" anchor="left top" enable="false"/>
        <Static id="Static12" class="sta_WFDA_Labelbg" position="absolute 722 76 1237 103" anchor="left top right"/>
        <Combo id="cbo_aCorner" taborder="30" innerdataset="@ds_cboCorner" codecolumn="CORNER" datacolumn="CORNER_NAME" position="absolute 775 79 899 100" anchor="left top" onitemchanged="cbo_aCorner_onitemchanged"/>
        <Combo id="cbo_aMeal" taborder="31" innerdataset="@ds_cboAmeal" codecolumn="MEAL" datacolumn="MEAL_NAME" position="absolute 949 79 1060 100" anchor="left top"/>
        <Static id="Static28" text="코너" class="sta_WFDA_Label01" position="absolute 727 76 773 103" anchor="left top"/>
        <Static id="Static29" text="끼니" class="sta_WFDA_Label01" position="absolute 901 76 947 103" anchor="left top"/>
        <Static id="Static30" text="식수" class="sta_WFDA_Label01" position="absolute 1062 76 1108 103" anchor="left top"/>
        <MaskEdit id="edt_expectMealQty" taborder="32" mask="#,###.#" position="absolute 1110 79 1167 100" anchor="left top" style="color:blue;font:Gulim,9,bold;" tooltiptext="식수"/>
        <Button id="btn_allSet" taborder="33" text="일괄적용" class="btn_WF_Function" position="absolute 1169 79 1234 99" anchor="left top" onclick="btn_allSet_onclick"/>
        <Static id="Static11" text="식수일괄적용" class="sta_WFDA_Label01" position="absolute 631 76 728 103" anchor="left top" style="background:#e1e6f6ff;font:Gulim,9;"/>
        <MaskEdit id="edt_menuPeriod" taborder="34" type="string" mask="####-##-## ~ ####-##-##" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" oneditclick="g_Date_OnFocus" enable="false" position="absolute 456 76 632 103" style=":disabled {background:white;padding:0 0 0 0;align:center middle;}"/>
        <Grid id="grd_mealQtyList" taborder="7" binddataset="ds_mealQtyList" autoenter="select" useinputpanel="false" selecttype="multiarea" autofittype="none" position="absolute 0 135 1237 521" anchor="left top right" style="border:1 solid #53606cff,1 solid #c3c3c3ff,1 solid #c3c3c3ff,1 solid #c3c3c3ff;">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="115" band="left"/>
                <Column size="70" band="left"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="코너" taborder="undefined"/>
                <Cell col="1" rowspan="2" text="끼니" taborder="undefined"/>
                <Cell col="2" taborder="undefined"/>
                <Cell col="3" rowspan="2" taborder="undefined"/>
                <Cell col="4" taborder="undefined"/>
                <Cell col="5" rowspan="2" taborder="undefined"/>
                <Cell col="6" taborder="undefined"/>
                <Cell col="7" rowspan="2" taborder="undefined"/>
                <Cell col="8" taborder="undefined"/>
                <Cell col="9" rowspan="2" taborder="undefined"/>
                <Cell col="10" taborder="undefined"/>
                <Cell col="11" rowspan="2" taborder="undefined"/>
                <Cell col="12" style="color:#99ccffff;" taborder="undefined"/>
                <Cell col="13" rowspan="2" taborder="undefined"/>
                <Cell col="14" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="15" rowspan="2" taborder="undefined"/>
                <Cell col="16" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="17" rowspan="2" taborder="undefined"/>
                <Cell col="18" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="19" rowspan="2" taborder="undefined"/>
                <Cell col="20" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="21" rowspan="2" taborder="undefined"/>
                <Cell row="1" col="2" taborder="undefined"/>
                <Cell row="1" col="4" taborder="undefined"/>
                <Cell row="1" col="6" taborder="undefined"/>
                <Cell row="1" col="8" taborder="undefined"/>
                <Cell row="1" col="10" taborder="undefined"/>
                <Cell row="1" col="12" taborder="undefined"/>
                <Cell row="1" col="14" taborder="undefined"/>
                <Cell row="1" col="16" taborder="undefined"/>
                <Cell row="1" col="18" taborder="undefined"/>
                <Cell row="1" col="20" taborder="undefined"/>
              </Band>
              <Band id="body">
                <Cell style="line: ;background:whitesmoke;background2:whitesmoke;" text="expr:!gfn_isNull(KEY) ? SGBN_NM : ''" suppress="1" suppressalign="middle"/>
                <Cell col="1" style="background:#e1e6f6ff;background2:#e1e6f6ff;" text="expr:!gfn_isNull(KEY) ? CGBN : ''"/>
                <Cell col="2" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;color:EXPR(!gfn_isNull(C2) ? &quot;C2&quot; : &quot;black&quot;);" text="bind:Q2" editautoselect="true" taborder="undefined"/>
                <Cell col="4" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q3" editautoselect="true" taborder="undefined"/>
                <Cell col="6" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q4" editautoselect="true" taborder="undefined"/>
                <Cell col="8" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q5" editautoselect="true" taborder="undefined"/>
                <Cell col="10" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q6" editautoselect="true" taborder="undefined"/>
                <Cell col="12" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q7" editautoselect="true" taborder="undefined"/>
                <Cell col="14" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q1" editautoselect="true" taborder="undefined"/>
                <Cell col="16" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q1" editautoselect="true" taborder="undefined"/>
                <Cell col="18" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q1" editautoselect="true" taborder="undefined"/>
                <Cell col="20" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q1" editautoselect="true" taborder="undefined"/>
                <Cell col="21" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" text="bind:Q1" editautoselect="true" taborder="undefined"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="grd_pastMealQtyList" taborder="36" binddataset="ds_pastMealQtyList" autoenter="select" useinputpanel="false" selecttype="multiarea" oncelldblclick="tab_menu_tabpage1_grd_mealQtyList_oncelldblclick" position="absolute 0 557 1237 710" anchor="all" style="border:1 solid #53606cff,1 solid #c3c3c3ff,1 solid #c3c3c3ff,1 solid #c3c3c3ff;">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="110" band="left"/>
                <Column size="75" band="left"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
                <Column size="70"/>
                <Column size="35"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" text="코너" taborder="undefined"/>
                <Cell col="1" rowspan="2" text="끼니" taborder="undefined"/>
                <Cell col="2" taborder="undefined"/>
                <Cell col="3" rowspan="2" taborder="undefined"/>
                <Cell col="4" taborder="undefined"/>
                <Cell col="5" rowspan="2" taborder="undefined"/>
                <Cell col="6" taborder="undefined"/>
                <Cell col="7" rowspan="2" taborder="undefined"/>
                <Cell col="8" taborder="undefined"/>
                <Cell col="9" rowspan="2" taborder="undefined"/>
                <Cell col="10" taborder="undefined"/>
                <Cell col="11" rowspan="2" taborder="undefined"/>
                <Cell col="12" style="color:#99ccffff;" taborder="undefined"/>
                <Cell col="13" rowspan="2" taborder="undefined"/>
                <Cell col="14" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="15" rowspan="2" taborder="undefined"/>
                <Cell col="16" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="17" rowspan="2" taborder="undefined"/>
                <Cell col="18" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="19" rowspan="2" taborder="undefined"/>
                <Cell col="20" style="color:#ffcc00;" taborder="undefined"/>
                <Cell col="21" rowspan="2" taborder="undefined"/>
                <Cell row="1" col="2" taborder="undefined"/>
                <Cell row="1" col="4" taborder="undefined"/>
                <Cell row="1" col="6" taborder="undefined"/>
                <Cell row="1" col="8" taborder="undefined"/>
                <Cell row="1" col="10" taborder="undefined"/>
                <Cell row="1" col="12" taborder="undefined"/>
                <Cell row="1" col="14" taborder="undefined"/>
                <Cell row="1" col="16" taborder="undefined"/>
                <Cell row="1" col="18" taborder="undefined"/>
                <Cell row="1" col="20" taborder="undefined"/>
              </Band>
              <Band id="body">
                <Cell style="line: ;background:whitesmoke;background2:whitesmoke;" text="expr:!gfn_isNull(KEY) ? SGBN_NM : ''" suppress="1" suppressalign="middle"/>
                <Cell col="1" style="background:#e1e6f6ff;background2:#e1e6f6ff;"/>
                <Cell col="2" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;color:EXPR(!gfn_isNull(C2) ? &quot;C2&quot; : &quot;black&quot;);" editautoselect="true" taborder="undefined"/>
                <Cell col="4" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="6" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="8" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="10" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="12" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="14" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="16" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="18" colspan="2" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="20" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
                <Cell col="21" displaytype="number" edittype="masknumber" style="padding:0 5 0 0;line: ;" editautoselect="true" taborder="undefined"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static31" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 526 597 539"/>
        <Static id="Static32" text="과거식단 예측식수 조회" class="sta_WF_Title01" position="absolute 0 539 450 557" anchor="left top"/>
        <Static id="Static33" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 552 450 557"/>
        <Static id="Static09" text="기간" class="sta_WFDA_Label01" position="absolute 710 528 816 555" anchor="top right"/>
        <Static id="Static34" class="sta_WFDA_Labelbg" position="absolute 815 528 1237 555" anchor="top right"/>
        <Button id="btn_pastSearch" taborder="39" text="식수조회" class="btn_WF_Function" position="absolute 1054 531 1119 551" anchor="top right" onclick="btn_pastSearch_onclick"/>
        <Button id="btn_pastSet" taborder="40" text="과거식수 적용하기" class="btn_WF_Function" position="absolute 1121 531 1234 551" anchor="top right" onclick="btn_pastSet_onclick"/>
        <Static id="Static35" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 0 129 690 135" anchor="top right"/>
        <Static id="Static36" text="예측식수 조회" class="sta_WF_Title01" position="absolute 0 116 154 134" anchor="left top"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 103 597 116"/>
        <Static id="Static37" text="~" position="absolute 922 533 949 553" style="align:center middle;" anchor="top right"/>
        <ObjCalendar id="cal_endDate" anchor="top right" titletext="캘린더" taborder="41" scrollbars="none" position="absolute 948 531 1051 552"/>
        <ObjCalendar id="cal_startDate" anchor="top right" titletext="캘린더" taborder="42" scrollbars="none" position="absolute 818 531 921 552"/>
        <Static id="Static38" class="sta_WFDA_Labelbg" position="absolute 144 76 236 103" anchor="default"/>
        <MaskEdit id="edt_goalCostRate" taborder="24" mask="#,###.#" position="absolute 147 79 213 100" anchor="left top" style="color:blue;font:Gulim,9,bold;" ontextchanged="edt_goalCostRate_ontextchanged" tooltiptext="식단목표 식재료율" class="msk_WF_Essential"/>
        <Static id="Static39" text="%" position="absolute 210 80 237 100" style="align:center middle;"/>
        <Static id="Static03" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 216 40 226 61" anchor="left top"/>
        <Static id="Static01" text="사업장" class="sta_WFSA_label" position="absolute 172 41 232 62" anchor="left top"/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="1" text="UpjangSearchComponent00" position="absolute 226 40 420 61" bindDataset="ds_cond" bindUpjangCodeColumn="UPJANG" bindUpjangNameColumn="UPJANGNM" eventBeforeTrigger="" eventAfterTrigger="fn_hallSearch" roleSetId=""/>
        <Static id="Static40" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 33 40 43 61" anchor="left top"/>
        <Static id="Static42" text="팀" class="sta_WFSA_label" position="absolute 15 41 75 62" anchor="left top"/>
        <TmSearchComponent id="edt_tm" titletext="팀 검색용 Component" taborder="0" text="TmSearchComponent00" position="absolute 43 40 150 61" bindDataset="" bindTmCdColumn="" bindTmNmColumn="" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmChange" eventBeforeTrigger=""/>
        <Static id="Static43" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 150 40 172 61" anchor="left top"/>
        <MuSearchComponent id="cbo_mu" titletext="사업부 선택 Component" taborder="45" text="MuSearchComponent00" visible="false" position="absolute 343 108 488 129" bindDataset="" bindMuCdColumn="" appendText="" onItemChangedEvent=""/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cboHall" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="HALL_NAME" type="STRING" size="256"/>
          <Column id="MENU_CYCLE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="UPJANGNM" type="STRING" size="256"/>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="HALL_NM" type="STRING" size="256"/>
          <Column id="MENU_DATE" type="STRING" size="256"/>
          <Column id="START_DATE" type="STRING" size="256"/>
          <Column id="END_DATE" type="STRING" size="256"/>
          <Column id="EMP_NO" type="STRING" size="256"/>
          <Column id="CORNER" type="STRING" size="256"/>
          <Column id="MEAL" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_headList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_bodyList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_menuList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="KEY" type="STRING" size="256"/>
          <Column id="MENU_CD" type="STRING" size="256"/>
          <Column id="SGBN" type="STRING" size="256"/>
          <Column id="SGBN_NM" type="STRING" size="256"/>
          <Column id="CGBN_CD" type="STRING" size="256"/>
          <Column id="CGBN" type="STRING" size="256"/>
          <Column id="SSEQ" type="STRING" size="256"/>
          <Column id="SALE_PRICE" type="BIGDECIMAL" size="256"/>
          <Column id="M2" type="STRING" size="256"/>
          <Column id="M3" type="STRING" size="256"/>
          <Column id="M4" type="STRING" size="256"/>
          <Column id="M5" type="STRING" size="256"/>
          <Column id="M6" type="STRING" size="256"/>
          <Column id="M7" type="STRING" size="256"/>
          <Column id="M1" type="STRING" size="256"/>
          <Column id="P2" type="BIGDECIMAL" size="256"/>
          <Column id="P3" type="BIGDECIMAL" size="256"/>
          <Column id="P4" type="BIGDECIMAL" size="256"/>
          <Column id="P5" type="BIGDECIMAL" size="256"/>
          <Column id="P6" type="BIGDECIMAL" size="256"/>
          <Column id="P7" type="BIGDECIMAL" size="256"/>
          <Column id="P1" type="BIGDECIMAL" size="256"/>
          <Column id="T2" type="STRING" size="256"/>
          <Column id="T3" type="STRING" size="256"/>
          <Column id="T4" type="STRING" size="256"/>
          <Column id="T5" type="STRING" size="256"/>
          <Column id="T6" type="STRING" size="256"/>
          <Column id="T7" type="STRING" size="256"/>
          <Column id="T1" type="STRING" size="256"/>
          <Column id="D2" type="STRING" size="256"/>
          <Column id="D3" type="STRING" size="256"/>
          <Column id="D4" type="STRING" size="256"/>
          <Column id="D5" type="STRING" size="256"/>
          <Column id="D6" type="STRING" size="256"/>
          <Column id="D7" type="STRING" size="256"/>
          <Column id="D1" type="STRING" size="256"/>
          <Column id="C2" type="STRING" size="256"/>
          <Column id="C3" type="STRING" size="256"/>
          <Column id="C4" type="STRING" size="256"/>
          <Column id="C5" type="STRING" size="256"/>
          <Column id="C6" type="STRING" size="256"/>
          <Column id="C7" type="STRING" size="256"/>
          <Column id="C1" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mealQtyBodyList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_mealQtyBodyList_oncolumnchanged"/>
      <Dataset id="ds_mealQtyList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_mealQtyList_oncolumnchanged"/>
      <Dataset id="ds_costRate">
        <ColumnInfo>
          <Column id="RMK" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sgbn">
        <ColumnInfo>
          <Column id="SGBN" size="256" type="STRING"/>
          <Column id="SGBN_NM" size="256" type="STRING"/>
          <Column id="CGBN" size="256" type="STRING"/>
          <Column id="CGBN_NM" size="256" type="STRING"/>
          <Column id="CGBN_CD" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_return">
        <ColumnInfo>
          <Column id="RTN" size="256" type="STRING"/>
          <Column id="RTNMSG" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="RTN"/>
            <Col id="RTNMSG"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_input">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="SDATE" size="256" type="STRING"/>
          <Column id="O_RTN" size="256" type="STRING"/>
          <Column id="O_RTNMSG" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_menuCycle" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_cboCorner" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CORNER" type="STRING" size="256"/>
          <Column id="CORNER_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboMeal">
        <ColumnInfo>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="MEAL_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboAmeal">
        <ColumnInfo>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="MEAL_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pastHeadList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_pastMealQtyBodyList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_pastMealQtyList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_pastCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="UPJANGNM" type="STRING" size="256"/>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="HALL_NM" type="STRING" size="256"/>
          <Column id="MENU_DATE" type="STRING" size="256"/>
          <Column id="START_DATE" type="STRING" size="256"/>
          <Column id="END_DATE" type="STRING" size="256"/>
          <Column id="EMP_NO" type="STRING" size="256"/>
          <Column id="CORNER" type="STRING" size="256"/>
          <Column id="MEAL" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goalCostRate" oncolumnchanged="ds_GOAL_COST_RATE_OnColumnChanged">
        <ColumnInfo>
          <Column id="MENU_DATE" size="10" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="HALL_CD" size="20" type="STRING"/>
          <Column id="GOAL_COST_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="FLAG" size="1" type="STRING"/>
          <Column id="START_DATE" type="STRING" size="256"/>
          <Column id="END_DATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sysDate" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="cbo_hall" propid="value" datasetid="ds_cond" columnid="HALL_CD"/>
      <BindItem id="item1" compid="cbo_corner" propid="value" datasetid="ds_cond" columnid="CORNER"/>
      <BindItem id="item2" compid="cbo_meal" propid="value" datasetid="ds_cond" columnid="MEAL"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";

/******************************************************************************************
 * 시스템구분 : 메뉴관리/식단관리
 * 프로그램명 : FSM90040E.XML
 * 기ㅡㅡㅡ능 : 식수예측(병원용)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************/

//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================

//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(this);

	// X-Framework : Action 정보 생성
	fsp_init(this);
	
	// 초기화
	fn_init();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_init()
 * 기ㅡㅡㅡ능 : 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_init()
{
	// 조회조건 초기화
	ds_cond.clearData();
	ds_cond.addRow();
	ds_pastCond.clearData();
	ds_pastCond.addRow();

	// 권한처리
	edt_tm.applyAuthLevel(cbo_mu);
	edt_upjang.applyAuthLevel(edt_tm);

	// 공통코드 조회
	var v_fil_cond;
	var v_ds = fn_common_code("'FS0025'","","","non","Y");

	// FS0025 : 식단주기
	v_fil_cond = "GROUP_CODE == 'FS0025'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_menuCycle, v_ds.name);
	
	// 식당정보 조회
	fn_hallSearch();
	
	// 제공일 초기화
	cal_menuDate.fn_initMonthCal(this, gfn_today(), "fn_callbackMenuDate", ds_cond, "MENU_DATE", "Y");
	
	// 과거 식단식수 조회기간 초기화
	cal_startDate.fn_initMonthCal(this, "", "", ds_pastCond, "START_DATE", "Y");
	cal_endDate.fn_initMonthCal(this, "", "", ds_pastCond, "END_DATE", "Y");
	
	fsp_clear(this);
	fsp_addSearch(this, "sc/scc:SCC_TODAY");        // 시스템일자
	fsp_callService(this, "", "", "", "ds_sysDate=ds_GetDate", "", "");
	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_callbackMenuDate()
 * 기ㅡㅡㅡ능 : 제공일 변경시 기간 재계산
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_callbackMenuDate()
{
	if(gfn_isNull(ds_cboHall.getColumn(0, "MENU_CYCLE"))) return;
	
	if(cal_menuDate.fn_getValue() < '20080701')
	{
		g_Message("EE", "식단은 2008년 07월01일 부터 작성하실 수 있습니다.\n\n2008년 07월01일 이후 날짜를 선택하여 주십시요.");
		return false;	
	}

	fn_setPeriod(ds_cboHall.getColumn(0, "MENU_CYCLE"));
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_initData()
 * 기ㅡㅡㅡ능 : 화면 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_initData() {

	// 그리드 데이터 초기화
	ds_mealQtyList.clearData();		    // 식수예측 그리드
	ds_pastMealQtyList.clearData();	    // 과거식수예측 그리드
	ds_goalCostRate.clearData();		// 식단목표식재료율
	ds_mealQtyBodyList.clearData();		// 식수예측
	ds_pastMealQtyBodyList.clearData();	// 과거식수예측
	
	// Text 초기화
	edt_goalCostRate.value = "";
	edt_menuCycle.value = "";
	edt_menuPeriod.value = "";
	edt_expectMealQty.value = "";
}

//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,출력)
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_search()
 * 기ㅡㅡㅡ능 : 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_search()
{
	// 업장 체크
	if(gfn_isNull(ds_cond.getColumn(0, "UPJANG")))
	{
		g_Message("EE",	"업장을 입력해주세요.");
		return;
	}

	// 식당 체크
	if(gfn_isNull(ds_cond.getColumn(0, "HALL_CD")))
	{
		g_Message("EE",	"식당을 선택해주세요.");
		return;
	}

	// 식단제공일 필수 체크
	if(gfn_isNull(ds_cond.getColumn(0, "MENU_DATE")))
	{
		g_Message("EE",	"식단 제공일을 입력해주세요.");
		return;
	}

	if(gfn_length(edt_menuCycle.value)==0)
	{
		g_Message("EE","식단주기가 설정되어 있지 않습니다.\n\n식단주기를 설정한 후 사용하여 주십시요.");
		return false;
	}

	// 한달조회가 체크되어 있다면 - 한달 단위로 조회한다.
	if(chk_month.value == 1)
	{
		ds_cond.setColumn(0, "START_DATE", gfn_getFirstDate(ds_cond.getColumn(0, "START_DATE")));
		ds_cond.setColumn(0, "END_DATE", gfn_getLastDate(ds_cond.getColumn(0, "MENU_DATE")));
	} else {
		// 주기식단일 값 세팅
		var sMenuCycle = ds_cboHall.lookup("HALL_CD", cbo_hall.value, "MENU_CYCLE");
		fn_setPeriod(sMenuCycle);		
	}
	
	// 그리드 데이터 초기화
	ds_mealQtyList.clearData();		    // 식수예측 그리드
	ds_pastMealQtyList.clearData();	    // 과거식수예측 그리드
	ds_goalCostRate.clearData();		// 식단목표식재료율
	ds_mealQtyBodyList.clearData();		// 식수예측
	ds_pastMealQtyBodyList.clearData();	// 과거식수예측
	
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM90030E_S001");  // 헤더 정보
	fsp_addSearch(this, "fs/fsm:FSM00223E_S001");  // 식수예측 정보
	fsp_addSearch(this, "fs/fsm:FSM00223E_S002");  // 식단목표 식재료율 정보
	fsp_callService(this, "", "", "ds_in=ds_cond", "ds_headList=DS_head ds_mealQtyBodyList=ds_EXPECT_MEAL ds_goalCostRate=ds_GOAL_COST_RATE" , "", "fn_callbackSearch");	
	
	
	
}

function fn_callbackSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}

	// 그리드 데이터 세팅
	fn_setMealQtyGridData(grd_mealQtyList, ds_mealQtyList, ds_headList, ds_mealQtyBodyList, "E");
	
	// 식단목표 식재료율 세팅
	edt_goalCostRate.value = ds_goalCostRate.getColumn(0,"GOAL_COST_RATE");
	ds_goalCostRate.applyChange(); // FLAG 값 초기화
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_save()
 * 기ㅡㅡㅡ능 : 저장
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_save()
{
	if((!gfn_dsIsUpdated(ds_mealQtyBodyList)) && (!gfn_dsIsUpdated(ds_goalCostRate)))
	{
		gfn_alert("변경된 데이터가 없습니다."); 
		return false;
	}

	var nGoalCostRate = edt_goalCostRate.value;
	if ((gfn_length(gfn_trim(nGoalCostRate)) <= 0) || (toNumber(nGoalCostRate) <= 0))
	{
		g_Message("EE",	"[주간 목표식재료율]을 입력하세요!");
		edt_goalCostRate.setFocus();
		return;
	}

    //주기 기간동안 목표식재료율 모두 업데이트 추가(2017.02.07 김호석)
	ds_goalCostRate.setColumn(0, "START_DATE", ds_cond.getColumn(0, "START_DATE"));
	ds_goalCostRate.setColumn(0, "END_DATE", ds_cond.getColumn(0, "END_DATE"));		
	//alert(ds_goalCostRate.getColumn(0, "START_DATE"));
	//alert(ds_goalCostRate.getColumn(0, "END_DATE"));
	
	
	fsp_clear(this);
			
	// FLAG 컬럼을 가져와서 처리한다. (I:신규, S:조회, U:수정)
	// 실제식단 insert / update		
	fsp_addSave(this, "fs/fsm:FSM00223E_I001", "fs/fsm:FSM00223E_U001", "", "FLAG", "", "", "");
	
	// 주기식단 insert / update
	fsp_addSave(this, "fs/fsm:FSM00223E_I002", "fs/fsm:FSM00223E_U002", "", "FLAG", "", "", "");
						
    // 식재료율 insert / update   		
	fsp_addSave(this, "fs/fsm:FSM00223E_I003", "fs/fsm:FSM00223E_U003", "", "FLAG", "", "", "");						
						
	// 서버 호출 후 조회 
	fsp_callService(this, "", "", "ds_EXPECT_MEAL=ds_mealQtyBodyList:U ds_GOAL_COST_RATE=ds_goalCostRate:U", "" , "", "fn_callbackSave()");
}

function fn_callbackSave(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}

	g_Message("02", "저장 되었습니다.");
	
	// 재조회
	//fn_search();
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_hallSearch()
 * 기ㅡㅡㅡ능 : 식당정보 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_hallSearch()
{
	// 업장이 선택되어 있을 경우에만 조회한다.
	if(gfn_isNull(ds_cond.getColumn(0, "UPJANG"))) return;

	// 기존 데이터 초기화
	fn_initData();

	fsp_clear(this); 
	fsp_addSearch(this, "fs/fsc:FSA_HALL_MST_S001");
	fsp_callService(this, "", "", "", "ds_cboHall=gds_Csqlout", "UPJANG=" + wrapQuote(ds_cond.getColumn(0, "UPJANG")), "fn_callbackHallSearch");
}

function fn_callbackHallSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	// 식단주기가 설정되어 있는 식당만 조회 
	ds_cboHall.filter("gfn_length(MENU_CYCLE) > 0");
	cbo_hall.index = 0;

	if(gfn_isNull(ds_cboHall.getColumn(0, "MENU_CYCLE")))
	{
		g_Message("EE", "주기가 설정된 식당이 없습니다.");
		return;
	}

	// 식단주기 값 세팅
	edt_menuCycle.value = ds_menuCycle.lookup("CODE", ds_cboHall.getColumn(0, "MENU_CYCLE"), "CODE_NAME");
	
	// 주기식단일 값 세팅
	fn_setPeriod(ds_cboHall.getColumn(0, "MENU_CYCLE"));

	// 코너 조회
	fn_cornerSearch();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_cornerSearch()
 * 기ㅡㅡㅡ능 : 코너정보 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_cornerSearch()
{
	var otherArg = "";
	otherArg = "UPJANG=" + wrapQuote(ds_cond.getColumn(0, "UPJANG"));
	otherArg = otherArg + " HALL_CD=" + wrapQuote(gfn_trim(cbo_hall.value));
	otherArg = otherArg + " BLANK='Y'";
	
	fsp_clear(this); 
    fsp_addSearch(this, "fs/fsc:FSC_UPJANG_HALL_CORNER_S001");
    fsp_callService(this, "", "", "", "ds_cboCorner=ds_upjang_hall_corner", otherArg, "fn_callbackCornerSearch");
}

function fn_callbackCornerSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	// 초기값 셋팅
	cbo_corner.index = 0;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_goalCostRateSearch()
 * 기ㅡㅡㅡ능 : 식단목표 식재료율 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_goalCostRateSearch()
{
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00223E_S002");
	fsp_callService(this, "", "", "ds_in=ds_cond", "ds_goalCostRate=ds_GOAL_COST_RATE" , "", "fn_callbackGoalCostRateSearch");	
}

function fn_callbackGoalCostRateSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	edt_goalCostRate.value = ds_goalCostRate.getColumn(0,"GOAL_COST_RATE");
	ds_goalCostRate.applyChange(); // FLAG 값 초기화
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_setHeader(tabPage, menuObj, headObj)
 * 기ㅡㅡㅡ능 : 헤더 데이터 세팅
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_setHeader(grdObj, dsHeadObj) {

	// 헤더 데이터 세팅
	var idx = 0;
	var sDay = "";
	var sImage = "";

	// 그리드 초기화
	for (var i=grdObj.getFormatColCount() - 1; i > 1; i--)
	{
		grdObj.deleteContentsCol('body', i, false);
	}
	
	var nCol;
	for(var i=0; i < dsHeadObj.getRowCount(); i++)
	{
		nCol = grdObj.appendContentsCol();
		grdObj.setFormatColProperty(nCol, "size", 70);
	
		nCol = grdObj.appendContentsCol();
		grdObj.setFormatColProperty(nCol, "size", 35);

		// 날씨 컬럼 머지 처리
		grdObj.mergeContentsCell("head", 0, nCol, 1, nCol, i + 1, false);
	}
	
	for(var i=0; i < grdObj.getFormatColCount() - 1; i++)
	{
		if(i < 2) continue;		

		// 날짜 세팅
		sDay = gfn_subStr(dsHeadObj.getColumn(idx, "FDAY"), 4, 2) + "/" + gfn_subStr(dsHeadObj.getColumn(idx, "FDAY"), 6, 2) + "(" + dsHeadObj.getColumn(idx, "WE") + ")";
		grdObj.setCellProperty("head", i, "text", sDay);
		grdObj.setCellProperty("head", i, "color", "#" + dsHeadObj.getColumn(idx, "WE_COLOR"));
		
		// 날씨 이미지 세팅
		if(!gfn_isNull(dsHeadObj.getColumn(idx, "WIMG")))
		{
			sImage = "URL('theme://convertImages/" + dsHeadObj.getColumn(idx, "WIMG") + ".png')";
		} else {
			sImage = "";
		}
		grdObj.setCellProperty('head', i + 1, 'displaytype', 'image'); 
		grdObj.setCellProperty("head", i + 1, "text", sImage);
		idx ++;
		i ++;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_setMealQtyGridData(grdObj, dsGrdObj, dsHeadObj, dsBodyObj, grdType)
 * 기ㅡㅡㅡ능 : 식수예측 그리드 데이터 세팅
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_setMealQtyGridData(grdObj, dsGrdObj, dsHeadObj, dsBodyObj, grdType)
{
	menuCnt = 0;
	dsGrdObj.clearData();

	// 헤더 세팅
	fn_setHeader(grdObj, dsHeadObj);

	dsGrdObj.clear();
	dsGrdObj.addColumn("KEY"        , "STRING");
	dsGrdObj.addColumn("MEAL"       , "STRING");
	dsGrdObj.addColumn("MEAL_NAME"  , "STRING");
	dsGrdObj.addColumn("CORNER"     , "STRING");
	dsGrdObj.addColumn("CORNER_NAME", "STRING");
	for(var i=0; i<dsHeadObj.getRowCount(); i++)
	{
		dsGrdObj.addColumn("EXPECT_MEAL_QTY" + dsHeadObj.getColumn(i, "FDAY"), "STRING");
		dsGrdObj.addColumn("MENU_DATE"       + dsHeadObj.getColumn(i, "FDAY"), "STRING");
		dsGrdObj.addColumn("MODIFY_YN1"      + dsHeadObj.getColumn(i, "FDAY"), "STRING");		
		dsGrdObj.addColumn("MODIFY_YN2"      + dsHeadObj.getColumn(i, "FDAY"), "STRING");
	}

	// 컬럼 데이터 세팅
	var sKey = "";
	var nRow = 0;
	for(var i=0; i<dsBodyObj.getRowCount(); i++)
	{
		nRow = dsGrdObj.findRow("KEY", dsBodyObj.getColumn(i, "KEY"));
		// 키가 존재하지 않을 경우 행 추가 후 세팅
		if(nRow == -1)
		{
			nRow = dsGrdObj.addRow();
			dsGrdObj.setColumn(nRow, "KEY"         , dsBodyObj.getColumn(i, "KEY"));			// 끼니코드 + 코너코드 + 레시피순번
			dsGrdObj.setColumn(nRow, "MEAL"        , dsBodyObj.getColumn(i, "MEAL"));			// 끼니코드
			dsGrdObj.setColumn(nRow, "MEAL_NAME"   , dsBodyObj.getColumn(i, "MEAL_NAME"));		// 끼니명
			dsGrdObj.setColumn(nRow, "CORNER"      , dsBodyObj.getColumn(i, "CORNER"));		    // 코너코드
			dsGrdObj.setColumn(nRow, "CORNER_NAME" , dsBodyObj.getColumn(i, "CORNER_NAME"));    // 코너명
		}
		dsGrdObj.setColumn(nRow, "EXPECT_MEAL_QTY" + dsBodyObj.getColumn(i, "MENU_DATE"), dsBodyObj.getColumn(i, "EXPECT_MEAL_QTY"));  // 식수
		dsGrdObj.setColumn(nRow, "MENU_DATE"       + dsBodyObj.getColumn(i, "MENU_DATE"), dsBodyObj.getColumn(i, "MENU_DATE"));        // 제공일
		dsGrdObj.setColumn(nRow, "MODIFY_YN1"      + dsBodyObj.getColumn(i, "MENU_DATE"), dsBodyObj.getColumn(i, "MODIFY_YN1"));       // 실식수입력여부
		dsGrdObj.setColumn(nRow, "MODIFY_YN2"      + dsBodyObj.getColumn(i, "MENU_DATE"), dsBodyObj.getColumn(i, "MODIFY_YN2"));       // 주문여부
	}

	// 그리드에 데이터 바인딩 처리 및 속성정의
	var hIdx = dsHeadObj.getRowCount() - 1;
	grdObj.setCellProperty("body", 0, "text", "bind:CORNER_NAME");
	grdObj.setCellProperty("body", 1, "text", "bind:MEAL_NAME");
	for (var i=grdObj.getFormatColCount() - 1; i > 1; i--)
	{
		grdObj.mergeContentsCell("body", 0, i - 1, 0, i, i - 1, false);
		grdObj.setCellProperty("body", i - 1, "text", "bind:EXPECT_MEAL_QTY" + dsHeadObj.getColumn(hIdx, "FDAY"));
		grdObj.setCellProperty("body", i - 1, "align", "right");

		grdObj.setCellProperty("body", i - 1, "displaytype", "number");
		// 실식수입력여부, 주문여부가 Y일 경우 수정 가능 (수정가능 여부)
		if(dsGrdObj.getColumn(0, "MODIFY_YN1" + dsHeadObj.getColumn(hIdx, "FDAY")) == "Y" 
		   && dsGrdObj.getColumn(0, "MODIFY_YN2" + dsHeadObj.getColumn(hIdx, "FDAY")) == "Y")
		{
			// 예측식수만 에디트타입 설정 (E : 예측식수, P : 과거식수)
			if(grdType == "E")
			{
			    // 시스템일자 이전일자에 대해서는 식수 입력 불가하도록 처리
				if(Number(dsHeadObj.getColumn(hIdx, "FDAY")) >= Number(ds_sysDate.getColumn(0, "TODAY")))
				{
					grdObj.setCellProperty("body", i - 1, "edittype", "masknumber");
					grdObj.setCellProperty("body", i - 1, "editautoselect", true);
					grdObj.setCellProperty("body", i - 1, "mask", "#,##0");
					grdObj.setCellProperty("body", i - 1, "background", "#FFFFFF");
					grdObj.setCellProperty("body", i - 1, "background2", "#FFFFFF");
				}
				else
				{
					grdObj.setCellProperty("body", i - 1, "mask", "#,##0");
					grdObj.setCellProperty("body", i - 1, "background", "whitesmoke");
					grdObj.setCellProperty("body", i - 1, "background2", "whitesmoke");
				}
			}
			grdObj.setCellProperty("body", i - 1, "padding", "0 2 0 0");
		}
		else
		{
			grdObj.setCellProperty("body", i - 1, "background", "#EEEEEE");
			grdObj.setCellProperty("body", i - 1, "background2", "#EEEEEE");
		}
		
		i --;
		hIdx --;
	}

	// 표준식단 그리드의 끼니 컬럼 bold 처리
	grdObj.setCellProperty("body", 0, "font", "굴림,9,bold");
	grdObj.setCellProperty("body", 1, "font", "굴림,9,bold");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_setPeriod(menuDate, menuCycle)
 * 기ㅡㅡㅡ능 : 주기식단에 맞추어 식수예측 화면 데이터 가져오기
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_setPeriod(sMenuCycle)
{
	var sMenuDate;		// 제공일
	var sMenuSdate;		// 주기시작일
	var sMenuEdate;		// 주기종료일
	var nCycleValue;	// 주기날짜

	switch (sMenuCycle)
	{
		case "001": //--> 07 일		
			 nCycleValue = 7;
			 break;
		case "002": //--> 10 일
			 nCycleValue = 10;
			 break;
		case "003": //--> 14 일
			 nCycleValue = 14;
			 break;
		case "004": //--> 15 일
			 nCycleValue = 15;
			 break;
		case "005": //--> 한달
			 nCycleValue = 31;
			 break;
		default:
			 break;
	}
	
	/////////////////////////////////////////////////////////////
	// [ 주기일의 시작일, 종료일 구하는 공식 ]
	/////////////////////////////////////////////////////////////
	// 주기시작일 = 메뉴날짜입력일 / 주기일 의 올림 * 주기날짜
	// 3일  / 7일 의 올림은 1 * 7 ==> 7일  - 6 ===> 1
	// 15일 / 7일 의 올림은 3 * 7 ==> 21일 - 6 ===> 15
	// 27일 / 7일 의 올림은 4 * 7 ==> 28일 - 6 ===> 22
	// 29일 / 7일 의 올림은 5 * 7 ==> 35일 - 6 ===> 29
	
	// 3일  / 15일 의 올림은 1 * 15==> 15일 -14 ===> 1
	// 15일 / 15일 의 올림은 1 * 15==> 15일 -14 ===> 1
	// 27일 / 15일 의 올림은 2 * 15==> 30일 -14 ===> 16
	// 29일 / 15일 의 올림은 2 * 15==> 30일 -14 ===> 16 
	// 31일 / 15일 의 올림은 3 * 15==> 45일 -14 ===> 31

	// 시작일
	sMenuDate = cal_menuDate.fn_getValue();
	sMenuSdate = Math.ceil(toNumber(gfn_subStr(sMenuDate, 6, 8)) / nCycleValue) * nCycleValue - nCycleValue + 1;  // 주기일의 시작일
	sMenuSdate = gfn_subStr(sMenuDate, 0, 6) + gfn_lPad(sMenuSdate, "0", 2); //시작날짜
	
	if(sMenuCycle == "005")
	{
		sMenuEdate = gfn_getLastDate(sMenuDate);
	}
	else
	{
		sMenuEdate = gfn_addDate(sMenuSdate, nCycleValue - 1);
	}
	
	ds_cond.setColumn(0, "START_DATE", sMenuSdate);
	ds_cond.setColumn(0, "END_DATE", sMenuEdate);
	edt_menuPeriod.value = sMenuSdate + sMenuEdate;
		
	// 과거식단 예측식수/실식수 조회 기간 설정 (과거 일주일)
	cal_startDate.fn_setValue(gfn_addDate(sMenuSdate, -7));
	cal_endDate.fn_setValue(gfn_addDate(sMenuSdate, -1));
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// 
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_hall_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 식당 변경시 식단주기값 세팅 및 코너조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function cbo_hall_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	// 식당변경시 데이터 초기화
	fn_initData();

	// 식단주기 값 세팅
	var sMenuCycle = ds_cboHall.getColumn(ds_cboHall.findRow("HALL_CD", e.postvalue), "MENU_CYCLE");
	edt_menuCycle.value = ds_menuCycle.getColumn(ds_menuCycle.findRow("CODE", sMenuCycle), "CODE_NAME");
	
	// 주기식단일 값 세팅
	fn_setPeriod(sMenuCycle);
	
	// 코너 조회
	fn_cornerSearch();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_corner_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 코너(조회조건) 변경시 끼니 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function cbo_corner_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	var otherArg = "";
	otherArg = "UPJANG=" + wrapQuote(ds_cond.getColumn(0,"UPJANG"));
	otherArg = otherArg + " HALL_CD=" + wrapQuote(gfn_trim(cbo_hall.value));
	otherArg = otherArg + " CORNER=" + wrapQuote(gfn_trim(obj.value));
	otherArg = otherArg + " BLANK='Y'";
	
	fsp_clear(this); 
    fsp_addSearch(this, "fs/fsc:FSC_UPJANG_HALL_MEAL_S001");
    fsp_callService(this, "", "", "", "ds_cboMeal=ds_upjang_hall_meal", otherArg, "fn_callbackMealSearch");
}

function fn_callbackMealSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	// 초기값 셋팅
	cbo_meal.index = 0;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_aCorner_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 코너(식수일괄적용) 변경시 끼니 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function cbo_aCorner_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	var otherArg = "";
	otherArg = "UPJANG=" + wrapQuote(ds_cond.getColumn(0,"UPJANG"));
	otherArg = otherArg + " HALL_CD=" + wrapQuote(gfn_trim(cbo_hall.value));
	otherArg = otherArg + " CORNER=" + wrapQuote(gfn_trim(obj.value));
	otherArg = otherArg + " BLANK='Y'";
	
	fsp_clear(this); 
    fsp_addSearch(this, "fs/fsc:FSC_UPJANG_HALL_MEAL_S001");
    fsp_callService(this, "", "", "", "ds_cboAmeal=ds_upjang_hall_meal", otherArg, "fn_callbackAmealSearch");
}

function fn_callbackAmealSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	// 초기값 셋팅
	cbo_aMeal.index = 0;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_pastSearch_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 과거식단 예측식수/실식수 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function btn_pastSearch_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_pastCond.setColumn(0, "UPJANG", ds_cond.getColumn(0, "UPJANG"));
	ds_pastCond.setColumn(0, "HALL_CD", ds_cond.getColumn(0, "HALL_CD"));
	ds_pastCond.setColumn(0, "MEAL", ds_cond.getColumn(0, "MEAL"));
	ds_pastCond.setColumn(0, "CORNER", ds_cond.getColumn(0, "CORNER"));

	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM90030E_S001");  // 헤더 정보
	fsp_addSearch(this, "fs/fsm:FSM00223E_S001");  // 식수예측 정보
	fsp_callService(this, "", "", "ds_in=ds_pastCond", "ds_pastHeadList=DS_head ds_pastMealQtyBodyList=ds_EXPECT_MEAL" , "", "fn_callbackPastSearch");		
}

function fn_callbackPastSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}

	// 그리드 데이터 세팅
	fn_setMealQtyGridData(grd_pastMealQtyList, ds_pastMealQtyList, ds_pastHeadList, ds_pastMealQtyBodyList, "P");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_allSet_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 식수일괄적용
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function btn_allSet_onclick(obj:Button,  e:ClickEventInfo)
{
   // 적용식수 입력 체크확인
   if(!mfn_Chk_Obj_MustInput(edt_expectMealQty)) return false;  

	var selCorner = cbo_aCorner.value;
	var selMeal = cbo_aMeal.value;
	var retRtn = false;
	var strCASE = "";
	
	if((gfn_length(selCorner)==0) && (gfn_length(selMeal)==0))
	{
		retRtn = confirm("전체 식단에 적용식수 인원을 적용하시겠습까?");
		strCASE = "ALL";
	}
	
	if((gfn_length(selCorner)<>0) && (gfn_length(selMeal)==0))
	{
		retRtn = confirm("선택하신 코너 [" + cbo_aCorner.text + "] 에 적용식수 인원을 적용하시겠습니까?");
		strCASE = "CORNER";
	}
	
	if((gfn_length(selCorner)==0) && (gfn_length(selMeal)<>0))
	{
		retRtn = confirm("선택하신 끼니 [" + cbo_aMeal.text + "] 에 적용식수 인원을 적용하시겠습니까?");
		strCASE = "MEAL";
	}
	
	if((gfn_length(selCorner)<>0) && (gfn_length(selMeal)<>0))
	{
		retRtn = confirm("선택하신 코너 [" + cbo_aCorner.text + "] 끼니 [" + cbo_aMeal.text + "] 에 적용식수 인원을 적용하시겠습니까?");
		strCASE = "CORNERMEAL";
	}
	
	// 예가 아니면 나간다.
	if(!retRtn){ return false;}
	
	switch (strCASE)
	{
		case "ALL":	
				for(i=0; i<=this.ds_mealQtyBodyList.rowcount;i++)
				{
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN1")!="Y"){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN2")!="Y"){continue;}
				
				    // 시스템일자 이전일자에 대해서는 식수 입력 불가하도록 처리
					if(Number(ds_mealQtyBodyList.getColumn(i, "MENU_DATE")) >= Number(ds_sysDate.getColumn(0, "TODAY")))
					{
						ds_mealQtyBodyList.setColumn(i,"EXPECT_MEAL_QTY", edt_expectMealQty.value);					
					}
				}
				break;
		case "CORNER":
				for(i=0; i<=this.ds_mealQtyBodyList.rowcount;i++)
				{
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN1")!="Y"){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN2")!="Y"){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"CORNER")!=selCorner){continue;}
					
				    // 시스템일자 이전일자에 대해서는 식수 입력 불가하도록 처리
					if(Number(ds_mealQtyBodyList.getColumn(i, "MENU_DATE")) >= Number(ds_sysDate.getColumn(0, "TODAY")))
					{
						ds_mealQtyBodyList.setColumn(i,"EXPECT_MEAL_QTY", edt_expectMealQty.value);
					}
				}
				break;
		case "MEAL":
				for(i=0; i<=this.ds_mealQtyBodyList.rowcount;i++)
				{
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN1")!="Y"){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN2")!="Y"){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"MEAL")!=selMeal){continue;}

				    // 시스템일자 이전일자에 대해서는 식수 입력 불가하도록 처리
					if(Number(ds_mealQtyBodyList.getColumn(i, "MENU_DATE")) >= Number(ds_sysDate.getColumn(0, "TODAY")))
					{
						ds_mealQtyBodyList.setColumn(i,"EXPECT_MEAL_QTY", edt_expectMealQty.value);
					}
				}
				break;
		case "CORNERMEAL":
				for(i=0; i<=this.ds_mealQtyBodyList.rowcount;i++)
				{
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN1")!="Y"){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN2")!="Y"){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"CORNER")!=selCorner){continue;}
					if(ds_mealQtyBodyList.getColumn(i,"MEAL")!=selMeal){continue;}

				    // 시스템일자 이전일자에 대해서는 식수 입력 불가하도록 처리
					if(Number(ds_mealQtyBodyList.getColumn(i, "MENU_DATE")) >= Number(ds_sysDate.getColumn(0, "TODAY")))
					{
						ds_mealQtyBodyList.setColumn(i,"EXPECT_MEAL_QTY", edt_expectMealQty.value);
					}
				}
				break;
		default:
				break;
	}
	
	// 그리드 데이터 세팅
	fn_setMealQtyGridData(grd_mealQtyList, ds_mealQtyList, ds_headList, ds_mealQtyBodyList, "E");

}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : ds_mealQtyList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
 * 기ㅡㅡㅡ능 : 그리드 데이터 변경시 원본데이터 수정
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function ds_mealQtyList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid.substr(0,15) == "EXPECT_MEAL_QTY") {
		var sMenuDate = e.columnid.substr(15, 8);
		var sCorner = obj.getColumn(e.row, "CORNER");
		var sMeal = obj.getColumn(e.row, "MEAL");
		
		// trace(">>>>>"+"MENU_DATE=='"+sMenuDate+"' && CORNER=='"+sCorner+"' && MEAL=='"+sMeal+"'");
		var nFindRow = ds_mealQtyBodyList.findRowExpr("MENU_DATE=='" + sMenuDate + "' && CORNER=='" + sCorner + "' && MEAL=='" + sMeal + "'");
		var nValue = e.newvalue;
		if (nFindRow > -1) {
			ds_mealQtyList.enableevent = false;
			if(e.newvalue == '' || gfn_isNull(e.newvalue)) nValue = 0;
			ds_mealQtyBodyList.setColumn(nFindRow, "EXPECT_MEAL_QTY", nValue);
			ds_mealQtyList.enableevent = true;
		}
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : edt_goalCostRate_ontextchanged(obj:MaskEdit,  e:TextChangedEventInfo)
 * 기ㅡㅡㅡ능 : 식단목표 식재료율이 변경됬을 경우 일별 식재료율에 일괄 정보 반영
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function edt_goalCostRate_ontextchanged(obj:MaskEdit,  e:TextChangedEventInfo)
{
	// 식단목표 식재료율
	if(!mfn_Chk_Obj_MustInput(obj)) return false;  
	
	for(var i=0; i<=ds_goalCostRate.rowcount; i++)
	{
		// 식재료율 값이 변경됬을 경우 FLAG를 U(수정)로 변경
		if(ds_goalCostRate.getColumn(e.row,"FLAG") == "S")
		{
			ds_goalCostRate.setColumn(e.row, "FLAG", "U");
		}
		ds_goalCostRate.setColumn(i, "GOAL_COST_RATE", e.posttext);
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : edt_goalCostRate_ontextchanged(obj:MaskEdit,  e:TextChangedEventInfo)
 * 기ㅡㅡㅡ능 : 식수예측 원본데이터 변경시 FLAG값 변경처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function ds_mealQtyBodyList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid == "EXPECT_MEAL_QTY")
	{
		// 예측식수 값이 변경됬을 경우 FLAG를 U(수정)로 변경
		if(ds_mealQtyBodyList.getColumn(e.row, "FLAG") == "S")
		{
			ds_mealQtyBodyList.setColumn(e.row, "FLAG", "U");
		}
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_pastSet_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 과거식수 적용하기
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function btn_pastSet_onclick(obj:Button,  e:ClickEventInfo)
{
	// 과거 식단 식수 인원 데이터가 있는지 체크한다.
	if(ds_pastMealQtyBodyList.rowcount <= 0)
	{
		g_Message("EE","과거식단 예측식수/실식수를 조회한 후 사용하십시요.");
		return false;
	}
	
	// 확인
	if(!confirm("과거식단 예측식수를 현재 식단 식수예측에 적용하시겠습니까?")) 
	{
		return false;
	}
	
	// 식수인원 예측 복사
	for(var i=0; i<ds_mealQtyBodyList.rowcount;i++)
	{
		// 지난 날짜 등 에러는 건너뛴다.
		if(ds_pastMealQtyBodyList.getRowCount() < i) {break;}
		if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN1")!="Y"){continue;}
		if(ds_mealQtyBodyList.getColumn(i,"MODIFY_YN2")!="Y"){continue;}
		ds_mealQtyBodyList.setColumn(i, "EXPECT_MEAL_QTY", Number(gfn_trim(ds_pastMealQtyBodyList.getColumn(i, "EXPECT_MEAL_QTY"))));
	}
	
	// 그리드 데이터 세팅
	fn_setMealQtyGridData(grd_mealQtyList, ds_mealQtyList, ds_headList, ds_mealQtyBodyList, "E");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : chk_month_onclick(obj:CheckBox,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 한달조회 체크박스 클릭 시 확인 메시지
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function chk_month_onclick(obj:CheckBox,  e:ClickEventInfo)
{
	mfn_chk_display_warning(obj, obj.isChecked(), 1, "한달조회를 하시면 해당월 시작일부터 해당월 마지막날까지 조회가 됩니다.");	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_tmChange(obj, data)
 * 기ㅡㅡㅡ능 : 운영부서 변경시 사업장 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function fn_tmChange(obj, data)
{
	if(gfn_isNull(edt_tm.getTmCode()))
	{
		cbo_mu.setMuCode("");
	}
	edt_upjang.setUpjangCode("");
}]]></Script>
  </Form>
</FDL>
