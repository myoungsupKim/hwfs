<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="MAS50040S" classname="SAMPLE01" inheritanceid="" position="absolute 0 0 1252 725" titletext="폐식용유관리현황(본사)" onload="form_onload">
    <Layouts>
      <Layout>
        <Grid id="grd_list" taborder="8" binddataset="ds_list" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 0 102 1237 710" anchor="all" autofittype="col" formats="&lt;Formats&gt;&#10;  &lt;Format id=&quot;default&quot;&gt;&#10;    &lt;Columns&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;    &lt;/Columns&gt;&#10;    &lt;Rows&gt;&#10;      &lt;Row band=&quot;head&quot; size=&quot;24&quot;/&gt;&#10;      &lt;Row band=&quot;body&quot; size=&quot;24&quot;/&gt;&#10;    &lt;/Rows&gt;&#10;    &lt;Band id=&quot;head&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;수거일자&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;요일&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;사용량&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;발생량&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;수거량&quot;/&gt;&#10;      &lt;Cell col=&quot;5&quot; disptype=&quot;normal&quot; text=&quot;수거단위&quot;/&gt;&#10;      &lt;Cell col=&quot;6&quot; disptype=&quot;normal&quot; text=&quot;계약금액&quot;/&gt;&#10;      &lt;Cell col=&quot;7&quot; disptype=&quot;normal&quot; text=&quot;수거금액&quot;/&gt;&#10;      &lt;Cell col=&quot;8&quot; disptype=&quot;normal&quot; text=&quot;점장확인&quot;/&gt;&#10;      &lt;Cell col=&quot;9&quot; disptype=&quot;normal&quot; text=&quot;비고&quot;/&gt;&#10;    &lt;/Band&gt;&#10;    &lt;Band id=&quot;body&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;bind:수거일자&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;bind:요일&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;bind:사용량&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;bind:발생량&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;bind:수거량&quot;/&gt;&#10;      &lt;Cell col=&quot;5&quot; disptype=&quot;normal&quot; text=&quot;bind:수거단위&quot;/&gt;&#10;      &lt;Cell col=&quot;6&quot; disptype=&quot;normal&quot; text=&quot;bind:계약금액&quot;/&gt;&#10;      &lt;Cell col=&quot;7&quot; disptype=&quot;normal&quot; text=&quot;bind:수거금액&quot;/&gt;&#10;      &lt;Cell col=&quot;8&quot; disptype=&quot;normal&quot; text=&quot;bind:점장확인&quot;/&gt;&#10;      &lt;Cell col=&quot;9&quot; disptype=&quot;normal&quot; text=&quot;bind:비고&quot;/&gt;&#10;    &lt;/Band&gt;&#10;  &lt;/Format&gt;&#10;&lt;/Formats&gt;&#10;" class="grd_WF_LineNone">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="90"/>
                <Column size="100"/>
                <Column size="180"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="100"/>
                <Column size="0"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="40"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" style="align:center;" class="head_Excel"/>
                <Cell col="1" rowspan="2" text="사업부" taborder="undefined"/>
                <Cell col="2" rowspan="2" text="팀" taborder="undefined"/>
                <Cell col="3" rowspan="2" text="사업장"/>
                <Cell col="4" colspan="5" text="기간" taborder="undefined"/>
                <Cell col="9" colspan="3" text="계약정보"/>
                <Cell col="12" rowspan="2" text="수거금액"/>
                <Cell col="13" text="점장확인"/>
                <Cell col="14" rowspan="2" style="background2: ;" text="매출금액" taborder="undefined"/>
                <Cell col="15" rowspan="2" text="세금계산서&#13;&#10;금액" taborder="undefined"/>
                <Cell col="16" rowspan="2" text="전표&#13;&#10;여부" taborder="undefined"/>
                <Cell row="1" col="4" text="사용량"/>
                <Cell row="1" col="5" text="발생량"/>
                <Cell row="1" col="6" text="발생율(%)"/>
                <Cell row="1" col="7" text="수거량"/>
                <Cell row="1" col="8" text="수거율(%)"/>
                <Cell row="1" col="9" text="수거업체"/>
                <Cell row="1" col="10" text="수거단위"/>
                <Cell row="1" col="11" text="계약금액"/>
                <Cell row="1" col="13"/>
              </Band>
              <Band id="body">
                <Cell celltype="none" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" expr="expr:currow+1"/>
                <Cell col="1" style="align:left;background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:MU_NM" suppress="1"/>
                <Cell col="2" style="align:left;background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:TM_NM" suppress="2"/>
                <Cell col="3" displaytype="text" edittype="none" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:UPJANGNM"/>
                <Cell col="4" displaytype="number" edittype="none" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:USE_QTY" mask="#,##0.0"/>
                <Cell col="5" displaytype="number" edittype="none" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:OCCUR_QTY" mask="#,##0.0"/>
                <Cell col="6" displaytype="number" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="expr:iif(USE_QTY == 0, 0, fn_clearNaN(OCCUR_QTY / USE_QTY * 100))" mask="#,##0.0"/>
                <Cell col="7" displaytype="number" edittype="none" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:REMV_QTY" mask="#,##0.0"/>
                <Cell col="8" displaytype="number" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="expr:iif(OCCUR_QTY == 0, 0, fn_clearNaN(REMV_QTY / OCCUR_QTY * 100))" mask="#,##0.0"/>
                <Cell col="9" displaytype="text" edittype="none" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:CUSTNM"/>
                <Cell col="10" displaytype="combo" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:CONTRACT_UNIT" combodataset="ds_contractUnitType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                <Cell col="11" displaytype="number" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:CONTRACT_AMT" mask="#,##0"/>
                <Cell col="12" displaytype="number" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:REMV_AMT" mask="#,##0"/>
                <Cell col="13" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:점장확인"/>
                <Cell col="14" displaytype="number" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:SAL_AMT" mask="#,##0"/>
                <Cell col="15" displaytype="number" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:BAL_AMT" mask="#,##0"/>
                <Cell col="16" style="background:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));background2:EXPR(iif(REMV_AMT &gt; SAL_AMT, 'lightpink', 'default'));" text="bind:JOURNALZ_YN"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1"/>
                <Cell col="2"/>
                <Cell col="3" style="align:center;" text="합 계"/>
                <Cell col="4" displaytype="number" text="expr:getSum('USE_QTY')"/>
                <Cell col="5" displaytype="number" text="expr:getSum('OCCUR_QTY')"/>
                <Cell col="6" displaytype="number" text="expr:iif(getSum('USE_QTY') == 0, 0, fn_clearNaN(getSum('OCCUR_QTY') / getSum('USE_QTY') * 100))" mask="#,##0.0"/>
                <Cell col="7" displaytype="number" text="expr:getSum('REMV_QTY')"/>
                <Cell col="8" displaytype="number" text="expr:iif(getSum('OCCUR_QTY') == 0, 0, fn_clearNaN(getSum('REMV_QTY') / getSum('OCCUR_QTY') * 100))" mask="#,##0.0"/>
                <Cell col="9"/>
                <Cell col="10"/>
                <Cell col="11"/>
                <Cell col="12" displaytype="number" text="expr:getSum('REMV_AMT')"/>
                <Cell col="13"/>
                <Cell col="14" displaytype="number" text="expr:getSum('SAL_AMT')"/>
                <Cell col="15" displaytype="number" text="expr:getSum('BAL_AMT')"/>
                <Cell col="16"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="9" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 1093 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 1093 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static22" text="업장별 폐식용유 수거현황" class="sta_WF_Title01" position="absolute 0 84 450 102" anchor="left top" onclick="Static22_onclick"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 450 84" anchor="left top"/>
        <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 97 450 102" anchor="left top"/>
        <Static id="Static00" text="수거일자" class="sta_WFSA_label" position="absolute 921 41 998 62" anchor="left top"/>
        <Static id="Static25" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1153 97 1237 102" anchor="top right"/>
        <Static id="Static12" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1153 71 1237 77" anchor="top right"/>
        <Static id="Static29" text="w02" class="Guide01_AreaRed" visible="false" position="absolute 1194 77 1196 97" anchor="top right"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 733 40 743 61" anchor="left top"/>
        <Static id="Static28" text="수거업체" class="sta_WFSA_label" position="absolute 675 41 737 62" anchor="left top"/>
        <Static id="Static09" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 891 40 921 61" anchor="left top"/>
        <Combo id="cbo_cust" taborder="3" innerdataset="@ds_custType" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 743 40 891 61" index="-1"/>
        <MaskEdit id="msk_regDdFrom" taborder="4" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" oneditclick="g_Date_OnFocus" position="absolute 989 40 1071 61" style="align:center middle;" class="msk_WF_EssentialCal"/>
        <Button id="btn_regDdFrom" taborder="5" tabstop="false" onclick="g_CalButton_OnClick" class="btn_WF_calEssential" position="absolute 1070 40 1091 61" userdata="msk_regDdFrom"/>
        <Static id="Static13" text="~" position="absolute 1066 42 1092 63" style="align:center middle;"/>
        <MaskEdit id="msk_regDdTo" taborder="6" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" oneditclick="g_Date_OnFocus" position="absolute 1114 40 1196 61" style="align:center middle;" class="msk_WF_EssentialCal"/>
        <Button id="btn_regDdTo" taborder="7" tabstop="false" onclick="g_CalButton_OnClick" class="btn_WF_calEssential" position="absolute 1195 40 1216 61" userdata="msk_regDdTo"/>
        <Static id="Static14" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 980 40 990 61" anchor="left top"/>
        <Static id="Static17" text="W10" visible="false" position="absolute 1091 40 1099 61" style="background:#ff000055;align:center middle;"/>
        <Static id="Static18" text="W10" visible="false" position="absolute 1106 40 1114 61" style="background:#ff000055;align:center middle;"/>
        <Static id="Static19" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 645 40 675 61" anchor="left top"/>
        <Static id="Static01" text="W10" visible="false" position="absolute 61 40 71 61" style="background:#ff000055;align:center middle;"/>
        <Static id="Static02" text="사업부" class="sta_WFSA_label" position="absolute 15 40 69 61" anchor="left top"/>
        <MuSearchComponent id="cbo_mu" titletext="사업부 선택 Component" taborder="0" text="MuSearchComponent00" position="absolute 71 40 185 61" bindDataset="" bindMuCdColumn="" appendText="" onItemChangedEvent="fn_muChange"/>
        <Static id="Static03" text="W30" visible="false" position="absolute 185 40 215 61" style="background:#ff000055;align:center middle;"/>
        <Static id="Static10" text="팀" class="sta_WFSA_label" position="absolute 215 40 237 61" anchor="left top"/>
        <Static id="Static26" text="W10" visible="false" position="absolute 234 40 244 61" style="background:#ff000055;align:center middle;"/>
        <TmSearchComponent id="edt_tm" titletext="팀 검색용 Component" taborder="1" text="TmSearchComponent00" position="absolute 244 40 380 61" bindDataset="" bindTmCdColumn="" bindTmNmColumn="" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmChange" eventBeforeTrigger="" isTeamControl="Y"/>
        <Static id="Static27" text="W30" visible="false" position="absolute 380 40 410 61" style="background:#ff000055;align:center middle;"/>
        <Static id="Static20" text="사업장" class="sta_WFSA_label" position="absolute 410 40 464 61" anchor="left top"/>
        <Static id="Static30" text="W10" visible="false" position="absolute 456 40 466 61" style="background:#ff000055;align:center middle;"/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="2" text="UpjangSearchComponent00" position="absolute 466 40 645 61" bindDataset="" bindUpjangCodeColumn="" bindUpjangNameColumn="" eventBeforeTrigger="" eventAfterTrigger="" roleSetId=""/>
        <Static id="Static21" text="~" position="absolute 1090 41 1116 62" style="align:center middle;"/>
        <Button id="btn_salAmtGap" taborder="10" tabstop="false" text="매출금액차이" class="btn_WF_Custom" visible="true" position="absolute 985 76 1093 97" anchor="top right" userdata="1" onclick="btn_salAmtGap_onclick"/>
        <Button id="btn_balAmtGap" taborder="11" tabstop="false" text="세금계산서금액차이" class="btn_WF_Custom" visible="true" position="absolute 1096 76 1237 97" anchor="top right" userdata="1" onclick="btn_balAmtGap_onclick"/>
        <Static id="Static2" text="매출 미등록 업장" position="absolute 215 80 480 101"/>
        <Static id="Static0" position="absolute 197 82 212 97" style="background:lightpink;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged">
        <ColumnInfo>
          <Column id="MU_NM" type="STRING" size="256"/>
          <Column id="TM_NM" type="STRING" size="256"/>
          <Column id="UPJANGCD" type="STRING" size="256"/>
          <Column id="UPJANGNM" type="STRING" size="256"/>
          <Column id="USE_QTY" type="BIGDECIMAL" size="256"/>
          <Column id="OCCUR_QTY" type="BIGDECIMAL" size="256"/>
          <Column id="REMV_QTY" type="BIGDECIMAL" size="256"/>
          <Column id="CUSTCD" type="STRING" size="256"/>
          <Column id="CUSTNM" type="STRING" size="256"/>
          <Column id="CONTRACT_UNIT" type="STRING" size="256"/>
          <Column id="CONTRACT_AMT" type="STRING" size="256"/>
          <Column id="REMV_AMT" type="BIGDECIMAL" size="256"/>
          <Column id="ACCUM_USE_QTY" type="BIGDECIMAL" size="256"/>
          <Column id="SAL_AMT" type="BIGDECIMAL" size="256"/>
          <Column id="BAL_AMT" type="BIGDECIMAL" size="256"/>
          <Column id="JOURNALZ_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond">
        <ColumnInfo>
          <Column id="TM_CD" type="STRING" size="256"/>
          <Column id="MU_CD" type="STRING" size="256"/>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="CUSTCD" type="STRING" size="256"/>
          <Column id="REG_DD_FROM" type="STRING" size="256"/>
          <Column id="REG_DD_TO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_custType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_contractUnitType">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
 ******************************************************************************************
 * 시스템구분   : IFIS/영업관리/폐식용유관리/폐식용유관리현황
 * 프로그램명   : MAS50040S.xfdl
 * 기      능   : 폐식용유관리현황
 * 작  성  자   : 김경은
 * 작성  일자   : 2015-02-06
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */

//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
include "U_lib::lib_conversionCom.xjs";

//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================


//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//========================================================================================= 
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, true);

	fsp_init(this);	
	
	// 권한처리
	edt_tm.applyAuthLevel(cbo_mu);
	edt_upjang.applyAuthLevel(edt_tm);
	
	
	fn_init();
}


//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_Search()
 * 기      능   : [조회버튼] 검색조건에 해당하는 정보를 조회
 ******************************************************************************************
 */
function fn_search()
{
	// validation 체크
	if ( gfn_isNull(msk_regDdFrom.value) || (gfn_length(msk_regDdFrom.value)< 8) )
	{
		g_Message("EE", "수거일자(From)을 정확하게 입력하세요.");
		msk_regDdFrom.setFocus();
		return true;
	}
	if ( gfn_isNull(msk_regDdTo.value) || (gfn_length(msk_regDdTo.value)< 8) )
	{
		g_Message("EE", "수거일자(To)을 정확하게 입력하세요.");
		msk_regDdTo.setFocus();
		return true;
	}
	if ( msk_regDdFrom.value > msk_regDdTo.value ){
		gfn_alert("시작일이 종료일 보다 이후 날짜입니다. 확인 하시기 바랍니다.");
		return;
	}	
	
	ds_list.filter("")
	ds_cond.clearData();
	ds_list.clearData();
	
	// 파라미터셋팅
	ds_cond.addRow();
	ds_cond.setColumn(0,"MU_CD", cbo_mu.getMuCode());
	ds_cond.setColumn(0,"TM_CD", edt_tm.getTmCode());
    ds_cond.setColumn(0,"UPJANG", edt_upjang.getUpjangCode());
    ds_cond.setColumn(0,"CUSTCD", cbo_cust.value);
    ds_cond.setColumn(0,"REG_DD_FROM", msk_regDdFrom.value);
    ds_cond.setColumn(0,"REG_DD_TO", msk_regDdTo.value);
   
	var strSvcID = "MAS50040S_S001";
	var strURL   = "U_svc::" + "ma/mas/MAS50040S_S001.jsp";
	var strInDatasets = "ds_cond=ds_cond";
	var strOutDatasets = "ds_list=ds_list";
	var strArgument  = "";
	var strCallbackFunc = "fn_callBack";

	jsp_transaction(this, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, true, true, false);
   
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================

/*-----------------------------------------------------------------------------------------
 * 설명      : 화면 처음 로딩시 설정 셋팅
 *----------------------------------------------------------------------------------------*/
function fn_init()
{
	// 일자 셋팅
	msk_regDdFrom.value = gfn_getFirstDate(gfn_today());
	msk_regDdTo.value = gfn_today();
	
	//공통코드조회
	//계약단위
	var objCode = fn_common_code("'MA0138'","","","","Y");
	var sCond = "GROUP_CODE == 'MA0138'";
	objCode.filter(sCond);
	CopyF(ds_contractUnitType, objCode.name);
	
	//수거업체 콤보 조회
	fn_searchCust();
}

/*-----------------------------------------------------------------------------------------
 * 설명      : callBack 함수
 *----------------------------------------------------------------------------------------*/
//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
//---------------------
// 조회콜백
//---------------------
function fn_callBack(errCode, errMsg){

	if (errCode == 0){
		if (ds_list.rowcount < 1)
			g_Message("EE", "조회 된 내역이 없습니다.");
	}else{
		g_Message("EE", "조회중 오류가 발생했습니다. 관리자에게 문의하세요." + '\n' + '(' + errMsg + ')' );
	}
	
	
}

/*-----------------------------------------------------------------------------------------
 * 설명      : 사업장의 해당 수거업체 조회 함수
 *----------------------------------------------------------------------------------------*/
function fn_searchCust()
{
	var actionName, cmdName, inData, outData, otherArg, callBackFnc, trId;	
	
	ds_cond.clearData();
	ds_custType.clearData();
	
	inData			= "";
	outData			= "ds_custType=ds_custType";
	callBackFnc		= "fn_callBack";	
    trId            = "SELECT_CUST"; 
    otherArg        = "";
   
	fsp_clear(this); 
    fsp_addSearch(this, "ma/mas:MAS50040S_S002");									
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc,"","","",trId);
    
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_muChange(obj, event)
 * 기ㅡㅡㅡ능 : 사업부 변경시 운영부서, 사업장 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function fn_muChange(obj, event)
{
	edt_tm.setTmCode("");
	edt_upjang.setUpjangCode("");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_tmChange(obj, data)
 * 기ㅡㅡㅡ능 : 운영부서 변경시 사업장 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function fn_tmChange(obj, data)
{
	edt_upjang.setUpjangCode("");
}

//매출금액차이건만 보여준다
function btn_salAmtGap_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_list.rowcount == 0){
		g_Message("EE", "조회 내역이 없습니다.");
		return;
	}
	ds_list.filter(" REMV_AMT - SAL_AMT <> 0 ")
	
}

//세금계산서차이금액건만 보여준다
function btn_balAmtGap_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_list.rowcount == 0){
		g_Message("EE", "조회 내역이 없습니다.");
		return;
	}
	ds_list.filter(" REMV_AMT - BAL_AMT <> 0 ")
}
]]></Script>
  </Form>
</FDL>
