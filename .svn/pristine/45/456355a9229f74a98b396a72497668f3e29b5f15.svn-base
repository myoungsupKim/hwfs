<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FuneralSingleGoodsOutReturn" classname="FuneralDeadSaleGoodsOutReturn" inheritanceid="" position="absolute 0 0 1252 725" titletext="개별 판매품목 출고/반품관리(FuneralSingleGoodsOutReturn)" scrollbars="autoboth" onload="form_onload" ontimer="FuneralSingleGoodsOutReturn_ontimer">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="0" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 450 84"/>
        <Static id="Static20" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 97 450 102" anchor="left top"/>
        <Static id="Static42" text="Sub Title" class="sta_WF_Title01" position="absolute 623 342 1073 360" anchor="left top"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 93 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Tab id="tab_saleGoodsOutReturn" anchor="all" taborder="8" tabindex="0" scrollbars="autoboth" position="absolute 0 165 1226 712" style="showextrabutton:false;" multiline="true">
          <Tabpages>
            <Tabpage id="tabpage1" text="개별 판매 품목">
              <Layouts>
                <Layout>
                  <Static id="Static24" text="판매 상세" class="sta_WF_Title01" position="absolute 15 12 465 30" anchor="left top"/>
                  <Grid id="grd_goodsSaleoutS" taborder="0" binddataset="ds_goodsSaleoutS" autoenter="select" autoupdatetype="itemselect" useinputpanel="false" cellsizingtype="col" suppresslevel="allcompare" onexpanddown="fn_expandDown" position="absolute 9 30 1224 511" anchor="all" autofittype="col">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="120"/>
                          <Column size="113"/>
                          <Column size="67"/>
                          <Column size="80"/>
                          <Column size="98"/>
                          <Column size="122"/>
                          <Column size="60"/>
                          <Column size="60"/>
                          <Column size="70"/>
                          <Column size="150"/>
                          <Column size="97"/>
                          <Column size="59"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="판매일자"/>
                          <Cell col="1" text="주문일자"/>
                          <Cell col="2" text="주문상태"/>
                          <Cell col="3" text="상품구분"/>
                          <Cell col="4" text="상품분류"/>
                          <Cell col="5" text="상품명"/>
                          <Cell col="6" text="단위"/>
                          <Cell col="7" text="개수"/>
                          <Cell col="8" text="최종단가"/>
                          <Cell col="9" text="금액"/>
                          <Cell col="10" text="비고"/>
                          <Cell col="11" displaytype="checkbox"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="date" edittype="expr:regYn=='Y'?'none':none'" text="bind:saleDate" mask="yyyy-MM-dd HH:mm:ss" suppress="0" calendardisplaynulltype="none"/>
                          <Cell col="1" displaytype="date" edittype="expr:expr:regYn=='Y'?'none':'none'" text="bind:orderDate" mask="yyyy-MM-dd HH:mm:ss" calendardisplaynulltype="none"/>
                          <Cell col="2" displaytype="combo" edittype="none" style="color:EXPR(orderStatus=='001'?&quot;red&quot;:&quot;black&quot;);color2:EXPR(orderStatus=='001'?&quot;red&quot;:&quot;black&quot;);" text="bind:orderStatus" editdisplay="edit" suppress="0" combodataset="ds_orderStatus" combocodecol="code" combodatacol="codeName" combodisplay="edit"/>
                          <Cell col="3" displaytype="text" edittype="none" style="align:center;" text="bind:setNm" edittrimtype="both" suppress="0"/>
                          <Cell col="4" displaytype="text" edittype="none" style="align:center;" text="bind:goodsClassNm" expandshow="hide" expandsize="20" suppress="0"/>
                          <Cell col="5" displaytype="text" edittype="none" text="bind:detailGoodsNm" suppress="0" combodisplay="edit" combotype="dropdown"/>
                          <Cell col="6" displaytype="normal" edittype="none" style="align:center;" text="bind:unit"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:ea" mask="#,###,###,##0" editdisplay="edit" combodisplay="edit"/>
                          <Cell col="8" displaytype="number" edittype="none" text="bind:lastUprice" mask="#,###,###,##0"/>
                          <Cell col="9" displaytype="number" edittype="expr:lastUprice=='0'?'masknumber':'none'" text="bind:amt" mask="#,###,###,##0"/>
                          <Cell col="10" displaytype="text" edittype="text" style="align:left;" text="bind:remark"/>
                          <Cell col="11" displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                        </Band>
                        <Band id="summary">
                          <Cell colspan="6" style="align:right middle;" text="합계" taborder="undefined"/>
                          <Cell col="6" colspan="6" displaytype="number" text="expr:getSum(&quot;amt&quot;)" taborder="undefined"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_saleOutSPlus" taborder="1" onclick="btn_onclick" class="btn_WF_GrdPlus" position="absolute 1126 6 1144 26" anchor="top right"/>
                  <Button id="btn_saleOutSMinus" taborder="2" onclick="btn_onclick" class="btn_WF_GrdMinus" position="absolute 1146 6 1164 26" anchor="top right"/>
                  <Button id="btn_saleOutSPrint" taborder="3" text="출력" onclick="btn_onclick" class="btn_WF_Print" position="absolute 1166 5 1216 26" anchor="top right"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="개별 반품 품목">
              <Layouts>
                <Layout>
                  <Static id="Static24" text="반품 상세" class="sta_WF_Title01" position="absolute 9 12 459 30" anchor="left top"/>
                  <Grid id="grd_goodsreturnS" taborder="0" binddataset="ds_goodsReturnS" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 9 30 1224 509" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="117"/>
                          <Column size="0"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="122"/>
                          <Column size="64"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="60"/>
                          <Column size="100"/>
                          <Column size="150"/>
                          <Column size="62"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="반품일자"/>
                          <Cell col="1" text="판매일자"/>
                          <Cell col="2" text="상품구분"/>
                          <Cell col="3" text="상품분류"/>
                          <Cell col="4" text="상품명"/>
                          <Cell col="5" text="단위"/>
                          <Cell col="6" text="총판매개수"/>
                          <Cell col="7" text="개수"/>
                          <Cell col="8" text="최종단가"/>
                          <Cell col="9" text="금액"/>
                          <Cell col="10" text="비고"/>
                          <Cell col="11" displaytype="checkbox" edittype="checkbox"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="date" edittype="expr:regYn=='Y'?'none':'none'" text="bind:saleDate" mask="yyyy-MM-dd HH:mm:ss" suppress="0" calendardisplaynulltype="none"/>
                          <Cell col="1" displaytype="date" edittype="expr:regYn=='Y'?'none':'none'" text="bind:saleDate" mask="yyyy-MM-dd HH:mm:ss"/>
                          <Cell col="2" displaytype="text" edittype="none" style="align:center;" text="bind:setNm" suppress="0" calendardisplaynulltype="default"/>
                          <Cell col="3" displaytype="text" edittype="none" style="align:center;" text="bind:goodsClassNm" expandshow="hide" expandsize="20" suppress="0"/>
                          <Cell col="4" displaytype="text" edittype="none" text="bind:detailGoodsNm"/>
                          <Cell col="5" displaytype="normal" edittype="none" style="align:center;" text="bind:unit"/>
                          <Cell col="6" displaytype="number" style="align:right;" text="bind:remainingEa" mask="#,###,###,##0"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:ea" mask="#,###,###,##0"/>
                          <Cell col="8" displaytype="number" edittype="none" text="bind:lastUprice" mask="#,###,###,##0"/>
                          <Cell col="9" displaytype="number" edittype="expr:lastUprice=='0'?'masknumber':'none'" text="bind:amt" mask="#,###,###,##0"/>
                          <Cell col="10" displaytype="text" edittype="text" style="align:left;" text="bind:remark"/>
                          <Cell col="11" displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                        </Band>
                        <Band id="summary">
                          <Cell colspan="5" style="align:right middle;" text="합계" taborder="undefined"/>
                          <Cell col="5" colspan="7" displaytype="number" text="expr:getSum(&quot;amt&quot;)" taborder="undefined"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_goodsReturnSPlus" taborder="1" onclick="btn_onclick" class="btn_WF_GrdPlus" position="absolute 1129 6 1147 26" anchor="top right"/>
                  <Button id="btn_goodsReturnSMinus" taborder="2" onclick="btn_onclick" class="btn_WF_GrdMinus" position="absolute 1149 6 1167 26" anchor="top right"/>
                  <Button id="btn_goodsReturnSPrint" taborder="3" text="출력" onclick="btn_onclick" class="btn_WF_Print" position="absolute 1169 5 1219 26" anchor="top right"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage3" text="결재수단">
              <Layouts>
                <Layout>
                  <Grid id="grd_payWay" taborder="0" binddataset="ds_payWay" autoenter="select" autoupdatetype="itemselect" useinputpanel="false" cellsizingtype="col" autofittype="col" suppresslevel="allcompare" oncloseup="tab_funeralDeadDeadSheet_tabpage1_grd_payWay_oncloseup" onexpanddown="fn_expandDown" position="absolute 10 30 1224 509" anchor="all" ontextchanged="tab_saleGoodsOutReturn_tabpage3_grd_payWay_ontextchanged">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="100"/>
                          <Column size="170"/>
                          <Column size="118"/>
                          <Column size="105"/>
                          <Column size="102"/>
                          <Column size="100"/>
                          <Column size="123"/>
                          <Column size="109"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell text="매출일자"/>
                          <Cell col="1" text="고객사"/>
                          <Cell col="2" text="매출유형"/>
                          <Cell col="3" text="과세"/>
                          <Cell col="4" colspan="2" text="지불유형(현금,카드)" taborder="undefined"/>
                          <Cell col="6" text="매출액"/>
                          <Cell col="7" text="창고"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="date" edittype="expr:ddddCloseYn=='Y'?'none':(regYn=='Y'?'none':'date')" style="align:center;" text="bind:occurDate" edittrimtype="both" suppress="0" calendardisplaynulltype="none"/>
                          <Cell col="1" displaytype="normal" style="align:center;" text="bind:custNm" editautoselect="true" editdisplay="edit" editacceptsenter="true" editacceptstab="true" expandshow="hide" expandsize="20" suppress="0"/>
                          <Cell col="2" displaytype="combo" edittype="expr:ddddCloseYn==&quot;Y&quot;?&quot;none&quot;:&quot;combo&quot;" style="align:left;" text="bind:salsClass" combodataset="ds_salsClass" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="3" displaytype="combo" edittype="expr:ddddCloseYn==&quot;Y&quot;?&quot;none&quot;:&quot;combo&quot;" text="bind:vatClass" combodataset="ds_vatClass" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="4" displaytype="combo" edittype="expr:ddddCloseYn==&quot;Y&quot;?&quot;none&quot;:&quot;combo&quot;" text="bind:payCd" combodataset="ds_payCd" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="5" displaytype="expr:payCd=='1'?'text':'combo'" edittype="expr:ddddCloseYn==&quot;Y&quot;?&quot;none&quot;:payCd=='1'?'text':'none'" style="align:left middle;" text="bind:cardPayCd" combodataset="ds_frncStorNum" combocodecol="buycpnyCd" combodatacol="buycpnyNm"/>
                          <Cell col="6" displaytype="number" edittype="expr:ddddCloseYn==&quot;Y&quot;?&quot;none&quot;:&quot;masknumber&quot;" style="align:right;" text="bind:salAmt" mask="###,###,##0"/>
                          <Cell col="7" displaytype="combo" edittype="expr:ddddCloseYn==&quot;Y&quot;?&quot;none&quot;:&quot;combo&quot;" text="bind:posNum" combodataset="ds_posClass" combocodecol="code" combodatacol="codeName"/>
                        </Band>
                        <Band id="summary">
                          <Cell colspan="6" style="align:center;" text="합계" taborder="undefined"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" text="expr:getSum(&quot;salAmt&quot;)"/>
                          <Cell col="7"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_addUtensil" taborder="2" onclick="fn_addRow" class="btn_WF_GrdPlus" position="absolute 1181 5 1199 25" anchor="top right"/>
                  <Button id="btn_deleteUtensil" taborder="3" onclick="fn_deleteRow" class="btn_WF_GrdMinus" position="absolute 1201 5 1219 25" anchor="top right"/>
                  <Button id="Button07" taborder="1" onclick="fn_savePayWay" class="btn_WF_GrdSave" visible="false" position="absolute 1161 5 1179 25" anchor="top right"/>
                  <Static id="Static22" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1142 25 1226 30" anchor="right bottom"/>
                  <Static id="Static24" text="결재수단" class="sta_WF_Title01" position="absolute 10 12 460 30" anchor="default"/>
                  <Static id="Static30" text="* 현금 선택시 핸드폰 뒷자리만 입력합니다." position="absolute 895 5 1159 25" anchor="top right" style="font:Gulim,9,bold;"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static17" text="w10" onclick="Tab00_tabpage_Static01_onclick" class="Guide01_AreaRed" visible="false" position="absolute 1226 190 1237 713"/>
        <Static id="Static35" text="h10" onclick="Tab00_tabpage_Static35_onclick" class="Guide01_AreaRed" visible="false" position="absolute 11 701 903 711" anchor="left top"/>
        <Static id="Static26" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1166 192 1225 198" anchor="top right"/>
        <Static id="Static25" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1166 218 1225 223" anchor="top right"/>
        <Static id="Static39" text="판매 총액" class="sta_WFDA_Labelcenter" position="absolute 0 102 172 129" anchor="left top"/>
        <Static id="Static40" text="반품 총액" class="sta_WFDA_Labelcenter" position="absolute 171 102 343 129" anchor="left top"/>
        <Static id="Static41" class="sta_WFDA_Labelcenter" position="absolute 342 102 514 129" anchor="left top" text="정산 총액"/>
        <Static id="Static22" text="w10" onclick="Tab00_tabpage_Static07_onclick" class="Guide01_AreaRed" visible="false" position="absolute 1 191 11 702"/>
        <Static id="Static23" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 9 217 459 222" anchor="left top"/>
        <Static id="Static27" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 11 191 461 204" anchor="left top"/>
        <MaskEdit id="edt_saleoutAmt" taborder="4" type="number" mask="###,###,###,###" autoselect="true" autoskip="true" class="medInputReq" position="absolute 0 128 172 155" style="align:right;font:Gulim,9, bold;" readonly="true"/>
        <MaskEdit id="edt_returnAmt" taborder="5" mask="###,###,###,###" autoselect="true" autoskip="true" class="medInputReq" position="absolute 171 128 343 155" style="color:#d93430ff;align:right;font:Gulim,9, bold;" readonly="true"/>
        <MaskEdit id="edt_adjustAmt" taborder="6" mask="###,###,###,###" autoselect="true" autoskip="true" class="medInputReq" position="absolute 342 128 514 155" style="caretcolor:#d98498ff;color:#2169afff;align:right;font:Gulim,9, bold;" readonly="true"/>
        <Button id="btn_goodsReturnExcelUp" taborder="9" text="일괄적용" class="btn_WF_AllApplyUp" position="absolute 1092 160 1165 181" anchor="top right" visible="false"/>
        <UpjangSearchComponent id="edt_upjangNm" titletext="업장 검색용 Component" taborder="3" class="edt_WF_Essential" position="absolute 492 40 658 61" bindDataset="ds_search" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="fn_searchCcCd" roleSetId=""/>
        <Static id="Static21" text="장례식장" class="sta_WFSA_label" position="absolute 423 40 485 61" anchor="left top"/>
        <Static id="Static29" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 482 40 492 61" anchor="left top"/>
        <Static id="Static24" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 658 40 688 61" anchor="left top"/>
        <MuSearchComponent id="edt_muNm" titletext="사업부 선택 Component" taborder="1" class="cmb_WF_Essential" position="absolute 70 40 197 61" bindDataset="ds_search" bindMuCdColumn="muCd" appendText="전체" onItemChangedEvent="fn_muItemChangedEvent"/>
        <TmSearchComponent id="edt_tmNm" titletext="팀 검색용 Component" taborder="2" class="edt_WF_Essential" position="absolute 252 40 393 62" bindDataset="ds_search" bindTmCdColumn="tmCd" bindTmNmColumn="tmNm" qoBuCd="" qoMuCd="" qoUseYn="Y" eventAfterTrigger="fn_tmChangedEvent" eventBeforeTrigger=""/>
        <Static id="Static30" text="사업부" class="sta_WFSA_label" position="absolute 15 40 77 61" anchor="left top"/>
        <Static id="Static31" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 60 40 70 61" anchor="left top"/>
        <Static id="Static32" text="팀" class="sta_WFSA_label" position="absolute 228 40 290 61" anchor="left top"/>
        <Static id="Static33" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 197 40 227 61" anchor="left top"/>
        <Static id="Static34" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 247 40 257 61" anchor="left top"/>
        <Static id="Static36" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 393 40 423 61" anchor="left top"/>
        <Static id="Static37" text="*주문상태가 접수인 건 제외" position="absolute 455 84 683 98" style="color:red;align:right middle;font:Gulim,9,bold;"/>
        <Static id="Static00" text="매출 정산 총액" class="sta_WFDA_Labelcenter" position="absolute 513 102 685 129" anchor="left top"/>
        <MaskEdit id="edt_payMngtAdjustAmt" taborder="7" mask="###,###,###,###" autoselect="true" autoskip="true" class="medInputReq" position="absolute 513 128 685 155" style="caretcolor:#d98498ff;color:#2169afff;align:right;font:Gulim,9, bold;" readonly="true"/>
        <Static id="Static10" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 764 40 774 61" anchor="left top"/>
        <Static id="Static03" text="판매/반품일" class="sta_WFSA_label" position="absolute 687 40 769 61" anchor="left top"/>
        <ObjCalendar id="cal_saleOutReturnFrom" titletext="캘린더" taborder="10" scrollbars="none" position="absolute 774 40 866 61"/>
        <Static id="Static15" text="~" position="absolute 872 40 881 62"/>
        <ObjCalendar id="cal_saleOutReturnTo" titletext="캘린더" taborder="11" scrollbars="none" position="absolute 888 40 980 61"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item6" compid="edt_saleoutAmt" propid="value" datasetid="ds_adjustAmt" columnid="saleoutAmt"/>
      <BindItem id="item0" compid="edt_returnAmt" propid="value" datasetid="ds_adjustAmt" columnid="returnAmt"/>
      <BindItem id="item1" compid="edt_adjustAmt" propid="value" datasetid="ds_adjustAmt" columnid="adjustAmt"/>
      <BindItem id="item2" compid="edt_payMngtAdjustAmt" propid="value" datasetid="ds_adjustAmt" columnid="payAdjustAmt"/>
    </Bind>
    <Objects>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="tmNm" type="STRING" size="256"/>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="ccNm" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="maskAuth" type="STRING" size="256"/>
          <Column id="cuserId" type="STRING" size="256"/>
          <Column id="cuserNm" type="STRING" size="256"/>
          <Column id="srchParam" type="STRING" size="256"/>
          <Column id="saleOutReturnFrom" type="STRING" size="256"/>
          <Column id="saleOutReturnTo" type="STRING" size="256"/>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="theDeadNm" type="STRING" size="256"/>
          <Column id="casketFrom" type="STRING" size="256"/>
          <Column id="casketTo" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="searchTotType" type="STRING" size="256"/>
          <Column id="searchType" type="STRING" size="256"/>
          <Column id="searchPayType" type="STRING" size="256"/>
          <Column id="occurDate" type="STRING" size="256"/>
          <Column id="classType" type="STRING" size="256"/>
          <Column id="kindType" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_parlorType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_orderStatus" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_oprtType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_detailGoods" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="upperCode" type="STRING" size="256"/>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_unitType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsSaleout" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_goodsSaleout_oncolumnchanged">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="saleDate" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="orderStatus" type="STRING" size="256"/>
          <Column id="orgOrderStatus" type="STRING" size="256"/>
          <Column id="classType" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_adjustAmt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="saleoutAmt" type="STRING" size="256"/>
          <Column id="returnAmt" type="STRING" size="256"/>
          <Column id="adjustAmt" type="STRING" size="256"/>
          <Column id="payAdjustAmt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsSaleoutValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_goodsSaleout_oncolumnchanged">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="saleDate" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="orderStatus" type="STRING" size="256"/>
          <Column id="orgOrderStatus" type="STRING" size="256"/>
          <Column id="classType" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="goodsClassNm">title:상품분류,required:true</Col>
            <Col id="detailGoodsNm">title:상품명,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_goodsReturnValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_goodsReturn_oncolumnchanged">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="saleDate" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="orderStatus" type="STRING" size="256"/>
          <Column id="orgOrderStatus" type="STRING" size="256"/>
          <Column id="classType" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="remainingEa" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="goodsClassNm">title:상품분류,required:true</Col>
            <Col id="detailGoodsNm">title:상품명,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_searchSaveChk" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="chkValue" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsReturn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_goodsReturn_oncolumnchanged">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="saleDate" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="orderStatus" type="STRING" size="256"/>
          <Column id="orgOrderStatus" type="STRING" size="256"/>
          <Column id="classType" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="Column0" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="remainingEa" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsSaleoutS" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_goodsSaleout_oncolumnchanged">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="saleDate" type="STRING" size="256"/>
          <Column id="orderDate" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="orderStatus" type="STRING" size="256"/>
          <Column id="orgOrderStatus" type="STRING" size="256"/>
          <Column id="classType" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
          <Column id="kindType" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_goodsReturnS" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_goodsReturn_oncolumnchanged">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="saleDate" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="orderStatus" type="STRING" size="256"/>
          <Column id="orgOrderStatus" type="STRING" size="256"/>
          <Column id="classType" type="STRING" size="256"/>
          <Column id="setNm" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="remainingEa" type="STRING" size="256"/>
          <Column id="ea" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="lastUprice" type="STRING" size="256"/>
          <Column id="amt" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
          <Column id="kindType" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">1</Col>
            <Col id="insYn">0</Col>
            <Col id="delYn">0</Col>
            <Col id="savYn">1</Col>
            <Col id="prtYn">0</Col>
            <Col id="exlYn">1</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_payWay" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_payWay_oncolumnchanged">
        <ColumnInfo>
          <Column id="occurDate" type="STRING" size="256"/>
          <Column id="sysClass" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="receiptNum" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="payCd" type="STRING" size="256"/>
          <Column id="payCdNm" type="STRING" size="256"/>
          <Column id="cardPayCd" type="STRING" size="256"/>
          <Column id="cardPayCdNm" type="STRING" size="256"/>
          <Column id="evidence1" type="STRING" size="256"/>
          <Column id="evidence2" type="STRING" size="256"/>
          <Column id="evidence3" type="STRING" size="256"/>
          <Column id="evidence4" type="STRING" size="256"/>
          <Column id="evidence5" type="STRING" size="256"/>
          <Column id="encEvidenceNum" type="STRING" size="256"/>
          <Column id="amt" type="INT" size="256"/>
          <Column id="exchAmt" type="INT" size="256"/>
          <Column id="netAmt" type="INT" size="256"/>
          <Column id="vatAmt" type="INT" size="256"/>
          <Column id="denomAmt" type="INT" size="256"/>
          <Column id="salsUuser" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="ddddCloseYn" type="STRING" size="256"/>
          <Column id="ddddCloseDate" type="STRING" size="256"/>
          <Column id="modifySalsYn" type="STRING" size="256"/>
          <Column id="recdStatus" type="STRING" size="256"/>
          <Column id="posNum" type="STRING" size="256"/>
          <Column id="posNm" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="salsClass" type="STRING" size="256"/>
          <Column id="salAmt" type="INT" size="256"/>
          <Column id="vatClass" type="STRING" size="256"/>
          <Column id="regYn" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="theDeadNm" type="STRING" size="256"/>
          <Column id="frncStorNum" type="STRING" size="256"/>
          <Column id="cardCustCd" type="STRING" size="256"/>
          <Column id="bankCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payWayValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="occurDate" type="STRING" size="256"/>
          <Column id="payCd" type="STRING" size="256"/>
          <Column id="cardPayCd" type="STRING" size="256"/>
          <Column id="cardPayCdNm" type="STRING" size="256"/>
          <Column id="posNum" type="STRING" size="256"/>
          <Column id="salsClass" type="STRING" size="256"/>
          <Column id="salAmt" type="STRING" size="256"/>
          <Column id="vatClass" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="occurDate">title:매출일자,required:true</Col>
            <Col id="payCd">title:지불유형,required:true</Col>
            <Col id="posNum">title:창고,required:true</Col>
            <Col id="salsClass">title:매출유형,required:true</Col>
            <Col id="salAmt">title:매출금액,required:true</Col>
            <Col id="vatClass">title:과세유형,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_dayCloseYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="dayCloseYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_frncStorNum" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="buycpnyCd" type="STRING" size="256"/>
          <Column id="buycpnyNm" type="STRING" size="256"/>
          <Column id="frncStorNum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ccCd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="upjang" type="STRING" size="256"/>
          <Column id="ccCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_vatClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_funeralDeadDeadSheet" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="funeralHallCd" type="STRING" size="256"/>
          <Column id="upjangnm" type="STRING" size="256"/>
          <Column id="saupno" type="STRING" size="256"/>
          <Column id="nmKor" type="STRING" size="256"/>
          <Column id="addr" type="STRING" size="256"/>
          <Column id="upTae" type="STRING" size="256"/>
          <Column id="upjangTel" type="STRING" size="256"/>
          <Column id="upjangTelEnc" type="STRING" size="256"/>
          <Column id="guestNum" type="STRING" size="256"/>
          <Column id="funeralParlor" type="STRING" size="256"/>
          <Column id="funeralParlorNm" type="STRING" size="256"/>
          <Column id="theDeadNm" type="STRING" size="256"/>
          <Column id="enshrineDate" type="STRING" size="256"/>
          <Column id="borneOutDate" type="STRING" size="256"/>
          <Column id="chiefMourner" type="STRING" size="256"/>
          <Column id="chiefMournerTelnoEnc" type="STRING" size="256"/>
          <Column id="saleDate" type="STRING" size="256"/>
          <Column id="goodsClassCd" type="STRING" size="256"/>
          <Column id="goodsClassNm" type="STRING" size="256"/>
          <Column id="detailGoodsCd" type="STRING" size="256"/>
          <Column id="detailGoodsNm" type="STRING" size="256"/>
          <Column id="saleoutAmt" type="STRING" size="256"/>
          <Column id="returnAmt" type="STRING" size="256"/>
          <Column id="adjustAmt" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_salsClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">1602</Col>
            <Col id="codeName">상품매출_슈퍼매점</Col>
          </Row>
          <Row>
            <Col id="code">1603</Col>
            <Col id="codeName">식음료매출_식료</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_posClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_saleCount" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="remainingEa" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="saleOutReturnFrom" type="STRING" size="256"/>
          <Column id="saleOutReturnTo" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="saleOutReturnFrom">title:시작일,required:true,date;true,focus:cal_saleOutReturnFrom</Col>
            <Col id="saleOutReturnTo">title:종료일,required:true,date;true,focus:cal_saleOutReturnTo</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : Template
  파 일 명 : Template.xfdl
  기    능 : Design 및 Script Template 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.11.01   김윤기   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";


/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_goodsTypeColInfo;		// ds_goodsType 데이터셋 컬럼정보
var	fv_detailGoodsColInfo;		// ds_detailGoods 데이터셋 컬럼정보
var fv_adjustAmtColInfo;		// ds_adjustAmt 데이터셋 컬럼정보
var fv_goodsSaleoutSColInfo
var fv_goodsReturnSColInfo
var fv_cnt;
var v_arg;
var fv_funeralDeadDeadSheet;	// ds_funeralDeadDeadSheet 데이터셋 컬럼정보
var fv_payWayColInfo;			// ds_payWay 데이터셋 컬럼정보
var fv_vatClassColInfo;			// ds_vatClass 데이터셋 컬럼정보
var fv_frncStorNumColInfo;		// ds_frncStorNum 데이터셋 컬럼정보

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	SCCombo.bind(this, "ComCode", "tab_saleGoodsOutReturn.tabpage1.grd_goodsSaleoutS.orderStatus", ds_orderStatus, {groupCode:"ORDER_STATUS", useYn:"Y", defVal:"001"});	// 주문상태
	SCCombo.bind(this, "ComCode", "tab_saleGoodsOutReturn.tabpage1.grd_goodsSaleoutS.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"Y", defVal:"001"});		// 단위
	SCCombo.bind(this, "ComCode", "tab_saleGoodsOutReturn.tabpage2.grd_goodsreturnS.orderStatus", ds_orderStatus, {groupCode:"ORDER_STATUS", useYn:"Y", defVal:"001"});	// 주문상태
	SCCombo.bind(this, "ComCode", "tab_saleGoodsOutReturn.tabpage2.grd_goodsreturnS.classType", ds_oprtType, {groupCode:"OPRT_TYPE", useYn:"Y", defVal:"001"}); 			// 판매구분
	SCCombo.bind(this, "ComCode", "tab_saleGoodsOutReturn.tabpage2.grd_goodsreturnS.unit", ds_unitType, {groupCode:"UNIT_TYPE", useYn:"Y", defVal:"001"});		// 단위
	
	SCCombo.bind(this, "ComCode", "tab_saleGoodsOutReturn.tabpage3.grd_payWay.payCd", ds_payCd, {groupCode:"PMNT_TYPE", useYn:"Y", defVal:"1"});	// 지불유형
	
	SCPopup.bind(this, SCPopup.CustSearch, "tab_saleGoodsOutReturn.tabpage3.grd_payWay.custNm", "GRID:custCd", null, 
				{setExpr:[{property:"edittype", expr:"ddddCloseYn=='Y'?'none':'expand'"},//마감데이터이면 팝업버튼을 숨긴다.
						 {property:"expandshow", expr:"ddddCloseYn=='Y'?'hide':'show'"},
						 {property:"expandsize", expr:"ddddCloseYn=='Y'?'0':'21'"}]}, 
						 {before:"fn_custPopup",after:"fn_moveRow"});
	
	ds_payCd.filter("code == '1' || code == '2'");
	
	ds_search.clearData();
	var nRow= ds_search.addRow();
 	ds_search.setColumn(nRow, "muCd", g_Mu_Cd);
 	ds_search.setColumn(nRow, "muNm", g_Mu_Nm);
 	ds_search.setColumn(nRow, "tmCd", g_Tm_Cd);
 	ds_search.setColumn(nRow, "tmNm", g_Tm_Nm);
 	ds_search.setColumn(nRow, "upjangCd", g_Upjang);
 	ds_search.setColumn(nRow, "upjangNm", g_UpjangNm);
 	ds_search.setColumn(nRow, "funeralHallCd", g_Upjang);
    ds_search.setColumn(nRow, 'maskAuth', "0");
    ds_search.setColumn(nRow, 'kindType', "S");

	edt_tmNm.applyAuthLevel(edt_muNm);
    edt_upjangNm.applyAuthLevel(edt_tmNm);
    edt_upjangNm.applyMainUpjang(null);	
    	
    // 급식, 식재, 외식, 구매 사업부는 팀, 업장 변경 불가.
 	if((gfn_indexOf(ds_search.getColumn(0,"muNm"), "FS", 0) >= 0)
 			||(gfn_indexOf(ds_search.getColumn(0,"muNm"), "식재", 0) >= 0)
 			||(gfn_indexOf(ds_search.getColumn(0,"muNm"), "외식", 0) >= 0)
 			||(gfn_indexOf(ds_search.getColumn(0,"muNm"), "구매", 0) >= 0)) {
 		
 		edt_tmNm.enable     = false;
 		edt_upjangNm.enable = false;
 		
 	// FC사업지원본부는 사업부/팀/업장 변경 가능	
 	}else if(gfn_indexOf(ds_search.getColumn(0,"muNm"), "FC", 0) >= 0) {
 		edt_tmNm.enable     = true;
 		edt_upjangNm.enable = true;
 	}
 	
 	cal_saleOutReturnFrom.fn_initMonthCal(this, fv_sToday, "", ds_search, "saleOutReturnFrom");
	cal_saleOutReturnTo.fn_initMonthCal(this, fv_sToday, "", ds_search, "saleOutReturnTo");
	
	fn_searchCcCd();
}



/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 부서 세팅 
 *---------------------------------------------------------------------------------------------*/
//MU가 변경될 때에 대한 이벤트
function fn_muItemChangedEvent(obj, evt)
{
    edt_tmNm.setTmCode("");
    edt_upjangNm.setUpjangCode("");
        
    ds_search.setColumn(0,"muCd", edt_muNm.getMuCode());
    ds_search.setColumn(0,"muNm", edt_muNm.getMuName());
}

//TM이 변경될 때에 대한 이벤트
function fn_tmChangedEvent(obj, data)
{
    edt_upjangNm.setUpjangCode("");   
    ds_search.setColumn(0,"tmCd", edt_tmNm.getTmCode());
    ds_search.setColumn(0,"tmNm", edt_tmNm.getTmName());
}

//upjang이 변경될 때에 대한 이벤트
function fn_upjangChangedEvent(obj, data) {
//    ds_search.setColumn(0,"upjangCd", edt_upjangNm.getUpjangCode());
//    ds_search.setColumn(0,"upjangNm", edt_upjangNm.getUpjangName());
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchGoodsType()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 상품분류, 상세상품 combo 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchGoodsType()//2015-07-01 테이블 바뀌고 안씀
{
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	fv_goodsTypeColInfo   = gfn_getDatasetInfo(ds_goodsType);
	fv_detailGoodsColInfo = gfn_getDatasetInfo(ds_detailGoods);
	ds_goodsType.clearData();
	ds_detailGoods.clearData();
	
    var strSvcID    = "searchGoodsType";
    var strURL      = "fs/fsf/funeralSingleGoodsOutReturn/selectGoodsType.xdo";
	var strInDs     = "";
    var strOutDs    = "ds_goodsType=ds_goodsType ds_detailGoods=ds_detailGoods";    
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}



/*
 ******************************************************************************************
 * 함  수  명   : fn_search()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 개별 총액산출및  판매/반품 품목 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_search()
{
	// v_ds_check 미사용시 변경사항 체크
// 	if (gfn_dsIsUpdated(ds_goodsSaleout)||gfn_dsIsUpdated(ds_goodsReturn))
// 	{
// 		var retValue = gfn_confirm("confirm.before.search");	// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
// 		if (retValue == false) return;
// 	}

	if(gfn_isNull(ds_search.getColumn(0, "tmCd"))||ds_search.getColumn(0, "tmCd")=="")
	{
		gfn_alert("팀을 선택하여 주십시오.");
		edt_tmNm.setFocus();
		return;
	}
	if(gfn_isNull(ds_search.getColumn(0, "upjangCd"))||ds_search.getColumn(0, "upjangCd")=="")
	{
		gfn_alert("장례식장을 선택하여 주십시오.");
		edt_upjangNm.setFocus();
		return;
	}
	
	if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;
	
	if (cal_saleOutReturnFrom.text > cal_saleOutReturnTo.text) {
		gfn_alert("msg.err.validator.date.great");	// 종료일이 시작일보다 빠릅니다.
		cal_saleOutReturnFrom.setFocus();
		return;
	}

	// v_ds_check 미사용시 변경사항 체크
 	if(gfn_dsIsUpdated(ds_goodsSaleoutS)||gfn_dsIsUpdated(ds_goodsReturnS))
 	{
 		var retValue = gfn_confirm("confirm.before.search");	// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
 		if (retValue == false) return;
 	}
	
	       
    // 조회조건 Param
	ds_search.setColumn(0, "funeralHallCd", ds_search.getColumn(0,"upjangCd"));
	ds_search.setColumn(0, "guestNum", ds_search.getColumn(0,"upjangCd"));
	ds_search.setColumn(0, "searchTotType", "N"); 
    
    ds_search.setColumn(0, "searchType", "1");
	ds_search.setColumn(0, "searchPayType", "single");
	
	// Grid sort 표시 초기화(필수)
	gfn_clearSortMark(tab_saleGoodsOutReturn.tabpage1.grd_goodsSaleoutS);
	gfn_clearSortMark(tab_saleGoodsOutReturn.tabpage2.grd_goodsreturnS);
	
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장	
	fv_adjustAmtColInfo = gfn_getDatasetInfo(ds_adjustAmt);
	fv_goodsSaleoutSColInfo = gfn_getDatasetInfo(ds_goodsSaleoutS);
	fv_goodsReturnSColInfo = gfn_getDatasetInfo(ds_goodsReturnS);
	fv_funeralDeadDeadSheet = gfn_getDatasetInfo(ds_funeralDeadDeadSheet);
	fv_payWayColInfo = gfn_getDatasetInfo(ds_payWay);
	
	ds_adjustAmt.clearData();
	ds_goodsSaleoutS.clearData();
	ds_goodsReturnS.clearData();
	ds_funeralDeadDeadSheet.clearData();
	ds_payWay.clearData();
	
	var strSvcID    = "";
	var strURL      = "";
	var strInDs     = "";
	var strOutDs    = "";
	var strArg      = "";
	var strCallback = "";
	var bAsync      = true;
	
	strSvcID    = "searchGoodsSaleoutReturn";
	strURL      = "fs/fsf/funeralSingleGoodsOutReturn/selectGoodsSaleoutReturnList.xdo";
	strInDs     = "ds_search=ds_search:A";
	strOutDs    = "ds_adjustAmt=ds_adjustAmt ds_goodsSaleoutS=ds_goodsSaleoutS ds_goodsReturnS=ds_goodsReturnS ds_funeralDeadDeadSheet=ds_funeralDeadDeadSheet ds_payWay=ds_payWay";
	strArg      = "";
	strCallback = "fn_callBack";
	bAsync      = true;
   
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchDtl()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 고인별 총액산출및  판매/반품 품목 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchDtl()
{
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
	if (!gfn_dsIsUpdated(ds_goodsSaleoutS) && !gfn_dsIsUpdated(ds_goodsReturnS) && !gfn_dsIsUpdated(ds_payWay)) 
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
	// 저장시 Validation Check	
	if (gfn_validCheck(ds_payWay, ds_payWayValid) == false)	return;
	// 저장시 Validation Check	
//  	if(!gfn_validCheck(tab_saleGoodsOutReturn.tabpage1.grd_goodsSaleout, ds_goodsSaleoutValid)) {
//  		return;
//  	}
//  	
//  	if(!gfn_validCheck(tab_saleGoodsOutReturn.tabpage2.grd_goodsreturn, ds_goodsReturnValid)) {
//  		return;
//  	}
 	
 	for(var i=0; i<ds_goodsSaleoutS.rowcount; i++) {
		
		if((gfn_isNull(ds_goodsSaleoutS.getColumn(i, "ea")))
			||(toNumber(ds_goodsSaleoutS.getColumn(i, "ea"))<=0)) {
			gfn_alert("개별판매 개수를 입력하여 주십시요.");
			ds_goodsSaleoutS.rowposition = i;
			return;
		}else if((gfn_isNull(ds_goodsSaleoutS.getColumn(i, "amt")))
			||(toNumber(ds_goodsSaleoutS.getColumn(i, "amt"))<=0)) {
			gfn_alert("개별판매 금액을 입력하여 주십시요.");
			ds_goodsSaleoutS.rowposition = i;
			return;
		}
	}
	
	for(var i=0; i<ds_goodsReturnS.rowcount; i++) {
		
		if((gfn_isNull(ds_goodsReturnS.getColumn(i, "ea")))
			||(toNumber(ds_goodsReturnS.getColumn(i, "ea"))<=0)) {
			gfn_alert("개별반품 개수를 입력하여 주십시요.");
			ds_goodsReturnS.rowposition = i;
			return;
		}else if((gfn_isNull(ds_goodsReturnS.getColumn(i, "amt")))
			||(toNumber(ds_goodsReturnS.getColumn(i, "amt"))<=0)) {
			gfn_alert("개별반품 금액을 입력하여 주십시요.");
			ds_goodsReturnS.rowposition = i;
			return;
		}
	}
	
    if(gfn_dsIsUpdated(ds_payWay) && (ds_payWay.rowcount > 0))
	{
		if(gfn_parseInt(ds_payWay.getSum("salAmt")) <= 0 
				|| (gfn_parseInt(ds_payWay.getSum("salAmt")) > gfn_parseInt(ds_adjustAmt.getColumn(0,"adjustAmt")))) {
			gfn_alert("결제 총 금액이 판매 총 금액과 일치해야 합니다.");
			return;
		}
		
		for(var i=0; i<ds_payWay.rowcount; i++) {
			
			if(gfn_isNull(ds_payWay.getColumn(i, "salAmt")) || (toNumber(ds_payWay.getColumn(i, "salAmt"))<=0)) {
				gfn_alert("매출액을 입력하여 주십시요.");
				ds_payWay.rowposition = i;
				return;
			}
			
			if(gfn_isNull(ds_payWay.getColumn(i,"cardPayCd"))) {
				gfn_alert("지불유형 항목이 누락되었습니다.");
				ds_payWay.rowposition = i;
				return;
			}
		}
		
		var cnt = 0;
		for(var i=0; i<ds_payWay.rowcount; i++) {
			for(var n=0; n<ds_payWay.rowcount; n++) {
				if((ds_payWay.getColumn(i, "occurDate")).substr(0,4) <> (ds_payWay.getColumn(n, "occurDate")).substr(0,4)) {
					cnt++;
				}
			}	
		}		
		if(cnt > 0 ) {
			gfn_alert("매출월은 상이 할수 없습니다. 매출월을 통일하여 주십시오.");
			return;
		}
	}
	
	//마감된 매출일자인지 검증
//	fn_searchCloseYn();  
	
	var strSvcID    = "save";
	var strURL      = "fs/fsf/funeralSingleGoodsOutReturn/saveGoodsSaleoutReturnList.xdo";
	var strInDs     = "ds_goodsSaleoutS=ds_goodsSaleoutS:U ds_goodsReturnS=ds_goodsReturnS:U ds_payWay=ds_payWay:U";
	var strOutDs    = "";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;
	
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 단기 버튼 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_Close()
{
	this.close();
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		case "searchCode" :
			if(ds_vatClass.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_vatClass, fv_vatClassColInfo);
			}
			if(ds_frncStorNum.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_frncStorNum, fv_frncStorNumColInfo);
			}
			
			break;
		
		case "searchCcCd" :
		    ds_search.setColumn(0,"upjangCd", edt_upjangNm.getUpjangCode());
		    ds_search.setColumn(0,"upjangNm", edt_upjangNm.getUpjangName());
		    fn_searchCode();
		    break;
		
		case "searchSaleCount" :
				
			break;
				
		case "searchGoodsType" :
            if(ds_goodsType.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_goodsType, fv_goodsTypeColInfo);
			}
			if(ds_detailGoods.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_detailGoods, fv_detailGoodsColInfo);
			}
            break;
            
        case "searchDeadGuest" :
            if(ds_deadGuest.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_deadGuest, fv_deadGuestColInfo);
			}
            break;
        
        case "searchGoodsSaleoutReturn" :
			if(ds_adjustAmt.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_adjustAmt, fv_adjustAmtColInfo);
			}
			if(ds_goodsSaleoutS.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_goodsSaleoutS, fv_goodsSaleoutSColInfo);
			}
			
			if(ds_goodsReturnS.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_goodsReturnS, fv_goodsReturnSColInfo);
			}
			if(ds_funeralDeadDeadSheet.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_funeralDeadDeadSheet, fv_funeralDeadDeadSheet);
			}
			if(ds_payWay.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_payWay, fv_payWayColInfo);
			}	
			
			
			if(ds_payWay.getColumn(0, "ddddCloseYn") == 'Y')
			{
		//		tab_funeralDeadDeadSheet.tabpage1.btn_addUtensil.visible = false;
		//		tab_funeralDeadDeadSheet.tabpage1.btn_deleteUtensil.visible = false;
			}else{
		//		tab_funeralDeadDeadSheet.tabpage1.btn_addUtensil.visible = true;
		//		tab_funeralDeadDeadSheet.tabpage1.btn_deleteUtensil.visible = true;
			}
			break;
        
        // 저장
        case "save" :
			if(fv_cnt == "0") {
				gfn_alert("msg.save.success");	// 저장 되었습니다.
				fn_search();
			}else{
				gfn_alert("판매되지 않은 반품건 및 마이너스 반품은 제외처리 되었습니다.");
				fn_search();
			}
            break;
            
        case "searchCloseYn" :
			if(ds_dayCloseYn.getColumn(0, "dayCloseYn")=='Y')
            {
				gfn_alert("해당 매출일자는 마감 된 날짜입니다. \n해당일자로 매출등록 할 수 없습니다.");
				ds_payWay.deleteRow(ds_payWay.rowposition);
				return;
            }
            break;
        
        case "searchPayWayList" :
			if(ds_payWay.getRowCount() == 0){ //서비스 쿼리 결과로 데이터가 없는 경우 데이터셋 컬럼정보 복원
				gfn_loadDatasetInfo (ds_payWay, fv_payWayColInfo);
			}
			break;
			
		case "savePayWay" :
				gfn_alert("msg.save.success");	// 저장 되었습니다.
				fn_searchPayWayList();
			break;
	}
}

/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/

function fn_custPopup(p, date){
	date.setQid("ScoUpjangCust");//거래처팝업에 반드시 필요
	date.setUpjang(ds_search.getColumn(0, "upjangCd"));
	return true;
}

function fn_moveRow() {
	return true;
}


/************************************************************************************************
 * 설명      : 카드사 조회 팝업
************************************************************************************************/
function fn_cardPop(row)
{
	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = row;
	arrArg[1] = ds_search.getColumn(0, "upjangCd");
	
	var strId       = "MealTicketPopup";
	var strURL      = "X_FSL::CardPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
 
	if(arr != null)
	{
		if(!gfn_isNull(arr["buycpnyCd"])){
			ds_payWay.setColumn(row,"cardPayCd",arr["buycpnyCd"]);
			ds_payWay.setColumn(row,"cardPayCdNm",arr["buycpnyNm"]);
			ds_payWay.setColumn(row,"cardCustCd",arr["cardCustCd"]);
			ds_payWay.setColumn(row,"bankCd",arr["bankCd"]);
			ds_payWay.setColumn(row,"frncStorNum",arr["frncStorNum"]);
		}
	}		
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchCcCd()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 상품분류, 상세상품 combo 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchCcCd()
{
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	
    var strSvcID    = "searchCcCd";
    var strURL      = "fs/fsf/funeralDeadDeadSheet/selectCcCd.xdo";
	var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_ccCd=ds_ccCd";    
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchCode()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 상품분류, 상세상품 combo 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchCode()
{
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	fv_vatClassColInfo   = gfn_getDatasetInfo(ds_vatClass);
	fv_frncStorNumColInfo = gfn_getDatasetInfo(ds_frncStorNum);
	ds_vatClass.clearData();
	ds_frncStorNum.clearData();
	
    var strSvcID    = "searchCode";
    var strURL      = "fs/fsf/funeralDeadDeadSheet/selectVatClass.xdo";
	var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_vatClass=ds_vatClass ds_frncStorNum=ds_frncStorNum ds_posClass=ds_posClass";    
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchCloseYn()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 마감여부 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchCloseYn()
{
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	
	if(ds_payWay.rowcount > 0)
	{
//		ds_search.setColumn(0, "occurDate", ds_payWay.getColumn(0, "occurDate"));
	}else{
//		ds_search.setColumn(0, "occurDate", "");
	}
	
    var strSvcID    = "searchCloseYn";
    var strURL      = "fs/fsf/funeralDeadDeadSheet/selectCloseYn.xdo";
	var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_dayCloseYn=ds_dayCloseYn";    
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchSaleCount()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 해당 반품 입력물품 건수에 비교할 총판매건수 조회 
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchSaleCount(curRw, insNum, orgNum)
{
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	ds_search.setColumn(0, "goodsClassCd", ds_goodsReturnS.getColumn(curRw, "goodsClassCd"));
	ds_search.setColumn(0, "detailGoodsCd", ds_goodsReturnS.getColumn(curRw, "detailGoodsCd"));
	ds_search.setColumn(0, "classType", ds_goodsReturnS.getColumn(curRw, "classType"));
	ds_search.setColumn(0, "kindType", "S");
	
    var strSvcID    = "searchSaleCount";
    var strURL      = "fs/fsf/funeralSingleGoodsOutReturn/searchSaleCount.xdo";
	var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_saleCount=ds_saleCount";  
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
    
//    var csSum = ds_goodsReturnS.getCaseSum("classType=='"+ds_goodsReturnS.getColumn(curRw, "classType")+"' && goodsClassCd=='"+ds_goodsReturnS.getColumn(curRw, "goodsClassCd")
//							+"' && detailGoodsCd=='"+ds_goodsReturnS.getColumn(curRw, "detailGoodsCd")+"' && kindType=='S'", "ea");
// 	trace("classType=='"+ds_goodsReturnS.getColumn(curRw, "classType")+"' AND goodsClassCd=='"+ds_goodsReturnS.getColumn(curRw, "goodsClassCd")
// 							+"' AND detailGoodsCd=='"+ds_goodsReturnS.getColumn(curRw, "detailGoodsCd")+"' AND kindType=='S'");
// 	trace(" csSum ==>> "+csSum +"//// remainingEa ==>> "+ds_saleCount.getColumn(0, "remainingEa"));
	
	var curNum = 0;
	// 수정일때,
	if(ds_goodsReturnS.getRowType(curRw) == 4) {
		curNum = (insNum-orgNum);
		if(curNum > toNumber(ds_saleCount.getColumn(0, "remainingEa"))) {
			gfn_alert("반품수량이 현재 판매수량 보다 클 수 없습니다.");
			ds_goodsReturnS.enableevent = false;
			ds_goodsReturnS.setColumn(curRw, "ea", orgNum);
			ds_goodsReturnS.enableevent = true;
			return false;
		}
	
	// 입력일때,
	}else {
		curNum = insNum;
		if(curNum > toNumber(ds_saleCount.getColumn(0, "remainingEa"))) {
			gfn_alert("반품수량이 현재 판매수량 보다 클 수 없습니다.");
			ds_goodsReturnS.enableevent = false;
			ds_goodsReturnS.setColumn(curRw, "ea", "");
			ds_goodsReturnS.enableevent = true;
			return false;
		}
	}
	
	// 화면상에서 입력된 총 반품개수의 합.
	var totReturnEa = ds_goodsReturnS.getCaseSum("goodsClassCd=='"+ds_goodsReturnS.getColumn(curRw, "goodsClassCd")+"'&&detailGoodsCd=='"+ds_goodsReturnS.getColumn(curRw, "detailGoodsCd")+"'","ea");
	// 화면상에서 비교할 최대 판매개수.
	var totMaxEa = ds_goodsReturnS.getCaseMax("goodsClassCd=='"+ds_goodsReturnS.getColumn(curRw, "goodsClassCd")+"'&&detailGoodsCd=='"+ds_goodsReturnS.getColumn(curRw, "detailGoodsCd")+"'","remainingEa");
	if(toNumber(totReturnEa) > toNumber(totMaxEa)) {
		// 수정일때,
		if(ds_goodsReturnS.getRowType(curRw) == 4) {
			gfn_alert("반품수량이 현재 판매수량 보다 클 수 없습니다.");
			ds_goodsReturnS.enableevent = false;
			ds_goodsReturnS.setColumn(curRw, "ea", orgNum);
			ds_goodsReturnS.enableevent = true;
		// 입력일때,
		}else {
			gfn_alert("반품수량이 현재 판매수량 보다 클 수 없습니다.");
			ds_goodsReturnS.enableevent = false;
			ds_goodsReturnS.setColumn(curRw, "ea", "");
			ds_goodsReturnS.enableevent = true;
		}
		return false;
	}
	
	return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchPayWayList()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 결재수단 조회
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchPayWayList()
{
	// 조회시 Validation Check
	//if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;
	
	var strSvcID    = "";
	var strURL      = "";
	var strInDs     = "";
	var strOutDs    = "";
	var strArg      = "";
	var strCallback = "";
	var bAsync      = true;
	
	// Grid sort 표시 초기화(필수)
	gfn_clearSortMark(tab_funeralDeadDeadSheet.tabpage1.grd_payWay);
	
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	//fv_payWayColInfo = gfn_getDatasetInfo(ds_payWay);
	//ds_payWay.clearData();
	
	strSvcID    = "searchPayWayList";
	strURL      = "fs/fsf/funeralDeadDeadSheet/selectPayWayList.xdo";
	strInDs     = "ds_search=ds_search:A";
	strOutDs    = "ds_payWay=ds_payWay";
	strArg      = "";
	strCallback = "fn_callBack";
	bAsync      = true;
   
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_savePayWay()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 결재수단 저장
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_savePayWay()
{
	if (!gfn_dsIsUpdated(ds_payWay)) {
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
	
	// 저장시 Validation Check	
	if (gfn_validCheck(ds_payWay, ds_payWayValid) == false)	return;
	
	var cnt = 0;
	for(var i=0; i<ds_payWay.rowcount; i++) {
		for(var n=0; n<ds_payWay.rowcount; n++)
		{
			if(ds_payWay.getColumn(i, "occurDate") != ds_payWay.getColumn(n, "occurDate")) {
				cnt++;
			}
		}	
	}
	
	if(cnt > 0 )
	{
		gfn_alert("매출일자는 상이 할수 없습니다. 매출일자를 통일하여 주십시오.");
		return;
	}

	if(ds_payWay.rowcount > 0)
	{
		if(gfn_parseInt(ds_payWay.getSum("salAmt")) <= 0 || gfn_parseInt(ds_payWay.getSum("salAmt")) != gfn_parseInt(ds_funeralDeadDeadSheet.getSum("adjustAmt")))
		{
			gfn_alert("결제 총 금액이 판매 총 금액과 일치해야 합니다.");
			return;
		}
	}
	
	//마감된 매출일자인지 검증
//	fn_searchCloseYn();
	
	for(var i=0; i<ds_payWay.rowcount; i++) {
		if(gfn_isNull(ds_payWay.getColumn(i,"cardPayCd"))) {
			gfn_alert("지불유형 항목이 누락되었습니다.");
			ds_payWay.rowposition = i;
			return;
		}
	}
	
	var strSvcID    = "save";
	var strURL      = "fs/fsf/funeralSingleGoodsOutReturn/saveGoodsSaleoutReturnList.xdo";
	var strInDs     = "ds_goodsSaleoutS=ds_goodsSaleoutS:U ds_goodsReturnS=ds_goodsReturnS:U ds_payWay=ds_payWay:U";
	var strOutDs    = "";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;
	
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/
/*
 ******************************************************************************************
 * 함  수  명   : fn_addRow()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 결재수단 행추가 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_addRow(obj:Button,  e:ClickEventInfo)
{
	if(!gfn_isNull(ds_search.getColumn(0, "upjangCd"))) {
				
		var addRw = ds_payWay.addRow();
		
		if(ds_payWay.rowcount <= 1)
		{
//			ds_payWay.setColumn(addRw, "occurDate", fv_sToday);
		}else{
			//ds_payWay.setColumn(addRw, "occurDate", ds_payWay.getColumn(ds_payWay.rowposition-1, "occurDate"));
//			ds_payWay.setColumn(addRw, "occurDate", fv_sToday);
		}	
		ds_payWay.setColumn(addRw, "upjangCd", ds_search.getColumn(0, "upjangCd"));
		ds_payWay.setColumn(addRw, "guestNum", ds_search.getColumn(0, "upjangCd"));
		ds_payWay.setColumn(addRw, "muCd", ds_search.getColumn(0, "muCd"));
		if(ds_ccCd.rowcount > 0)
		{
			ds_payWay.setColumn(addRw, "ccCd", ds_ccCd.getColumn(0, "ccCd"));
		}else{
			ds_payWay.setColumn(addRw, "ccCd", ds_ccCd.getColumn(0, "ccCd"));
		}
		ds_payWay.setColumn(addRw, "guestNum", ds_search.getColumn(0, "upjangCd"));
//		ds_payWay.setColumn(addRw, "theDeadNm", ds_deadGuest.getColumn(ds_deadGuest.rowposition,"theDeadNm"));
		ds_payWay.setColumn(addRw, "evidence4", ds_search.getColumn(0, "upjangCd"));
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_addRow()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 결재수단 행삭제 처리 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_deleteRow(obj:Button,  e:ClickEventInfo)
{
	if(ds_payWay.rowposition >= 0) {
	
		if(ds_payWay.getColumn(ds_payWay.rowposition, "ddddCloseYn")=="Y") {
			gfn_alert("마감된건은 삭제할수 없습니다.");
			return;
		}else {
			ds_payWay.deleteRow(ds_payWay.rowposition);
		}
	}
}


/*
 ******************************************************************************************
 * 함  수  명   : btn_onclick()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : Grid별 버튼 기능 적용
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function btn_onclick(obj:Button,  e:ClickEventInfo)
{
	switch(obj.name) {
					
		// 개별 판매품목 (+)
		case "btn_saleOutSPlus":
			
			var strId       = "FuneralSaleGoodsPop";
			var strURL      = "X_FSF::FuneralSaleGoodsPop.xfdl";
			var objArgument = {argSvcID:"searchCode",argUrl:"fs/fsf/funeralSingleGoodsOutReturn/selectCodeList3.xdo",argCount:"5",argFuneralHallCd:ds_search.getColumn(0, "upjangCd"),argKindType:"S",argType:"saleS"};
			var nWidth      = 646;
			var nHeight     = 450;
			var strStyle    = "";
			var nLeft       = -1;
			var nTop        = -1;
			var isModeless  = true;
			var bShowTitle  = true;
			var strAlign    = "-1";
			// 리턴값을 배열로 받을 경우
			var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
		
			break;
			
		// 개별 판매품목 (-) : 주문상태가 접수(001)인건만 삭제가 가능하다.(판매(002)인건은 삭제불가.)
		case "btn_saleOutSMinus":
			if(ds_goodsSaleoutS.rowposition < 0) {
				gfn_alert("msg.err.grid.noselect");	// 선택된 항목이 없습니다.
			}else if(ds_goodsSaleoutS.getColumn(ds_goodsSaleoutS.rowposition, "orgOrderStatus")=="002") {
				gfn_alert("ftp.err.validator.poorder.delete");	// 구매주문상태가 확정 상태는 삭제할 수 없습니다.
			}else {
				var confirm = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
				if(confirm) {
					ds_goodsSaleoutS.deleteRow(ds_goodsSaleoutS.rowposition);
				}
			}
			break;
			
		// 개별 판매품목 (출력)
		case "btn_saleOutSPrint":
			
			break;
			
		// 개별 반품품목 (+)
		case "btn_goodsReturnSPlus":
			
			var strId       = "FuneralSaleGoodsPop";
			var strURL      = "X_FSF::FuneralSaleGoodsPop.xfdl";
			var objArgument = {argSvcID:"searchCode",argUrl:"fs/fsf/funeralSingleGoodsOutReturn/selectCodeList2.xdo",argCount:"5",argFuneralHallCd:ds_search.getColumn(0, "upjangCd"),argGuestNum:ds_search.getColumn(0, "upjangCd"),argSaleClass:"001",argKindType:"S",argType:"returnS"};
			var nWidth      = 646;
			var nHeight     = 450;
			var strStyle    = "";
			var nLeft       = -1;
			var nTop        = -1;
			var isModeless  = false;
			var bShowTitle  = true;
			var strAlign    = "-1";
			// 리턴값을 배열로 받을 경우
			var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
			
			break;
			
		// 개별 반품품목 (-) : 주문상태가 접수인건만 삭제가 가능하다.(판매(002)인건은 삭제불가.)
		case "btn_goodsReturnSMinus":
			if(ds_goodsReturnS.rowposition < 0) {
				gfn_alert("msg.err.grid.noselect");	// 선택된 항목이 없습니다.
			}else {
				var confirm = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
				if(confirm) {
					ds_goodsReturnS.deleteRow(ds_goodsReturnS.rowposition);
				}
			}
			break;
			
		// 개별 반품품목 (일괄적용)
		case "btn_goodsReturnSExcelUp":
			
			break;
			
		// 개별 반품품목 (출력)
		case "btn_goodsReturnSPrint":
			
			break;	
		default:
			break;
	}
}


/*
 ******************************************************************************************
 * 함  수  명   : fn_searchEnter()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 조회조건 enter 입력 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_searchEnter(obj, e:KeyEventInfo)
{	
	if(e.keycode==13){
		fn_search();
	}
}

function ds_goodsSaleout_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var amtVal = 0;
	if(e.columnid == "ea") {
		if(gfn_parseInt(obj.getColumn(e.row, "ea")) <= 0)
		{
			gfn_alert("개수는 0보다 커야합니다.");
			obj.setColumn(e.row, "ea", "");
			return;
		}
	}
	
	if(e.columnid == "ea" && !gfn_isNull(obj.getColumn(e.row, "lastUprice"))) {
		amtVal = toNumber(e.newvalue)*toNumber(obj.getColumn(e.row, "lastUprice"));
		obj.setColumn(e.row, "amt", amtVal);
	}else if(e.columnid == "lastUprice" && !gfn_isNull(obj.getColumn(e.row, "ea"))) {
		amtVal = toNumber(e.newvalue)*toNumber(obj.getColumn(e.row, "ea"));
		obj.setColumn(e.row, "amt", amtVal);
	}else if(e.columnid=="chk" && e.newvalue==1) {
		obj.enableevent = false;
		obj.setColumn(e.row, "orderStatus", "002");	 		 // 판매로..
		obj.setColumn(e.row, "saleDate", gfn_todayTime());	 // 현재시간 SET
		obj.enableevent = true;
	}
}

function ds_goodsReturn_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var amtVal = 0;
	if(e.columnid == "ea") {
		if(gfn_parseInt(obj.getColumn(e.row, "ea")) <= 0)
		{
			gfn_alert("개수는 0보다 커야합니다.");
			obj.enableevent = false;
			obj.setColumn(e.row, "ea", "");
			obj.enableevent = true;
			return;
		}
	}
	
	if(e.columnid == "ea" && !gfn_isNull(obj.getColumn(e.row, "lastUprice"))) {
		
		// 상품구분, 상품분류, 상품명  유무 체크(수량 입력전에 체크)
 		if(gfn_isNull(obj.getColumn(e.row, "setNm"))||gfn_isNull(obj.getColumn(e.row, "goodsClassNm"))||gfn_isNull(obj.getColumn(e.row, "detailGoodsNm"))) {
 			gfn_alert("상품구분(상품분류, 상품명)을 먼저 입력하세요.");
 			obj.enableevent = false;
 			obj.setColumn(e.row, "ea", "");
 			obj.enableevent = true;
 			return;
 		}
		
		// 수량 입력받을때, 해당상품 판매량 구해서 비교하기(반품일 경우, 총 판매량을 넘을수 없음.)
		if(fn_searchSaleCount(e.row, toNumber(e.newvalue), toNumber(obj.getOrgColumn(e.row, e.columnid)))) {
		
			amtVal = toNumber(e.newvalue)*toNumber(obj.getColumn(e.row, "lastUprice"));
			obj.enableevent = false;
			obj.setColumn(e.row, "amt", amtVal);
			obj.enableevent = true;
		}			
		
	}else if(e.columnid == "lastUprice" && !gfn_isNull(obj.getColumn(e.row, "ea"))) {
		amtVal = toNumber(e.newvalue)*toNumber(obj.getColumn(e.row, "ea"));
		obj.enableevent = false;
		obj.setColumn(e.row, "amt", amtVal);
		obj.enableevent = true;
	}
}

function ds_goodsReturnS_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var amtVal = 0;
	if(e.columnid == "ea" && !gfn_isNull(obj.getColumn(e.row, "lastUprice"))) {
		if(gfn_parseInt(ds_goodsReturnS.getColumn(e.row, "ea")) > gfn_parseInt(ds_goodsReturnS.getColumn(e.row, "remainingEa")))
		{
			gfn_alert("반품수량이 현재 판매수량 보다 클 수 없습니다.");
			ds_goodsReturnS.setColumn(e.row, "ea", "");
			return;
		}else{
			amtVal = toNumber(e.newvalue)*toNumber(obj.getColumn(e.row, "lastUprice"));
			obj.setColumn(e.row, "amt", amtVal);
		}
	}else if(e.columnid == "lastUprice" && !gfn_isNull(obj.getColumn(e.row, "ea"))) {
		amtVal = toNumber(e.newvalue)*toNumber(obj.getColumn(e.row, "ea"));
		obj.setColumn(e.row, "amt", amtVal);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_searchEnter()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 조회조건 enter 입력 이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_addPopup()
{	
	var strId       = "FuneralSaleGoodsPop";
	var strURL      = "X_FSF::FuneralSaleGoodsPop.xfdl";
	var objArgument = "";
	if(obj.name == "grd_goodsSaleoutS") {
		objArgument = {argSvcID:"searchCode",argUrl:"fs/fsf/funeralSingleGoodsOutReturn/selectCodeList.xdo",argCount:"5",argFuneralHallCd:g_Upjang,argType:"sale"};
	}else{
		objArgument = {argSvcID:"searchCode",argUrl:"fs/fsf/funeralSingleGoodsOutReturn/selectCodeList.xdo",argCount:"5",argFuneralHallCd:g_Upjang,argType:"return"};
	}
	var nWidth      = 646;
	var nHeight     = 450;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	// 리턴값을 배열로 받을 경우
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_expandDown()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   :  이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_expandDown(obj:Grid, e:GridMouseEventInfo)
{
	if(gfn_isNull(ds_search.getColumn(0,"upjangCd"))){
		gfn_alert("msg.noselect","사업장");
		return;
	}
	//창고
	if(e.cell == 9){
//		fn_subinv(e.row);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_payWay_oncolumnchanged()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   :  이벤트
 * 작  성  자   : 백정훈
 * 작성  일자   : 2015-04-03
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function ds_payWay_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 지불유형(현금)
	if(e.columnid=="payCd" && e.newvalue=="1") {
		ds_payWay.setColumn(e.row, "cardPayCd", "");
//		tab_funeralDeadDeadSheet.tabpage1.grd_payWay.setFormatColProperty(7, "size", 100);
//		tab_funeralDeadDeadSheet.tabpage1.grd_payWay.setFormatColProperty(8, "size", 0);
	// 지불유형(카드)
	}else if(e.columnid=="payCd" && e.newvalue=="2") {
		ds_payWay.setColumn(e.row, "cardPayCd", "");
		fn_cardPop(e.row);
//		tab_funeralDeadDeadSheet.tabpage1.grd_payWay.setFormatColProperty(7, "size", 0);
//		tab_funeralDeadDeadSheet.tabpage1.grd_payWay.setFormatColProperty(8, "size", 100);
	}else if(e.columnid=="occurDate") {
		
		if(toNumber(e.newvalue) > toNumber(fv_sToday)) {
			setTimer(998, 100);
		}else {
			ds_search.setColumn(0, "occurDate", e.newvalue);
			fn_searchCloseYn();		
		}
	}
}

function FuneralSingleGoodsOutReturn_ontimer(obj:Form, e:TimerEventInfo)
{
	killTimer(998);
	ds_payWay.enableevent = false;
	gfn_alert("금일이후 일자로 등록할수 없습니다.");
	ds_payWay.setColumn(ds_payWay.rowposition, "occurDate", "");			
	ds_payWay.enableevent = true;		
}
]]></Script>
  </Form>
</FDL>
