<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="IncomePoOrderDtl" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 859" titletext="구매주문 작성 (수입)" scrollbars="autoboth" onload="form_onload" onclose="IncomePoOrderDtl_onclose">
    <Layouts>
      <Layout>
        <Static id="Static24" class="sta_WFDA_Labelbg" position="absolute 24 264 1237 291" anchor="left top"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 844 1252 859" anchor="left bottom"/>
        <Static id="Static31" class="sta_WFDA_Labelbg" position="absolute 24 56 1237 83" anchor="left top"/>
        <Static id="Static49" class="sta_WFDA_Labelbg" position="absolute 24 30 1237 57" anchor="left top"/>
        <Static id="Static67" class="sta_WFDA_Labelbg" position="absolute 24 82 1237 109" anchor="left top"/>
        <Static id="Static60" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 395 450 410" anchor="left top"/>
        <Static id="Static26" text="구매주문번호" class="sta_WFDA_Label01" position="absolute 50 30 144 57" anchor="left top"/>
        <Edit id="edt_poOrderNum" taborder="42" position="absolute 146 33 263 54" anchor="left top" enable="true" readonly="true" oneditclick="edt_poOrderNum_oneditclick" style="background:#ecececff;"/>
        <Static id="Static03" text="기안자" class="sta_WFDA_Label01" position="absolute 50 56 144 83" anchor="left top"/>
        <Edit id="edt_poProposalStatusNm" taborder="45" position="absolute 739 33 856 54" anchor="left top" enable="true" readonly="true" style="background:#ecececff;"/>
        <Tab id="Tab00" taborder="57" tabindex="0" scrollbars="autoboth" position="absolute 15 410 1237 845" style="showextrabutton:false;" anchor="left top right" enable="true" onchanged="Tab00_onchanged" canchange="Tab00_canchange">
          <Tabpages>
            <Tabpage id="tabpage1" text="품목">
              <Layouts>
                <Layout width="1235" height="410">
                  <Grid id="grd_itemList" taborder="3" binddataset="ds_itemList" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 10 31 1210 397" anchor="all" autofittype="col" onexpandup="grd_itemList_onexpandup">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="43"/>
                          <Column size="115"/>
                          <Column size="194"/>
                          <Column size="85"/>
                          <Column size="75"/>
                          <Column size="67"/>
                          <Column size="70"/>
                          <Column size="96"/>
                          <Column size="76"/>
                          <Column size="101"/>
                          <Column size="61"/>
                          <Column size="87"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" style="color: ;" class="grd_WF_Essential" text="품목코드"/>
                          <Cell col="2" text="품목명"/>
                          <Cell col="3" style="color: ;" class="grd_WF_Essential" text="단위"/>
                          <Cell col="4" style="color: ;" class="grd_WF_Essential" text="수량"/>
                          <Cell col="5" style="color: ;" class="grd_WF_Essential" text="중량"/>
                          <Cell col="6" style="color: ;" class="grd_WF_Essential" text="단가(USD)"/>
                          <Cell col="7" style="color: ;" class="grd_WF_Essential" text="원물금액(USD)"/>
                          <Cell col="8" text="단가(KRW)"/>
                          <Cell col="9" text="원물금액(KRW)"/>
                          <Cell col="10" style="color: ;" class="grd_WF_Essential" text="과세여부"/>
                          <Cell col="11" text="HS코드"/>
                        </Band>
                        <Band id="body">
                          <Cell expr="currow+1"/>
                          <Cell col="1" displaytype="text" edittype="expand" text="bind:itemCd" expandshow="show" expandsize="21"/>
                          <Cell col="2" displaytype="normal" edittype="none" style="align:left;" text="bind:itemNm"/>
                          <Cell col="3" displaytype="combo" edittype="combo" text="bind:unit"/>
                          <Cell col="4" displaytype="number" edittype="masknumber" text="bind:quantity" mask="#,##0"/>
                          <Cell col="5" displaytype="number" edittype="masknumber" style="color: ;" text="bind:wgt" mask="#,##0.00"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" text="bind:uprice" mask="#,##0.##"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:wonwtrAmt" mask="#,##0.00"/>
                          <Cell col="8" displaytype="number" edittype="masknumber" text="bind:upriceKrw" mask="#,##0"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" text="bind:wonwtrAmtKrw" mask="#,##0"/>
                          <Cell col="10" displaytype="combo" edittype="combo" text="bind:taxYn"/>
                          <Cell col="11" text="bind:hsCd"/>
                        </Band>
                        <Band id="summary">
                          <Cell/>
                          <Cell col="1"/>
                          <Cell col="2"/>
                          <Cell col="3"/>
                          <Cell col="4" displaytype="number" edittype="masknumber" text="expr:getSum('quantity')" mask="#,##0.##"/>
                          <Cell col="5" displaytype="number" edittype="masknumber" text="expr:getSum('wgt')" mask="#,##0.00"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" text="expr:getSum('uprice')"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="expr:getSum('wonwtrAmt')" mask="#,##0.00"/>
                          <Cell col="8" displaytype="number" edittype="masknumber" text="expr:getSum('upriceKrw')" mask="#,##0"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" text="expr:getSum('wonwtrAmtKrw')" mask="#,##0"/>
                          <Cell col="10"/>
                          <Cell col="11"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static22" text="Item 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Button id="Button00" taborder="4" class="btn_WF_GrdPlus" position="absolute 1171 8 1189 28" anchor="top right" onclick="fn_addRow1"/>
                  <Button id="Button01" taborder="5" class="btn_WF_GrdMinus" position="absolute 1191 8 1209 28" anchor="top right" onclick="fn_deleteRow1"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="지불조건">
              <Layouts>
                <Layout>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static22" text="Payment Agreement 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Static id="Static63" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1 515 11 830"/>
                  <Static id="Static44" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1226 515 1236 830"/>
                  <Static id="Static64" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 11 834 1226 844"/>
                  <Grid id="grd_payList" taborder="3" binddataset="ds_payList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 10 31 1210 397" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="198"/>
                          <Column size="176"/>
                          <Column size="77"/>
                          <Column size="84"/>
                          <Column size="78"/>
                          <Column size="85"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" style="color: ;" class="grd_WF_Essential" text="지불조건명"/>
                          <Cell col="2" style="color: ;" class="grd_WF_Essential" text="지불금액"/>
                          <Cell col="3" text="작성자"/>
                          <Cell col="4" text="작성일자"/>
                          <Cell col="5" text="수정자"/>
                          <Cell col="6" text="수정일자"/>
                        </Band>
                        <Band id="body">
                          <Cell expr="expr:currow+1"/>
                          <Cell col="1" displaytype="combo" edittype="combo" text="bind:payCondCd"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" text="bind:payAmt" mask="#,##0.00"/>
                          <Cell col="3" text="bind:cuser"/>
                          <Cell col="4" displaytype="date" text="bind:cdate" calendardisplaynulltype="none"/>
                          <Cell col="5" text="bind:uuser"/>
                          <Cell col="6" displaytype="date" text="bind:udate" calendardisplaynulltype="none"/>
                        </Band>
                        <Band id="summary">
                          <Cell/>
                          <Cell col="1"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" text="expr:getSum('payAmt')" mask="#,##0.00"/>
                          <Cell col="3"/>
                          <Cell col="4"/>
                          <Cell col="5"/>
                          <Cell col="6"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="Button02" taborder="4" class="btn_WF_GrdPlus" position="absolute 1171 8 1189 28" anchor="top right" onclick="fn_addRow2"/>
                  <Button id="Button03" taborder="5" class="btn_WF_GrdMinus" position="absolute 1191 8 1209 28" anchor="top right" onclick="fn_deleteRow2"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage3" text="송장">
              <Layouts>
                <Layout>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static22" text="Invoice 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Grid id="grd_invoiceList" taborder="1" binddataset="ds_invoiceList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 10 31 1210 397" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="38"/>
                          <Column size="272"/>
                          <Column size="103"/>
                          <Column size="57"/>
                          <Column size="62"/>
                          <Column size="54"/>
                          <Column size="75"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" style="color: ;" class="grd_WF_Essential" text="Invoice 번호"/>
                          <Cell col="2" style="color: ;" class="grd_WF_Essential" text="Invoice 일자"/>
                          <Cell col="3" text="작성자"/>
                          <Cell col="4" text="작성일자"/>
                          <Cell col="5" text="수정자"/>
                          <Cell col="6" text="수정일자"/>
                        </Band>
                        <Band id="body">
                          <Cell expr="expr:currow+1"/>
                          <Cell col="1" displaytype="text" edittype="text" text="bind:invoiceNum"/>
                          <Cell col="2" displaytype="date" edittype="date" text="bind:invoicePublishDate" calendardisplaynulltype="none"/>
                          <Cell col="3" text="bind:cuser"/>
                          <Cell col="4" displaytype="date" text="bind:cdate" calendardisplaynulltype="none"/>
                          <Cell col="5" text="bind:uuser"/>
                          <Cell col="6" displaytype="date" text="bind:udate" calendardisplaynulltype="none"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="Button00" taborder="2" class="btn_WF_GrdPlus" position="absolute 1171 8 1189 28" anchor="top right" onclick="fn_addRow3"/>
                  <Button id="Button01" taborder="3" class="btn_WF_GrdMinus" position="absolute 1191 8 1209 28" anchor="top right" onclick="fn_deleteRow3"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage4" text="첨부파일">
              <Layouts>
                <Layout>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <ObjAtchFile id="ObjAtchFile" anchor="all" titletext="Attach File Object" taborder="3" onclick="ObjAtchFile_onclick" position="absolute 10 -4 1210 397"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Layouts>
              <Layout>
                <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                <Static id="Static22" text="File 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                <Grid id="grd_list" taborder="1" binddataset="ds_grd" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 10 31 1225 397" anchor="all">
                  <Formats>
                    <Format id="default">
                      <Columns>
                        <Column size="60"/>
                        <Column size="348"/>
                        <Column size="103"/>
                        <Column size="92"/>
                        <Column size="77"/>
                        <Column size="75"/>
                        <Column size="71"/>
                        <Column size="79"/>
                      </Columns>
                      <Rows>
                        <Row size="24" band="head"/>
                      </Rows>
                      <Band id="head">
                        <Cell text="No"/>
                        <Cell col="1" text="파일명"/>
                        <Cell col="2" text="파일사이즈"/>
                        <Cell col="3" displaytype="normal" text="다운로드"/>
                        <Cell col="4" text="작성자"/>
                        <Cell col="5" text="작성일자"/>
                        <Cell col="6" text="수정자"/>
                        <Cell col="7" text="수정일자"/>
                      </Band>
                    </Format>
                  </Formats>
                </Grid>
                <Button id="Button00" taborder="2" class="btn_WF_GrdPlus" position="absolute 1167 8 1185 28" anchor="top right"/>
                <Button id="Button01" taborder="3" class="btn_WF_GrdMinus" position="absolute 1187 8 1205 28" anchor="top right"/>
                <Button id="Button05" taborder="4" class="btn_WF_GrdSave" position="absolute 1207 8 1225 28" anchor="top right"/>
              </Layout>
            </Layouts>
            <Tabpage id="tabpage5" text="수수료" layoutselecttype="outer,width">
              <Layouts>
                <Layout>
                  <Static id="Static22" text="수수료 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Button id="Button00" taborder="1" class="btn_WF_GrdPlus" position="absolute 1171 8 1189 28" anchor="top right" onclick="fn_addRow5"/>
                  <Button id="Button01" taborder="2" class="btn_WF_GrdMinus" position="absolute 1191 8 1209 28" anchor="top right" onclick="fn_deleteRow5"/>
                  <Button id="btn_fiscalSlipCancel" taborder="4" text="회계전표 I/F 취소" onclick="btn_fiscalSlipCancel_onclick" class="btn_WF_Function" position="absolute 1064 8 1169 28" anchor="top right"/>
                  <Button id="btn_fiscalSlipCreate" taborder="5" text="회계전표 I/F" onclick="btn_fiscalSlipCreate_onclick" class="btn_WF_Function" position="absolute 967 8 1062 28" anchor="top right"/>
                  <Grid id="grd_otherAmtList" taborder="6" binddataset="ds_otherAmtList" scrollpixel="default" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 10 31 1210 397" anchor="all" tooltiptype="inplace" onexpandup="grd_otherAmtList_onexpandup" oncellclick="grd_otherAmtList_oncellclick">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40" band="left"/>
                          <Column size="40" band="left"/>
                          <Column size="62" band="left"/>
                          <Column size="71" band="left"/>
                          <Column size="128" band="left"/>
                          <Column size="103"/>
                          <Column size="133"/>
                          <Column size="214"/>
                          <Column size="71"/>
                          <Column size="135"/>
                          <Column size="86"/>
                          <Column size="88"/>
                          <Column size="84"/>
                          <Column size="220"/>
                          <Column size="0"/>
                          <Column size="92"/>
                          <Column size="87"/>
                          <Column size="106"/>
                          <Column size="115"/>
                          <Column size="144"/>
                          <Column size="111"/>
                          <Column size="81"/>
                          <Column size="72"/>
                          <Column size="0"/>
                          <Column size="114"/>
                          <Column size="88"/>
                          <Column size="86"/>
                          <Column size="160"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="2" text="결재상태"/>
                          <Cell col="3" displaytype="normal" edittype="none" text="전표상태"/>
                          <Cell col="4" style="color: ;" class="grd_WF_Essential" text="수수료구분"/>
                          <Cell col="5" style="color: ;" class="grd_WF_Essential" text="유형"/>
                          <Cell col="6" style="background: ;" text="과세유형"/>
                          <Cell col="7" style="color: ;" class="grd_WF_Essential" text="분개계정"/>
                          <Cell col="8" style="color: ;" class="grd_WF_Essential" text="근거종류"/>
                          <Cell col="9" style="color: ;" class="grd_WF_Essential" text="근거번호"/>
                          <Cell col="10" style="color: ;" class="grd_WF_Essential" text="수수료금액"/>
                          <Cell col="11" style="background: ;" text="공급가"/>
                          <Cell col="12" style="background: ;" text="부가세"/>
                          <Cell col="13" style="background:#566572ff URL('theme://images/new/grd_WF_Essential.png') left top;" text="적요"/>
                          <Cell col="14" style="background:#566572ff URL('theme://images/new/grd_WF_Essential.png') left top;" text="신고업장"/>
                          <Cell col="15" displaytype="normal" style="color: ;" class="grd_WF_Essential" text="전표발행일"/>
                          <Cell col="16" style="color: ;" class="grd_WF_Essential" text="지불예정일자"/>
                          <Cell col="17" style="color: ;" class="grd_WF_Essential" text="세금계산서번호"/>
                          <Cell col="18" text="세금계산서발행일"/>
                          <Cell col="19" style="color: ;" class="grd_WF_Essential" text="실지급처"/>
                          <Cell col="20" text="배부금액"/>
                          <Cell col="21" text="배부잔액"/>
                          <Cell col="22" style="color: ;" class="grd_WF_Essential" text="귀속부서"/>
                          <Cell col="23"/>
                          <Cell col="24" text="원시회계전표번호"/>
                          <Cell col="25" text="회계전표번호"/>
                          <Cell col="26" text="전표생성일자"/>
                          <Cell col="27" text="SAP 메세지"/>
                        </Band>
                        <Band id="body">
                          <Cell text="bind:otherAmtSeq" expr="expr:currow+1"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                          <Cell col="2" text="bind:signProgressStatusNm"/>
                          <Cell col="3" displaytype="normal" edittype="none" text="bind:slipStatusNm" combodisplay="edit"/>
                          <Cell col="4" displaytype="combo" edittype="combo" style="align:left;" text="bind:commClass"/>
                          <Cell col="5" displaytype="combo" edittype="combo" text="bind:commType"/>
                          <Cell col="6" displaytype="combo" edittype="combo" text="bind:taxCd"/>
                          <Cell col="7" displaytype="normal" edittype="expand" style="align:left;" text="bind:journalzAcctNm" expandshow="show" expandsize="21"/>
                          <Cell col="8" displaytype="combo" edittype="combo" text="bind:basiKind"/>
                          <Cell col="9" displaytype="expr:basiKind == 'CL' ? 'combo' : 'text'" edittype="expr:basiKind == 'CL' ? 'combo' : 'text'" text="bind:basiNum" combodataset="ds_basiNum" combocodecol="code" combodatacol="codeName"/>
                          <Cell col="10" displaytype="number" edittype="masknumber" text="bind:commAmt" mask="#,##0.##"/>
                          <Cell col="11" displaytype="number" edittype="masknumber" text="bind:supplyPrice" mask="#,##0.##"/>
                          <Cell col="12" displaytype="number" edittype="masknumber" text="bind:vatAmt" mask="#,##0.##"/>
                          <Cell col="13" displaytype="text" edittype="text" text="bind:remarks"/>
                          <Cell col="14" displaytype="combo" edittype="combo" style="align:left;" text="bind:vatNewhghtUpjang"/>
                          <Cell col="15" displaytype="date" edittype="date" text="bind:slipPublishDate" calendardisplaynulltype="none"/>
                          <Cell col="16" displaytype="date" edittype="date" text="bind:paySchdDate" calendardisplaynulltype="none"/>
                          <Cell col="17" displaytype="text" edittype="text" text="bind:taxBillNum"/>
                          <Cell col="18" displaytype="date" edittype="date" text="bind:billPublishdd" calendardisplaynulltype="none"/>
                          <Cell col="19" displaytype="text" edittype="expand" text="bind:realPaymentPlceNm" expandshow="show" expandsize="21"/>
                          <Cell col="20" displaytype="number" edittype="none" text="bind:divAccumAmt" mask="#,##0.##"/>
                          <Cell col="21" displaytype="number" text="bind:divAccumBalAmt" mask="#,##0.##"/>
                          <Cell col="22" displaytype="normal" edittype="none" style="color: ;" text="bind:attachDeptNm"/>
                          <Cell col="23" text="bind:journalzAcct"/>
                          <Cell col="24" text="bind:orgFiscalSlipNum"/>
                          <Cell col="25" displaytype="normal" edittype="none" text="bind:fiscalSlipNum"/>
                          <Cell col="26" displaytype="date" edittype="none" text="bind:fiscalSlipcDate" calendardisplaynulltype="none"/>
                          <Cell col="27" displaytype="text" text="bind:resultMsg"/>
                        </Band>
                        <Band id="summary">
                          <Cell/>
                          <Cell col="1"/>
                          <Cell col="2"/>
                          <Cell col="3"/>
                          <Cell col="4"/>
                          <Cell col="5"/>
                          <Cell col="6"/>
                          <Cell col="7"/>
                          <Cell col="8"/>
                          <Cell col="9"/>
                          <Cell col="10" displaytype="number" expr="expr:getSum(&quot;gfn_parseFloat(commAmt)&quot;)" mask="#,##0.##"/>
                          <Cell col="11" displaytype="number" expr="expr:getSum(&quot;gfn_parseFloat(supplyPrice)&quot;)" mask="#,##0.##"/>
                          <Cell col="12" displaytype="number" expr="expr:getSum(&quot;gfn_parseFloat(vatAmt)&quot;)" mask="#,##0.##"/>
                          <Cell col="13"/>
                          <Cell col="14"/>
                          <Cell col="15"/>
                          <Cell col="16"/>
                          <Cell col="17"/>
                          <Cell col="18"/>
                          <Cell col="19"/>
                          <Cell col="20" displaytype="number" expr="expr:getSum(&quot;gfn_parseFloat(divAccumAmt)&quot;)" mask="#,##0.##"/>
                          <Cell col="21" displaytype="number" expr="expr:getSum(&quot;gfn_parseFloat(divAccumBalAmt)&quot;)" mask="#,##0.##"/>
                          <Cell col="22"/>
                          <Cell col="23"/>
                          <Cell col="24"/>
                          <Cell col="25"/>
                          <Cell col="26"/>
                          <Cell col="27"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_otherAmtList" taborder="7" text="저장" class="btn_WF_Function" position="absolute 926 8 965 28" anchor="top right" onclick="Tab00_tabpage5_btn_otherAmtList_onclick"/>
                  <Button id="btn_slipCall" taborder="8" text="원시전표 불러오기" class="btn_WF_Function" position="absolute 702 8 812 28" anchor="top right" onclick="Tab00_tabpage5_btn_slipCall_onclick"/>
                  <Button id="btn_gwDraft" taborder="9" text="결재상신" onclick="Tab00_tabpage5_btn_gwDraft_onclick" class="btn_WF_Function" position="absolute 508 8 603 28" anchor="top right"/>
                  <Button id="btn_gwDetail" taborder="10" text="결재상세" class="btn_WF_Function" position="absolute 605 8 700 28" anchor="top right" onclick="Tab00_tabpage5_btn_gwDetail_onclick"/>
                  <Button id="btn_suspenseCall" taborder="11" text="가수금 불러오기" class="btn_WF_Function" position="absolute 814 8 924 28" anchor="top right" onclick="Tab00_tabpage5_btn_suspenseCall_onclick"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage6" text="선급금">
              <Layouts>
                <Layout>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static22" text="기타선급금 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Grid id="grd_etcPrepayamtList" taborder="1" binddataset="ds_etcPrepayamtList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 10 31 1210 397" anchor="all" onexpandup="grd_etcPrepayamtList_onexpandup" oncellclick="Tab00_tabpage6_grd_etcPrepayamtList_oncellclick" onheadclick="Tab00_tabpage6_grd_etcPrepayamtList_onheadclick">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="40"/>
                          <Column size="60"/>
                          <Column size="71"/>
                          <Column size="73"/>
                          <Column size="103"/>
                          <Column size="94"/>
                          <Column size="148"/>
                          <Column size="168"/>
                          <Column size="92"/>
                          <Column size="120"/>
                          <Column size="64"/>
                          <Column size="95"/>
                          <Column size="108"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                          <Cell col="2" text="순번"/>
                          <Cell col="3" text="결재상태"/>
                          <Cell col="4" text="전표상태"/>
                          <Cell col="5" style="background:#566572ff URL('theme://images/new/grd_WF_Essential.png') left top;" text="선급금구분"/>
                          <Cell col="6" class="grd_WF_Essential" text="선급금금액"/>
                          <Cell col="7" class="grd_WF_Essential" text="분개 계정"/>
                          <Cell col="8" style="background:#566572ff URL('theme://images/new/grd_WF_Essential.png') left top;" text="적요"/>
                          <Cell col="9" style="background:#566572ff URL('theme://images/new/grd_WF_Essential.png') left top;" text="지불예정일"/>
                          <Cell col="10" style="background:#566572ff URL('theme://images/new/grd_WF_Essential.png') left top;" text="실지급처"/>
                          <Cell col="11" text="귀속부서"/>
                          <Cell col="12" text="회계전표번호"/>
                          <Cell col="13" text="회계전표생성일자"/>
                        </Band>
                        <Band id="body">
                          <Cell expr="expr:currow+1"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                          <Cell col="2" text="bind:adjustSeq" expr="currow+1"/>
                          <Cell col="3" text="bind:signProgressStatusNm"/>
                          <Cell col="4" text="bind:slipStatusNm"/>
                          <Cell col="5" displaytype="combo" edittype="combo" style="align:left;" text="bind:prepayamtClass"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" style="color:sandybrown;" text="bind:prepayamtAmt" mask="#,##0.##"/>
                          <Cell col="7" displaytype="text" edittype="expand" style="color:sandybrown;" text="bind:journalzAcctNm" expandshow="show" expandsize="21"/>
                          <Cell col="8" displaytype="text" edittype="text" text="bind:remarks"/>
                          <Cell col="9" displaytype="date" edittype="date" text="bind:paySchdDate" editautoselect="true" calendardisplaynulltype="none"/>
                          <Cell col="10" displaytype="text" edittype="expand" text="bind:realPaymentPlceNm" expandshow="show" expandsize="21"/>
                          <Cell col="11" displaytype="normal" edittype="none" text="bind:attachDeptNm"/>
                          <Cell col="12" displaytype="normal" edittype="none" text="bind:fiscalSlipNum"/>
                          <Cell col="13" displaytype="date" edittype="none" text="bind:procDate" calendardisplaynulltype="none"/>
                        </Band>
                        <Band id="summary">
                          <Cell/>
                          <Cell col="1"/>
                          <Cell col="2"/>
                          <Cell col="3"/>
                          <Cell col="4"/>
                          <Cell col="5"/>
                          <Cell col="6" displaytype="number" expr="expr:expr:getSum(&quot;gfn_parseFloat(prepayamtAmt)&quot;)" mask="#,##0.##"/>
                          <Cell col="7"/>
                          <Cell col="8"/>
                          <Cell col="9"/>
                          <Cell col="10"/>
                          <Cell col="11"/>
                          <Cell col="12"/>
                          <Cell col="13"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_etcFiscalSlipCreate" taborder="2" text="회계전표 I/F" class="btn_WF_Function" position="absolute 967 8 1062 28" anchor="top right" onclick="btn_etcFiscalSlipCreate_onclick"/>
                  <Button id="btn_etcFiscalSlipCancel" taborder="3" text="회계전표 I/F 취소" onclick="btn_etcFiscalSlipCancel_onclick" class="btn_WF_Function" position="absolute 1064 8 1169 28" anchor="top right"/>
                  <Button id="Button00" taborder="4" class="btn_WF_GrdPlus" position="absolute 1171 8 1189 28" anchor="top right" onclick="fn_addRow6"/>
                  <Button id="Button01" taborder="5" class="btn_WF_GrdMinus" position="absolute 1191 8 1209 28" anchor="top right" onclick="fn_deleteRow6"/>
                  <Button id="btn_etcPrepayamtSave" taborder="6" text="저장" class="btn_WF_Function" position="absolute 926 8 965 28" anchor="top right" onclick="Tab00_tabpage6_btn_etcPrepayamtSave_onclick"/>
                  <Button id="btn_gwDraft2" taborder="7" text="결재상신" class="btn_WF_Function" position="absolute 732 9 827 29" anchor="top right" onclick="Tab00_tabpage6_btn_gwDraft2_onclick"/>
                  <Button id="btn_gwDetail2" taborder="8" text="결재상세" class="btn_WF_Function" position="absolute 829 8 924 28" anchor="top right" onclick="Tab00_tabpage6_btn_gwDetail2_onclick"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage7" text="수수료매출">
              <Layouts>
                <Layout>
                  <Static id="Static22" text="수수료매출 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top" onclick="Tab00_tabpage7_Static22_onclick"/>
                  <Grid id="grd_commSals" taborder="1" binddataset="ds_commSals" scrollpixel="default" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 10 31 1210 397" anchor="all" tooltiptype="inplace" onexpandup="Tab00_tabpage7_grd_commSals_onexpandup" onheadclick="Tab00_tabpage7_grd_commSals_onheadclick" autofittype="col">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="40"/>
                          <Column size="71"/>
                          <Column size="154"/>
                          <Column size="144"/>
                          <Column size="102"/>
                          <Column size="111"/>
                          <Column size="105"/>
                          <Column size="152"/>
                          <Column size="98"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" displaytype="checkbox"/>
                          <Cell col="2" displaytype="normal" edittype="none" text="상태"/>
                          <Cell col="3" style="color: ;" class="grd_WF_Essential" text="분개계정"/>
                          <Cell col="4" style="color: ;" class="grd_WF_Essential" text="거래처"/>
                          <Cell col="5" style="color: ;" class="grd_WF_Essential" text="금액"/>
                          <Cell col="6" style="color: ;" class="grd_WF_Essential" text="공급가액"/>
                          <Cell col="7" style="color: ;" class="grd_WF_Essential" text="세액"/>
                          <Cell col="8" text="비고"/>
                          <Cell col="9" text="매출마감여부"/>
                        </Band>
                        <Band id="body">
                          <Cell expr="expr:currow+1"/>
                          <Cell col="1" displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                          <Cell col="2" displaytype="normal" edittype="none" text="bind:statusNm" combodisplay="edit"/>
                          <Cell col="3" displaytype="normal" edittype="expand" style="align:left;" text="bind:journalzAcctNm" expandshow="show" expandsize="21"/>
                          <Cell col="4" displaytype="text" edittype="expand" text="bind:custNm" expandshow="show" expandsize="21"/>
                          <Cell col="5" displaytype="number" edittype="masknumber" text="bind:uprice" mask="#,##0.##"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" text="bind:supplyAmt" mask="#,##0.##"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:tax" mask="#,##0.##"/>
                          <Cell col="8" displaytype="text" edittype="text" text="bind:remark"/>
                          <Cell col="9" text="bind:ddddCloseYn"/>
                        </Band>
                        <Band id="summary">
                          <Cell/>
                          <Cell col="1"/>
                          <Cell col="2"/>
                          <Cell col="3"/>
                          <Cell col="4"/>
                          <Cell col="5"/>
                          <Cell col="6" displaytype="number" text="expr:getSum('supplyAmt')" mask="#,##0.##"/>
                          <Cell col="7" displaytype="number" text="expr:getSum('tax')" mask="#,##0.##"/>
                          <Cell col="8"/>
                          <Cell col="9"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_addRow7" taborder="2" onclick="fn_addRow7" class="btn_WF_GrdPlus" position="absolute 1171 8 1189 28" anchor="top right"/>
                  <Button id="Button01" taborder="3" onclick="fn_deleteRow7" class="btn_WF_GrdMinus" position="absolute 1191 8 1209 28" anchor="top right"/>
                  <Button id="btn_salsReg" taborder="4" class="btn_WF_Function" position="absolute 967 8 1062 28" anchor="top right" text="수수료매출등록" onclick="Tab00_tabpage7_btn_salsReg_onclick"/>
                  <Button id="btn_fiscalSlipCancel" taborder="5" text="수수료매출 취소" class="btn_WF_Function" position="absolute 1064 8 1169 28" anchor="top right" onclick="Tab00_tabpage7_btn_fiscalSlipCancel_onclick"/>
                  <Button id="btn_commSalsSave" taborder="6" text="저장" class="btn_WF_Function" position="absolute 884 8 923 28" anchor="top right" onclick="Tab00_tabpage7_btn_commSalsSave_onclick"/>
                  <Button id="btn_commSalsConfirm" taborder="7" text="확정" class="btn_WF_Function" position="absolute 926 8 965 28" anchor="top right" onclick="Tab00_tabpage7_btn_commSalsConfirm_onclick"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static63" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1 515 11 830"/>
        <Static id="Static44" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1226 515 1236 830"/>
        <Static id="Static64" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 11 834 1226 844"/>
        <Static id="Static45" text="상태" class="sta_WFDA_Label01" position="absolute 643 30 737 57" anchor="left top"/>
        <Static id="Static46" text="품의서번호" class="sta_WFDA_Label01" position="absolute 347 30 441 57" anchor="left top"/>
        <Static id="Static04" text="P/O 진행상태" class="sta_WFDA_Label01" position="absolute 947 30 1041 57" anchor="left top"/>
        <Static id="Static48" text="품의승인일자" class="sta_WFDA_Label01" position="absolute 347 56 441 83" anchor="left top"/>
        <Static id="Static50" text="주문등록일자" class="sta_WFDA_Label01" position="absolute 643 56 737 83" anchor="left top"/>
        <Edit id="edt_poProposalNum" taborder="43" enable="true" position="absolute 443 33 560 54" anchor="left top" readonly="true" style="background:#ecececff;"/>
        <Edit id="edt_poProgressStatusNm" taborder="46" enable="true" position="absolute 1043 33 1160 54" anchor="left top" readonly="true" style="background:#ecececff;"/>
        <Static id="Static00" class="sta_WFDA_Labelbg" position="absolute 24 134 1237 161" anchor="left top"/>
        <Static id="Static16" class="sta_WFDA_Labelbg" position="absolute 24 108 1237 135" anchor="left top"/>
        <Static id="Static11" text="매입처" class="sta_WFDA_Label01" position="absolute 50 134 144 161" anchor="left top"/>
        <Static id="Static20" text="인코텀즈" class="sta_WFDA_Label01" position="absolute 643 134 737 161" anchor="left top"/>
        <Static id="Static01" text="구매형태" class="sta_WFDA_Label01" position="absolute 50 82 144 109" anchor="left top"/>
        <Combo id="cbo_incoterms" taborder="5" class="cmb_WF_Essential" position="absolute 739 137 1041 158" anchor="left top" text="Cost and Freight." index="-1"/>
        <Static id="Static53" class="sta_WFDA_Labelbg" position="absolute 24 160 1237 187" anchor="left top"/>
        <Static id="Static19" text="지불조건" class="sta_WFDA_Label01" position="absolute 947 108 1041 135" anchor="left top"/>
        <Combo id="cbo_saleType" taborder="2" class="cmb_WF_Essential" position="absolute 1043 85 1192 106" anchor="left top" onitemchanged="cbo_saleType_onitemchanged"/>
        <Static id="Static30" text="판매유형" class="sta_WFDA_Label01" position="absolute 947 82 1041 109" anchor="left top"/>
        <Static id="Static59" text="판매종료일자" class="sta_WFDA_Label01" position="absolute 947 56 1041 83" anchor="left top"/>
        <Static id="Static35" text="귀속부서" class="sta_WFDA_Label01" position="absolute 643 82 737 109" anchor="left top"/>
        <Edit id="edt_payCond" taborder="50" enable="true" position="absolute 1043 111 1234 132" anchor="left top" readonly="true" style="background:#ecececff;"/>
        <Button id="btn_callProposal" taborder="44" text="불러오기" onclick="btn_callProposal_onclick" class="btn_WF_Function" position="absolute 562 33 624 53" anchor="left top"/>
        <Static id="Static14" class="sta_WFDA_Labelbg" position="absolute 24 316 1237 343" anchor="left top"/>
        <Static id="Static25" class="sta_WFDA_Labelbg" position="absolute 643 342 1237 369" anchor="left top"/>
        <Static id="Static28" class="sta_WFDA_Labelbg" position="absolute 643 368 1237 395" anchor="left top"/>
        <Static id="Static38" class="sta_WFDA_Labelbg" position="absolute 50 342 644 395" anchor="left top"/>
        <TextArea id="edt_remark" taborder="32" scrollbars="fixedvert" wordwrap="word" position="absolute 146 345 641 392" anchor="left top"/>
        <Radio id="rdo_prtgPayamtMethod" taborder="41" columncount="0" rowcount="1" index="0" innerdataset="@ds_운임지급방법" codecolumn="lev" datacolumn="Column1" value="1" position="absolute 1392 161 1582 182" anchor="left top" visible="false"/>
        <Button id="btn_splrNm" taborder="4" tabstop="false" class="btn_WF_popSearchEssential" position="absolute 620 137 641 158" onclick="btn_splrNm_onclick"/>
        <Edit id="edt_splrNm" taborder="3" onkeydown="edt_gubun_onkeydown" class="edt_WF_Essential" position="absolute 146 137 621 158" style=":disabled {cursor:arrowwait;}" userdata=""/>
        <Static id="Static23" class="sta_WFDA_Label01" position="absolute 1292 158 1386 185" anchor="left top" text="운임지급방법" visible="false"/>
        <Static id="Static39" class="sta_WFDA_Labelbg" position="absolute 24 238 1237 265" anchor="left top"/>
        <Static id="Static40" class="sta_WFDA_Labelbg" position="absolute 24 212 1237 239" anchor="left top"/>
        <Static id="Static42" class="sta_WFDA_Labelbg" position="absolute 24 186 1237 213" anchor="left top"/>
        <Static id="Static43" text="B/L NO." class="sta_WFDA_Label01" position="absolute 50 238 144 265" anchor="left top"/>
        <Static id="Static47" class="sta_WFDA_Label01" position="absolute 50 212 144 239" anchor="left top" text="Shipper"/>
        <Static id="Static54" text="출발일자" class="sta_WFDA_Label01" position="absolute 1290 303 1384 330" anchor="left top" visible="false"/>
        <Static id="Static58" text="선적지" class="sta_WFDA_Label01" position="absolute 1292 381 1386 408" anchor="left top" visible="false"/>
        <Static id="Static62" text="도착지" class="sta_WFDA_Label01" position="absolute 1289 416 1383 443" anchor="left top" visible="false"/>
        <Static id="Static65" class="sta_WFDA_Label01" position="absolute 643 212 737 239" anchor="left top" text="운송타입"/>
        <Static id="Static68" class="sta_WFDA_Label01" position="absolute 347 238 441 265" anchor="left top" text="선적일"/>
        <Static id="Static69" text="원산지" class="sta_WFDA_Label01" position="absolute 1293 207 1387 234" anchor="left top" visible="false"/>
        <Static id="Static70" text="도착일" class="sta_WFDA_Label01" position="absolute 643 238 737 265" anchor="left top"/>
        <Static id="Static72" text="선적지항구" class="sta_WFDA_Label01" position="absolute 50 264 144 291" anchor="left top" visible="true"/>
        <Static id="Static73" text="도착지항구" class="sta_WFDA_Label01" position="absolute 347 264 441 291" anchor="left top" visible="true"/>
        <Edit id="edt_lshipNationNm" taborder="20" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 1388 384 1567 405" visible="false"/>
        <Button id="btn_lshipNationNm" taborder="21" tabstop="false" onclick="fn_edBtn_OnClick" class="btn_WF_popSearch" position="absolute 1566 384 1587 405" visible="false"/>
        <Edit id="edt_lshipPortPortNm" taborder="37" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 146 267 295 288" visible="true"/>
        <Button id="btn_lshipPortPortNm" taborder="38" tabstop="false" onclick="fn_lshipPortPort_OnClick" class="btn_WF_popSearch" position="absolute 294 267 315 288" visible="true"/>
        <Edit id="edt_arrivNationNm" taborder="22" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 1385 419 1514 440" visible="false"/>
        <Button id="btn_arrivNationNm" taborder="23" tabstop="false" onclick="fn_edBtn_OnClick" class="btn_WF_popSearch" position="absolute 1513 419 1534 440" visible="false"/>
        <Edit id="edt_arrivPortPortNm" taborder="39" readonly="true" autoselect="true" position="absolute 443 267 572 288" visible="true"/>
        <Button id="btn_arrivportPortNm" taborder="40" tabstop="false" onclick="fn_arrivportPort_OnClick" class="btn_WF_popSearch" position="absolute 571 267 592 288" visible="true"/>
        <Edit id="edt_originNationNm" taborder="35" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 1389 210 1532 231" visible="false"/>
        <Button id="btn_originNationNm" taborder="36" tabstop="false" onclick="fn_edBtn_OnClick" class="btn_WF_popSearch" position="absolute 1531 210 1552 231" visible="false"/>
        <Static id="Static41" text="PO정보" onclick="Static41_onclick" class="sta_WFDA_Label03" position="absolute 15 30 51 213" anchor="left top"/>
        <Static id="Static05" class="sta_WFDA_Label01" position="absolute 1290 255 1384 282" anchor="left top" text="B/L접수일자" visible="false"/>
        <Edit id="edt_shipper" taborder="13" onkeydown="edt_gubun_onkeydown" position="absolute 146 215 621 236" style=":disabled {cursor:arrowwait;}" userdata="" readonly="true"/>
        <Button id="btn_shipperNm" taborder="14" tabstop="false" position="absolute 620 215 641 236" class="btn_WF_popSearch" onclick="btn_shipperNm_onclick"/>
        <Edit id="edt_blNum" taborder="16" position="absolute 146 241 295 262" anchor="left top" style="background:#fff6e9ff URL('theme://images/new/img_WF_EssentialBg.png') left top;" class="edt_WF_Essential"/>
        <Static id="Static07" class="sta_WFDA_Label01" position="absolute 947 212 1041 239" anchor="left top" text="L/G유무"/>
        <Combo id="cbo_transportType" taborder="10" index="-1" position="absolute 739 215 888 236" anchor="left top">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">**검색조건 선택**</Col>
              </Row>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">P/O No</Col>
              </Row>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">L/C No</Col>
              </Row>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">품명</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="Static37" text="REMARK" class="sta_WFDA_Label01" position="absolute 50 342 144 395" anchor="left top"/>
        <Radio id="rdo_lgYn" taborder="15" columncount="0" rowcount="1" index="0" innerdataset="ds_lg유무" codecolumn="lev" datacolumn="Column1" value="1" position="absolute 1043 215 1234 236" anchor="left top"/>
        <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 10 290 1223 317" anchor="left top"/>
        <Static id="Static15" text="보험증권 NO." class="sta_WFDA_Label01" position="absolute 50 316 144 343" anchor="left top"/>
        <Edit id="edt_inscNum" taborder="29" position="absolute 146 319 295 340" anchor="left top"/>
        <Static id="Static17" text="보험가입일자" class="sta_WFDA_Label01" position="absolute 347 316 441 343" anchor="left top"/>
        <Static id="Static13" text="보험가입금액" class="sta_WFDA_Label01" position="absolute 643 316 737 343" anchor="left top"/>
        <MaskEdit id="edt_insurEntAmt" taborder="31" position="absolute 739 319 856 340" anchor="left top" style="align:right middle;" mask="#,##0"/>
        <Edit id="edt_drafterNm" taborder="49" enable="true" position="absolute 146 59 263 80" anchor="left top" readonly="true" style="background:#ecececff;"/>
        <Combo id="cbo_poType" taborder="48" readonly="true" position="absolute 146 85 296 106"/>
        <Static id="Static79" text="선적환율일자" class="sta_WFDA_Label01" position="absolute 643 160 737 187" anchor="left top"/>
        <Static id="Static66" text="선적환율" class="sta_WFDA_Label01" position="absolute 947 160 1041 187" anchor="left top"/>
        <Static id="Static02" text="수입유형" class="sta_WFDA_Label01" position="absolute 643 108 737 135" anchor="left top"/>
        <Combo id="cbo_incomeType" taborder="51" readonly="true" position="absolute 739 111 889 132"/>
        <Static id="Static75" text="선적정보" onclick="Static41_onclick" class="sta_WFDA_Label03" position="absolute 15 212 51 395" anchor="left top"/>
        <Static id="Static12" text="/" position="absolute 860 322 875 339"/>
        <MaskEdit id="edt_insurEntAmtBalAmt" taborder="55" position="absolute 873 319 988 340" anchor="left top" style="align:right middle;" mask="#,##0" enable="true" readonly="true"/>
        <ObjCalendar id="cal_lshipDate" titletext="캘린더" taborder="17" text="ObjCalendar00" scrollbars="none" position="absolute 443 241 592 262"/>
        <ObjCalendar id="cal_startingDate" titletext="캘린더" taborder="34" text="ObjCalendar00" scrollbars="none" position="absolute 1386 306 1522 327" visible="false"/>
        <ObjCalendar id="cal_arrivDate" titletext="캘린더" taborder="18" text="ObjCalendar00" scrollbars="none" position="absolute 739 241 888 262"/>
        <ObjCalendar id="cal_saleEdate" titletext="캘린더" taborder="1" text="ObjCalendar00" scrollbars="none" position="absolute 1043 59 1192 80"/>
        <ObjCalendar id="cal_exchangeRateDate" titletext="캘린더" taborder="8" text="ObjCalendar00" scrollbars="none" position="absolute 739 163 888 184"/>
        <ObjCalendar id="cal_insurEntDate" titletext="캘린더" taborder="30" text="ObjCalendar00" scrollbars="none" position="absolute 443 319 592 340"/>
        <ObjCalendar id="cal_blAcceptDate" titletext="캘린더" taborder="33" text="ObjCalendar00" scrollbars="none" position="absolute 1386 258 1522 279" visible="false"/>
        <MaskEdit id="edt_exchangeRate" taborder="9" class="msk_WF_EssentialCal" position="absolute 1043 163 1192 184" anchor="left top" style="align:right middle;" mask="#,###.##" canchange="edt_exchangeRate_canchange"/>
        <Combo id="cbo_amountUnit" taborder="12" class="cmb_WF_Essential" position="absolute 866 189 945 210" anchor="left top" visible="true" onitemchanged="cbo_amountUnit_onitemchanged"/>
        <MaskEdit id="edt_proposalAmt00" taborder="11" mask="#,##0.00" enable="true" position="absolute 739 189 864 210" anchor="left top" style=":disabled {align:right middle;}" readonly="true" visible="true"/>
        <Combo id="cbo_attachDept" taborder="52" readonly="true" position="absolute 739 85 889 106"/>
        <Button id="btn_search" taborder="58" text="조회" onclick="fn_search" class="btn_WF_searchCm" position2="absolute r:147 w:59 t:3 h:25" positiontype="position2" visible="true"/>
        <Button id="btn_save" taborder="59" text="저장" onclick="fn_save" class="btn_WF_CRUD" position2="absolute r:100 w:45 t:3 h:25" positiontype="position2"/>
        <Button id="btn_close" taborder="60" text="닫기" onclick="fn_close" class="btn_WF_CRUD" position2="absolute r:6 w:45 t:3 h:25" positiontype="position2"/>
        <Button id="btn_delete" taborder="61" text="삭제" onclick="fn_save" class="btn_WF_CRUD" position2="absolute r:53 w:45 t:3 h:25" positiontype="position2"/>
        <ObjCalendar id="cal_poOrderDate" titletext="캘린더" taborder="0" text="ObjCalendar00" scrollbars="none" position="absolute 739 59 888 80"/>
        <Static id="Static21" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 710" anchor="top right"/>
        <MaskEdit id="edt_proposalApprvDate" taborder="62" readonly="true" type="string" mask="####-##-##" position="absolute 443 59 560 80" anchor="left top" style="align:center middle; :disabled {align:center middle;}"/>
        <Static id="Static32" text="구매종류" class="sta_WFDA_Label01" position="absolute 347 82 441 109" anchor="left top"/>
        <Combo id="cbo_poKind" taborder="63" position="absolute 443 85 592 106" anchor="left top" readonly="true"/>
        <Static id="Static10" text="매출처" class="sta_WFDA_Label01" position="absolute 50 160 144 187" anchor="left top"/>
        <Edit id="edt_salsplceNm" taborder="6" onkeydown="edt_gubun_onkeydown" position="absolute 146 163 621 184" style=":disabled {cursor:arrowwait;}" userdata="" class="edt_WF_Essential"/>
        <Button id="btn_salsplceNm" taborder="7" tabstop="false" onclick="btn_salsplceNm_onclick" class="btn_WF_popSearchEssential" position="absolute 620 163 641 184"/>
        <Static id="Static27" text="제목" class="sta_WFDA_Label01" position="absolute 50 108 144 135" anchor="left top"/>
        <Edit id="edt_proposalTitle" taborder="47" enable="true" position="absolute 146 111 641 132" anchor="left top" readonly="true" style="background:#ecececff; :disabled {background:#e4e4e4ff;}"/>
        <Static id="Static56" text="총수량" class="sta_WFDA_Label01" position="absolute 50 186 144 213" anchor="left top"/>
        <Static id="Static57" text="총중량" class="sta_WFDA_Label01" position="absolute 347 186 441 213" anchor="left top"/>
        <MaskEdit id="edt_totQuantity" taborder="53" mask="#,##0.##" enable="true" position="absolute 146 189 295 210" anchor="left top" style=":disabled {background:#e4e4e4ff;align:right middle;}" readonly="true"/>
        <MaskEdit id="edt_totWgt" taborder="54" mask="#,##0.00" enable="true" position="absolute 443 189 592 210" anchor="left top" style=":disabled {align:right middle;}" readonly="true"/>
        <Static id="lbl_totUsdWonwtrAmt" text="금액(USD)" class="sta_WFDA_Label01" position="absolute 643 186 737 213" anchor="left top"/>
        <Static id="Static33" text="금액(KRW)" class="sta_WFDA_Label01" position="absolute 947 186 1041 213" anchor="left top"/>
        <MaskEdit id="edt_totKrwWonwtrAmt" taborder="64" readonly="true" mask="#,##0.##" position="absolute 1043 189 1234 210" anchor="left top" style=":disabled {align:right middle;}"/>
        <Static id="Static51" text="통관예정일" class="sta_WFDA_Label01" position="absolute 947 238 1041 265" anchor="left top"/>
        <ObjCalendar id="cal_entrySchdDate" titletext="캘린더" taborder="19" text="ObjCalendar00" scrollbars="none" position="absolute 1043 241 1192 262"/>
        <Radio id="rdo_divideLshipAllowYn" taborder="24" columncount="0" rowcount="1" index="0" innerdataset="@ds_분할선적허용" codecolumn="lev" datacolumn="Column1" value="1" position="absolute 739 268 944 289" anchor="left top"/>
        <Static id="Static18" text="분할선적" class="sta_WFDA_Label01" position="absolute 643 264 737 291" anchor="left top"/>
        <Radio id="rdo_transhipmentAllowYn" taborder="25" columncount="0" rowcount="1" index="0" innerdataset="@ds_환적허용" codecolumn="lev" datacolumn="Column1" value="1" position="absolute 1043 268 1232 289" anchor="left top"/>
        <Static id="Static22" class="sta_WFDA_Label01" position="absolute 947 264 1041 291" anchor="left top" text="환적"/>
        <Static id="Static36" text="L/C NO." class="sta_WFDA_Label01" position="absolute 50 290 144 317" anchor="left top"/>
        <Edit id="edt_lcNum" taborder="26" position="absolute 146 293 295 314" anchor="left top"/>
        <Static id="Static34" text="L/C개설일자" class="sta_WFDA_Label01" position="absolute 347 290 441 317" anchor="left top"/>
        <ObjCalendar id="cal_lcIssuingDate" titletext="캘린더" taborder="27" text="ObjCalendar00" scrollbars="none" position="absolute 443 293 592 314"/>
        <Static id="Static29" text="L/C개설금액" class="sta_WFDA_Label01" position="absolute 643 290 737 317" anchor="left top"/>
        <MaskEdit id="edt_lcIssuingAmt" taborder="28" position="absolute 739 293 832 314" anchor="left top" style="align:right middle;" mask="#,##0"/>
        <Static id="Static08" text="/" position="absolute 838 296 853 313"/>
        <MaskEdit id="edt_lcIssuingAmtBalAmt" taborder="56" position="absolute 851 293 938 314" anchor="left top" style="align:right middle;" mask="#,##0" enable="true" readonly="true"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item23" compid="cbo_attachDept" propid="value" datasetid="ds_poOrderInfo" columnid="attachDept"/>
      <BindItem id="item27" compid="edt_proposalAmt00" propid="value" datasetid="ds_poOrderInfo" columnid="totWonwtrAmt"/>
      <BindItem id="item25" compid="cbo_amountUnit" propid="value" datasetid="ds_poOrderInfo" columnid="amountUnit"/>
      <BindItem id="item33" compid="edt_exchangeRate" propid="value" datasetid="ds_poOrderInfo" columnid="exchangeRate"/>
      <BindItem id="item0" compid="edt_salsplceNm" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item2" compid="edt_salsplceNm" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item4" compid="edt_splrNm" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item5" compid="edt_splrNm" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item6" compid="edt_shipper" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item7" compid="edt_shipper" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item1" compid="edt_poOrderNum" propid="value" datasetid="ds_poOrderInfo" columnid="poOrderNum"/>
      <BindItem id="item3" compid="edt_poProposalNum" propid="value" datasetid="ds_poOrderInfo" columnid="poProposalNum"/>
      <BindItem id="item8" compid="edt_poProposalStatusNm" propid="value" datasetid="ds_poOrderInfo" columnid="poOrderStatusNm"/>
      <BindItem id="item9" compid="edt_poProgressStatusNm" propid="value" datasetid="ds_poOrderInfo" columnid="poProgressStatusNm"/>
      <BindItem id="item10" compid="edt_proposalTitle" propid="value" datasetid="ds_poOrderInfo" columnid="proposalTitle"/>
      <BindItem id="item13" compid="cbo_poType" propid="value" datasetid="ds_poOrderInfo" columnid="poType"/>
      <BindItem id="item14" compid="edt_drafterNm" propid="value" datasetid="ds_poOrderInfo" columnid="drafterNm"/>
      <BindItem id="item15" compid="edt_payCond" propid="value" datasetid="ds_poOrderInfo" columnid="payCondCd"/>
      <BindItem id="item16" compid="edt_salsplceNm" propid="value" datasetid="ds_poOrderInfo" columnid="salsplceNm"/>
      <BindItem id="item17" compid="cal_saleEdate" propid="titletext" datasetid="ds_poOrderInfo" columnid="saleEdate"/>
      <BindItem id="item18" compid="cal_saleEdate" propid="text" datasetid="ds_poOrderInfo" columnid="saleEdate"/>
      <BindItem id="item19" compid="cbo_incomeType" propid="value" datasetid="ds_poOrderInfo" columnid="incomeType"/>
      <BindItem id="item20" compid="edt_splrNm" propid="value" datasetid="ds_poOrderInfo" columnid="splrNm"/>
      <BindItem id="item21" compid="cbo_saleType" propid="value" datasetid="ds_poOrderInfo" columnid="saleType"/>
      <BindItem id="item22" compid="cbo_incoterms" propid="value" datasetid="ds_poOrderInfo" columnid="incoterms"/>
      <BindItem id="item28" compid="edt_blNum" propid="value" datasetid="ds_poOrderInfo" columnid="blNum"/>
      <BindItem id="item29" compid="cal_blAcceptDate" propid="text" datasetid="ds_poOrderInfo" columnid="blAcceptDate"/>
      <BindItem id="item30" compid="cal_blAcceptDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="blAcceptDate"/>
      <BindItem id="item31" compid="cal_exchangeRateDate" propid="text" datasetid="ds_poOrderInfo" columnid="exchangeRateDate"/>
      <BindItem id="item32" compid="cal_exchangeRateDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="exchangeRateDate"/>
      <BindItem id="item34" compid="edt_shipper" propid="value" datasetid="ds_poOrderInfo" columnid="shipperNm"/>
      <BindItem id="item35" compid="cbo_transportType" propid="value" datasetid="ds_poOrderInfo" columnid="transportType"/>
      <BindItem id="item36" compid="rdo_lgYn" propid="value" datasetid="ds_poOrderInfo" columnid="lgYn"/>
      <BindItem id="item37" compid="cal_lshipDate" propid="text" datasetid="ds_poOrderInfo" columnid="lshipDate"/>
      <BindItem id="item38" compid="cal_lshipDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="lshipDate"/>
      <BindItem id="item39" compid="cal_startingDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="startingDate"/>
      <BindItem id="item40" compid="cal_startingDate" propid="text" datasetid="ds_poOrderInfo" columnid="startingDate"/>
      <BindItem id="item41" compid="cal_arrivDate" propid="text" datasetid="ds_poOrderInfo" columnid="arrivDate"/>
      <BindItem id="item42" compid="cal_arrivDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="arrivDate"/>
      <BindItem id="item43" compid="edt_originNationNm" propid="value" datasetid="ds_poOrderInfo" columnid="originNationNm"/>
      <BindItem id="item44" compid="edt_lshipNationNm" propid="value" datasetid="ds_poOrderInfo" columnid="lshipNationNm"/>
      <BindItem id="item45" compid="edt_lshipPortPortNm" propid="value" datasetid="ds_poOrderInfo" columnid="lshipPortPortNm"/>
      <BindItem id="item46" compid="edt_arrivNationNm" propid="value" datasetid="ds_poOrderInfo" columnid="arrivNationNm"/>
      <BindItem id="item47" compid="edt_arrivPortPortNm" propid="value" datasetid="ds_poOrderInfo" columnid="arrivPortPortNm"/>
      <BindItem id="item48" compid="edt_inscNum" propid="value" datasetid="ds_poOrderInfo" columnid="inscNum"/>
      <BindItem id="item49" compid="cal_insurEntDate" propid="text" datasetid="ds_poOrderInfo" columnid="insurEntDate"/>
      <BindItem id="item50" compid="cal_insurEntDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="insurEntDate"/>
      <BindItem id="item51" compid="edt_insurEntAmt" propid="value" datasetid="ds_poOrderInfo" columnid="insurEntAmt"/>
      <BindItem id="item52" compid="edt_insurEntAmtBalAmt" propid="value" datasetid="ds_poOrderInfo" columnid="insurEntBalAmt"/>
      <BindItem id="item53" compid="edt_lcNum" propid="value" datasetid="ds_poOrderInfo" columnid="lcNum"/>
      <BindItem id="item54" compid="rdo_divideLshipAllowYn" propid="value" datasetid="ds_poOrderInfo" columnid="divideLshipAllowYn"/>
      <BindItem id="item55" compid="cal_lcIssuingDate" propid="text" datasetid="ds_poOrderInfo" columnid="lcIssuingDate"/>
      <BindItem id="item56" compid="cal_lcIssuingDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="lcIssuingDate"/>
      <BindItem id="item57" compid="rdo_transhipmentAllowYn" propid="value" datasetid="ds_poOrderInfo" columnid="transhipmentAllowYn"/>
      <BindItem id="item58" compid="edt_lcIssuingAmt" propid="value" datasetid="ds_poOrderInfo" columnid="lcIssuingAmt"/>
      <BindItem id="item59" compid="edt_lcIssuingAmtBalAmt" propid="value" datasetid="ds_poOrderInfo" columnid="lcIssuingBalAmt"/>
      <BindItem id="item60" compid="rdo_prtgPayamtMethod" propid="value" datasetid="ds_poOrderInfo" columnid="prtgPayamtMethod"/>
      <BindItem id="item61" compid="edt_remark" propid="value" datasetid="ds_poOrderInfo" columnid="remark"/>
      <BindItem id="item62" compid="edt_totQuantity" propid="value" datasetid="ds_poOrderInfo" columnid="totQuantity"/>
      <BindItem id="item26" compid="edt_totWgt" propid="value" datasetid="ds_poOrderInfo" columnid="totWgt"/>
      <BindItem id="item12" compid="cal_poOrderDate" propid="text" datasetid="ds_poOrderInfo" columnid="exchangeRateDate"/>
      <BindItem id="item24" compid="cal_poOrderDate" propid="titletext" datasetid="ds_poOrderInfo" columnid="exchangeRateDate"/>
      <BindItem id="item63" compid="edt_proposalApprvDate" propid="value" datasetid="ds_poOrderInfo" columnid="proposalApprvDate"/>
      <BindItem id="item11" compid="cbo_poKind" propid="value" datasetid="ds_poOrderInfo" columnid="poKind"/>
      <BindItem id="item66" compid="edt_totKrwWonwtrAmt" propid="value" datasetid="ds_poOrderInfo" columnid="totKrwWonwtrAmt"/>
    </Bind>
    <Objects>
      <Dataset id="ds_poOrderInfo" useclientlayout="true">
        <ColumnInfo>
          <column id="poOrderNum" type="STRING" size="255"/>
          <column id="poProposalNum" type="STRING" size="255"/>
          <column id="poOrderStatus" type="STRING" size="255"/>
          <column id="poOrderStatusNm" type="STRING" size="255"/>
          <column id="poProgressStatus" type="STRING" size="255"/>
          <column id="poProgressStatusNm" type="STRING" size="255"/>
          <column id="proposalTitle" type="STRING" size="255"/>
          <column id="proposalApprvDate" type="STRING" size="255"/>
          <column id="poOrderDate" type="STRING" size="255"/>
          <column id="poType" type="STRING" size="255"/>
          <column id="poTypeNm" type="STRING" size="255"/>
          <column id="drafterId" type="STRING" size="255"/>
          <column id="drafterNm" type="STRING" size="255"/>
          <column id="payCondCd" type="STRING" size="255"/>
          <column id="salsplceCd" type="STRING" size="255"/>
          <column id="salsplceNm" type="STRING" size="255"/>
          <column id="saleEdate" type="STRING" size="255"/>
          <column id="incomeType" type="STRING" size="255"/>
          <column id="splrCd" type="STRING" size="255"/>
          <column id="splrNm" type="STRING" size="255"/>
          <column id="saleType" type="STRING" size="255"/>
          <column id="saleTypeNm" type="STRING" size="255"/>
          <column id="incoterms" type="STRING" size="255"/>
          <column id="incotermsNm" type="STRING" size="255"/>
          <column id="attachDept" type="STRING" size="255"/>
          <column id="attachDeptNm" type="STRING" size="255"/>
          <column id="totWonwtrAmt" type="STRING" size="255"/>
          <column id="totQuantity" type="STRING" size="255"/>
          <column id="totWgt" type="STRING" size="255"/>
          <column id="amountUnit" type="STRING" size="255"/>
          <column id="blNum" type="STRING" size="255"/>
          <column id="blAcceptDate" type="STRING" size="255"/>
          <column id="exchangeRateDate" type="STRING" size="255"/>
          <column id="exchangeRate" type="STRING" size="255"/>
          <column id="shipper" type="STRING" size="255"/>
          <Column id="shipperNm" type="STRING" size="256"/>
          <column id="transportType" type="STRING" size="255"/>
          <column id="lgYn" type="STRING" size="255"/>
          <column id="lshipDate" type="STRING" size="255"/>
          <column id="startingDate" type="STRING" size="255"/>
          <column id="arrivDate" type="STRING" size="255"/>
          <column id="originNationCd" type="STRING" size="255"/>
          <column id="originNationNm" type="STRING" size="255"/>
          <column id="lshipNationCd" type="STRING" size="255"/>
          <column id="lshipNationNm" type="STRING" size="255"/>
          <column id="lshipPortPortCd" type="STRING" size="255"/>
          <column id="lshipPortPortNm" type="STRING" size="255"/>
          <column id="arrivNationCd" type="STRING" size="255"/>
          <column id="arrivNationNm" type="STRING" size="255"/>
          <column id="arrivPortPortCd" type="STRING" size="255"/>
          <column id="arrivPortPortNm" type="STRING" size="255"/>
          <column id="inscNum" type="STRING" size="255"/>
          <column id="insurEntDate" type="STRING" size="255"/>
          <column id="insurEntAmt" type="STRING" size="255"/>
          <column id="insurEntBalAmt" type="STRING" size="255"/>
          <column id="lcNum" type="STRING" size="255"/>
          <column id="divideLshipAllowYn" type="STRING" size="255"/>
          <column id="lcIssuingDate" type="STRING" size="255"/>
          <column id="transhipmentAllowYn" type="STRING" size="255"/>
          <column id="lcIssuingAmt" type="STRING" size="255"/>
          <column id="lcIssuingBalAmt" type="STRING" size="255"/>
          <column id="prtgPayamtMethod" type="STRING" size="255"/>
          <column id="remark" type="STRING" size="255"/>
          <column id="proposalWriteDate" type="STRING" size="255"/>
          <column id="amountUnitNm" type="STRING" size="255"/>
          <column id="amountKrw" type="STRING" size="255"/>
          <column id="amountUsd" type="STRING" size="255"/>
          <column id="poAfterstatus" type="STRING" size="255"/>
          <column id="delYn" type="STRING" size="255"/>
          <Column id="fileRefSrlNum" type="STRING" size="256"/>
          <Column id="proposalExchangeRate" type="STRING" size="256"/>
          <Column id="addGvrntaxRate" type="STRING" size="256"/>
          <Column id="comm" type="STRING" size="256"/>
          <Column id="deliverSchdDate" type="STRING" size="256"/>
          <Column id="proposalSaleEdate" type="STRING" size="256"/>
          <Column id="whChargAmt" type="STRING" size="256"/>
          <Column id="ioutAmt" type="STRING" size="256"/>
          <Column id="intRate" type="STRING" size="256"/>
          <column id="cuser" type="STRING" size="255"/>
          <column id="cdate" type="STRING" size="255"/>
          <column id="uuser" type="STRING" size="255"/>
          <column id="udate" type="STRING" size="255"/>
          <Column id="poKind" type="STRING" size="256"/>
          <Column id="entrySchdDate" type="STRING" size="256"/>
          <Column id="totUsdWonwtrAmt" type="STRING" size="256"/>
          <Column id="totKrwWonwtrAmt" type="STRING" size="256"/>
          <Column id="remarks2" type="STRING" size="256"/>
          <Column id="attachDeptSap" type="STRING" size="256"/>
          <Column id="expireCalBasisDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_payList_oncolumnchanged">
        <ColumnInfo>
          <Column id="poOrderNum" type="STRING" size="255"/>
          <Column id="orgPayCondClass" type="STRING" size="256"/>
          <Column id="payCondClass" type="STRING" size="256"/>
          <Column id="payCondSeq" type="STRING" size="255"/>
          <Column id="payCondCd" type="STRING" size="255"/>
          <Column id="payAmt" type="BIGDECIMAL" size="255"/>
          <Column id="cuser" type="STRING" size="255"/>
          <Column id="cdate" type="STRING" size="255"/>
          <Column id="uuser" type="STRING" size="255"/>
          <Column id="udate" type="STRING" size="255"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_invoiceList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="poOrderNum" type="STRING" size="255"/>
          <Column id="invoiceSeq" type="STRING" size="255"/>
          <Column id="invoiceNum" type="STRING" size="255"/>
          <Column id="invoicePublishDate" type="STRING" size="255"/>
          <Column id="cuser" type="STRING" size="255"/>
          <Column id="cdate" type="STRING" size="255"/>
          <Column id="uuser" type="STRING" size="255"/>
          <Column id="udate" type="STRING" size="255"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_appendDocList1" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="poOrderNum" type="STRING" size="255"/>
          <Column id="appendDocSeq" type="STRING" size="255"/>
          <Column id="saveAged" type="STRING" size="255"/>
          <Column id="orgnlFileNm" type="STRING" size="255"/>
          <Column id="saveFileNm" type="STRING" size="255"/>
          <Column id="fileSize" type="STRING" size="255"/>
          <Column id="cuser" type="STRING" size="255"/>
          <Column id="cdate" type="STRING" size="255"/>
          <Column id="uuser" type="STRING" size="255"/>
          <Column id="udate" type="STRING" size="255"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_otherAmtList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_otherAmtList_oncolumnchanged">
        <ColumnInfo>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="poOrderNum" type="STRING" size="255"/>
          <Column id="otherAmtSeq" type="STRING" size="255"/>
          <Column id="commClass" type="STRING" size="255"/>
          <Column id="commType" type="STRING" size="255"/>
          <Column id="slipPublishDate" type="STRING" size="255"/>
          <Column id="paySchdDate" type="STRING" size="255"/>
          <Column id="realPaymentPlce" type="STRING" size="256"/>
          <Column id="realPaymentPlceNm" type="STRING" size="255"/>
          <Column id="basiKind" type="STRING" size="255"/>
          <Column id="basiNum" type="STRING" size="255"/>
          <Column id="commAmt" type="BIGDECIMAL" size="255"/>
          <Column id="divAccumAmt" type="STRING" size="255"/>
          <Column id="divAccumBalAmt" type="STRING" size="256"/>
          <Column id="attachDept" type="STRING" size="255"/>
          <Column id="taxBillNum" type="STRING" size="255"/>
          <Column id="taxShetItemnm" type="STRING" size="255"/>
          <Column id="journalzAcct" type="STRING" size="255"/>
          <Column id="journalzAcctNm" type="STRING" size="256"/>
          <Column id="fiscalSlipNum" type="STRING" size="255"/>
          <Column id="fiscalSlipcDate" type="STRING" size="255"/>
          <Column id="slipStatus" type="STRING" size="255"/>
          <Column id="slipStatusNm" type="STRING" size="256"/>
          <Column id="nonarrivSlipCreationYn" type="STRING" size="255"/>
          <Column id="etcPrepayamtMgmtNum" type="STRING" size="255"/>
          <Column id="etcPrepayamtSum" type="STRING" size="256"/>
          <Column id="cuser" type="STRING" size="255"/>
          <Column id="cdate" type="STRING" size="255"/>
          <Column id="uuser" type="STRING" size="255"/>
          <Column id="udate" type="STRING" size="255"/>
          <Column id="remarks" type="STRING" size="256"/>
          <Column id="vatNewhghtUpjang" type="STRING" size="256"/>
          <Column id="elctnTaxBillYn" type="STRING" size="256"/>
          <Column id="supplyPrice" type="STRING" size="256"/>
          <Column id="vatAmt" type="STRING" size="256"/>
          <Column id="taxCd" type="STRING" size="256"/>
          <Column id="slipNum" type="STRING" size="256"/>
          <Column id="buCd" type="STRING" size="256"/>
          <Column id="fiscalYear" type="STRING" size="256"/>
          <Column id="procDate" type="STRING" size="256"/>
          <Column id="resultMsg" type="STRING" size="256"/>
          <Column id="slipPublisher" type="STRING" size="256"/>
          <Column id="slipPublisherNm" type="STRING" size="256"/>
          <Column id="remarks2" type="STRING" size="256"/>
          <Column id="amountUnit" type="STRING" size="256"/>
          <Column id="exchangeRate" type="STRING" size="256"/>
          <Column id="lcNum" type="STRING" size="256"/>
          <Column id="attachDeptSap" type="STRING" size="256"/>
          <Column id="blNum" type="STRING" size="256"/>
          <Column id="lshipDate" type="STRING" size="256"/>
          <Column id="splrCd" type="STRING" size="256"/>
          <Column id="splrNm" type="STRING" size="256"/>
          <Column id="expireCalBasisDate" type="STRING" size="256"/>
          <Column id="empDept" type="STRING" size="256"/>
          <Column id="empMuCd" type="STRING" size="256"/>
          <Column id="subUpjangNum" type="STRING" size="256"/>
          <Column id="attachDeptNm" type="STRING" size="256"/>
          <Column id="orgFiscalSlipNum" type="STRING" size="256"/>
          <Column id="drAcctCd" type="STRING" size="256"/>
          <Column id="crAcctCd" type="STRING" size="256"/>
          <Column id="prepayPoOrderNum" type="STRING" size="256"/>
          <Column id="adjustSeq" type="STRING" size="256"/>
          <Column id="commClassNm" type="STRING" size="256"/>
          <Column id="billPublishdd" type="STRING" size="256"/>
          <Column id="signProgressStatus" type="STRING" size="256"/>
          <Column id="signInstanceId" type="STRING" size="256"/>
          <Column id="signProgressStatusNm" type="STRING" size="256"/>
          <Column id="slipClassCd" type="STRING" size="256"/>
          <Column id="altSlipClass" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_etcPrepayamtList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_etcPrepayamtList_oncolumnchanged" cancolumnchange="ds_etcPrepayamtList_cancolumnchange">
        <ColumnInfo>
          <Column id="poOrderNum" type="STRING" size="16"/>
          <Column id="adjustSeq" type="BIGDECIMAL" size="22"/>
          <Column id="mgmtNum" type="STRING" size="20"/>
          <Column id="prepayamtAmt" type="BIGDECIMAL" size="22"/>
          <Column id="journalzAcct" type="STRING" size="20"/>
          <Column id="journalzAcctNm" type="STRING" size="20"/>
          <Column id="taxShetNum" type="STRING" size="20"/>
          <Column id="cuser" type="STRING" size="9"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="9"/>
          <Column id="udate" type="DATETIME" size="7"/>
          <Column id="realPaymentPlce" type="STRING" size="50"/>
          <Column id="realPaymentPlceNm" type="STRING" size="50"/>
          <Column id="slipNum" type="STRING" size="16"/>
          <Column id="prepayamtClass" type="STRING" size="50"/>
          <Column id="prepayamtClassNm" type="STRING" size="50"/>
          <Column id="paySchdDate" type="STRING" size="8"/>
          <Column id="accumAltAmt" type="BIGDECIMAL" size="22"/>
          <Column id="attachDept" type="STRING" size="22"/>
          <Column id="attachDeptNm" type="STRING" size="22"/>
          <Column id="attachDeptSap" type="STRING" size="22"/>
          <Column id="remarks" type="STRING" size="256"/>
          <Column id="fiscalSlipNum" type="STRING" size="256"/>
          <Column id="procDate" type="STRING" size="256"/>
          <Column id="exchangeRate" type="STRING" size="256"/>
          <Column id="amountUnit" type="STRING" size="256"/>
          <Column id="lcNum" type="STRING" size="256"/>
          <Column id="blNum" type="STRING" size="256"/>
          <Column id="lshipDate" type="STRING" size="256"/>
          <Column id="splrCd" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="drAcctCd" type="STRING" size="256"/>
          <Column id="crAcctCd" type="STRING" size="256"/>
          <Column id="expireCalBasisDate" type="STRING" size="256"/>
          <Column id="slipStatusNm" type="STRING" size="256"/>
          <Column id="slipStatus" type="STRING" size="256"/>
          <Column id="fiscalYear" type="STRING" size="256"/>
          <Column id="signInstanceId" type="STRING" size="256"/>
          <Column id="signProgressStatus" type="STRING" size="256"/>
          <Column id="signProgressStatusNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="flag" type="STRING" size="256"/>
          <Column id="poOrderNum" type="STRING" size="256"/>
          <Column id="poProposalNum" type="STRING" size="256"/>
          <Column id="exchangeRateDate" type="STRING" size="256"/>
          <Column id="amountUnit" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="commClass" type="STRING" size="256"/>
          <Column id="commFlag" type="STRING" size="256"/>
          <Column id="adjustSeqs" type="STRING" size="256"/>
          <Column id="otherAmtSeqs" type="STRING" size="256"/>
          <Column id="miChakFlag" type="STRING" size="256"/>
          <Column id="processFlag" type="STRING" size="256"/>
          <Column id="seqs" type="STRING" size="256"/>
          <Column id="taxFlag" type="STRING" size="256"/>
          <Column id="draft" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_poOrderInfoValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <column id="salsplceCd" type="STRING" size="255"/>
          <Column id="saleEdate" type="STRING" size="256"/>
          <column id="splrCd" type="STRING" size="255"/>
          <column id="saleType" type="STRING" size="255"/>
          <column id="incoterms" type="STRING" size="255"/>
          <Column id="amountUnit" type="STRING" size="256"/>
          <column id="exchangeRateDate" type="STRING" size="255"/>
          <Column id="exchangeRate" type="STRING" size="256"/>
          <Column id="blNum" type="STRING" size="256"/>
          <Column id="entrySchdDate" type="STRING" size="256"/>
          <Column id="lshipDate" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="salsplceCd">title:매출처,required:true,focus:edt_salsplceNm</Col>
            <Col id="splrCd">title:매입처,required:true,focus:edt_splrNm</Col>
            <Col id="saleType">title:판매유형,required:true,focus:cbo_saleType</Col>
            <Col id="incoterms">title:incoterms,required:true,focus:cbo_incoterms</Col>
            <Col id="exchangeRateDate">title:환율일자,required:true,focus:cal_exchangeRateDate</Col>
            <Col id="exchangeRate">title:환율,required:true,focus:edt_exchangeRate</Col>
            <Col id="saleEdate">title:판매종료일자,required:true,focus:cal_saleEdate</Col>
            <Col id="amountUnit">title:환율단위,required:true,focus:cbo_amountUnit</Col>
            <Col id="entrySchdDate">title:통관예정일,required:true,focus:cal_entrySchdDate</Col>
            <Col id="blNum">title:B/L NO.,required:true,focus:edt_blNum</Col>
            <Col id="lshipDate">title:선적일,required:true,focus:cal_lshipDate</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_itemListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="itemCd" type="STRING" size="255"/>
          <Column id="itemNm" type="STRING" size="255"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="quantity" type="STRING" size="256"/>
          <Column id="uprice" type="STRING" size="256"/>
          <Column id="wonwtrAmt" type="STRING" size="256"/>
          <Column id="wgt" type="STRING" size="256"/>
          <Column id="taxYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="itemCd">title:품목코드,required:true</Col>
            <Col id="itemNm">title:품목명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
            <Col id="quantity">title:수량,required:true</Col>
            <Col id="uprice">title:단가,required:true</Col>
            <Col id="wonwtrAmt">title:원물금액,required:true</Col>
            <Col id="wgt">title:중량,required:true</Col>
            <Col id="taxYn">title:과세여부,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_payListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_groupList_oncolumnchanged">
        <ColumnInfo>
          <Column id="payCondCd" type="STRING" size="255"/>
          <Column id="payAmt" type="STRING" size="255"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="payCondCd">title:지불조건,required:true</Col>
            <Col id="payAmt">title:지불금액,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_invoiceListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="invoiceNum" type="STRING" size="255"/>
          <Column id="invoicePublishDate" type="STRING" size="255"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="invoiceNum">title:송장번호,required:true</Col>
            <Col id="invoicePublishDate">title:송장발행일자,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_otherAmtListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="commClass" type="STRING" size="255"/>
          <Column id="commType" type="STRING" size="255"/>
          <Column id="slipPublishDate" type="STRING" size="255"/>
          <Column id="paySchdDate" type="STRING" size="255"/>
          <Column id="realPaymentPlce" type="STRING" size="255"/>
          <Column id="basiKind" type="STRING" size="255"/>
          <Column id="basiNum" type="STRING" size="255"/>
          <Column id="commAmt" type="STRING" size="255"/>
          <Column id="attachDept" type="STRING" size="255"/>
          <Column id="journalzAcct" type="STRING" size="255"/>
          <Column id="itemNm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="commClass">title:수수료구분,required:true</Col>
            <Col id="commType">title:수수료유형,required:true</Col>
            <Col id="slipPublishDate">title:전표발행일자,required:true</Col>
            <Col id="paySchdDate">title:지불예정일,required:true</Col>
            <Col id="realPaymentPlce">title:실지급처,required:true</Col>
            <Col id="basiKind">title:근거종류,required:true</Col>
            <Col id="basiNum">title:근거번호,required:true</Col>
            <Col id="commAmt">title:수수료금액,required:true</Col>
            <Col id="attachDept">title:귀속부서,required:true</Col>
            <Col id="journalzAcct">title:분개계정,required:true</Col>
            <Col id="itemNm">title:품목명,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_etcPrepayamtListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="adjustAmt" type="STRING" size="255"/>
          <Column id="journalzAcct" type="STRING" size="255"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="adjustAmt">title:정산금액,required:true</Col>
            <Col id="journalzAcct">title:분개계정,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_file" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="refSeq" type="STRING" size="256"/>
          <Column id="appendSeq" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="fileSize" type="STRING" size="256"/>
          <Column id="fileExt" type="STRING" size="256"/>
          <Column id="encYn" type="STRING" size="256"/>
          <Column id="fileDesc" type="STRING" size="256"/>
          <Column id="fileUploadNm" type="STRING" size="256"/>
          <Column id="chk" type="INT" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_itemList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_itemList_oncolumnchanged">
        <ColumnInfo>
          <Column id="poOrderNum" type="STRING" size="256"/>
          <Column id="proposalSeq" type="STRING" size="256"/>
          <Column id="itemCd" type="STRING" size="256"/>
          <Column id="itemNm" type="STRING" size="256"/>
          <Column id="brand" type="STRING" size="256"/>
          <Column id="hsCd" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="quantity" type="BIGDECIMAL" size="256"/>
          <Column id="uprice" type="BIGDECIMAL" size="256"/>
          <Column id="wonwtrAmt" type="BIGDECIMAL" size="256"/>
          <Column id="wgt" type="BIGDECIMAL" size="256"/>
          <Column id="taxYn" type="STRING" size="256"/>
          <Column id="cuser" type="STRING" size="256"/>
          <Column id="cdate" type="STRING" size="256"/>
          <Column id="uuser" type="STRING" size="256"/>
          <Column id="udate" type="STRING" size="256"/>
          <Column id="poProposalNum" type="STRING" size="256"/>
          <Column id="origin" type="STRING" size="256"/>
          <Column id="gradeStand" type="STRING" size="256"/>
          <Column id="offer" type="BIGDECIMAL" size="256"/>
          <Column id="offer2" type="BIGDECIMAL" size="256"/>
          <Column id="wholeSale" type="BIGDECIMAL" size="256"/>
          <Column id="wholeSale2" type="BIGDECIMAL" size="256"/>
          <Column id="gvrntaxRate" type="BIGDECIMAL" size="256"/>
          <Column id="buyAmt" type="BIGDECIMAL" size="256"/>
          <Column id="buyPrice" type="BIGDECIMAL" size="256"/>
          <Column id="proposalExchangeRate" type="BIGDECIMAL" size="256"/>
          <Column id="comm" type="BIGDECIMAL" size="256"/>
          <Column id="whCost" type="BIGDECIMAL" size="256"/>
          <Column id="intRate" type="BIGDECIMAL" size="256"/>
          <Column id="salsUprice" type="BIGDECIMAL" size="256"/>
          <Column id="salsAmt" type="BIGDECIMAL" size="256"/>
          <Column id="salsGainAmt" type="BIGDECIMAL" size="256"/>
          <Column id="salsGainRat" type="BIGDECIMAL" size="256"/>
          <Column id="drctGainAmt" type="BIGDECIMAL" size="256"/>
          <Column id="drctGainRat" type="BIGDECIMAL" size="256"/>
          <Column id="expectBlPaym" type="BIGDECIMAL" size="256"/>
          <Column id="entryOtherAmt" type="BIGDECIMAL" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="itemSeq" type="STRING" size="256"/>
          <Column id="set1" type="STRING" size="256"/>
          <Column id="kgConvertRate" type="STRING" size="256"/>
          <Column id="upriceKrw" type="BIGDECIMAL" size="256"/>
          <Column id="wonwtrAmtKrw" type="BIGDECIMAL" size="256"/>
          <Column id="billPublishdd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_amountUnit" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_basiNum" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_commSals" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_commSals_oncolumnchanged">
        <ColumnInfo>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="poOrderNum" type="STRING" size="16"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="journalzAcct" type="STRING" size="50"/>
          <Column id="journalzAcctNm" type="STRING" size="256"/>
          <Column id="cust" type="STRING" size="20"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="supplyAmt" type="BIGDECIMAL" size="22"/>
          <Column id="tax" type="BIGDECIMAL" size="22"/>
          <Column id="withdrawSchdDate" type="STRING" size="8"/>
          <Column id="occurDate" type="STRING" size="8"/>
          <Column id="reservInfo" type="STRING" size="100"/>
          <Column id="occurType" type="STRING" size="100"/>
          <Column id="status" type="STRING" size="50"/>
          <Column id="statusNm" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="2000"/>
          <Column id="cuser" type="STRING" size="9"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="9"/>
          <Column id="udate" type="DATETIME" size="7"/>
          <Column id="custcd" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="upjang" type="STRING" size="256"/>
          <Column id="totQuantity" type="STRING" size="256"/>
          <Column id="receiptNum" type="STRING" size="256"/>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="ddddCloseYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_commSalsValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_itemList_oncolumnchanged">
        <ColumnInfo>
          <Column id="poOrderNum" type="STRING" size="16"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="journalzAcct" type="STRING" size="50"/>
          <Column id="journalzAcctNm" type="STRING" size="256"/>
          <Column id="cust" type="STRING" size="20"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="supplyAmt" type="BIGDECIMAL" size="22"/>
          <Column id="tax" type="BIGDECIMAL" size="22"/>
          <Column id="withdrawSchdDate" type="STRING" size="8"/>
          <Column id="occurDate" type="STRING" size="8"/>
          <Column id="reservInfo" type="STRING" size="100"/>
          <Column id="occurType" type="STRING" size="100"/>
          <Column id="status" type="STRING" size="50"/>
          <Column id="remark" type="STRING" size="2000"/>
          <Column id="cuser" type="STRING" size="9"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="9"/>
          <Column id="udate" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_taxCd" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : 구매주문 작성
  파 일 명 : IncomePoOrderDtl.xfdl
  기    능 : Design 및 Script Template 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2015.01.12   kjj   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";
include "lib::FTCommon.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_iProcessCnt = 0; //저장에 대한 처리건수를 저장한다.(AuthMgmtController에서 할당함.)
var fv_poProposalNum;
var fv_poOrderNum;
var fv_otherAmtSeq
var fv_flag;
var fv_focFlag;
var fv_tabFlag = false;	  //기타선급금정산 탭 이동 구분자
var fv_commAmt;		//기타선급금 수수료 합계
var fv_exchangeRate;		//환율
var fv_exchangeRateBasis;	//환율 기준(1 or 100)
var fv_set1;	//실단위
var fv_currRow;
var fv_otherCurrRow;
var fv_prepayamtCurrRow;
var fv_acctCd;	//계정코드
var fv_acctNm;	//계정명
var fv_blType;	//근거종류
var fv_drAcctCd;	//근거종류
var fv_crAcctCd;	//근거종류
var fv_commClassNm;
var fv_slipNums;	//외부번호
var fv_draftFlag;	//수수료,기타선급금 결재구분
var fv_option = {buttons:[{id:"btn_gwDraft", action:"draft"}, {id:"btn_gwDetail", action:"detail"}]}; //결재 관련 버튼 정의
/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this, true);
	
	// 화면에 default readonly component의 색상을 회색으로 변경 한다.
	for (var i = 0, iLen = this.components.length; i < iLen; i++) {
		if (this.components[i].readonly == true) {
			this.components[i].style.backgroundColor = "#ecececff";
		}
	}
	
	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	// Grid내의 input field를 자동 선택 제어 함수
	FTCommon.setGridAutoSelect (this, true);

	ds_search.addRow();
	
	SCCombo.bind2(this, "ComCode", "cbo_poType", null, {groupCode:"PO_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	 //구매형태
	SCCombo.bind2(this, "ComCode", "cbo_saleType",null, {groupCode:"SALE_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 //판매유형  
	SCCombo.bind2(this, "ComCode", "cbo_incoterms", null, {groupCode:"INCOTERMS", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 //Incoterms 
	SCCombo.bind2(this, "ComCode", "cbo_attachDept", null, {groupCode:"ATTACH_DEPT", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	  //귀속부서
	SCCombo.bind2(this, "ComCode", "cbo_amountUnit", ds_amountUnit, {groupCode:"AMOUNT_UNIT", useYn:"Y", defVal:""}, SCCombo.CHOOSE);  //화폐 단위
	SCCombo.bind2(this, "ComCode", "cbo_incomeType", null, {groupCode:"INCOME_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	  //수입 유형
	SCCombo.bind2(this, "ComCode", "cbo_transportType", null, {groupCode:"TRANSPORT_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	  //운송타입
	SCCombo.bind2(this, "ComCode", "cbo_poKind", null, {groupCode:"PO_KIND", useYn:"Y", defVal:""});	 	  //구매종류
	
	SCCombo.bind2(this, "ComCode", "rdo_divideLshipAllowYn", null, {groupCode:"DIVIDE_LSHIP_ALLOW_YN", useYn:"Y", defVal:"Y"});	 	  //분할선적허용여부
	SCCombo.bind2(this, "ComCode", "rdo_transhipmentAllowYn", null, {groupCode:"TRANSHIPMENT_ALLOW_YN", useYn:"Y", defVal:"Y"});	 	  //환적 허용 여부  
	SCCombo.bind2(this, "ComCode", "rdo_prtgPayamtMethod", null, {groupCode:"PRTG_PAYAMT_METHOD", useYn:"Y", defVal:"Y"});	 	  //운임의 지급 방법   
	SCCombo.bind2(this, "ComCode", "rdo_lgYn", null, {groupCode:"LG_YN", useYn:"Y", defVal:"Y"});	 	  //LG 여부

	SCCombo.bind2(this, "ComCode", "Tab00.tabpage1.grd_itemList.unit", null, {groupCode:"ITEM_UNIT", useYn:"Y", defVal:""}, SCCombo.CHOOSE);		//단위
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage1.grd_itemList.taxYn", null, {groupCode:"TAX_YN", useYn:"Y", defVal:""}, SCCombo.CHOOSE);			//과세여부
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage2.grd_payList.payCondCd", null, {groupCode:"PAY_TERMS_CD", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	//지불조건
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage2.grd_payList.payCondClass", null, {groupCode:"PAY_COND_CLASS", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	//지불조건구분 : 매입처,매출처
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage5.grd_otherAmtList.attachDept", null, {groupCode:"ATTACH_DEPT", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	  //귀속부서
	
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage5.grd_otherAmtList.commClass", null, {groupCode:"COMM_CLASS", useYn:"Y", defVal:""}, SCCombo.CHOOSE);		//수수료 구분
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage5.grd_otherAmtList.commType", null, {groupCode:"COMM_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	    //수수료 유형
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage5.grd_otherAmtList.basiKind", null, {groupCode:"BASI_KIND", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	    //근거종료
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage5.grd_otherAmtList.vatNewhghtUpjang", null, {groupCode:"VAT_NEWHGHT_UPJANG", useYn:"Y", defVal:""});	 //부가세신고업장

	SCCombo.bind2(this, "ComCode", "Tab00.tabpage6.grd_etcPrepayamtList.prepayamtClass", null, {groupCode:"PREPAYAMT_CLASS", useYn:"Y", defVal:""}, SCCombo.CHOOSE);			//선급금구분


	SCCombo.bind2(this, "ComCode", "Tab00.tabpage5.grd_otherAmtList.taxCd", null, {groupCode:"TAX_CD", useYn:"Y", defVal:"", attr01:"Y"}, SCCombo.CHOOSE);			//과세코드
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage5.grd_otherAmtList.slipStatus", null, {groupCode:"SLIP_STATUS", useYn:"Y", defVal:"", isLast:true, lastEvent:"fn_doSearch"}, SCCombo.CHOOSE);	//전표상태
	
	SCPopup.bind(this, "ComCode", "edt_lshipNationNm", "btn_lshipNationNm", null, {groupCode:"NATION_CD", useYn:"Y", design:{title:"국가조회",label:"국가",labelWidth:100,columns:[{text:"국가코드",width:100},{text:"국가명",width:200}]}}, {after:"fn_AfterEventLshipNation"}); //선적국가 after 이벤트 처리
	SCPopup.bind(this, "ComCode", "edt_arrivNationNm", "btn_arrivNationNm", null, {groupCode:"NATION_CD", useYn:"Y", design:{title:"국가조회",label:"국가",labelWidth:100,columns:[{text:"국가코드",width:100},{text:"국가명",width:200}]}}, {after:"fn_AfterEventArrivNation"}); //도착국가 after 이벤트 처리
	SCPopup.bind(this, "ComCode", "edt_originNationNm", "btn_originNationNm", null, {groupCode:"NATION_CD", useYn:"Y", design:{title:"국가조회",label:"국가",labelWidth:100,columns:[{text:"국가코드",width:100},{text:"국가명",width:200}]}}, {after:"fn_AfterEventoriginNation"}); //원산지 after 이벤트 처리

	fv_poOrderNum = gfn_nvl(poOrderNum, "");
	fv_flag = gfn_nvl(flag, "");
	fv_focFlag = gfn_nvl(flag, "");
	
	cal_saleEdate.fn_initMonthCal(this, "", "fn_saleEdateCallBack", ds_poOrderInfo, "saleEdate","Y");	//판매종료일자	
	cal_exchangeRateDate.fn_initMonthCal(this, "", "fn_exchangeRateDateCallBack", ds_poOrderInfo, "exchangeRateDate","Y");	//품의환율일자	 
	cal_lcIssuingDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "lcIssuingDate");	//L/C개설일자	
	cal_lshipDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "lshipDate","Y");			//선적예정일자
	cal_arrivDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "arrivDate");			//도착예정일자
	cal_insurEntDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "insurEntDate");			//보험가입일자
	cal_blAcceptDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "blAcceptDate");			//BL접수일자
	cal_startingDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "startingDate");			//출발일자
	cal_poOrderDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "poOrderDate");	//구매주문일
	cal_entrySchdDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_poOrderInfo, "entrySchdDate","Y");		//통관예정일자
	
	Tab00.tabpage4.ObjAtchFile.setDataset("ds_file");
	//Tab00.tabpage6.enable = false;
	
    //그룹웨어 연동 초기화
    SCGw.init (this);

	//alert(ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "signProgressStatus"));
	//그룹웨어 연동 버튼을 설정
	//SCGw.setUserButton (this, fv_option, ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "signProgressStatus"));
    
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 콤보코드 최종 callback 함수
 *---------------------------------------------------------------------------------------------*/
function fn_doSearch()
{
	if ( fv_poOrderNum == "" ) {
		ds_poOrderInfo.insertRow(0); 
		ds_poOrderInfo.setColumn(0, "poOrderDate", gfn_today());
		ds_poOrderInfo.setColumn(0, "transportType", "FCL");
	} else {
		fn_search();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
 	// v_ds_check 미사용시 변경사항 체크
 	if ( gfn_dsIsUpdated(ds_poOrderInfo) || gfn_dsIsUpdated(ds_itemList) || gfn_dsIsUpdated(ds_payList) || gfn_dsIsUpdated(ds_invoiceList) || gfn_dsIsUpdated(ds_file) || gfn_dsIsUpdated(ds_otherAmtList) || gfn_dsIsUpdated(ds_etcPrepayamtList) ) 
 	{
		// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
 		var retValue = gfn_confirm("confirm.before.search");
 		if (retValue == false) return;
 	}
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(Tab00.tabpage1.grd_itemList);
    gfn_clearSortMark(Tab00.tabpage2.grd_payList);
    gfn_clearSortMark(Tab00.tabpage3.grd_invoiceList);
    //gfn_clearSortMark(Tab00.tabpage4.grd_appendDocList);
    gfn_clearSortMark(Tab00.tabpage5.grd_otherAmtList);
    gfn_clearSortMark(Tab00.tabpage6.grd_etcPrepayamtList);
    gfn_clearSortMark(Tab00.tabpage7.grd_commSals);
    
    //코드목록을 초기화한다.
    ds_itemList.clearData();
    ds_payList.clearData();
    ds_invoiceList.clearData();
    ds_file.clearData();
    ds_otherAmtList.clearData();
    ds_etcPrepayamtList.clearData();
    ds_commSals.clearData();


	ds_search.setColumn(0, "poOrderNum", fv_poOrderNum);
	ds_search.setColumn(0, "flag", fv_flag);
	
    var strSvcID    = "selectPoOrderDtl";
    var strURL      = "ft/ftp/poOrderMst/selectPoOrderDtl.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo ds_itemList=ds_itemList ds_payList=ds_payList ds_invoiceList=ds_invoiceList ds_file=ds_file ds_otherAmtList=ds_otherAmtList ds_etcPrepayamtList=ds_etcPrepayamtList ds_basiNum=ds_basiNum ds_commSals=ds_commSals";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search2()
{
 	// v_ds_check 미사용시 변경사항 체크
 	if (gfn_dsIsUpdated(ds_itemList) || gfn_dsIsUpdated(ds_payList) ) 
 	{
		// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
 		var retValue = gfn_confirm("confirm.before.search");
 		if (retValue == false) return;
 	}
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(Tab00.tabpage1.grd_itemList);
    gfn_clearSortMark(Tab00.tabpage2.grd_payList);
    
    //코드목록을 초기화한다.
    ds_itemList.clearData();
    ds_payList.clearData();
    ds_otherAmtList.clearData();
    ds_etcPrepayamtListValid.clearData();
    ds_commSals.clearData();

	ds_search.setColumn(0, "poProposalNum", fv_poProposalNum);
	ds_search.setColumn(0, "flag", fv_flag);
					   
    var strSvcID    = "selectProposalDtl";
    var strURL      = "ft/ftp/selectProposalDtl.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo ds_itemList=ds_itemList ds_payList=ds_payList ds_blckMarkList=ds_blckMarkList ds_basiNum=ds_basiNum ds_commSals=ds_commSals";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
	if ( fv_flag == "CALL" ) {	 //불러오기
		ds_poOrderInfo.updatecontrol = false;
		bSucc = ds_poOrderInfo.setRowType(0, Dataset.ROWTYPE_INSERT);
		ds_poOrderInfo.updatecontrol = true;

		ds_itemList.updatecontrol = false;
		for ( var i=0; i<ds_itemList.getRowCount(); i++ ) {
			bSucc = ds_itemList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_itemList.updatecontrol = true;

		ds_payList.updatecontrol = false;
		for ( var i=0; i<ds_payList.getRowCount(); i++ ) {
			bSucc = ds_payList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_payList.updatecontrol = true

		ds_invoiceList.updatecontrol = false;
		for ( var i=0; i<ds_invoiceList.getRowCount(); i++ ) {
			bSucc = ds_invoiceList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_invoiceList.updatecontrol = true;

		ds_file.updatecontrol = false;
		for ( var i=0; i<ds_file.getRowCount(); i++ ) {
			bSucc = ds_file.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_file.updatecontrol = true;

		ds_otherAmtList.updatecontrol = false;
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			bSucc = ds_otherAmtList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_otherAmtList.updatecontrol = true;

		ds_etcPrepayamtList.updatecontrol = false;
		for ( var i=0; i<ds_etcPrepayamtList.getRowCount(); i++ ) {
			bSucc = ds_etcPrepayamtList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_etcPrepayamtList.updatecontrol = true;

		ds_commSals.updatecontrol = false;
		for ( var i=0; i<ds_commSals.getRowCount(); i++ ) {
			bSucc = ds_commSals.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_commSals.updatecontrol = true;		
		
	} 
	
	//v_ds_check 미사용시 변경사항 체크
 	if ( !gfn_dsIsUpdated(ds_poOrderInfo) && !gfn_dsIsUpdated(ds_itemList) && !gfn_dsIsUpdated(ds_payList)  && !gfn_dsIsUpdated(ds_invoiceList)  && !gfn_dsIsUpdated(ds_file)  && !gfn_dsIsUpdated(ds_otherAmtList)  && !gfn_dsIsUpdated(ds_etcPrepayamtList)  && !gfn_dsIsUpdated(ds_commSals))
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
	
	// 저장시 Validation Check
	if (gfn_validCheck(ds_poOrderInfo, ds_poOrderInfoValid) == false)	return;

	if (gfn_validCheck(Tab00.tabpage1.grd_itemList, ds_itemListValid) == false)	{
		Tab00.tabindex = 0;
		return;
	}
	if (gfn_validCheck(Tab00.tabpage2.grd_payList, ds_payListValid) == false) {
		Tab00.tabindex = 1;
		return;
	}
	if (gfn_validCheck(Tab00.tabpage3.grd_invoiceList, ds_invoiceListValid) == false) {
		Tab00.tabindex = 2;
		return;
	}
	/*
	if (gfn_validCheck(Tab00.tabpage5.grd_otherAmtList, ds_otherAmtListValid) == false) {
		Tab00.tabindex = 4;
		return;
	}
	if (gfn_validCheck(Tab00.tabpage6.grd_etcPrepayamtList, ds_etcPrepayamtListValid) == false) {
		Tab00.tabindex = 5;
		return;
	}
	if (gfn_validCheck(Tab00.tabpage7.grd_commSals, ds_commSalsValid) == false) {
		Tab00.tabindex = 6;
		return;
	}
	*/
	
	var salsplceCd = gfn_nvl(ds_poOrderInfo.getColumn(0, "salsplceCd"), "");	// 매출처코드
	var splrCd = gfn_nvl(ds_poOrderInfo.getColumn(0, "splrCd"), "");			// 매입처코드
	if ( salsplceCd !="" && splrCd !="" ) 
	{
		if ( salsplceCd == splrCd ) 
		{
			gfn_alert("ftp.validator.nodeal");	// 자전거래(매출처와 매입처가 같은)는 할 수 없습니다.
			return;
		}
	}
	
	// 첨부 파일 추가가 있을때만
	if(Tab00.tabpage4.ObjAtchFile.fn_countDs("insert") > 0)
	{	
		var rtn = Tab00.tabpage4.ObjAtchFile.fn_uploadFile();		
		if (rtn < 0)	return;
	}	
	
	if ( gfn_dsIsUpdated(ds_file) )
	{
		if ( fv_flag == "CALL" ) {	 //불러오기
			ds_poOrderInfo.updatecontrol = false;
			bSucc = ds_poOrderInfo.setRowType(0, Dataset.ROWTYPE_INSERT);
			ds_poOrderInfo.updatecontrol = true;
		} else {
			ds_poOrderInfo.updatecontrol = false;
			bSucc = ds_poOrderInfo.setRowType(0, Dataset.ROWTYPE_UPDATE);
			ds_poOrderInfo.updatecontrol = true;
		}
		
	}
	
	//alert(ds_itemList.getSum("wonwtrAmt") +"//"+ ds_payList.getSum("payAmt"));
	//품목의 매입액 합계 [ $1 ] 와 지불조건의 지불예정금 합계[ $2 ] 같게 체크 : 물품대금시 지불금액으로 지불
	if ( ds_itemList.getSum("wonwtrAmt") != ds_payList.getCaseSum("payCondClass=='B'","payAmt") ) 
	{
		gfn_alert("ftp.validator.no.same", gfn_numFormat(ds_itemList.getSum("wonwtrAmt"))+"^"+gfn_numFormat(ds_payList.getCaseSum("payCondClass=='B'","payAmt")));	//품목의 매입액 합계 [ $1 ] 와 지불조건의 지불예정금 합계[ $2 ] 은 같아야 합니다.
		return;
	}

	//if ( !fn_chkOtherAmt() ) return;	//수수료탭 체크
	
	
	
	//if ( !fn_chk() ) return;	//선급금탭 체크

	// 품의번호[ $1 ]에 대하여 저장 하시겠습니까?
	if (!gfn_confirm("confirm.before.save")) return false;
	
	//ds_search.setColumn(0, "flag", fv_flag);
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/savePoOrderDtl.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_itemList=ds_itemList:A ds_payList=ds_payList:U ds_invoiceList=ds_invoiceList:U ds_file=ds_file:A ds_otherAmtList=ds_otherAmtList:U ds_etcPrepayamtList=ds_etcPrepayamtList:U ds_commSals=ds_commSals:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 선급금탭 체크
 *---------------------------------------------------------------------------------------------*/ 
function fn_chk()
{
	if ( !gfn_dsIsUpdated(ds_etcPrepayamtList) ) return true;	
	
	if ( ds_etcPrepayamtList.getRowCount() == 0 ) return true;

	var chkCnt = ds_etcPrepayamtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		Tab00.tabindex = 5;
		Tab00.tabpage6.grd_etcPrepayamtList.setCellPos(1); // cellindex
		Tab00.tabpage6.grd_etcPrepayamtList.setFocus();
		Tab00.tabpage6.grd_etcPrepayamtList.showEditor(); 

		return;
	}
	if ( fv_poOrderNum == "") {
		gfn_alert("상단의 저장 버튼을 클릭하세요.");
		return;
	}
	
	for ( var i=0; i<ds_etcPrepayamtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "prepayamtClass"),"") ==  "" )	//선급금구분
		{
			gfn_alert("선급금구분 은(는) 필수 입력 항목입니다.");
			ds_etcPrepayamtList.rowposition = i;
			Tab00.tabpage6.grd_etcPrepayamtList.setCellPos(Tab00.tabpage6.grd_etcPrepayamtList.getBindCellIndex("Body", "prepayamtClass"));
			Tab00.tabpage6.grd_etcPrepayamtList.setFocus();
			Tab00.tabpage6.grd_etcPrepayamtList.showEditor(); 
			return false;
		}
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "prepayamtAmt"),"") ==  "" )	//선급금금액
		{
			gfn_alert("선급금금액 은(는) 필수 입력 항목입니다.");
			ds_etcPrepayamtList.rowposition = i;
			Tab00.tabpage6.grd_etcPrepayamtList.setCellPos(Tab00.tabpage6.grd_etcPrepayamtList.getBindCellIndex("Body", "prepayamtAmt"));
			Tab00.tabpage6.grd_etcPrepayamtList.setFocus();
			Tab00.tabpage6.grd_etcPrepayamtList.showEditor(); 
			return false;
		}	
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "journalzAcct"),"") ==  "" )	//분개계정
		{
			gfn_alert("분개계정 은(는) 필수 입력 항목입니다.");
			ds_etcPrepayamtList.rowposition = i;
			Tab00.tabpage6.grd_etcPrepayamtList.setCellPos(Tab00.tabpage6.grd_etcPrepayamtList.getBindCellIndex("Body", "journalzAcctNm"));
			Tab00.tabpage6.grd_etcPrepayamtList.setFocus();
			Tab00.tabpage6.grd_etcPrepayamtList.showEditor(); 
			return false;
		}
		/*
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "remarks"),"") ==  "" )	//적요
		{
			gfn_alert("적요 은(는) 필수 입력 항목입니다.");
			ds_etcPrepayamtList.rowposition = i;
			Tab00.tabpage6.grd_etcPrepayamtList.setCellPos(Tab00.tabpage6.grd_etcPrepayamtList.getBindCellIndex("Body", "remarks"));
			Tab00.tabpage6.grd_etcPrepayamtList.setFocus();
			Tab00.tabpage6.grd_etcPrepayamtList.showEditor(); 
			return false;
		}
		*/
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "paySchdDate"),"") ==  "" )	//지불예정일자
		{
			gfn_alert("지불예정일자 은(는) 필수 입력 항목입니다.");
			ds_etcPrepayamtList.rowposition = i;
			Tab00.tabpage6.grd_etcPrepayamtList.setCellPos(Tab00.tabpage6.grd_etcPrepayamtList.getBindCellIndex("Body", "paySchdDate"));
			Tab00.tabpage6.grd_etcPrepayamtList.setFocus();
			Tab00.tabpage6.grd_etcPrepayamtList.showEditor(); 
			return false;
		}	
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "realPaymentPlceNm"),"") ==  "" )	//실지급처
		{
			gfn_alert("실지급처 은(는) 필수 입력 항목입니다.");
			ds_etcPrepayamtList.rowposition = i;
			Tab00.tabpage6.grd_etcPrepayamtList.setCellPos(Tab00.tabpage6.grd_etcPrepayamtList.getBindCellIndex("Body", "realPaymentPlceNm"));
			Tab00.tabpage6.grd_etcPrepayamtList.setFocus();
			Tab00.tabpage6.grd_etcPrepayamtList.showEditor(); 
			return false;
		}		
	}
	return true;
}
/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		//구매주문 조회
        case "selectPoOrderDtl" :
			if ( ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "poOrderStatus") == "C" ) 	  //po확정상태 확정이면 저장,삭제 안되게
			{	
				btn_save.enable = false;
				btn_delete.enable = false;
			}
			//환율단위 filter
			ds_poOrderInfo.setColumn(0, "amountUnit", ds_poOrderInfo.getColumn(0,"amountUnit"));
			cbo_amountUnit.enable = true;
			ds_amountUnit.filter("code!='KRW'");	
			
			if ( ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "saleType") == "40" ) 	  //수수료 매출일때
			{	
				Tab00.tabpage7.enable = true;
			}			
			else 
			{
				Tab00.tabpage7.enable = false;
			}
			
            break;
        //불러오기
        case "selectProposalDtl" :	
			//환율단위 filter
			cbo_amountUnit.enable = true;
			ds_amountUnit.filter("code!='KRW'");
			ds_poOrderInfo.setColumn(0, "amountUnit", ds_poOrderInfo.getColumn(0,"amountUnit"));
			ds_poOrderInfo.setColumn(0, "poOrderDate", gfn_today());
			if ( ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "saleType") == "40" ) 	  //수수료 매출일때
			{	
				Tab00.tabpage7.enable = true;
			}			
			else 
			{
				Tab00.tabpage7.enable = false;
			}
			ds_poOrderInfo.setColumn(0, "lgYn", "N");		
			ds_poOrderInfo.setColumn(0, "divideLshipAllowYn", "Y");		
			ds_poOrderInfo.setColumn(0, "transhipmentAllowYn", "Y");		
            break;
        // 저장
        case "save" :
			if (fv_iProcessCnt > 0) {
				gfn_alert("msg.save.success");	// 저장 되었습니다.
				fv_flag = "UPDATE";
				fn_search();
			} 
			
            break;
        // 저장
        case "saveExchange" :
			if (fv_iProcessCnt > 0) {
				gfn_alert("msg.save.success");	// 저장 되었습니다.
				fn_search();
			} 
            break;
        case "createFiscalSlip":
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			fn_search();
			break;
        case "cancelFiscalSlip":
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			fn_search();
			break;
        case "createEtcFiscalSlip":
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			fn_search();
			break;
        case "cancelEtcFiscalSlip":
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			fn_search();
			break;
        case "createDraftFiscalSlip":	//전표 상신 생성후  처리
			fn_draft(); 
			break;
        case "createEtcDraftFiscalSlip":	//선급금 전표 상신 생성후  처리
			fn_etcDraft(); 
			break;
        case "getExchangeRate":
			if ( fv_exchangeRate != "" )
			{
				ds_poOrderInfo.setColumn(0, "exchangeRate", fv_exchangeRate / fv_exchangeRateBasis  );
			}
			break;			
        case "getUnitInfo":
			if ( fv_set1 != "" )
			{
				ds_itemList.setColumn(fv_currRow, "set1", fv_set1  );
				fn_calSale(fv_currRow, '');	  //판매 및 이익계획 자동계산식 적용				
			}
			break;					
        case "getAccCdInfo":	
			fv_acctCd = gfn_nvl(fv_acctCd, "");	// 전송할 파라미터 1
			if ( fv_acctCd != "" )
			{
				ds_otherAmtList.setColumn(fv_otherCurrRow, "journalzAcct", fv_acctCd  );
				ds_otherAmtList.setColumn(fv_otherCurrRow, "journalzAcctNm", fv_acctNm  );

				ds_otherAmtList.setColumn(fv_otherCurrRow, "drAcctCd", fv_drAcctCd  );
				ds_otherAmtList.setColumn(fv_otherCurrRow, "crAcctCd", fv_crAcctCd  );
				
				
				ds_otherAmtList.setColumn(fv_otherCurrRow, "basiKind", fv_blType  );
				ds_otherAmtList.setColumn(fv_otherCurrRow, "commClassNm", fv_commClassNm  );
			}
        
			break;					
        case "getPrepayamtAccCdInfo":	
			fv_acctCd = gfn_nvl(fv_acctCd, "");	// 전송할 파라미터 1
			if ( fv_acctCd != "" )
			{
				ds_etcPrepayamtList.setColumn(fv_prepayamtCurrRow, "journalzAcct", fv_acctCd  );
				ds_etcPrepayamtList.setColumn(fv_prepayamtCurrRow, "journalzAcctNm", fv_acctNm  );

				ds_etcPrepayamtList.setColumn(fv_prepayamtCurrRow, "drAcctCd", fv_drAcctCd  );
				ds_etcPrepayamtList.setColumn(fv_prepayamtCurrRow, "crAcctCd", fv_crAcctCd  );
			}
        
			break;					
    }
    
}

//3. 선적국가 after 이벤트 처리
function fn_AfterEventLshipNation(p, data)
{
	//edt_LshipNationNm.userdata = data.code;	  //저장시  edt_LshipNationCd 값에 담는다.
	ds_poOrderInfo.setColumn(0, "lshipNationCd", data.code  );
}

//3. 선적국가 after 이벤트 처리
function fn_AfterEventArrivNation(p, data)
{
	//edt_LshipNationNm.userdata = data.code;	  //저장시  edt_LshipNationCd 값에 담는다.
	ds_poOrderInfo.setColumn(0, "arrivNationCd", data.code  );
}

//3. 원산지 after 이벤트 처리
function fn_AfterEventoriginNation(p, data)
{
	//edt_LshipNationNm.userdata = data.code;	  //저장시  edt_LshipNationCd 값에 담는다.
	ds_poOrderInfo.setColumn(0, "originNationCd", data.code  );
}


function fn_calendarCallBack() {
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 도착지 항구 선택시
 *---------------------------------------------------------------------------------------------*/
function fn_arrivportPort_OnClick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "arrivPortPortCd"), "");	// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "arrivPortPortNm"), "");	// 전송할 파라미터 2
	var  arrRtn = gfn_dialog("PortAirPop"				// dialogId
					   , "X_FSI::PortAirPop.xfdl"		// 국가/공항 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{
		edt_arrivPortPortNm.value    = arrRtn["portNmHangul"];
		edt_arrivNationNm.value    = arrRtn["nationHangul"];

		ds_poOrderInfo.setColumn(0, "arrivPortPortNm", arrRtn["portNmHangul"]  );
		ds_poOrderInfo.setColumn(0, "arrivPortPortCd", arrRtn["portCd"]  );	
		ds_poOrderInfo.setColumn(0, "arrivNationCd", arrRtn["nationCd"]  );	
		ds_poOrderInfo.setColumn(0, "arrivNationNm", arrRtn["nationHangul"]  );	
	}

}


/*----------------------------------------------------------------------------------------------
 * 설명      : 선적지 항구 선택시
 *---------------------------------------------------------------------------------------------*/
function fn_lshipPortPort_OnClick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "lshipPortPortCd"), "");	// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "lshipPortPortNm"), "");	// 전송할 파라미터 2
	var  arrRtn = gfn_dialog("PortAirPop"				// dialogId
					   , "X_FSI::PortAirPop.xfdl"		// 국가/공항 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{
		edt_lshipNationNm.value    = arrRtn["nationHangul"];
		edt_lshipPortPortNm.value  = arrRtn["portNmHangul"];
		
		ds_poOrderInfo.setColumn(0, "lshipPortPortNm", arrRtn["portNmHangul"]  );
		ds_poOrderInfo.setColumn(0, "lshipPortPortCd", arrRtn["portCd"]  );	
		ds_poOrderInfo.setColumn(0, "lshipNationCd", arrRtn["nationCd"]  );	
		ds_poOrderInfo.setColumn(0, "lshipNationNm", arrRtn["nationHangul"]  );	
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 그리드 품목 팝업 expand시
 *---------------------------------------------------------------------------------------------*/
function grd_itemList_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row <= -1) return;
    var sColumn = gfn_getCellColId(obj, e.col);

	//Expand 클릭시
	if (sColumn == "itemCd")
	{
		//gfn_alert((e.row+1) + "번째 row의 Expand 버튼을 Click 했습니다.");
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(edt_originNationNm.value , "");	// 전송할 파라미터 1  
		arrParam[1] = gfn_nvl(ds_itemList.getColumn(e.row, "itemNm"), "");	// 전송할 파라미터 2
		var  arrRtn = gfn_dialog("TermbyGvrntaxRatePop"				// dialogId
						   , "X_FSI::TermbyGvrntaxRatePop.xfdl"			// 품목찾기 팝업 호출 
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if ( arrRtn instanceof Object )
		{
			ds_itemList.setColumn(e.row, "itemCd", arrRtn["itemCd"]  );
			ds_itemList.setColumn(e.row, "itemNm", arrRtn["itemNm"]  );	
			ds_itemList.setColumn(e.row, "brand", arrRtn["maker"]  );	
			ds_itemList.setColumn(e.row, "gradeStand", arrRtn["itemSize"]  );	
			ds_itemList.setColumn(e.row, "origin", arrRtn["originType"]  );	
			ds_itemList.setColumn(e.row, "hsCd", arrRtn["hsCd"]  );	
			ds_itemList.setColumn(e.row, "kgConvertRate", arrRtn["kgConvertRate"]  );	//구매단위당 kg 환산 비율	
			// 2014-05-29 jjjj 수정예정
			//ds_itemList.setColumn(e.row, "gvrntaxRate", (toNumber(arrRtn["gvrntaxRate"]) + toNumber( ds_proposalInfo.getColumn(0, "addGvrntaxRate")) )  );	//추가 관세율
		}
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow1(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_itemList.insertRow(ds_itemList.getRowCount()+1);
	if ( edt_poOrderNum.value != "" ) {	 
		ds_itemList.setColumn(insRow, "poProposalNum", edt_poProposalNum.value  );
		ds_itemList.setColumn(insRow, "poOrderNum", edt_poOrderNum.value  );
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow1(obj:Button,  e:ClickEventInfo)
{
	var bSucc = ds_itemList.deleteRow(ds_itemList.rowposition);
	
	
	// 지불조건택의 지급금액에 합계를 넣는다.
	for (var i = 0; i < ds_payList.getRowCount(); i++) {
		ds_payList.setColumn(i, "payAmt", ds_itemList.getSum("wonwtrAmt")); 
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지불조건 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow2(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_payList.insertRow(ds_payList.getRowCount()+1);
	ds_payList.setColumn(insRow, "payCondClass", "B");
	if ( edt_poProposalNum.value != "" ) {	 
		ds_payList.setColumn(insRow, "poOrderNum", edt_poOrderNum.value  );
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지불조건 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow2(obj:Button,  e:ClickEventInfo)
{
	var bSucc = ds_payList.deleteRow(ds_payList.rowposition);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지물조건 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow3(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_invoiceList.insertRow(ds_invoiceList.getRowCount()+1)
	if ( edt_poProposalNum.value != "" ) {	 
		ds_invoiceList.setColumn(insRow, "poOrderNum", edt_poOrderNum.value  );
	}	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 지물조건 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow3(obj:Button,  e:ClickEventInfo)
{
	var bSucc = ds_invoiceList.deleteRow(ds_invoiceList.rowposition);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow5(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_otherAmtList.insertRow(ds_otherAmtList.getRowCount()+1)
	if ( edt_poProposalNum.value != "" ) {	 
		ds_otherAmtList.setColumn(insRow, "poOrderNum", edt_poOrderNum.value  );
		ds_otherAmtList.setColumn(insRow, "otherAmtSeq", toNumber(insRow)+1 );
		ds_otherAmtList.setColumn(insRow, "slipPublishDate", gfn_today() );
		//ds_otherAmtList.setColumn(insRow, "paySchdDate", gfn_today() );
	
		ds_otherAmtList.setColumn(insRow, "remarks2", ds_poOrderInfo.getColumn(0, "remarks2") );
		ds_otherAmtList.setColumn(insRow, "exchangeRate", ds_poOrderInfo.getColumn(0, "exchangeRate") );
		ds_otherAmtList.setColumn(insRow, "amountUnit", ds_poOrderInfo.getColumn(0, "amountUnit") );
		ds_otherAmtList.setColumn(insRow, "lcNum", ds_poOrderInfo.getColumn(0, "lcNum") );
		ds_otherAmtList.setColumn(insRow, "attachDeptSap", ds_poOrderInfo.getColumn(0, "attachDeptSap") );
		//ds_otherAmtList.setColumn(insRow, "basiNum", ds_poOrderInfo.getColumn(0, "blNum") );
		ds_otherAmtList.setColumn(insRow, "lshipDate", ds_poOrderInfo.getColumn(0, "lshipDate") );
		ds_otherAmtList.setColumn(insRow, "splrCd", ds_poOrderInfo.getColumn(0, "splrCd") );
		ds_otherAmtList.setColumn(insRow, "attachDept", ds_poOrderInfo.getColumn(0, "attachDept") );
		ds_otherAmtList.setColumn(insRow, "attachDeptNm", ds_poOrderInfo.getColumn(0, "attachDeptNm") );
		ds_otherAmtList.setColumn(insRow, "vatNewhghtUpjang", "1002604" );
	}	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow5(obj:Button,  e:ClickEventInfo)
{

	var chkCnt = ds_otherAmtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		
		return;
	}

	for(var i = ds_otherAmtList.getRowCount()-1 ; i >= 0 ; i--)
	{
		if (ds_otherAmtList.getColumn(i, "chk") == 1)
		{
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다. 삭제 할 수 없습니다.");
				ds_otherAmtList.setColumn(i, "chk", 0);
				return; 
			}

			ds_otherAmtList.deleteRow(i);
		}
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타선급금 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow6(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_etcPrepayamtList.insertRow(ds_etcPrepayamtList.getRowCount()+1)
	if ( edt_poProposalNum.value != "" ) {	 
		ds_etcPrepayamtList.setColumn(insRow, "poOrderNum", edt_poOrderNum.value  );
		ds_etcPrepayamtList.setColumn(insRow, "adjustSeq", fv_otherAmtSeq  );
		
		ds_etcPrepayamtList.setColumn(insRow, "exchangeRate", ds_poOrderInfo.getColumn(0, "exchangeRate") );
		ds_etcPrepayamtList.setColumn(insRow, "amountUnit", ds_poOrderInfo.getColumn(0, "amountUnit") );
		ds_etcPrepayamtList.setColumn(insRow, "lcNum", ds_poOrderInfo.getColumn(0, "lcNum") );
		ds_etcPrepayamtList.setColumn(insRow, "attachDept", ds_poOrderInfo.getColumn(0, "attachDept") );
		ds_etcPrepayamtList.setColumn(insRow, "attachDeptNm", ds_poOrderInfo.getColumn(0, "attachDeptNm") );
		ds_etcPrepayamtList.setColumn(insRow, "attachDeptSap", ds_poOrderInfo.getColumn(0, "attachDeptSap") );
		ds_etcPrepayamtList.setColumn(insRow, "blNum", ds_poOrderInfo.getColumn(0, "blNum") );
		ds_etcPrepayamtList.setColumn(insRow, "lshipDate", ds_poOrderInfo.getColumn(0, "lshipDate") );
		ds_etcPrepayamtList.setColumn(insRow, "splrCd", ds_poOrderInfo.getColumn(0, "splrCd") );
		ds_etcPrepayamtList.setColumn(insRow, "expireCalBasisDate", ds_poOrderInfo.getColumn(0, "expireCalBasisDate") );
	}	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 기타선급금 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow6(obj:Button,  e:ClickEventInfo)
{
	//var bSucc = ds_etcPrepayamtList.deleteRow(ds_etcPrepayamtList.rowposition);
	for(var i = ds_etcPrepayamtList.getRowCount()-1 ; i >= 0 ; i--)
	{
		if (ds_etcPrepayamtList.getColumn(i, "chk") == 1)
		{
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다. 삭제 할 수 없습니다.");
				ds_etcPrepayamtList.setColumn(i, "chk", 0);
				return; 
			}

			ds_etcPrepayamtList.deleteRow(i);
		}
	}		
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 그리드 값 변경시
 *---------------------------------------------------------------------------------------------*/
function ds_itemList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	/*
	if(e.columnid == "quantity" || e.columnid == "uprice") 
	{
		var quantity = gfn_nvl(ds_itemList.getColumn(e.row, "quantity"));
		var uprice = gfn_nvl(ds_itemList.getColumn(e.row, "uprice"));

		ds_itemList.setColumn(e.row, "wonwtrAmt", quantity * uprice);
	}
	*/
	
	if(e.columnid == "quantity" )
	{
		fv_currRow = e.row;
		fn_getUnitInfo( gfn_nvl(ds_itemList.getColumn(e.row, "unit")) );
		var kgConvertRate = gfn_nvl(ds_itemList.getColumn(e.row, "kgConvertRate"));
		var quantity = gfn_nvl(ds_itemList.getColumn(e.row, "quantity"));
		var unit = gfn_nvl(ds_itemList.getColumn(e.row, "unit"));
		//alert(unit+"//"+kgConvertRate+"//"+quantity+"//"+(kgConvertRate * quantity));
		//alert(ds_itemList.getColumn(e.row, "set1"));
		if ( ds_itemList.getColumn(e.row, "set1") == "KG" )
		{	
			//ds_itemList.setColumn(e.row, "wgt", kgConvertRate * quantity );
		} 
		else
		{
			if ( unit == 'BOX')
			{
				ds_itemList.setColumn(e.row, "wgt", kgConvertRate * quantity );
			}
		}
	}
	if(e.columnid == "wgt") 
	{
		fv_currRow = e.row; 
		fn_getUnitInfo( gfn_nvl(ds_itemList.getColumn(e.row, "unit")) );
	}
	if(e.columnid == "uprice" )
	{
		fv_currRow = e.row;
		fn_getUnitInfo( gfn_nvl(ds_itemList.getColumn(e.row, "unit")) );
		
		var uprice = toNumber(gfn_nvl(ds_itemList.getColumn(e.row, "uprice")));
		var wonwtrAmt = toNumber(gfn_nvl(ds_itemList.getColumn(e.row, "wonwtrAmt")));
		ds_itemList.setColumn(e.row, "upriceKrw", ds_poOrderInfo.getColumn(0, "exchangeRate") * uprice );
		ds_itemList.setColumn(e.row, "wonwtrAmtKrw", ds_poOrderInfo.getColumn(0, "exchangeRate") * wonwtrAmt );
	}
	if(e.columnid == "upriceKrw" )
	{
		fv_currRow = e.row;
		//fn_calSale(fv_currRow, "NOUSD")
		var upriceKrw = toNumber(gfn_nvl(ds_itemList.getColumn(e.row, "upriceKrw")));
		ds_itemList.setColumn(e.row, "wonwtrAmtKrw", ds_poOrderInfo.getColumn(0, "exchangeRate") * upriceKrw );
	}
	if( e.columnid == "unit" )
	{
		fv_currRow = e.row;
		fn_getUnitInfo( gfn_nvl(ds_itemList.getColumn(e.row, "unit")) );
		var kgConvertRate = gfn_nvl(ds_itemList.getColumn(e.row, "kgConvertRate"));
		var quantity = gfn_nvl(ds_itemList.getColumn(e.row, "quantity"));
		var unit = gfn_nvl(ds_itemList.getColumn(e.row, "unit"));
		//alert(unit+"//"+kgConvertRate+"//"+quantity+"//"+(kgConvertRate * quantity));
		//alert(ds_itemList.getColumn(e.row, "set1"));
		if ( ds_itemList.getColumn(e.row, "set1") == "KG" )
		{	
			ds_itemList.setColumn(e.row, "wgt", kgConvertRate * quantity );
		} 
		else
		{
			if ( unit == 'BOX')
			{
				ds_itemList.setColumn(e.row, "wgt", kgConvertRate * quantity );
			}
		}
	}
	

	
	// 원물금액이 변경되면 지불조건탭의 지급금액에 합계를 넣어준다.
	var nWonwtrAmt = 0;
	// 품목탭의 원물금액을 합산한다.
	for (var i = 0; i < ds_itemList.getRowCount(); i++) {
		nWonwtrAmt += Number(gfn_nvl(ds_itemList.getColumn(i, "wonwtrAmt"))); 
	}
	// 지불조건택의 지급금액에 합계를 넣는다.
	for (var i = 0; i < ds_payList.getRowCount(); i++) {
		ds_payList.setColumn(i, "payAmt", nWonwtrAmt); 
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :단위변경시 단위에 해당하는 실단위 가져오기
 *---------------------------------------------------------------------------------------------*/
function fn_getUnitInfo(unit)
{
	ds_search.setColumn(0, "unit", unit);
    var strSvcID    = "getUnitInfo";
    var strURL      = "ft/ftp/getUnitInfo.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 판매 및 이익계획 자동계산식 적용
 *---------------------------------------------------------------------------------------------*/
function fn_calSale(row, flag)
{
	var base; 
	//alert(ds_itemList.getColumn(row, "set1") );
	//계산 기준 : KG이면 중량 단위가 BOX나 BDL이면 수량	
	if ( ds_itemList.getColumn(row, "set1") == "KG" )
	{
		base = ds_itemList.getColumn(row, "wgt");
	} else
	{
		base = ds_itemList.getColumn(row, "quantity");
	}
	var wonwtrAmt = ds_itemList.getColumn(row, "uprice") * base;	//단가 * 중량(수량)
	if ( isNaN(wonwtrAmt) ) wonwtrAmt = 0;
	if ( flag != "NOUSD" ) 
	{
		ds_itemList.setColumn(row, "wonwtrAmt",  Math.round( wonwtrAmt, 2 ) );		//wonwtrAmt,buyAmt
	}
	//alert("upriceKrw :"+ds_poOrderInfo.getColumn(0, "exchangeRate") +"*"+ ds_itemList.getColumn(row, "uprice"));
	ds_itemList.setColumn(row, "upriceKrw", ds_poOrderInfo.getColumn(0, "exchangeRate") * ds_itemList.getColumn(row, "uprice")  );
	//alert("wonwtrAmtKrw :"+ds_itemList.getColumn(row, "wonwtrAmt") +"*"+ ds_poOrderInfo.getColumn(0, "exchangeRate") );
	ds_itemList.setColumn(row, "wonwtrAmtKrw", Math.round(toNumber(gfn_nvl(ds_itemList.getColumn(row, "wonwtrAmt"))) * ds_poOrderInfo.getColumn(0, "exchangeRate"))   );
	
}



/*----------------------------------------------------------------------------------------------
 * 설명      : 불러오기 버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_callProposal_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = "10";	// 전송할 파라미터 1

	var  arrRtn = gfn_dialog("ProposalSearchPop"				// dialogId
					   , "X_FTP::ProposalSearchPop.xfdl"		// 품의서검색 팝업
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{
		fv_poProposalNum = arrRtn["poProposalNum"];
		ds_poOrderInfo.setColumn(0, "poProposalNum", arrRtn["poProposalNum"]  );
		fv_flag = "CALL";
		fn_search2();		
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 탭변경시
 *---------------------------------------------------------------------------------------------*/
function Tab00_canchange(obj:Tab, e:TabIndexChangeEventInfo)
{
// 	if(e.postindex ==5) {
// 		if ( fv_tabFlag ) {		//수수료탭에서 더블클릭일때만 이동 가능
// 			Tab00.tabpage6.enable = true;
// 			return true;
// 		} else {
// 			Tab00.tabpage6.enable = false;
// 			return false;
// 		}
// 	}	
	if(e.postindex ==6) {
		if ( ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "saleType") == "40" ) 	  //수수료 매출일때
		{	
			Tab00.tabpage7.enable = true;
			return true;
		}			
		else 
		{
			Tab00.tabpage7.enable = false;
			return false;
		}	
	}

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료탭 더블클릭시
 *---------------------------------------------------------------------------------------------*/
function ds_otherAmtList_oncelldbclick(obj:Grid, e:GridClickEventInfo)
{
	var journalzAcct = gfn_nvl(ds_otherAmtList.getColumn(e.row, "journalzAcct"));
	if ( journalzAcct == "HFIM01" ) 	//기타선급금일 경우
	{
		fv_poOrderNum = gfn_nvl(ds_otherAmtList.getColumn(e.row, "poOrderNum"));
		fv_otherAmtSeq = gfn_nvl(ds_otherAmtList.getColumn(e.row, "adjustSeq"));
		ds_etcPrepayamtList.filter("poOrderNum == '"+fv_poOrderNum+"'&& otherAmtSeq=='"+fv_otherAmtSeq+"'");
		fv_tabFlag = true;
		Tab00.tabindex = 5;	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 탭변경시
 *---------------------------------------------------------------------------------------------*/
function Tab00_onchanged(obj:Tab, e:TabIndexChangeEventInfo)
{	
// 	if ( fv_tabFlag ) {		//수수료탭에서 더블클릭일때만 수정 가능
// 		Tab00.tabpage6.enable = true;
// 	} else {
// 		Tab00.tabpage6.enable = false;
// 	}
// 	fv_tabFlag = false;
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료탭 그리드 분개계정 클릭시
 *---------------------------------------------------------------------------------------------*/
function grd_otherAmtList_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row <= -1) return;
    var sColumn = gfn_getCellColId(obj, e.col);

	//Expand 클릭시
	if (sColumn == "journalzAcctNm")	//분개계정 컬럼 클릭시
	{
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_otherAmtList.getColumn(e.row, "journalzAcctNm"), "");	// 전송할 파라미터 1
		var arrRtn = gfn_dialog("AcctSearchPop"				// dialogId
						   , "X_FSI::AcctSearchPop.xfdl"		// 계정찾기 팝업 호출
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);

		if ( arrRtn instanceof Object )
		{
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "journalzAcct", arrRtn["acctCd"]  );
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "journalzAcctNm", arrRtn["acctNm"]  );	
		}
	}
	else if (sColumn == "realPaymentPlceNm")	//실지급처(매입처) 컬럼 클릭시
	{

		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_otherAmtList.getColumn(e.row, "realPaymentPlce"), "");		// 전송할 파라미터 1
		arrParam[1] = gfn_nvl(ds_otherAmtList.getColumn(e.row, "realPaymentPlceNm"), "");		// 전송할 파라미터 2
		
		var commClass = gfn_nvl(ds_otherAmtList.getColumn(e.row, "commClass"), "");		// 수수료 유형
		/*
		if ( commClass == "A-05" || commClass == "A-06" )	//적하보험료지불,통관경비지불
		{
			arrParam[2] = "ALL";	// 해외거래처 뺴고 다
		} 
		else  
		{
			arrParam[2] = "10";	// 국내거래처
		}
		*/
		arrParam[2] = "ALL";	// 해외거래처 뺴고 다
		var  arrRtn = gfn_dialog("ContrtPop"				// dialogId
						   , "X_FSI::ContrtPop.xfdl"		// 매입처 팝업 호출
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if ( arrRtn instanceof Object )
		{
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "realPaymentPlce", arrRtn["vdCd"]  );
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "realPaymentPlceNm", arrRtn["vdNmLoc"]  );	
			
		}	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타선급금 그리드 분개계정 클릭시
 *---------------------------------------------------------------------------------------------*/
function grd_etcPrepayamtList_onexpandup(obj:Grid, e:GridMouseEventInfo)
{

	if(e.row <= -1) return;
    var sColumn = gfn_getCellColId(obj, e.col);

	//Expand 클릭시
	if (sColumn == "journalzAcctNm")	//분개계정 컬럼 클릭시
	{
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_etcPrepayamtList.getColumn(e.row, "journalzAcctNm"), "");	// 전송할 파라미터 1
		var arrRtn = gfn_dialog("AcctSearchPop"				// dialogId
						   , "X_FSI::AcctSearchPop.xfdl"		// 계정찾기 팝업 호출
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);

		if ( arrRtn instanceof Object )
		{
			ds_etcPrepayamtList.setColumn(ds_etcPrepayamtList.rowposition, "journalzAcct", arrRtn["acctCd"]  );
			ds_etcPrepayamtList.setColumn(ds_etcPrepayamtList.rowposition, "journalzAcctNm", arrRtn["acctNm"]  );	
		}
	}
	else if (sColumn == "realPaymentPlceNm")	//실지급처(매입처) 컬럼 클릭시
	{
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_etcPrepayamtList.getColumn(e.row, "realPaymentPlce"), "");		// 전송할 파라미터 1
		arrParam[1] = gfn_nvl(ds_etcPrepayamtList.getColumn(e.row, "realPaymentPlceNm"), "");		// 전송할 파라미터 2

		var prepayamtClass = gfn_nvl(ds_etcPrepayamtList.getColumn(e.row, "prepayamtClass"), "");		// 수수료 유형
		if ( prepayamtClass == "A-05" || prepayamtClass == "A-06" )	//적하보험료지불,통관경비지불
		{
			arrParam[2] = "ALL";	// 해외거래처 뺴고 다
		} 
		else  
		{
			arrParam[2] = "10";	// 국내거래처
		}


		var  arrRtn = gfn_dialog("ContrtPop"				// dialogId
						   , "X_FSI::ContrtPop.xfdl"		// 매입처 팝업 호출
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if ( arrRtn instanceof Object )
		{
			ds_etcPrepayamtList.setColumn(ds_etcPrepayamtList.rowposition, "realPaymentPlce", arrRtn["vdCd"]  );
			ds_etcPrepayamtList.setColumn(ds_etcPrepayamtList.rowposition, "realPaymentPlceNm", arrRtn["vdNmLoc"]  );	
			
		}		
	}		
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료탭 그리드 클릭시
 *---------------------------------------------------------------------------------------------*/
function grd_otherAmtList_oncellclick(obj:Grid, e:GridClickEventInfo)
{

	if ( e.col != 1 ) return;

	var journalzAcct = gfn_nvl(ds_otherAmtList.getColumn(e.row, "journalzAcct"));
	 
	if ( journalzAcct == "HFIM01" ) 	//기타선급금일 경우- 기타선급금 계정 확인필요
	{
		if (ds_otherAmtList.getRowType(ds_otherAmtList.rowposition) == Dataset.ROWTYPE_INSERT)	  //인서트는 저장후 이동할 수 있게
		{
			gfn_alert("ftp.validator.tabmove");	// 저장 후 기타선급금 정산 탭으로 이동 가능합니다.
			return;
		}

		var commAmt = gfn_nvl(ds_otherAmtList.getColumn(e.row, "commAmt"));
		
		//기타선급금 정산잔액 체크( 잔액이 있을때만 탭이동)
		var totAdjustAmt =0;
		for ( var i=0; i<ds_etcPrepayamtList.rowcount; i++ ) 
		{
			if ( ds_otherAmtList.getColumn(e.row, "poOrderNum") == ds_etcPrepayamtList.getColumn(i, "poOrderNum")
			  && ds_otherAmtList.getColumn(e.row, "otherAmtSeq") == ds_etcPrepayamtList.getColumn(i, "otherAmtSeq") )
			{
				totAdjustAmt += parseInt(ds_etcPrepayamtList.getColumn(i, "adjustAmt"));
			}
			
		}
		//alert(commAmt +"//"+ totAdjustAmt);
		if ( commAmt < totAdjustAmt ) 
		{
		
			gfn_alert("ftp.validator.no.adjust.valamt");	//정산 잔액이 없습니다.
			return;
		}
			
		
		fv_poOrderNum = gfn_nvl(ds_otherAmtList.getColumn(e.row, "poOrderNum"));
		fv_otherAmtSeq = gfn_nvl(ds_otherAmtList.getColumn(e.row, "adjustSeq"));
		fv_commAmt = gfn_nvl(ds_otherAmtList.getColumn(e.row, "commAmt"));
		ds_etcPrepayamtList.filter("poOrderNum == '"+fv_poOrderNum+"'&& otherAmtSeq=='"+fv_otherAmtSeq+"'");
		fv_tabFlag = true;
		Tab00.tabindex = 5;		//기타선급금 탭 이동
	}	
	
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료탭 클릭시 같은 계정 체크
 *---------------------------------------------------------------------------------------------*/
function fnChkOtherAmtDum()
{
	var focDrAcctCd ="";
	var focCrAcctCd ="";
	var chkDiff = true;
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			focDrAcctCd = ds_otherAmtList.getColumn(i, "drAcctCd")
			focCrAcctCd = ds_otherAmtList.getColumn(i, "crAcctCd")
			//alert("focCrAcctCd :"+focDrAcctCd+"/"+focCrAcctCd);
			break;
		}
	}
	
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			//alert(focDrAcctCd +"//"+ ds_otherAmtList.getColumn(i, "drAcctCd") +"----"+  focCrAcctCd +"//"+  ds_otherAmtList.getColumn(i, "crAcctCd"));
			if ( focDrAcctCd != ds_otherAmtList.getColumn(i, "drAcctCd") || focCrAcctCd != ds_otherAmtList.getColumn(i, "crAcctCd") )
			{
				//alert( " roof "+ds_otherAmtList.getColumn(i, "drAcctCd") +"//"+ds_otherAmtList.getColumn(i, "crAcctCd") 			      );
				gfn_alert("서로 다른 계정은 전표처리 안됩니다.");	// 변경된 내역이 없습니다.			    
				ds_otherAmtList.setColumn(i,"chk", 0);
				return false;
				//break;
			}
		}
	}
	
	return chkDiff;
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 기타선급금 탭 컬럼 이동시
 *---------------------------------------------------------------------------------------------*/
function ds_etcPrepayamtList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	 
	if(e.columnid == "adjustAmt") 
	{
		var totAdjustAmt =0;
		for ( var i=0; i<ds_etcPrepayamtList.rowcount; i++ ) 
		{
			if ( fv_poOrderNum == ds_etcPrepayamtList.getColumn(i, "poOrderNum")
			  && fv_otherAmtSeq == ds_etcPrepayamtList.getColumn(i, "adjustSeq") )
			{
				totAdjustAmt += parseInt(ds_etcPrepayamtList.getColumn(i, "adjustAmt"));
			}
			
		}
		//alert(fv_commAmt +"//"+ totAdjustAmt); 
		if ( fv_commAmt < totAdjustAmt ) 
		{
			gfn_alert("ftp.validator.adjust.valamt.chk", gfn_numFormat(fv_commAmt)+"^"+gfn_numFormat(totAdjustAmt));	//기타선급금 총액["+gfn_numFormat(fv_commAmt)+"]보다 정산잔액["+gfn_numFormat(totAdjustAmt)+"]이 큽니다.
			if (obj.getRowType(obj.rowposition) == Dataset.ROWTYPE_INSERT)
			{
				ds_etcPrepayamtList.setColumn(e.row, "adjustAmt", null);
			}
			else
			{
				ds_etcPrepayamtList.setColumn(e.row, "adjustAmt", ds_etcPrepayamtList.getOrgColumn(e.row, "adjustAmt"));
			}
			return;
		}
					
	}
	else if(e.columnid == "prepayamtClass")  	//선급금 구분
	{
	     fv_prepayamtCurrRow = e.row;
	     var prepayamtClass = ds_etcPrepayamtList.getColumn(e.row, "prepayamtClass");
		 fn_getAccCdInfo( prepayamtClass,"PREPAYAMT_CLASS" );
		 //fnChkEtcPrepayDum();	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수로탭 저장시 체크
 *---------------------------------------------------------------------------------------------*/
function fn_chkOtherAmt( saveFlag )
{
	//v_ds_check 미사용시 변경사항 체크
 	if ( !gfn_dsIsUpdated(ds_otherAmtList) ) return true;	

	if ( ds_otherAmtList.getRowCount() == 0 ) return true;

	if ( gfn_nvl(saveFlag,"") != "SAVE" )
	{
		var chkCnt = ds_otherAmtList.findRow("chk",'1');
		//체크된 항목이 하나도 없으면 경고를 한다.
		if(chkCnt<0)
		{
			gfn_alert("msg.noselect","체크박스");
			Tab00.tabpage5.grd_otherAmtList.setCellPos(1); // cellindex
			Tab00.tabpage5.grd_otherAmtList.setFocus();
			Tab00.tabpage5.grd_otherAmtList.showEditor(); 
			
			Tab00.tabindex = 4;
			return;
		}
	}

	if ( fv_poOrderNum == "") {
		gfn_alert("상단의 저장 버튼을 클릭하세요.");
		return;
	}
	
	var taxFlag = false;
	for ( var row=0; row<ds_itemList.getRowCount(); row++ )  
	{
		
		var taxYn = gfn_nvl(ds_itemList.getColumn(row, "taxYn"), "");
		if ( taxYn == "Y") 
		{
			taxFlag = true;
			break;
		}
	} 
	
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다.");
				ds_otherAmtList.setColumn(i, "chk", "0");
				Tab00.tabindex = 4;
				return; 
			}
		 
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"),"") ==  "" )	//수수료구분
			{
				gfn_alert("수수료구분 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "commClass"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commType"),"") ==  "" )	//유형
			{
				gfn_alert("유형 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "commType"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}
			
			//alert(taxFlag); 
			var commClassB = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형
			var commClass = gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "")
			//if ( taxFlag && commClass != "A" ) 	//과세
//			if ( commClassB ="B") 	//과세
			//{	 
			/*	
				if ( gfn_nvl(ds_otherAmtList.getColumn(i, "taxCd"),"") ==  "" )	//과세유형 있을시 부가세 정보 필수
				{
					//gfn_alert("품목의 과세가 있습니다. 과세유형 은(는) 필수 입력 항목입니다.");
					gfn_alert("과세유형 은(는) 필수 입력 항목입니다.");
					ds_otherAmtList.rowposition = i;
					Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "taxCd"));
					Tab00.tabpage5.grd_otherAmtList.setFocus();
					Tab00.tabpage5.grd_otherAmtList.showEditor(); 
					Tab00.tabindex = 4;
					return false;
				}
			*/	
			//}
					
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "journalzAcct"),"") ==  "" )	//분개계정
			{
				gfn_alert("분개계정 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "journalzAcct"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "basiKind"),"") ==  "" )	//근거종류
			{
				gfn_alert("근거종류 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "basiKind"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}		
			//alert(gfn_nvl(ds_otherAmtList.getColumn(i, "basiNum"),"") );
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "basiNum"),"") ==  "" )	//근거번호
			{
				gfn_alert("근거번호 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "basiNum"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}	
			

			
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commAmt"),"") ==  "" )	//수수료금액
			{
				gfn_alert("수수료금액 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "commAmt"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}	

			//지불에서는 공급가나 부가세가 필수입력항목이 아닙니다.
			//지불 : 선급금은 공급가,부가세 없음
			var commClass = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형
			/*
			//alert(commClass);
			if ( taxFlag && commClass != "A" )	//과세, 적하보험료지불,통관경비지불 :지불
			{
				 
				if ( gfn_nvl(ds_otherAmtList.getColumn(i, "supplyPrice"),"") ==  "" )	//공급가
				{
					gfn_alert("공급가 은(는) 필수 입력 항목입니다.");
					ds_otherAmtList.rowposition = i;
					Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "supplyPrice"));
					Tab00.tabpage5.grd_otherAmtList.setFocus();
					Tab00.tabpage5.grd_otherAmtList.showEditor(); 
					Tab00.tabindex = 4;
					return false;
				}	
				if ( gfn_nvl(ds_otherAmtList.getColumn(i, "vatAmt"),"") ==  "" )	//부가세
				{
					gfn_alert("부가세 은(는) 필수 입력 항목입니다.");
					ds_otherAmtList.rowposition = i;
					Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "vatAmt"));
					Tab00.tabpage5.grd_otherAmtList.setFocus();
					Tab00.tabpage5.grd_otherAmtList.showEditor(); 
					Tab00.tabindex = 4;
					return false;
				}								
			} 
			*/
			//alert(gfn_nvl(ds_otherAmtList.getColumn(i, "taxCd"),""));
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "taxCd"),"") !=  "" )	//과세유형 있을시 부가세 정보 필수
			{
				if ( gfn_nvl(ds_otherAmtList.getColumn(i, "supplyPrice"),"") ==  "" )	//공급가
				{
					gfn_alert("공급가 은(는) 필수 입력 항목입니다.");
					ds_otherAmtList.rowposition = i;
					Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "supplyPrice"));
					Tab00.tabpage5.grd_otherAmtList.setFocus();
					Tab00.tabpage5.grd_otherAmtList.showEditor(); 
					Tab00.tabindex = 4;
					return false;
				}	
				/*
				if ( gfn_nvl(ds_otherAmtList.getColumn(i, "vatAmt"),"") ==  "" )	//부가세
				{
					gfn_alert("부가세 은(는) 필수 입력 항목입니다.");
					ds_otherAmtList.rowposition = i;
					Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "vatAmt"));
					Tab00.tabpage5.grd_otherAmtList.setFocus();
					Tab00.tabpage5.grd_otherAmtList.showEditor(); 
					Tab00.tabindex = 4;
					return false;
				}
				*/
						
				if (   (gfn_nvl(ds_otherAmtList.getColumn(i, "taxCd"),"") =="50" 	//전자일반 매입	
					|| gfn_nvl(ds_otherAmtList.getColumn(i, "taxCd"),"") =="60" 	//전자영세 일반 매입
					|| gfn_nvl(ds_otherAmtList.getColumn(i, "taxCd"),"") =="72" 	//전자불공제 면세사업
					|| gfn_nvl(ds_otherAmtList.getColumn(i, "taxCd"),"") =="91") 	//전자면세 일반계산서
					)	//세금계산서번호
				{
					if ( gfn_nvl(ds_otherAmtList.getColumn(i, "taxBillNum"),"") ==  "" )	//세금계산서번호
					{
						gfn_alert("세금계산서번호 은(는) 필수 입력 항목입니다.");
						ds_otherAmtList.rowposition = i;
						Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "taxBillNum"));
						Tab00.tabpage5.grd_otherAmtList.setFocus();
						Tab00.tabpage5.grd_otherAmtList.showEditor(); 
						Tab00.tabindex = 4;
						return false;
					}
					if ( gfn_nvl(ds_otherAmtList.getColumn(i, "billPublishdd"),"") ==  "" )	//세금계산서 발행일
					{
						gfn_alert("계산서 발행일 은(는) 필수 입력 항목입니다.");
						ds_otherAmtList.rowposition = i;
						Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "billPublishdd"));
						Tab00.tabpage5.grd_otherAmtList.setFocus();
						Tab00.tabpage5.grd_otherAmtList.showEditor(); 
						Tab00.tabindex = 4;
						return false;
					}
				}												
				
					

			}		
			/*
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "remarks"),"") ==  "" )	//적요
			{
				gfn_alert("적요 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "remarks"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}
			*/
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "vatNewhghtUpjang"),"") ==  "" )	//신고업장
			{
				gfn_alert("신고업장 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "vatNewhghtUpjang"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}								
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipPublishDate"),"") ==  "" )	//전표발행일
			{
				gfn_alert("전표발행일 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "slipPublishDate"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}	
			
			var commClass = gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "");		// 수수료 유형
			if ( commClass == "A-05" || commClass == "A-06" )	//적하보험료지불,통관경비지불:지불일때
			{
				if ( gfn_nvl(ds_otherAmtList.getColumn(i, "paySchdDate"),"") ==  "" )	//지불예정일자
				{ 
					gfn_alert("지불예정일자 은(는) 필수 입력 항목입니다.");
					ds_otherAmtList.rowposition = i;
					Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "paySchdDate"));
					Tab00.tabpage5.grd_otherAmtList.setFocus();
					Tab00.tabpage5.grd_otherAmtList.showEditor(); 
					Tab00.tabindex = 4;
					return false;
				}	


			} 
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "realPaymentPlceNm"),"") ==  "" )	//실지급처
			{
				gfn_alert("실지급처 은(는) 필수 입력 항목입니다.");
				ds_otherAmtList.rowposition = i;
				Tab00.tabpage5.grd_otherAmtList.setCellPos(Tab00.tabpage5.grd_otherAmtList.getBindCellIndex("Body", "realPaymentPlceNm"));
				Tab00.tabpage5.grd_otherAmtList.setFocus();
				Tab00.tabpage5.grd_otherAmtList.showEditor(); 
				Tab00.tabindex = 4;
				return false;
			}				
		    
		}
	}
	
	var entryComm = false;	  //통관수수료 체크 : 판가계산시 필요
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"),"") ==  "B-07" )	//통관수수료
			{
				entryComm = true;
				break;
			}
		}
	}
	/*
	if ( !entryComm ) 	//통관수수료 없을시 체크
	{	
		gfn_alert("수수료 구분중 통관수수료이 없습니다.");
		return false;
	}
	*/
	
	
	return true;
 	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료 회계전표 IF 버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_fiscalSlipCreate_onclick(obj:Button,  e:ClickEventInfo)
{

	//v_ds_check 미사용시 변경사항 체크
 	if (  !gfn_dsIsUpdated(ds_otherAmtList) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	if ( !fn_chkOtherAmt() ) return;	//수수료탭 체크

	var chkCnt = ds_otherAmtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}
/*
	if ( !fnChkOtherAmtDum() )	//서로 다른 계정 체크
	{
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			ds_otherAmtList.setColumn(i,"chk", 0);
		}
		return;
	}
*/	
	var otherAmtSeqs ="";
	var processFlag ="";
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( ds_otherAmtList.getColumn(i, "signProgressStatus") !=  "COMPLETE" ) {
				gfn_alert("결재 승인완료 상태가 아닙니다.");	//
				return;
			}		
		
			var commClass = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형
			var orgFiscalSlipNum = gfn_nvl(ds_otherAmtList.getColumn(i, "orgFiscalSlipNum"),"") ;		// 원시전표번호
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "B-21" )	   //환급정산
			{
				processFlag = "C";
				if ( orgFiscalSlipNum == "" ) 
				{
					gfn_alert("원시전표번호가 없습니다. 원시전표 불러오기 버튼 클릭 후 원시전표번호를 선택해 주세요");
					return;
				}
			} 
			else if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "C-01" )	   //수수료매출정산
			{
				processFlag = "D"
			} 
			else 	//미착
			{
				if ( commClass == "B" )	   //미착
				{
					var altSlipClass = gfn_nvl(ds_otherAmtList.getColumn(i, "altSlipClass"), "");
					if ( altSlipClass == "1" )
					{
						if ( orgFiscalSlipNum == "" || gfn_nvl(ds_otherAmtList.getColumn(i, "adjustSeq"), "") =="" ) 
						{
							gfn_alert("원시전표번호가 없습니다. 원시전표 불러오기 버튼 클릭 후 원시전표번호를 선택해 주세요");
							return;
						}
					} 
					else
					{
						if ( orgFiscalSlipNum == "" || gfn_nvl(ds_otherAmtList.getColumn(i, "adjustSeq"), "") =="" ) 
						{
							gfn_alert("가수금 원시전표번호가 없습니다. 가수금 불러오기 버튼 클릭 후 원시전표번호를 선택해 주세요");
							return;
						}
					}
				} 
				processFlag = commClass;
			}
			
			
			
			/*
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "otherAmtSeq"),"") ==  "" )	//전표확정
			{
				gfn_alert("저장 후 회계전표 IF하세요.");
				return;
			}
			*/
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다.");
				return; 
			}
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "A" )	//전표요청
			{
				gfn_alert("전표 요청상태 입니다.");
				return; 
			}		
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "V" )	//임시전표
			{
				gfn_alert("임시전표상태 입니다."); 
				return;
			}						
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "B" )	//취소요청
			{
				gfn_alert("전표 취소요청상태 입니다."); 
				return;
			}					
			otherAmtSeqs+= "'"+ds_otherAmtList.getColumn(i, "otherAmtSeq")+"',";
		}
	}
	
	var taxFlag = "N";
	for ( var row=0; row<ds_itemList.getRowCount(); row++ )  
	{
		
		var taxYn = gfn_nvl(ds_itemList.getColumn(row, "taxYn"), "");
		if ( taxYn == "Y") 
		{
			taxFlag = "Y";
			break;
		}
	} 
		
	otherAmtSeqs = otherAmtSeqs.substring(0, otherAmtSeqs.length-1);
	//alert("otherAmtSeqs :"+otherAmtSeqs);
	ds_search.setColumn(0, "otherAmtSeqs", otherAmtSeqs );	
	
	//alert(processFlag+"//"+otherAmtSeqs);
	ds_search.setColumn(0, "processFlag", processFlag );	
	ds_search.setColumn(0, "taxFlag", taxFlag );	

	if (!gfn_confirm("confirm.before.save")) return false;
	ds_search.setColumn(0, "draft", "N" );	
    var strSvcID    = "createFiscalSlip";
    var strURL      = "ft/ftp/poOrderMst/createFiscalSlipIf.xdo";
    var strInDs     = "ds_search=ds_search ds_otherAmtList=ds_otherAmtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타선급금 IF버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_etcFiscalSlipCreate_onclick(obj:Button,  e:ClickEventInfo)
{
	//v_ds_check 미사용시 변경사항 체크
 	if (  !gfn_dsIsUpdated(ds_etcPrepayamtList) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	var chkCnt = ds_etcPrepayamtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}
 	
	if ( !fnChkEtcPrepayDum() ) return;

	var adjustSeqs ="";
	for ( var i=0; i<ds_etcPrepayamtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( ds_etcPrepayamtList.getColumn(i, "signProgressStatus") !=  "COMPLETE" ) {
				gfn_alert("결재 승인완료 상태가 아닙니다.");	//
				return;
			}	
					
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "adjustSeq"),"") ==  "" )	//전표확정
			{
				gfn_alert("저장후 회계전표 IF하세요.");
				return;
			}
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") ==  "V" )	//입시전표
			{
				gfn_alert("임시 전표상태 입니다.");
				return; 
			}
			
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다.");
				return;
			}
			
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") ==  "A" )	//전표요청
			{
				gfn_alert("전표 요청상태 입니다."); 
				return;
			}			
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") ==  "B" )	//취소요청
			{
				gfn_alert("전표 취소요청상태 입니다."); 
				return;
			}			
			adjustSeqs+= "'"+ds_etcPrepayamtList.getColumn(i, "adjustSeq")+"',";
		}
	}
	adjustSeqs = adjustSeqs.substring(0, adjustSeqs.length-1);
	ds_search.setColumn(0, "adjustSeqs", adjustSeqs );
	
	if (!gfn_confirm("confirm.before.save")) return false;
	
	ds_search.setColumn(0, "draft", "N" );	
	//ds_search.setColumn(0, "flag", fv_flag);
    var strSvcID    = "createEtcFiscalSlip";
    var strURL      = "ft/ftp/poOrderMst/createEtcFiscalSlipIf.xdo";
    var strInDs     = "ds_search=ds_search ds_etcPrepayamtList=ds_etcPrepayamtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타선급금 IF 취소 버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_etcFiscalSlipCancel_onclick(obj:Button,  e:ClickEventInfo)
{
	//v_ds_check 미사용시 변경사항 체크
 	if (  !gfn_dsIsUpdated(ds_etcPrepayamtList) ) 
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	} 
 	
	for ( var i=0; i<ds_etcPrepayamtList.rowcount; i++ ) 
	{
		if ( ds_etcPrepayamtList.getRowType(i) == Dataset.ROWTYPE_UPDATE ) 
		{
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") !=  "P" && gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") !=  "V")	//전표 생성일때만 취소가능
			{
				gfn_alert("임시전표, 전표확정 상태에서 취소 가능합니다.");
				ds_etcPrepayamtList.rowposition = i;
				return; 
			}			
		}
	}	
 	
	if (!gfn_confirm("confirm.before.save")) return false;
	
	//ds_search.setColumn(0, "flag", fv_flag);
    var strSvcID    = "cancelEtcFiscalSlip";
    var strURL      = "ft/ftp/poOrderMst/cancelEtcFiscalSlipIf.xdo";
    var strInDs     = "ds_search=ds_search ds_etcPrepayamtList=ds_etcPrepayamtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지불조건 그리드 값 변경시
 *---------------------------------------------------------------------------------------------*/
function ds_payList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid == "payCondClass") 
	{
		ds_payList.setColumn(e.row, "orgPayCondClass", ds_payList.getOrgColumn(e.row, "payCondClass"));
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :환율 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_exchangeRate_canchange(obj:MaskEdit,  e:ChangeEventInfo)
{
	ds_poOrderInfo.setColumn(0, "exchangeRate", edt_exchangeRate.value  );
	for ( var row=0; row<ds_itemList.getRowCount(); row++ )  
	{ 
		//
		fn_calSale(row, "NOUSD")
	}
}



/*----------------------------------------------------------------------------------------------
 * 설명      :판매종료일자 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function fn_saleEdateCallBack()
{
	for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
	{
		fn_calSale(row, '');	  
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :매출처 팝업 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_salsplceNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "salsplceCd"), "");	// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "salsplceNm"), "");	// 전송할 파라미터 2
	arrParam[2] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "attachDept"), "");	// 전송할 파라미터 2

	if ( arrParam[2]  == '' ) 
	{
		gfn_alert("귀속부서를 선택하세요.");	// 변경된 내역이 없습니다.
		return;
	}


	var  arrRtn = gfn_dialog("SalesCustPop"				// dialogId
					   , "X_FSI::SalesCustPop.xfdl"		// 매출처 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	if ( arrRtn instanceof Object )
	{
		ds_poOrderInfo.setColumn(0, "salsplceCd", arrRtn["salsplceCd"]  );
		ds_poOrderInfo.setColumn(0, "salsplceNm", arrRtn["salsplceNm"]  );	
		
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :품의환율일자 선택시 환율조회
 *---------------------------------------------------------------------------------------------*/
function fn_exchangeRateDateCallBack()
{
	if ( gfn_nvl(ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "exchangeRateDate"),"") =="" || gfn_nvl(ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "amountUnit"),"") =="" ) 
	{
		return;
	}
	ds_search.setColumn(0, "exchangeRateDate", ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "exchangeRateDate"));
	ds_search.setColumn(0, "amountUnit", ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "amountUnit"));
    var strSvcID    = "getExchangeRate";
    var strURL      = "ft/ftp/getExchangeRate.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}



/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function fn_close(obj:Button, e:ClickEventInfo)
{
	if ( fv_focFlag == "NEW" ) 
	{
		this.parent.opener.fv_popIProcessCnt  = fv_iProcessCnt;
		this.parent.close();
	}
	else
	{
		this.parent.opener.fv_popIProcessCnt  = fv_iProcessCnt;
		this.parent.close();
	}
	return;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function IncomePoOrderDtl_onclose(obj:Form, e:CloseEventInfo)
{
	if ( fv_iProcessCnt > 0 )	//변경사항 있을시 부모창 재조회
	{
		if ( fv_focFlag == "NEW" ) 
		{
			opener.parent.fv_popIProcessCnt  = fv_iProcessCnt;
		}
		else
		{
			this.opener.fv_popIProcessCnt  = fv_iProcessCnt;
		}
		return;
	} 
	this.close();
}


function ds_otherAmtList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
 	if(e.columnid == "basiKind") 
	{
		var basiKind = gfn_nvl(ds_otherAmtList.getColumn(e.row, "basiKind"));
		if ( basiKind == "BL" )
		{
			ds_otherAmtList.setColumn( e.row, "basiNum", edt_blNum.value); 
			
		}
		else
		{
			ds_otherAmtList.setColumn( e.row, "basiNum", ds_otherAmtList.getOrgColumn(e.row, "basiNum"));
		}
	} 
	else if(e.columnid == "attachDept")  
	{
		if ( ds_otherAmtList.getColumn(e.row, "attachDept") != ds_poOrderInfo.getColumn(0, "attachDept") )
		{
			ds_otherAmtList.setColumn(e.row, "attachDept", ds_poOrderInfo.getColumn(0, "attachDept") );
		}
	}
	else if(e.columnid == "commClass")  	//수수료 구분 
	{
	     fv_otherCurrRow = e.row;
	     var commClass = ds_otherAmtList.getColumn(e.row, "commClass"); 
		 fn_getAccCdInfo( commClass, "COMM_CLASS" );
		 
		if ( commClass == "B-06" )	//부가세
		{
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "commType", "TAX"  );
		}
		else
		{
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "commType", "ITEM"  );
		}
		if ( commClass == "A-05" || commClass == "A-06" )	//적하보험료지불,통관경비지불:지불일때
		{
			var slipPublishDate = gfn_addDate(ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "slipPublishDate")(),1);
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "paySchdDate", slipPublishDate);
		} 
		else
		{
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "paySchdDate", "");
		}
		
		//수수료매출 금액  = 품목(원금금액krw sum) + 수수료(수수료금액 sum)
		if ( commClass == "C-01")
		{
			//alert(toNumber(ds_itemList.getSum("wonwtrAmtKrw")) +"//"+ toNumber(ds_otherAmtList.getSum("commAmt")));
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "commAmt", toNumber(ds_itemList.getSum("wonwtrAmtKrw")) + toNumber(ds_otherAmtList.getSum("commAmt"))   );
		} 
		else
		{
			ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "commAmt", 0   );
		}
		
		
		setCalTaxAmt(e.row);	   //공급가,부가세 재계산
		var basiKind = gfn_nvl(ds_otherAmtList.getColumn(e.row, "basiKind"));
		if ( basiKind == "BL" )
		{
			ds_otherAmtList.setColumn( e.row, "basiNum", edt_blNum.value); 
			
		}
		else
		{
			ds_otherAmtList.setColumn( e.row, "basiNum", ds_otherAmtList.getOrgColumn(e.row, "basiNum"));
		}
		 
	}
	else if(e.columnid == "commAmt")  	//수수료금액
	{
		setCalTaxAmt(e.row);	   //공급가,부가세 재계산

	}
	else if(e.columnid == "taxCd")  	//과세유형
	{
		setCalTaxAmt(e.row);	   //,부가세 재계산
		var taxFlag = false;
        for ( var row=0; row<ds_itemList.getRowCount(); row++ )  
		{
			
			var taxYn = gfn_nvl(ds_itemList.getColumn(row, "taxYn"), "");
			if ( taxYn == "Y") 
			{
				taxFlag = true;
				break;
			}
		}
		var commClassB = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(e.row, "commClass"), ""),0,1);		// 수수료 유형
		var commClass = gfn_nvl(ds_otherAmtList.getColumn(e.row, "commClass"), "")
//			if ( taxFlag ) 	//과세
		//alert(commClass+"//"+commClassB+"//"+ds_otherAmtList.getColumn(e.row, "taxCd"));
		//if ( commClassB ="B") 	//과세
		//{			
		if ( taxFlag ) 	//과세	
		{
			if  ( commClass == "B-06" )	  //부가세
			{
				
			}
	
			if ( ds_otherAmtList.getColumn(e.row, "taxCd") ==  "72" || ds_otherAmtList.getColumn(e.row, "taxCd") ==  "77")	//공제매입
			{
				gfn_alert("불공제 면세는 선택할수 없습니다.");	// 변경된 내역이 없습니다.			    
				ds_otherAmtList.setColumn(e.row, "taxCd", "" );
				ds_otherAmtList.setColumn(e.row, "supplyPrice", "" );
				ds_otherAmtList.setColumn(e.row, "vatAmt", "" );
			}
			
		}
		else
		{
			if ( ds_otherAmtList.getColumn(e.row, "taxCd") ==  "50" || ds_otherAmtList.getColumn(e.row, "taxCd") ==  "52")	//과세유형:매입일반
			{
				gfn_alert("매입일반은 선택할수 없습니다.");	// 변경된 내역이 없습니다.			    
				ds_otherAmtList.setColumn(e.row, "taxCd", "" );
				ds_otherAmtList.setColumn(e.row, "supplyPrice", "" );
				ds_otherAmtList.setColumn(e.row, "vatAmt", "" );
			} 
		}
	}
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :공급가,부가세 재계산
 *---------------------------------------------------------------------------------------------*/
function setCalTaxAmt(currRow)
{
	var commAmt = toNumber(gfn_nvl(ds_otherAmtList.getColumn(currRow, "commAmt"),"0"));
	var taxFlag = false;
	for ( var row=0; row<ds_itemList.getRowCount(); row++ )  
	{
		
		var taxYn = gfn_nvl(ds_itemList.getColumn(row, "taxYn"), "");
		if ( taxYn == "Y") 
		{
			taxFlag = true;
			break;
		}
	}
	if ( commAmt <= 0 ) return;

	var commClassB = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(currRow, "commClass"), ""),0,1);		// 수수료 유형
	var commClass = gfn_nvl(ds_otherAmtList.getColumn(currRow, "commClass"), "")
//			if ( taxFlag ) 	//과세
	//alert(commClass+"//"+commClassB+"//"+ds_otherAmtList.getColumn(currRow, "taxCd"));
	
	if ( taxFlag ) 	//과세
	//if ( commClassB ="B") 	//과세
	{
		if ( ds_otherAmtList.getColumn(currRow, "commClass") == "B-06" )	//부가세
		{
			ds_otherAmtList.setColumn(currRow, "vatAmt", commAmt);
			ds_otherAmtList.setColumn(currRow, "supplyPrice", (commAmt) *10);
		} 
		else
		{
			if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "50" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "52")	//과세유형:매입일반
			{
				ds_otherAmtList.setColumn(currRow, "supplyPrice", (commAmt) );
				ds_otherAmtList.setColumn(currRow, "vatAmt", (commAmt/10));
			} 
			else if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "72" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "77")	//공제매입
			{
				
			}
			else if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "60" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "62")	//영세율매입
			{
				ds_otherAmtList.setColumn(currRow, "supplyPrice", commAmt );
				ds_otherAmtList.setColumn(currRow, "vatAmt", 0);
			}
			else if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "91" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "92")	//매입계산서
			{
				ds_otherAmtList.setColumn(currRow, "supplyPrice", commAmt );
			}
		}
	} 
	else	//면세
	{
		if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "72" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "77")	//공제매입
		{
			ds_otherAmtList.setColumn(currRow, "supplyPrice", (commAmt-commAmt/10) );
			ds_otherAmtList.setColumn(currRow, "vatAmt", (commAmt/10));
		}
		else if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "50" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "52")	//과세유형:매입일반
		{
		} 
		else if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "60" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "62")	//영세율매입
		{
			ds_otherAmtList.setColumn(currRow, "supplyPrice", commAmt );
			ds_otherAmtList.setColumn(currRow, "vatAmt", 0);
		}
		else if ( ds_otherAmtList.getColumn(currRow, "taxCd") ==  "91" || ds_otherAmtList.getColumn(currRow, "taxCd") ==  "92")	//매입계산서
		{
			ds_otherAmtList.setColumn(currRow, "supplyPrice", commAmt );
			ds_otherAmtList.setColumn(currRow, "vatAmt", 0);
		}
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :수수료구분 변경시 계정정보 가져오기
 *---------------------------------------------------------------------------------------------*/
function fn_getAccCdInfo(commClass, commFlag)
{
	ds_search.setColumn(0, "commClass", commClass);
	ds_search.setColumn(0, "commFlag", commFlag);
	if ( commFlag == "COMM_CLASS" )
	{
		var strSvcID    = "getAccCdInfo";
	}
	else
	{
		var strSvcID    = "getPrepayamtAccCdInfo";
	}
	
    var strURL      = "ft/ftp/getAccCdInfo.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :매입처 팝업 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_splrNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "splrCd"), "");		// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "splrNm"), "");		// 전송할 파라미터 2
	arrParam[2] = "10";	// 국내거래처
	var  arrRtn = gfn_dialog("ContrtPop"				// dialogId
					   , "X_FSI::ContrtPop.xfdl"		// 매출처 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	if ( arrRtn instanceof Object )
	{
		ds_poOrderInfo.setColumn(0, "splrCd", arrRtn["vdCd"]  );
		ds_poOrderInfo.setColumn(0, "splrNm", arrRtn["vdNmLoc"]  );	
		
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :SHIPPER(해외거래처) 팝업 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_shipperNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "shipper"), "");		// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_poOrderInfo.getColumn(e.row, "shipperNm"), "");		// 전송할 파라미터 2
	arrParam[2] = "20";	// 해외거래처
	var  arrRtn = gfn_dialog("ContrtPop"				// dialogId
					   , "X_FSI::ContrtPop.xfdl"		// 매출처 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	if ( arrRtn instanceof Object )
	{
		ds_poOrderInfo.setColumn(0, "shipper", arrRtn["vdCd"]  );
		ds_poOrderInfo.setColumn(0, "shipperNm", arrRtn["vdNmLoc"]  );	
		
	}			
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 매출수수료 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow7(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_commSals.insertRow(ds_commSals.getRowCount()+1)
	if ( edt_poProposalNum.value != "" ) {	 
		ds_commSals.setColumn(insRow, "poOrderNum", edt_poOrderNum.value  );
		ds_commSals.setColumn(insRow, "custNm", ds_poOrderInfo.getColumn(0, "salsplceNm")   );
		ds_commSals.setColumn(insRow, "cust", ds_poOrderInfo.getColumn(0, "salsplceCd")   );
		
		ds_commSals.setColumn(insRow, "journalzAcct", "FTIS12"   );
		ds_commSals.setColumn(insRow, "journalzAcctNm", "채권채무가계정/미착품"   );
		ds_commSals.setColumn(insRow, "totQuantity", ds_poOrderInfo.getColumn(0, "totQuantity")   );
	}		
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 매출수수료 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow7(obj:Button,  e:ClickEventInfo)
{
	var chkCnt = ds_commSals.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		
		return;
	}

	for(var i = ds_commSals.getRowCount()-1 ; i >= 0 ; i--)
	{
		if (ds_commSals.getColumn(i, "chk") == 1)
		{
			if ( gfn_nvl(ds_commSals.getColumn(i, "status"),"") ==  "B"  )	//매출마감
			{
				gfn_alert("매출마감 상태 입니다. 삭제 할 수 없습니다.");
				ds_commSals.setColumn(i, "chk", 0);
				return; 
			}

			if ( gfn_nvl(ds_commSals.getColumn(i, "status"),"") ==  "A" )	//확정
			{
				gfn_alert("확정상태 입니다. 삭제 할 수 없습니다.");
				ds_commSals.setColumn(i, "chk", 0);
				return; 
			}

			ds_commSals.deleteRow(i);
		}
	}		
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매출수수료 탭 화성화
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage7_grd_commSals_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row <= -1) return;
    var sColumn = gfn_getCellColId(obj, e.col);

	//Expand 클릭시
	if (sColumn == "journalzAcctNm")	//분개계정 컬럼 클릭시
	{
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_commSals.getColumn(e.row, "journalzAcctNm"), "");	// 전송할 파라미터 1
		var arrRtn = gfn_dialog("AcctSearchPop"				// dialogId
						   , "X_FSI::AcctSearchPop.xfdl"		// 계정찾기 팝업 호출
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);

		if ( arrRtn instanceof Object )
		{
			ds_commSals.setColumn(ds_commSals.rowposition, "journalzAcct", arrRtn["acctCd"]  );
			ds_commSals.setColumn(ds_commSals.rowposition, "journalzAcctNm", arrRtn["acctNm"]  );	
		}
	}
	else if (sColumn == "custNm")	//실지급처(매입처) 컬럼 클릭시
	{
		var arrParam = new Array();
		arrParam[0] = gfn_nvl(ds_commSals.getColumn(e.row, "cust"), "");	// 전송할 파라미터 1
		arrParam[1] = gfn_nvl(ds_commSals.getColumn(e.row, "custNm"), "");	// 전송할 파라미터 2
		var  arrRtn = gfn_dialog("SalesCustPop"				// dialogId
						   , "X_FSI::SalesCustPop.xfdl"		// 매출처 팝업 호출
						   , {fv_Contents:arrParam}			// 배열
						   , null, null, null, null, null, false, true, -1);
		if ( arrRtn instanceof Object )
		{
			ds_commSals.setColumn(ds_commSals.rowposition, "cust", arrRtn["salsplceCd"]  );
			ds_commSals.setColumn(ds_commSals.rowposition, "custNm", arrRtn["salsplceNm"]  );	
		}	
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 판매유형 변경시
 *---------------------------------------------------------------------------------------------*/
function cbo_saleType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	
	if ( ds_poOrderInfo.getColumn(ds_poOrderInfo.rowposition, "saleType") == "40" ) 	  //수수료 매출일때
	{	
		Tab00.tabpage7.enable = true;
	}			
	else 
	{
		Tab00.tabpage7.enable = false;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타산급금 탭 저장
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage6_btn_etcPrepayamtSave_onclick(obj:Button,  e:ClickEventInfo)
{
	if ( !fn_chk() ) return;	//선급금탭 체크
	
	if (!gfn_confirm("confirm.before.save")) return false;
	
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/saveEtcPrepayamtList.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_etcPrepayamtList=ds_etcPrepayamtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타산급금 탭 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage6_grd_etcPrepayamtList_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	fnChkEtcPrepayDum();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타산급금 탭 클릭시 같은 계정 체크
 *---------------------------------------------------------------------------------------------*/
function fnChkEtcPrepayDum()
{
	var focDrAcctCd ="";
	var focCrAcctCd ="";
	var chkDiff = true;
	for ( var i=0; i<ds_etcPrepayamtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "chk"),"") ==  "1" )
		{
			focDrAcctCd = ds_etcPrepayamtList.getColumn(i, "drAcctCd")
			focCrAcctCd = ds_etcPrepayamtList.getColumn(i, "crAcctCd")
			break;
		}
	}
	
	for ( var i=0; i<ds_etcPrepayamtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "chk"),"") ==  "1" )
		{
			//alert(focDrAcctCd +"//"+ ds_etcPrepayamtList.getColumn(i, "drAcctCd") +"--"+ focCrAcctCd  +"//"+ ds_etcPrepayamtList.getColumn(i, "crAcctCd"));
			if ( focDrAcctCd != ds_etcPrepayamtList.getColumn(i, "drAcctCd") || focCrAcctCd != ds_etcPrepayamtList.getColumn(i, "crAcctCd") )
			{
				//alert( " roof "+ds_etcPrepayamtList.getColumn(i, "drAcctCd") +"//"+ds_etcPrepayamtList.getColumn(i, "crAcctCd") 			      );
				gfn_alert("서로 다른 계정은 전표처리 안됨니다.");	// 변경된 내역이 없습니다.			    
				ds_etcPrepayamtList.setColumn(i,"chk", 0);
				return false;
				//break;
			}
		}
	}
	
	return chkDiff;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타산급금 탭 헤더 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage6_grd_etcPrepayamtList_onheadclick(obj:Grid, e:GridClickEventInfo)
{
    if (obj.readonly == true) return;
    if (e.cell != 1) return;
	fn_setGridItemCheckAll(obj, e);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타산급금 탭 클릭시 전체체크 및 같은 계정 체크
 *---------------------------------------------------------------------------------------------*/
function fn_setGridItemCheckAll (obj:Grid, e:GridClickEventInfo)
{
	var objDs = eval(obj.binddataset);


	// 헤더의 체크박스에 체크 해제
	if (obj.getCellProperty("head", 1, "displaytype") == "checkbox") {
		if (obj.getCellProperty("head", 1, "text") == "1") {
			obj.setCellProperty("head", 1, "text", '0');
			for (var i = 0; i < objDs.rowcount; i++) {
				if ( !fnChkEtcPrepayDum() )
				{
					for ( var i=0; i<objDs.getRowCount(); i++ ) {
						objDs.setColumn(i,"chk", 0);
					}
				}

				objDs.setColumn(i, "chk", '0');
			}
		} else {
			obj.setCellProperty("head", 1, "text", '1');
			for (var i = 0; i < objDs.rowcount; i++) {
				if ( !fnChkEtcPrepayDum() )
				{
					for ( var i=0; i<objDs.getRowCount(); i++ ) {
						objDs.setColumn(i,"chk", 0);
					}
				}			
				objDs.setColumn(i, "chk", '1');
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료 탭 저장버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage5_btn_otherAmtList_onclick(obj:Button,  e:ClickEventInfo)
{
	
 	if (  !gfn_dsIsUpdated(ds_poOrderInfo) &&  !gfn_dsIsUpdated(ds_otherAmtList) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}

	if ( !fn_chkOtherAmt("SAVE") ) return;	//수수료탭 체크
	
	if (!gfn_confirm("confirm.before.save")) return false;
	
    var strSvcID    = "saveExchange";
    var strURL      = "ft/ftp/poOrderMst/saveOtherAmtList.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_otherAmtList=ds_otherAmtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료 탭 원시전표 불러오기 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage5_btn_slipCall_onclick(obj:Button,  e:ClickEventInfo)
{
	var chkCnt = ds_otherAmtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}
	
/*
	if ( !fnChkOtherAmtDum() )
	{
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			ds_otherAmtList.setColumn(i,"chk", 0);
		}
		return;
	}
*/	
	var totChkCnt = 0;
	var totCommAmt = 0;
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
	
		var commAmt = toNumber(gfn_nvl(ds_otherAmtList.getColumn(i, "commAmt"),"0"));
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			totChkCnt++;
			var commClass = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형 
					
			//(환급)선급금정산 -- > 가수금. 선급금 둘다 관련
			//(환급)미착정산,수수료매출정산 --> 가수금 관련			
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "B-22" )		//(환급)미착정산
			{
				gfn_alert("(환급)미착정산은  선급금 대체 할수 없습니다.");
				ds_otherAmtList.setColumn(i, "chk", "0");
				return;
			}
			else if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "C-01" )		//수수료매출정산
			{
				gfn_alert("(환급)미착정산은  선급금 대체 할수 없습니다.");
				ds_otherAmtList.setColumn(i, "chk", "0");
				return;
			} 
			if ( commClass != "B" ) 	//미착생성만 체크가능 
			{
				gfn_alert("미착생성만 선급금 대체 할수 있습니다.");
				ds_otherAmtList.setColumn(i, "chk", "0");
				return;
			}
			
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다.");
				ds_otherAmtList.setColumn(i, "chk", "0");
				return; 
			}
			
			totCommAmt+=commAmt
		}
	}
	 
	if ( totChkCnt !=1 )
	{
		gfn_alert("전표불러오기는 1건만 체크 가능합니다.");
		ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "chk", "0");
		return;
	}
	var arrParam = new Array();
	arrParam[0] = totCommAmt;	// 전송할 파라미터 1
	arrParam[1] = ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "poOrderNum");	// 전송할 파라미터 1
	var  arrRtn = gfn_dialog("SlipCallPop"				// dialogId
					   , "X_FTP::SlipCallPop.xfdl"		// 원시전표불러오기 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{
		//alert(arrRtn["poOrderNum"] +"//"+arrRtn["adjustSeq"] +"//"+arrRtn["prepayamtAmt"] +"//"+ arrRtn["fiscalSlipNum"])
		
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			var commAmt = toNumber(gfn_nvl(ds_otherAmtList.getColumn(i, "commAmt"),"0"));
			var  prepayamtAmt = toNumber(gfn_nvl(arrRtn["prepayamtAmt"],"0"));
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" ) 
			{
				var commClass = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형
				if ( commClass == "B" ) 	//미착생성만 체크가능
				{
					totCommAmt+=commAmt;
					//alert(arrRtn["poOrderNum"] +"//"+arrRtn["adjustSeq"] +"//"+arrRtn["poOrderNum"]);
					ds_otherAmtList.setColumn(i, "orgFiscalSlipNum", arrRtn["fiscalSlipNum"] );
					ds_otherAmtList.setColumn(i, "prepayPoOrderNum", arrRtn["poOrderNum"] );
					ds_otherAmtList.setColumn(i, "adjustSeq", arrRtn["adjustSeq"] );
					ds_otherAmtList.setColumn(i, "commAmt", arrRtn["prepayamtAmt"] );
					ds_otherAmtList.setColumn(i, "altSlipClass", "1" );		//대체 전표 구분 : 선급금: 1, 가수금 2
				}
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 수수료 탭 수입부대비용 정산 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage5_btn_otherAmtAdjust_onclick(obj:Button,  e:ClickEventInfo)
{
	//v_ds_check 미사용시 변경사항 체크
 	if (  !gfn_dsIsUpdated(ds_otherAmtList) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	if ( !fn_chkOtherAmt() ) return;	//수수료탭 체크

	var chkCnt = ds_otherAmtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}

	if ( !fnChkOtherAmtDum() )
	{
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			ds_otherAmtList.setColumn(i,"chk", 0);
		}
		return;
	}
	
	var otherAmtSeqs ="";
	var miChakFlag ="";
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			//alert(ds_otherAmtList.getColumn(i, "orgFiscalSlipNum"));
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "otherAmtSeq"),"") ==  "" )	//전표확정
			{
				gfn_alert("저장 후 회계전표 IF하세요.");
				return;
			}
			
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다.");
				return; 
			}
			otherAmtSeqs+= "'"+ds_otherAmtList.getColumn(i, "otherAmtSeq")+"',";
		}
	}
	
	
	otherAmtSeqs = otherAmtSeqs.substring(0, otherAmtSeqs.length-1);
	ds_search.setColumn(0, "otherAmtSeqs", otherAmtSeqs );	
	
	ds_search.setColumn(0, "miChakFlag", "A" );		//반환에 대한 수입부대비용 정산

	if (!gfn_confirm("confirm.before.save")) return false;
	
    var strSvcID    = "createFiscalSlip";
    var strURL      = "ft/ftp/poOrderMst/createFiscalSlipIf.xdo";
    var strInDs     = "ds_search=ds_search ds_otherAmtList=ds_otherAmtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매출수수료 탭 저장버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage7_btn_commSalsSave_onclick(obj:Button,  e:ClickEventInfo)
{
 	if (  !gfn_dsIsUpdated(ds_commSals) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}

	var chkCnt = ds_commSals.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	} 
	
	for ( var i=0; i<ds_commSals.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_commSals.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( gfn_nvl(ds_commSals.getColumn(i, "status"),"") !=  "" )	//상태 :저장
			{
				gfn_alert("저장 상태에서 가능합니다.");
				return;
			}
		}
	}
		
	if ( !fn_chkCommSals() ) return;	//매출수수료탭 체크
	
	if (!gfn_confirm("confirm.before.save")) return false;
	
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/saveCommSalsList.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_commSals=ds_commSals:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);		
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매출수수료탭 저장시 체크
 *---------------------------------------------------------------------------------------------*/
function fn_chkCommSals()
{
	for ( var i=0; i<ds_commSals.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_commSals.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( gfn_nvl(ds_commSals.getColumn(i, "journalzAcct"),"") ==  "" )	//분개계정
			{
				gfn_alert("분개계정 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_otherAmtList.setCellPos(Tab00.tabpage7.grd_otherAmtList.getBindCellIndex("Body", "journalzAcctNm"));
				Tab00.tabpage7.grd_otherAmtList.setFocus();
				Tab00.tabpage7.grd_otherAmtList.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "cust"),"") ==  "" )	//거래처
			{
				gfn_alert("거래처 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "custNm"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "uprice"),"") ==  "" )	//단가
			{
				gfn_alert("단가 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "uprice"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "supplyAmt"),"") ==  "" )	//공급가액
			{
				gfn_alert("공급가액 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "supplyAmt"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "tax"),"") ==  "" )	//세액
			{
				gfn_alert("세액 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "tax"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			/*
			if ( gfn_nvl(ds_commSals.getColumn(i, "withdrawSchdDate"),"") ==  "" )	//회수예정일
			{
				gfn_alert("회수예정일 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "withdrawSchdDate"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "occurDate"),"") ==  "" )	//발생일자
			{
				gfn_alert("발생일자 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "occurDate"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "reservInfo"),"") ==  "" )	//예약정보
			{
				gfn_alert("예약정보 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "reservInfo"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "occurType"),"") ==  "" )	//발생유형
			{
				gfn_alert("발생유형 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "occurType"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "remark"),"") ==  "" )	//발생유형
			{
				gfn_alert("비고 은(는) 필수 입력 항목입니다.");
				ds_commSals.rowposition = i;
				Tab00.tabpage7.grd_commSals.setCellPos(Tab00.tabpage7.grd_commSals.getBindCellIndex("Body", "remark"));
				Tab00.tabpage7.grd_commSals.setFocus();
				Tab00.tabpage7.grd_commSals.showEditor(); 
				return false;
			}	
			*/
		}
	}
	return true;
 	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매출수수료탭 확정버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage7_btn_commSalsConfirm_onclick(obj:Button,  e:ClickEventInfo)
{
 	if (  !gfn_dsIsUpdated(ds_commSals) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 
	var chkCnt = ds_commSals.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}

	for ( var i=0; i<ds_commSals.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_commSals.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( gfn_nvl(ds_commSals.getColumn(i, "status"),"") ==  "A" )	//상태 :확정
			{
				gfn_alert("이미 확정 상태입니다.");
				return;
			}
		}
	}		
	
	if ( !fn_chkCommSals() ) return;	//매출수수료탭 체크
	
	if (!gfn_confirm("확정 하시겠습니까?")) return false;
	
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/saveCommSalsConfirm.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_commSals=ds_commSals:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);		
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매출수수료탭 수수료매출 등록 클릭시
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage7_btn_salsReg_onclick(obj:Button,  e:ClickEventInfo)
{
 	if (  !gfn_dsIsUpdated(ds_commSals) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}

	var chkCnt = ds_commSals.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}
	var seqs ="";
	for ( var i=0; i<ds_commSals.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_commSals.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( gfn_nvl(ds_commSals.getColumn(i, "status"),"") !=  "A" )	//상태 :확정
			{
				gfn_alert("확정상태에서 수수료매출등록 가능합니다.");
				return;
			}
			if ( gfn_nvl(ds_commSals.getColumn(i, "status"),"") ==  "B" )	//상태 :매출마감
			{
				gfn_alert("이미 매출마감 되었습니다.");
				return;
			}
			seqs+= "'"+ds_commSals.getColumn(i, "seq")+"',";
		}
	}	
	seqs = seqs.substring(0, seqs.length-1);
	ds_search.setColumn(0, "seqs", seqs );
	
			
	if ( !fn_chkCommSals() ) return;	//매출수수료탭 체크
	
	if (!gfn_confirm("수수료매출(마감) 등록 하시겠습니까?")) return false;
	
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/saveSalsReg.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_commSals=ds_commSals:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);		 
}


function ds_commSals_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid == "supplyAmt") 
	{
		fv_currRow = e.row;
		var supplyAmt = gfn_nvl(ds_commSals.getColumn(fv_currRow, "supplyAmt"));

		ds_commSals.setColumn(e.row, "tax", supplyAmt / 10 );
		ds_commSals.setColumn(e.row, "uprice", supplyAmt + toNumber(ds_commSals.getColumn(e.row, "tax")) );
		
	}	
}

function Tab00_tabpage7_btn_fiscalSlipCancel_onclick(obj:Button,  e:ClickEventInfo)
{
	if (  !gfn_dsIsUpdated(ds_commSals) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}

	var chkCnt = ds_commSals.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}

	for ( var i=0; i<ds_commSals.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_commSals.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( gfn_nvl(ds_commSals.getColumn(i, "status"),"") !=  "B" )	//상태 :매출마감
			{
				gfn_alert("매출마감시에 취소 가능합니다.");
				return;
			}
		}
	}	
			
	if ( !fn_chkCommSals() ) return;	//매출수수료탭 체크
	
	if (!gfn_confirm("수수료매출(마감) 취소 하시겠습니까?")) return false;
	
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/saveSalsRegCancel.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_commSals=ds_commSals:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);		
}

function Tab00_tabpage7_grd_commSals_onheadclick(obj:Grid, e:GridClickEventInfo)
{
    if (obj.readonly == true) return;
    if (e.cell != 1) return;
	fn_setGridCommCheckAll(obj, e);	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 기타산급금 탭 클릭시 전체체크 및 같은 계정 체크
 *---------------------------------------------------------------------------------------------*/
function fn_setGridCommCheckAll (obj:Grid, e:GridClickEventInfo)
{
	var objDs = eval(obj.binddataset);


	// 헤더의 체크박스에 체크 해제
	if (obj.getCellProperty("head", 1, "displaytype") == "checkbox") {
		if (obj.getCellProperty("head", 1, "text") == "1") {
			obj.setCellProperty("head", 1, "text", '0');
			for (var i = 0; i < objDs.rowcount; i++) {
				objDs.setColumn(i, "chk", '0');
			}
		} else {
			obj.setCellProperty("head", 1, "text", '1');
			for (var i = 0; i < objDs.rowcount; i++) {
				objDs.setColumn(i, "chk", '1');
			}
		}
	}
}

function btn_fiscalSlipCancel_onclick(obj:Button,  e:ClickEventInfo)
{
	//v_ds_check 미사용시 변경사항 체크
 	if (  !gfn_dsIsUpdated(ds_otherAmtList) )  
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	if (!gfn_confirm("confirm.before.save")) return false;
	
	//ds_search.setColumn(0, "flag", fv_flag);
    var strSvcID    = "cancelEtcFiscalSlip";
    var strURL      = "ft/ftp/poOrderMst/cancelFiscalSlipIf.xdo";
    var strInDs     = "ds_search=ds_search ds_otherAmtList=ds_otherAmtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);		
}

function Tab00_tabpage5_btn_gwDraft_onclick(obj:Button,  e:ClickEventInfo)
{
	//v_ds_check 미사용시 변경사항 체크
 	if (  !gfn_dsIsUpdated(ds_otherAmtList) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	

	var chkCnt = ds_otherAmtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}
/* 
	if ( !fnChkOtherAmtDum() )	//서로 다른 계정 체크
	{
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			ds_otherAmtList.setColumn(i,"chk", 0);
		}
		return;
	}
*/	
	var otherAmtSeqs ="";
	var processFlag ="";
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			if ( ds_otherAmtList.getColumn(i, "signProgressStatus") ==  "DRAFT" ) {
				gfn_alert("상신중입니다.");	//
				return;
			}
			if ( ds_otherAmtList.getColumn(i, "signProgressStatus") ==  "COMPLETE" ) {
				gfn_alert("승인완료 상태 입니다.");	//
				return;
			}
		
			var commClass = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형
			var orgFiscalSlipNum = gfn_nvl(ds_otherAmtList.getColumn(i, "orgFiscalSlipNum"),"") ;		// 원시전표번호
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "B-21" )	   //환급정산
			{
				processFlag = "C";
				if ( orgFiscalSlipNum == "" ) 
				{
					gfn_alert("원시전표번호가 없습니다. 원시전표 불러오기 버튼 클릭 후 원시전표번호를 선택해 주세요");
					return;
				}
			} 
			else if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "C-01" )	   //수수료매출정산
			{
				processFlag = "D"
				var orgFiscalSlipNum = gfn_nvl(ds_otherAmtList.getColumn(i, "orgFiscalSlipNum"),"") ;		// 원시전표번호
				if ( orgFiscalSlipNum == "" || gfn_nvl(ds_otherAmtList.getColumn(i, "adjustSeq"), "") =="" ) 
				{
					gfn_alert("가수금전표번호가 없습니다. 가수금 불러오기 버튼 클릭 후 가수금 전표번호를 선택해 주세요");
					return;
				}
				
			} 
			else 	//미착
			{
				if ( commClass == "B" )	   //미착
				{
					//alert(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "")+"//"+altSlipClass+"//"+orgFiscalSlipNum+"//"+ds_otherAmtList.getColumn(i, "adjustSeq"));
					var altSlipClass = gfn_nvl(ds_otherAmtList.getColumn(i, "altSlipClass"), "");
					
					if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "B-21" )	   //선급금 정산
					{
						if ( orgFiscalSlipNum == "" || gfn_nvl(ds_otherAmtList.getColumn(i, "adjustSeq"), "") =="" ) 
						{
							gfn_alert("원시전표번호가 없습니다. 원시전표,가수금 불러오기 버튼 클릭 후 전표번호를 선택해 주세요");
							//gfn_alert("가수금전표번호가 없습니다. 가수금 불러오기 버튼 클릭 후 가수금 전표번호를 선택해 주세요");
							return;
						}
					} 
					else if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") == "B-22" )	   //미착정산
					{
						if ( orgFiscalSlipNum == "" || gfn_nvl(ds_otherAmtList.getColumn(i, "adjustSeq"), "") =="" ) 
						{
							gfn_alert("가수금전표번호가 없습니다. 가수금 불러오기 버튼 클릭 후 가수금 전표번호를 선택해 주세요");
							return;
						}
					}
				} 
				processFlag = commClass;
			}
			otherAmtSeqs+= "'"+ds_otherAmtList.getColumn(i, "otherAmtSeq")+"',";
			
			
		}
	}

	if ( !fn_chkOtherAmt() ) return;	//수수료탭 체크

	var taxFlag = "N";
	for ( var row=0; row<ds_itemList.getRowCount(); row++ )  
	{
		
		var taxYn = gfn_nvl(ds_itemList.getColumn(row, "taxYn"), "");
		if ( taxYn == "Y") 
		{
			taxFlag = "Y";
			break;
		}
	} 
		
	otherAmtSeqs = otherAmtSeqs.substring(0, otherAmtSeqs.length-1);
	//alert("otherAmtSeqs :"+otherAmtSeqs);
	ds_search.setColumn(0, "otherAmtSeqs", otherAmtSeqs );	
	
	//alert(processFlag+"//"+otherAmtSeqs);
	ds_search.setColumn(0, "processFlag", processFlag );	
	ds_search.setColumn(0, "taxFlag", taxFlag );	
	ds_search.setColumn(0, "draft", "Y" );	
	

	if (!gfn_confirm("결재상신 하시겠습니까?")) return false;
	
	fv_draftFlag = "OTHER";
	
    var strSvcID    = "createDraftFiscalSlip";
    var strURL      = "ft/ftp/poOrderMst/createFiscalSlipIf.xdo";
    var strInDs     = "ds_search=ds_search ds_otherAmtList=ds_otherAmtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

function fn_draft()
{
	
	//그룹웨어에 전달할 파라메터 생성
	var arrParams	= SCGw.newParams ();
	
	//(필수) 결재문서 서비스명 - 문서양식별로 설정된 서비스명 설정
	SCGw.setParams (arrParams, SCGw.GW_SERVICE_NAME, "HWRC_FC_FTP_SLIP_SIGN_REQ");

	//(필수) 본문 URL : (주의) .do로 호출해야 하며 GET 방식으로 파라미터를 전달 (id라는 key는 사용 불가)
	var sBodyUrl = "/ft/ftp/poOrderMst/makeSlipGwDraftContent.do?slipNums=" + fv_slipNums
 										  +"&svc="+application.services["svc"].url
										  ; 
	SCGw.setParams (arrParams, SCGw.GW_BODY_URL, sBodyUrl);

	//(필수) 본문 제목 – 문서양식 별로 설정된 업무명
	SCGw.setParams (arrParams, SCGw.GW_BODY_TITLE, "수수료 상신");

	//(필수)문서 방향 : 가로 또는 세로 방향 (GW_VERTICAL, GW_HORIZONTAL)
	SCGw.setParams (arrParams, SCGw.GW_PORTRAIT, SCGw.VERTICAL);
	
	//(선택)첨부문서 목록 : json 형태 문자열
	//SCGw.setParams (arrParams, SCGw.GW_ATTACH_LIST, fv_attachList);

	//(선택)Client Id : 결재 instance id와 연관을 맺기위한 업무별 ID로 unique key를 이용, 생략하면 상신시각이 됨(최대 40 byte)
	//SCGw.setParams (arrParams, SCGw.GW_CLIENT_ID, edt_id.value);

	//그룹웨어 상신 팝업을 호출한다.
	SCGw.sendDraft (this, arrParams);	
		
	//상신후 그냥 닫았을때 변경된 내역이 없어서 인식 못하는 부분 수정	
	ds_otherAmtList.updatecontrol = false;
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			bSucc = ds_otherAmtList.setRowType(i, Dataset.ROWTYPE_UPDATE);
		}
	}
	ds_otherAmtList.updatecontrol = true;
}

/**
 * 그룹웨어 결재진행상태 버튼 클릭 시 결재진행상태 팝업을 호출한다.
 * (참고)결재상세 팝업을 통해 볼 수 있으므로 이 버튼은 사용하지 않는다.
 * @param obj Button
 * @param e ClickEventInfo
 * @return none
 */
function btn_gwStatus_onclick(obj:Button,  e:ClickEventInfo)
{
	//그룹웨어 결재진행상태 팝업을 호출한다.
	SCGw.sendStatusView (this, ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "signInstanceId"));
}
 



/**
 * 그룹웨어 상신 처리 후 반환되는 Instance Id를 처리한다. (업무 테이블에 update) 
 * (중요) 이 함수는 SCGw에서 호출되므로 필히 선언되어야 한다.
 * @param instanceId
 * @return none
 */
function scgw_ondraftnotify(instanceId)
{
	//alert(fv_draftFlag + "instance id=[" + instanceId + "]"+" SCGw.GW_DRAFT_STATUS :"+SCGw.GW_DRAFT_STATUS);
	if ( fv_draftFlag == "OTHER" )
	{
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
			{
				ds_otherAmtList.setColumn(i, "signInstanceId", instanceId);	 //결재InstanceId 설정
				ds_otherAmtList.setColumn(i, "signProgressStatus", SCGw.GW_DRAFT_STATUS);	 //결재진행상태를 상신으로 설정
			}
		}

		fn_otherDraft ();	 										//결재정보 저장
	}
	else
	{
		//alert("fv_draftFlag : "+fv_draftFlag);
		for ( var i=0; i<ds_etcPrepayamtList.getRowCount(); i++ ) {
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "chk"),"") ==  "1" )
			{
				ds_etcPrepayamtList.setColumn(i, "signInstanceId", instanceId);	 //결재InstanceId 설정
				ds_etcPrepayamtList.setColumn(i, "signProgressStatus", SCGw.GW_DRAFT_STATUS);	 //결재진행상태를 상신으로 설정
			}
		}

		fn_etcDraftSave ();	 										//결재정보 저장
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 그룹웨어 연동 버튼을 설정
 *---------------------------------------------------------------------------------------------*/
function ds_proposalList_canrowposchange(obj:Dataset, e:DSRowPosChangeEventInfo)
{
    //그룹웨어 연동 버튼을 설정
    SCGw.setUserButton (this, fv_option, ds_proposalList.getColumn(e.newrow, "signProgressStatus"));	
}

//=========================================================================================
// 수수료상신
//=========================================================================================
function fn_otherDraft(obj:Button,  e:ClickEventInfo)
{
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/saveOtherAmtDraft.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_otherAmtList=ds_otherAmtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

//=========================================================================================
// 기타선급금상신
//=========================================================================================
function fn_etcDraftSave(obj:Button,  e:ClickEventInfo)
{
    var strSvcID    = "save";
    var strURL      = "ft/ftp/poOrderMst/saveEtcAmtDraft.xdo"; 
    var strInDs     = "ds_search=ds_search ds_poOrderInfo=ds_poOrderInfo:U ds_etcPrepayamtList=ds_etcPrepayamtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/**
 * 그룹웨어 결재상세 버튼 클릭 시 결재상세 팝업을 호출한다.
 * @param obj Button
 * @param e ClickEventInfo
 * @return none
 */
function Tab00_tabpage5_btn_gwDetail_onclick(obj:Button,  e:ClickEventInfo)
{
	var signInstanceId = gfn_nvl(ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "signInstanceId"), "");
	if ( signInstanceId == "" ) return;
	
	SCGw.sendDetailView (this, ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "signInstanceId"));
}


function Tab00_tabpage6_btn_gwDraft2_onclick(obj:Button,  e:ClickEventInfo)
{
	//v_ds_check 미사용시 변경사항 체크
 	if (  !gfn_dsIsUpdated(ds_etcPrepayamtList) )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	var chkCnt = ds_etcPrepayamtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}
 	if ( !fn_chk() ) return;	//선급금탭 체크
	if ( !fnChkEtcPrepayDum() ) return;

	var adjustSeqs ="";
	for ( var i=0; i<ds_etcPrepayamtList.getRowCount(); i++ ) {
		if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "chk"),"") ==  "1" )
		{	
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "signProgressStatus"),"")  ==  "DRAFT" ) {
				gfn_alert("상신중입니다.");	//
				return;
			}
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "signProgressStatus"),"")  ==  "COMPLETE" ) {
				gfn_alert("승인완료 상태 입니다.");	//
				return;
			}
		
		
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "adjustSeq"),"") ==  "" )	//전표확정
			{
				gfn_alert("저장후 회계전표 IF하세요.");
				return;
			}
			
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다.");
				return;
			}
			if ( gfn_nvl(ds_etcPrepayamtList.getColumn(i, "slipStatus"),"") ==  "A" )	//전표요청
			{
				gfn_alert("전표 요청상태 입니다.");
				return;
			}			
			adjustSeqs+= "'"+ds_etcPrepayamtList.getColumn(i, "adjustSeq")+"',";
		}
	}
	adjustSeqs = adjustSeqs.substring(0, adjustSeqs.length-1);
	ds_search.setColumn(0, "adjustSeqs", adjustSeqs );
	ds_search.setColumn(0, "draft", "Y" );	
	
	if (!gfn_confirm("결재상신 하시겠습니까?")) return false;
	fv_draftFlag = "ETC";
	//ds_search.setColumn(0, "flag", fv_flag);
    var strSvcID    = "createEtcDraftFiscalSlip";
    var strURL      = "ft/ftp/poOrderMst/createEtcFiscalSlipIf.xdo";
    var strInDs     = "ds_search=ds_search ds_etcPrepayamtList=ds_etcPrepayamtList:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 기타선급금 그룹웨어 연동 버튼을 설정
 *---------------------------------------------------------------------------------------------*/
function fn_etcDraft()
{
	//그룹웨어에 전달할 파라메터 생성
	var arrParams	= SCGw.newParams ();
	
	//(필수) 결재문서 서비스명 - 문서양식별로 설정된 서비스명 설정
	SCGw.setParams (arrParams, SCGw.GW_SERVICE_NAME, "HWRC_FC_FTP_SLIP_SIGN_REQ");

	//(필수) 본문 URL : (주의) .do로 호출해야 하며 GET 방식으로 파라미터를 전달 (id라는 key는 사용 불가)
	//alert("fv_slipNums :"+fv_slipNums);
	var sBodyUrl = "/ft/ftp/poOrderMst/makeEtcSlipGwDraftContent.do?slipNums=" + fv_slipNums
 										  +"&svc="+application.services["svc"].url
										  ; 
	SCGw.setParams (arrParams, SCGw.GW_BODY_URL, sBodyUrl);

	//(필수) 본문 제목 – 문서양식 별로 설정된 업무명
	SCGw.setParams (arrParams, SCGw.GW_BODY_TITLE, "선급금 상신");

	//(필수)문서 방향 : 가로 또는 세로 방향 (GW_VERTICAL, GW_HORIZONTAL)
	SCGw.setParams (arrParams, SCGw.GW_PORTRAIT, SCGw.VERTICAL);
	
	//(선택)첨부문서 목록 : json 형태 문자열
	//SCGw.setParams (arrParams, SCGw.GW_ATTACH_LIST, fv_attachList);

	//(선택)Client Id : 결재 instance id와 연관을 맺기위한 업무별 ID로 unique key를 이용, 생략하면 상신시각이 됨(최대 40 byte)
	//SCGw.setParams (arrParams, SCGw.GW_CLIENT_ID, edt_id.value);

	//그룹웨어 상신 팝업을 호출한다.
	SCGw.sendDraft (this, arrParams);	
}
function Tab00_tabpage6_btn_gwDetail2_onclick(obj:Button,  e:ClickEventInfo)
{
	var signInstanceId = gfn_nvl(ds_etcPrepayamtList.getColumn(ds_etcPrepayamtList.rowposition, "signInstanceId"), "");
	if ( signInstanceId == "" ) return;
	
	SCGw.sendDetailView (this, ds_etcPrepayamtList.getColumn(ds_etcPrepayamtList.rowposition, "signInstanceId"));	
}
/*----------------------------------------------------------------------------------------------
 * 설명      :품의 화폐단위 변경시 환율조회
 *---------------------------------------------------------------------------------------------*/
function cbo_amountUnit_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_exchangeRateDateCallBack();
}

/*----------------------------------------------------------------------------------------------
 * 설명      :가수금 불러오기
 *---------------------------------------------------------------------------------------------*/
function Tab00_tabpage5_btn_suspenseCall_onclick(obj:Button,  e:ClickEventInfo)
{
	var chkCnt = ds_otherAmtList.findRow("chk",'1');
	//체크된 항목이 하나도 없으면 경고를 한다.
	if(chkCnt<0)
	{
		gfn_alert("msg.noselect","체크박스");
		return;
	}

	var totChkCnt = 0;
	var totCommAmt = 0;
	for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
	
		var commAmt = toNumber(gfn_nvl(ds_otherAmtList.getColumn(i, "commAmt"),"0"));
		if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" )
		{
			totChkCnt++;
			var commClass = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형

			//(환급)선급금정산 -- > 가수금. 선급금 둘다 관련
			//(환급)미착정산,수수료매출정산 --> 가수금 관련			
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") != "B-22" && gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), "") != "C-01") 	//가수금정산 체크가능
			{
				gfn_alert("가수금 대체 할수 없습니다.");
				ds_otherAmtList.setColumn(i, "chk", "0");
				return;
			} 
			
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "slipStatus"),"") ==  "P" )	//전표확정
			{
				gfn_alert("전표 확정상태 입니다.");
				ds_otherAmtList.setColumn(i, "chk", "0");
				return; 
			}
			
			totCommAmt+=commAmt
		}
	}
	 
	if ( totChkCnt !=1 )
	{
		gfn_alert("전표불러오기는 1건만 체크 가능합니다.");
		ds_otherAmtList.setColumn(ds_otherAmtList.rowposition, "chk", "0");
		return;
	}
	var arrParam = new Array();
	arrParam[0] = totCommAmt;	// 전송할 파라미터 1
	arrParam[1] = ds_otherAmtList.getColumn(ds_otherAmtList.rowposition, "poOrderNum");	// 전송할 파라미터 1
	var  arrRtn = gfn_dialog("SuspenseCallPop"				// dialogId
					   , "X_FTP::SuspenseCallPop.xfdl"		// 가수금 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{
		//alert(arrRtn["poOrderNum"] +"//"+arrRtn["adjustSeq"] +"//"+arrRtn["prepayamtAmt"] +"//"+ arrRtn["fiscalSlipNum"])
		
		for ( var i=0; i<ds_otherAmtList.getRowCount(); i++ ) {
			var commAmt = toNumber(gfn_nvl(ds_otherAmtList.getColumn(i, "commAmt"),"0"));
			var  prepayamtAmt = toNumber(gfn_nvl(arrRtn["prepayamtAmt"],"0"));
			if ( gfn_nvl(ds_otherAmtList.getColumn(i, "chk"),"") ==  "1" ) 
			{
				var commClass = gfn_subStr(gfn_nvl(ds_otherAmtList.getColumn(i, "commClass"), ""),0,1);		// 수수료 유형
				//if ( commClass == "B" ) 	//미착생성만 체크가능
				//{
					totCommAmt+=commAmt;
					//alert(arrRtn["poOrderNum"] +"//"+arrRtn["adjustSeq"] +"//"+arrRtn["poOrderNum"]); 
					ds_otherAmtList.setColumn(i, "commAmt", arrRtn["applyAmt"] );
					ds_otherAmtList.setColumn(i, "orgFiscalSlipNum", arrRtn["sapSuspenseNum"] );    //가수금 전표번호
					ds_otherAmtList.setColumn(i, "prepayPoOrderNum", arrRtn["altNum"] );
					ds_otherAmtList.setColumn(i, "adjustSeq", arrRtn["altSeq"] );
					ds_otherAmtList.setColumn(i, "altSlipClass", "2" );		//대체 전표 구분 : 선급금: 1, 가수금 2
					
					ds_otherAmtList.setColumn(i, "journalzAcct", arrRtn["acctCd"]  );
					ds_otherAmtList.setColumn(i, "journalzAcctNm", arrRtn["acctNm"]  );	
					
				//}
			}
		}
	}	
}
]]></Script>
  </Form>
</FDL>
