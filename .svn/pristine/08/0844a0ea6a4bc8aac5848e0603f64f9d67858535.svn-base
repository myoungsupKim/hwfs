<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSM00060P" onload="form_onload" titletext="자재추가" position="absolute 0 0 990 570" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="Static00" onclick="div_1_Static00_onclick" class="sta_WFSA_Labelbg" position="absolute 15 48 975 115" anchor="left top right"/>
        <Edit id="ed_ItemName" imemode="native" onkeydown="ed_ItemName_OnKeyDown" taborder="1" position="absolute 84 60 708 81"/>
        <Static id="Static03" text="자재명" position="absolute 30 58 130 84" class="sta_WFSA_label"/>
        <Static id="Static6" text="대분류" position="absolute 30 82 130 108" class="sta_WFSA_label"/>
        <Combo codecolumn="CD" datacolumn="NM" displayrowcount="10" id="cbo_Big" innerdataset="ds_Big" onitemchanged="cbo_Big_OnChanged" taborder="2" position="absolute 84 84 224 105"/>
        <Static id="Static7" text="중분류" position="absolute 254 82 354 108" class="sta_WFSA_label"/>
        <Combo codecolumn="CD" datacolumn="NM" displayrowcount="10" id="cbo_Mid" innerdataset="ds_Mid" onitemchanged="cbo_Mid_OnChanged" taborder="3" position="absolute 309 85 449 106"/>
        <Static id="Static8" text="소분류" position="absolute 479 82 579 108" class="sta_WFSA_label"/>
        <Combo codecolumn="CD" datacolumn="NM" displayrowcount="10" id="cbo_Small" innerdataset="ds_Small" taborder="4" position="absolute 534 84 667 105"/>
        <Static id="Static0" text="※ 영양소는 자재 100g당 함량으로 계산되었습니다." position="absolute 6 511 290 524"/>
        <Static id="Static15" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 990 10"/>
        <Button id="btn_search" taborder="14" text="조회" onclick="fn_Search" class="btn_WF_searchCm" position="absolute 871 10 930 35" anchor="top right"/>
        <Button id="btn_close" taborder="15" text="닫기" onclick="common_onclick" class="btn_WF_CRUD" position="absolute 930 10 975 35" anchor="top right"/>
        <Static id="Static12" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 975 0 990 341"/>
        <Static id="Static22" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 728 35 975 40"/>
        <Static id="Static70" text="W10" visible="false" position="absolute 15 40 975 50" style="background:#ff000055;align:center middle;"/>
        <Static id="Static18" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 831 115 975 121" anchor="top right"/>
        <Static id="Static23" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 831 141 975 146" anchor="top right"/>
        <Static id="Static13" text="h15" onclick="Static13_onclick" class="Guide01_AreaRed" visible="false" position="absolute 0 555 990 570"/>
        <Static id="Static30" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 833 523 977 528" anchor="top right"/>
        <Static id="Static20" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 833 497 977 503" anchor="top right"/>
        <Static id="Static31" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 2 497 146 510" anchor="top right"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 341"/>
        <Static id="Static28" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 0 115 144 128" anchor="top right"/>
        <Static id="Static26" text="W10" visible="false" position="absolute 15 105 975 115" style="background:#ff000055;align:center middle;"/>
        <Static id="Static21" text="W10" visible="false" position="absolute 0 50 959 60" style="background:#ff000055;align:center middle;"/>
        <Static id="Static16" text="W10" onclick="Static16_onclick" visible="false" position="absolute 74 48 84 115" style="background:#ff000055;align:center middle;"/>
        <Static id="Static24" text="W15" visible="false" position="absolute 15 48 30 115" style="background:#ff000055;align:center middle;"/>
        <Static id="Static17" text="W30" onclick="Static17_onclick" visible="false" position="absolute 224 48 254 115" style="background:#ff000055;align:center middle;"/>
        <Static id="Static27" text="W10" visible="false" position="absolute 299 48 309 115" style="background:#ff000055;align:center middle;"/>
        <Static id="sta_title" text="자재조회" onclick="sta_title_onclick" class="sta_WF_Title" position="absolute 14 16 219 35"/>
        <Static id="Static94" text="W05." visible="false" position="absolute 15 80 975 85" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static01" text="W30" onclick="Static17_onclick" visible="false" position="absolute 449 49 479 116" style="background:#ff000055;align:center middle;"/>
        <Static id="Static02" text="W10" visible="false" position="absolute 524 48 534 115" style="background:#ff000055;align:center middle;"/>
        <Grid id="grd_List" taborder="16" binddataset="ds_ListItem" wheelscrollrow="1" readonly="true" useinputpanel="false" onheadclick="grd_List_OnHeadClick" oncelldblclick="grd_List_OnCellDblClick" position="absolute 15 146 975 497">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="90"/>
                <Column size="200"/>
                <Column size="110"/>
                <Column size="65"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="83"/>
                <Column size="80"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="85"/>
                <Column size="85"/>
                <Column size="85"/>
                <Column size="60"/>
                <Column size="60"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="25"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" text="자재코드"/>
                <Cell col="1" displaytype="text" text="자재명"/>
                <Cell col="2" displaytype="text" text="규격"/>
                <Cell col="3" displaytype="text" text="단위"/>
                <Cell col="4" displaytype="text" text="단가"/>
                <Cell col="5" displaytype="text" text="Kg환산율"/>
                <Cell col="6" displaytype="text" text="g당단가"/>
                <Cell col="7" text="에너지(Kcal)"/>
                <Cell col="8" text="당질(g)"/>
                <Cell col="9" text="단백질(g)"/>
                <Cell col="10" text="지질(g)"/>
                <Cell col="11" text="비타민A(R.E)"/>
                <Cell col="12" text="비타민B1(mg)"/>
                <Cell col="13" text="비타민B2(mg)"/>
                <Cell col="14" text="칼슘(mg)"/>
                <Cell col="15" text="철(mg)"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:EXPR(fn_setBkColor(rowposition));" text="bind:ITEM_CODE"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:ITEM_NAME"/>
                <Cell col="2" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="3" displaytype="text" style="align:right;" text="bind:PO_UOM"/>
                <Cell col="4" displaytype="number" style="align:right;" text="bind:ITEM_PRICE"/>
                <Cell col="5" displaytype="number" style="align:right;" text="bind:KG_CONVERT_RATE"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:G_ITEM_PRICE"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:CAL"/>
                <Cell col="8" displaytype="number" style="align:right;" text="bind:CARBO"/>
                <Cell col="9" displaytype="number" style="align:right;" text="bind:PROT"/>
                <Cell col="10" displaytype="number" style="align:right;" text="bind:FAT"/>
                <Cell col="11" displaytype="number" style="align:right;" text="bind:VITA_A"/>
                <Cell col="12" displaytype="number" style="align:right;" text="bind:THIA"/>
                <Cell col="13" displaytype="number" style="align:right;" text="bind:RIBO"/>
                <Cell col="14" displaytype="number" style="align:right;" text="bind:CA"/>
                <Cell col="15" displaytype="number" style="align:right;" text="bind:FE"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Div id="div_Footer" taborder="13" text="Div0" position="absolute 12 528 972 559" scrollbars="none">
          <Layouts>
            <Layout>
              <Edit id="ed_RECIPE_INFO" taborder="10" readonly="true" oneditclick="ed_RECIPE_INFO_oneditclick" position="absolute 2 0 962 27" anchor="default"/>
              <Button id="btn_PlusJajea" onclick="fn_appendItem" taborder="8" text="Button0" position="absolute 884 2 959 25" class="btn_WF_Custom" image="" anchor="default"/>
              <Static id="Static24" text="레 시 피" position="absolute 2 0 122 27" class="sta_WFDA_Label01" anchor="default"/>
              <Static id="Static25" text="1인 소요량" position="absolute 329 0 449 27" class="sta_WFDA_Label01" anchor="default"/>
              <Combo codecolumn="RECIPE_CD" datacolumn="RECIPE_NAME" id="cbo_Recipe" index="0" innerdataset="ds_Recipe" taborder="5" position="absolute 124 3 327 24" anchor="default" onitemchanged="div_Footer_cbo_Recipe_onitemchanged"/>
              <MaskEdit id="me_Qty" taborder="9" position="absolute 451 3 649 24" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_Big"/>
      <Dataset id="ds_Mid"/>
      <Dataset id="ds_Small"/>
      <Dataset id="ds_Recipe">
        <ColumnInfo>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Input">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="INT"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="ITEM_NAME" size="256" type="STRING"/>
          <Column id="BIG_CODE" size="256" type="STRING"/>
          <Column id="MID_CODE" size="256" type="STRING"/>
          <Column id="SMALL_CODE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_InMid"/>
      <Dataset id="ds_InSmall"/>
      <Dataset id="ds_ListItem"/>
      <Dataset id="ds_Data">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="INT"/>
          <Column id="MENU_CD" size="256" type="STRING"/>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="PRE_ITEM_CODE" size="256" type="STRING"/>
          <Column id="ITEM_CODE" size="256" type="STRING"/>
          <Column id="ITEM_SEQ" size="256" type="INT"/>
          <Column id="NEED_QTY" size="256" type="INT"/>
          <Column id="EDIBLE_QTY" size="256" type="INT"/>
          <Column id="CUT_SPEC" size="256" type="STRING"/>
          <Column id="ORDER_YN" size="256" type="STRING"/>
          <Column id="PR_ID" size="256" type="INT"/>
          <Column id="PR_NUM" size="256" type="STRING"/>
          <Column id="PR_QTY" size="256" type="INT"/>
          <Column id="NEED_DATE" size="256" type="STRING"/>
          <Column id="UNIT_PRICE" size="256" type="INT"/>
          <Column id="MARGIN_RATE" size="256" type="INT"/>
          <Column id="MARGIN_PRICE" size="256" type="INT"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
          <Column id="MENU_DATE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="ed_ItemName_value" compid="ed_ItemName" propid="value" datasetid="ds_Input" columnid="ITEM_NAME"/>
      <BindItem id="div_Footer_cbo_Recipe_value" compid="div_Footer.cbo_Recipe" propid="value" datasetid="ds_Input" columnid="RECIPE_CD"/>
      <BindItem id="ed_RECIPE_INFO_value" compid="div_Footer.ed_RECIPE_INFO" propid="value" datasetid="ds_list" columnid="RECIPE_INFO"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분   : 메뉴관리 > 식단관리 > 식단등록 > 레시피 검색 및 등록
 * 프로그램명   : FSM00060P.XML
 * 기      능   : 자재추가 팝업
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 * 비      고   : 
 *      - ds_Big				: [DS] 대분류 바인드 데이터셋
 *      - ds_Mid				: [DS] 중분류 바인드 데이터셋
 *      - ds_Small				: [DS] 소분류 바인드 데이터셋
 *      - ds_Recipe				: [DS] 레시피 바인드 데이터셋
 *      - ds_Input				: [DS] 검색 조건 데이터셋 
 *      - ds_InMid				: [DS] 중분류 검색 조건 데이터셋
 *      - ds_InSmall			: [DS] 소분류 검색 조건 데이터셋
 *      - ds_ListItem			: [Main DS] 식자재 리스트 데이터셋
 *      - ds_Data				: [DS] 식자재 추가/대체 데이터셋
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "LIB::sc_comon.js";			// 시스템공통 함수
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js";
//@@컨버터에서 주석처리 #include "LIB::tit_comm_0001.js";		// X-Framework Lib
//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
var f_GUBUN, f_UPJANG, f_MENU_CD, f_HALL_CD, f_MEAL, f_CORNER, f_RECIPE_CD, f_MENU_DATE, f_ITEM_CODE, f_ITEM_NAME;
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);

	// X-Framework : Action 정보 생성 
	fsp_init(this);
	
	// 부모창에서 넘겨주는 Args
	f_GUBUN     = GUBUN;		// 구분코드 "ADD" = 자재추가, "MOD" = 자재일괄대체(MultiSelect), "MOD2" = 자재대체(SingleSelect)
	f_UPJANG    = UPJANG;		// 업장코드
	f_MENU_CD   = MENU_CD;		// 식단코드
	f_HALL_CD   = HALL_CD;		// 식당코드
	f_MEAL      = MEAL;			// 끼니코드
	f_CORNER    = CORNER;		// 코너코드
	f_RECIPE_CD = RECIPE_CD;	// 레시피코드
	f_MENU_DATE = MENU_DATE;	// 제공일
	f_ITEM_CODE = ITEM_CODE;	// 자재코드
	f_ITEM_NAME = ITEM_NAME;	// 자재명
	
	// Default Data Check
	if( gfn_length(gfn_trim(f_GUBUN))== 0 || gfn_trim(f_GUBUN)== null ) {
		g_Message("EE", "구분코드가 존재하지 않습니다.\n창을 닫습니다.");
		this.close();
	}
	
	// 작업 구분
	if( gfn_trim(f_GUBUN)== "ADD" ) {
		// Title Setting
		FSM00060P.titletext         = "자재추가";
		div_cmnBtn.MenuID.value = "자재추가";
		div_Footer.enable       = true;
		div_Footer.visible      = true;
		
		// 부모창에서 쓰인 레시피 DataSet Copy
		ds_Recipe.addRow();
		ds_Recipe.setColumn(0, "RECIPE_CD",   "0"        );
		ds_Recipe.setColumn(0, "RECIPE_NAME", "- 선택 -" );
		for( var i=1; i<=ds_Menu.getRowCount(); i++ ) {
			ds_Recipe.addRow();
			ds_Recipe.setColumn(i, "RECIPE_CD",   ds_Menu.getColumn(i-1, "RECIPE_CD")  );
			ds_Recipe.setColumn(i, "RECIPE_NAME", ds_Menu.getColumn(i-1, "RECIPE_NAME"));
		}
	} else if( gfn_trim(f_GUBUN)== "MOD" ) {
		// Title Setting
		FSM00060P.titletext         = "자재일괄대체";
		div_cmnBtn.MenuID.value = "자재일괄대체";
		div_Footer.enable       = false;
		div_Footer.visible      = false;
	} else if( gfn_trim(f_GUBUN)== "MOD2" ) {
		// Title Setting
		FSM00060P.titletext         = "자재대체";
		div_cmnBtn.MenuID.value = "자재대체";
		div_Footer.enable       = false;
		div_Footer.visible      = false;
		
		// Default Data Check
		if( gfn_length(gfn_trim(f_ITEM_CODE))!= 12 || gfn_trim(f_ITEM_CODE)== null ) {
			g_Message("EE", "자재코드가 존재하지 않습니다.\n창을 닫습니다.");
			this.close();
		}
	}
	
	// Default Data Setting
	ds_Input.clearData();
	ds_Input.addRow();
	
	// 자재명 Setting
	//ds_Input.SetColumn(0, "ITEM_NAME", f_ITEM_NAME);
	
	// 대분류 코드 검색
	ds_Big.clearData();
	fsp_clear(this);
	fsp_addSearch(this,"fs/fsr:FSR00010E_S017");
	fsp_callService(this,"","","","ds_Big=ds_Big","","fn_callBackBigCode","",true);
}
//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_Search()
 * 기      능   : [조회버튼] 검색조건에 해당하는 정보를 조회
 ******************************************************************************************
 */
function fn_search(obj:Button, e:ClickEventInfo)
{
	// Default Data Setting
	ds_Input.setColumn(0, "UPJANG",     f_UPJANG              );
	ds_Input.setColumn(0, "MENU_DATE",  f_MENU_DATE           );
	ds_Input.setColumn(0, "ITEM_NAME",  gfn_trim(ed_ItemName.value));
	ds_Input.setColumn(0, "BIG_CODE",   gfn_trim(cbo_Big.value));
	ds_Input.setColumn(0, "MID_CODE",   gfn_trim(cbo_Mid.value));
	ds_Input.setColumn(0, "SMALL_CODE", gfn_trim(cbo_Small.value));
	
	fsp_clear(this);
	ds_ListItem.clearData();
	fsp_addSearch(this,"fs/fsm:FSM00060P_S001");
	fsp_callService(this,"","","ds_Input=ds_Input","ds_ListItem=ds_ListItem","","fn_callBackSearch","",true);
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_Insert()
 * 기      능   : [등록버튼] 등록 버튼 클릭 시 처리되는 작업
 ******************************************************************************************
 */
function fn_insert()
{
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_Save()
 * 기      능   : [저장버튼] 저장 버튼 클릭 시 처리되는 작업
 ******************************************************************************************
 */
function fn_save()
{
}
/* 
 ******************************************************************************************
 * 함  수  명   : fn_Delete()
 * 기      능   : [삭제버튼] 삭제 시 처리되는 작업
 ******************************************************************************************
 */
function fn_delete(nRow)
{
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_Print()
 * 기      능   : [출력버튼] 출력 시 처리되는 작업
 ******************************************************************************************
 */
function fn_print()
{
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function fn_Close(obj:Button, e:ClickEventInfo)
{
	this.close();
}
//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackBigCode(errCode, errMsg)
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 대분류 코드 콤보 리스트 검색 후 콜백 함수
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function fn_callBackBigCode(errCode, errMsg)
{
	if( errCode != 0 ) {
		return;
	} else {
		//trace(ds_Big.SaveXML());
		if( gfn_trim(f_GUBUN == "MOD2")) {
			cbo_Big.value = gfn_subStr(f_ITEM_CODE, 0, 4);
			fn_SearchMidCode();
		}
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackMidCode(errCode, errMsg)
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 중분류 코드 콤보 리스트 검색
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function fn_SearchMidCode()
{
	ds_InMid.clear();
	ds_InMid.addColumn("CLASS_CODE");
	ds_InMid.addRow();
	ds_InMid.setColumn(0,"CLASS_CODE",gfn_trim(cbo_Big.value));
	fsp_clear(this);
	ds_Mid.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S018");
	fsp_callService(this,"","","ds_InMid=ds_InMid","ds_Mid=ds_Mid","","fn_callBackMidCode","",true);

	ds_Small.clearData();
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackMidCode(errCode, errMsg)
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 중분류 코드 콤보 리스트 검색 후 콜백 함수
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function fn_callBackMidCode(errCode, errMsg)
{
	if( errCode != 0 ) {
		return;
	} else {
		//trace(ds_Mid.SaveXML());
		if( gfn_trim(f_GUBUN == "MOD2")) {
			cbo_Mid.value = gfn_subStr(f_ITEM_CODE, 0, 6);
			fn_SearchSmallCode();
		}
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackSmallCode(errCode, errMsg)
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 소분류 코드 콤보 리스트 검색
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function fn_SearchSmallCode()
{
	ds_InSmall.clear();
	ds_InSmall.addColumn("CLASS_CODE");
	ds_InSmall.addRow();
	ds_InSmall.setColumn(0,"CLASS_CODE",gfn_trim(cbo_Mid.value));
	fsp_clear(this);
	ds_Small.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S019");
	fsp_callService(this,"","","ds_InSmall=ds_InSmall","ds_Small=ds_Small","","fn_callBackSmallCode","",true);
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackSmallCode(errCode, errMsg)
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 소분류 코드 콤보 리스트 검색 후 콜백 함수
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function fn_callBackSmallCode(errCode, errMsg)
{
	if( errCode != 0 ) {
		return;
	} else {
		//trace(ds_Mid.SaveXML());
		if( gfn_trim(f_GUBUN == "MOD2")) {
			cbo_Small.value = gfn_subStr(f_ITEM_CODE, 0, 8);
			fn_Search();
		}
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 리스트 조회 후 콜백 함수
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-07
 ******************************************************************************************
 */
function fn_callBackSearch(errCode, errMsg)
{	
	if( errCode != 0 ) {
		return;
	} else {
		//trace(ds_ListItem.SaveXML());
		ed_ItemName.setFocus();
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_appendItem(obj)
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 자재 추가
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function fn_appendItem(obj:Button, e:ClickEventInfo)
{
	// 자재 선택 체크
	if( ds_ListItem.rowposition < 0 ) {
		g_Message("EE", "추가 하실 자재를 선택하세요.");
		return;
	}
	// 자재 선택 체크
	if( gfn_length(gfn_trim(div_Footer.cbo_Recipe.value))== 0 || gfn_trim(div_Footer.cbo_Recipe.value)== "0" ) {
		g_Message("EE", "레시피를 선택하세요.");
		div_Footer.cbo_Recipe.setFocus();
		return;
	}
	// 자재 추가 전 1인 소요량 입력 체크
	if( gfn_length(gfn_trim(div_Footer.me_Qty.value))== 0 || gfn_trim(div_Footer.me_Qty.value)== null ) {
		g_Message("EE", "1인 소요량을 입력하세요.");
		div_Footer.me_Qty.setFocus();
		return;
	}
	// 금지자재 추가 확인
	if( g_Confirm("02", fn_chkItem("ADD")) ) {
		// 자재 추가 Logic Start ==============================================================================================>
			/*var v_recipeIndex = ds_Item.FindRow("RECIPE_CD", div_Footer.cbo_Recipe.Value);
		if( v_recipeIndex == -1 ) v_recipeIndex = 0;
		
		var v_Index = ds_Item.AddRow();
		ds_Item.SetColumn(v_Index, "UPJANG",       ds_Item.GetColumn(v_recipeIndex, "UPJANG")            ); // 업장코드
		ds_Item.SetColumn(v_Index, "MENU_CD",      ds_Item.GetColumn(v_recipeIndex, "MENU_CD")           ); // 식단코드
		ds_Item.SetColumn(v_Index, "RECIPE_CD",    div_Footer.cbo_Recipe.Value                           ); // 레시피코드
		ds_Item.SetColumn(v_Index, "HALL_CD",      ds_Item.GetColumn(v_recipeIndex, "HALL_CD")           ); // 식당코드
		ds_Item.SetColumn(v_Index, "MEAL",         ds_Item.GetColumn(v_recipeIndex, "MEAL")              ); // 끼니코드
		ds_Item.SetColumn(v_Index, "CORNER",       ds_Item.GetColumn(v_recipeIndex, "CORNER")            ); // 코너코드
		ds_Item.SetColumn(v_Index, "MENU_DATE",    ds_Item.GetColumn(v_recipeIndex, "MENU_DATE")         ); // 제공일자
		// ds_ListItem DataSet -------------------------------------------------------------------------------------------
		ds_Item.SetColumn(v_Index, "ITEM_CODE",    ds_ListItem.GetColumn(ds_ListItem.row, "ITEM_CODE")   ); // 자재코드
		ds_Item.SetColumn(v_Index, "ITEM_NAME",    ds_ListItem.GetColumn(ds_ListItem.row, "ITEM_NAME")   ); // 자재명9999
		ds_Item.SetColumn(v_Index, "ITEM_SIZE",    ds_ListItem.GetColumn(ds_ListItem.row, "ITEM_SIZE")   ); // 규격
		ds_Item.SetColumn(v_Index, "PO_UOM",       ds_ListItem.GetColumn(ds_ListItem.row, "PO_UOM")      ); // 단위
		ds_Item.SetColumn(v_Index, "RESTRICT_YN",  ds_ListItem.GetColumn(ds_ListItem.row, "RESTRICT_YN") ); // 금지
		ds_Item.SetColumn(v_Index, "CAL",          ds_ListItem.GetColumn(ds_ListItem.row, "CAL")         ); // 100g에너지
		ds_Item.SetColumn(v_Index, "DISUSE_RATE",  ds_ListItem.GetColumn(ds_ListItem.row, "DISUSE_RATE") ); // 폐기율
		ds_Item.SetColumn(v_Index, "GRAM_PRICE",   ds_ListItem.GetColumn(ds_ListItem.row, "GRAM_PRICE")  ); // g당 단가
		ds_Item.SetColumn(v_Index, "FEATURE_NAME", ds_ListItem.GetColumn(ds_ListItem.row, "FEATURE_NAME")); // 자재특성
		ds_Item.SetColumn(v_Index, "NEED_QTY",     div_Footer.me_Qty.value                               ); // 1인소요량
		// --------------------------------------------------------------------------------------------------------------
		if( v_recipeIndex != 0 ) { // 레시피 정보
			ds_Item.SetColumn(v_Index, "RECIPE_COLOR", ds_Item.GetColumn(v_recipeIndex, "RECIPE_COLOR")      ); // 레시피 색상
			ds_Item.SetColumn(v_Index, "RECIPE_SEQ",   ds_Item.GetColumn(v_recipeIndex, "RECIPE_SEQ")        ); // 레시피 순번
			ds_Item.SetColumn(v_Index, "RECIPE_NAME",  div_Footer.cbo_Recipe.Text                            ); // 레시피명
		}
		// DataSet Sort
		ds_Item.Sort("UPJANG,MENU_CD,RECIPE_CD,ITEM_CODE", true);
		this.Close();*/
		
		ds_Data.clearData();
		var v_Index = ds_Data.addRow();
		// FSM_REAL_RECIPE_ITEM Table Insert Values
		ds_Data.setColumn(v_Index, "UPJANG",       f_UPJANG                                                ); // 업장코드
		ds_Data.setColumn(v_Index, "MENU_CD",      f_MENU_CD                                               ); // 식단코드
		ds_Data.setColumn(v_Index, "RECIPE_CD",    div_Footer.cbo_Recipe.value                             ); // 레시피코드
		ds_Data.setColumn(v_Index, "ITEM_CODE",    ds_ListItem.getColumn(ds_ListItem.rowposition, "ITEM_CODE")     ); // 자재코드
		ds_Data.setColumn(v_Index, "ITEM_SEQ",     0                                                       ); // 자재순번
		ds_Data.setColumn(v_Index, "NEED_QTY",     div_Footer.me_Qty.value                                 ); // 1인소요량
		ds_Data.setColumn(v_Index, "EDIBLE_QTY",   0                                                       ); // 가식부량 : SQL내 계산 => (1인 소요량 * (100 - 폐기율))
		//ds_Data.SetColumn(v_Index, "CUT_SPEC",     null                                                    ); // 커팅규격
		ds_Data.setColumn(v_Index, "ORDER_YN",     "N"                                                     ); // 발주여부
		ds_Data.setColumn(v_Index, "PR_ID",        -1                                                      ); // PR_ID
		//ds_Data.SetColumn(v_Index, "PR_NUM",       null                                                    ); // 구매신청번호
		ds_Data.setColumn(v_Index, "PR_QTY",       0                                                       ); // 구매신청수량
		ds_Data.setColumn(v_Index, "NEED_DATE",    null                                                    ); // 입고 희망일자 : 제공일(MENU_DATE) - FSI_ITEM_NUT.D_DAY
		ds_Data.setColumn(v_Index, "UNIT_PRICE",   ds_ListItem.getColumn(ds_ListItem.rowposition, "CONTRACT_PRICE")); // 매입단가
		ds_Data.setColumn(v_Index, "MARGIN_RATE",  ds_ListItem.getColumn(ds_ListItem.rowposition, "MARGIN_RATE")   ); // 출하율
		ds_Data.setColumn(v_Index, "MARGIN_PRICE", ds_ListItem.getColumn(ds_ListItem.rowposition, "ITEM_PRICE")    ); // 출하율 적용단가
		// 입고 희망일자 조회를 위한 Values
		ds_Data.setColumn(v_Index, "MENU_DATE",    f_MENU_DATE                                             ); // 제공일
		ds_Data.setColumn(v_Index, "HALL_CD",      f_HALL_CD                                               ); // 식당코드
		ds_Data.setColumn(v_Index, "MEAL",         f_MEAL                                                  ); // 끼니코드
		ds_Data.setColumn(v_Index, "CORNER",       f_CORNER                                                ); // 코너코드
		
		var actionName, cmdName, inData, outData, otherArg, callBackFnc;
		var insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;
		
		inData		= "ds_Data=ds_Data:A";
		outData		= "ds_Data=ds_Data";
		otherArg    = "";
		callBackFnc	= "fn_callBackAppendItem";
		insertSql 	= "fs/fsm:FSM00060P_I001";
		updateSql   = "";
		deleteSql   = "";
		keyIncrement= -1;
		callbackSql	= "";
		
		fsp_clear(this);
		fsp_addSave(this, insertSql, updateSql, deleteSql, saveFlagColumn, keySqlName, keyIncrement, callbackSql);
		fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출
	}
	// 자재 추가 Logic End ================================================================================================>
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackAppendItem()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 자재 추가 후 콜백 함수
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-10
 ******************************************************************************************
 */
function fn_callBackAppendItem(errCode, errMsg)
{	
	if( errCode != 0 ) {
		return;
	} else {
		g_Message("02", "자재가 정상적으로 추가 되었습니다.");
		this.close();
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_callBackUpdateItem()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 자재 대체 후 콜백 함수
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-10
 ******************************************************************************************
 */
function fn_callBackUpdateItem(errCode, errMsg)
{	
	if( errCode != 0 ) {
		return;
	} else {
		g_Message("02", "자재가 정상적으로 대체 되었습니다.");
		this.close();
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_setBkColor(nRow)
 * 입      력   : nRow - Record Row Number
 * 반      환   : 없음
 * 기      능   : 리스트 조회 후 금지자재 배경색 셋팅
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-10
 ******************************************************************************************
 */
function fn_setBkColor(nRow)
{
	var v_restrict_st = ds_ListItem.getColumn(nRow, "RESTRICT_START");
	var v_restrict_ed = ds_ListItem.getColumn(nRow, "RESTRICT_END"  );
	var v_cnl_st      = ds_ListItem.getColumn(nRow, "CNL_START"     );
	var v_cnl_ed      = ds_ListItem.getColumn(nRow, "CNL_END"       );
	
	if( gfn_length(v_restrict_st)== 8 && gfn_length(v_restrict_ed)== 8 ) {
		if( parseInt(v_restrict_st) <= parseInt(f_MENU_DATE) && parseInt(f_MENU_DATE) <= parseInt(v_restrict_ed) ) {
			if( gfn_length(v_cnl_st)== 8 && gfn_length(v_cnl_ed)== 8 ) {
				if( parseInt(v_cnl_st) <= parseInt(f_MENU_DATE) && parseInt(f_MENU_DATE) <= parseInt(v_cnl_ed) ) {
					return "";
				}
			}
			return "tomato";
		}
	}
	return "";
 }
 /*
 ******************************************************************************************
 * 함  수  명   : fn_chkItem(arg)
 * 입      력   : arg - 추가/대체 구분
 * 반      환   : 없음
 * 기      능   : 금지자재 여부에 따라 메시지 셋팅
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-10
 ******************************************************************************************
 */
function fn_chkItem(arg)
{
	var v_gubun = "";
	if( arg == "ADD" )
		v_gubun = "를 추가";
	else
		v_gubun = "로 대체";
	var v_restrict_st = ds_ListItem.getColumn(ds_ListItem.rowposition, "RESTRICT_START");
	var v_restrict_ed = ds_ListItem.getColumn(ds_ListItem.rowposition, "RESTRICT_END"  );
	var v_cnl_st      = ds_ListItem.getColumn(ds_ListItem.rowposition, "CNL_START"     );
	var v_cnl_ed      = ds_ListItem.getColumn(ds_ListItem.rowposition, "CNL_END"       );
	
	if( gfn_length(v_restrict_st)== 8 && gfn_length(v_restrict_ed)== 8 ) {
		if( parseInt(v_restrict_st) <= parseInt(f_MENU_DATE) && parseInt(f_MENU_DATE) <= parseInt(v_restrict_ed) ) {
			if( gfn_length(v_cnl_st)== 8 && gfn_length(v_cnl_ed)== 8 ) {
				if( parseInt(v_cnl_st) <= parseInt(f_MENU_DATE) && parseInt(f_MENU_DATE) <= parseInt(v_cnl_ed) ) {
					return "선택하신 자재" + v_gubun + "하시겠습니까?";
				}
			}
			return "선택하신 금지 자재" + v_gubun + "하시겠습니까?";
		}
	}
	return "선택하신 자재" + v_gubun + "하시겠습니까?";
}
//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/******************************************************************************************
 * 함  수  명   : grd_List_OnHeadClick(obj,nCell,nX,nY,nPivotIndex)
 * 기      능   : 그리드헤드 더블클릭시 Sort
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function grd_List_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	//g_debug("ds_ListItem");
	if( e.cell != 0 && e.cell != 1 )
		gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}
/******************************************************************************************
 * 함  수  명   : cbo_Big_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 대분류 콤보 변경시 Event -> 중분류 콤보 셋팅
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function cbo_Big_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_SearchMidCode();
}
/******************************************************************************************
 * 함  수  명   : cbo_Mid_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 중분류 콤보 변경시 Event -> 소분류 콤보 셋팅
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function cbo_Mid_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_SearchSmallCode();
}
/******************************************************************************************
 * 함  수  명   : grd_List_OnCellDblClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 자재일괄대체, 자재대체의 경우 Main Page의 자재를 대체한다.
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-08
 ******************************************************************************************
 */
function grd_List_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{
	// 자재일괄대체(MultiSelect) 또는 자재대체(SingleSelect)의 경우
	if( gfn_trim(f_GUBUN)== "MOD" || gfn_trim(f_GUBUN)== "MOD2" ) {
		if( g_Confirm("02", fn_chkItem("MOD")) ) {
			// 자재 대체 Logic Start ==============================================================================================>
			ds_Data.clearData();
			var v_Index = 0;
			for( var i=0; i<ds_Item.getRowCount(); i++ ) {
				if( ds_Item.getSelect(i) ) { // 선택되어진 컬럼 위치 찾기
					v_Index = ds_Data.addRow();
					// FSM_REAL_RECIPE_ITEM Table Insert Values
					ds_Data.setColumn(v_Index, "UPJANG",        f_UPJANG                                                ); // 업장코드
					ds_Data.setColumn(v_Index, "MENU_CD",       f_MENU_CD                                               ); // 식단코드
					ds_Data.setColumn(v_Index, "RECIPE_CD",     ds_Item.getColumn(i, "RECIPE_CD")                       ); // 레시피코드
					ds_Data.setColumn(v_Index, "PRE_ITEM_CODE", ds_Item.getColumn(i, "ITEM_CODE")                       ); // 자재코드(대체대상)
					ds_Data.setColumn(v_Index, "ITEM_CODE",     ds_ListItem.getColumn(ds_ListItem.rowposition, "ITEM_CODE")     ); // 자재코드
					ds_Data.setColumn(v_Index, "ITEM_SEQ",      0                                                       ); // 자재순번
					ds_Data.setColumn(v_Index, "ORDER_YN",      "N"                                                     ); // 발주여부
					ds_Data.setColumn(v_Index, "PR_ID",         -1                                                      ); // PR_ID
					//ds_Data.SetColumn(v_Index, "PR_NUM",        null                                                    ); // 구매신청번호
					ds_Data.setColumn(v_Index, "PR_QTY",        0                                                       ); // 구매신청수량
					ds_Data.setColumn(v_Index, "UNIT_PRICE",    ds_ListItem.getColumn(ds_ListItem.rowposition, "CONTRACT_PRICE")); // 매입단가
					ds_Data.setColumn(v_Index, "MARGIN_RATE",   ds_ListItem.getColumn(ds_ListItem.rowposition, "MARGIN_RATE")   ); // 출하율
					ds_Data.setColumn(v_Index, "MARGIN_PRICE",  ds_ListItem.getColumn(ds_ListItem.rowposition, "ITEM_PRICE")    ); // 출하율 적용단가
				}
			}
	
			// 데이터셋이 존재할 경우 UPDATE
			if( ds_Data.getRowCount() > 0 ) {
				var actionName, cmdName, inData, outData, otherArg, callBackFnc;
				var insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;
				
				inData		= "ds_Data=ds_Data:A";
				outData		= "ds_Data=ds_Data";
				otherArg    = "";
				callBackFnc	= "fn_callBackUpdateItem";
				insertSql 	= "fs/fsm:FSM00060P_U001";
				updateSql   = "";
				deleteSql   = "";
				keyIncrement= -1;
				callbackSql	= "";
				
				fsp_clear(this);
				fsp_addSave(this, insertSql, updateSql, deleteSql, saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출
			}
			// 자재 대체 Logic End   ==============================================================================================>
			
			/*
			// DataSet Copy
			ds_TempItem.Clear();
			for( var i=0; i<ds_Item.GetColCount(); i++ ) {
				ds_TempItem.AddColumn(ds_Item.GetColID(i), ds_Item.GetColType(ds_Item.GetColID(i)), ds_Item.GetColSize(ds_Item.GetColID(i)));
			}
			
			// ds_TempItem Create
			var v_Index = 0;
			for( var i=0; i<ds_Item.GetRowCount(); i++ ) {
				if( ds_Item.GetSelect(i) ) { // 선택되어진 컬럼 위치 찾기
					trace("ds_TempItem Create");
					v_Index = ds_TempItem.AddRow();
					ds_TempItem.SetColumn(v_Index, "UPJANG",       ds_Item.GetColumn(i, "UPJANG")                        ); // 업장코드
					ds_TempItem.SetColumn(v_Index, "MENU_CD",      ds_Item.GetColumn(i, "MENU_CD")                       ); // 식단코드
					ds_TempItem.SetColumn(v_Index, "RECIPE_CD",    ds_Item.GetColumn(i, "RECIPE_CD")                     ); // 레시피코드
					ds_TempItem.SetColumn(v_Index, "HALL_CD",      ds_Item.GetColumn(i, "HALL_CD")                       ); // 식당코드
					ds_TempItem.SetColumn(v_Index, "MEAL",         ds_Item.GetColumn(i, "MEAL")                          ); // 끼니코드
					ds_TempItem.SetColumn(v_Index, "CORNER",       ds_Item.GetColumn(i, "CORNER")                        ); // 코너코드
					ds_TempItem.SetColumn(v_Index, "MENU_DATE",    ds_Item.GetColumn(i, "MENU_DATE")                     ); // 제공일자
					ds_TempItem.SetColumn(v_Index, "RECIPE_COLOR", ds_Item.GetColumn(i, "RECIPE_COLOR")                  ); // 레시피 색상
					ds_TempItem.SetColumn(v_Index, "RECIPE_SEQ",   ds_Item.GetColumn(i, "RECIPE_SEQ")                    ); // 레시피 순번
					ds_TempItem.SetColumn(v_Index, "RECIPE_NAME",  ds_Item.GetColumn(i, "RECIPE_NAME")                   ); // 레시피명
					// ds_ListItem DataSet ------------------------------------------------------------------------------------------------
					ds_TempItem.SetColumn(v_Index, "ITEM_CODE",    ds_ListItem.GetColumn(ds_ListItem.row, "ITEM_CODE")   ); // 자재코드
					ds_TempItem.SetColumn(v_Index, "ITEM_NAME",    ds_ListItem.GetColumn(ds_ListItem.row, "ITEM_NAME")   ); // 자재명9999
					ds_TempItem.SetColumn(v_Index, "ITEM_SIZE",    ds_ListItem.GetColumn(ds_ListItem.row, "ITEM_SIZE")   ); // 규격
					ds_TempItem.SetColumn(v_Index, "PO_UOM",       ds_ListItem.GetColumn(ds_ListItem.row, "PO_UOM")      ); // 단위
					ds_TempItem.SetColumn(v_Index, "RESTRICT_YN",  ds_ListItem.GetColumn(ds_ListItem.row, "RESTRICT_YN") ); // 금지
					ds_TempItem.SetColumn(v_Index, "CAL",          ds_ListItem.GetColumn(ds_ListItem.row, "CAL")         ); // 100g에너지
					ds_TempItem.SetColumn(v_Index, "DISUSE_RATE",  ds_ListItem.GetColumn(ds_ListItem.row, "DISUSE_RATE") ); // 폐기율
					ds_TempItem.SetColumn(v_Index, "GRAM_PRICE",   ds_ListItem.GetColumn(ds_ListItem.row, "GRAM_PRICE")  ); // g당 단가
					ds_TempItem.SetColumn(v_Index, "FEATURE_NAME", ds_ListItem.GetColumn(ds_ListItem.row, "FEATURE_NAME")); // 자재특성
					// --------------------------------------------------------------------------------------------------------------------
				}
			}
			
			// Selected Row Delete
			ds_Item.DeleteSelected();
			
			// ds_Item Add Row
			var v_RowIndex = 0;
			trace(ds_TempItem.GetRowCount());
			for( var i=0; i<ds_TempItem.GetRowCount(); i++ ) {
				v_RowIndex = ds_Item.AddRow();
				for( var j=0; j<ds_TempItem.GetColCount(); j++ ) {
					ds_Item.SetColumn(v_RowIndex, ds_TempItem.GetColID(j), ds_TempItem.GetColumn(i, ds_TempItem.GetColID(j)));
				}
			}
			
			// DataSet Sort
			ds_Item.Sort("UPJANG,MENU_CD,RECIPE_CD,ITEM_CODE", true);
			this.Close();*/
		}
	}
}
/******************************************************************************************
 * 함  수  명   : ed_ItemName_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 엔터키 조회
 * 작  성  자   : 손창덕
 * 작성  일자   : 2008-01-10
 ******************************************************************************************
 */
function ed_ItemName_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	if( e.keycode == "13" ) fn_Search();
}

 
 
]]></Script>
  </Form>
</FDL>
