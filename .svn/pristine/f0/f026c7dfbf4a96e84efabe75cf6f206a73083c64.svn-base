<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="ArCustTransferPop" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1000 600" titletext="채권 고객사 변경 처리" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 985 0 1000 600" anchor="top right"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 15 40 985 108" anchor="left top right"/>
        <Static id="Static28" text="회계일자" class="sta_WFSA_label" position="absolute 30 82 92 103" anchor="left top"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 40 108 50" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 16 86 31 107" anchor="left top"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 89 82 99 103" anchor="left top"/>
        <Static id="Static09" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 318 82 348 103" anchor="left top"/>
        <Static id="Static30" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 670 40 763 50" anchor="left top"/>
        <Static id="Static53" text="Fr 고객사" class="sta_WFSA_label" position="absolute 348 82 450 103" anchor="left top"/>
        <Static id="Static54" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 414 83 423 104" anchor="left top"/>
        <Static id="Static41" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 971 41 986 107" anchor="left top"/>
        <Static id="Static03" text="W05." visible="false" position="absolute 712 50 945 55" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Button id="btn_transCancle" taborder="82" text="이관취소" class="btn_WF_CRUD" position="absolute 859 10 924 35" anchor="left top" onclick="btn_transCancle_onclick" visible="false"/>
        <Static id="Static00" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 16 55 31 76" anchor="left top"/>
        <Static id="Static01" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 16 76 109 86" anchor="left top"/>
        <Button id="btn_change" taborder="83" text="이관처리" class="btn_WF_CRUD" position="absolute 859 10 924 35" anchor="left top" onclick="fn_save"/>
        <Static id="Static18" text="이관내역" class="sta_WF_Title01" position="absolute 15 120 465 138" anchor="left top"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 107 465 120" anchor="left top"/>
        <Static id="Static20" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 15 133 465 138" anchor="left top"/>
        <Static id="Static31" class="sta_WFDA_Labelbg" position="absolute 108 165 985 216" anchor="left top"/>
        <Static id="Static49" class="sta_WFDA_Labelbg" position="absolute 108 138 985 165" anchor="left top"/>
        <Static id="Static67" class="sta_WFDA_Labelbg" position="absolute 108 195 985 211" anchor="left top"/>
        <Static id="Static26" text="이관일자" class="sta_WFDA_Label01" position="absolute 15 138 109 165" anchor="left top" style="font:Gulim,9;"/>
        <Static id="Static27" text="금액" class="sta_WFDA_Label01" position="absolute 15 164 109 191" anchor="left top"/>
        <Static id="Static34" text="이관유형" class="sta_WFDA_Label01" position="absolute 339 138 433 165" anchor="left top" style="font:Gulim,9;"/>
        <Static id="Static35" text="분개" class="sta_WFDA_Label01" position="absolute 339 164 433 191" anchor="left top"/>
        <Static id="Static38" text="To 고객사" class="sta_WFDA_Label01" position="absolute 663 138 757 165" anchor="left top" style="font:Gulim,9;"/>
        <Static id="Static39" text="업장(CC)" class="sta_WFDA_Label01" position="absolute 663 190 757 217" anchor="left top"/>
        <Static id="Static02" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 600"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 985 10" onclick="Static05_onclick"/>
        <Static id="sta_title" text="채권 고객사 변경 처리" class="sta_WF_Title" position="absolute 15 16 215 40"/>
        <Static id="Static10" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 15 10 215 16"/>
        <Static id="Static12" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 753 35 1000 40"/>
        <Button id="btn_search" taborder="98" text="조회" onclick="fn_ar_search" class="btn_WF_searchCm" position="absolute 926 10 985 35" anchor="top right"/>
        <Static id="Static13" text="아이콘기준 h08" class="Guide01_AreaRed" visible="false" position="absolute 15 32 215 40"/>
        <Static id="Static14" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 15 585 985 600"/>
        <Static id="Static50" text="적요" class="sta_WFDA_Label01" position="absolute 15 190 109 217" anchor="left top"/>
        <Edit id="Edit11" taborder="103" position="absolute 435 167 594 188" anchor="left top" enable="false"/>
        <Static id="Static15" text="h15" visible="false" position="absolute 16 241 986 256" style="background:#ff000055;align:center middle;"/>
        <MaskEdit id="msk_receiveAmt" taborder="107" value="0" position="absolute 111 167 337 188" anchor="left top" enable="false" mask="@@@,@@@"/>
        <Button id="Button04" taborder="110" text="분개조회" class="btn_WF_CRUD" position="absolute 596 167 661 188" anchor="left top"/>
        <Static id="Static21" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 406 -313 416 -292" anchor="left top"/>
        <ObjCalendar id="cal_fiscalDateFr" titletext="캘린더" taborder="117" onclick="cal_procDateFr_onclick" scrollbars="none" class="cal_WF_Essential" position="absolute 99 82 192 103"/>
        <Static id="Static24" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 192 82 202 103" anchor="left top"/>
        <Static id="Static25" text="~" position="absolute 202 84 211 103"/>
        <Static id="Static29" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 211 82 221 103" anchor="left top"/>
        <ObjCalendar id="cal_fiscalDateTo" titletext="캘린더" taborder="118" onclick="cal_procDateFr_onclick" scrollbars="none" class="cal_WF_Essential" position="absolute 219 82 318 103"/>
        <ObjCalendar id="cal_receiveDate" titletext="캘린더" taborder="119" onclick="cal_procDateFr_onclick" scrollbars="none" class="cal_WF_Essential" position="absolute 111 141 212 162"/>
        <Combo id="cbo_receiveType" taborder="120" value="02" innerdataset="@ds_receiveType" codecolumn="typeCd" datacolumn="typeNm" position="absolute 435 141 661 162" anchor="left top" onitemchanged="cbo_receiveType_onitemchanged"/>
        <CustSearchComponent id="edt_custNm" titletext="거래처 검색용 Component" taborder="128" text="CustSearchComponent00" class="edt_WF_Essential" position="absolute 759 141 981 162" bindDataset="ds_receiveData" eventBeforeTrigger="fn_setCcCd" eventAfterTrigger="fn_setUpjang" bindCustCodeColumn="transCustCd" bindCustNameColumn="transCustNm"/>
        <Edit id="edt_remark" taborder="129" position="absolute 111 192 661 213" anchor="left top" class="edt_WF_Essential"/>
        <CustSearchComponent id="edt_inqueryCustNm" titletext="거래처 검색용 Component" taborder="132" text="CustSearchComponent00" class="edt_WF_Essential" position="absolute 423 82 621 103" bindDataset="ds_search" eventBeforeTrigger="fn_setCcCd" eventAfterTrigger="" bindCustCodeColumn="inqueryCustCd" bindCustNameColumn="inqueryCustNm"/>
        <Grid id="grd_list" taborder="133" binddataset="ds_listAr" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 15 256 985 589" anchor="all" oncellclick="grd_list_oncellclick" onkillfocus="fn_changeAmtRe" onheadclick="grd_list_onheadclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="30"/>
                <Column size="80"/>
                <Column size="60"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="102"/>
                <Column size="138"/>
                <Column size="81"/>
                <Column size="165"/>
                <Column size="138"/>
                <Column size="74"/>
                <Column size="150"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox" edittype="checkbox"/>
                <Cell col="1" text="라인"/>
                <Cell col="2" text="회계일자"/>
                <Cell col="3" colspan="2" text="From고객사" taborder="undefined"/>
                <Cell col="5" text="잔액"/>
                <Cell col="6" text="적용금액"/>
                <Cell col="7" text="적용후잔액"/>
                <Cell col="8" text="채권번호"/>
                <Cell col="9" text="CC"/>
                <Cell col="10" text="사업부"/>
                <Cell col="11" text="적요"/>
                <Cell col="12" text="업장"/>
                <Cell col="13" text="업장코드"/>
                <Cell col="14" text="사업장명"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                <Cell col="1" style="align:center middle;" expr="currow+1"/>
                <Cell col="2" text="bind:fiscalDate" mask="####-##-##"/>
                <Cell col="3" displaytype="text" style="align:center middle;" text="bind:custCd"/>
                <Cell col="4" displaytype="text" text="bind:custNm"/>
                <Cell col="5" displaytype="number" style="align:right middle;" text="bind:arBalAmt"/>
                <Cell col="6" displaytype="number" edittype="text" style="align:right;" class="Cellgrd_WF_Point" text="bind:receiveAmt" editautoselect="true" editdisplay="display"/>
                <Cell col="7" displaytype="number" text="bind:balAmt" expr="expr:arBalAmt-receiveAmt"/>
                <Cell col="8" text="bind:arNum"/>
                <Cell col="9" style="align:left middle;" text="bind:ccNm"/>
                <Cell col="10" style="align:left middle;" text="bind:muNm"/>
                <Cell col="11" style="align:left middle;" text="bind:remark"/>
                <Cell col="12" style="align:left middle;" text="bind:upjangNm"/>
                <Cell col="13" displaytype="text" style="align:center middle;" text="bind:salesUpjangCd"/>
                <Cell col="14" style="align:left middle;" text="bind:salesUpjangNm"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1"/>
                <Cell col="2"/>
                <Cell col="3"/>
                <Cell col="4" style="align:center;" text="합계"/>
                <Cell col="5" displaytype="number" expr="expr:getSum(&quot;arBalAmt&quot;)"/>
                <Cell col="6" displaytype="number" expr="expr:getSum(&quot;receiveAmt&quot;)"/>
                <Cell col="7" displaytype="number" expr="expr:getSum(&quot;arBalAmt&quot;)-getSum(&quot;receiveAmt&quot;)"/>
                <Cell col="8"/>
                <Cell col="9"/>
                <Cell col="10"/>
                <Cell col="11"/>
                <Cell col="12"/>
                <Cell col="13"/>
                <Cell col="14"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <MaskEdit id="msk_arWithdrawAmt" taborder="136" value="0" mask="@@@,@@@" enable="false" position="absolute 128 208 354 229" anchor="left top" visible="false"/>
        <Static id="Static16" text="매출유형" class="sta_WFDA_Label01" position="absolute 663 214 757 241" anchor="left top"/>
        <Combo id="cbo_salsType" taborder="138" value="02" innerdataset="@ds_salsType" codecolumn="salsType" datacolumn="salsTypeNm" onitemchanged="cbo_salsType_onitemchanged" position="absolute 759 217 899 240" anchor="left top"/>
        <Static id="Static17" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 88 54 98 75" anchor="left top"/>
        <Static id="Static22" text="사업부" class="sta_WFSA_label" position="absolute 30 55 82 76" anchor="left top"/>
        <MuSearchComponent id="MuSearchComponent01" titletext="사업부 선택 Component" taborder="139" text="MuSearchComponent00" class="cmb_WF_Essential" position="absolute 98 55 318 76" bindDataset="ds_search" bindMuCdColumn="inqueryMuCd" appendText="" onItemChangedEvent="fn_muCd_changed"/>
        <Static id="Static23" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 318 54 348 75" anchor="left top"/>
        <Static id="Static32" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 414 54 423 75" anchor="left top"/>
        <Static id="Static33" text="부서" class="sta_WFSA_label" position="absolute 348 55 400 76" anchor="left top"/>
        <TmSearchComponent id="TmSearchComponent01" titletext="팀 검색용 Component" taborder="140" text="TmSearchComponent00" class="edt_WF_Essential" position="absolute 423 55 621 76" bindDataset="ds_search" bindTmCdColumn="inqueryTmCd" bindTmNmColumn="inqueryTmNm" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmCd_changed" eventBeforeTrigger=""/>
        <Static id="stc_cccdTitle" text="CC" class="sta_WFSA_label" position="absolute 654 55 714 76" anchor="left top"/>
        <Static id="Static37" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 717 55 727 76" anchor="left top"/>
        <UpjangSearchComponent id="UpjangSearchComponent01" titletext="업장 검색용 Component" taborder="141" text="UpjangSearchComponent00" class="edt_WF_Essential" position="absolute 727 55 926 76" bindDataset="ds_search" bindUpjangCodeColumn="inqueryCcCd" bindUpjangNameColumn="inqueryCcNm" eventBeforeTrigger="" eventAfterTrigger="fn_ccCd_changed" roleSetId=""/>
        <Static id="Static46" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 623 55 653 76" anchor="left top"/>
        <Static id="Static47" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 718 83 727 104" anchor="left top"/>
        <Static id="stc_upjangTitle" text="업장" class="sta_WFSA_label" position="absolute 654 54 716 75" anchor="left top"/>
        <UpjangSearchComponent id="UpjangSearchComponent00" titletext="업장 검색용 Component" taborder="142" text="UpjangSearchComponent00" position="absolute 727 55 926 76" bindDataset="ds_search" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="fn_upjangBeforeEvent" eventAfterTrigger="fn_upjangAfterEvent" roleSetId="StUpjang" class="edt_WF_Essential"/>
        <UpjangSearchComponent id="UpjangSearchComponent02" titletext="업장 검색용 Component" taborder="143" text="UpjangSearchComponent00" class="edt_WF_Essential" position="absolute 759 193 982 214" bindDataset="ds_receiveData" bindUpjangCodeColumn="transCcCd" bindUpjangNameColumn="transCcNm" eventBeforeTrigger="" eventAfterTrigger="fn_ccCd_changed" roleSetId=""/>
        <TmSearchComponent id="TmSearchComponent00" titletext="팀 검색용 Component" taborder="144" text="TmSearchComponent00" class="edt_WF_Essential" position="absolute 783 116 981 137" bindDataset="" bindTmCdColumn="" bindTmNmColumn="" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="" eventBeforeTrigger="" visible="false"/>
        <Grid id="Grid00" taborder="145" useinputpanel="false" position="absolute 56 373 857 571" binddataset="ds_listAr" visible="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
              </Columns>
              <Rows>
                <Row band="head" size="24"/>
                <Row band="body" size="24"/>
              </Rows>
              <Band id="head">
                <Cell col="0" disptype="normal" text="arAltNum"/>
                <Cell col="1" disptype="normal" text="arNum"/>
                <Cell col="2" disptype="normal" text="receiveNum"/>
                <Cell col="3" disptype="normal" text="fiscalDate"/>
                <Cell col="4" disptype="normal" text="occurDate"/>
                <Cell col="5" disptype="normal" text="receiveDate"/>
                <Cell col="6" disptype="normal" text="arAmt"/>
                <Cell col="7" disptype="normal" text="withdrawAmt"/>
                <Cell col="8" disptype="normal" text="arBalAmt"/>
                <Cell col="9" disptype="normal" text="receiveAmt"/>
                <Cell col="10" disptype="normal" text="balAmt"/>
                <Cell col="11" disptype="normal" text="muCd"/>
                <Cell col="12" disptype="normal" text="muNm"/>
                <Cell col="13" disptype="normal" text="ccCd"/>
                <Cell col="14" disptype="normal" text="ccNm"/>
                <Cell col="15" disptype="normal" text="acctCd"/>
                <Cell col="16" disptype="normal" text="custCd"/>
                <Cell col="17" disptype="normal" text="custNm"/>
                <Cell col="18" disptype="normal" text="remarks"/>
                <Cell col="19" disptype="normal" text="recdStatus"/>
                <Cell col="20" disptype="normal" text="mngmvArNum"/>
                <Cell col="21" disptype="normal" text="refNum"/>
                <Cell col="22" disptype="normal" text="taxYn"/>
                <Cell col="23" disptype="normal" text="chk"/>
                <Cell col="24" disptype="normal" text="transAltCount"/>
                <Cell col="25" disptype="normal" text="upjangCd"/>
                <Cell col="26" disptype="normal" text="upjangNm"/>
              </Band>
              <Band id="body">
                <Cell col="0" disptype="normal" text="bind:arAltNum"/>
                <Cell col="1" disptype="normal" text="bind:arNum"/>
                <Cell col="2" disptype="normal" text="bind:receiveNum"/>
                <Cell col="3" disptype="normal" text="bind:fiscalDate"/>
                <Cell col="4" disptype="normal" text="bind:occurDate"/>
                <Cell col="5" disptype="normal" text="bind:receiveDate"/>
                <Cell col="6" disptype="normal" text="bind:arAmt"/>
                <Cell col="7" disptype="normal" text="bind:withdrawAmt"/>
                <Cell col="8" disptype="normal" text="bind:arBalAmt"/>
                <Cell col="9" disptype="normal" text="bind:receiveAmt"/>
                <Cell col="10" disptype="normal" text="bind:balAmt"/>
                <Cell col="11" disptype="normal" text="bind:muCd"/>
                <Cell col="12" disptype="normal" text="bind:muNm"/>
                <Cell col="13" disptype="normal" text="bind:ccCd"/>
                <Cell col="14" disptype="normal" text="bind:ccNm"/>
                <Cell col="15" disptype="normal" text="bind:acctCd"/>
                <Cell col="16" disptype="normal" text="bind:custCd"/>
                <Cell col="17" disptype="normal" text="bind:custNm"/>
                <Cell col="18" disptype="normal" text="bind:remarks"/>
                <Cell col="19" disptype="normal" text="bind:recdStatus"/>
                <Cell col="20" disptype="normal" text="bind:mngmvArNum"/>
                <Cell col="21" disptype="normal" text="bind:refNum"/>
                <Cell col="22" disptype="normal" text="bind:taxYn"/>
                <Cell col="23" disptype="normal" text="bind:chk"/>
                <Cell col="24" disptype="normal" text="bind:transAltCount"/>
                <Cell col="25" disptype="normal" text="bind:upjangCd"/>
                <Cell col="26" disptype="normal" text="bind:upjangNm"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static36" text="To 업장" class="sta_WFDA_Label01" position="absolute 663 164 757 191" anchor="left top" style="font:Gulim,9;"/>
        <Combo id="cbo_upjang" taborder="146" innerdataset="@ds_upjang" codecolumn="upjangCd" datacolumn="upjangNm" onitemchanged="cbo_upjang_onitemchanged" position="absolute 759 166 981 190" anchor="left top" index="-1" class="cmb_WF_Essential"/>
        <Edit id="edt_upjang2" taborder="147" class="edt_WF_Essential" position="absolute 760 168 980 189" anchor="left top" readonly="true"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item1" compid="cal_fiscalDateFr" propid="text" datasetid="ds_receiveData" columnid="inqueryStartDate"/>
      <BindItem id="item23" compid="cal_fiscalDateTo" propid="text" datasetid="ds_receiveData" columnid="inqueryEndDate"/>
      <BindItem id="item22" compid="cal_receiveDate" propid="text" datasetid="ds_receiveData" columnid="receiveDate"/>
      <BindItem id="item0" compid="cbo_receiveType" propid="value" datasetid="ds_receiveData" columnid="receiveTypeCd"/>
      <BindItem id="item4" compid="edt_remark" propid="value" datasetid="ds_receiveData" columnid="remark"/>
      <BindItem id="item14" compid="msk_arWithdrawAmt" propid="value" datasetid="ds_receiveData" columnid="arWithdrawAmt"/>
      <BindItem id="item11" compid="msk_receiveAmt" propid="value" datasetid="ds_receiveData" columnid="receiveAmt"/>
      <BindItem id="item3" compid="cbo_salsType" propid="value" datasetid="ds_receiveData" columnid="salsClass"/>
      <BindItem id="item2" compid="cbo_upjang" propid="value" datasetid="ds_receiveData" columnid="upjangCd"/>
      <BindItem id="item5" compid="edt_upjang2" propid="value" datasetid="ds_receiveData" columnid="upjangNm"/>
    </Bind>
    <Objects>
      <Dataset id="ds_rdo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="lev" type="STRING" size="256"/>
          <Column id="Column1" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="lev">1</Col>
            <Col id="Column1">원료생산지</Col>
          </Row>
          <Row>
            <Col id="lev">0</Col>
            <Col id="Column1">함량표시</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_listAr" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="arAltNum" type="bigdecimal" size="255"/>
          <Column id="arNum" type="string" size="255"/>
          <Column id="receiveNum" type="string" size="255"/>
          <Column id="fiscalDate" type="string" size="255"/>
          <Column id="occurDate" type="string" size="255"/>
          <Column id="receiveDate" type="string" size="255"/>
          <Column id="arAmt" type="bigdecimal" size="255"/>
          <Column id="withdrawAmt" type="BIGDECIMAL" size="256"/>
          <Column id="arBalAmt" type="bigdecimal" size="255"/>
          <Column id="receiveAmt" type="bigdecimal" size="255"/>
          <Column id="balAmt" type="bigdecimal" size="255"/>
          <Column id="muCd" type="string" size="255"/>
          <Column id="muNm" type="string" size="255"/>
          <Column id="ccCd" type="string" size="255"/>
          <Column id="ccNm" type="string" size="255"/>
          <Column id="acctCd" type="string" size="255"/>
          <Column id="custCd" type="bigdecimal" size="255"/>
          <Column id="custNm" type="string" size="255"/>
          <Column id="remarks" type="string" size="255"/>
          <Column id="recdStatus" type="string" size="255"/>
          <Column id="mngmvArNum" type="STRING" size="256"/>
          <Column id="refNum" type="STRING" size="256"/>
          <Column id="taxYn" type="STRING" size="256"/>
          <Column id="chk" type="STRING" size="256"/>
          <Column id="transAltCount" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="salesUpjangNm" type="STRING" size="256"/>
          <Column id="salesUpjangCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="fiscalDateFr" type="STRING" size="256"/>
          <Column id="fiscalDateTo" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="arNum" type="STRING" size="256"/>
          <Column id="zeroAmtYn" type="STRING" size="256"/>
          <Column id="inqueryMuCd" type="STRING" size="256"/>
          <Column id="inqueryMuNm" type="STRING" size="256"/>
          <Column id="inqueryTmCd" type="STRING" size="256"/>
          <Column id="inqueryTmNm" type="STRING" size="256"/>
          <Column id="inqueryCcCd" type="STRING" size="256"/>
          <Column id="inqueryCcNm" type="STRING" size="256"/>
          <Column id="sysClass" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="inqueryCustCd" type="STRING" size="256"/>
          <Column id="inqueryCustNm" type="STRING" size="256"/>
          <Column id="inqueryUpjangCd" type="STRING" size="256"/>
          <Column id="inqueryUpjangNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_arType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="typeCd" type="STRING" size="256"/>
          <Column id="typeNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_receiveType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="typeCd" type="STRING" size="256"/>
          <Column id="typeNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_receiveData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="receiveNum" type="string" size="255"/>
          <Column id="receiveDate" type="string" size="255"/>
          <Column id="receiveOccurClass" type="string" size="255"/>
          <Column id="receiveTypeCd" type="string" size="255"/>
          <Column id="sysClass" type="string" size="255"/>
          <Column id="muCd" type="string" size="255"/>
          <Column id="muNm" type="string" size="255"/>
          <Column id="ccCd" type="string" size="255"/>
          <Column id="ccNm" type="string" size="255"/>
          <Column id="custCd" type="string" size="255"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="receiveAmt" type="bigdecimal" size="255"/>
          <Column id="deducAmt" type="bigdecimal" size="255"/>
          <Column id="arWithdrawAmt" type="bigdecimal" size="255"/>
          <Column id="advanceOccur" type="string" size="255"/>
          <Column id="advanceAlt" type="bigdecimal" size="255"/>
          <Column id="refNum" type="string" size="255"/>
          <Column id="batchId" type="string" size="255"/>
          <Column id="remark" type="string" size="255"/>
          <Column id="inqueryStartDate" type="string" size="255"/>
          <Column id="inqueryEndDate" type="string" size="255"/>
          <Column id="inqueryMuCd" type="string" size="255"/>
          <Column id="inqueryTmCd" type="string" size="255"/>
          <Column id="inqueryCcCd" type="string" size="255"/>
          <Column id="inqueryCcNm" type="string" size="255"/>
          <Column id="inqueryCustCd" type="bigdecimal" size="255"/>
          <Column id="inqueryCustNm" type="string" size="255"/>
          <Column id="inqueryArTypeCd" type="string" size="255"/>
          <Column id="inqueryArNum" type="string" size="255"/>
          <Column id="recdStatus" type="string" size="255"/>
          <Column id="zeroAmtYn" type="STRING" size="256"/>
          <Column id="allEditAmt" type="BIGDECIMAL" size="256"/>
          <Column id="transCcCd" type="string" size="255"/>
          <Column id="transCcNm" type="string" size="255"/>
          <Column id="transCustCd" type="string" size="255"/>
          <Column id="transCustNm" type="STRING" size="256"/>
          <Column id="salsClass" type="STRING" size="256"/>
          <Column id="acctCd" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="inqueryUpjangCd" type="STRING" size="256"/>
          <Column id="inqueryUpjangNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="inqueryMuCd" type="STRING" size="256"/>
          <Column id="inqueryTmCd" type="STRING" size="256"/>
          <Column id="inqueryCcCd" type="STRING" size="256"/>
          <Column id="inqueryCustCd" type="STRING" size="256"/>
          <Column id="inqueryStartDate" type="STRING" size="256"/>
          <Column id="inqueryEndDate" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="inqueryCcCd">title:CC코드,required:true</Col>
            <Col id="inqueryCustCd">title:From고객사,required:true</Col>
            <Col id="inqueryMuCd">title:사업부,required:true</Col>
            <Col id="inqueryTmCd">title:팀,required:true</Col>
            <Col id="inqueryCcCd">title:CC,required:true</Col>
            <Col id="inqueryCustCd">title:Fr 고객사,required:true</Col>
            <Col id="inqueryStartDate">title:회계시작일자,comparemin:inqueryEndDate:회계종료일자,required:false</Col>
            <Col id="inqueryEndDate">title:회계종료일자,comparemax:inqueryStartDate:회계시작일자,required:false</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_receiveDataValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="receiveDate" type="STRING" size="8"/>
          <Column id="receiveTypeCd" type="STRING" size="8"/>
          <Column id="remark" type="STRING" size="8"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="receiveDate">title:입금일자,required:true</Col>
            <Col id="receiveTypeCd">title:회계유형,required:true</Col>
            <Col id="remark">title:적요,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_salsType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="salsType" type="STRING" size="256"/>
          <Column id="salsTypeNm" type="STRING" size="256"/>
          <Column id="acctCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_common" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_upjang" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_receiveData2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="receiveNum" type="string" size="255"/>
          <Column id="receiveDate" type="string" size="255"/>
          <Column id="receiveOccurClass" type="string" size="255"/>
          <Column id="receiveTypeCd" type="string" size="255"/>
          <Column id="sysClass" type="string" size="255"/>
          <Column id="muCd" type="string" size="255"/>
          <Column id="muNm" type="string" size="255"/>
          <Column id="ccCd" type="string" size="255"/>
          <Column id="ccNm" type="string" size="255"/>
          <Column id="custCd" type="string" size="255"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="receiveAmt" type="bigdecimal" size="255"/>
          <Column id="deducAmt" type="bigdecimal" size="255"/>
          <Column id="arWithdrawAmt" type="bigdecimal" size="255"/>
          <Column id="advanceOccur" type="string" size="255"/>
          <Column id="advanceAlt" type="bigdecimal" size="255"/>
          <Column id="refNum" type="string" size="255"/>
          <Column id="batchId" type="string" size="255"/>
          <Column id="remark" type="string" size="255"/>
          <Column id="inqueryStartDate" type="string" size="255"/>
          <Column id="inqueryEndDate" type="string" size="255"/>
          <Column id="inqueryMuCd" type="string" size="255"/>
          <Column id="inqueryTmCd" type="string" size="255"/>
          <Column id="inqueryCcCd" type="string" size="255"/>
          <Column id="inqueryCcNm" type="string" size="255"/>
          <Column id="inqueryCustCd" type="bigdecimal" size="255"/>
          <Column id="inqueryCustNm" type="string" size="255"/>
          <Column id="inqueryArTypeCd" type="string" size="255"/>
          <Column id="inqueryArNum" type="string" size="255"/>
          <Column id="recdStatus" type="string" size="255"/>
          <Column id="zeroAmtYn" type="STRING" size="256"/>
          <Column id="allEditAmt" type="BIGDECIMAL" size="256"/>
          <Column id="transCcCd" type="string" size="255"/>
          <Column id="transCcNm" type="string" size="255"/>
          <Column id="transCustCd" type="string" size="255"/>
          <Column id="transCustNm" type="STRING" size="256"/>
          <Column id="salsClass" type="STRING" size="256"/>
          <Column id="acctCd" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="inqueryUpjangCd" type="STRING" size="256"/>
          <Column id="inqueryUpjangNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : Template
  파 일 명 : Template.xfdl
  기    능 : Design 및 Script Template 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.11.01   김윤기   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";
include "lib::SMCommon.xjs";
include "U_lib::lib_conversionCom.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_taxDay = fv_sToday;

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	TmSearchComponent01.applyAuthLevel(MuSearchComponent01);
	TmSearchComponent00.applyAuthLevel(MuSearchComponent01);
	UpjangSearchComponent01.setForcedRoleSet("CostCenter");
	UpjangSearchComponent01.applyAuthLevel(TmSearchComponent01);    //CC
	UpjangSearchComponent00.applyAuthLevel(TmSearchComponent01);    //업장
	UpjangSearchComponent02.setForcedRoleSet("CostCenter");
	UpjangSearchComponent02.applyAuthLevel(TmSearchComponent00);
	TmSearchComponent00.setTmCode("");

	if(!gfn_isNull(pReceiveNum)){
		fn_search();
	}
	
	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	// 업데이트여부를 체크할 DataSet, 여러개 있을 경우 ;로 구분
	v_ds_check = "ds_listAr";
	/*입금 정보 초기화*/
	if(gfn_isNull(pReceiveNum)){
	    fn_clearSearch();	//조회조건을 초기화한다.
		ds_receiveData.addRow();
		ds_receiveData.setColumn(0, "receiveNum", "");
		ds_receiveData.setColumn(0, "deducAmt", "0");
		ds_receiveData.setColumn(0, "receiveOccurClass", "RO03");		//입금 발생 구분
		edt_custNm.enable = true;
		UpjangSearchComponent02.enable	= false;
//		edt_ccCd.enable = false;
//		btn_ccCd.enable = false;
//		edt_ccNm.enable = false;
		edt_custNm.value = "";	
		edt_upjang2.visible = false;
			
		fn_chgCalDate();		
		cal_receiveDate.fn_initMonthCal(this, fv_taxDay, "fn_calendarToCallBack", ds_receiveData, "receiveDate");
		
		//식재사업부인 경우만 To업장 선택 사용 20180502 김호석 추가
		if (arrSchVal[0] == "2004") { 			
			cbo_upjang.visible = true;
		} else {
			cbo_upjang.visible = false;
		}
	}else{
		btn_change.visible=false;
		btn_transCancle.visible=true;
		cbo_receiveType.enable=false;
		cal_fiscalDateFr.enable=false;
		cal_fiscalDateTo.enable=false;
		edt_custNm.enable=true;
		MuSearchComponent01.enable		= false;
		TmSearchComponent01.enable		= false;
		UpjangSearchComponent01.enable  = false;
		UpjangSearchComponent00.enable  = false;
		UpjangSearchComponent02.enable	= false;
		//edt_ccCd.enable=false;
//		btn_ccCd.enable=false;
//		edt_ccNm.enable=false;
		//edt_inqueryCustCd.enable=false;
		edt_inqueryCustNm.enable=false;
		cal_receiveDate.fn_initMonthCal(this, fv_sToday, "fn_calendarToCallBack", ds_receiveData, "receiveDate");
		cal_receiveDate.enable=false;
		
		//To업장 정보 표시 20180502 김호석 추가
		edt_upjang2.visible = true;
		cbo_upjang.visible = false;
	}
	//저장 위치 셋팅
	ds_receiveData.setColumn(0, "batchId", "TRANS");
	
//	SCPopup.bind(this, "CcCode", 	"edt_ccNm", 	"btn_ccCd", 		null, {}, {after:"fn_popCcCdAfter"}); 	//CC코드팝업(입력)	
	
	gfn_setSalesTypeCd(this, "arType", "ds_arType", "001");	//채권유형코드
	gfn_setSalesTypeCd(this, "receiveType", "ds_receiveType", "002");	//입금유형코드
	
	//달력 초기화
	
	/*채권정보 초기화*/
	cal_fiscalDateFr.fn_initMonthCal(this, null, null, ds_receiveData, "inqueryStartDate");	
	cal_fiscalDateTo.fn_initMonthCal(this, null, null, ds_receiveData, "inqueryEndDate");	
	
    //매출유형   FS사업부의 매출유형만  sysClass : 11
    if (gfn_isNull(pReceiveNum)){
      fn_get_salsType();
    }
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 사업부Combo 조회 후 처리
 *---------------------------------------------------------------------------------------------*/

// function fn_triggerDatasetEvent(p, ds)
// {
// 	if (p.oid == "ds_dataSet")
// 	{
// 		SCCombo.bind(this, "MU", "cbo_mu", null, {defVal:ds.getColumn(0, "set1")}); //사업부 구분 Combo처리
// 	}
// }
function fn_calendarToCallBack()
{
	if(gfn_isNull(ds_search.getColumn(0,"inqueryCcCd"))){
		alert("업장 또는 CC를 선택해 주세요.");
		ds_receiveData.setColumn(0, "receiveDate", fv_sToday);
		return false;
	}
	//입금일자가 2015-10-01 이전 입력 안되게 체크
	mfn_GetCcMonthClsYn("C", ds_search.getColumn(0,"inqueryCcCd"), gfn_subStr(ds_receiveData.getColumn(0,"receiveDate"), 0, 6), "01");
	if (ds_common.getColumn(0, 0) == "Y")
	{
		if(gfn_isNull(pReceiveNum)){
			g_Message("EE", "해당월은 월마감이 완료되어 작업할 수 없습니다.");
			ds_receiveData.setColumn(0, "receiveDate", fv_taxDay);
//			return false; 
		}
	}
	ds_receiveData.setColumn(0, "inqueryEndDate", ds_receiveData.getColumn(0, "receiveDate"));	
}
/*달력 초기화*/
function fn_chgCalDate(){
	if (gfn_isNull(ds_search.getColumn(0,"inqueryCcCd"))){
		ds_receiveData.setColumn(0, "receiveDate", fv_sToday);
		ds_receiveData.setColumn(0, "inqueryEndDate", fv_sToday);
	}else{
		mfn_GetCcMonthClsYn("C", ds_search.getColumn(0,"inqueryCcCd"), gfn_subStr(gfn_addMonth(fv_sToday, -1), 0, 6), "01");
		if (ds_common.getColumn(0, 0) == "N")
		{
			fv_taxDay = gfn_getLastDate(gfn_addMonth(fv_sToday, -1));
			ds_receiveData.setColumn(0, "receiveDate", fv_taxDay);
			ds_receiveData.setColumn(0, "inqueryEndDate", fv_taxDay);
		}else{
			ds_receiveData.setColumn(0, "receiveDate", fv_sToday);
			ds_receiveData.setColumn(0, "inqueryEndDate", fv_sToday);
		}
	}
}

function fn_popCcCdAfter(p, data){
	//if(data.code != null && data.code != undefined){
	if(gfn_transNullToEmpty(data.code)){
		edt_ccCd.value = data.code;
		edt_ccNm.value = data.codeName;
		//edt_muCd.value = data.muCd;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_close()
{	
//	// v_ds_check 미사용시 변경사항 체크(입력 프로그램일때 변경되는 Dataset 전체 기술)
// 	if (gfn_dsIsUpdated(ds_listAr) == true) 
// 	{
// 		// 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
//         if (!gfn_confirm("confirm.before.movepage")) return false;
//     }
//     
//	// 조회프로그램에도 Return true; 기술해 주세요!
// 	return true;

	// v_ds_check 사용시 변경사항 체크
	if(gfn_length(v_ds_check) != 0)
	{	
		// v_ds_check 설정기준 변경사항 체크
		if (gfn_isDataChange() == true) 
		{		
			// 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
			if (!gfn_confirm("confirm.before.movepage")) return false;
		}
	}
    
	// 조회프로그램에도 Return true; 기술해 주세요!
	return true;
}


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{	
	// 조회시 Validation Check
	if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;

    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_list);

    var strSvcID    = "search";
    var strURL      = "sm/sar/receiveMgntPop/selectList.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_receiveData=ds_receiveData";
    var strArg      = "receiveNum=" + pReceiveNum;
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{	
	var nRow = ds_listAr.addRow();	
	
	ds_listAr.setColumn(nRow, "GUBUN", 'AD');
	ds_listAr.setColumn(nRow, "INPUT_USER", gfn_getUserId());
	
	// Grid 입력 cell 지정
	grd_list.setFocus();
	grd_list.setCellPos(1);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{
	var nRow = ds_listAr.rowposition;
	
	if(ds_listAr.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "삭제할 row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		ds_listAr.deleteRow(nRow);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
	 //식재사업부인 경우 업장 선택 필수 20180502 김호석
	 if (ds_receiveData.getColumn(0, "transCustCd") != "" && ds_upjang.rowcount > 0 && ds_receiveData.getColumn(0, "upjangCd") == null) {
		alert("업장선택은 필수입니다. ");
		return;
	 }
	 
	// v_ds_check 미사용시 변경사항 체크
 	if (gfn_dsIsUpdated(ds_listAr) == false)
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	/*전표 생성 유무 체크*/
	var jCount = 0;
	for(i = 0; i<ds_listAr.getRowCount(); i++){
		if(ds_listAr.getColumn(i, "journalzYn") == "N"){
			jCount = jCount + 1;
		}
	}
	if(ds_listAr.getRowCount() != jCount){
		alert("발생 전표가 생성된 데이터 입니다.\n\n입금 취소가 불가능합니다.");
		return;
	} 	 	
 	
	/*전표 생성 유무 체크*/
	if(ds_listAr.findRow("journalzYn","Y") > -1){
		alert("발생 전표가 생성된 데이터 입니다.\n\n입금 취소가 불가능합니다.");
		return;
	} 	

	if (gfn_validCheck(ds_receiveData, ds_receiveDataValid) == false)	return;
	
	if(msk_arWithdrawAmt.value==0){
		alert("처리 입금액을 입력해 주시기 바랍니다.");
		return;
	}
	
	//FS사업부인 경우는 매출유형을 입력해야 한다
	if (ds_search.getColumn(0,"inqueryMuCd") == "2002"){
	    if (gfn_isNull(cbo_salsType.value)){
	        alert("FS사업부는 매출유형을 입력하세요.");
	        return;
	    }
	}
	
	//재이관 여부 체크
	for(var i=0; i<ds_listAr.rowcount; i++){
		if(ds_listAr.getRowType(i) > 1){	//행 타입(1:Normal, 2:insert, 4:Update, 8:Delete)
			
			if(!gfn_isNull(ds_listAr.getColumn(i, "mngmvArNum"))){
				//재이관 제한 해제 2018.03.28 김호석(문재현대리, 이재웅대리 요청)
				//gfn_alert("채권번호 ["+ds_listAr.getColumn(i, 'arNum')+"]는\n이관처리할 수 없습니다.(재이관불가)");
				//ds_listAr.rowposition = i;
				//return false;
			}
			if(ds_listAr.getColumn(i, "taxYn") == "Y" && Number(ds_listAr.getColumn(i, "receiveAmt")) > 0){
				gfn_alert("이미 세금계산서가 발행된 채권정보는 이관처리/취소할 수 없습니다.");
				ds_listAr.rowposition = i;
				return false;
			}			
		}
	}	
	if(cbo_receiveType.value == "B07"){
		if(gfn_isNull(ds_receiveData.getColumn(0, "transCustCd"))){
			gfn_alert("msg.noselect", "To고객사");	// $1 을(를) 선택해 주십시요.
			//edt_custCd.setFocus();
			return false;
		}
		//식재사업부인 경우 To업장 필수선택 20180502 김호석 추가
		if (ds_search.getColumn(0,"inqueryMuCd") == "2004"){
			if(gfn_isNull(ds_receiveData.getColumn(0, "upjangCd"))){
				gfn_alert("msg.noselect", "To업장");	// $1 을(를) 선택해 주십시요.
				//edt_custCd.setFocus();
				return false;
			}
		}
	}else if(cbo_receiveType.value == "B16"){
		if(gfn_isNull(ds_receiveData.getColumn(0, "transCcCd"))){
			gfn_alert("msg.noselect", "업장명(CC코드)");	// $1 을(를) 선택해 주십시요.
			//edt_ccCd.setFocus();
			return false;
		}
	}	
	//금액 Over check
	for (i=0; i < ds_listAr.getRowCount(); i++){
		if(ds_listAr.getColumn(i, "receiveAmt") != 0) {
			if((ds_listAr.getColumn(i, "arBalAmt") - ds_listAr.getColumn(i, "receiveAmt")) < 0){
				alert("적용후 잔액이 0보다 작습니다.");
				ds_listAr.setColumn(i, "receiveAmt", "0");
				return;
			}
		}
	}
	
	//타부서 이관일경우 거래처는 기존 거래처 셋팅 해줌
	if(cbo_receiveType.value == "B16"){
		//edt_custCd.value = edt_inqueryCustCd.value;
		if(gfn_isNull(ds_receiveData.getColumn(0, "transCustCd"))){
			ds_receiveData.setColumn(0, "transCustCd", ds_search.getColumn(0,"inqueryCustCd"));
		}
	}

	//muCd, ccCd, upjangCd  ds_receiveData  셋팅
	ds_receiveData.setColumn(0,"inqueryMuCd", ds_search.getColumn(0,"inqueryMuCd"));
	ds_receiveData.setColumn(0,"inqueryTmCd", ds_search.getColumn(0,"inqueryTmCd"));
	ds_receiveData.setColumn(0,"inqueryCcCd", ds_search.getColumn(0,"inqueryCcCd"));
	//식재사업부인 경우는 선택한 업장코드가 들어가도록 수정, 그 외에는 기존처럼 20180502 김호석
	if (!(ds_search.getColumn(0,"inqueryMuCd") == "2004")){	
		ds_receiveData.setColumn(0,"upjangCd"   , ds_search.getColumn(0,"upjangCd"));
	}
	ds_receiveData.setColumn(0,"inqueryCustCd"   , ds_search.getColumn(0,"inqueryCustCd"));

    var strSvcID    = "save";
    var strURL      = "sm/sar/arCustTransferPop/saveList.xdo";
    var strInDs     = "ds_listAr=ds_listAr:U ds_receiveData=ds_receiveData";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_ar_search()
{	
    if (gfn_isNull(pReceiveNum)){
        ds_receiveData.setColumn(0,"inqueryMuCd", ds_search.getColumn(0,"inqueryMuCd"));
        ds_receiveData.setColumn(0,"inqueryTmCd", ds_search.getColumn(0,"inqueryTmCd"));
        ds_receiveData.setColumn(0,"inqueryCcCd", ds_search.getColumn(0,"inqueryCcCd"));
        ds_receiveData.setColumn(0,"inqueryCustCd", ds_search.getColumn(0,"inqueryCustCd"));
		if (ds_search.getColumn(0, "inqueryMuCd") == "2002"){
			ds_receiveData.setColumn(0,"upjangCd", ds_search.getColumn(0,"upjangCd"));  
			
			if(gfn_isNull(ds_receiveData.getColumn(0,"upjangCd"))){
				alert("업장을 선택해 주세요.");return;
			}
		}     		    
    } else {
        if (ds_search.rowcount == 0){
            ds_search.clearData();
            ds_search.addRow();
        }
        
        //사업부,팀,업장CC 공통으로 바뀌면서 property로 ds 바인딩이 어려움
        ds_search.setColumn(0,"muCd", ds_receiveData.getColumn(0,"muCd"));
        ds_search.setColumn(0,"inqueryMuCd", ds_receiveData.getColumn(0,"inqueryMuCd"));
        ds_search.setColumn(0,"ccCd", ds_receiveData.getColumn(0,"ccCd"));
        ds_search.setColumn(0,"inqueryTmCd", ds_receiveData.getColumn(0,"inqueryTmCd"));
        ds_search.setColumn(0,"inqueryTmNm", ds_receiveData.getColumn(0,"inqueryTmNm"));
        ds_search.setColumn(0,"inqueryCcCd", ds_receiveData.getColumn(0,"inqueryCcCd"));
        ds_search.setColumn(0,"inqueryCcNm", ds_receiveData.getColumn(0,"inqueryCcNm"));
        ds_search.setColumn(0,"upjangCd", ds_receiveData.getColumn(0,"upjangCd"));
        ds_search.setColumn(0,"upjangNm", ds_receiveData.getColumn(0,"upjangNm"));
        ds_search.setColumn(0,"inqueryCustCd", ds_receiveData.getColumn(0,"inqueryCustCd"));
        ds_search.setColumn(0,"inqueryCustNm", ds_receiveData.getColumn(0,"inqueryCustNm"));
        
        //ds_receiveData.setColumn(0,"inqueryMuCd", ds_receiveData.getColumn(0,"muCd"));
        //ds_receiveData.setColumn(0,"inqueryCcCd", ds_receiveData.getColumn(0,"ccCd"));
        
		fn_changegCcUpjang(); 
    }
    
	// 조회시 Validation Check
	if (gfn_validCheck(ds_receiveData, ds_searchValid, true) == false) return;
	
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_list);
    
    //검색 시 업장조건은 빠지도록 설정 20180502 김호석(해당 고객사 전체 내역 나오도록)
    var nRowCnt = ds_receiveData2.assign(ds_receiveData);
	ds_receiveData2.setColumn(0,"upjangCd", "");
	ds_receiveData2.setColumn(0,"upjangNm", "");
	
    var strSvcID    = "searchDetail";
    var strURL      = "sm/sar/receiveMgntPop/selectDetail.xdo";
    var strInDs     = "ds_search=ds_receiveData2:A";
    var strOutDs    = "ds_listAr=ds_listAr";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}
/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		// 코드분류 조회
        case "search" :
            if (ds_receiveData.rowcount > 0){
                MuSearchComponent01.setMuCode(ds_receiveData.getColumn(0,"inqueryMuCd"));       
			}  
			fn_ar_search();
            //trace(ds_listAr.saveXML());
            fn_get_salsType();
            break;
        // 업장조회
        case "searchUpjang" :
					
			cbo_upjang.index = 0;  				
            
            break;
        
        // 저장
        case "save" :
			gfn_alert("이관 처리가 완료 되었습니다.");	// 저장 되었습니다.
			opener.fn_search();
			close();
            break;  
            
         // 취소
        case "cancle" :
			gfn_alert("이관 취소 처리가 완료 되었습니다.");	// 저장 되었습니다.
			opener.fn_search();
			close();
            break;    
                       
        case "receiveType" : 	//유형코드 기본값 셋팅
			cbo_receiveType.value= "B07";
			ds_receiveType.filter("typeCd == 'B07' || typeCd == 'B16'");
			break;
			
		case "searchSalsType" : 	//매출유형 셋팅 후 처리(계정코드 가져오자)
		    cbo_salsType_onitemchanged();
			break;
    }
}


/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회조건 초기화
 *---------------------------------------------------------------------------------------------*/
function fn_clearSearch(){

	ds_search.clearData();
	var nRow = ds_search.addRow();
	
    ds_search.setColumn(nRow, "inqueryMuCd", g_Mu_Cd);
	ds_search.setColumn(nRow, "inqueryTmCd", g_Tm_Cd);
	ds_search.setColumn(nRow, "inqueryTmNm", g_Tm_Nm);
	ds_search.setColumn(nRow, "inqueryCcCd", g_Cc_Cd);
	ds_search.setColumn(nRow, "inqueryCcNm", g_Cc_Nm);

	if(arrSchVal.length > 0){
		ds_search.setColumn(0, "inqueryMuCd",    	arrSchVal[0]);
		ds_search.setColumn(0, "inqueryMuNm",    	arrSchVal[1]);
		ds_search.setColumn(0, "inqueryTmCd",    	arrSchVal[2]);
		ds_search.setColumn(0, "inqueryTmNm",    	arrSchVal[3]);
		ds_search.setColumn(0, "inqueryCcCd",    	arrSchVal[4]);
		ds_search.setColumn(0, "inqueryCcNm",    	arrSchVal[5]);
		ds_search.setColumn(0, "inqueryCustCd",  	arrSchVal[6]);
		ds_search.setColumn(0, "inqueryCustNm",     arrSchVal[7]);

		if (ds_search.getColumn(0, "inqueryMuCd") == "2002"){
			if (g_Cc_Cd == arrSchVal[4]) {
				ds_search.setColumn(0, "upjangCd",   g_Upjang);
				ds_search.setColumn(0, "upjangNm",   g_UpjangNm);
				ds_receiveData.setColumn(0, "upjangCd",   g_Upjang);
				ds_receiveData.setColumn(0, "upjangNm",   g_UpjangNm);
			}			
		}
		MuSearchComponent01.setMuCode(arrSchVal[0]);
    
		fn_changegCcUpjang();
	}
//	ds_search.setColumn(nRow, "inqueryCcCd", g_Cc_Cd);
//	ds_search.setColumn(nRow, "inqueryCcNm", g_Cc_Nm);
//	ds_search.setColumn(nRow, "upjangCd", g_Upjang);
//	ds_search.setColumn(nRow, "upjangNm", g_UpjangNm);
	
// 	ds_search.setColumn(nRow, "inqueryMuCd", MuSearchComponent01.getMuCode());
// 	ds_search.setColumn(nRow, "inqueryTmCd", TmSearchComponent01.getTmCode());
// 	ds_search.setColumn(nRow, "inqueryTmNm", TmSearchComponent01.getTmName());
// 	ds_search.setColumn(nRow, "inqueryCcCd", UpjangSearchComponent01.getUpjangCode());
// 	ds_search.setColumn(nRow, "inqueryCcNm", UpjangSearchComponent01.getUpjangName());
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매출유형 가져오기
 *---------------------------------------------------------------------------------------------*/
function fn_get_salsType(){
    ds_search.setColumn(0,"sysClass","11");
    var strSvcID    = "searchSalsType";
    var strURL      = "/sm/ssi/saleRevenueTypeMgnt/selectList.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_salsType=ds_list";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 사업부 변경시 부서, CC 초기화 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_muCd_changed(){
    ds_search.setColumn(0, "inqueryTmCd",  "");
    ds_search.setColumn(0, "inqueryTmNm",  "");
    ds_search.setColumn(0, "inqueryCcCd",  "");
    ds_search.setColumn(0, "inqueryCcNm",  "");
    ds_search.setColumn(0, "upjangCd"   ,  "");
    ds_search.setColumn(0, "upjangNm"   ,  "");
    //식재사업부인 경우만 To업장 선택 사용 20180502 김호석 추가
    if (ds_search.getColumn(0, "inqueryMuCd") == "2004") { 
		ds_upjang.clear();
		cbo_upjang.visible = true;
	} else {
		ds_upjang.clear();
		cbo_upjang.visible = false;
	}
    fn_changegCcUpjang();
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 부서부 변경시 부서, CC 초기화 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_tmCd_changed(){
    ds_search.setColumn(0, "inqueryCcCd",  "");
    ds_search.setColumn(0, "inqueryCcNm",  "");
    ds_search.setColumn(0, "upjangCd"   ,  "");
    ds_search.setColumn(0, "upjangNm"   ,  "");
    //식재사업부인 경우 업장 선택가능하도록 추가 20180502 김호석
    if (ds_search.getColumn(0, "inqueryMuCd") == "2004") { 
		ds_upjang.clear();
		cbo_upjang.visible = true;
	} else {
		ds_upjang.clear();
		cbo_upjang.visible = false;
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명      : CC 변경시 부서, CC 초기화 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_ccCd_changed(){

	//식재사업부인 경우 업장 선택가능하도록 추가 20180502 김호석
	if (ds_search.getColumn(0, "inqueryMuCd") == "2004") { 
		ds_upjang.clear();
		cbo_upjang.visible = true;
	} else {
		ds_upjang.clear();
		cbo_upjang.visible = false;
	}
 //   ds_search.setColumn(0, "upjangCd"   ,  "");
 //   ds_search.setColumn(0, "upjangNm"   ,  "");
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 급식에서의 화면 처리
 *---------------------------------------------------------------------------------------------*/
function fn_changegCcUpjang(){
    if (ds_search.getColumn(0, "inqueryMuCd") == "2002"){
		UpjangSearchComponent01.visible = false;
		stc_cccdTitle.visible = false;
		stc_upjangTitle.visible = true;
		UpjangSearchComponent00.visible = true;
    }else{
		UpjangSearchComponent01.visible = true;
		stc_cccdTitle.visible = true;
		stc_upjangTitle.visible = false;
		UpjangSearchComponent00.visible = false;  
    }    
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 업장의 팝업을 호출하기 전에 발생되는 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_upjangBeforeEvent(obj, cls)
{
	cls.setTmCd(TmSearchComponent01.getTmCode());	//cls.setTmCd(edt_tm.getTmCode());
	
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 업장의 팝업을 호출한 후에 발생되는 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_upjangAfterEvent(obj, cls)
{
    ds_search.setColumn(0,"inqueryMuCd", cls.muCd);
    ds_search.setColumn(0,"inqueryTmCd", cls.tmCd);
	ds_search.setColumn(0,"inqueryCcCd", cls.ccCd);
	ds_search.setColumn(0,"inqueryCcNm", cls.ccNm);
	
	fn_chgCalDate();
	
	return true;
}

function fn_setCcCd(p){
    //FS사업부인경우 2002 : ScoUpjangCust
	if(MuSearchComponent01.getMuCode() == "2002"){
		if(gfn_isNull(ds_search.getColumn(0,"upjangCd"))){
			alert("업장을 선택해 주세요.");
			return;
		}	
		p.setQid("ScoUpjangCust");
		p.setUpjang(ds_search.getColumn(0,"upjangCd"));
	}else{
		p.setQid("StCust");
		p.setUpjang("");
	}
	
	return true;
}

//거래처 선택 후 업장 콤보 활성화
//식재사업부인 경우 업장 선택가능하도록 추가 20180502 김호석
function fn_setUpjang(p){
	
	if(MuSearchComponent01.getMuCode() == "2004"){
	
    	var strSvcID    = "searchUpjang";
    	var strURL      = "sm/sar/arCustTransferPop/selectUpjangList.xdo";
    	var strInDs     = "";
   		var strOutDs    = "ds_upjang=ds_upjang";
	    var strArg      = "custCd=" + ds_receiveData.getColumn(0, "transCustCd");
    	var strCallback = "fn_callBack";
	    var bAsync      = true;
    
	    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
    }

}

/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : form에서 Key Down시 단축키들 지정(공통에서 자동생성, 화면에 스크립트 작성시 화면 스크립트만 실행됨)
 *---------------------------------------------------------------------------------------------*/
// function form_onkeydown(obj:Form, e:KeyEventInfo)
// {
// 	gfn_formKeyDown(obj, e);
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : Grid Header Click시 정렬(공통에서 자동생성, 화면에 스크립트 작성시 화면 스크립트만 실행됨)
 *---------------------------------------------------------------------------------------------*/
// function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
// {
// 	gfn_gridSort(obj, e);
// }


/************************************************************************************************
 * 금액 변경
************************************************************************************************/
function grd_list_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	var iArBalAmt	= 0;	//잔액
	var iReceiveAmt	= 0;	//적용금액
	if(e.cell == 0){	//적용금액 Setting
		if(ds_listAr.getColumn(ds_listAr.rowposition, "chk") == "0"){
			ds_listAr.setColumn(ds_listAr.rowposition, "receiveAmt", 0);				
		}else{
			iArBalAmt = ds_listAr.getColumn(ds_listAr.rowposition, "arBalAmt");	//obj.getCellValue(e.row, e.cell);
			iReceiveAmt = ds_listAr.getColumn(ds_listAr.rowposition, "receiveAmt");	//obj.getCellValue(e.row, e.cell+1);
			if(iArBalAmt == iReceiveAmt){
				ds_listAr.setColumn(ds_listAr.rowposition, "receiveAmt", 0);
			}else{
				ds_listAr.setColumn(ds_listAr.rowposition, "receiveAmt", iArBalAmt);
			}
		}
	}
	if(e.cell == 5){	//적용금액 Setting
		iArBalAmt = ds_listAr.getColumn(ds_listAr.rowposition, "arBalAmt");	//obj.getCellValue(e.row, e.cell);
		iReceiveAmt = ds_listAr.getColumn(ds_listAr.rowposition, "receiveAmt");	//obj.getCellValue(e.row, e.cell+1);
		if(iArBalAmt == iReceiveAmt){
			ds_listAr.setColumn(ds_listAr.rowposition, "receiveAmt", 0);
			ds_listAr.setColumn(ds_listAr.rowposition, "chk", "0")
		}else{
			ds_listAr.setColumn(ds_listAr.rowposition, "receiveAmt", iArBalAmt);
			ds_listAr.setColumn(ds_listAr.rowposition, "chk", "1")
		}
	}
	fn_changeAmtRe();
}

function fn_changeAmtRe()
{
 	msk_receiveAmt.value = ds_listAr.getSum("receiveAmt");
 	msk_arWithdrawAmt.value = msk_receiveAmt.value;
}


function btn_transCancle_onclick(obj:Button,  e:ClickEventInfo)
{
	/*전표 생성 유무 체크*/
	var jCount = 0;
	for(i = 0; i<ds_listAr.getRowCount(); i++){
		if(ds_listAr.getColumn(i, "transAltCount") > 0){
			gfn_alert("이관된 채권에 대해서 대체 처리된 내역이 발생 하여 이관취소할 수 없습니다.");
			ds_listAr.rowposition = i;
			return false;
		}	
		//전표체크 잘못되어 수정 Y=>J
		if(ds_listAr.getColumn(i, "journalzYn") == "J"){
			alert("발생 전표가 생성된 데이터 입니다.\n\n입금 취소가 불가능합니다.");
			ds_listAr.rowposition = i;
			return false;
		}
	}
//	if(ds_listAr.getRowCount() != jCount){
//		alert("발생 전표가 생성된 데이터 입니다.\n\n입금 취소가 불가능합니다.");
//		return;
//	} 	
	
	// 이관 취소 처리
	if(gfn_isNull(pReceiveNum)){
		alert("이관 처리를 한 후 취소가 가능합니다.");
		return;
	}

	//재이관 여부 체크
	for(var i=0; i<ds_listAr.rowcount; i++){
		if(ds_listAr.getRowType(i) > 1){	//행 타입(1:Normal, 2:insert, 4:Update, 8:Delete)

			if(ds_listAr.getColumn(i, "taxYn") == "Y" && Number(ds_listAr.getColumn(i, "receiveAmt")) > 0){
				gfn_alert("이미 세금계산서가 발행된 채권정보는 이관처리/취소할 수 없습니다.");
				ds_listAr.rowposition = i;
				return false;
			}			
		}
	}	
	
	var rtVal = gfn_confirm("이관된 채권에 대해서 취소 하시겠습니까?");	
	if (rtVal == false) 
	{	
		return;
	}
	
    var strSvcID    = "cancle";
    var strURL      = "sm/sar/arCustTransferPop/cancleList.xdo";
    var strInDs     = "ds_listAr=ds_listAr ds_receiveData=ds_receiveData";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
	
}


function cbo_receiveType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(cbo_receiveType.value == "B07"){
		edt_custNm.enable = true;
		UpjangSearchComponent02.enable=false;
		cbo_upjang.enable = true;	
		//edt_custCd.enable = true;
		//edt_ccCd.enable = false;
		//btn_ccCd.enable = false;
		//edt_ccNm.enable = false;
		//조건 초기화 20180502 김호석
		ds_receiveData.setColumn(0,"transCcCd","");
		ds_receiveData.setColumn(0,"transCcNm","");
		ds_receiveData.setColumn(0,"transCustCd","");
		ds_receiveData.setColumn(0,"transCustNm","");
		cbo_upjang.value = "";
		
	}else if(cbo_receiveType.value == "B16"){
		edt_custNm.enable = false;
		UpjangSearchComponent02.enable=true;
		cbo_upjang.enable = false;		
		//edt_custCd.enable = false;
		//edt_ccCd.enable = true;
		//btn_ccCd.enable = true;
		//edt_ccNm.enable = true;
		//조건 초기화 20180502 김호석
		ds_receiveData.setColumn(0,"transCustCd","");
		ds_receiveData.setColumn(0,"transCustNm","");
		cbo_upjang.value = "";
		ds_upjang.clear();
		
	}
}

/************************************************************************************************
 * 매출유형 변경시 계정코드 가져오기
************************************************************************************************/
function cbo_salsType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	var val = cbo_salsType.value;
	var nRow  = ds_salsType.findRow("salsType", val);
	
	if(ds_receiveData.rowcount == 0){
	    ds_receiveData.clearData();
	    ds_receiveData.addRow();
	}
	ds_receiveData.setColumn(0,"acctCd", ds_salsType.getColumn(nRow,"acctCd"));
}

function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	//체크박스 클릭
	if(e.cell == 0){
		if(obj.getCellProperty("Head", e.cell, "text") == 0){
			obj.setCellProperty("Head", e.cell, "text", 1);
			if(ds_listAr.rowcount > 0){
				for(var i=0; i<ds_listAr.rowcount; i++){
					ds_listAr.setColumn(i, "chk", "0");	
					ds_listAr.setColumn(i, "receiveAmt", 0);	
				}
			}
		}else{
			obj.setCellProperty("Head", e.cell, "text", 0);
			if(ds_listAr.rowcount > 0){
				for(var i=0; i<ds_listAr.rowcount; i++){
					iArBalAmt = ds_listAr.getColumn(i, "arBalAmt");
					iReceiveAmt = ds_listAr.getColumn(i, "receiveAmt");	
					ds_listAr.setColumn(i, "chk", "1");	
					if(iArBalAmt == iReceiveAmt){
						ds_listAr.setColumn(i, "receiveAmt", 0);
					}else{
						ds_listAr.setColumn(i, "receiveAmt", iArBalAmt);
					}
				}
			}
		}
	}
	else {
		gfn_gridSort(obj, e);
	}	
	

	fn_changeAmtRe();
}
]]></Script>
  </Form>
</FDL>
