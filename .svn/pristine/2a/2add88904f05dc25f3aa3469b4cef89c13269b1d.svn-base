<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FSM90100E" classname="SAMPLE01" inheritanceid="" position="absolute 0 0 1380 800" titletext="레시피검색및등록" onload="form_onload" onclose="FSM90100E_onclose" onbeforeclose="FSM90100E_onbeforeclose">
    <Layouts>
      <Layout>
        <Div id="Div00" taborder="42" text="Div00" position="absolute 596 85 1328 112">
          <Layouts>
            <Layout>
              <Static id="Static48" text="식단구성" class="sta_WF_Title01" position="absolute 0 9 88 27" anchor="left top"/>
              <Static id="Static50" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 -4 373 9" anchor="default"/>
              <Button id="btn_qality" taborder="1" text="품질평가" onclick="btn_qality_onclick" class="btn_WF_Function" position="absolute 591 2 656 22" anchor="top right"/>
              <Static id="Static51" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 665 -4 723 2" anchor="top right"/>
              <Button id="btn_nut" taborder="2" text="영양평가" onclick="btn_nut_onclick" class="btn_WF_Function" position="absolute 658 2 723 22" anchor="top right"/>
              <Button id="btn_photo" taborder="3" text="식단사진" onclick="btn_photo_onclick" class="btn_WF_Function" position="absolute 524 2 589 22" anchor="top right"/>
              <Static id="Static68" text="영양소는 저장 후 반영됩니다." class="sta_WF_DiscInfo" position="absolute 246 8 452 23" anchor="default"/>
              <CheckBox id="chk_disuse" taborder="4" text="폐기율 적용" onclick="chk_disuse_onclick" position="absolute 93 5 179 25" tooltiptext="체크시 폐기율이 적용되어&#10;영양소가 계산됩니다." anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="Div01" taborder="43" text="Div01" position="absolute 13 84 562 219">
          <Layouts>
            <Layout>
              <Static id="Static34" class="sta_WFSA_Labelbg" position="absolute 2 29 549 122"/>
              <Static id="Static35" text="W10" visible="false" position="absolute 17 29 536 39" style="background:#ff000055;align:center middle;"/>
              <Static id="Static36" text="W10" visible="false" position="absolute 17 112 536 122" style="background:#ff000055;align:center middle;"/>
              <Static id="Static37" text="W15" visible="false" position="absolute 2 29 17 121" style="background:#ff000055;align:center middle;"/>
              <Static id="Static38" text="W15" visible="false" position="absolute 536 29 551 122" style="background:#ff000055;align:center middle;"/>
              <Static id="Static39" text="W05." visible="false" position="absolute 17 60 536 65" style="background:#ff000055;align:center middle;"/>
              <Combo id="cbo_recipeNm" taborder="1" imemode="hangul" innerdataset="@ds_cboRecipeNm" codecolumn="NM" datacolumn="NM" type="filter" displayrowcount="15" ontextchanged="cbo_recipeNm_ontextchanged" onitemchanged="cbo_recipeNm_onitemchanged" onkillfocus="cbo_recipeNm_onkillfocus" onkeydown="cbo_recipeNm_onkeydown" position="absolute 17 39 186 60" userchange="0"/>
              <Combo id="cbo_recipeClass" taborder="2" innerdataset="@ds_cboRecipeClass" codecolumn="CD" datacolumn="NM" position="absolute 192 39 361 60"/>
              <Combo id="cbo_recipeType" taborder="3" innerdataset="@ds_cboRecipeType" codecolumn="CODE" datacolumn="CODE_NAME" onitemchanged="cbo_recipeType_onitemchanged" position="absolute 367 39 536 60"/>
              <Combo id="cbo_material" taborder="4" innerdataset="@ds_cboMaterial" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 192 65 361 86"/>
              <Combo id="cbo_element" taborder="5" innerdataset="@ds_cboElement" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 367 65 536 86"/>
              <Combo id="cbo_cuisineType" taborder="6" innerdataset="@ds_cboCuisineType" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 17 65 186 86"/>
              <MaskEdit id="MaskEdit00" taborder="7" position="absolute 55 91 127 112"/>
              <MaskEdit id="MaskEdit01" taborder="8" position="absolute 152 91 224 112"/>
              <Static id="Static40" text="~" position="absolute 128 93 152 112" style="align:center middle;"/>
              <Static id="Static41" text="W05." visible="false" position="absolute 17 86 536 91" style="background:#ff000055;align:center middle;"/>
              <Static id="Static42" text="원가" class="sta_WFSA_label" position="absolute 17 92 69 113" anchor="left top"/>
              <MaskEdit id="MaskEdit03" taborder="9" enable="false" visible="false" position="absolute 464 91 536 112"/>
              <Static id="Static44" text="~" visible="false" position="absolute 440 93 464 112" style="align:center middle;"/>
              <MaskEdit id="MaskEdit02" taborder="10" enable="false" visible="false" position="absolute 367 91 439 112"/>
              <Static id="Static43" text="판매가" class="sta_WFSA_label" visible="false" position="absolute 315 92 367 113" anchor="left top"/>
              <Static id="Static31" text="레시피검색" class="sta_WF_Title01" position="absolute 2 11 90 29" anchor="left top"/>
              <CheckBox id="chk_stdRecipe" taborder="11" text="표준레시피" value="0" truevalue="1" falsevalue="0" onclick="chk_recipe_onclick" position="absolute 100 7 186 27"/>
              <CheckBox id="chk_upjangRecipe" taborder="12" text="업장표준레시피" value="0" truevalue="1" falsevalue="0" onclick="chk_recipe_onclick" position="absolute 191 7 301 27"/>
              <CheckBox id="chk_enfRecipe" taborder="13" text="그룹레시피" value="0" truevalue="1" falsevalue="0" position="absolute 306 7 416 27"/>
              <Button id="btn_searchRecipe" taborder="14" text="조회" onclick="btn_searchRecipe_onclick" class="btn_WF_Function" position="absolute 496 4 549 24"/>
              <ImageViewer id="img_open" taborder="15" image="URL('theme://Images/new/btn_WFDA_Open.png')" onclick="img_open_onclick" position="absolute 514 121 549 133" style="border:1 solid #cacacaff ;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static49" text="w5" class="Guide01_AreaRed" visible="false" position="absolute 591 81 596 465" anchor="top right"/>
        <Splitter id="sp_line2" position="absolute 588 84 596 463">
          <Formats>
            <Format id="default">
              <SplitterItems id="items">
                <SplitterItem id="item00" bindtype="resize" position="leftortop" offset="25" componentid="grd_recipeList"/>
                <SplitterItem id="item01" bindtype="resize" position="rightorbottom" offset="2" componentid="grd_menuList"/>
                <SplitterItem id="item02" bindtype="move" position="leftortop" offset="1" componentid="btn_addRecipe"/>
                <SplitterItem id="item03" bindtype="move" position="rightorbottom" offset="2" componentid="Div00"/>
                <SplitterItem id="item04" bindtype="resize" position="leftortop" offset="25" componentid="Div01"/>
              </SplitterItems>
            </Format>
          </Formats>
        </Splitter>
        <Grid id="grd_menuList" taborder="17" useinputpanel="false" position="absolute 596 111 1365 464" binddataset="ds_menuList" autoenter="select" oncellclick="grd_menuList_oncellclick" onheadclick="grd_menuList_onheadclick" anchor="left top right">
          <Formats>
            <Format id="GRD_DISUSE">
              <Columns>
                <Column size="30"/>
                <Column size="40"/>
                <Column size="40"/>
                <Column size="50"/>
                <Column size="25"/>
                <Column size="70"/>
                <Column size="170"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="40"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="40" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" class="grd_WF_Essential" text="순서"/>
                <Cell col="2" class="grd_WF_Essential" text="구축"/>
                <Cell col="3" style="linespace:5;" text="대표&#13;&#10;레시피" taborder="undefined"/>
                <Cell col="4" colspan="2" text="레시피코드" taborder="undefined"/>
                <Cell col="6" text="레시피명"/>
                <Cell col="7" class="grd_WF_Essential" text="구성요소"/>
                <Cell col="8" text="원가"/>
                <Cell col="9" text="원가율&#13;&#10;(%)"/>
                <Cell col="10" class="grd_WF_Essential" text="판매가&#13;&#10;VAT제외"/>
                <Cell col="11" class="grd_WF_Essential" text="예상&#13;&#10;판매량"/>
                <Cell col="12" text="색"/>
                <Cell col="13" text="에너지&#13;&#10;(Kcal)"/>
                <Cell col="14" text="나트륨&#13;&#10;(mg)"/>
                <Cell col="15" text="단백질&#13;&#10;(g)"/>
                <Cell col="16" text="당질&#13;&#10;(g)"/>
                <Cell col="17" text="지질&#13;&#10;(g)"/>
                <Cell col="18" text="비타민A&#13;&#10;(R,E)"/>
                <Cell col="19" text="비타민B1&#13;&#10;(mg)"/>
                <Cell col="20" text="비타민B2&#13;&#10;(mg)"/>
                <Cell col="21" text="비타민C&#13;&#10;(mg)"/>
                <Cell col="22" text="칼슘&#13;&#10;(mg)"/>
                <Cell col="23" text="철&#13;&#10;(mg)"/>
                <Cell col="24" text="나이아신&#13;&#10;(mg)"/>
              </Band>
              <Band id="body">
                <Cell style="background:white;background2:white;" expr="expr:currow + 1"/>
                <Cell col="1" displaytype="text" edittype="text" style="align:center;background:white;background2:white;" text="bind:RECIPE_SEQ" editautoselect="true"/>
                <Cell col="2" displaytype="checkbox" edittype="checkbox" style="background:white;background2:white;" text="bind:CREAT"/>
                <Cell col="3" displaytype="checkbox" edittype="none" style="align:center;background:white;background2:white;" text="bind:ATTR02"/>
                <Cell col="4" displaytype="image" style="align:center;background:EXPR(ATTR02 == '1' ? &quot;lightskyblue&quot; : &quot;white&quot;);background2:EXPR(ATTR02 == '1' ? &quot;lightskyblue&quot; : &quot;white&quot;);" text="theme://images/new/grd_WF_ExpandImageX.png"/>
                <Cell col="5" style="background:EXPR(ATTR02 == '1' ? &quot;lightskyblue&quot; : &quot;white&quot;);background2:EXPR(ATTR02 == '1' ? &quot;lightskyblue&quot; : &quot;white&quot;);" text="bind:RECIPE_CD"/>
                <Cell col="6" displaytype="text" style="background:EXPR(ATTR02 == '1' ? &quot;lightskyblue&quot; : &quot;white&quot;);background2:EXPR(ATTR02 == '1' ? &quot;lightskyblue&quot; : &quot;white&quot;);" text="bind:RECIPE_NAME"/>
                <Cell col="7" displaytype="combo" edittype="combo" style="background:white;background2:white;" text="bind:MAJOR_DISH_INFO" combodataset="ds_Const" combocodecol="CD" combodatacol="NM"/>
                <Cell col="8" displaytype="number" style="background:white;background2:white;" text="bind:RECIPE_COST"/>
                <Cell col="9" displaytype="number" style="background:white;background2:white;" text="bind:COST_RATE"/>
                <Cell col="10" displaytype="number" edittype="masknumber" style="background:white;background2:white;" text="bind:SALE_PRICE"/>
                <Cell col="11" displaytype="number" edittype="masknumber" style="background:white;background2:white;" text="bind:EXPECT_SALE_QTY"/>
                <Cell col="12" displaytype="image" style="align:center;background:white;background2:white;" text="expr:gfn_nvl(COLOR)==&quot;&quot;?&quot;&quot;:&quot;URL('theme://convertImages/&quot;+COLOR+&quot;.bmp')&quot;"/>
                <Cell col="13" displaytype="number" style="background:white;background2:white;" text="bind:SS_KCAL"/>
                <Cell col="14" displaytype="number" style="background:white;background2:white;" text="bind:SS_NA"/>
                <Cell col="15" displaytype="number" style="background:white;background2:white;" text="bind:SS_PROT"/>
                <Cell col="16" displaytype="number" style="background:white;background2:white;" text="bind:SS_CARBO"/>
                <Cell col="17" displaytype="number" style="background:white;background2:white;" text="bind:SS_FAT"/>
                <Cell col="18" displaytype="number" style="background:white;background2:white;" text="bind:SS_VITA"/>
                <Cell col="19" displaytype="number" style="background:white;background2:white;" text="bind:SS_THIA"/>
                <Cell col="20" displaytype="number" style="background:white;background2:white;" text="bind:SS_RIBO"/>
                <Cell col="21" displaytype="number" style="background:white;background2:white;" text="bind:SS_VITA_C"/>
                <Cell col="22" displaytype="number" style="background:white;background2:white;" text="bind:SS_CA"/>
                <Cell col="23" displaytype="number" style="background:white;background2:white;" text="bind:SS_FE"/>
                <Cell col="24" displaytype="number" style="background:white;background2:white;" text="bind:SS_NIASIN"/>
              </Band>
              <Band id="summary">
                <Cell colspan="6" style="align:center;" text="합계"/>
                <Cell col="6" style="align:left;"/>
                <Cell col="7"/>
                <Cell col="8" displaytype="number" text="expr:getSum('RECIPE_COST')" mask="#,##0"/>
                <Cell col="9" displaytype="number" text="expr:getAvg('COST_RATE')" mask="#,##0"/>
                <Cell col="10" displaytype="number" text="expr:getSum('SALE_PRICE')" mask="#,##0"/>
                <Cell col="11" displaytype="number" text="expr:getSum('EXPECT_SALE_QTY')" mask="#,##0"/>
                <Cell col="12"/>
                <Cell col="13" displaytype="number" text="expr:getSum('SS_KCAL')"/>
                <Cell col="14" displaytype="number" text="expr:getSum('SS_NA')"/>
                <Cell col="15" displaytype="number" text="expr:getSum('SS_PROT')"/>
                <Cell col="16" displaytype="number" text="expr:getSum('SS_CARBO')"/>
                <Cell col="17" displaytype="number" text="expr:getSum('SS_FAT')"/>
                <Cell col="18" displaytype="number" text="expr:getSum('SS_VITA')"/>
                <Cell col="19" displaytype="number" text="expr:getSum('SS_THIA')"/>
                <Cell col="20" displaytype="number" text="expr:getSum('SS_RIBO')"/>
                <Cell col="21" displaytype="number" text="expr:getSum('SS_VITA_C')"/>
                <Cell col="22" displaytype="number" text="expr:getSum('SS_CA')"/>
                <Cell col="23" displaytype="number" text="expr:getSum('SS_FE')"/>
                <Cell col="24" displaytype="number" text="expr:getSum('SS_NIASIN')"/>
              </Band>
            </Format>
            <Format id="GRD_NOT_DISUSE">
              <Columns>
                <Column size="30"/>
                <Column size="40"/>
                <Column size="40"/>
                <Column size="50"/>
                <Column size="25"/>
                <Column size="70"/>
                <Column size="170"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="40"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="40" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" class="grd_WF_Essential" text="순서"/>
                <Cell col="2" class="grd_WF_Essential" text="구축"/>
                <Cell col="3" style="linespace:5;" text="대표&#13;&#10;레시피" taborder="undefined"/>
                <Cell col="4" colspan="2" text="레시피코드" taborder="undefined"/>
                <Cell col="6" text="레시피명"/>
                <Cell col="7" class="grd_WF_Essential" text="구성요소"/>
                <Cell col="8" text="원가"/>
                <Cell col="9" text="원가율&#13;&#10;(%)"/>
                <Cell col="10" class="grd_WF_Essential" text="판매가&#13;&#10;VAT제외"/>
                <Cell col="11" class="grd_WF_Essential" text="예상&#13;&#10;판매량"/>
                <Cell col="12" text="색"/>
                <Cell col="13" text="에너지&#13;&#10;(Kcal)"/>
                <Cell col="14" text="나트륨&#13;&#10;(mg)"/>
                <Cell col="15" text="단백질&#13;&#10;(g)"/>
                <Cell col="16" text="당질&#13;&#10;(g)"/>
                <Cell col="17" text="지질&#13;&#10;(g)"/>
                <Cell col="18" text="비타민A&#13;&#10;(R,E)"/>
                <Cell col="19" text="비타민B1&#13;&#10;(mg)"/>
                <Cell col="20" text="비타민B2&#13;&#10;(mg)"/>
                <Cell col="21" text="비타민C&#13;&#10;(mg)"/>
                <Cell col="22" text="칼슘&#13;&#10;(mg)"/>
                <Cell col="23" text="철&#13;&#10;(mg)"/>
                <Cell col="24" text="나이아신&#13;&#10;(mg)"/>
              </Band>
              <Band id="body">
                <Cell style="background:white;background2:white;" expr="expr:currow + 1"/>
                <Cell col="1" displaytype="text" edittype="text" style="align:center;background:white;background2:white;" text="bind:RECIPE_SEQ" editautoselect="true"/>
                <Cell col="2" displaytype="checkbox" edittype="checkbox" style="background:white;background2:white;" text="bind:CREAT"/>
                <Cell col="3" displaytype="checkbox" style="align:center;background:white;background2:white;" text="bind:ATTR02"/>
                <Cell col="4" displaytype="image" style="align:center;background:white;background2:white;" text="theme://images/new/grd_WF_ExpandImageX.png"/>
                <Cell col="5" style="background:white;background2:white;" text="bind:RECIPE_CD"/>
                <Cell col="6" displaytype="text" style="background:white;background2:white;" text="bind:RECIPE_NAME"/>
                <Cell col="7" displaytype="combo" edittype="combo" style="background:white;background2:white;" text="bind:MAJOR_DISH_INFO" combodataset="ds_Const" combocodecol="CD" combodatacol="NM" combodisplayrowcount="10"/>
                <Cell col="8" displaytype="number" style="background:white;background2:white;" text="bind:RECIPE_COST"/>
                <Cell col="9" displaytype="number" style="background:white;background2:white;" text="bind:COST_RATE"/>
                <Cell col="10" displaytype="number" edittype="masknumber" style="background:white;background2:white;" text="bind:SALE_PRICE" editautoselect="true"/>
                <Cell col="11" displaytype="number" edittype="masknumber" style="background:white;background2:white;" text="bind:EXPECT_SALE_QTY" editautoselect="true"/>
                <Cell col="12" displaytype="image" style="align:center;background:white;background2:white;" text="expr:gfn_nvl(COLOR)==&quot;&quot;?&quot;&quot;:&quot;URL('theme://convertImages/&quot;+COLOR+&quot;.bmp')&quot;"/>
                <Cell col="13" displaytype="number" style="background:white;background2:white;" text="bind:S_KCAL"/>
                <Cell col="14" displaytype="number" style="background:white;background2:white;" text="bind:S_NA"/>
                <Cell col="15" displaytype="number" style="background:white;background2:white;" text="bind:S_PROT"/>
                <Cell col="16" displaytype="number" style="background:white;background2:white;" text="bind:S_CARBO"/>
                <Cell col="17" displaytype="number" style="background:white;background2:white;" text="bind:S_FAT"/>
                <Cell col="18" displaytype="number" style="background:white;background2:white;" text="bind:S_VITA"/>
                <Cell col="19" displaytype="number" style="background:white;background2:white;" text="bind:S_THIA"/>
                <Cell col="20" displaytype="number" style="background:white;background2:white;" text="bind:S_RIBO"/>
                <Cell col="21" displaytype="number" style="background:white;background2:white;" text="bind:S_VITA_C"/>
                <Cell col="22" displaytype="number" style="background:white;background2:white;" text="bind:S_CA"/>
                <Cell col="23" displaytype="number" style="background:white;background2:white;" text="bind:S_FE"/>
                <Cell col="24" displaytype="number" style="background:white;background2:white;" text="bind:S_NIASIN"/>
              </Band>
              <Band id="summary">
                <Cell colspan="6" style="align:center;" text="합계"/>
                <Cell col="6" style="align:left;"/>
                <Cell col="7"/>
                <Cell col="8" displaytype="number" text="expr:getSum('RECIPE_COST')" mask="#,##0"/>
                <Cell col="9" displaytype="number" text="expr:fn_clearNaN(getAvg('COST_RATE'))" mask="#,##0"/>
                <Cell col="10" displaytype="number" text="expr:getSum('SALE_PRICE')" mask="#,##0"/>
                <Cell col="11" displaytype="number" text="expr:getSum('EXPECT_SALE_QTY')" mask="#,##0"/>
                <Cell col="12"/>
                <Cell col="13" displaytype="number" text="expr:getSum('S_KCAL')"/>
                <Cell col="14" displaytype="number" text="expr:getSum('S_NA')"/>
                <Cell col="15" displaytype="number" text="expr:getSum('S_PROT')"/>
                <Cell col="16" displaytype="number" text="expr:getSum('S_CARBO')"/>
                <Cell col="17" displaytype="number" text="expr:getSum('S_FAT')"/>
                <Cell col="18" displaytype="number" text="expr:getSum('S_VITA')"/>
                <Cell col="19" displaytype="number" text="expr:getSum('S_THIA')"/>
                <Cell col="20" displaytype="number" text="expr:getSum('S_RIBO')"/>
                <Cell col="21" displaytype="number" text="expr:getSum('S_VITA_C')"/>
                <Cell col="22" displaytype="number" text="expr:getSum('S_CA')"/>
                <Cell col="23" displaytype="number" text="expr:getSum('S_FE')"/>
                <Cell col="24" displaytype="number" text="expr:getSum('S_NIASIN')"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static46" text="w5" class="Guide01_AreaRed" visible="false" position="absolute 564 81 569 465" anchor="top right"/>
        <Static id="Static52" text="W10" visible="false" position="absolute 15 465 1255 475" style="background:#ff000055;align:center middle;"/>
        <Splitter id="sp_line" min="187" max="605" type="vertical" class="spt_WF_2" position="absolute 15 465 1364 475" anchor="left top right">
          <Formats>
            <Format id="default">
              <SplitterItems id="items">
                <SplitterItem id="item00" bindtype="resize" position="leftortop" offset="2" componentid="grd_recipeList"/>
                <SplitterItem id="item01" bindtype="resize" position="leftortop" offset="2" componentid="grd_menuList"/>
                <SplitterItem id="item02" bindtype="resize" position="rightorbottom" offset="2" componentid="Tab00"/>
                <SplitterItem id="item04" bindtype="move" position="rightorbottom" offset="6" componentid="Static27"/>
                <SplitterItem id="item05" bindtype="resize" position="leftortop" offset="2" componentid="sp_line2"/>
              </SplitterItems>
            </Format>
          </Formats>
        </Splitter>
        <Static id="Static15" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 1366 18"/>
        <Static id="Static01" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 800"/>
        <Static id="Static02" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1367 0 1382 800"/>
        <Static id="Static03" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 15 785 1366 800"/>
        <Static id="Static07" class="sta_WFSA_Labelbg" position="absolute 15 40 1361 81" anchor="left top right"/>
        <Static id="Static12" text="W10" visible="false" position="absolute 74 50 84 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static13" text="W30" visible="false" position="absolute 233 50 263 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static21" text="W10" visible="false" position="absolute 30 40 1240 50" style="background:#ff000055;align:center middle;"/>
        <Static id="Static23" text="W10" visible="false" position="absolute 30 71 1240 81" style="background:#ff000055;align:center middle;"/>
        <Static id="Static24" text="W15" visible="false" position="absolute 15 40 30 81" style="background:#ff000055;align:center middle;"/>
        <Static id="Static00" text="W15" visible="false" position="absolute 1361 40 1376 81" style="background:#ff000055;align:center middle;"/>
        <Static id="Static04" text="제공일" class="sta_WFSA_label" position="absolute 30 51 82 72" anchor="left top"/>
        <ObjCalendar id="cal_menuDate" anchor="left top" titletext="캘린더" taborder="0" scrollbars="none" position="absolute 84 50 187 71" onclick="cal_menuDate_onclick"/>
        <Static id="Static05" text="끼니" class="sta_WFSA_label" position="absolute 263 51 299 72" anchor="left top"/>
        <Static id="Static06" text="W10" visible="false" position="absolute 294 50 304 71" style="background:#ff000055;align:center middle;"/>
        <Combo id="cbo_meal" taborder="1" position="absolute 304 50 420 71" index="-1" innerdataset="@ds_cboMeal" codecolumn="MEAL" datacolumn="MEAL_NAME" onitemchanged="cbo_meal_onitemchanged" enable="true"/>
        <Static id="Static08" text="W30" visible="false" position="absolute 420 50 450 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static09" text="코너" class="sta_WFSA_label" position="absolute 450 51 486 72" anchor="left top"/>
        <Static id="Static10" text="W10" visible="false" position="absolute 481 50 491 71" style="background:#ff000055;align:center middle;"/>
        <Combo id="cbo_corner" taborder="2" position="absolute 491 50 607 71" innerdataset="@ds_cboCorner" codecolumn="CORNER" datacolumn="CORNER_NAME" enable="true" onitemchanged="cbo_corner_onitemchanged"/>
        <Static id="Static11" text="W30" visible="false" position="absolute 607 50 637 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static14" text="예상식수" class="sta_WFSA_label" position="absolute 637 51 697 72" anchor="left top"/>
        <Static id="Static16" text="W10" visible="false" position="absolute 695 50 705 71" style="background:#ff000055;align:center middle;"/>
        <MaskEdit id="edt_expectMealQty" taborder="5" position="absolute 705 50 769 71" mask="#,###" readonly="true"/>
        <Static id="Static17" text="W30" visible="false" position="absolute 769 50 799 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static18" text="식단가" class="sta_WFSA_label" position="absolute 799 51 851 72" anchor="left top"/>
        <Static id="Static19" text="W10" visible="false" position="absolute 845 50 855 71" style="background:#ff000055;align:center middle;"/>
        <MaskEdit id="edt_salePrice" taborder="18" mask="#,###" position="absolute 855 50 919 71" readonly="false" autoselect="true"/>
        <Static id="Static20" text="W30" visible="false" position="absolute 919 50 949 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static22" text="식단특성" class="sta_WFSA_label" position="absolute 949 51 1009 72" anchor="left top"/>
        <Static id="Static25" text="W10" visible="false" position="absolute 1006 50 1016 71" style="background:#ff000055;align:center middle;"/>
        <Button id="btn_menuSave" taborder="19" text="기본정보저장" class="btn_WF_Function" position="absolute 1224 50 1316 71" anchor="top right" onclick="btn_menuSave_onclick"/>
        <Static id="Static26" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1008 35 1255 40"/>
        <Static id="st_weather" position="absolute 54 11 982 42"/>
        <ImageViewer id="img_weather" taborder="24" position="absolute 15 10 49 40" style="border:0 solid #cacacaff ;"/>
        <Edit id="edt_menuFeature" taborder="25" position="absolute 1016 50 1166 71" autoselect="true"/>
        <Static id="Static32" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 81 388 94"/>
        <Static id="Static33" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 15 107 1255 112" anchor="left top"/>
        <Static id="Static45" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 506 81 564 87" anchor="top right"/>
        <Grid id="grd_recipeList" taborder="4" useinputpanel="false" position="absolute 15 217 563 464" binddataset="ds_recipeList" onexpanddown="grd_recipeList_onexpanddown" autoenter="select" oncelldblclick="grd_recipeList_oncelldblclick" style="background:white;">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="54"/>
                <Column size="80"/>
                <Column size="204"/>
                <Column size="80"/>
                <Column size="84"/>
                <Column size="110"/>
                <Column size="110"/>
                <Column size="136"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" text="구분"/>
                <Cell col="2" text="코드"/>
                <Cell col="3" text="레시피명"/>
                <Cell col="4" text="원가"/>
                <Cell col="5" text="레시피분류"/>
                <Cell col="6" text="레시피유형"/>
                <Cell col="7" text="조리법유형"/>
                <Cell col="8" text="선호도"/>
              </Band>
              <Band id="body">
                <Cell style="background:white;background2:white;" expr="expr:currow + 1"/>
                <Cell col="1" style="background:white;background2:white;" text="bind:GUBUN"/>
                <Cell col="2" style="padding: ;background:white;background2:white;backgroundimage:EXPR(DI_MON == 1 ? 'theme://images/new/grd_WF_N.png' : '');" text="bind:RECIPE_CD"/>
                <Cell col="3" displaytype="text" edittype="expand" style="background:white;background2:white;backgroundimage: ;" text="bind:RECIPE_NAME" expandshow="show" expandsize="20" expandimage="URL('theme://images/new/grd_WF_Expand.png')"/>
                <Cell col="4" displaytype="number" style="background:white;background2:white;" text="bind:RECIPE_COST"/>
                <Cell col="5" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:RECIPE_CLASS" combodataset="ds_grdRecipeClass" combocodecol="CODE" combodatacol="CODE_NAME"/>
                <Cell col="6" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:RECIPE_TYPE" combodataset="ds_cboRecipeType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                <Cell col="7" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:CUISINE_TYPE" combodataset="ds_cboCuisineType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                <Cell col="8" style="background:white;background2:white;color:red;color2:red;" text="bind:PREFER"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static53" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 679 496 1255 501" anchor="left top"/>
        <Button id="btn_addRecipe" taborder="16" class="btn_WF_rightMove" position="absolute 566 264 588 286" onclick="btn_addRecipe_onclick"/>
        <Button id="btn_next" taborder="39" onclick="btn_next_onclick" class="btn_WF_rightMove" position="absolute 213 50 233 71" anchor="default"/>
        <Button id="btn_prev" taborder="40" onclick="btn_prev_onclick" class="btn_WF_leftMove" position="absolute 190 50 210 71" anchor="default"/>
        <Button id="btn_save" taborder="22" text="저장" onclick="fn_save" class="btn_WF_CRUD" position="absolute 1267 10 1312 35" anchor="top right"/>
        <Button id="btn_close" taborder="23" text="닫기" onclick="fn_close" class="btn_WF_CRUD" position="absolute 1314 10 1359 35" anchor="top right"/>
        <Static id="Static29" text="W102" visible="false" position="absolute 1161 10 1163 35" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Static id="Static30" text="W102" visible="false" position="absolute 1208 10 1210 35" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Button id="btn_clean" taborder="41" text="초기화" class="btn_WF_CRUD" position="absolute 1204 10 1265 35" anchor="top right" onclick="btn_clean_onclick"/>
        <Button id="btn_search" taborder="6" text="조회" onclick="fn_search" class="btn_WF_searchCm" position="absolute 1143 10 1202 35" anchor="top right"/>
        <Tab id="Tab00" taborder="35" tabindex="0" scrollbars="autoboth" position="absolute 15 474 1366 784" anchor="all" onchanged="Tab00_onchanged" style="showextrabutton:false;background:white;">
          <Tabpages>
            <Tabpage id="tabpage1" text="레시피수정">
              <Layouts>
                <Layout>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static04" visible="false" position="absolute 0 272 1238 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static01" visible="false" position="absolute 1358 1 1368 283" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static32" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 575 13"/>
                  <Static id="Static31" text="자재목록" class="sta_WF_Title01" position="absolute 10 13 98 31" anchor="left top"/>
                  <Static id="Static33" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 1228 31" anchor="left top"/>
                  <Button id="btn_addItem" taborder="1" text="자재추가" class="btn_WF_Function" position="absolute 863 6 928 26" anchor="top right" onclick="Tab00_tabpage1_btn_addItem_onclick"/>
                  <Button id="btn_changeItem" taborder="2" text="자재일괄대체" class="btn_WF_Function" position="absolute 930 6 1019 26" anchor="top right" onclick="Tab00_tabpage1_btn_changeItem_onclick"/>
                  <Button id="btn_applyRatio" taborder="3" text="레시피비율일괄조정" class="btn_WF_Function" position="absolute 1021 6 1146 26" anchor="top right" onclick="Tab00_tabpage1_btn_applyRatio_onclick"/>
                  <Button id="btn_ibDateUpdate" taborder="4" text="입고예정일일괄수정" class="btn_WF_Function" position="absolute 1148 6 1273 26" anchor="top right" onclick="Tab00_tabpage1_btn_ibDateUpdate_onclick"/>
                  <Static id="Static51" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1282 0 1340 6" anchor="top right"/>
                  <Static id="Static0" position="absolute 109 11 124 26" style="background:#ffaa9cff;"/>
                  <Static id="Static1" position="absolute 196 11 211 26" style="background:#ffe49cff;"/>
                  <Static id="Static2" text="불용자재" position="absolute 127 9 200 30"/>
                  <Static id="Static3" text="금지자재" position="absolute 215 9 288 30"/>
                  <Static id="Static4" position="absolute 282 11 297 26" style="background:#cbcbcaff;"/>
                  <Static id="Static5" text="구매신청완료된자재" position="absolute 300 9 425 30"/>
                  <Button id="btn_fullScreen" taborder="7" text="전체화면" class="btn_WF_Function" position="absolute 1275 6 1340 26" anchor="top right" onclick="btn_fullScreen_onclick"/>
                  <Grid id="grd_menuItemList" taborder="5" useinputpanel="false" position="absolute 10 31 1344 272" autofittype="none" binddataset="ds_menuItemList" autoenter="select" oncellclick="Tab00_tabpage1_grd_menuItemList_oncellclick" anchor="all" onexpanddown="Tab00_tabpage1_grd_menuItemList_onexpanddown" selecttype="multirow" cellsizingtype="col" class="grd_WF_LineNone" onmousemove="Tab00_tabpage1_grd_menuItemList_onmousemove" autoupdatetype="dateselect">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="125"/>
                          <Column size="56"/>
                          <Column size="25"/>
                          <Column size="24"/>
                          <Column size="96"/>
                          <Column size="172"/>
                          <Column size="67"/>
                          <Column size="37"/>
                          <Column size="49"/>
                          <Column size="65"/>
                          <Column size="62"/>
                          <Column size="58"/>
                          <Column size="50"/>
                          <Column size="59"/>
                          <Column size="66"/>
                          <Column size="78"/>
                          <Column size="64"/>
                          <Column size="152"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="레시피명"/>
                          <Cell col="2" text="대표자재" taborder="undefined"/>
                          <Cell col="3" colspan="3" text="자재코드" taborder="undefined"/>
                          <Cell col="6" text="자재명" taborder="undefined"/>
                          <Cell col="7" text="규격"/>
                          <Cell col="8" text="단위"/>
                          <Cell col="9" text="원산지"/>
                          <Cell col="10" text="특성"/>
                          <Cell col="11" text="단가"/>
                          <Cell col="12" class="grd_WF_Essential" text="1인량"/>
                          <Cell col="13" class="grd_WF_Essential" text="가식부"/>
                          <Cell col="14" text="1인원가"/>
                          <Cell col="15" text="총소요량"/>
                          <Cell col="16" class="grd_WF_Essential" text="입고예정일" taborder="undefined"/>
                          <Cell col="17" text="마감"/>
                          <Cell col="18" class="grd_WF_Essential" text="커팅규격"/>
                        </Band>
                        <Band id="body">
                          <Cell style="background:EXPR(iif(ORDER_YN=='Y','#CBCBCA','default'));background2:EXPR(iif(ORDER_YN=='Y','#CBCBCA','default'));selectbackground:EXPR(iif(ORDER_YN=='Y','#CBCBCA','default'));" expr="expr:currow + 1"/>
                          <Cell col="1" displaytype="text" edittype="none" style="background2: ;" text="bind:RECIPE_NAME" suppress="1"/>
                          <Cell col="2" displaytype="checkbox" style="selectbackground: ;" text="bind:ATTR02"/>
                          <Cell col="3" displaytype="image" style="background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));" text="expr:ATTR10=='1' || ORDER_YN == 'Y' ?'':'theme://images/new/grd_WF_ExpandImageX.png'"/>
                          <Cell col="4" style="linetype:onlyhorz;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));backgroundimage:EXPR(expr:CHEAP_YN == 'Y' ? 'theme://Images/new/grd_WF_Money2.png' : '');"/>
                          <Cell col="5" edittype="expr:ATTR10=='1' || ORDER_YN == 'Y' ? 'none' : 'expand'" style="align:left;padding:0 0 0 20;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));backgroundimage:EXPR(WEEK_CHK&gt;0?'theme://Images/new/grd_WF_mark.png':'');" text="bind:ITEM_CODE" expandshow="expr:ATTR10=='1' || ORDER_YN == 'Y' ? 'hide' : 'show'" expandsize="21"/>
                          <Cell col="6" displaytype="text" edittype="expr:IMG_YN == 'Y' ? 'expand' : 'none'" style="linetype: ;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));" text="bind:ITEM_NAME" expandshow="expr:IMG_YN == 'Y' ? 'show' : 'hide'" expandsize="24" expandimage="URL('theme://Images/new/grd_WF_Camerabtn.png')"/>
                          <Cell col="7" displaytype="text" style="background2: ;" text="bind:ITEM_SIZE"/>
                          <Cell col="8" style="background2: ;" text="bind:PO_UOM"/>
                          <Cell col="9" style="align:center;" text="bind:ORIGIN_TYPE"/>
                          <Cell col="10" displaytype="image" style="background2: ;" text="bind:FEATURE_ICON"/>
                          <Cell col="11" displaytype="number" style="background2: ;" text="bind:MARGIN_PRICE"/>
                          <Cell col="12" displaytype="number" edittype="expr:setEditExpr(iif(ORDER_YN=='Y','none','number'))" style="background:seashell;background2:seashell;" text="bind:NEED_QTY" editautoselect="true"/>
                          <Cell col="13" displaytype="number" edittype="expr:setEditExpr(iif(ORDER_YN=='Y','none','number'))" style="background2: ;" text="bind:EDIBLE_QTY" editautoselect="true"/>
                          <Cell col="14" displaytype="number" style="background2: ;" text="bind:CUR_PRICE"/>
                          <Cell col="15" displaytype="number" style="background2: ;" text="bind:TOT_QTY"/>
                          <Cell col="16" displaytype="date" edittype="expr:ORDER_YN=='Y'?'none':'date'" style="color:EXPR(DAY_COLOR);color2:EXPR(DAY_COLOR);" text="bind:NEED_DATE" editautoselect="true" editdisplay="edit" editacceptsenter="false" calendardisplay="edit" calendardisplaynulltype="none"/>
                          <Cell col="17" edittype="expand" style="background:EXPR(fn_color2(currow));background2:EXPR(fn_color2(currow));color:EXPR(iif(D_DAY &gt;= 2, 'red', 'default'));color2:EXPR(iif(D_DAY &gt;= 2, 'red', 'default'));font:EXPR(iif(D_DAY &gt;= 2, '굴림,10,bold', ''));" text="bind:D_DAYS"/>
                          <Cell col="18" displaytype="combo" edittype="combo" style="align:left;background2: ;" text="bind:CUT_SPEC" combodataset="ds_cboCut" combocodecol="CODE" combodatacol="CODE_NAME"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <CheckBox id="chk_cheapYn" taborder="8" text="저렴자재찾기" position="absolute 580 6 682 26" anchor="top right" onclick="Tab00_tabpage1_chk_cheapYn_onclick" falsevalue="0" truevalue="1" tooltiptext="저렴자재찾기는 제공일 기준의 단가로 조회됩니다." tooltiptype="default"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="조리법" onstepchanged="Tab00_tabpage2_onstepchanged">
              <Layouts>
                <Layout>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static32" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 575 13"/>
                  <Static id="Static04" visible="false" position="absolute 0 272 1238 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static01" visible="false" position="absolute 1228 0 1238 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static33" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 1228 31" anchor="left top"/>
                  <Grid id="grd_cuisineList" taborder="1" useinputpanel="false" position="absolute 10 31 1228 272" binddataset="ds_cuisineList" autofittype="col" anchor="all" class="grd_WF_LineNone">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="1160"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="조리법"/>
                        </Band>
                        <Band id="body">
                          <Cell expr="expr:currow + 1"/>
                          <Cell col="1" displaytype="text" text="bind:CUISINE_DESC"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static31" text="조리법" class="sta_WF_Title01" position="absolute 10 13 98 31" anchor="left top"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage3" text="조리공정">
              <Layouts>
                <Layout>
                  <Static id="Static32" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 575 13"/>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static04" visible="false" position="absolute 0 272 1238 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static01" visible="false" position="absolute 1228 0 1238 282" style="background:#ff000033;font:Dotum,8;"/>
                  <ImageViewer id="img_cuisineMethod" taborder="1" position="absolute 10 13 1220 1156" anchor="all"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage4" text="기획자재">
              <Layouts>
                <Layout>
                  <Static id="Static32" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 575 13"/>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static04" visible="false" position="absolute 10 272 1238 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static01" visible="false" position="absolute 1228 0 1238 282" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static33" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 1228 31" anchor="left top"/>
                  <Grid id="grd_list" taborder="1" binddataset="ds_dutyItemList" autoenter="select" useinputpanel="false" cellsizingtype="col" oncelldblclick="grd_list_oncelldblclick" onexpanddown="grd_list_onexpanddown" position="absolute 10 31 1228 272" anchor="all" autofittype="col">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="27"/>
                          <Column size="90"/>
                          <Column size="147"/>
                          <Column size="0"/>
                          <Column size="0"/>
                          <Column size="95"/>
                          <Column size="196"/>
                          <Column size="96"/>
                          <Column size="58"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell rowspan="2" class="head_Excel" taborder="undefined"/>
                          <Cell col="1" rowspan="2" text="센터" taborder="undefined"/>
                          <Cell col="2" rowspan="2" text="업체" taborder="undefined"/>
                          <Cell col="3" text="대표자재코드"/>
                          <Cell col="4" text="대표자재명"/>
                          <Cell col="5" colspan="2" text="기획자재" taborder="undefined"/>
                          <Cell col="7" rowspan="2" text="규격" taborder="undefined"/>
                          <Cell col="8" rowspan="2" text="단위" taborder="undefined"/>
                          <Cell col="9" rowspan="2" text="시작일" taborder="undefined"/>
                          <Cell col="10" rowspan="2" text="종료일" taborder="undefined"/>
                          <Cell col="11" rowspan="2" style="background: ;" text="배분량&#13;&#10;(Kg)" taborder="undefined"/>
                          <Cell row="1" col="3"/>
                          <Cell row="1" col="4"/>
                          <Cell row="1" col="5" text="코드"/>
                          <Cell row="1" col="6" text="자재명"/>
                        </Band>
                        <Band id="body">
                          <Cell style="background:white;background2:white;" text="expr:rowidx+1"/>
                          <Cell col="1" style="background:white;background2:white;" text="bind:CENTER_NAME"/>
                          <Cell col="2" displaytype="text" style="background:white;background2:white;" text="bind:CUSTNM"/>
                          <Cell col="3" style="background:white;background2:white;" text="bind:대표자재코드"/>
                          <Cell col="4" style="background:white;background2:white;" text="bind:대표자재명"/>
                          <Cell col="5" style="background:white;background2:white;" text="bind:ITEM_CODE"/>
                          <Cell col="6" displaytype="text" style="background:white;background2:white;" text="bind:ITEM_NAME"/>
                          <Cell col="7" style="align:left;background:white;background2:white;" text="bind:ITEM_SIZE"/>
                          <Cell col="8" style="background:white;background2:white;" text="bind:PO_UOM"/>
                          <Cell col="9" displaytype="date" style="background:white;background2:white;" text="bind:START_DATE" calendardisplaynulltype="none"/>
                          <Cell col="10" displaytype="date" style="background:white;background2:white;" text="bind:END_DATE" calendardisplaynulltype="none"/>
                          <Cell col="11" displaytype="number" edittype="none" style="background:white;background2:white;" text="bind:DUTY_QTY" mask="###,###,###.##" editautoselect="true" editlimitbymask="both"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static31" text="기획자재목록" class="sta_WF_Title01" position="absolute 10 13 130 31" anchor="left top"/>
                  <Static id="Static68" text="배분량은 팀에 할당된 배분량 입니다." class="sta_WF_DiscInfo" position="absolute 138 12 533 27"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static27" text="저렴자재찾기는 제공일 기준의 단가로 조회됩니다." class="sta_WF_DiscInfo" position="absolute 1026 481 1352 496" anchor="top right"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onvaluechanged="ds_cond_onvaluechanged">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="MENU_DATE" type="STRING" size="256"/>
          <Column id="MEAL" type="STRING" size="256"/>
          <Column id="CORNER" type="STRING" size="256"/>
          <Column id="CUR_DATE" type="STRING" size="256"/>
          <Column id="MENU_CD" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
          <Column id="CHEAP_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboRecipeNm"/>
      <Dataset id="ds_cboRecipeClass">
        <ColumnInfo>
          <Column id="CD" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboRecipeType">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboCookClass">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboMaterial">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboElement">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboCuisineType">
        <ColumnInfo>
          <Column id="CODE" size="255" type="STRING"/>
          <Column id="CODE_NAME" size="255" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboMeal" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="MEAL" type="STRING" size="256"/>
          <Column id="MEAL_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboCorner" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CORNER" type="STRING" size="256"/>
          <Column id="CORNER_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_weather" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_recipeList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GUBUN" type="STRING" size="256"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="RECIPE_COST" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE" type="STRING" size="256"/>
          <Column id="PREFER" type="STRING" size="256"/>
          <Column id="DI_MON" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recipeCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="STD_CHK" type="STRING" size="256"/>
          <Column id="UPJANG_CHK" type="STRING" size="256"/>
          <Column id="ENF_CHK" type="STRING" size="256"/>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="MENU_DATE" type="STRING" size="256"/>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="RECIPE_NAME1" type="STRING" size="256"/>
          <Column id="RECIPE_NAME2" type="STRING" size="256"/>
          <Column id="RECIPE_NAME3" type="STRING" size="256"/>
          <Column id="RECIPE_NAME4" type="STRING" size="256"/>
          <Column id="RECIPE_NAME5" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE" type="STRING" size="256"/>
          <Column id="MAIN_ITEM_CODE1" type="STRING" size="256"/>
          <Column id="RESP_NUT1" type="STRING" size="256"/>
          <Column id="START_COST" type="STRING" size="256"/>
          <Column id="END_COST" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_menuList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_menuList_onrowposchanged" cancolumnchange="ds_menuList_cancolumnchange">
        <ColumnInfo>
          <Column id="RECIPE_SEQ" type="STRING" size="256"/>
          <Column id="CREAT" type="STRING" size="256"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="MAJOR_DISH_INFO" type="STRING" size="256"/>
          <Column id="RECIPE_COST" type="STRING" size="256"/>
          <Column id="S_KCAL" type="STRING" size="256"/>
          <Column id="S_NA" type="STRING" size="256"/>
          <Column id="S_CARBO" type="STRING" size="256"/>
          <Column id="S_PROT" type="STRING" size="256"/>
          <Column id="S_FAT" type="STRING" size="256"/>
          <Column id="S_VITA" type="STRING" size="256"/>
          <Column id="S_THIA" type="STRING" size="256"/>
          <Column id="S_RIBO" type="STRING" size="256"/>
          <Column id="S_VITA_C" type="STRING" size="256"/>
          <Column id="S_CA" type="STRING" size="256"/>
          <Column id="S_FE" type="STRING" size="256"/>
          <Column id="S_NIASIN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_menuItemList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_menuItemList_onrowposchanged" oncolumnchanged="ds_menuItemList_oncolumnchanged" cancolumnchange="ds_menuItemList_cancolumnchange">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="MENU_CD" type="STRING" size="256"/>
          <Column id="RECIPE_SEQ" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE" type="STRING" size="256"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="DISUSE_RATE" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_SEQ" type="STRING" size="256"/>
          <Column id="ITEM_CLASS1" type="STRING" size="256"/>
          <Column id="ITEM_CLASS2" type="STRING" size="256"/>
          <Column id="ITEM_CLASS3" type="STRING" size="256"/>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
          <Column id="FEATURE_NAME" type="STRING" size="256"/>
          <Column id="ITEM_SIZE" type="STRING" size="256"/>
          <Column id="PO_UOM" type="STRING" size="256"/>
          <Column id="EDIBLE_QTY" type="STRING" size="256"/>
          <Column id="CUT_SPEC" type="STRING" size="256"/>
          <Column id="NEED_QTY" type="STRING" size="256"/>
          <Column id="EXPECT_MEAL_QTY" type="STRING" size="256"/>
          <Column id="EXPECT_SALE_QTY" type="STRING" size="256"/>
          <Column id="TOT_QTY2" type="STRING" size="256"/>
          <Column id="TOT_QTY" type="STRING" size="256"/>
          <Column id="CUR_PRICE" type="STRING" size="256"/>
          <Column id="ORDER_YN" type="STRING" size="256"/>
          <Column id="MARGIN_PRICE" type="STRING" size="256"/>
          <Column id="G_ITEM_PRICE" type="STRING" size="256"/>
          <Column id="MARGIN_RATE" type="STRING" size="256"/>
          <Column id="UNIT_PRICE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="WEEK_CHK" type="STRING" size="256"/>
          <Column id="RESTRICT_START" type="STRING" size="256"/>
          <Column id="RESTRICT_END" type="STRING" size="256"/>
          <Column id="RESTRICT_REASON" type="STRING" size="256"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="256"/>
          <Column id="CNL_START" type="STRING" size="256"/>
          <Column id="CNL_END" type="STRING" size="256"/>
          <Column id="CNL_REASON" type="STRING" size="256"/>
          <Column id="CNL_PERIOD" type="STRING" size="256"/>
          <Column id="D_DAYS" type="STRING" size="256"/>
          <Column id="D_DAY" type="STRING" size="256"/>
          <Column id="CHEAP_YN" type="STRING" size="256"/>
          <Column id="DAY_COLOR" type="STRING" size="256"/>
          <Column id="ATTR01" type="STRING" size="256"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboCut">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cuisineList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="MENU_CD" type="STRING" size="256"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
          <Column id="CUISINE_SEQ" type="STRING" size="256"/>
          <Column id="CUISINE_DESC" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_validData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_rCnt"/>
      <Dataset id="ds_iCnt"/>
      <Dataset id="ds_enfUpjangList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="START_DD" type="STRING" size="256"/>
          <Column id="END_DD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sysDate" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_Const"/>
      <Dataset id="ds_grdRecipeClass">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dutyItemList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CENTER_NAME" type="STRING" size="256"/>
          <Column id="CUSTNM" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_SIZE" type="STRING" size="256"/>
          <Column id="PO_UOM" type="STRING" size="256"/>
          <Column id="START_DATE" type="STRING" size="256"/>
          <Column id="END_DATE" type="STRING" size="256"/>
          <Column id="DUTY_QTY" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_return">
        <ColumnInfo>
          <Column id="RTN" size="256" type="STRING"/>
          <Column id="RTNMSG" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="RTN"/>
            <Col id="RTNMSG"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_input">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="SDATE" size="256" type="STRING"/>
          <Column id="O_RTN" size="256" type="STRING"/>
          <Column id="O_RTNMSG" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recUpjang" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="USE_YN" type="STRING" size="256"/>
          <Column id="COMP_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_FS0020">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
          <Column id="V_CONTENTS" size="256" type="STRING"/>
          <Column id="SORT_SEQ" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mucd">
        <ColumnInfo>
          <Column id="MU_CD" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="MU_CD"/>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item5" compid="cbo_corner" propid="value" datasetid="ds_cond" columnid="CORNER"/>
      <BindItem id="item6" compid="cbo_meal" propid="value" datasetid="ds_cond" columnid="MEAL"/>
      <BindItem id="item12" compid="Tab00.tabpage1.chk_cheapYn" propid="value" datasetid="ds_cond" columnid="CHEAP_YN"/>
      <BindItem id="item0" compid="Div01.cbo_recipeClass" propid="value" datasetid="ds_recipeCond" columnid="RECIPE_CLASS"/>
      <BindItem id="item1" compid="Div01.cbo_recipeType" propid="value" datasetid="ds_recipeCond" columnid="RECIPE_TYPE"/>
      <BindItem id="item3" compid="Div01.cbo_material" propid="value" datasetid="ds_recipeCond" columnid="MAIN_ITEM_CODE1"/>
      <BindItem id="item4" compid="Div01.cbo_element" propid="value" datasetid="ds_recipeCond" columnid="RESP_NUT1"/>
      <BindItem id="item2" compid="Div01.cbo_cuisineType" propid="value" datasetid="ds_recipeCond" columnid="CUISINE_TYPE"/>
      <BindItem id="item10" compid="Div01.MaskEdit00" propid="value" datasetid="ds_recipeCond" columnid="START_COST"/>
      <BindItem id="item11" compid="Div01.MaskEdit01" propid="value" datasetid="ds_recipeCond" columnid="END_COST"/>
      <BindItem id="item7" compid="Div01.chk_stdRecipe" propid="value" datasetid="ds_recipeCond" columnid="STD_CHK"/>
      <BindItem id="item8" compid="Div01.chk_upjangRecipe" propid="value" datasetid="ds_recipeCond" columnid="UPJANG_CHK"/>
      <BindItem id="item9" compid="Div01.chk_enfRecipe" propid="value" datasetid="ds_recipeCond" columnid="ENF_CHK"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";

/******************************************************************************************
 * 시스템구분 : 메뉴관리/식단관리
 * 프로그램명 : FSM90030P.XML
 * 기ㅡㅡㅡ능 : 레시피검색 및 등록(일반식)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-05-29
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************/

//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
var fa_ENF_YN = 'N';	// 강제레시피 대상사업장 여부
var isChecked = 1;      // 식단구성 구축 체크박스 전체 체크여부
var mucd = '';          // 사업부코드
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(this);

	// X-Framework : Action 정보 생성
	fsp_init(this);
	
	// 초기화
	fn_init();
	fn_Search_FS0020();
	fn_searchMucd();
	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_searchCuisine()
 * 기ㅡㅡㅡ능 : 사업부 조회
 * 작ㅡ성ㅡ자 : 김호석
 * 작성ㅡ일자 : 2020-03-26
 ******************************************************************************************/
function fn_searchMucd()
{

	ds_cond.setColumn(0, "UPJANG"     , fa_UPJANG);       // 사업장코드

	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00062E_S002");	// 사업부	
	
	http.Sync = true;
    fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_mucd=ds_mucd", "", "", "", true);
	http.Sync = false;
	
	//사업부코드 가져오기(외식 예외처리 사용)
	mucd = ds_mucd.getColumn(0,"MU_CD");
	
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*
 ******************************************************************************************
	1. Function ID : fn_Search_FS0020()
	2. 개       요 : 선호도 구분을 구성한다.
	3. 기       능 : 선호도를 콤보로 선택하기위한 정보를 작성한다.
	4. 인 수 설 명 : 
 ******************************************************************************************
 */
function fn_Search_FS0020()
{
	// 초기화
	ds_FS0020.clearData();
	
	// 조회
	var actionName, cmdName, inData, outData, otherArg, callBackFnc;
	
	outData			= "ds_FS0020=ds_FS0020";
	callBackFnc		= "fn_afterSearch";
	
	fsp_clear(this); 
    fsp_addSearch(this, "fs/fsm:FSM00422E_S002");									// 조회 
	http.Sync = true;
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출 
	http.Sync = false;

}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_init()
 * 기ㅡㅡㅡ능 : 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_init()
{
	// 조회조건 초기화
	ds_cond.clearData();
	ds_cond.addRow();

	// 레시피 조회조건 초기화
	ds_recipeCond.clearData();
	ds_recipeCond.addRow();

	Div01.chk_stdRecipe.value = 1;
	Div01.chk_upjangRecipe.value = 1;
	
	// 조회조건값 세팅
	ds_cond.setColumn(0, "UPJANG"     , fa_UPJANG);       // 사업장코드
	ds_cond.setColumn(0, "HALL_CD"    , fa_HALL_CD);      // 식당코드
	ds_cond.setColumn(0, "HALL_CLASS" , fa_HALL_CLASS);   // 식당분류
	ds_cond.setColumn(0, "SUBINV_CODE", fa_SUBINV_CODE);  // 창고코드
	ds_cond.setColumn(0, "MEAL"       , fa_MEAL);         // 끼니
	ds_cond.setColumn(0, "CORNER"     , fa_CORNER);       // 코너
	ds_cond.setColumn(0, "CUR_DATE"   , fa_MENU_DATE);    // 제공일(끼니, 코너 조회용)
	cal_menuDate.fn_initMonthCal(this, fa_MENU_DATE, "fn_callbackMenuDate", ds_cond, "MENU_DATE", "Y");  // 제공일
	
	// 레시피조회조건값 세팅
	ds_recipeCond.setColumn(0, "UPJANG"     , fa_UPJANG);       // 사업장코드
	ds_recipeCond.setColumn(0, "HALL_CD"    , fa_HALL_CD);      // 식당코드
	ds_recipeCond.setColumn(0, "SUBINV_CODE", fa_SUBINV_CODE);  // 창고코드
	
	// 공통코드 조회
	var v_ds;
	var v_fil_cond;
	
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsr:FSR90010E_S001");	// 레시피명
	fsp_addSearch(this, "sc/scc:SCC_TODAY");        // 시스템일자
	fsp_addSearch(this,"fs/fsm:FSM00060E_S007");    // 병원식구성요소
	fsp_callService(this, "", "", "", "ds_cboRecipeNm=ds_RecipeNM ds_sysDate=ds_GetDate ds_Const=ds_Const", "", "fn_callbackRecipeNm");
	
	v_ds = fn_common_code("'FS0001','FS0002','FS0003','FS0004','FS0006','FS0017'","","","non","Y");

	// 업장별 사용레시피분류
	fsp_clear(this);
	ds_cboRecipeClass.clearData();
	fsp_addSearch(this,"fs/fsm:FSM00060E_S010");
	fsp_callService(this, "", "", "", "ds_cboRecipeClass=ds_RecipeClass", "UPJANG=" + fa_UPJANG, "fn_callbackRecipeClass", "", true);

	// 레시피분류(GROUP_CODE : 'FS0001')
	v_fil_cond = "GROUP_CODE=='FS0001'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_grdRecipeClass, v_ds.name);
		
	// 레시피유형(GROUP_CODE : 'FS0002')
	v_fil_cond = "GROUP_CODE=='FS0002'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboRecipeType, v_ds.name);
	ds_cboRecipeType.insertRow(0);
	ds_cboRecipeType.setColumn(0, "CODE", "");
	ds_cboRecipeType.setColumn(0, "CODE_NAME", "== 레시피유형 ==");
	Div01.cbo_recipeType.value = "";
	
	// 조리법유형(GROUP_CODE : 'FS0003')
	v_fil_cond = "GROUP_CODE=='FS0003'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboCuisineType, v_ds.name);
	ds_cboCuisineType.insertRow(0);
	ds_cboCuisineType.setColumn(0, "CODE", "");
	ds_cboCuisineType.setColumn(0, "CODE_NAME", "== 조리법유형 ==");
	Div01.cbo_cuisineType.value = "";

	// 주재료군(GROUP_CODE : 'FS0006')
	v_fil_cond = "GROUP_CODE=='FS0006'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboMaterial, v_ds.name);
	ds_cboMaterial.insertRow(0);
	ds_cboMaterial.setColumn(0, "CODE", "");
	ds_cboMaterial.setColumn(0, "CODE_NAME", "== 주재료군 ==");
	Div01.cbo_material.value = "";
	
	// 대표영양성분(GROUP_CODE : 'FS0004')
	v_fil_cond = "GROUP_CODE=='FS0004'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboElement, v_ds.name);
	ds_cboElement.insertRow(0);
	ds_cboElement.setColumn(0, "CODE", "");
	ds_cboElement.setColumn(0, "CODE_NAME", "== 대표영양성분 ==");
	Div01.cbo_element.value = "";

	// 커팅규격(GROUP_CODE : 'FS0017')
	v_fil_cond = "GROUP_CODE=='FS0017'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboCut, v_ds.name);
	
	// 조회정보(끼니, 코너, 날씨정보, 예상식수, 식단가, 식단특성) 세팅
	fn_setSearchInfo();
	
	// 폐기율 적용
	Div00.chk_disuse.value = 1;

	// 저렴자재 찾기
	//Tab00.tabpage1.chk_cheapYn.value = 1;
	
	fn_showColumn();

	// 카페테리아에서 식단등록할때 예상식수 활성화 - 2016.06.16 윤지혜 대리 요청
	if( fa_CALL_PGM == "C" )
		edt_expectMealQty.readonly = false;
	else
		edt_expectMealQty.readonly = true;
}

function fn_showColumn() 
{
	// 일반식
	if(fa_CALL_PGM == 'G')
	{
		grd_menuList.setRealColSize(7, 0, false);	// 구성요소
		grd_menuList.setRealColSize(9, 0, false);	// 원가율
		grd_menuList.setRealColSize(10, 0, false);	// 판매가
		grd_menuList.setRealColSize(11, 0, false);	// 예상판매량
	}
	// 병원식
	else if(fa_CALL_PGM == 'H')
	{
		grd_menuList.setRealColSize(7, 60, false);	// 구성요소
		grd_menuList.setRealColSize(9, 0, false);	// 원가율
		grd_menuList.setRealColSize(10, 0, false);	// 판매가
		grd_menuList.setRealColSize(11, 0, false);	// 예상판매량
	}
	// 카페테리아
	else if(fa_CALL_PGM == 'C')
	{
		grd_menuList.setRealColSize(7, 0, false);	// 구성요소
		grd_menuList.setRealColSize(9, 60, false);	// 원가율
		grd_menuList.setRealColSize(10, 60, false);	// 판매가
		grd_menuList.setRealColSize(11, 60, false);	// 예상판매량
	}
}
function fn_afterSearch(errCode, errMsg)
{
	if(errCode!=0)
	{
		g_Message("EE",	"서비스 오류:시스템 관리자에게 문의하십시오");
		return;
	}
	
}
function fn_callbackRecipeClass(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	ds_cboRecipeClass.insertRow(0);
	ds_cboRecipeClass.setColumn(0, "CD", "");
	ds_cboRecipeClass.setColumn(0, "NM", "== 레시피분류 ==");
	Div01.cbo_recipeClass.index = 0;
}

function fn_callbackRecipeNm(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	ds_cboRecipeNm.setColumn(0, "NM", "== 레시피명 ==");
	Div01.cbo_recipeNm.index = 0;
}

function fn_callbackMenuDate()
{
	if(ds_cond.getOrgColumn(0, "MENU_DATE") != ds_cond.getColumn(0, "MENU_DATE"))
	{
		ds_cond.setColumn(0, "CUR_DATE", cal_menuDate.fn_getValue());
		
		// 조회정보(끼니, 코너, 날씨정보, 예상식수, 식단가, 식단특성) 세팅
		fn_setSearchInfo();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_setSearchInfo()
 * 기ㅡㅡㅡ능 : 조회정보(끼니, 코너, 날씨정보, 예상식수, 식단가, 식단특성) 세팅
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_setSearchInfo()
{
	// 끼니, 코너
	ds_cboMeal.clearData();
	ds_cboCorner.clearData();
	
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00060E_S002");	// 끼니
	fsp_addSearch(this, "fs/fsm:FSM00060E_S004");	// 코너
	fsp_addSearch(this, "fs/fsm:FSM00060E_S001");	// 날씨정보
	fsp_callService(this, "", "", "ds_input=ds_cond", "ds_cboMeal=ds_Meal ds_cboCorner=ds_Corner ds_weather=ds_weather", "", "fn_callbackSearchInfo", "", true);
}

function fn_callbackSearchInfo(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	// 조회영역 초기값 세팅
	//cbo_meal.value = fa_MEAL;      // 끼니
	//cbo_corner.value = fa_CORNER;  // 코너
	edt_expectMealQty.value = ds_cboCorner.getColumn(cbo_corner.index, "EXPECT_MEAL_QTY"); // 예상식수
	edt_salePrice.value = ds_cboCorner.getColumn(cbo_corner.index, "SALE_PRICE");          // 식단가
	edt_menuFeature.value = ds_cboCorner.getColumn(cbo_corner.index, "MENU_FEATURE");      // 식단특성
	
	// 날씨정보 세팅
	img_weather.image = "URL('theme://convertImages/" + ds_weather.getColumn(0, "W_IMAGE") + ".png";
	st_weather.text = gfn_nvl(ds_weather.getColumn(0, "W_INFO"));
	
	// 식단구성 조회
	fn_searchMenu();
}

function fn_callback(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
}


//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,출력)
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_search()
 * 기ㅡㅡㅡ능 : 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_search()
{
	// 식단구성 조회
	fn_searchMenu();
}

function fn_callBackSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_close()
 * 기ㅡㅡㅡ능 : 닫기
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_close()
{
	// 병원식의 경우 구성요소 입력 여부를 체크한다.
	if(fa_CALL_PGM == 'H')
	{
		//구성요소 확인
		var nRow = ds_menuList.findRowExpr("gfn_length(MAJOR_DISH_INFO)==0");
		if(nRow != -1)
		{
			g_Message("EE", "구성요소가 지정되지 않은 레시피가 있습니다.\n병원식단 레시피는 구성요소가 필수 입력입니다.\n\n구성요소(주식,국,부식등..)를 선택하여 주십시요."); 
			return false;
		}	
	}	

	if(gfn_dsIsUpdated(ds_menuList))
	{
		blnRtn = g_Confirm("04", "저장되지 않은 데이터가 있습니다.\n구성요소를 변경하였을 경우 반드시 저장버튼을 눌러주십시요.\n\n레시피검색및 등록 창을 닫으시겠습니까?"); 
		return blnRtn;
	}
	
	this.close();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_save()
 * 기ㅡㅡㅡ능 : 저장
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_save()
{
	if(gfn_dsIsUpdated(ds_menuList) != true && gfn_dsIsUpdated(ds_menuItemList) != true && gfn_dsIsUpdated(ds_cuisineList) != true)
	{
		g_Message("EE", "변경된 자료가 없습니다.");
		return false;
	}

	// 병원식의 경우 구성요소 입력 여부를 체크한다.
	if(fa_CALL_PGM == 'H')
	{
		//구성요소 확인
		var nRow = ds_menuList.findRowExpr("gfn_length(MAJOR_DISH_INFO)==0");
		if(nRow != -1)
		{
			g_Message("EE", "구성요소가 지정되지 않은 레시피가 있습니다.\n병원식단 레시피는 구성요소가 필수 입력입니다.\n\n구성요소(주식,국,부식등..)를 선택하여 주십시요."); 
			return false;
		}	
	}

	var inData = "ds_Menu=ds_menuList:U ds_Item=ds_menuItemList:U";
	fsp_clear(this);
	if(ds_cond.getColumn(0, "HALL_CLASS") == "005")	// 카페테리아 
	{
		if(ds_menuList.findRowExpr("SALE_PRICE==0 || SALE_PRICE=='' || EXPECT_SALE_QTY==0 || EXPECT_SALE_QTY==''")!=-1)
		{
			g_Message("EE","판매가 혹은 예상판매량은 필수 입력입니다.");
			return;
		}
		fsp_addSave(this, "", "fs/fsm:FSM00060E_U003", "", "", "", "", "");
	}
	else 												// 그외 
	{
		fsp_addSave(this, "", "fs/fsm:FSM00060E_U004", "", "", "", "", "");
	}
	
	fsp_addSave(this, "", "fs/fsm:FSM00060E_U005", "", "", "", "", "");
	
	// 조리법 저장여부
	if(gfn_dsIsUpdated(ds_cuisineList) == true)
	{
		if(ds_cuisineList.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
		{
			g_Message("EE", "조리법이 비어있는 라인이 있습니다.비어있는 라인을 입력하세요.");
			return false;
		}
		// 조리법 저장 추가
		inData = inData + " ds_CookMethod=ds_cuisineList:U";
		fsp_addSave(this, "fs/fsm:FSM00060E_I001", "fs/fsm:FSM00060E_U001", "fs/fsm:FSM00060E_D004", "", "", "", "");
	}
	
	fsp_callService(this, "", "", inData, "", "", "fn_callbackSave");
}

function fn_callbackSave(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	// 식단 저장 후 업장표준레시피 구축이 존재할 경우 구축 작업을 진행한다.
	var arg;
	for(var i=0; i<ds_menuList.getRowCount(); i++)
	{
		if(ds_menuList.getColumn(i, "CREAT") == 1)
		{
			arg	= "UPJANG="		 + wrapQuote(ds_menuList.getColumn(i,"UPJANG"))
				+ " HALL_CLASS=" + wrapQuote(ds_cond.getColumn(0, "HALL_CLASS"))
				+ " RECIPE_CD="	 + wrapQuote(ds_menuList.getColumn(i,"RECIPE_CD"))
				+ " MENU_CD="	 + wrapQuote(ds_menuList.getColumn(i,"MENU_CD"));

			http.Sync = true;
			fn_createUpjangRecipe(arg);
			http.Sync = false;
			
			ds_menuList.setColumn(i, "CREAT", 0);
		}
	}
	
	g_Message("02", "저장 되었습니다.");

	var nCurRow = ds_menuList.rowposition;
    ds_menuList.enableevent = false;
    ds_menuItemList.enableevent = false;
    
	http.Sync = true;
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00060E_S006");	// 식단 조회
	fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_menuList=ds_Menu", "", "");
	http.Sync = false;
	
	ds_menuList.rowposition = nCurRow;
	ds_menuList.enableevent = true;
	ds_menuItemList.enableevent = true;
	//fn_search();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_createUpjangRecipe(arg)
 * 기ㅡㅡㅡ능 : 업장표준레시피 구축
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_createUpjangRecipe(arg)
{
	fsp_clear(this);
	fsp_addSingle(this, "fs/fsm:FSM00060E_D008");
	fsp_addSingle(this, "fs/fsm:FSM00060E_D009");
	fsp_addSingle(this, "fs/fsm:FSM00060E_D010");
	fsp_addSingle(this, "fs/fsm:FSM00060E_I002");
	fsp_addSingle(this, "fs/fsm:FSM00060E_I003");
	fsp_addSingle(this, "fs/fsm:FSM00060E_I004");
	fsp_callService(this, "", "", "", "", arg, "fn_callbackCreateUpjangRecipe");
	
}

function fn_callbackCreateUpjangRecipe(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
function fn_searchCorner()
{
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00060E_S004");	// 코너
	fsp_callService(this, "", "", "ds_input=ds_cond", "ds_cboCorner=ds_Corner", "", "fn_callbackSearchCorner", "", true);
}

function fn_callbackSearchCorner(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	// 조회영역 값 세팅
	//cbo_corner.value = fa_CORNER;  // 코너
	edt_expectMealQty.value = ds_cboCorner.getColumn(ds_cboCorner.rowposition, "EXPECT_MEAL_QTY"); // 예상식수
	edt_salePrice.value = ds_cboCorner.getColumn(ds_cboCorner.rowposition, "SALE_PRICE");          // 식단가
	edt_menuFeature.value = ds_cboCorner.getColumn(ds_cboCorner.rowposition, "MENU_FEATURE");      // 식단특성
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_searchMenu()
 * 기ㅡㅡㅡ능 : 식단구성 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_searchMenu()
{
 	ds_menuList.clearData();
	ds_menuItemList.clearData();

	var sMenuCd = ds_cond.getColumn(0, "MENU_DATE") + "-" + ds_cond.getColumn(0, "HALL_CD") + ds_cond.getColumn(0, "MEAL") + ds_cond.getColumn(0, "CORNER");
	ds_cond.setColumn(0, "MENU_CD", sMenuCd);

	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00060E_S006");	// 식단 조회
	
	if(Tab00.tabpage1.chk_cheapYn.value == 1)
	{
		//외식사업부 예외처리
		if (mucd == "2003") {
			fsp_addSearch(this, "fs/fsm:FSM90060E_S010");	// 식단자재 조회(저렴자재)
		} else { 
			fsp_addSearch(this, "fs/fsm:FSM90060E_S008");	// 식단자재 조회(저렴자재)
		}
	}
	else
	{
		//외식사업부 예외처리
		if (mucd == "2003") {
			fsp_addSearch(this, "fs/fsm:FSM90060E_S009");	// 식단자재 조회
		} else { 
			fsp_addSearch(this, "fs/fsm:FSM90060E_S007");	// 식단자재 조회
		}
		
	
	}
	
	fsp_addSearch(this, "fs/fsr:FSR90120E_S002");	// 강제레시피 대상사업장 여부조회
	fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_menuList=ds_Menu ds_menuItemList=ds_menuItemList ds_enfUpjangList=ds_list", "", "fn_callbackSearchMenu");
}

function fn_callbackSearchMenu(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}

	// 강제레시피 대상사업장 여부 세팅
	// 강제레시피 대상업장의 경우 자재추가, 자재일괄대체, 레시피비율일괄조정 불가처리
	if(ds_enfUpjangList.getRowCount() > 0)
	{
		fa_ENF_YN = 'Y';
		Tab00.tabpage1.btn_changeItem.enable = false;
		Tab00.tabpage1.btn_addItem.enable = false;
	}
	else
	{
		fa_ENF_YN = 'N';
		Tab00.tabpage1.btn_changeItem.enable = true;
		Tab00.tabpage1.btn_addItem.enable = true;
	}

	fn_setEnfUpjang(fa_ENF_YN);

	var summTxt = '';
	if(fa_CALL_PGM == 'C')
	{
		summTxt = '평균원가율(' + (Math.round((ds_menuList.getSum("TOT_COST")/ds_menuList.getSum("TOT_SALE")) * 100, 1)) + '%)';
	}
	else
	{
		summTxt = '식재료율(' + (Math.round((ds_menuList.getSum("RECIPE_COST")/ds_menuList.getAvg("CORN_SALE_PRICE")) * 100, 1)) + '%)';
	}
	grd_menuList.setCellProperty("summ", 1, "text", summTxt);

	// 권장 메뉴 대상 사업장 조회
	fn_getRecUpjang();

	// 식단자재조회
	//fn_searchMenuItem();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_searchMenuItem()
 * 기ㅡㅡㅡ능 : 식단자재조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_searchMenuItem()
{
	var sMenuCd = ds_cond.getColumn(0, "MENU_DATE") + "-" + ds_cond.getColumn(0, "HALL_CD") + ds_cond.getColumn(0, "MEAL") + ds_cond.getColumn(0, "CORNER");
	ds_cond.setColumn(0, "MENU_CD", sMenuCd);
	jsp_transaction(this, "FSM00060E_T008","U_svc::fs/fsm/FSM00060E_T008.jsp", "ds_cond=ds_cond", "ds_menuItemList=ds_List", "", "fn_callback", false, false, false);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_searchCuisine()
 * 기ㅡㅡㅡ능 : 조리법 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_searchCuisine()
{
	// 현재 선택되어 있는 레시피코드 세팅
	ds_cond.setColumn(0, "RECIPE_CD", ds_menuList.getColumn(ds_menuList.rowposition, "RECIPE_CD"));

	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00062E_S001");	// 조리법	
	fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_cuisineList=ds_CookMethod", "", "", "", true);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_searchCuisineMethod()
 * 기ㅡㅡㅡ능 : 조리공정 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_searchCuisineMethod()
{
	var sCuisineType = ds_menuItemList.getColumn(ds_menuItemList.rowposition, "CUISINE_TYPE");
	//Tab00.tabpage3.img_cuisineMethod.image = fsp_getServerDir("FSR_CUISINE_IMG") + "/" + sCuisineType + ".jpg";
	Tab00.tabpage3.img_cuisineMethod.image = fsp_getServerDir("FSR_CUISINE_IMG", sCuisineType + ".jpg");
	//Tab00.tabpage3.img_cuisineMethod.image = gv_webRoot + "/upload/img/cook_ctrl/" + sCuisineType + ".jpg";
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_deleteRecipe()
 * 기ㅡㅡㅡ능 : 레시피삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_deleteRecipe()
{
	fsp_clear(this);
	fsp_addSave(this, "", "", "fs/fsm:FSM00060E_D001","", "", "", "");
	fsp_addSave(this, "", "", "fs/fsm:FSM90060E_D002","", "", "", "");
	fsp_addSave(this, "", "", "fs/fsm:FSM00060E_D003","", "", "", "");
	fsp_callService(this, "", "", "ds_Menu=ds_menuList:U", "", "", "fn_callbackDeleteItem");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_deleteItem()
 * 기ㅡㅡㅡ능 : 자재삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_deleteItem()
{
	fsp_clear(this);
	fsp_addSave(this, "", "", "fs/fsm:FSM00060E_D002","", "", "", "");
	fsp_callService(this, "", "", "ds_Item=ds_menuItemList:U", "", "", "fn_callbackDeleteItem");
}

function fn_callbackDeleteItem(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	//fn_searchMenu();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_setEnfUpjang()
 * 기ㅡㅡㅡ능 : 강제레시피 대상사업장 여부에 따른 UI변경 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_setEnfUpjang(sEnfYn)
{
	// 강제레시피 대상업장 여부
	if(sEnfYn == 'Y')
	{
		Div01.chk_stdRecipe.value = 0;
		Div01.chk_upjangRecipe.value = 0;
		Div01.chk_enfRecipe.value = 1;
		Div01.chk_stdRecipe.enable = false;
		Div01.chk_upjangRecipe.enable = false;
		Div01.chk_enfRecipe.enable = false;
	}
	else
	{
		if(Div01.chk_stdRecipe.value == 0 && Div01.chk_upjangRecipe.value == 0)
		{
			Div01.chk_stdRecipe.value = 1;
			Div01.chk_upjangRecipe.value = 1;
		}
		Div01.chk_enfRecipe.value = 0;		
		Div01.chk_stdRecipe.enable = true;
		Div01.chk_upjangRecipe.enable = true;
		Div01.chk_enfRecipe.enable = false;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_color(nRow)
 * 기ㅡㅡㅡ능 : 자재명에 칼라 적용 (구매신청완료된 자재는 순번필드에 표현함)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_color(nRow)
{
	// 불용자재
	if(ds_menuItemList.getColumn(nRow, "MTG_UNS") == 'UK' || ds_menuItemList.getColumn(nRow, "MTG_STP") == 'TK' || gfn_isNull(ds_menuItemList.getColumn(nRow, "MARGIN_PRICE")) || Number(ds_menuItemList.getColumn(nRow, "MARGIN_PRICE")) == 0)
	{
		return "#FFAA9C";
	}

	// 금지 자재
	var sMenuDate = gfn_trim(ds_cond.getColumn(0, "MENU_DATE"));
	
	if( sMenuDate >= ds_menuItemList.getColumn(nRow,"RESTRICT_START") &&
		sMenuDate <= ds_menuItemList.getColumn(nRow,"RESTRICT_END") )
	{
		if(sMenuDate >= ds_menuItemList.getColumn(nRow,"CNL_START") &&
		   sMenuDate <= ds_menuItemList.getColumn(nRow,"CNL_END") )
		{
			return "default";
		}
		else
		{
			return "#FFE49C";
		}
	}
	return "default";
}


/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_color(nRow)
 * 기ㅡㅡㅡ능 : D-DAY에 칼라 적용 
 * 작ㅡ성ㅡ자 : 김호석
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_color2(nRow)
{
	
	if(ds_menuItemList.getColumn(nRow, "D_DAY") == '2' ) 
	{
		return "#6EE3F7";
	}
	if(ds_menuItemList.getColumn(nRow, "D_DAY") == '3' ) 
	{
		return "#98F791";
	}

	return "default";
}


//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// 
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_meal_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 끼니 변경시 코너정보 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function cbo_meal_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	// 끼니, 코너
	ds_cboMeal.clearData();
	ds_cboCorner.clearData();
	
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00060E_S002");	// 끼니
	fsp_addSearch(this, "fs/fsm:FSM00060E_S004");	// 코너
	fsp_callService(this, "", "", "ds_input=ds_cond", "ds_cboMeal=ds_Meal ds_cboCorner=ds_Corner", "", "fn_callbackMealChange", "", true);

	// 코너정보 조회
	//fn_setSearchInfo();
	//fn_searchCorner();
}

function fn_callbackMealChange(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}

	cbo_corner.index = 0;
	
	// 조회영역 초기값 세팅
	edt_expectMealQty.value = ds_cboCorner.getColumn(cbo_corner.index, "EXPECT_MEAL_QTY"); // 예상식수
	edt_salePrice.value = ds_cboCorner.getColumn(cbo_corner.index, "SALE_PRICE");          // 식단가
	edt_menuFeature.value = ds_cboCorner.getColumn(cbo_corner.index, "MENU_FEATURE");      // 식단특성
	
	// 식단구성 조회
	fn_searchMenu();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_searchRecipe_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피 검색
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function btn_searchRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
	// 제공일 세팅
	ds_recipeCond.setColumn(0, "MENU_DATE", cal_menuDate.fn_getValue());
	
	// 레시피명 세팅
	var sRecipeName = gfn_replace(Div01.cbo_recipeNm.value, "== 레시피명 ==", "");
	ds_recipeCond.setColumn(0,"RECIPE_NAME", sRecipeName);

	ds_recipeList.clearData();
	fsp_clear(this);
	//외식사업부 예외처리
	if (mucd == "2003") {
		fsp_addSearch(this,"fs/fsm:FSM90060E_S006");
	} else {
		fsp_addSearch(this,"fs/fsm:FSM90060E_S005");
	}
	fsp_callService(this, "", "", "ds_recipeCond=ds_recipeCond", "ds_recipeList=ds_List", "", "fn_callback", "", false);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Div01.cbo_recipeNm_onitemchanged(obj:Combo, e:TextChangedEventInfo)
 * 기ㅡㅡㅡ능 : 레시피명 컴포넌트 이벤트 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function cbo_recipeNm_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		btn_search.setFocus();
		Div01.btn_searchRecipe.click();	
		Div01.cbo_recipeNm.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}	
}

function cbo_recipeNm_onkeydown(obj:Combo, e:KeyEventInfo)
{
	if (e.keycode == 13 && obj.userchange == "1") {
		var strValue, nFRow, objDs, strDataColumn;
		
		strValue 		= obj.userdata;
		objDs           = ds_cboRecipeNm;
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = objDs.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = objDs.addRow();
				objDs.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		
		btn_search.setFocus();
		Div01.btn_searchRecipe.click();
		//Div01.cbo_recipeNm.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}	
}

function cbo_recipeNm_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
    var strValue,nFRow,objDs,strDataColumn;
	
	objDs           = ds_cboRecipeNm;
	strValue 		= obj.userdata;
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = objDs.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = objDs.addRow();
			objDs.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index = 0;
	}		
}

function cbo_recipeNm_ontextchanged(obj:Combo, e:TextChangedEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1";	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Div01.cbo_recipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 레시피유형 변경시 조리법유형 필터링
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function cbo_recipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(e.postindex==0)
	{
		ds_cboCuisineType.filter("");
	}
	else
	{
		ds_cboCuisineType.filter("gfn_length(SET1)==0 || SET1=='" + e.postvalue + "'");
	}
	Div01.cbo_cuisineType.index = 0;		
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_onstepchanged(obj:Tab, e:StepChangeEventInfo)
 * 기ㅡㅡㅡ능 : 탭변경시 호출 (조리법, 조리공정)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_onchanged(obj:Tab, e:TabIndexChangeEventInfo)
{
	// 조리법 탭 클릭시
	if(e.postindex == 1) 
	{
		fn_searchCuisine();
	}
	// 조리공정 탭 클릭시
	else if(e.postindex == 2)
	{
		fn_searchCuisineMethod();
	}
	// 기획자재 탭 클릭시
	else if(e.postindex == 3)
	{
		fn_searchDutyItem();
	}
}

function fn_searchDutyItem() 
{
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM90030P_S001");	// 기획자재	
	fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_dutyItemList=ds_dutyItemList", "", "", "", true);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_menuList_oncellclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 식단구성 클릭
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function grd_menuList_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	// 레시피 삭제버튼
	if(e.col == 4)
	{
		// 발주자재의 경우 삭제 불가
		if(ds_menuItemList.findRowExpr("RECIPE_CD==" + wrapQuote(ds_menuList.getColumn(e.row, "RECIPE_CD")) + " && ORDER_YN=='Y'") != -1)
		{
			g_Message("EE", "발주된 자재가 있습니다.\n\n삭제할 수 없습니다.");
			return;
		}
		
		var attr02 = ds_menuList.getColumn(e.row, "ATTR02");

		// 삭제하려는 레시피가 대표레시피일 경우 메세지 처리 다르게함.
		if( attr02 == 1 )
		{
			// 대상그룹의 업장이 강제업장일 경우 대표레시피를 삭제할 수 없다.
			if( ds_recUpjang.getColumn(0, "COMP_YN") == "Y" )
			{
				g_Message("EE", "권장메뉴 강제 사업장은 대표레시피를 삭제할 수 없습니다.");
				return;
			}

			if(!g_Confirm("01", "[ " + ds_menuList.getColumn(e.row, "RECIPE_NAME") + " ] 레시피는 대표레시피 입니다.\n 삭제하시겠습니까?")) return;
		}
		else
		{
			if(!g_Confirm("01", "[ " + ds_menuList.getColumn(e.row, "RECIPE_NAME") + " ] 레시피를 삭제하시겠습니까?")) return;
		}
		
		// 그리드 삭제처리
		ds_menuItemList.updatecontrol = false;
		var nRow;
		var nCnt = ds_menuItemList.getRowCount();
		for(var i=0; i<nCnt; i++)
		{
			nRow = ds_menuItemList.findRow("RECIPE_CD", ds_menuList.getColumn(e.row, "RECIPE_CD"));
			ds_menuItemList.deleteRow(nRow);
		}
		ds_menuList.deleteRow(e.row);
		ds_menuItemList.updatecontrol = true;
		
		// DB 삭제처리
		fn_deleteRecipe();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_grd_menuItemList_oncellclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 식단구성 선택 변경시 자재목록 선택처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function ds_menuList_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	// 자재목록 그리드 선택 처리
	ds_menuItemList.clearSelect();
	ds_menuItemList.rowposition = ds_menuItemList.findRow("RECIPE_CD", ds_menuList.getColumn(e.newrow, "RECIPE_CD"));
	ds_menuItemList.selectRow(ds_menuItemList.rowposition); 
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_grd_menuItemList_oncellclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 자재목록 선택 변경시 식단구성 선택처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function ds_menuItemList_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	ds_menuList.enableevent = false;
	ds_menuList.clearSelect();
	ds_menuList.rowposition = ds_menuList.findRow("RECIPE_CD", ds_menuItemList.getColumn(e.newrow, "RECIPE_CD"));
	ds_menuList.selectRow(ds_menuList.rowposition); 
	ds_menuList.enableevent = true;	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_grd_menuItemList_oncellclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 폐기율 적용
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function chk_disuse_onclick(obj:CheckBox,  e:ClickEventInfo)
{
	// 폐기율 적용
	if(obj.isChecked() == 1)
	{
		grd_menuList.formatid = "GRD_DISUSE";
	}
	// 폐기율 미적용
	else
	{
		grd_menuList.formatid = "GRD_NOT_DISUSE";
	}
	fn_showColumn();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_addRecipe_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피 추가 (화살표)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
var v_bln;
function btn_addRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_recipeList.rowposition;
	
	if(fa_ENF_YN == 'Y')
	{
		if(ds_recipeList.getColumn(nRow, "GUBUN") != "그룹") 
		{
			g_Message("EE","그룹 레시피만 추가가 가능합니다.\n다시 레시피조회를 해주시기 바랍니다.");
			return;		
		}
	}

	if(ds_cboMeal.getRowCount() == 0 || ds_cboCorner.getRowCount() == 0)
	{
		g_Message("EE","메뉴(끼니코너) 정보가 없습니다.");
		return;
	}

	if(gfn_isNull(ds_cond.getColumn(0, "MEAL")))
	{
		g_Message("EE","끼니를 선택해주세요.");
		return;
	}

	if(gfn_isNull(ds_cond.getColumn(0, "CORNER")))
	{
		g_Message("EE","코너를 선택해주세요.");
		return;
	}
	
	// 레시피 목록이 0건일 경우
	if(ds_recipeList.getRowCount() == 0)
	{
		g_Message("EE", "레시피 조회 후 선택해주세요.");
		return;
	}

	// 변경된 내용이 존재할 경우
	if(gfn_dsIsUpdated(ds_menuList) == true || gfn_dsIsUpdated(ds_menuItemList) == true)
	{
		g_Message("EE", "변경된 자료가 있습니다. 저장 후 작업하세요.");
		return;
	}
	
	// 레시피 중복 체크
	var sRecipeCd = ds_recipeList.getColumn(nRow, "RECIPE_CD");
	var nDupRow = ds_menuList.findRow("RECIPE_CD", gfn_trim(sRecipeCd));
	if(nDupRow != -1)
	{
		g_Message("EE", "이미 등록된 레시피 입니다.");
		ds_menuList.rowposition = nDupRow;
		return;
	}

	var sMenuCd = ds_cond.getColumn(0, "MENU_DATE") + "-" + ds_cond.getColumn(0, "HALL_CD") + ds_cond.getColumn(0, "MEAL") + ds_cond.getColumn(0, "CORNER");
	var arg	= "UPJANG="		+ wrapQuote(ds_cond.getColumn(0, "UPJANG"))
			+ " HALL_CLASS="+ wrapQuote(ds_cond.getColumn(0, "HALL_CLASS"))
			+ " RECIPE_CD="	+ wrapQuote(sRecipeCd)
			+ " NEED_DATE="	+ wrapQuote(ds_cond.getColumn(0, "MENU_DATE"))
			+ " SUBINV_CODE="+ wrapQuote(ds_cond.getColumn(0, "SUBINV_CODE"))
			+ " HALL_CD="	+ wrapQuote(ds_cond.getColumn(0, "HALL_CD"))
			+ " MEAL="		+ wrapQuote(ds_cond.getColumn(0, "MEAL"))
			+ " CORNER="	+ wrapQuote(ds_cond.getColumn(0, "CORNER"))
			+ " MENU_CD="	+ wrapQuote(sMenuCd);

	ds_validData.clearData();
	http.Sync=true;
	Transaction("FSM00060E", "U_svc::fs/fsm/FSM00060E_S003.jsp", "", "ds_validData=ds_ValidData", arg, "fn_callbackValid");
	http.Sync=false;
	if(ds_validData.getRowCount() > 0)
	{
		g_Message("EE","선택하신 식단(레시피) 정보가 정상적이지 않습니다.\n\n상단의 초기화 버튼을 클릭하신 후 다시 작업해 주세요.");
		return;
	}
	
	// 업장레시피 유효성 체크
	if(gfn_trim(ds_recipeList.getColumn(nRow, "GUBUN")) == "업장")
	{
		ds_rCnt.clearData();
		ds_iCnt.clearData();
		http.Sync=true;
		Transaction("FSM00060E", "U_svc::fs/fsm/FSM00060E_S001.jsp", "", "ds_rCnt=ds_rCnt ds_iCnt=ds_iCnt", arg, "fn_callbackValid");
		http.Sync=false;
	}
	// 표준/강제레시피 유효성 체크
	else
	{
		ds_rCnt.clearData();
		ds_iCnt.clearData();
		http.Sync=true;
		Transaction("FSM00060E", "U_svc::fs/fsm/FSM00060E_S002.jsp", "", "ds_rCnt=ds_rCnt ds_iCnt=ds_iCnt", arg, "fn_callbackValid");
		http.Sync=false;
	}
	
	// 유효성 체크 시스템 오류시 등록작업 중지
	if(!v_bln)
	{
		return;
	}

	if(ds_rCnt.getRowCount() == 0 || ds_iCnt.getRowCount() == 0)
	{
		g_Message("EE","데이터가 정상적이지 않습니다.\n\n작업을 중지하시고 전산 담당자에게 해당 레시피 점검을 요청하세요.");
		return;
	}

	// 업장레시피 등록
	if(gfn_trim(ds_recipeList.getColumn(nRow, "GUBUN")) == "업장")
	{
		fsp_clear(this);
		fsp_addSingle(this, "fs/fsm:FSM00060E_I008");
		//외식사업부 예외처리
		if (mucd == "2003") {
	    	fsp_addSingle(this, "fs/fsm:FSM00060E_I019");
	    } else {
			fsp_addSingle(this, "fs/fsm:FSM00060E_I009");
		}
		fsp_addSingle(this, "fs/fsm:FSM00060E_I010");
		http.Sync=true;
		fsp_callService(this, "", "", "", "", arg, "fn_callback");
		http.Sync=false;			
	}
	// 표준/강제레시피 등록
	else
	{
		fsp_clear(this);
		fsp_addSingle(this, "fs/fsm:FSM00060E_I005");
		//외식사업부 예외처리
	    if (mucd == "2003") {
	    	fsp_addSingle(this, "fs/fsm:FSM00060E_I016");
	    } else {
			fsp_addSingle(this, "fs/fsm:FSM00060E_I006");
		}
		fsp_addSingle(this, "fs/fsm:FSM00060E_I007");
		http.Sync=true;
		fsp_callService(this, "", "", "", "", arg, "fn_callback");
		http.Sync=false;			
	}
	
	fn_search();
}

function fn_callbackValid(svcId, errCode, errMsg) 
{
	if(errCode != 0)
	{
		v_bln = false;
		g_Message("EE", "레시피 유효성 점검중 서비스 오류가 발생했습니다.\n레시피 추가 작업이 중지됩니다.\n\n전산 담당자에게 문의하세요.");
		return;
	}
	v_bln = true;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_addRecipe_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 표준/업장 레시피 체크박스 클릭시 두개중에 한개는 반드시 선택되도록 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function chk_recipe_onclick(obj:CheckBox,  e:ClickEventInfo)
{
	if(fa_ENF_YN != 'Y')
	{
		switch(obj.name)
		{
			case "Div01.chk_stdRecipe":
				if(obj.isChecked() != 1)
				{
					Div01.chk_upjangRecipe.value = 1;
				}
				break;
			case "Div01.chk_upjangRecipe":
				if(obj.isChecked() != 1)
				{
					Div01.chk_stdRecipe.value = 1;
				}		
				break;
		}
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_grd_menuItemList_oncellclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 자재목록 그리드 클릭시 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_grd_menuItemList_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	// 자재삭제
	if(e.col == 3)
	{
		// 강제레시피 대상업장의 경우 대표자재삭제 불가
		if(ds_menuItemList.getColumn(e.row, "ATTR10") == "1")	
		{
			return;
		}
	
		// 발주된 자재는 수정 및 삭제 불가 이 자재를 보유한 레시피도 삭제불가
		if(ds_menuItemList.getColumn(e.row,"ORDER_YN") == "Y")	
		{
			return;
		}

		// 권장메뉴 대상업장
		if( ds_recUpjang.getColumn(0, "USE_YN") == "Y" && ds_recUpjang.getColumn(0, "COMP_YN") == "Y" )
		{
			// 대표자재일 경우 삭제 불가
			if( ds_menuItemList.getColumn(e.row, "ATTR02") == 1 )
			{
				g_Message("EE", "권장 메뉴 강제 사업장은 대표자재를 삭제할 수 없습니다.");
				return;
			}
		}

		if(gfn_dsIsUpdated(ds_menuList) == true || gfn_dsIsUpdated(ds_menuItemList) == true)
		{
			g_Message("EE", "변경된 자료가 있습니다.\n\n먼저 저장하신후 작업하세요.");
			return;
		}

		if(!g_Confirm("01", "[ " + gfn_trim(ds_menuItemList.getColumn(e.row, "ITEM_NAME")) + " ] 자재를 삭제하시겠습니까?")) return;
		
		//ds_menuItemList.updatecontrol = false;
		// 그리드 삭제처리
		ds_menuItemList.deleteRow(e.row);
		//ds_menuItemList.updatecontrol = true;
		
		// 자재 DB 삭제처리
		fn_deleteItem();
	}
	// 입고예정일 
	/*
	else if(e.col == 15)
	{
		if(ds_menuItemList.getColumn(e.row, "ORDER_YN") == "Y") {
			return;
		}

		var retDate, orgDate, strValue;
		var nCellRect = obj.getCellRect(e.row, 13);  //left,right,top,bottom
		var nX = system.clientToScreenX(obj, nCellRect.left);
		var nY = system.clientToScreenY(obj, nCellRect.top); 

		orgDate = ds_menuItemList.getColumn(e.row,"NEED_DATE");
		retDate = gfn_callCalendarPopDiv(ds_menuItemList.getColumn(e.row, "NEED_DATE"), nX, nY - 76);

		if(retDate < "20080701")  {
			g_Message("EE","2008년 7월 1일 이전일자로 작업할수 없습니다.");
			retDate="20080701";
		}

		// 입고 예정일은 오늘 이후, 제공일을 포함한 이전이어야 한다.
		if(retDate <= ds_sysDate.getColumn(0, "TODAY") || retDate > ds_cond.getColumn(0, "MENU_DATE")) {
			g_Message("EE", "입고 예정일은 오늘 이후, 제공일을 포함한 이전이어야 합니다.\n\n다시 선택하세요.");
			return;
		}
		  
		if(gfn_length(gfn_trim(retDate)) == 8) {
			ds_menuItemList.setColumn(e.row, "NEED_DATE", retDate);
		}
	}
	*/
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_photo_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 식단사진
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_photo_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_menuList.getRowCount()==0)
	{
		return;
	}

	if( ds_menuList.getColumn(0, "ATTR02") == 1 )
	{
		gfn_alert("대표자재는 삭제가 불가합니다.");
	}
	
	var arg	= {MENU_DATE:ds_cond.getColumn(0, "MENU_DATE")
			 , MEAL:ds_cond.getColumn(0, "MEAL")
			 , UPJANG:ds_cond.getColumn(0, "UPJANG")
			 , HALL_CD:ds_cond.getColumn(0, "HALL_CD")
			 , CORNER:ds_cond.getColumn(0, "CORNER")};
			 
	gfn_dialog("", "U_FSM::FSM00066P.xfdl", arg);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_qality_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 품질평가
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_qality_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_menuList.getRowCount()==0)
	{
		return;
	}
	
	var arg	= {MENU_DATE:ds_cond.getColumn(0, "MENU_DATE")
			 , MEAL:ds_cond.getColumn(0, "MEAL")
			 , UPJANG:ds_cond.getColumn(0, "UPJANG")
			 , HALL_CD:ds_cond.getColumn(0, "HALL_CD")
			 , CORNER:ds_cond.getColumn(0, "CORNER")};
			 
	gfn_dialog("", "U_FSM::FSM00065P.xfdl", arg);	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_nut_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 영양평가
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_nut_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_menuList.getRowCount()==0)
	{
		return;
	}
	
	var arg	= {UPJANG:ds_cond.getColumn(0, "UPJANG")
		     , HALL_CD:ds_cond.getColumn(0, "HALL_CD")
		     , GUBUN:Div00.chk_disuse.value};
		     
	gfn_dialog("", "U_FSM::FSM00064P.xfdl", arg); 	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_btn_changeItem_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 자재일괄대체
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_btn_changeItem_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_menuItemList.getRowCount()==0)
	{
		return;
	}

	// 변경된 데이터가 존재할 경우 저장 후 팝업	
	if(gfn_dsIsUpdated(ds_menuList) == true || gfn_dsIsUpdated(ds_menuItemList) == true)
	{
		//fn_save();
	}

	// 권장메뉴 강제업장은 대표레시피 삭제 안됨으로 선택 해제
	if( ds_recUpjang.getColumn(0, "USE_YN") == "Y" && ds_recUpjang.getColumn(0, "COMP_YN") == "y" )
	{
		for( var n = 0; n < ds_menuItemList.rowcount; n++ )
		{
			if( ds_menuItemList.getColumn(n, "ATTR02") == 1 && ds_menuItemList.getSelect(n) == true )
			{
				ds_menuItemList.selectRow(n, false);
			}
		}
	}

	// 일괄대체시 레시피당 하나의 자재만 선택되도록 처리
	var sRecipeCd = "";

	for( var i = 0; i < ds_menuItemList.getRowCount(); i++ )
	{
		if( ds_menuItemList.getSelect(i) == true )
		{
			if( sRecipeCd == ds_menuItemList.getColumn(i, "RECIPE_CD") )
			{
				ds_menuItemList.selectRow(i, false);
			}
			sRecipeCd = ds_menuItemList.getColumn(i, "RECIPE_CD");
		}
	}

	var arg ={
	          RECIPE_CD:ds_menuItemList.getColumn(e.row, "RECIPE_CD")
			, UPJANG:ds_menuItemList.getColumn(e.row, "UPJANG")
			, MENU_CD:ds_menuItemList.getColumn(e.row, "MENU_CD")
			, HALL_CD:gfn_trim(fa_HALL_CD)
			, SUBINV_CODE:gfn_trim(fa_SUBINV_CODE)
			, MEAL:gfn_trim(cbo_meal.value)
			, CORNER:gfn_trim(cbo_corner.value)
			, S_ROWNUM:""
			, MENU_DATE:gfn_trim(cal_menuDate.fn_getValue())
			, ITEM_CODE:ds_menuItemList.getColumn(e.row, "ITEM_CODE")
			, ITEM_NAME:ds_menuItemList.getColumn(e.row, "ITEM_NAME")
			, ITEM_CLASS2:""
			, ITEM_CLASS3:""
			, ITEM_CLASS4:""
			, NEED_DATE:ds_menuItemList.getColumn(e.row, "NEED_DATE")
			, ENF_YN:fa_ENF_YN
	};	
	
	//외식사업부 예외처리
	if (mucd == "2003") {		
		var rtn = gfn_dialog("", "U_FSM::FSM90037P.xfdl",arg);		
	} else {
		var rtn = gfn_dialog("", "U_FSM::FSM90032P.xfdl",arg);
	}
	
	if(gfn_length(gfn_trim(rtn)) == 0 || gfn_trim(rtn) == null)
	{
		return;
	}
	
	// 정상 변경시 자재 재조회
	if(rtn == "OK")
	{
		fn_search();
	}
	else
	{
		return;
	}

}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_btn_applyRatio_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피비율 일괄조정
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_btn_applyRatio_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_menuList.getRowCount()==0)
	{
		return;
	}

	var rtn = gfn_dialog("", "U_FSM::FSM90033P.xfdl", ""); 
	
	var nRow;
	if(rtn == 1)
	{
		// 자재에 대해 비율 일괄 수정
		for(var i=0; i<ds_menuItemList.rowcount; i++)
		{
			// 신규로 추가되는 자재는 무조건 N 입니다.
			if(ds_menuItemList.getColumn(i, "ORDER_YN") != "Y")	
			{
				nRow = ds_menuList.findRow("RECIPE_CD", ds_menuItemList.getColumn(i,"RECIPE_CD"));
				if(ds_menuList.getColumn(nRow, "V_STA") == 1 && gfn_length(gfn_trim(ds_menuList.getColumn(nRow, "V_RATE"))) != 0 && 
					gfn_trim(ds_menuList.getColumn(nRow, "V_RATE")) != null)
				{
					v_NQ = Math.round(toNumber(ds_menuItemList.getColumn(i,"NEED_QTY")) * toNumber(gfn_trim(ds_menuList.getColumn(nRow, "V_RATE"))) / 100, 2);
					ds_menuItemList.setColumn(i, "NEED_QTY", v_NQ);
				}
			}
		}		
	}
	
	// 초기화
	for(var i=0; i<ds_menuList.getRowCount(); i++)
	{
		ds_menuList.setColumn(i, "V_STA", 0);
		ds_menuList.setColumn(i, "V_RATE", 0);
	}	
}

function btn_fullScreen_onclick(obj:Button,  e:ClickEventInfo)
{
    if (Tab00.tabpage1.btn_fullScreen.text == "원래대로") 
    {
		Tab00.bringToFront();
		//Tab00.position.top = "475px";
		Tab00.position.top = sp_line.position.bottom - 2;
		
		Tab00.tabpage1.btn_fullScreen.text = "전체화면";
		Static27.bringToFront();
		//Tab00.tabpage2.btn_fullScreen.text = "전체화면";
		//Tab00.tabpage3.btn_fullScreen.text = "전체화면";
    }
    else 
    {
		Tab00.bringToPrev();
		Tab00.position.top = "40px";
		Tab00.tabpage1.btn_fullScreen.text = "원래대로";
		//Tab00.tabpage2.btn_fullScreen.text = "원래대로";
		//Tab00.tabpage3.btn_fullScreen.text = "원래대로";
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_grd_menuItemList_onexpanddown(obj:Grid, e:GridMouseEventInfo)
 * 기ㅡㅡㅡ능 : 자재대체
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_grd_menuItemList_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	// 자재코드		
	if(e.col == 5)	
	{
		// 강제레시피 대상업장의 경우 대표자재삭제 불가
		if(ds_menuItemList.getColumn(e.row, "ATTR10") == "1")	
		{
			return;
		}
	
		// 발주된 자재에 대해서는 대체 불가
		if(ds_menuItemList.getColumn(e.row, "ORDER_YN") == "Y")
		{
			return;
		}

		// 권장메뉴 대상업장
		if( ds_recUpjang.getColumn(0, "USE_YN") == "Y" )
		{
			// 대표자재 자재대체 불가
			if( ds_menuItemList.getColumn(e.row, "ATTR02") == 1 )
			{
				return;
			}
		}
	
		var arg = {
			       RECIPE_CD:ds_menuItemList.getColumn(e.row, "RECIPE_CD")
			     , UPJANG:ds_menuItemList.getColumn(e.row, "UPJANG")
			     , MENU_CD:ds_menuItemList.getColumn(e.row, "MENU_CD")
			     , HALL_CD:gfn_trim(fa_HALL_CD)
			     , SUBINV_CODE:gfn_trim(fa_SUBINV_CODE)
			     , MEAL:gfn_trim(cbo_meal.value)
			     , CORNER:gfn_trim(cbo_corner.value)
			     , S_ROWNUM:e.row //자재 대체 시 선택한 자재코드만 변경하도록 추가 2016.05.16
			     , MENU_DATE:gfn_trim(cal_menuDate.fn_getValue())
			     , ITEM_CODE:ds_menuItemList.getColumn(e.row, "ITEM_CODE")
			     , ITEM_NAME:ds_menuItemList.getColumn(e.row, "ITEM_NAME")
			     , ITEM_CLASS2:ds_menuItemList.getColumn(e.row, "ITEM_CLASS2")
			     , ITEM_CLASS3:ds_menuItemList.getColumn(e.row, "ITEM_CLASS3")
			     , ITEM_CLASS4:ds_menuItemList.getColumn(e.row, "ITEM_CLASS4")
			     , NEED_DATE:ds_menuItemList.getColumn(e.row, "NEED_DATE")
			     , ENF_YN:fa_ENF_YN
		};
		
		//외식사업부 예외처리
		if (mucd == "2003") {		
			var rtn = gfn_dialog("", "U_FSM::FSM90037P.xfdl",arg);		
		} else {
			var rtn = gfn_dialog("", "U_FSM::FSM90032P.xfdl",arg);
		}
		
		if(gfn_length(gfn_trim(rtn)) == 0 || gfn_trim(rtn) == null)
		{
			return;
		}
		
		// 정상 변경시 자재 재조회
		if(rtn == "OK")
		{
			fn_search();
		}
		else
		{
			return;
		}		
	}
	else if(e.cell == 6)
	{
		gfn_dialog("", "U_FSP::FSP00000P.xfdl",{fv_itemCode: ds_menuItemList.getColumn(e.row, "ITEM_CODE")}, "", "", "", "", "", "", "", "", true);
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_btn_addItem_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 자재추가
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_btn_addItem_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_menuItemList.getRowCount()==0)
	{
		return;
	}
	
	// 변경된 데이터가 존재할 경우 저장 후 팝업
	if(gfn_dsIsUpdated(ds_menuList) == true || gfn_dsIsUpdated(ds_menuItemList) == true)
	{
		//fn_save();
	}

	// 일괄대체시 레시피당 하나의 자재만 선택되도록 처리
	var nRow = "";
	for(var i=0; i<ds_menuItemList.getRowCount(); i++)
	{
		if(ds_menuItemList.getSelect(i) == true)
		{
			nRow = ds_menuItemList.findRow("RECIPE_CD", ds_menuItemList.getColumn(i,"RECIPE_CD"));
			ds_menuItemList.clearSelect();
			ds_menuItemList.selectRow(nRow, true);		
		}
	}
	
	var arg = {
			   RECIPE_CD:ds_menuItemList.getColumn(e.row, "RECIPE_CD")
			 , UPJANG:ds_menuItemList.getColumn(e.row, "UPJANG")
			 , MENU_CD:ds_menuItemList.getColumn(e.row, "MENU_CD")
			 , HALL_CD:gfn_trim(fa_HALL_CD)
			 , SUBINV_CODE:gfn_trim(fa_SUBINV_CODE)
			 , MEAL:gfn_trim(cbo_meal.value)
			 , CORNER:gfn_trim(cbo_corner.value)
			 , MENU_DATE:gfn_trim(cal_menuDate.fn_getValue())
			 , ITEM_CODE:ds_menuItemList.getColumn(e.row, "ITEM_CODE")
			 , ITEM_NAME:ds_menuItemList.getColumn(e.row, "ITEM_NAME")
			 , NEED_DATE:ds_menuItemList.getColumn(e.row, "NEED_DATE")
	};
	
	//외식사업부 예외처리
	if (mucd == "2003") {		
		gfn_dialog("", "U_FSM::FSM90036P.xfdl", arg); 	
	} else { 
		gfn_dialog("", "U_FSM::FSM90031P.xfdl", arg); 	
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : ds_menuItemList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
 * 기ㅡㅡㅡ능 : 자재정보 변경시 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function ds_menuItemList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var v_EQ=0;	// EDIBLE_QTY		가식부량 1인소요량 * 폐기율==>NEED_QTY*(100-disuse_rate)
	var v_PP=0; // PERSON_PRICE 	1인원가	자재g당단가*1인소요량==>GRAM_PRICE*NEED_QTY
	var v_TQ=0; // 1인소요량 * 예상식수/1000 = 총소요량  
	var v_Price=0;
	var v_Row=-1;
	
	switch(e.columnid)
	{
		case "NEED_QTY":	// 1인소요량
			v_PP = Math.round(ds_menuItemList.getColumn(e.row, "G_ITEM_PRICE") * ds_menuItemList.getColumn(e.row, "NEED_QTY"), 0);
			ds_menuItemList.setColumn(e.row, "CUR_PRICE", v_PP);	// 1인원가 
			
			v_EQ = Math.round(ds_menuItemList.getColumn(e.row, "NEED_QTY") * ((100 - ds_menuItemList.getColumn(e.row, "DISUSE_RATE")) / 100), 2);
			ds_menuItemList.setColumn(e.row, "EDIBLE_QTY", v_EQ);	// 가식부량	
			
			v_TQ = Math.round((ds_menuItemList.getColumn(e.row, "NEED_QTY") * ds_menuItemList.getColumn(e.row, "EXPECT_MEAL_QTY")) / 1000, 2);
			ds_menuItemList.setColumn(e.row, "TOT_QTY", v_TQ);		// 총소요량
			
			// 1인원가 식단레시피 마스터그리드 반영
			v_Price = ds_menuItemList.getCaseSum("RECIPE_CD=="+wrapQuote(ds_menuItemList.getColumn(e.row,"RECIPE_CD")), "CUR_PRICE");
			v_Row = ds_menuList.findRow("RECIPE_CD", ds_menuItemList.getColumn(e.row,"RECIPE_CD"));
			ds_menuList.setColumn(v_Row, "RECIPE_COST", v_Price);
			break;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_btn_ibDateUpdate_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 입고예정일일괄수정
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_btn_ibDateUpdate_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_menuList.getRowCount() == 0)
	{
		return;
	}

	if(Tab00.tabindex != 0)
	{
		return;
	}
	
	if(ds_menuItemList.getRowCount() == 0)
	{
		return;
	}
	
	gfn_dialog("", "U_FSM::FSM90034P.xfdl", "");		
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_menuSave_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 기본정보저장(예상식수, 식단가, 식단특성을 저장한다.)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_menuSave_onclick(obj:Button,  e:ClickEventInfo)
{
	if(gfn_length(gfn_trim(cal_menuDate.fn_getValue())) == 0)
	{
		g_Message("EE","제공일 정보가 없습니다.");
		return;
	}
	
	if(ds_cboMeal.getRowCount() == 0 || ds_cboCorner.getRowCount() == 0)
	{
		g_Message("EE","메뉴(끼니코너) 정보가 없습니다.");
		return;
	}

	if(edt_expectMealQty.value < 0 || gfn_isNull(edt_expectMealQty.value))
	{
		g_Message("EE","예상식수를 입력하세요.");
		return;
	}
	
	if(edt_salePrice.value < 0 || gfn_isNull(edt_salePrice.value))
	{
		g_Message("EE","식단가를 입력하세요.");
		return;
	}

	var strMenu = cal_menuDate.fn_getValue() + "-" + fa_HALL_CD + cbo_meal.value + cbo_corner.value;

	var sMenuFeature = "";
	if(new String(edt_menuFeature.value).valueOf() != "undefined")
	{
		sMenuFeature = edt_menuFeature.value;
	}
	else {
		sMenuFeature = "";
		edt_menuFeature.value = "";
	}
	
	var arg	="UPJANG="			+ fa_UPJANG
			+" MENU_CD="		+ wrapQuote(strMenu)
			+" SALE_PRICE="		+ wrapQuote(edt_salePrice.value)      // 식단가(테이블 판매가)
			+" EXPECT_MEAL_QTY="+ wrapQuote(edt_expectMealQty.value)  // 예상식수
			+" MENU_FEATURE="	+ wrapQuote(sMenuFeature);	  // 식단 특성(특징)
			
	ds_cboCorner.setColumn(cbo_corner.index, "EXPECT_MEAL_QTY", edt_expectMealQty.value);
	ds_cboCorner.setColumn(cbo_corner.index, "SALE_PRICE", edt_salePrice.value);
	ds_cboCorner.setColumn(cbo_corner.index, "MENU_FEATURE", sMenuFeature);
	ds_cboCorner.applyChange(); 

	fsp_clear(this);
	fsp_addSingle(this,"fs/fsm::FSM00060E_U006");
	fsp_callService(this, "", "", "", "", arg, "fn_callbackMenuSave", "", true);	
}

function fn_callbackMenuSave(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	g_Message("02", "저장 되었습니다.");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_recipeList_oncellclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 업장과거레시피조회 팝업
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function grd_recipeList_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	var arg = new Array();
	arg["UPJANG"] = gfn_nvl(fa_UPJANG);
	arg["RECIPE_CD"] = gfn_nvl(ds_recipeList.getColumn(e.row, "RECIPE_CD"));
	arg["RECIPE_NAME"] = gfn_nvl(ds_recipeList.getColumn(e.row, "RECIPE_NAME"));
	arg["HALL_CD"] = gfn_nvl(gfn_trim(fa_HALL_CD));
	arg["MEAL"] = gfn_nvl(gfn_trim(cbo_meal.value));
	arg["CORNER"] = gfn_nvl(gfn_trim(cbo_corner.value));
	arg["MENU_DATE"] = gfn_nvl(gfn_trim(cal_menuDate.fn_getValue()));
	arg["MENU_CD"] = gfn_nvl(fa_MENU_DATE)+"-"+gfn_nvl(fa_HALL_CD)+gfn_nvl(cbo_meal.value)+gfn_nvl(cbo_corner.value);

	if(gfn_dialog("", "U_FSM::FSM00062P.xfdl", arg) == true)
	{
		fn_search();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_recipeList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피상세조회 팝업
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function grd_recipeList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	var chkGbn = "";
	
	// 업장표준레시피
	if(gfn_trim(ds_recipeList.getColumn(e.row, "GUBUN")) == "업장")
	{
		chkGbn="UPJANG";
	}
	// 표준레시피
	else
	{	
		chkGbn="STD";
	}
	
	var arg = {GUBUN:gfn_trim(chkGbn)
			 , RECIPE_CD:gfn_trim(ds_recipeList.getColumn(e.row,"RECIPE_CD"))
			 , RECIPE_NAME:gfn_trim(ds_recipeList.getColumn(e.row,"RECIPE_NAME"))
			 , UPJANG:gfn_trim(fa_UPJANG)
			 , HALL_CLASS:gfn_trim(fa_HALL_CLASS)
			 , HALL_CD:gfn_trim(fa_HALL_CD)
			 , MENU_DATE:gfn_trim(cal_menuDate.fn_getValue())};
	
	gfn_dialog('',"U_FSM::FSM00068P.xfdl", arg);	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_recipeList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 식단구성 구축 헤더 클릭시 전체선택기능
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function grd_menuList_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	switch(e.cell)
	{
		case 0:
			gfn_exportExcel(grd_menuList, "Sheet1");		
			break;
		case 2:
			var nCnt = ds_menuList.getRowCount();
			if( nCnt == 0 ) { return; }
			
			for( i=0; i<nCnt; i++ ) {
				ds_menuList.setColumn(i, "CREAT", isChecked);
			}
			if( isChecked == 1 ) isChecked = 0;
			else isChecked = 1;
			
			break;
		default:
			gfn_gridSort(obj, e);
			break;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : FSM90100E_onclose(obj:Form, e:CloseEventInfo)
 * 기ㅡㅡㅡ능 : 식단구성 등록이 되어있지 않은 레시피가 존재할 경우 창을 닫지 못하도록 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function FSM90100E_onclose(obj:Form, e:CloseEventInfo)
{
	// 병원식의 경우 구성요소 입력 여부를 체크한다.
	if(fa_CALL_PGM == 'H')
	{
		//구성요소 확인
		var nRow = ds_menuList.findRowExpr("gfn_length(MAJOR_DISH_INFO)==0");
		if(nRow != -1)
		{
			g_Message("EE", "구성요소가 지정되지 않은 레시피가 있습니다.\n병원식단 레시피는 구성요소가 필수 입력입니다.\n\n구성요소(주식,국,부식등..)를 선택하여 주십시요."); 
			return false;
		}	
	}	

	if(gfn_dsIsUpdated(ds_menuList))
	{
		blnRtn = g_Confirm("04", "저장되지 않은 데이터가 있습니다.\n구성요소를 변경하였을 경우 반드시 저장버튼을 눌러주십시요.\n\n레시피검색및 등록 창을 닫으시겠습니까?"); 
		return blnRtn;
	}
}

function img_open_onclick(obj:ImageViewer,  e:ClickEventInfo)
{
	var cImg = "URL('theme://Images/new/btn_WFDA_Close.png')";
    
	if(Div01.img_open.image == cImg)
	{
		Tab00.bringToFront();
		grd_recipeList.bringToPrev();
		Div01.img_open.image="URL('theme://Images/new/btn_WFDA_Open.png')";
		//grd_recipeList.position.height = 248;
		//기존 높이 가져오는 방식으로 변경 spliter로 인한 겹칩 방지
		if ((sp_line.position.top + 2 - 217) > 0) {
			grd_recipeList.position.height = (sp_line.position.top + 2) - 217;
		} else {
			grd_recipeList.position.height = 0;
		}
	}
	else
	{
		Tab00.bringToPrev();
		grd_recipeList.bringToFront();
		Div01.img_open.image="URL('theme://Images/new/btn_WFDA_Close.png')";
		grd_recipeList.position.height = 568;
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : ds_menuList_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
 * 기ㅡㅡㅡ능 : 구성요소 중복체크 (병원식)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function ds_menuList_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
{
	// 병원식일 경우에만 체크
	if(fa_CALL_PGM == 'H')
	{
		if(e.columnid == "MAJOR_DISH_INFO")
		{	
			var intFindRow = -1;
			intFindRow = ds_menuList.findRow("MAJOR_DISH_INFO", e.newvalue);
			
			if(intFindRow <> -1)
			{
			   g_Message("EE", "이미 지정된 구성요소의 레시피가 있습니다.\n\n다른 구성요소 항목을 선택하여 주십시요."); 
			   return false;
			}
		}
	}	
}

function FSM90100E_onbeforeclose(obj:Form, e:CloseEventInfo)
{
	// 병원식의 경우 구성요소 입력 여부를 체크한다.
	if(fa_CALL_PGM == 'H')
	{
		//구성요소 확인
		var nRow = ds_menuList.findRowExpr("gfn_length(MAJOR_DISH_INFO)==0");
		if(nRow != -1)
		{
			g_Message("EE", "구성요소가 지정되지 않은 레시피가 있습니다.\n병원식단 레시피는 구성요소가 필수 입력입니다.\n\n구성요소(주식,국,부식등..)를 선택하여 주십시요."); 
			return false;
		}	
	}	

	if(gfn_dsIsUpdated(ds_menuList))
	{
		blnRtn = g_Confirm("04", "저장되지 않은 데이터가 있습니다.\n구성요소를 변경하였을 경우 반드시 저장버튼을 눌러주십시요.\n\n레시피검색및 등록 창을 닫으시겠습니까?"); 
		return blnRtn;
	}
}

function cbo_corner_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	// 코너정보 조회
	fn_setSearchInfo();
}

function Tab00_tabpage1_grd_menuItemList_onmousemove(obj:Grid, e:GridMouseEventInfo)
{
	var strMsg = "";
	var v_Value;
	
	// 금지자재
	if (e.cell == 6)
	{
		v_Value = ds_menuItemList.getColumn(e.row,"RESTRICT_SEQ");
		
		if (v_Value > 0)
		{
			strMsg = "- 금지기간 : " + ds_menuItemList.getColumn(e.row,"RESTRICT_PERIOD") + "\n";
			strMsg += "- 금지사유 : " + ds_menuItemList.getColumn(e.row,"RESTRICT_REASON") + "\n";
		}
	}
	
	if (e.cell == 4 && parseInt(ds_menuItemList.getColumn(e.row, "WEEK_CHK")) > 0)
	{
		strMsg += "요일발주제한 품목입니다. 입고제한요일 : " + ds_menuItemList.getColumn(e.row, "WEEK_DISP");
	}
	
	Tab00.tabpage1.grd_menuItemList.tooltiptext = strMsg;	
}

function btn_prev_onclick(obj:Button,  e:ClickEventInfo)
{
	cal_menuDate.fn_setValue(gfn_addDate(cal_menuDate.fn_getValue(), -1));
}

function btn_next_onclick(obj:Button,  e:ClickEventInfo)
{
	cal_menuDate.fn_setValue(gfn_addDate(cal_menuDate.fn_getValue(), 1));
}

function ds_menuItemList_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
{
	switch(e.columnid)
	{
		case "NEED_DATE":
			var retDate = e.newvalue;
			
			// 입고 예정일은 오늘 이후, 제공일을 포함한 이전이어야 한다.
			if(retDate <= ds_sysDate.getColumn(0, "TODAY") || retDate > ds_cond.getColumn(0, "MENU_DATE")) {
				g_Message("EE", "입고 예정일은 오늘 이후, 제공일을 포함한 이전이어야 합니다.\n\n다시 선택하세요.");
				return false;
			}
			break;
	}	
}

function Tab00_tabpage1_chk_cheapYn_onclick(obj:CheckBox,  e:ClickEventInfo)
{
	ds_menuItemList.clearData();

	var sMenuCd = ds_cond.getColumn(0, "MENU_DATE") + "-" + ds_cond.getColumn(0, "HALL_CD") + ds_cond.getColumn(0, "MEAL") + ds_cond.getColumn(0, "CORNER");
	ds_cond.setColumn(0, "MENU_CD", sMenuCd);

	fsp_clear(this);
	if(obj.value == 1)
	{
		//fsp_addSearch(this, "fs/fsm:FSM90060E_S008");	// 식단자재 조회(저렴자재)
		//외식사업부 예외처리
		if (mucd == "2003") {
			fsp_addSearch(this, "fs/fsm:FSM90060E_S010");	// 식단자재 조회(저렴자재)
		} else { 
			fsp_addSearch(this, "fs/fsm:FSM90060E_S008");	// 식단자재 조회(저렴자재)
		}
	}
	else
	{
		//fsp_addSearch(this, "fs/fsm:FSM90060E_S007");	// 식단자재 조회
		//외식사업부 예외처리
		if (mucd == "2003") {
			fsp_addSearch(this, "fs/fsm:FSM90060E_S009");	// 식단자재 조회
		} else { 
			fsp_addSearch(this, "fs/fsm:FSM90060E_S007");	// 식단자재 조회
		}
	}
	fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_menuItemList=ds_menuItemList", "", "");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_clean_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 식단초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_clean_onclick(obj:Button,  e:ClickEventInfo)
{
	var sMenuCd = ds_cond.getColumn(0, "MENU_DATE") + "-" + ds_cond.getColumn(0, "HALL_CD") + ds_cond.getColumn(0, "MEAL") + ds_cond.getColumn(0, "CORNER");
	ds_cond.setColumn(0, "MENU_CD", sMenuCd);
	jsp_transaction(this, "FSM90800P_T001","U_svc::fs/fsm/FSM90800P_T001.jsp", "ds_cond=ds_cond", "", "", "fn_callbackClean", false, false, false);
}

function fn_callbackClean(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	g_Message("02", "초기화 되었습니다.");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_getRecUpjang()
 * 기ㅡㅡㅡ능 : 권장메뉴 대상업장 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_getRecUpjang()
{
	var nRow = ds_cboCorner.findRowExpr("MENU_DATE == '" + cal_menuDate.fn_getValue() + "' && MEAL == '" + cbo_meal.value + "' && CORNER == '" + cbo_corner.value + "'");

	var sCostType = "";
	if( nRow >= 0 )
	{
		sCostType = ds_cboCorner.getColumn(nRow, "ATTR01");
	}

	ds_recUpjang.clearData();

	var strInDatasets = "";
	var strOutDatasets = "ds_recUpjang=ds_recUpjang";
	var strArgument  = "fa_UPJANG=" + wrapQuote(fa_UPJANG);
		strArgument += " fa_COST_TYPE=" + wrapQuote(sCostType);
		strArgument += " fa_MENU_DATE=" + wrapQuote(cal_menuDate.fn_getValue());

	var strCallbackFunc = "";
	var strTrId = "";

	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM90030P_S002");
	fsp_callService(this, "", "", strInDatasets, strOutDatasets, strArgument, strCallbackFunc, false, false, true, strTrId);
	
	if( ds_recUpjang.rowcount == 0 )
	{
		var nRow = ds_recUpjang.addRow();
		ds_recUpjang.setColumn(nRow, "USE_YN", "N");
		ds_recUpjang.setColumn(nRow, "COMP_YN", "N");
	}
}

/*
function Tab00_tabpage1_btn_costReflash_onclick(obj:Button,  e:ClickEventInfo)
{
	var sCostReflashDate = cal_menuDate.fn_getValue();
	if (sCostReflashDate < gfn_addDate(gfn_today(), 1)){
		g_Message("EE",	"갱신일 지정 오류!!\n\n당일 또는 과거 날짜는 갱신 할 수 없습니다.");
		return;
	}	  

	if (gfn_length(ds_cond.getColumn(0, "UPJANG"))== 0) {
		g_Message("EE",	"업장정보 오류!!\n\n 업장정보를 입력하세요.");
		return;
	}	  
	
	if (gfn_length(sCostReflashDate)== 0) {
		g_Message("EE",	"갱신일 오류!!\n\n갱신일을 입력하세요.");
		return;
	}
	
	if (!g_Confirm("02","원가 갱신 작업을 하시겠습니까?!\n\n제공일에 등록된 자재들의 입고예정일을 기준으로 원가가 갱신됩니다.")) return;
	
	// 데이타체크
	ds_input.clearData();
	ds_input.addRow();
	ds_input.setColumn(0,"SDATE", sCostReflashDate);
	ds_input.setColumn(0,"UPJANG", ds_cond.getColumn(0, "UPJANG"));
	  	  
    http.Sync = true;
	var t_timeout = application.httptimeout;
	application.httptimeout = 2000; //1800초

	fsp_clear(this);	
	fsp_addSingle(this, "fs/fsm:FSM00052E_I002");
	fsp_callService(this, "", "", "ds_input2=ds_input:A", "ds_return=ds_return",  "", "fn_callbackCostReflash");

	application.httptimeout = t_timeout; //60초
	http.Sync = false;		
}

function fn_callbackCostReflash(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE","서비스 에러");
	}
	else
	{
		if ((ds_return.getColumn(0, "O_RTN")) == 'TRUE'){	
			g_Message("04", ds_return.getColumn(0,"O_RTNMSG"));
			fn_search();
		}
		else
		{
			g_Message("EE","갱신 도중 오류가 발생 하였습니다. \n\n " + ds_return.getColumn(0, "O_RTNMSG"));
		}
	}
}
*/]]></Script>
  </Form>
</FDL>
