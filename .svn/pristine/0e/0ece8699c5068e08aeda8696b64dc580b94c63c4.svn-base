<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FSR90010E" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="표준레시피관리" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <PopupDiv id="pdiv_imgZoom" scrollbars="none" visible="false" position="absolute 868 426 1247 685" taborder="34">
          <Layouts>
            <Layout>
              <ImageViewer id="Image0" taborder="0" stretch="fit" onclick="pdiv_imgZoom_Image0_OnClick" position="absolute 0 0 369 255" anchor="default"/>
            </Layout>
          </Layouts>
        </PopupDiv>
        <Edit id="ed_UpjangCD" taborder="49" visible="false" position="absolute 661 33 670 53"/>
        <Static id="Static03" class="sta_WFDA_Labelbg" position="absolute 91 30 1237 57" anchor="left top right"/>
        <Static id="Static04" class="sta_WFDA_Labelbg" position="absolute 91 56 1237 83" anchor="left top right"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom" positionstep="0"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="26" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" positionstep="0"/>
        <Static id="Static05" text="레시피코드/명" class="sta_WFDA_Label01" position="absolute 172 285 274 312" anchor="left top" positionstep="0"/>
        <Static id="Static30" text="기본정보" class="sta_WFDA_Label03" position="absolute 129 285 173 364" anchor="left top" style="align:left middle;font:Gulim,9,bold;"/>
        <Static id="Static07" text="레시피분류" class="sta_WFDA_Label01" position="absolute 172 311 274 338" anchor="left top" positionstep="0"/>
        <Static id="Static08" text="주재료군" class="sta_WFDA_Label01" position="absolute 172 337 274 364" anchor="left top" positionstep="0"/>
        <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 273 285 1237 312" anchor="left top right" positionstep="0"/>
        <Static id="Static10" class="sta_WFDA_Labelbg" position="absolute 273 337 1237 364" anchor="left top right" positionstep="0"/>
        <Static id="Static11" class="sta_WFDA_Labelbg" position="absolute 273 311 1237 338" anchor="left top right" positionstep="0"/>
        <Static id="Static18" class="sta_WFDA_Labelbg" position="absolute 273 363 1237 390" anchor="left top right" positionstep="0"/>
        <Static id="Static21" class="sta_WFDA_Labelbg" position="absolute 0 389 1237 416" anchor="left top right" positionstep="0"/>
        <Static id="Static27" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 275 1237 285" anchor="left top" positionstep="0"/>
        <Edit id="ed_RecipeCD" taborder="35" readonly="true" class="edt_WF_Essential" position="absolute 276 288 362 309" anchor="left top"/>
        <Edit id="ed_RecipeNM" class="edt_WF_Essential" enable="false" position="absolute 364 288 632 309" anchor="left top" positionstep="0" onkeydown="ed_RecipeNM_onkeydown" imemode="hangul" tabstop="false" taborder="5"/>
        <Edit id="ed_RecipeENM" taborder="3" position="absolute 635 288 890 309" enable="false" imemode="alpha" class="edt_WF_Essential" anchor="left top"/>
        <Button id="btn_RecipePop" taborder="4" tabstop="false" text="중복체크" onclick="btn_RecipePop_OnClick" class="btn_WF_Custom" position="absolute 894 288 962 309" anchor="left top"/>
        <Static id="Static23" text="연관어(유사어)" class="sta_WFDA_Label01" position="absolute 689 337 818 364" anchor="left top"/>
        <Combo id="cbo_RecipeClass" taborder="6" innerdataset="ds_RClass" codecolumn="CD" datacolumn="NM" onitemchanged="common_OnChanged" class="cmb_WF_Essential" position="absolute 276 314 434 335" anchor="left top" positionstep="0"/>
        <Combo id="Combo5" taborder="9" innerdataset="ds_Material" codecolumn="CD" datacolumn="NM" type="dropdown" onitemchanged="common_OnChanged" onkeydown="common_OnKeyDown" position="absolute 276 340 434 361" anchor="left top" positionstep="0"/>
        <Combo id="Combo9" taborder="12" innerdataset="ds_FS0008" codecolumn="CD" datacolumn="NM" type="dropdown" onkeydown="common_OnKeyDown" position="absolute 276 366 434 387" anchor="left top" positionstep="0"/>
        <Combo id="Combo4" taborder="15" innerdataset="ds_FS0010" codecolumn="CD" datacolumn="NM" type="dropdown" onkeydown="common_OnKeyDown" position="absolute 276 392 434 413" anchor="left top" positionstep="0"/>
        <Combo id="Combo7" taborder="16" innerdataset="ds_FS0007" codecolumn="CD" datacolumn="NM" type="dropdown" onkeydown="common_OnKeyDown" position="absolute 540 392 687 413" anchor="left top" positionstep="0"/>
        <Combo id="Combo3" taborder="13" innerdataset="ds_FS0009" codecolumn="CD" datacolumn="NM" type="dropdown" onkeydown="common_OnKeyDown" position="absolute 540 366 687 387" anchor="left top" positionstep="0"/>
        <Combo id="Combo1" taborder="10" innerdataset="ds_Element" codecolumn="CD" datacolumn="NM" type="dropdown" onitemchanged="common_OnChanged" onkeydown="common_OnKeyDown" position="absolute 540 340 687 361" anchor="left top" positionstep="0"/>
        <Combo id="cbo_RecipeType" taborder="7" innerdataset="ds_RType" codecolumn="CD" datacolumn="NM" type="dropdown" class="cmb_WF_Essential" position="absolute 540 314 687 335" anchor="left top" positionstep="0" onitemchanged="cbo_RecipeType_onitemchanged"/>
        <Static id="Static16" text="레시피유형" class="sta_WFDA_Label01" position="absolute 436 311 538 338" anchor="left top"/>
        <Static id="Static20" text="대표영양성분" class="sta_WFDA_Label01" position="absolute 436 337 538 364" anchor="left top"/>
        <Static id="Static22" text="맛" class="sta_WFDA_Label01" position="absolute 436 363 538 390" anchor="left top"/>
        <Static id="Static24" text="색" class="sta_WFDA_Label01" position="absolute 436 389 538 416" anchor="left top"/>
        <Static id="Static25" text="조리법유형" class="sta_WFDA_Label01" position="absolute 689 311 818 338" anchor="left top"/>
        <Static id="Static28" text="제공온도" class="sta_WFDA_Label01" position="absolute 732 363 818 390" anchor="left top"/>
        <Static id="Static31" text="중심온도" class="sta_WFDA_Label01" position="absolute 732 389 818 416" anchor="left top"/>
        <Static id="Static32" text="개발정보" class="sta_WFDA_Label03" position="absolute 964 285 1008 364" anchor="left top" style="align:left middle;font:Gulim,9,bold;"/>
        <Combo id="Combo2" taborder="8" innerdataset="ds_CCLASS" codecolumn="CD" datacolumn="NM" type="dropdown" onitemchanged="common_OnChanged" class="cmb_WF_Essential" position="absolute 820 314 962 335" anchor="left top" positionstep="0"/>
        <Static id="Static33" text="제공정보" class="sta_WFDA_Label03" position="absolute 689 363 733 416" anchor="left top" style="align:left middle;font:Gulim,9,bold;"/>
        <Static id="Static26" text="찬기" class="sta_WFDA_Label01" position="absolute 938 389 1008 416" anchor="left top"/>
        <ImageViewer id="Image0" taborder="36" image="URL('theme://convertImages/img_NoImageBig.png')" stretch="fit" onclick="Image0_OnClick" position="absolute 0 285 130 390" onmouseleave="Image0_OnMouseOut" onloaderror="Image0_OnLoadError" anchor="left top" positionstep="0"/>
        <Edit id="Edit0" taborder="18" onkeydown="common_OnKeyDown" position="absolute 1101 288 1214 309" anchor="left top"/>
        <Button id="btn_CustPop" taborder="39" onclick="btn_CustPop_OnClick" class="btn_WF_popSearch" position="absolute 1213 288 1234 309" anchor="left top"/>
        <MaskEdit id="me_Cdate" taborder="40" tabstop="false" readonly="true" type="string" mask="@@@@-@@-@@" position="absolute 1101 314 1234 335" style="align:center middle;" anchor="left top"/>
        <MaskEdit id="MaskEdit00" taborder="41" tabstop="false" readonly="true" type="string" mask="@@@@-@@-@@" position="absolute 1101 340 1234 361" style="align:center middle;" anchor="left top"/>
        <Edit id="ed_SameWord" taborder="11" position="absolute 820 340 962 361" anchor="left top" positionstep="0"/>
        <Combo id="Combo10" taborder="14" innerdataset="ds_FS0011" codecolumn="CD" datacolumn="NM" type="dropdown" onkeydown="common_OnKeyDown" class="cmb_WF_Essential" position="absolute 820 366 936 387" anchor="left top" positionstep="0"/>
        <Combo id="cbo_RecipeNM02" taborder="17" innerdataset="ds_yn" codecolumn="CD" datacolumn="NM" type="dropdown" onkeydown="common_OnKeyDown" class="cmb_WF_Essential" position="absolute 820 392 936 413" anchor="left top" positionstep="0"/>
        <Static id="Static36" text="개발자" class="sta_WFDA_Label01" position="absolute 1007 285 1099 312" anchor="left top"/>
        <Static id="Static37" text="최초개발일" class="sta_WFDA_Label01" position="absolute 1007 311 1099 338" anchor="left top"/>
        <Static id="Static38" text="최종수정일" class="sta_WFDA_Label01" position="absolute 1007 337 1099 364" anchor="left top"/>
        <CheckBox id="chk_Dtlyn" taborder="19" text="봄" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 1011 366 1048 387" anchor="left top"/>
        <CheckBox id="Checkbox0" taborder="20" text="여름" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 1049 366 1093 387" anchor="left top"/>
        <CheckBox id="Checkbox1" taborder="21" text="가을" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 1102 366 1146 387" anchor="left top"/>
        <CheckBox id="Checkbox2" taborder="22" text="겨울" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 1155 366 1198 387" anchor="left top"/>
        <Combo id="Combo12" taborder="24" innerdataset="ds_FS0013" codecolumn="CD" datacolumn="NM" type="dropdown" onkeydown="common_OnKeyDown" position="absolute 1010 392 1234 413" anchor="left top"/>
        <Button id="btn_ImgDelete" taborder="37" text="삭제" onclick="btn_ImgDelete_OnClick" class="btn_WF_Delete" position="absolute 9 392 61 413" anchor="left top"/>
        <Button id="btn_ImgInsert" taborder="38" text="첨부" onclick="btn_ImgInsert_OnClick" class="btn_WF_Append" position="absolute 68 392 120 413" anchor="left top"/>
        <Static id="Static13" text="품질&#13;&#10;보증" class="sta_WFDA_Label03" position="absolute 129 363 173 416" anchor="left top" style="align:left middle;font:Gulim,9,bold;"/>
        <Static id="Static14" text="모양" class="sta_WFDA_Label01" position="absolute 172 363 274 390" anchor="left top" positionstep="0"/>
        <Static id="Static15" text="질감" class="sta_WFDA_Label01" position="absolute 172 389 274 416" anchor="left top" positionstep="0"/>
        <Static id="Static34" text="추천계절" class="sta_WFDA_Label01" position="absolute 938 363 1008 390" anchor="left top"/>
        <Button id="Button0" taborder="23" text="All" onclick="Button0_OnClick" class="btn_WF_Custom" position="absolute 1205 366 1234 387"/>
        <Grid id="grd_List" taborder="2" binddataset="ds_MainRecipeList" formatid="StdRecipe" wheelscrollrow="1" useinputpanel="false" cellsizingtype="both" autofittype="col" oncellclick="grd_List_OnCellClick" oncelldblclick="grd_List_OnCellDblClick" position="absolute 0 114 1237 275" anchor="left top right" positionstep="0" tabstop="true" class="grd_WF_LineNone">
          <Formats>
            <Format id="StdRecipe">
              <Columns>
                <Column size="40"/>
                <Column size="100"/>
                <Column size="198"/>
                <Column size="188"/>
                <Column size="104"/>
                <Column size="170"/>
                <Column size="149"/>
                <Column size="137"/>
                <Column size="139"/>
                <Column size="106"/>
                <Column size="39"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="레시피코드"/>
                <Cell col="2" displaytype="text" text="레시피명"/>
                <Cell col="3" displaytype="text" text="영문명"/>
                <Cell col="4" displaytype="text" text="레시피원가"/>
                <Cell col="5" displaytype="text" text="레시피분류"/>
                <Cell col="6" displaytype="text" text="레시피유형"/>
                <Cell col="7" displaytype="text" text="조리법유형"/>
                <Cell col="8" displaytype="text" text="주재료군"/>
                <Cell col="9" displaytype="text" text="대표영양성분"/>
                <Cell col="10" displaytype="text" text="구성"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background2: ;" expr="expr:iif(getRowCount()&gt;0,currow+1,'')"/>
                <Cell col="1" displaytype="text" style="align:center;background2: ;" text="bind:RECIPE_CD"/>
                <Cell col="2" displaytype="text" style="align:left;background2: ;" text="bind:RECIPE_NAME"/>
                <Cell col="3" displaytype="text" style="align:left;background2: ;" text="bind:RECIPE_ENAME"/>
                <Cell col="4" displaytype="number" style="align:right;background2: ;" text="bind:RECIPE_WONGA"/>
                <Cell col="5" displaytype="combo" style="align:left;background2: ;" text="bind:RECIPE_CLASS" combodataset="ds_RecipeClass" combocodecol="CD" combodatacol="NM"/>
                <Cell col="6" displaytype="combo" style="align:left;background2: ;" text="bind:RECIPE_TYPE" combodataset="ds_RecipeType" combocodecol="CD" combodatacol="NM"/>
                <Cell col="7" displaytype="combo" style="align:left;background2: ;" text="bind:CUISINE_TYPE" combodataset="ds_CookClass" combocodecol="CD" combodatacol="NM"/>
                <Cell col="8" displaytype="combo" style="align:left;background2: ;" text="bind:MAIN_ITEM_CODE1" combodataset="ds_Material" combocodecol="CD" combodatacol="NM"/>
                <Cell col="9" displaytype="combo" style="align:left;background2: ;" text="bind:RESP_NUT1" combodataset="ds_Element" combocodecol="CD" combodatacol="NM"/>
                <Cell col="10" displaytype="image" edittype="none" style="align:center;background2: ;" text="URL('theme://Images\new\grd_WF_ExpandImage.png')"/>
              </Band>
            </Format>
            <Format id="SubRecipe">
              <Columns>
                <Column size="30"/>
                <Column size="80"/>
                <Column size="221"/>
                <Column size="80"/>
                <Column size="219"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="150"/>
                <Column size="120"/>
                <Column size="40"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="저장일"/>
                <Cell col="2" displaytype="text" text="사업장"/>
                <Cell col="3" displaytype="text" text="개발자"/>
                <Cell col="4" displaytype="text" text="레시피명"/>
                <Cell col="5" displaytype="text" text="레시피원가"/>
                <Cell col="6" displaytype="text" text="레시피분류"/>
                <Cell col="7" displaytype="text" text="레시피유형"/>
                <Cell col="8" displaytype="text" text="조리법유형"/>
                <Cell col="9" displaytype="text" text="반려"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="date" style="background:white;background2:white;" text="bind:SUBMIT_DATE"/>
                <Cell col="2" displaytype="text" style="align:left;background:white;background2:white;" text="bind:UPJANGNM"/>
                <Cell col="3" displaytype="text" style="align:left;background:white;background2:white;" text="bind:NM_KOR"/>
                <Cell col="4" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_NAME"/>
                <Cell col="5" displaytype="number" style="background:white;background2:white;" text="bind:RECIPE_WONGA"/>
                <Cell col="6" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:RECIPE_CLASS" combodataset="ds_RecipeClass" combocodecol="CD" combodatacol="NM"/>
                <Cell col="7" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:RECIPE_TYPE" combodataset="ds_RecipeType" combocodecol="CD" combodatacol="NM"/>
                <Cell col="8" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:CUISINE_TYPE" combodataset="ds_CookClass" combocodecol="CD" combodatacol="NM"/>
                <Cell col="9" displaytype="image" edittype="none" style="align:center;background:white;background2:white;" text="URL('theme://Images\new\grd_WF_ExpandImage.png')"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static42" text="레시피 목록" class="sta_WF_Title01" position="absolute 0 96 450 114" anchor="left top" positionstep="0"/>
        <Static id="Static43" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 83 500 96" positionstep="0"/>
        <Static id="Static44" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 109 500 114" anchor="left top" positionstep="0"/>
        <Static id="Static56" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1058 83 1221 89" anchor="top right" positionstep="0"/>
        <Static id="Static57" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1078 109 1237 114" anchor="top right" positionstep="0"/>
        <Button id="btn_StdRecipeSearch" taborder="42" text="업장표준레시피조회" onclick="Common_Btn_common_OnClick" class="btn_WF_Custom" position="absolute 946 89 1069 109" anchor="top right"/>
        <Button id="btn_Confirm" taborder="43" text="확정" onclick="Common_Btn_common_OnClick" class="btn_WF_Custom" position="absolute 1071 89 1121 109" anchor="top right"/>
        <Button id="btn_Copy" taborder="44" text="복사" onclick="Common_Btn_common_OnClick" class="btn_WF_Custom" position="absolute 1123 89 1173 109" anchor="top right"/>
        <Button id="btn_Reset" taborder="45" text="초기화" onclick="Common_Btn_common_OnClick" class="btn_WF_Custom" position="absolute 1175 89 1237 109" anchor="top right"/>
        <Static id="Static00" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 416 1237 426" anchor="left top" positionstep="0"/>
        <Combo id="cbo_sRecipeNM" taborder="1" imemode="hangul" innerdataset="ds_RecipeNM" codecolumn="NM" datacolumn="NM" type="filter" displayrowcount="15" position="absolute 94 59 289 80" ontextchanged="cbo_sRecipeNM_ontextchanged" userchange="0" onkillfocus="cbo_sRecipeNM_onkillfocus" onkeydown="cbo_sRecipeNM_onkeydown" onitemchanged="cbo_sRecipeNM_onitemchanged"/>
        <Combo id="cbo_sRecipeClass" taborder="29" innerdataset="ds_RecipeClass" codecolumn="CD" datacolumn="NM" type="dropdown" displayrowcount="15" position="absolute 291 59 451 80" onitemchanged="cbo_sRecipeClass_onitemchanged"/>
        <Combo id="cbo_sRecipeType" taborder="30" innerdataset="ds_RecipeType" codecolumn="CD" datacolumn="NM" type="dropdown" displayrowcount="15" position="absolute 453 59 613 80" onitemchanged="cbo_sRecipeType_onitemchanged"/>
        <Combo id="cbo_sCookClass" taborder="31" innerdataset="ds_CookClass" codecolumn="CD" datacolumn="NM" type="dropdown" displayrowcount="15" position="absolute 615 59 775 80"/>
        <Combo id="cbo_sMaterial" taborder="32" innerdataset="ds_Material" codecolumn="CD" datacolumn="NM" type="dropdown" displayrowcount="15" position="absolute 777 59 937 80"/>
        <Combo id="cbo_sElement" taborder="33" innerdataset="ds_Element" codecolumn="CD" datacolumn="NM" type="dropdown" displayrowcount="15" position="absolute 939 59 1099 80"/>
        <Static id="Static01" text="레시피구분" class="sta_WFDA_Label01" position="absolute 0 30 92 57" anchor="left top" style="background:#dcf7f9ff;"/>
        <Radio id="rdo_RecipeGbn" taborder="0" columncount="2" rowcount="0" index="0" innerdataset="ds_ConfirmRecipe" codecolumn="CD" datacolumn="NM" value="0" onitemchanged="rdo_RecipeGbn_OnChanged" position="absolute 97 34 284 55" onitemclick="rdo_RecipeGbn_onitemclick"/>
        <Static id="Static12" text="사업장" class="sta_WFDA_Label01" position="absolute 291 30 383 57" anchor="left top" style="background:#dcf7f9ff;"/>
        <Static id="Static17" text="작성일" class="sta_WFDA_Label01" position="absolute 615 30 707 57" anchor="left top" style="background:#dcf7f9ff;"/>
        <MPFileDialog id="FileDialog" taborder="46" visible="false" position="absolute 1264 38 1288 62" FileName="" FileNameList="" FilePath="" UserData="" MultiSelect="false" Filter="ALL File(*.*)|*.*" FilterIndex="0" AppendExtDefault="false" Type="Open" FileSize=""/>
        <MPFileDialog id="FileDialogSave" taborder="47" visible="false" position="absolute 1288 38 1312 62" FileName="" FileNameList="" FilePath="" UserData="" MultiSelect="false" Filter="ALL File(*.*)|*.*" FilterIndex="0" AppendExtDefault="false" Type="Open" FileSize=""/>
        <MPFile id="file" taborder="48" visible="false" position="absolute 1288 62 1312 86" FileName="" UserData=""/>
        <MaskEdit id="me_SaveFrom" taborder="27" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" oneditclick="g_Date_OnFocus" position="absolute 709 33 788 54" userdata="btn_SaveFrom" enable="false"/>
        <Button id="btn_SaveFrom" taborder="50" onclick="btn_Date_OnClick" class="btn_WF_cal" position="absolute 787 33 808 54" userdata="me_SaveFrom" enable="false"/>
        <Static id="Static2" text="~" position="absolute 813 34 824 54"/>
        <MaskEdit id="me_SaveTo" taborder="28" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" oneditclick="g_Date_OnFocus" position="absolute 826 33 905 54" userdata="btn_SaveTo" enable="false"/>
        <Button id="btn_SaveTo" taborder="51" onclick="btn_Date_OnClick" class="btn_WF_cal" position="absolute 904 33 925 54" userdata="me_SaveTo" enable="false"/>
        <Static id="Static19" text="기본정보" class="sta_WFDA_Label01" position="absolute 0 56 92 83" anchor="left top" style="background:#dcf7f9ff;"/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="52" text="UpjangSearchComponent00" position="absolute 385 33 613 54" bindDataset="" bindUpjangCodeColumn="" bindUpjangNameColumn="" eventBeforeTrigger="" eventAfterTrigger="" roleSetId="ScoAuthLevel01" enable="false"/>
        <Tab id="Tab00" taborder="25" tabindex="0" scrollbars="autoboth" position="absolute 0 426 1237 710" anchor="all" style="background:white;">
          <Tabpages>
            <Tabpage id="tabpage1" text="재료구성">
              <Layouts>
                <Layout>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 256" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static01" visible="false" position="absolute 1225 0 1235 256" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static03" visible="false" position="absolute 10 246 1225 256" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static00" visible="false" position="absolute 10 0 1225 13" style="background:#ff000033;font:Dotum,8;"/>
                  <Grid id="grd_jajea" taborder="1" binddataset="ds_ItemList" wheelscrollrow="1" autoenter="select" useinputpanel="false" cellsizingtype="both" autofittype="col" onkeydown="grd_jajea_OnKeyDown" oncellclick="grd_jajea_OnCellClick" onheadclick="grd_jajea_OnHeadClick" position="absolute 10 31 1225 246" anchor="all" tooltiptype="hover" class="grd_WF_LineNone" onmousemove="Tab00_tabpage1_grd_jajea_onmousemove">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="0"/>
                          <Column size="20"/>
                          <Column size="107"/>
                          <Column size="204"/>
                          <Column size="161"/>
                          <Column size="49"/>
                          <Column size="60"/>
                          <Column size="60"/>
                          <Column size="60"/>
                          <Column size="60"/>
                          <Column size="84"/>
                          <Column size="138"/>
                          <Column size="26"/>
                          <Column size="60"/>
                          <Column size="40"/>
                        </Columns>
                        <Rows>
                          <Row size="38" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="text" class="head_Excel"/>
                          <Cell col="1" displaytype="text" text="금&#10;지" wordwrap="word"/>
                          <Cell col="2" colspan="2" displaytype="text" text="자재코드"/>
                          <Cell col="4" displaytype="text" text="자재명"/>
                          <Cell col="5" displaytype="text" text="규격"/>
                          <Cell col="6" displaytype="text" text="구매&#10;단위"/>
                          <Cell col="7" displaytype="text" text="자재&#10;특성"/>
                          <Cell col="8" displaytype="text" text="1인소요량&#10;(g)"/>
                          <Cell col="9" displaytype="text" text="가식부량&#10;(g)"/>
                          <Cell col="10" displaytype="text" text="1인원가&#10;(원)"/>
                          <Cell col="11" displaytype="text" text="1인원가_재무&#10;(원)"/>
                          <Cell col="12" colspan="2" displaytype="text" text="조리커팅규격" taborder="undefined"/>
                          <Cell col="14" displaytype="text" text="에너지&#10;(kcal)"/>
                          <Cell col="15" text="대표&#13;&#10;자재"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" style="align:center;background2: ;" expr="expr:currow+1"/>
                          <Cell col="1" displaytype="text" style="align:left;" text="bind:RESTRICT_YN"/>
                          <Cell col="2" displaytype="image" style="background2: ;" text="URL('theme://images/new/grd_WF_ExpandImageX.png')"/>
                          <Cell col="3" displaytype="text" edittype="none" style="align:center;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));" text="bind:ITEM_CODE" expandsize="20"/>
                          <Cell col="4" displaytype="text" style="align:left;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));" text="bind:ITEM_NAME"/>
                          <Cell col="5" displaytype="text" style="align:left;background2: ;" text="bind:ITEM_SIZE" tooltiptype="none"/>
                          <Cell col="6" displaytype="text" style="align:center;background2: ;" text="bind:PO_UOM"/>
                          <Cell col="7" displaytype="image" style="align:center;background2: ;" text="bind:FEATURE_ICON"/>
                          <Cell col="8" displaytype="number" edittype="text" editfilter="number" style="align:right;background2: ;" text="bind:NEED_QTY" mask="#,##0.00" editautoselect="true"/>
                          <Cell col="9" displaytype="number" style="align:right;background2: ;" text="bind:EDIBLE_QTY"/>
                          <Cell col="10" displaytype="number" style="align:right;background2: ;" text="bind:PERSON_PRICE"/>
                          <Cell col="11" displaytype="number" style="align:right;background2: ;" text="bind:PERSON_PRICE2"/>
                          <Cell col="12" displaytype="combo" edittype="combo" style="align:left;background2: ;" text="bind:CUT_SPEC" combodataset="ds_CutList" combocodecol="DETAIL_CODE" combodatacol="DETAIL_NAME"/>
                          <Cell col="13" displaytype="image" style="align:center;background2: ;" text="URL('theme://Images/new/grd_WF_ExpandImage.png')"/>
                          <Cell col="14" displaytype="number" style="align:right;background2: ;" text="bind:CAL_CALC"/>
                          <Cell col="15" text="expr:ATTR10 == '1'?'Y':'N'"/>
                        </Band>
                        <Band id="summary">
                          <Cell colspan="8" displaytype="text" style="align:center;" text="합계"/>
                          <Cell col="8" displaytype="number" style="align:right;" expr="expr:getSum('NEED_QTY')" mask="#,##0.00"/>
                          <Cell col="9" displaytype="number" style="align:right;" expr="expr:getSum('EDIBLE_QTY')"/>
                          <Cell col="10" displaytype="number" style="align:right;" expr="expr:getSum('PERSON_PRICE')"/>
                          <Cell col="11" displaytype="number" style="align:right;" expr="expr:getSum('PERSON_PRICE2')"/>
                          <Cell col="12" displaytype="text" style="align:left;"/>
                          <Cell col="13" displaytype="text" style="align:left;"/>
                          <Cell col="14" displaytype="number" style="align:right;" expr="expr:getSum('CAL_CALC')"/>
                          <Cell col="15"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 1225 31" anchor="left top"/>
                  <Static id="Static22" text="재료구성" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Button id="btn_add" taborder="2" text="자재추가" onclick="btn_add_OnClick" class="btn_WF_Custom" position="absolute 1073 5 1148 26" anchor="top right"/>
                  <Button id="btn_fullScreen" taborder="3" text="전체화면" class="btn_WF_Custom" position="absolute 1150 5 1225 26" anchor="top right" onclick="btn_fullScreen_onclick"/>
                  <Button id="btn_RecipeElement" taborder="4" text="레시피영양성분" onclick="btn_RecipeElement_OnClick" class="btn_WF_Custom" position="absolute 960 5 1071 26" anchor="top right"/>
                  <Button id="btn_ratio" taborder="5" text="레시피비율일괄변경" onclick="btn_ratio_OnClick" class="btn_WF_Custom" position="absolute 823 5 958 26" anchor="top right"/>
                  <Edit id="ed_ratio" taborder="6" inputtype="number" maxlength="3" visible="false" position="absolute 725 5 796 26" style="align:right;" onkeydown="Tab00_tabpage1_ed_ratio_onkeydown" anchor="top right"/>
                  <Static id="st_Ratio" text="(%)" visible="false" position="absolute 798 6 826 27" anchor="top right"/>
                  <Static id="Static3" text="금지자재" position="absolute 215 9 288 30"/>
                  <Static id="Static1" position="absolute 196 11 211 26" style="background:#ffe49cff;"/>
                  <Static id="Static2" text="불용자재" position="absolute 127 9 200 30"/>
                  <Static id="Static0" position="absolute 109 11 124 26" style="background:#ffaa9cff;"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="조리법">
              <Layouts>
                <Layout>
                  <Static id="Static00" visible="false" position="absolute 10 0 1225 13" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 268" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static03" visible="false" position="absolute 10 246 1225 256" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static01" visible="false" position="absolute 1225 0 1235 268" style="background:#ff000033;font:Dotum,8;"/>
                  <Grid id="grd_CookMethod" taborder="1" binddataset="ds_CookMethod" wheelscrollrow="1" autoenter="select" useinputpanel="false" autofittype="col" onkeydown="grd_CookMethod_OnKeyDown" onheadclick="grd_CookMethod_OnHeadClick" position="absolute 10 31 1225 246" anchor="all">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="0"/>
                          <Column size="64"/>
                          <Column size="1120"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="text" class="head_Excel"/>
                          <Cell col="1" text="조리순서"/>
                          <Cell col="2" text="조리순서"/>
                          <Cell col="3" displaytype="text" edittype="readonly" text="조리법"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" style="align:center;background:white;background2:white;"/>
                          <Cell col="1" text="bind:CUISINE_SEQ"/>
                          <Cell col="2" expr="expr:CUISINE_SEQ &gt; 89 ? &quot;&quot; : CUISINE_SEQ"/>
                          <Cell col="3" displaytype="text" edittype="normal" style="align:left;background:white;background2:white;" text="bind:CUISINE_DESC" expr="expr:CUISINE_DESC"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static22" text="조리법" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 1225 31" anchor="left top"/>
                  <Button id="btn_SubAdd" taborder="2" onclick="btn_SubAdd_onclick" class="btn_WF_GrdPlus" position="absolute 1110 6 1128 26" anchor="top right"/>
                  <Button id="btn_SubDelete" taborder="3" onclick="btn_SubDelete_OnClick" class="btn_WF_GrdMinus" position="absolute 1130 6 1148 26" anchor="top right"/>
                  <Button id="btn_fullScreen" taborder="4" text="전체화면" onclick="btn_fullScreen_onclick" class="btn_WF_Custom" position="absolute 1150 6 1225 26" anchor="top right"/>
                  <Button id="btn_Exct" taborder="5" text="예외 입력" class="btn_WF_Custom" position="absolute 1033 6 1108 26" anchor="top right" onclick="Tab00_tabpage2_btn_Exct_onclick"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage4" text="조리공정">
              <Layouts>
                <Layout>
                  <Static id="Static00" visible="false" position="absolute 10 0 1225 13" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static07" visible="false" position="absolute 0 0 10 268" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static03" visible="false" position="absolute 10 258 1225 268" style="background:#ff000033;font:Dotum,8;"/>
                  <Static id="Static01" visible="false" position="absolute 1225 0 1235 268" style="background:#ff000033;font:Dotum,8;"/>
                  <ImageViewer id="img_JoryMethod" taborder="1" position="absolute 10 31 1225 800" anchor="all" style="align:left top;" imagealign="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31"/>
                  <Static id="sta_WF_Title01" text="조리 공정" class="sta_WF_Title01" position="absolute 10 13 460 31"/>
                  <Button id="btn_fullScreen" taborder="2" text="전체화면" onclick="btn_fullScreen_onclick" class="btn_WF_Custom" position="absolute 1150 6 1225 26" anchor="top right"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="ed_RecipeCD_value" compid="ed_RecipeCD" propid="value" datasetid="ds_Recipe" columnid="RECIPE_CD"/>
      <BindItem id="ed_RecipeNM_value" compid="ed_RecipeNM" propid="value" datasetid="ds_Recipe" columnid="RECIPE_NAME"/>
      <BindItem id="cbo_RecipeClass_value" compid="cbo_RecipeClass" propid="value" datasetid="ds_Recipe" columnid="RECIPE_CLASS"/>
      <BindItem id="Combo5_value" compid="Combo5" propid="value" datasetid="ds_Recipe" columnid="MAIN_ITEM_CODE1"/>
      <BindItem id="Combo9_value" compid="Combo9" propid="value" datasetid="ds_Recipe" columnid="RECIPE_SHAPE"/>
      <BindItem id="Combo4_value" compid="Combo4" propid="value" datasetid="ds_Recipe" columnid="RECIPE_FEEL"/>
      <BindItem id="Combo7_value" compid="Combo7" propid="value" datasetid="ds_Recipe" columnid="RECIPE_COLOR"/>
      <BindItem id="Combo3_value" compid="Combo3" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TASTE"/>
      <BindItem id="Combo1_value" compid="Combo1" propid="value" datasetid="ds_Recipe" columnid="RESP_NUT1"/>
      <BindItem id="cbo_RecipeType_value" compid="cbo_RecipeType" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TYPE"/>
      <BindItem id="Combo2_value" compid="Combo2" propid="value" datasetid="ds_Recipe" columnid="CUISINE_TYPE"/>
      <BindItem id="Edit0_value" compid="Edit0" propid="value" datasetid="ds_Recipe" columnid="NM_KOR"/>
      <BindItem id="me_Cdate_value" compid="me_Cdate" propid="value" datasetid="ds_Recipe" columnid="CDATE"/>
      <BindItem id="MaskEdit00_value" compid="MaskEdit00" propid="value" datasetid="ds_Recipe" columnid="UDATE"/>
      <BindItem id="item1" compid="ed_SameWord" propid="value" datasetid="ds_Recipe" columnid="SAME_WORD"/>
      <BindItem id="Combo10_value" compid="Combo10" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TEMPER"/>
      <BindItem id="cbo_RecipeNM_value" compid="cbo_RecipeNM02" propid="value" datasetid="ds_Recipe" columnid="CORE_TEMPER_YN"/>
      <BindItem id="chk_Dtlyn_value" compid="chk_Dtlyn" propid="value" datasetid="ds_Recipe" columnid="SPRING_YN"/>
      <BindItem id="Checkbox0_value" compid="Checkbox0" propid="value" datasetid="ds_Recipe" columnid="SUMMER_YN"/>
      <BindItem id="Checkbox1_value" compid="Checkbox1" propid="value" datasetid="ds_Recipe" columnid="AUTUMN_YN"/>
      <BindItem id="Checkbox2_value" compid="Checkbox2" propid="value" datasetid="ds_Recipe" columnid="WINTER_YN"/>
      <BindItem id="Combo12_value" compid="Combo12" propid="value" datasetid="ds_Recipe" columnid="USE_TOOL"/>
      <BindItem id="item0" compid="ed_RecipeENM" propid="value" datasetid="ds_Recipe" columnid="RECIPE_ENAME"/>
    </Bind>
    <Objects>
      <Dataset id="ds_ConfirmRecipe">
        <ColumnInfo>
          <Column id="CD" size="256" type="STRING"/>
          <Column id="NM" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">0</Col>
            <Col id="NM">표준레시피</Col>
          </Row>
          <Row>
            <Col id="CD">1</Col>
            <Col id="NM">미확정레시피</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_RecipeNM"/>
      <Dataset id="ds_RecipeClass"/>
      <Dataset id="ds_RecipeType"/>
      <Dataset id="ds_CookClass"/>
      <Dataset id="ds_Material"/>
      <Dataset id="ds_Element"/>
      <Dataset id="ds_RClass"/>
      <Dataset id="ds_CCLASS"/>
      <Dataset id="ds_RType"/>
      <Dataset id="ds_cond">
        <ColumnInfo>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
          <Column id="NEW_RECIPE_SEQ" size="256" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MainRecipeList"/>
      <Dataset id="ds_Recipe">
        <ColumnInfo>
          <Column id="ATTR01" size="200" type="STRING"/>
          <Column id="ATTR02" size="200" type="STRING"/>
          <Column id="ATTR03" size="200" type="STRING"/>
          <Column id="ATTR04" size="200" type="STRING"/>
          <Column id="ATTR05" size="200" type="STRING"/>
          <Column id="ATTR06" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR07" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR08" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR09" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR10" size="22" type="BIGDECIMAL"/>
          <Column id="AUTUMN_YN" size="1" type="STRING"/>
          <Column id="CDATE" size="7" type="DATE"/>
          <Column id="COOK_OPRN" size="100" type="STRING"/>
          <Column id="COOK_TOOL1" size="20" type="STRING"/>
          <Column id="COOK_TOOL2" size="20" type="STRING"/>
          <Column id="CORE_TEMPER_YN" size="1" type="STRING"/>
          <Column id="COST_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="CUSER" size="9" type="STRING"/>
          <Column id="DISPLAY_METHOD" size="20" type="STRING"/>
          <Column id="GOODS_FEATURE" size="200" type="STRING"/>
          <Column id="MAIN_ITEM_CODE1" size="12" type="STRING"/>
          <Column id="MAIN_ITEM_CODE2" size="12" type="STRING"/>
          <Column id="NM_KOR" size="20" type="STRING"/>
          <Column id="PHF_MGMT1" size="1" type="STRING"/>
          <Column id="PHF_MGMT2" size="1" type="STRING"/>
          <Column id="PHF_MGMT3" size="1" type="STRING"/>
          <Column id="PHF_MGMT4" size="1" type="STRING"/>
          <Column id="PHF_MGMT5" size="1" type="STRING"/>
          <Column id="PHF_MGMT_YN" size="1" type="STRING"/>
          <Column id="PHOTO_PATH" size="200" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COLOR" size="20" type="STRING"/>
          <Column id="RECIPE_FEEL" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_SHAPE" size="20" type="STRING"/>
          <Column id="RECIPE_TASTE" size="20" type="STRING"/>
          <Column id="RECIPE_TEMPER" size="20" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="RESP_NUT1" size="20" type="STRING"/>
          <Column id="RESP_NUT2" size="20" type="STRING"/>
          <Column id="SABUN" size="9" type="STRING"/>
          <Column id="SALE_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_UOM" size="20" type="STRING"/>
          <Column id="SPRING_YN" size="1" type="STRING"/>
          <Column id="SUMMER_YN" size="1" type="STRING"/>
          <Column id="UDATE" size="7" type="DATE"/>
          <Column id="USE_TOOL" size="20" type="STRING"/>
          <Column id="USE_YN" size="1" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
          <Column id="VALID_TIME" size="4" type="STRING"/>
          <Column id="WINTER_YN" size="1" type="STRING"/>
          <Column id="PHF" size="256" type="STRING"/>
          <Column id="RTN_REASON" size="256" type="STRING"/>
          <Column id="SAME_WORD" type="STRING" size="256"/>
          <Column id="RECIPE_ENAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_FS0007"/>
      <Dataset id="ds_FS0008"/>
      <Dataset id="ds_FS0009"/>
      <Dataset id="ds_FS0010"/>
      <Dataset id="ds_FS0011"/>
      <Dataset id="ds_FS0013"/>
      <Dataset id="ds_common"/>
      <Dataset id="ds_yn">
        <ColumnInfo>
          <Column id="CD" size="256" type="STRING"/>
          <Column id="NM" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">Y</Col>
            <Col id="NM">예</Col>
          </Row>
          <Row>
            <Col id="CD">N</Col>
            <Col id="NM">아니요</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_ItemList" cancolumnchange="ds_ItemList_CanColumnChange" oncolumnchanged="ds_ItemList_OnColumnChanged">
        <ColumnInfo>
          <Column id="CAL" size="22" type="BIGDECIMAL"/>
          <Column id="CAL_CALC" size="22" type="BIGDECIMAL"/>
          <Column id="CUT_SPEC" size="20" type="STRING"/>
          <Column id="CUT_SPEC_NAME" size="100" type="STRING"/>
          <Column id="DISUSE_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="EDIBLE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="GRAM_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="FEATURE_NAME" size="0" type="STRING"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PERSON_PRICE2" type="BIGDECIMAL" size="22"/>
          <Column id="PERSON_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RESTRICT_YN" size="1" type="STRING"/>
          <Column id="ITEM_SEQ" size="256" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CutList"/>
      <Dataset id="ds_tempRecipe"/>
      <Dataset id="ds_tempItem"/>
      <Dataset id="ds_tempCook"/>
      <Dataset id="ds_CookMethod" cancolumnchange="ds_CookMethod_CanColumnChange" onrowposchanged="ds_CookMethod_OnRowPosChanged" oncolumnchanged="ds_CookMethod_oncolumnchanged">
        <ColumnInfo>
          <Column id="CUISINE_DESC" size="200" type="STRING"/>
          <Column id="CUISINE_SEQ" size="22" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_yncd">
        <ColumnInfo>
          <Column id="CD" size="256" type="STRING"/>
          <Column id="NM" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">Y</Col>
            <Col id="NM">Y</Col>
          </Row>
          <Row>
            <Col id="CD">N</Col>
            <Col id="NM">N</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_Valid"/>
      <Dataset id="ds_input"/>
      <Dataset id="ds_RecipeSeq"/>
      <Dataset id="ds_UpdateApprv"/>
      <Dataset id="ds_apprv">
        <ColumnInfo>
          <Column id="CD" size="256" type="STRING"/>
          <Column id="NM" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">N</Col>
            <Col id="NM">신규(업장)</Col>
          </Row>
          <Row>
            <Col id="CD">M</Col>
            <Col id="NM">신규(본사)</Col>
          </Row>
          <Row>
            <Col id="CD">D</Col>
            <Col id="NM">보류</Col>
          </Row>
          <Row>
            <Col id="CD">Y</Col>
            <Col id="NM">확정</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_Valid2"/>
      <Dataset id="ds_RecipeCD"/>
      <Dataset id="ds_RecipeValid" cancolumnchange="ds_Recipe_CanColumnChange" oncolumnchanged="ds_Recipe_OnColumnChanged" onload="ds_Recipe_OnLoadCompleted">
        <ColumnInfo>
          <Column id="ATTR01" size="200" type="STRING"/>
          <Column id="ATTR02" size="200" type="STRING"/>
          <Column id="ATTR03" size="200" type="STRING"/>
          <Column id="ATTR04" size="200" type="STRING"/>
          <Column id="ATTR05" size="200" type="STRING"/>
          <Column id="ATTR06" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR07" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR08" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR09" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR10" size="22" type="BIGDECIMAL"/>
          <Column id="AUTUMN_YN" size="1" type="STRING"/>
          <Column id="CDATE" size="7" type="DATE"/>
          <Column id="COOK_OPRN" size="100" type="STRING"/>
          <Column id="COOK_TOOL1" size="20" type="STRING"/>
          <Column id="COOK_TOOL2" size="20" type="STRING"/>
          <Column id="CORE_TEMPER_YN" size="1" type="STRING"/>
          <Column id="COST_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="CUSER" size="9" type="STRING"/>
          <Column id="DISPLAY_METHOD" size="20" type="STRING"/>
          <Column id="GOODS_FEATURE" size="200" type="STRING"/>
          <Column id="MAIN_ITEM_CODE1" size="12" type="STRING"/>
          <Column id="MAIN_ITEM_CODE2" size="12" type="STRING"/>
          <Column id="NM_KOR" size="20" type="STRING"/>
          <Column id="PHF_MGMT1" size="1" type="STRING"/>
          <Column id="PHF_MGMT2" size="1" type="STRING"/>
          <Column id="PHF_MGMT3" size="1" type="STRING"/>
          <Column id="PHF_MGMT4" size="1" type="STRING"/>
          <Column id="PHF_MGMT5" size="1" type="STRING"/>
          <Column id="PHF_MGMT_YN" size="1" type="STRING"/>
          <Column id="PHOTO_PATH" size="200" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COLOR" size="20" type="STRING"/>
          <Column id="RECIPE_FEEL" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_SHAPE" size="20" type="STRING"/>
          <Column id="RECIPE_TASTE" size="20" type="STRING"/>
          <Column id="RECIPE_TEMPER" size="20" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="RESP_NUT1" size="20" type="STRING"/>
          <Column id="RESP_NUT2" size="20" type="STRING"/>
          <Column id="SABUN" size="9" type="STRING"/>
          <Column id="SALE_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_UOM" size="20" type="STRING"/>
          <Column id="SPRING_YN" size="1" type="STRING"/>
          <Column id="SUMMER_YN" size="1" type="STRING"/>
          <Column id="UDATE" size="7" type="DATE"/>
          <Column id="USE_TOOL" size="20" type="STRING"/>
          <Column id="USE_YN" size="1" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
          <Column id="VALID_TIME" size="4" type="STRING"/>
          <Column id="WINTER_YN" size="1" type="STRING"/>
          <Column id="PHF" size="256" type="STRING"/>
          <Column id="RTN_REASON" size="256" type="STRING"/>
          <Column id="SAME_WORD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Valid3"/>
      <Dataset id="ds_input3"/>
      <Dataset id="ds_CookMethodTemp1">
        <ColumnInfo>
          <Column id="CUISINE_DESC" size="200" type="STRING"/>
          <Column id="CUISINE_SEQ" size="22" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CookMethodTemp2">
        <ColumnInfo>
          <Column id="CUISINE_DESC" size="200" type="STRING"/>
          <Column id="CUISINE_SEQ" size="22" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";

/******************************************************************************************
 * 시스템구분 : 메뉴관리/레시피관리
 * 프로그램명 : FSR90010E.XML
 * 기ㅡㅡㅡ능 : 표준레시피관리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************/
 
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
var v_gbn;
var v_RECIPE;
var v_ImgNM = "";
var v_DupCheck = "N";  // 레시피명 중복체크 여부

//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(this);

	// X-Framework : Action 정보 생성
	fsp_init(this);
	
	// 초기화
	fn_init();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_init()
 * 기ㅡㅡㅡ능 : 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_init() 
{
	fsp_clear(this);
	ds_RecipeNM.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S001"); // 레시피명
	fsp_addSearch(this,"fs/fsr:FSR00010E_S002"); // 레시피분류
	fsp_addSearch(this,"fs/fsr:FSR00010E_S003"); // 레시피유형
	fsp_addSearch(this,"fs/fsr:FSR00010E_S004"); // 조리법유형
	fsp_addSearch(this,"fs/fsr:FSR00010E_S005"); // 주재료군
	fsp_addSearch(this,"fs/fsr:FSR00010E_S006"); // 대표영양성분
	fsp_addSearch(this,"fs/fsr:FSR00010E_S022"); // 커팅규격
	fsp_addSearch(this,"fs/fsr:FSR00010E_S008"); // 레시피공통코드 
	fsp_callService(this,"","","","ds_RecipeNM=ds_RecipeNM ds_RecipeClass=ds_RecipeClass ds_RecipeType=ds_RecipeType ds_CookClass=ds_CookClass ds_Material=ds_Material ds_Element=ds_Element ds_CutList=ds_CuttingList ds_common=ds_common","","fn_callbackInit","",true);
	
	grd_List.setCellProperty('body', 9, 'cursor', 'pointer');
	edt_upjang.setUpjangCode("");
		
}

function fn_callbackInit(errCd, errMsg)
{
	if(errCd != 0)
	{
		alert(fn_AlertMsg("002"));
		return;
	}
	
	// 폼 초기화
	fn_initForm();
	
	// 레시피분류 초기화
	Copy(ds_RClass,"ds_RecipeClass");
	
	// 레시피유형 초기화
	Copy(ds_RType,"ds_RecipeType");
	var nRCnt=ds_RType.getRowCount();
	var rowIndex="";
	for(i=0;i<nRCnt;i++)
	{
		rowIndex=ds_RType.findRow("SET1","Y");
		ds_RType.deleteRow(rowIndex);
	}
	
	// 조리법유형 초기화
	Copy(ds_CCLASS,"ds_CookClass");
}

// 콜백
function fn_call_back(cd,errmsg)
{
	if(cd!=0) 
	{
		alert(fn_AlertMsg("002"));
		return;
	}
}

//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,출력)
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_search()
 * 기ㅡㅡㅡ능 : 레시피 목록조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_search()
{
	if(fn_Update_Chk())
	{
		return;
	}

	fn_T0_Clear();
	
	//	0:확정레시피-표준레시피, 1:미확정레시피
	v_RecipeGbn = rdo_RecipeGbn.index;
	
	ds_cond.clearData(); 
	ds_cond.addRow();	
	ds_cond.setColumn(0,"RECIPE_NAME"		, gfn_replace(cbo_sRecipeNM.text, "==레시피명==", ""));
	ds_cond.setColumn(0,"RECIPE_CLASS"		, gfn_trim(cbo_sRecipeClass.value) 		);
	ds_cond.setColumn(0,"RECIPE_TYPE"		, gfn_trim(cbo_sRecipeType.value)		);
	ds_cond.setColumn(0,"CUISINE_TYPE"		, gfn_trim(cbo_sCookClass.value)		);
	ds_cond.setColumn(0,"MAIN_ITEM_CODE1"	, gfn_trim(cbo_sMaterial.value)			);
	ds_cond.setColumn(0,"RESP_NUT1"			, gfn_trim(cbo_sElement.value)			);
	ds_cond.setColumn(0,"SAVEFROM"			, gfn_trim(me_SaveFrom.value)			);
	ds_cond.setColumn(0,"SAVETO"			, gfn_trim(me_SaveTo.value)				);
	ds_cond.setColumn(0,"UPJANG"			, gfn_trim(edt_upjang.getUpjangCode())	);
	
	ds_MainRecipeList.clearData();
	jsp_transaction(
		  this                                 // 해당 스크립트를 호출하는 Form 객체
		, "FSR00010E_S007"                     // 서비스 ID
		, "U_svc::fs/fsr/FSR00010E_S007.jsp"   // 서비스 URL
		, "ds_cond=ds_cond"                    // 서버로 전송할 DataSet 객체 Str
		, "ds_MainRecipeList=ds_MainRecipeList"// 서버로부터 전송 받을 DataSet 객체 String
		, "RecipeGbn=" + v_RecipeGbn           // 서버로 전송할 기타 Argument 정보 String
		, "fn_callBackSearch"                  // 서버에서 처리가 완료된 후 Callback 받을 Function 명
		, true                                 // 에러 발생 시 Callback 함수 호출 여부
		, true                                 // 처리중입니다. 메시지 창 보여줄지 여부 설정하기
		, false                                // 동기식으로 설정할지 여부
	);
}

function fn_callBackSearch(cd,errmsg)
{
	if(cd!=0)
	{
		g_Message("EE","시스템오류!\n\n전산 담당자에게 문의하세요.");
		return;
	}
	else
	{
		grd_List.binddataset="ds_MainRecipeList";
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_T0_Search(gbn, RECIPE)
 * 기ㅡㅡㅡ능 : 레시피 마스터조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_T0_Search(gbn, RECIPE)
{
    if( gfn_length(gfn_trim(RECIPE))==0 || gfn_trim(RECIPE)==null )
    {
		// 이루틴은 무조건 레시피 명이 들어와야 합니다.
		return;
    }
    
	v_ImgNM="";
	v_gbn = gbn;
	v_RECIPE = RECIPE; 
	
	ds_cond.clearData();
	ds_cond.addRow();

	fsp_clear(this);
	ds_Recipe.clearData();

	// 표준레시피
	if(grd_List.formatid == "StdRecipe")
	{
		ds_cond.setColumn(0, "RECIPE_NAME", RECIPE);
		ds_cond.setColumn(0, "RECIPE_CD", ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"RECIPE_CD"));
		fsp_addSearch(this, "fs/fsr:FSR00010E_S014");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_Recipe=ds_Recipe","","fn_call_back_T0_search","",true);
	}
	// 미확정레시피
	else
	{
		ds_cond.setColumn(0, "RECIPE_NAME", RECIPE);
		ds_cond.setColumn(0, "NEW_RECIPE_SEQ", parseInt(ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"NEW_RECIPE_SEQ")));
		fsp_addSearch(this,"fs/fsr:FSR00010E_S030");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_Recipe=ds_Recipe","","fn_call_back_T0_search","",true);
	}
}

function fn_call_back_T0_search(cd, errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		//신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn == 1)
		{
			Copy(ds_tempRecipe, "ds_Recipe");
			ds_Recipe.clearData();
			ds_Recipe.addRow();
			ds_Recipe.copyRow(0, ds_tempRecipe, 0);
			//영문레시피 추가
			ds_Recipe.addColumn("RECIPE_ENAME", "string", 256);
			
			Image0.image = "";
			Image0.text = "이미지가 없습니다.";
			ds_Recipe.setColumn(0, "PHOTO_PATH", "");
			ds_Recipe.setColumn(0, "SPHOTO_PATH", "");
			ds_Recipe.setColumn(0, "CDATE", "");
			ds_Recipe.setColumn(0, "UDATE", "");
			ds_Recipe.setColumn(0, "SABUN", "");
			ds_Recipe.setColumn(0, "NM_KOR", "");
			if(ds_Recipe.getColumn(0, "RECIPE_CLASS") == "H")
			{
				ds_Recipe.setColumn(0, "RECIPE_CLASS", "");
			}
			ed_RecipeNM.readonly = false;
			ed_RecipeENM.readonly = false;
		}
		else
		{
			var v_path="";
			ed_RecipeNM.readonly=true;
			//ed_RecipeENM.readonly=true;
			
			if(grd_List.formatid=="StdRecipe")
			{
				v_path="FSR_STD_RECIPE_MST";
			}
			else
			{
				v_path="FSR_NEW_RECIPE_MST";
			}
			if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))==0 || gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH"))==null )
			{
				Image0.image="";
				Image0.text="이미지가 없습니다.";
			}
			else
			{
				if(gfn_length(gfn_trim(fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH"))))==0 ||
				    gfn_trim(fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH")))==null )
				{
					Image0.image="";
					Image0.text="이미지가 없습니다.";
				}
				else
				{
					Image0.text="";
					Image0.image=fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH"));
				}
			}
			
		}

		fn_filter();
		if(grd_List.formatid=="StdRecipe")
		{		
			if(GetRowType(ds_Recipe,0)=="insert")
			{
				cbo_RecipeClass.enable=true;
			}
			else
			{
				cbo_RecipeClass.enable=false;
				ed_RecipeNM.readonly=true;
				//ed_RecipeENM.readonly=true;
			}
		}
		else
		{
				cbo_RecipeClass.enable=true;
				ed_RecipeNM.enable=true;
				ed_RecipeNM.readonly=false;
				ed_RecipeENM.enable=true;
				ed_RecipeENM.readonly=false;
		}
		
		// 자재 갖고 오기
		fn_Jajea();
	}	
}

function fn_filter()
{
	var strCode1=ds_Recipe.getColumn(0,"RECIPE_CLASS");
	var strCode2=ds_Recipe.getColumn(0,"RECIPE_TYPE");
	switch(gfn_trim(strCode1))
	{
		case "H":
			ds_RecipeType.filter("SET1=='YN' || SET1=='Y'");
			break;
		case "":
			ds_RecipeType.filter("");
			break;
		default:
			ds_RecipeType.filter("SET1=='YN' || SET1=='N'"); 
			break;
	}
	switch(gfn_trim(strCode2))
	{
		case "":
			ds_CCLASS.filter("");
			break;
		default:
			ds_CCLASS.filter("gfn_nvl(SET1)=='' || SET1=='"+strCode2+"'");
			break;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_Jajea()
 * 기ㅡㅡㅡ능 : 레시피 자재구성 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_Jajea()
{
	if(grd_List.formatid=="StdRecipe")
	{
		fsp_clear(this);
		ds_ItemList.clearData();
		fsp_addSearch(this,"fs/fsr:FSR00010E_S010");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_ItemList=ds_ItemList","","fn_call_back_T0_jajea","",true);	
	}
	else
	{
		fsp_clear(this);
		ds_ItemList.clearData();
		fsp_addSearch(this,"fs/fsr:FSR00010E_S031");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_ItemList=ds_ItemList","","fn_call_back_T0_jajea","",true);	
	}
}

function fn_call_back_T0_jajea(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		// 신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn == 1)
		{
			Copy(ds_tempItem,"ds_ItemList");
			ds_ItemList.clearData();
			if(grd_List.formatid=="StdRecipe")
			{
				for(i=0;i<ds_tempItem.getRowCount();i++)
				{
					ds_ItemList.addRow();
					ds_ItemList.copyRow(i,ds_tempItem,i);
					ds_ItemList.setColumn(i,"RECIPE_CD","");
				}
			}
			else
			{
				for(i=0;i<ds_tempItem.getRowCount();i++)
				{
					ds_ItemList.addRow();
					ds_ItemList.copyRow(i,ds_tempItem,i);
					ds_ItemList.setColumn(i,"NEW_RECIPE_SEQ","");
				}				
			}
		}
		// 사용안함
		//ed_wonga.value=ds_ItemList.getSum("PERSON_PRICE");
		
		//조리법갖고오기
		fn_Jory();
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_Jory()
 * 기ㅡㅡㅡ능 : 레시피 조리법 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_Jory()
{
	if(grd_List.formatid=="StdRecipe")
	{
		fsp_clear(this);
		ds_CookMethod.clearData();
		fsp_addSearch(this,"fs/fsr:FSR00010E_S011");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_CookMethod=ds_CookMethod","","fn_call_back_T0_jory","",true);	
	}
	else
	{
		fsp_clear(this);
		ds_CookMethod.clearData();
		fsp_addSearch(this,"fs/fsr:FSR00010E_S032");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_CookMethod=ds_CookMethod","","fn_call_back_T0_jory","",true);			
	}
	
	fn_CuisineOrpn();
}

function fn_call_back_T0_jory(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==1)
		{
			Copy(ds_tempCook,"ds_CookMethod");
			ds_CookMethod.clearData();
			if(grd_List.formatid=="StdRecipe")
			{			
				for(i=0;i<ds_tempCook.getRowCount();i++)
				{
					ds_CookMethod.addRow();
					ds_CookMethod.copyRow(i,ds_tempCook,i);
				}
				ds_Recipe.setColumn(0,"RECIPE_CD","");//가장 마지막 조리법 처리후 레시피코드 리셋
			}
			else
			{
				for(i=0;i<ds_tempCook.getRowCount();i++)
				{
					ds_CookMethod.addRow();
					ds_CookMethod.copyRow(i,ds_tempCook,i);
				}
				ds_Recipe.setColumn(0,"NEW_RECIPE_SEQ","");//가장 마지막 조리법 처리후 미확정레시피순번 리셋				
			}
		}		
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_CuisineOrpn()
 * 기ㅡㅡㅡ능 : 조리공정 이미지 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_CuisineOrpn()
{
	var sFileName = Combo2.value;
	if (gfn_isNull(sFileName))
	{
		Tab00.tabpage4.img_JoryMethod.image = "";
		Tab00.tabpage4.img_JoryMethod.text = "이미지가 없습니다.";
	} 
	else 
	{
		try {
			Tab00.tabpage4.img_JoryMethod.text = "";
			Tab00.tabpage4.img_JoryMethod.image = fsp_getServerDir("FSR_CUISINE_IMG", sFileName + ".jpg");
		} catch (e) {
			Tab00.tabpage4.img_JoryMethod.text = "이미지 로드에 실패했습니다.";
		}
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_insert()
 * 기ㅡㅡㅡ능 : 신규입력
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_insert()
{
	var nRow = ds_MainRecipeList.rowposition;

	if(ds_MainRecipeList.getColumn(nRow,"RECIPE_CLASS")=="H")
	{
		ds_RClass.filter("CD!='H'");
	}
	ed_RecipeNM.enable = true;
	ed_RecipeENM.enable = true;
	fn_ableChk(false);
	Image0.image = "";
	fn_T0_Search(1, ds_MainRecipeList.getColumn(nRow, "RECIPE_NAME"));
}

function fn_delete()
{	
	if(g_Confirm("01","선택한 표준레시피를 삭제하시겠습니까?"))
	{	
		// 서비스셋팅
		var actionName, cmdName, inData, outData, otherArg, callBackFnc;
		var searchsql,insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;
		var insertSql1, updateSql1, deleteSql1;
		var insertSql2, updateSql2, deleteSql2;
		var insertSql3, updateSql3, deleteSql3;
		
		if(grd_List.formatid=="StdRecipe") {
			ds_input3.clear();
			ds_input3.addColumn("RECIPE_CD","STRING");	
			ds_input3.addRow();
			ds_input3.setColumn(0,"RECIPE_CD",ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"RECIPE_CD"));
			
			//alert(ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"RECIPE_CD"));
			
			http.Sync=true;
			fsp_clear(this);
			ds_Valid3.clearData();
			fsp_addSearch(this,"fs/fsr:FSR00010E_S039");
			fsp_callService(this,"","","ds_input3=ds_input3","ds_Valid3=ds_Valid3","","fn_call_back2","",true);
			http.Sync=false;
				
			if(ds_Valid3.getRowCount()>0)
			{
				//alert(fn_AlertMsg("010"));
				g_Message("EE", fn_AlertMsg("019"));		
			}
			else
			{
			
				ds_MainRecipeList.deleteRow(ds_MainRecipeList.rowposition);
				
				http.Sync=true;
				fsp_clear(this);	
				
				// 사용유무 확인로직
				// 로우 카운트 1이상 이면 삭제 취소
				//  출력 메시지:: 이미 사용중인 레시피입니다. 삭제 할 수 없습니다.
				//TRACE("삭제 TR");
				inData		= "ds_Recipe=ds_MainRecipeList:U";
				outData		= "";
				callBackFnc	= "fn_call_back2";
				insertSql 	= "";
				updateSql	= "";
				deleteSql1	= "fs/fsr:FSR00010E_D004";
				deleteSql2	= "fs/fsr:FSR00010E_D005";
				deleteSql3	= "fs/fsr:FSR00010E_D006";
				deleteSql4	= "fs/fsr:FSR00010E_D007";
				keyIncrement= -1;
				
				fsp_addSave(this, insertSql, updateSql, deleteSql1,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql, updateSql, deleteSql2,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql, updateSql, deleteSql3,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql, updateSql, deleteSql4,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
							
				fsp_callService(this, "", "", inData, outData, otherArg, callBackFnc);	
				http.Sync=false;
			
				//alert(fn_AlertMsg("011"));
				g_Message("01", "");
				fn_search();
			}
		}
	}
}
//콜백 프로세스 처리
function fn_call_back2(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_save()
 * 기ㅡㅡㅡ능 : 저장
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_save()
{
	var v_CurDate = gfn_today();	
	if(ds_Recipe.getRowCount()==0 && ds_Recipe.getDeletedRowCount()==0)
	{
		return;
	}

	// 유효성 체크
	if(fn_ValidCheck()==false)
	{
		return;		
	}

    fsp_clear(this);
    // 서비스셋팅
    var actionName, cmdName, inData, outData, otherArg, callBackFnc;
    var searchsql,insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;
	var insertSql1, updateSql1, deleteSql1;
	var insertSql2, updateSql2, deleteSql2;
	var insertSql3, updateSql3, deleteSql3;
	
	// 표준레시피 저장 (확정레시피)
	if(grd_List.formatid=="StdRecipe")
	{
		if(v_gbn==0) // 조회
		{			
			if(ds_Recipe.getDeletedRowCount()==0)
			{
				if(ds_ItemList.getRowCount()==0)
				{
					g_Message("EE", fn_AlertMsg("013"));
					return;
				}
				if(ds_ItemList.getRowCount()==0)
				{
					g_Message("EE", fn_AlertMsg("014"));
					return;
				}			
				if(ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0 || gfn_trim(ITEM_CODE)==null")!=-1)
				{
					g_Message("EE", fn_AlertMsg("015"));
					return;
				}
				if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
				{
					g_Message("EE", fn_AlertMsg("016"));
					return;
				}						
				for(i=0;i<ds_ItemList.getRowCount();i++)
				{
					ds_ItemList.setColumn(i,"ITEM_SEQ",i+1);
				}
				var v_max=ds_CookMethod.getMax("CUISINE_SEQ");
				if( gfn_trim(v_max)==null || gfn_length(gfn_trim(v_max))==0 )
				{
					v_max=0;
				}
				for(i=0;i<ds_CookMethod.getRowCount();i++)
				{
					if(gfn_length(gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ")))==0
							|| gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ"))==null )
					{
						v_max=v_max+1;
						ds_CookMethod.setColumn(i,"CUISINE_SEQ",v_max);
					}
					
				}		
				ds_Recipe.setColumn(0,"UDATE",gfn_subStr(v_CurDate,0,8));				
				//입력및 업데이트 저장
				inData		= "ds_Recipe=ds_Recipe:U ds_ItemList=ds_ItemList:U ds_CookMethod=ds_CookMethod:U";
				outData		= "";
				callBackFnc	= "fn_Call_ShowMsg";
				insertSql1 	= "";
				insertSql2 	= "fs/fsr:FSR00010E_I002";
				insertSql3 	= "fs/fsr:FSR00010E_I003";
				updateSql1	= "fs/fsr:FSR00010E_U001";
				updateSql2	= "fs/fsr:FSR00010E_U002";
				updateSql3	= "fs/fsr:FSR00010E_U003";			
				deleteSql1	= "";
				deleteSql2	= "fs/fsr:FSR00010E_D002";
				deleteSql3	= "fs/fsr:FSR00010E_D003";
				keyIncrement= -1;
				callbackSql	= "";
				
				fsp_addSave(this, insertSql1, updateSql1, deleteSql1,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql2, updateSql2, deleteSql2,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql3, updateSql3, deleteSql3,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				
				fsp_callService(this, "", "", inData, outData, otherArg, callBackFnc);	
			}
			if (ds_Recipe.getDeletedRowCount()>0)
			{
				ds_MainRecipeList.deleteRow(ds_MainRecipeList.rowposition);
				v_ImgNM=ds_Recipe.getDeletedColumn(0,"SPHOTO_PATH");
				
				// 사용유무 확인로직
				// 로우 카운트 1이상 이면 삭제 취소
				//  출력 메시지:: 이미 사용중인 레시피입니다. 삭제 할 수 없습니다.
				//TRACE("삭제 TR");
				inData		= "ds_Recipe=ds_Recipe:U";
				outData		= "";
				callBackFnc	= "fn_call_back_imgDel";
				insertSql 	= "";
				updateSql	= "";
				deleteSql1	= "fs/fsr:FSR00010E_D004";
				deleteSql2	= "fs/fsr:FSR00010E_D005";
				deleteSql3	= "fs/fsr:FSR00010E_D006";
				deleteSql4	= "fs/fsr:FSR00010E_D007";
				keyIncrement= -1;
				callbackSql	= "";
				
				fsp_addSave(this, insertSql, updateSql, deleteSql1,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql, updateSql, deleteSql2,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql, updateSql, deleteSql3,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql, updateSql, deleteSql4,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				
				fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);
			}
		}
		else		// 신규
		{
			for(i=0;i<ds_ItemList.getRowCount();i++)
			{
				ds_ItemList.setColumn(i,"ITEM_SEQ",i+1);
			}
			var v_max=ds_CookMethod.getMax("CUISINE_SEQ");
			if( gfn_trim(v_max)==null || gfn_length(gfn_trim(v_max))==0 )
			{
				v_max=0;
			}
			for(i=0;i<ds_CookMethod.getRowCount();i++)
			{
				if(gfn_length(gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ")))==0
						|| gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ"))==null )
				{
					v_max=v_max+1;
					ds_CookMethod.setColumn(i,"CUISINE_SEQ",v_max);
				}
				
			}
			ds_RecipeSeq.clearData();
			inData		= "ds_Recipe=ds_Recipe:U ds_ItemList=ds_ItemList:U ds_CookMethod=ds_CookMethod:U";
			outData		= "ds_RecipeSeq=ds_RecipeSeq";
			callBackFnc	= "fm_sRtn";
			searchsql	= "fs/fsr:FSR00010E_S029";
			insertSql1 	= "fs/fsr:FSR00010E_I004";
			insertSql2 	= "fs/fsr:FSR00010E_I005";
			insertSql3 	= "fs/fsr:FSR00010E_I006";			

			updateSql	= "";		
			deleteSql	= "";
			keyIncrement= -1;
			callbackSql	= "";
			fsp_addSearch(this,searchsql,true);
			fsp_addMulti(this, insertSql1);
			fsp_addMulti(this, insertSql2);
			if(ds_CookMethod.getRowCount()>0 )
			{
				fsp_addMulti(this, insertSql3);
			}
			fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);	
		}
	}
	else	// 미확정 레시피 저장 루틴====================================****************
	{
		// 미확정 레시피에서 삭제 버튼 사용하지 않습니다.
		// 미확정 레시피에서는 반려 로직 사용합니다.(20071218)	
		if(v_gbn==0) // 조회
		{			
			if(ds_Recipe.getDeletedRowCount()==0)
			{
				if(ds_ItemList.getRowCount()==0)
				{
					g_Message("EE", fn_AlertMsg("013"));
					return;
				}
				if(ds_ItemList.getRowCount()==0)
				{
					g_Message("EE", fn_AlertMsg("014"));
					return;
				}			
				if(ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0 || gfn_trim(ITEM_CODE)==null")!=-1)
				{
					g_Message("EE", fn_AlertMsg("015"));
					return;
				}
				if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
				{
					g_Message("EE", fn_AlertMsg("016"));
					return;
				}						
				for(i=0;i<ds_ItemList.getRowCount();i++)
				{
					ds_ItemList.setColumn(i,"ITEM_SEQ",i+1);
				}
				var v_max=ds_CookMethod.getMax("CUISINE_SEQ");
				if( gfn_trim(v_max)==null || gfn_length(gfn_trim(v_max))==0 )
				{
					v_max=0;
				}
				for(i=0;i<ds_CookMethod.getRowCount();i++)
				{
					if(gfn_length(gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ")))==0
							|| gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ"))==null )
					{
						v_max=v_max+1;
						ds_CookMethod.setColumn(i,"CUISINE_SEQ",v_max);
					}
					
				}		
				ds_Recipe.setColumn(0,"UDATE",gfn_subStr(v_CurDate,0,8));
				//입력및 업데이트 저장
				inData		= "ds_Recipe=ds_Recipe:U ds_ItemList=ds_ItemList:U ds_CookMethod=ds_CookMethod:U";
				outData		= "";
				callBackFnc	= "fn_Call_ShowMsg";
				insertSql1 	= "";
				insertSql2 	= "fs/fsr:FSR00010E_I007";
				insertSql3 	= "fs/fsr:FSR00010E_I008";
				updateSql1	= "fs/fsr:FSR00010E_U005";
				updateSql2	= "fs/fsr:FSR00010E_U006";
				updateSql3	= "fs/fsr:FSR00010E_U007";			
				deleteSql1	= "";
				deleteSql2	= "fs/fsr:FSR00010E_D008";
				deleteSql3	= "fs/fsr:FSR00010E_D009";
				keyIncrement= -1;
				callbackSql	= "";
				
				fsp_addSave(this, insertSql1, updateSql1, deleteSql1,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql2, updateSql2, deleteSql2,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				fsp_addSave(this, insertSql3, updateSql3, deleteSql3,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
				
				fsp_callService(this, "", "", inData, outData, otherArg, callBackFnc);	
			}			
		}
		else		// 신규
		{
			for(i=0;i<ds_ItemList.getRowCount();i++)
			{
				ds_ItemList.setColumn(i,"ITEM_SEQ",i+1);
			}
			var v_max=ds_CookMethod.getMax("CUISINE_SEQ");
			if( gfn_trim(v_max)==null || gfn_length(gfn_trim(v_max))==0 )
			{
				v_max=0;
			}
			for(i=0;i<ds_CookMethod.getRowCount();i++)
			{
				if(gfn_length(gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ")))==0
						|| gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ"))==null )
				{
					v_max=v_max+1;
					ds_CookMethod.setColumn(i,"CUISINE_SEQ",v_max);
				}
				
			}
			ds_RecipeSeq.clearData();			
			inData		= "ds_Recipe=ds_Recipe:U ds_ItemList=ds_ItemList:U ds_CookMethod=ds_CookMethod:U";
			outData		= "ds_RecipeSeq=ds_RecipeSeq";
			callBackFnc	= "fn_Call_ShowMsg";
			searchsql	= "fs/fsr:FSR00010E_S029";
			insertSql1 	= "fs/fsr:FSR00010E_I004";
			insertSql2 	= "fs/fsr:FSR00010E_I005";
			insertSql3 	= "fs/fsr:FSR00010E_I006";
			updateSql	= "";		
			deleteSql	= "";
			keyIncrement= -1;
			callbackSql	= "";
			http.Sync=true;
			fsp_addSearch(this,searchsql,true);
			fsp_addMulti(this, insertSql1);
			fsp_addMulti(this, insertSql2);
			if(ds_CookMethod.getRowCount()>0)
			{
				fsp_addMulti(this, insertSql3);
			}
			fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);	
			http.Sync=false;
		}	
	}
}

function fn_Call_ShowMsg(cd,errmsg)
{
	if(cd!=0)
	{
		g_Message("EE","시스템 오류!\n\n전산 담당자에게 문의하세요.");
	}
	else
	{
		g_Message("02");	//"데이터가 정상적으로 저장 되었습니다.";	
		// 미확정 저장일 경우 RECIPE_SEQ 셋팅 --> 신규입력 후 바로 사진 업로드시에 에러로 인해 수정
		if( rdo_RecipeGbn.index == 1 ) {
			fn_T0_SaveAfterSearch(0,ds_Recipe.getColumn(0,"RECIPE_NAME"));
		}
	}
}

function fn_T0_SaveAfterSearch(gbn,RECIPE)
{
	v_gbn=gbn;
	v_RECIPE=RECIPE;
	ds_cond.clearData();
	ds_cond.addRow();
	ds_cond.setColumn(0,"RECIPE_NAME",ds_Recipe.getColumn(0,"RECIPE_NAME"));
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ")))==0)
	{
		ds_cond.setColumn(0,"NEW_RECIPE_SEQ",parseInt(ds_RecipeSeq.getColumn(0, "NEW_RECIPE_SEQ")));
	}
	else
	{
		ds_cond.setColumn(0,"NEW_RECIPE_SEQ",parseInt(ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ")));
	}
	fsp_clear(this);
	ds_Recipe.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S030");
	fsp_callService(this,"","","ds_cond=ds_cond","ds_Recipe=ds_Recipe","","fn_call_back_T0_search","",true);
}

function fm_sRtn(cd,errmsg)
{
	if(cd!=0)
	{
		g_Message("EE","시스템 오류!\n\n전산 담당자에게 문의하세요.");
		return;
	}
	else
	{
		g_Message("02","데이터가 정상적으로 저장 되었습니다.\n\n미확정 레시피로 이동합니다.");
		fn_T0_Clear();
	}
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_initForm()
 * 기ㅡㅡㅡ능 : 폼 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_initForm()
{
    // FS0009 맛  FS0007 색 FS0008 모양  FS0010 질감 FS0011 제공온도 FS0013 찬기
	ds_common.filter("GROUP_CODE=='FS0007'");
	CopyF(ds_FS0007,"ds_common");
	ds_FS0007.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0008'");
	CopyF(ds_FS0008,"ds_common");
	ds_FS0008.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0009'");
	CopyF(ds_FS0009,"ds_common");
	ds_FS0009.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0010'");
	CopyF(ds_FS0010,"ds_common");
	ds_FS0010.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0011'");
	CopyF(ds_FS0011,"ds_common");
	ds_FS0011.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0013'");
	CopyF(ds_FS0013,"ds_common");
	ds_FS0013.insertRow(0);

	// 조회조건 컬럼 생성
	ds_cond.clear();
	ds_cond.addColumn("RECIPE_NAME","STRING");
	ds_cond.addColumn("RECIPE_CD","STRING");
	ds_cond.addColumn("RECIPE_CLASS","STRING");
	ds_cond.addColumn("RECIPE_TYPE","STRING");
	ds_cond.addColumn("CUISINE_TYPE","STRING");
	ds_cond.addColumn("MAIN_ITEM_CODE1","STRING");
	ds_cond.addColumn("RESP_NUT1","STRING");
	ds_cond.addColumn("SAVEFROM","STRING");
	ds_cond.addColumn("SAVETO","STRING");
	ds_cond.addColumn("UPJANG","STRING");
	ds_cond.addColumn("NEW_RECIPE_SEQ","DECIMAL");
	ds_cond.addColumn("SAME_WORD","STRING");

	// 조회조건 콤보초기설정
	cbo_sRecipeNM.index = 0;
	cbo_sRecipeClass.index = 0;
	cbo_sRecipeType.index = 0;
	cbo_sCookClass.index = 0;
	cbo_sMaterial.index = 0;
	cbo_sElement.index = 0;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_ableChk(gbn)
 * 기ㅡㅡㅡ능 : HMR 여부에 따른 UX 조정 (현재 HMR 레시피는 사용하지 않지만 데이터는 존재함)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_ableChk(gbn)
{
	// gbn true: HMR     false: HMR을 제외한 기타
	if(gbn==true)
	{
		cbo_sRecipeType.enable=false;
		Combo2.enable		=false; 
		Combo5.enable		=false; 
		Combo1.enable		=false; 
		Combo9.enable		=false; 
		Combo3.enable		=false; 
		Combo4.enable		=false; 
		Combo7.enable		=false;
		Combo10.enable		=false;
		cbo_sRecipeNM.enable=false;
		Combo12.enable		=false;
		btn_CustPop.enable	=false;
		chk_Dtlyn.enable	=false;
		Checkbox0.enable	=false;
		Checkbox1.enable	=false;
		Checkbox2.enable	=false;
	}
	else
	{
		cbo_sRecipeType.enable=true;
		Combo2.enable		=true; 
		Combo5.enable		=true; 
		Combo1.enable		=true; 
		Combo9.enable		=true; 
		Combo3.enable		=true; 
		Combo4.enable		=true; 
		Combo7.enable		=true;
		Combo10.enable		=true;
		cbo_sRecipeNM.enable=true;
		Combo12.enable		=true;
		btn_CustPop.enable	=true;
		chk_Dtlyn.enable	=true;
		Checkbox0.enable	=true;
		Checkbox1.enable	=true;
		Checkbox2.enable	=true;
	} 
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_Update_Chk()
 * 기ㅡㅡㅡ능 : 데이터 변경체크
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_Update_Chk()
{
//alert( gfn_dsIsUpdated(ds_Recipe)==true +"||"+ gfn_dsIsUpdated(ds_ItemList)==true +"||"+ gfn_dsIsUpdated(ds_CookMethod)==true);
    if(gfn_dsIsUpdated(ds_Recipe)==true ||
       gfn_dsIsUpdated(ds_ItemList)==true ||
       gfn_dsIsUpdated(ds_CookMethod)==true	)
	{
		if(g_Confirm("02","변경된 데이타가 있습니다.\n\n저장하시겠습니까?"))
		{
			fn_save();
			return true;
		}
	}
	return false;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : setItemInfo()
 * 기ㅡㅡㅡ능 : 자재정보 세팅 (자재선택 팝업창에서 자재선택시 호출)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function setItemInfo(rtnVal)
{
	var arrVal = gfn_split(rtnVal, ";");

	var nRow = ds_ItemList.addRow();
	if(grd_List.formatid=="StdRecipe")
	{
		ds_ItemList.setColumn(nRow, "RECIPE_CD", ds_Recipe.getColumn(0,"RECIPE_CD"));
	}
	else
	{
		ds_ItemList.setColumn(nRow,"NEW_RECIPE_SEQ", ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ"));
	}
	ds_ItemList.setColumn(nRow, "NEED_QTY", 1); // 이벤트 처리 문제로 1세팅
	ds_ItemList.setColumn(nRow, "ITEM_CODE",   arrVal[0]);
	ds_ItemList.setColumn(nRow, "ITEM_NAME",   arrVal[1]);
	ds_ItemList.setColumn(nRow, "ITEM_SIZE",   arrVal[2]);
	ds_ItemList.setColumn(nRow, "PO_UOM",      arrVal[3]);
	ds_ItemList.setColumn(nRow, "RESTRICT_YN", arrVal[4]);			
	ds_ItemList.setColumn(nRow, "CAL",         arrVal[5]);
	ds_ItemList.setColumn(nRow, "DISUSE_RATE", arrVal[6]);
	ds_ItemList.setColumn(nRow, "GRAM_PRICE",  arrVal[7]);
	ds_ItemList.setColumn(nRow, "NEED_QTY",    arrVal[9]);
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_List_OnCellClick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피목록 클릭
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function grd_List_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	// 팝업없이 내부 처리로직은 클릭과 더블클릭사용이 가능합니다.
	// 셀인덱스 9 에서는 더블클릭을 허용하지 않습니다.
	// 이외 인덱스에서는 더블클릭으로 팝업사용합니다.
	var v_rtn="";
	var v_result="";
	var v_arg="";

	// 표준레시피 구성 (자재목록)
	if(grd_List.formatid=="StdRecipe")
	{
		ds_MainRecipeList.rowposition=e.row;
		v_arg1=gfn_trim(ds_MainRecipeList.getColumn(e.row,"RECIPE_NAME"));
		v_arg2=gfn_trim(ds_MainRecipeList.getColumn(e.row,"RECIPE_CD"));
		if(e.cell==9)
		{
			v_rtn=gfn_dialog("", "U_FSR::FSR00013P.xfdl",{IN_RECIPE_NAME:v_arg1, IN_RECIPE_CD:v_arg2});
		}
	}
	// 미확정레시피 (반려)
	else
	{
		// 서비스셋팅
		var actionName, cmdName, inData, outData, otherArg, callBackFnc;
		var searchsql,insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;

		// 미확정 레시피 반려 APPRV_YN 'D' 세팅
		if(e.cell==9)
		{
			ds_MainRecipeList.rowposition=e.row;
			v_rtn=gfn_dialog("", "U_FSR::FSR00016P.xfdl","");
			v_result=gfn_split(v_rtn,";");
			// v_result[0] 반려여부 OK 반려 NO 취소 ......v_result[1] 반려사유
			if(v_result[0] =="OK")
			{
				ds_UpdateApprv.clear();
				ds_UpdateApprv.addColumn("NEW_RECIPE_SEQ","DECIMAL");	// 미확정 레시피순번
				ds_UpdateApprv.addColumn("RTN_REASON","STRING");			// 반려사유
				ds_UpdateApprv.addRow();
				ds_UpdateApprv.setColumn(0,"NEW_RECIPE_SEQ",ds_MainRecipeList.getColumn(e.row,"NEW_RECIPE_SEQ"));
				ds_UpdateApprv.setColumn(0,"RTN_REASON",gfn_trim(v_result[1]));
				inData		= "ds_UpdateApprv=ds_UpdateApprv";
				outData		= "";
				callBackFnc	= "";
				insertSql 	= "";
				updateSql	= "fs/fsr:FSR00010E_U004";		
				deleteSql	= "";
				keyIncrement= -1;
				callbackSql	= "";
				
				fsp_addMulti(this, updateSql);
				
				fsp_callService(this, "", "", inData, outData, otherArg, "fn_call_back_rtn","",true);
				ds_MainRecipeList.deleteRow(e.row);
			}
			else
			{
				return;
			}
		}
	}
}

function fn_call_back_rtn(cd,errmsg)
{
	if(cd!=0)
	{
		return;
	}
	else
	{
		fn_T0_Clear();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_List_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피목록 더블클릭
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function grd_List_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{
	v_DupCheck = "N";
	fn_itemSearch(e.row);
}

function fn_itemSearch(row)
{
	if(fn_Update_Chk())
	{
		return;
	}

	// 표준레시피
	if(rdo_RecipeGbn.index == 0)
	{
		if(ds_MainRecipeList.getColumn(row, "RECIPE_CLASS")=="H")
		{
			ds_RClass.filter("");
			fn_ableChk(true);
		}
		else
		{
			ds_RClass.filter("CD!='H'");
			fn_ableChk(false);
		}
		ed_RecipeNM.enable = false;
		ed_RecipeENM.enable = true;
		ed_RecipeENM.readonly = false;
		Image0.image = "";
		fn_T0_Search(0, ds_MainRecipeList.getColumn(row, "RECIPE_NAME"));
	}
	// 미확정레시피
	else
	{
		if(ds_MainRecipeList.getColumn(row,"RECIPE_CLASS")=="H")
		{
			ds_RClass.filter("");
			fn_ableChk(true);
		}
		else
		{
			ds_RClass.filter("CD!='H'");
			fn_ableChk(false);
		}
		ed_RecipeNM.enable = true;
		ed_RecipeENM.enable = true;
		Image0.image = "";
		fn_T0_Search(0,ds_MainRecipeList.getColumn(row,"RECIPE_NAME"));
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_grd_jajea_OnCellClick(obj, nRow, nCell)
 * 기ㅡㅡㅡ능 : 자재구성 클릭
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
 function grd_jajea_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	fn_grd_jajea_OnCellClick(obj, e.row, e.cell);
}

function fn_grd_jajea_OnCellClick(obj, nRow, nCell)
{
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		return;
	}
	var ActionVal="";
	var v_rtn="";
	var v_result="";
	ds_ItemList.rowposition=nRow;
	switch(nCell)
	{
		case 2:
			if(ds_ItemList.getColumn(nRow, "ATTR10") == "1")
			{
				g_Message("EE","그룹레시피 대표자재 입니다.\n삭제하시기 전에 대표자재를 해제하시기 바랍니다.");
				return;
			}
		
			ds_ItemList.deleteRow(ds_ItemList.rowposition);
			break;
		case 12:
			v_rtn=gfn_dialog("", "U_FSR::FSR00015P.xfdl","");
			if(gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
			{
				return;
			}			
			v_result=gfn_split(v_rtn,";");	// 0 그룹코드 1 그룹명 2 상세코드 3 상세코드명
			ds_ItemList.setColumn(nRow,"CUT_SPEC",v_result[2]);
			ds_ItemList.setColumn(nRow,"CUT_SPEC_NAME",v_result[3]);	
			break;
		default :
			break;
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_add_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 자재추가
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_add_OnClick(obj:Button, e:ClickEventInfo)
{
	fn_addItem();
}

function fn_addItem()
{
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		g_Message("EE","HMR은 조회만 가능합니다.");
		return false;
	}
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}

	// 현재 추가중인 자재가 있을경우 처리 안함
	if(ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0 || gfn_trim(ITEM_CODE)==null")!=-1)
	{
		return;
	}

	/* 자재추가시 자동 자재추가 팝업 호출 */
	fn_addItemPop(-1);
}

function fn_addItemPop(nRow)
{
	v_rtn=gfn_dialog("", "U_FSR::FSR90011P.xfdl",{currRow:nRow,dsName:'ds_ItemList'});
	if(gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
	{
		return;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_fullScreen_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 전체화면 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_fullScreen_onclick(obj:Button, e:ClickEventInfo)
{
    if (Tab00.tabpage1.btn_fullScreen.text == "원래대로") 
    {
		Tab00.position.top = "426px";
		Tab00.tabpage1.btn_fullScreen.text = "전체화면";
		Tab00.tabpage2.btn_fullScreen.text = "전체화면";
		Tab00.tabpage4.btn_fullScreen.text = "전체화면";
    }
    else 
    {
		Tab00.position.top = "30px";
		Tab00.tabpage1.btn_fullScreen.text = "원래대로";
		Tab00.tabpage2.btn_fullScreen.text = "원래대로";
		Tab00.tabpage4.btn_fullScreen.text = "원래대로";
	}
}

/******************************************************************************************
 * 함  수  명   : Common_Btn_common_OnClick
 * 기      능   : 화면공통버튼이벤트처리 :함수호출
 * 작  성  자   : 윤상혁
 * 작성  일자   : 20071203
 ******************************************************************************************/
function Common_Btn_common_OnClick(obj:Button, e:ClickEventInfo)
{
	switch(obj.name)
	{
		case "btn_Confirm":
			fn_Confirm();
			break;
		case "btn_Copy":
			fn_Copy();
			break;
		case "btn_Reset":
			fn_Reset();
			break;
		case "btn_StdRecipeSearch":
			fn_StdRecipeSearch();
			break;
        default :
            break;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_Copy()
 * 기ㅡㅡㅡ능 : 레시피복사 팝업
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_Copy()
{
	if(grd_List.formatid!="StdRecipe")
	{
		g_Message("EE", fn_AlertMsg("045"));
		return;
	}
	if(ds_Recipe.getRowCount()==0)
	{
		g_Message("EE", fn_AlertMsg("046"));
		return;
	}
	if(GetRowType(ds_Recipe,0)=="insert")
	{
		g_Message("EE", fn_AlertMsg("046"));
		return;		
	}
	if(GetRowType(ds_Recipe,0)=="update" ||
		gfn_dsIsUpdated(ds_ItemList)==true ||
		gfn_dsIsUpdated(ds_CookMethod)==true)
	{
		g_Message("EE", fn_AlertMsg("047"));
		return;		
	}
	if(v_gbn==1)	// 신규 입력이면 리턴
	{
		return;
	}
	var v_Idx=cbo_RecipeClass.index;
	gfn_dialog("", "U_FSR::FSR00017P.xfdl",{RECIPE_NAME:ed_RecipeNM.value, RECIPE_CD:ed_RecipeCD.value, OBJ_RECIPE:ds_Recipe, OBJ_ITEMLIST:ds_ItemList, OBJ_COOKMETHOD:ds_CookMethod});
	cbo_RecipeClass.index=v_Idx;
	ds_Recipe.applyChange();
	ds_Recipe.reset();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_Reset()
 * 기ㅡㅡㅡ능 : 화면 초기화 버튼 클릭시
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_Reset()
{
	// 레시피마스터 초기화
	ds_Recipe.clearData();
	Image0.text = "";
	Image0.image = "theme://convertImages/img_NoImageBig.png";
	
	// 재료구성 초기화
	ds_ItemList.clearData();
	
	// 조리법 초기화
	ds_CookMethod.clearData();
	
	// 조리공정 초기화
	Tab00.tabpage4.img_JoryMethod.image = "";
	Tab00.tabpage4.img_JoryMethod.text = "이미지가 없습니다.";
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_StdRecipeSearch()
 * 기ㅡㅡㅡ능 : 업장표준레시피 조회팝업
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_StdRecipeSearch()
{
	gfn_dialog("", "U_FSR::FSR00010P.xfdl","");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_T0_Clear()
 * 기ㅡㅡㅡ능 : 표준및 미확정레시피 라디오 변경시 데이타셋 클리어
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_T0_Clear()
{
	Tab00.tabpage4.img_JoryMethod.image = "";
	Tab00.tabpage4.img_JoryMethod.text = "이미지가 없습니다.";
	ds_Recipe.clearData();
	ds_ItemList.clearData();
	ds_CookMethod.clearData();
	Image0.image = "theme://convertImages/img_NoImageBig.png";
	Image0.text = "";
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Button0_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 추천계절 전체선택
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Button0_OnClick(obj:Button, e:ClickEventInfo)
{
	if(GetRowType(ds_Recipe,0)!="insert" && ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H")
	{
		return;
	}
	
	if(chk_Dtlyn.value=="Y" || Checkbox0.value=="Y" || Checkbox1.value=="Y" || Checkbox2.value=="Y")
	{
		chk_Dtlyn.value="N";
		Checkbox0.value="N";
		Checkbox1.value="N";
		Checkbox2.value="N";
	}
	else
	{
		chk_Dtlyn.value="Y";
		Checkbox0.value="Y";
		Checkbox1.value="Y";
		Checkbox2.value="Y";
	
	} 
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_CustPop_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 개발정보 개발자 조회 팝업
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_CustPop_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	
    // 사원조회
	var arg = {NM_KOR:gfn_trim(Edit0.value)};
	var v_rtn=gfn_dialog("", "U_FSR::FSR00018P.xfdl",arg);
	var v_result=gfn_split(v_rtn,";");// 0 사번 1 성명 2 영문명 3 주민번호
	
	if( gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
	{
		return;
	}
	
	ds_Recipe.setColumn(0,"SABUN",v_result[0]);
	ds_Recipe.setColumn(0,"NM_KOR",v_result[1]);	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_RecipePop_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 기본정보 레시피 중복체크
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_RecipePop_OnClick(obj:Button, e:ClickEventInfo)
{
    // 신규추가만 확인 fsr_std_recipe_mst에 존재하는지만 확인하고 신규추가 입력은 막지 않습니다.
    // 단 표준레시피로 확정 이동시 표준레시피에 존해하면 이동확정불가
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	
	if( grd_List.formatid=="StdRecipe" && v_gbn==0 )  //	v_gbn==0  초기화가 아닌 신규입력시나 미확정 데이타수정 변경시에
	{
		return;
	}
	if(cbo_RecipeClass.index<1)
	{
		g_Message("EE", fn_AlertMsg("044"));
		return;
	}
	if(gfn_length(gfn_trim(ed_RecipeNM.value))==0 || gfn_trim(ed_RecipeNM.value)==null )
	{
		g_Message("EE", fn_AlertMsg("009"));
		return;
	}
	ds_input.clear();
	ds_input.addColumn("RECIPE_NAME","STRING");
	ds_input.addColumn("RECIPE_CLASS","STRING");
	ds_input.addRow();
	ds_input.setColumn(0,"RECIPE_NAME",gfn_trim(ed_RecipeNM.value));
	ds_input.setColumn(0,"RECIPE_CLASS",gfn_trim(cbo_RecipeClass.value));
	http.Sync=true;
	fsp_clear(this);
	ds_Valid.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S016");
	fsp_callService(this,"","","ds_input=ds_input","ds_Valid=ds_Valid","","fn_call_back","",true);
	http.Sync=false;
		
	if(ds_Valid.getRowCount()>0)
	{
		v_DupCheck = "N";
		g_Message("EE", fn_AlertMsg("010"));
		return;
	}
	else
	{
		v_DupCheck = "Y";
		g_Message("EE", fn_AlertMsg("011"));
		return;
	}
} 


/******************************************************
 *  서버로 파일 전송 처리 
 * @param  httpfileObj  http file 처리 객체  
 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
 * @param  localFilePath 로컬 경로 
 * @param  localFileName 로컬 파일명 
 * @param  sendFileName  서버에 전송하고 싶은 이름 
 * @param  fileProcType  서버에서 기존 파일을 처리하는 타입 정의  
           D - deleteFileName에 기술된 파일명이 존재할 경우만 파일 삭제 ( 기본 값 )
           A - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
               ( 파일명은 서버에 정의된 되로 타임을 추가해야 할 경우 추가한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
           U - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
               ( 파일명은 무조건 Client를 기준으로 저장한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
           N - 전송하는 파일명으로 해당 파일이 존재할 경우 저장하지 않는다. 
               ( 파일명은 무조건 Client를 기준으로 저장한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
 * @param  deleteFileName 서버에서 삭제해야 하는 파일 명
           isDelete가 true이면서 해당 파일명이 기술되어 있지 않을 경우 
           기존 파일을 삭제한다. 
 * @return  서버에 저장된 파일 정보 Array 
            0 - 성공 : S / 실패 : E 
            1 - 서버에 저장된 실제 경로 
            2 - 서버에 저장된 실제 파일명 
            3 - 서버에 저장된 파일 사이즈 
******************************************************/
function btn_ImgInsert_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(gfn_dsIsUpdated(ds_Recipe)==true || gfn_dsIsUpdated(ds_ItemList)==true || gfn_dsIsUpdated(ds_CookMethod)==true)
	{
		g_Message("02",fn_AlertMsg("047"));
		return;
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))>0)
	{
		g_Message("EE","이미지 정보를 삭제 하고 첨부하세요.");
		return;
	}
	if(FileDialog.Open()==false)
	{
		return;
	}
	var v_filename=FileDialog.FileName;
	//특수문자 공백 replace 파일삭제 오류 방지 20200420 김호석
	v_filename = gfn_replace(v_filename, ' ', '');
	
	var regExp = /[\{\}\[\]\/?,;:|\)*~`!^\-+<>@\#$%&\\\=\(\'\"]/gi;
		
	if(regExp.test(v_filename)){
		var t = v_filename.replace(regExp, "");
		v_filename = t;
	}
	
	var v_filepath=FileDialog.FilePath;
	if(gfn_length(gfn_trim(v_filename))==0 || gfn_trim(v_filename)==null)
	{
		return;
	}

	var v_point_index=gfn_indexOf(v_filename,".");
	var v_ext=gfn_subStr(v_filename,v_point_index);

	var v_path="";
	var v_savenm="";
	if(grd_List.formatid=="StdRecipe")
	{
		v_path="FSR_STD_RECIPE_MST";
		v_savenm=ds_Recipe.getColumn(0,"RECIPE_CD")+v_ext;
	}
	else
	{
		v_path="FSR_NEW_RECIPE_MST";
		v_savenm=ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ")+v_ext;
	}
	// 파일 서버로 전송 
	var arr = fsp_fileWrite(HttpFile, v_path, v_filepath, v_filename,v_savenm,"U");  

	// 처리 결과 확인하기 
    if( arr[0] == "E" ) {
		g_Message("EE", fn_AlertMsg("018"));
		return;
    }
	else
	{
		ds_Recipe.setColumn(0,"PHOTO_PATH",v_filename);
		ds_Recipe.setColumn(0,"SPHOTO_PATH",arr[2]);
		fn_save();
		/******************************************************
		 *  서버에서 실제 이미지 경로 가져오기 
		 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
		 * @param  fileName  보여줄 파일명 ( 옵션 )
		 * @return  서버 전제 url 경로
		 ******************************************************/
		Image0.text="";
		Image0.image=fsp_getServerDir(v_path,arr[2]);
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_ImgDelete_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 이미지 삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_ImgDelete_OnClick(obj:Button, e:ClickEventInfo)
{
	var v_path="";

	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(gfn_dsIsUpdated(ds_Recipe)==true || gfn_dsIsUpdated(ds_ItemList)==true || gfn_dsIsUpdated(ds_CookMethod)==true)
	{
		g_Message("02",fn_AlertMsg("047"));
		return;
	}	
	if(grd_List.formatid=="StdRecipe")
	{
		v_path="FSR_STD_RECIPE_MST";
	}
	else
	{
		v_path="FSR_NEW_RECIPE_MST";
	}

	//신규레시피인 경우는 레시피코드가 부여되지 않았다.
	if ((grd_List.formatid=="StdRecipe") && (gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))==0))
	{
		g_Message("02","표준레시피코드가 없습니다.");
		return;
	}	

	if(g_Confirm("01",fn_AlertMsg("050"))==false)
	{
		return;
	}
	if(fsp_fileDelete(v_path, ds_Recipe.getColumn(0,"SPHOTO_PATH"),true))
	{
		ds_Recipe.setColumn(0,"SPHOTO_PATH","");
		ds_Recipe.setColumn(0,"PHOTO_PATH","");
		Image0.image = "theme://convertImages/img_NoImageBig.png";
		Image0.text = "";
		fn_T0_Save();
	}
	else
	{
		if(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH"))==null || gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))==0)
		{
			return;
		}
		else
		{
			g_Message("EE", fn_AlertMsg("017"));
		}
		return;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_Confirm()
 * 기ㅡㅡㅡ능 : 확정
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_Confirm()
{
	if(v_DupCheck == 'N')
	{
		g_Message("EE", "레시피명 중복체크를 해주시기 바랍니다.");
		return;
	}

	if(fn_ValidCheck_Conf()==false)
	{
		return false;
	}
	
	if( GetRowType(ds_Recipe,0)=="insert" && ds_Recipe.getRowCount()>0)
	{
		http.Sync=true;
		fn_Before__Direct_confirm_save();
		http.Sync=false;
	}

	if(ds_Recipe.getRowCount()==0)
	{
		g_Message("EE", fn_AlertMsg("023"));
		return;
	}
	if(ds_ItemList.getRowCount()==0)
	{
		g_Message("EE", "자재는 필수 입력입니다.");
		return;
	}
	
	if(gfn_length(gfn_trim(ed_RecipeNM.value))==0 || gfn_trim(ed_RecipeNM.value)==null )
	{
		g_Message("EE", fn_AlertMsg("009"));
		return;
	}

	if( !g_Confirm("04", fn_AlertMsg("048")) )
	{
		return;
	}
	
	ds_input.clear();
	ds_input.addColumn("RECIPE_NAME","STRING");
	ds_input.addColumn("RECIPE_CLASS","STRING");
	ds_input.addRow();
	ds_input.setColumn(0,"RECIPE_NAME",gfn_trim(ed_RecipeNM.value));
	ds_input.setColumn(0,"RECIPE_CLASS",gfn_trim(cbo_RecipeClass.value));
	
	http.Sync=true;
	fsp_clear(this);
	ds_Valid.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S016");
	fsp_callService(this,"","","ds_input=ds_input","ds_Valid=ds_Valid","","fn_call_back","",true);
	http.Sync=false;
	
	http.Sync=true;
	fsp_clear(this);
	ds_Valid2.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S035");
	fsp_callService(this,"","","ds_input=ds_input","ds_Valid2=ds_Valid2","","fn_call_back","",true);
	http.Sync=false;		
	
	if(ds_Valid.getRowCount()>0)
	{
		g_Message("EE", fn_AlertMsg("010"));
		return;
	}
	else
	{
		if(fn_ValidCheck_Conf()==false)
		{
			return false;
		}
		
		var v_max=ds_CookMethod.getMax("CUISINE_SEQ");
		if( gfn_trim(v_max)==null || gfn_length(gfn_trim(v_max))==0 )
		{
			v_max=0;
		}
		for(i=0;i<ds_CookMethod.getRowCount();i++)
		{
			if(gfn_length(gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ")))==0
					|| gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ"))==null )
			{
				v_max=v_max+1;
				ds_CookMethod.setColumn(i,"CUISINE_SEQ",v_max);
			}
			
		}
		
		http.Sync=true;
		fsp_clear(this);
		var actionName, cmdName, inData, outData, otherArg, callBackFnc;
		var searchsql,insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;
		var insertSql1,insertSql2,insertSql3;
		
		// 표준레시피 전환로직
		ds_RecipeCD.clearData();  
		otherArg	= "IN_RECIPE_CLASS="+wrapQuote(gfn_trim(cbo_RecipeClass.value));
		otherArg	+=" IN_RECIPE_NAME="+ wrapQuote(gfn_trim(ed_RecipeNM.value));
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ")))==0)
		{
			otherArg	+=" NEW_RECIPE_SEQ="+ wrapQuote(gfn_trim(ds_RecipeSeq.getColumn(0,"NEW_RECIPE_SEQ")));
			ds_Recipe.setColumn(0,"NEW_RECIPE_SEQ",gfn_trim(ds_RecipeSeq.getColumn(0,"NEW_RECIPE_SEQ")));
		}
		inData		= "ds_Recipe=ds_Recipe ds_ItemList=ds_ItemList ds_CookMethod=ds_CookMethod";
		outData		= "ds_RecipeCD=ds_RecipeCD";
		callBackFnc	= "";
		searchsql	= "fs/fsr:FSR00010E_S033";
		insertSql 	= "fs/fsr:FSR00010E_I012";
		insertSql1 	= "fs/fsr:FSR00010E_I009";
		insertSql2 	= "fs/fsr:FSR00010E_I010";
		insertSql3 	= "fs/fsr:FSR00010E_I011";
		updateSql	= "fs/fsr:FSR00010E_U008";		
		deleteSql	= "";
		keyIncrement= -1;
		callbackSql	= "";

		fsp_addSearch(this,searchsql,true);
		if(ds_Valid2.getRowCount()==0)
		{
			fsp_addMulti(this, insertSql);
		}
		fsp_addMulti(this, insertSql1);
		fsp_addMulti(this, insertSql2);
		if(ds_CookMethod.getRowCount()>0)
		{						
			fsp_addMulti(this, insertSql3);
		}
		fsp_addMulti(this, updateSql);
		fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc,"",true);			

		if(!gfn_isNull(ds_Recipe.getColumn(0, "PHOTO_PATH")))
		{
			// 레시피 이미지 이동처리
			jsp_transaction( 
				  this                                 // 해당 스크립트를 호출하는 Form 객체
				, "FSR00010E_T001"                     // 서비스 ID
				, "U_svc::fs/fsr/FSR00010E_T001.jsp"   // 서비스 URL
				, "ds_RecipeCD=ds_RecipeCD ds_Recipe=ds_Recipe"                // 서버로 전송할 DataSet 객체 Str
				, ""                                   // 서버로부터 전송 받을 DataSet 객체 String
				, ""                                   // 서버로 전송할 기타 Argument 정보 String
				, ""                                   // 서버에서 처리가 완료된 후 Callback 받을 Function 명
				, true                                 // 에러 발생 시 Callback 함수 호출 여부
				, false                                // 처리중입니다. 메시지 창 보여줄지 여부 설정하기
				, true                                 // 동기식으로 설정할지 여부
			);
		}

		http.Sync=false;

		ds_MainRecipeList.deleteRow(ds_MainRecipeList.rowposition);
		fn_T0_Clear();
		return;
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_ValidCheck()
 * 기ㅡㅡㅡ능 : 저장시 유효성 체크
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_ValidCheck()
{
	// 표준레시피 필수입력 체크
	if(grd_List.formatid=="StdRecipe" && GetRowType(ds_Recipe,0)!="insert")
	{
		// 레시피코드가 없습니다.\n\n시스템관리자에게 문의하십시오.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD"))==null)
		{
			g_Message("EE", fn_AlertMsg("031"));
			return false;
		}
		
		// 레시피코드가 없습니다.\n\n시스템관리자에게 문의하십시오.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			g_Message("EE", fn_AlertMsg("031"));
			return false;
		}
		
		// 레시피명을 입력하세요.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			g_Message("EE", fn_AlertMsg("030"));
			return false;
		} else {
			//tab 삭제?
		
		}
		
		
		// 레시피분류를 입력하세요.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
		{
			g_Message("EE", fn_AlertMsg("032"));
			return false;
		}
		
		// 레시피유형을 입력하세요.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE"))==null)
		{
			g_Message("EE", fn_AlertMsg("033"));
			return false;
		}
		
		// 조리법유형을 입력하세요.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE"))==null)
		{
			g_Message("EE", fn_AlertMsg("034"));
			return false;
		}
		
		// 제공온도를 선택하세요.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER"))==null)
		{
			g_Message("EE", fn_AlertMsg("039"));
			return false;
		}
		
		// 중심온도 체크를 선택하세요.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN"))==null)
		{
			g_Message("EE", fn_AlertMsg("040"));
			return false;
		}
		
		// 자재를 입력하세요.
		if(ds_ItemList.getRowCount()==0)
		{
			g_Message("EE", fn_AlertMsg("042"));
			return false;
		}
		
		// 자재코드를 입력하세요.
		if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
		{
			g_Message("EE", fn_AlertMsg("043"));
			return false;
		}
		
		// 조리법을 입력하셔야 합니다.
		if(ds_CookMethod.getRowCount()==0)
		{
			g_Message("EE", fn_AlertMsg("014"));
			return false;
		}		
		
		// 조리법이 비어있는 라인이 있습니다.비어있는 라인을 입력하세요.
		if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
		{
			g_Message("EE", fn_AlertMsg("016"));
			return false;
		}		
	}
	// 미확정레시피 필수입력 체크
	else
	{
		// 레시피코드가 없습니다.\n\n시스템관리자에게 문의하십시오.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			g_Message("EE", fn_AlertMsg("031"));
			return false;
		}
		
		// 레시피분류를 입력하세요.
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
		{
			g_Message("EE", fn_AlertMsg("032"));
			return false;
		}
		
		// 자재를 입력하세요.
		if(ds_ItemList.getRowCount()==0)
		{
			g_Message("EE", fn_AlertMsg("042"));
			return false;
		}
		
		// 자재코드를 입력하세요.
		if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
		{
			g_Message("EE", fn_AlertMsg("043"));
			return false;
		}		
		
		// 조리법을 입력하셔야 합니다.
		if(ds_CookMethod.getRowCount()==0)
		{
			g_Message("EE", fn_AlertMsg("014"));
			return false;
		}		
		
		// 조리법이 비어있는 라인이 있습니다.비어있는 라인을 입력하세요.
		if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
		{
			g_Message("EE", fn_AlertMsg("016"));
			return false;
		}
	}
	return true;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_ValidCheck_Conf()
 * 기ㅡㅡㅡ능 : 확정시 유효성 체크
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_ValidCheck_Conf()
{
	// 미확정레시피 표준레시피로 확정시 데이터 체크 
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
	{
		g_Message("EE", fn_AlertMsg("031"));
		return false;
	}
	
	// 레시피명을 입력하세요.
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
	{
		g_Message("EE", fn_AlertMsg("030"));
		return false;
	}
	
	// 레시피분류를 입력하세요.
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
	{
		g_Message("EE", fn_AlertMsg("032"));
		return false;
	}
			
	// 레시피유형을 입력하세요.
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE"))==null)
	{
		g_Message("EE", fn_AlertMsg("033"));
		return false;
	}
	
	// 조리법유형을 입력하세요.
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE"))==null)
	{
		g_Message("EE", fn_AlertMsg("034"));
		return false;
	}
	
	// 제공온도를 선택하세요.
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER"))==null)
	{
		g_Message("EE", fn_AlertMsg("039"));
		return false;
	}
	
	// 중심온도 체크를 선택하세요.
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN"))==null)
	{
		g_Message("EE", fn_AlertMsg("040"));
		return false;
	}
	
	// 자재를 입력하세요.
	if(ds_ItemList.getRowCount()==0)
	{
		g_Message("EE", fn_AlertMsg("042"));
		return false;
	}
	
	// 자재코드를 입력하세요.
	if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
	{
		g_Message("EE", fn_AlertMsg("043"));
		return false;
	}		
	
	// 조리법을 입력하셔야 합니다.
	if(ds_CookMethod.getRowCount()==0)
	{
		g_Message("EE", fn_AlertMsg("014"));
		return false;
	}		
	
	// 조리법이 비어있는 라인이 있습니다.비어있는 라인을 입력하세요.
	if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
	{
		g_Message("EE", fn_AlertMsg("016"));
		return false;
	}
	return true;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_AlertMsg(cd)
 * 기ㅡㅡㅡ능 : 오류메시지 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function fn_AlertMsg(cd)
{
	var v_Msg="";
	switch(cd)
	{
		case "001":
			v_Msg= "버튼이 정의 되어 있지않습니다.";
			break;
		case "002":
			v_Msg="서비스 오류:시스템 관리자에게 문의하십시오.";
			break;
		case "003":
			v_Msg="조회된 데이타가 없습니다.";
			break;														
		case "004":
			v_Msg="변경된 데이타가 있습니다.\n\n저장하시겠습니까?";
			break;
		case "005":
			v_Msg="데이타를 입력중입니다.";
			break;
		case "006":
			v_Msg="데이타를 입력중입니다.\n\n저장하신후 탭을 옮기세요.";
			break;
		case "007":
			v_Msg="비어 있는 데이타를 먼저 입력하세요.";
			break;
		case "008":
			v_Msg="레시피분류를 먼저 선택하세요.";
			break;	
		case "009":
			v_Msg="레시피명을 입력하세요.";
			break;	
		case "010":
			v_Msg="표준레시피에 등록된 레시피명입니다.";
			break;	
		case "011":
			v_Msg="등록가능합니다.";
			break;
		case "012":
			v_Msg="이미 등록된 자재입니다.";
			break;
		case "013":
			v_Msg="자재를 입력하셔야 합니다.";
			break;																	
		case "014":
			v_Msg="조리법을 입력하셔야 합니다.";
			break;
		case "015":
			v_Msg="자재코드는 필수 입력입니다.";
			break;
		case "016":
			v_Msg="조리법이 비어있는 라인이 있습니다.비어있는 라인을 입력하세요.";
			break;			
		case "017":
			v_Msg="이미지 파일이 없거나 파일 삭제에 실패 하였습니다.";
			break;
		case "018":
			v_Msg="파일 업로드에 실패 하였습니다.";
			break;
		case "019":
			v_Msg="다른곳에서 사용중인 레시피입니다.\n\n삭제 할 수 없습니다.";
			break;
		case "020":
			v_Msg="반려 하시겠습니까?";
			break;
		case "021":
			v_Msg="미확정 레시피에서는 삭제 할 수 없습니다.\n\n반려를 이용하세요.";
			break;
		case "022":
			v_Msg="표준 레시피에서 사용가능한 버튼이 아닙니다.";
			break;
		case "023":
			v_Msg="표준 레시피로 전환할 레코드를 선택하세요.";
			break;
		case "024":
			v_Msg="반려시 반려사유를 입력하셔야 합니다.";
			break;
		case "025":
			v_Msg="신규 입력중인 데이타 입니다.\n\n표준레시피 확정대상이 아닙니다.";
			break;
		case "026":
			v_Msg="변경된 데이타가 있습니다.\n\n저장후 표준레시피로 확정하세요.";
			break;			
		case "027":
			v_Msg="표준레시피로 레시피이미지 전송이 실패하였습니다.";
			break;
		case "028":
			v_Msg="등록된 이미지가 없습니다.";
			break;
		case "029":
			v_Msg="선택하신 데이터를 삭제하시겠습니까?";
			break;
		case "030":
			v_Msg="레시피명을 입력하세요.";
			break;
		case "031":
			v_Msg="레시피코드가 없습니다.\n\n시스템관리자에게 문의하십시오.";
			break;
		case "032":
			v_Msg="레시피분류를 입력하세요.";
			break;
		case "033":
			v_Msg="레시피유형을 입력하세요.";
			break;
		case "034":
			v_Msg="조리법유형을 입력하세요.";
			break;
		case "035":
			v_Msg="주재료군을 입력하세요.";
			break;
		case "036":
			v_Msg="모양을 입력하세요.";
			break;
		case "037":
			v_Msg="맛을 입력하세요.";
			break;
		case "038":
			v_Msg="색을 입력하세요.";
			break;
		case "039":
			v_Msg="제공온도를 선택하세요.";
			break;
		case "040":
			v_Msg="중심온도 체크를 선택하세요.";
			break;
		case "042":
			v_Msg="자재를 입력하세요.";
			break;
		case "043":
			v_Msg="자재코드를 입력하세요.";
			break;
		case "044":
			v_Msg="레시피 분류를 먼저 입력하신후 검색하세요.";
			break;
		case "045":
			v_Msg="미확정 레시피에서 사용할 수 없습니다.";
			break;
		case "046":
			v_Msg="복사할 표준레시피를 선택하세요.";
			break;
		case "047":
			v_Msg="변경된 데이타가 있습니다.\n\n저장후 진행하세요.";
			break;
		case "048":
			v_Msg="표준레시피로 확정하시겠습니까?\n\n표준레시피 확정전 필수 입력값을 확인하세요.\n\n데이터가 없으면 표준레시피로 확정되지 않습니다.";
			break;
		case "049":
			v_Msg="복사가 완료되었습니다.";
			break;
		case "050":
			v_Msg="저장된 이미지를 삭제하시겠습니까?";
			break;			
		default:
			break;			
	}
	return v_Msg;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : rdo_RecipeGbn_OnChanged(obj:Radio, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 레시피구분 변경 처리 (표준레시피/미확정레시피)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function rdo_RecipeGbn_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	if(fn_Update_Chk())
	{
		// 취소시 이전 구분값으로 전환
		rdo_RecipeGbn.index = e.preindex;
		return true;
	}

	ds_CookClass.filter("");  
	switch(e.postindex)
	{
		// 표준레시피
		case 0:
			grd_List.Binddataset="";
			ds_MainRecipeList.clearData();
			grd_List.formatid="StdRecipe";
			grd_List.Binddataset="ds_MainRecipeList";
			
			//콤보초기설정
			cbo_sRecipeNM.index = 0;
			cbo_sRecipeClass.index = 0;
			cbo_sRecipeType.index = 0;
			cbo_sCookClass.index = 0;
			cbo_sMaterial.index = 0;
			cbo_sElement.index = 0;
		    edt_upjang.setUpjangCode("");
            me_SaveFrom.value = "";
            me_SaveTo.value = "";
			
			// 사업장, 작성일 Disable
			edt_upjang.enable = false;
			me_SaveFrom.enable = false;
			me_SaveTo.enable = false;
			btn_SaveFrom.enable = false;
			btn_SaveTo.enable = false;

			ds_RecipeType.filter("");
			ds_RecipeClass.filter("");
			break;
		// 미확정레시피
		case 1:
			grd_List.Binddataset="";
			ds_MainRecipeList.clearData();
			grd_List.formatid="SubRecipe";
			grd_List.Binddataset="ds_MainRecipeList";
			
			//콤보초기설정
			cbo_sRecipeNM.index = 0;
			cbo_sRecipeClass.index = 0;
			cbo_sRecipeType.index = 0;
			cbo_sCookClass.index = 0;
			cbo_sMaterial.index = 0;
			cbo_sElement.index = 0;
			edt_upjang.setUpjangCode("");
            me_SaveFrom.value = "";
            me_SaveTo.value = "";
			
			// 사업장, 작성일 Enable
			edt_upjang.enable = true;
			me_SaveFrom.enable = true;
			me_SaveTo.enable = true;
			btn_SaveFrom.enable = true;
			btn_SaveTo.enable = true;
			
			ds_RecipeType.filter("SET1=='YN' || SET1=='N'"); 
			ds_RecipeClass.filter("gfn_length(gfn_trim(CD))==0 || CD !='H'");
			
			break;
        default :
            break;
	}
	
	fn_Reset(); // 디테일 데이타셋들 초기화	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Image0_OnClick(obj:ImageViewer, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 이미지 클릭시 확대보기
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Image0_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	pdiv_imgZoom.Image0.image=Image0.image;
	var nX = system.clientToScreenX(Image0,Image0.position.width); // Popup Button의 화면상의 X좌표 얻어오기
	var nY = system.clientToScreenY(Image0,0);	// Popup Button의 화면상의 Y좌표 얻어오기	
	
	pdiv_imgZoom.trackPopup(nX, nY);
}

function pdiv_imgZoom_Image0_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	pdiv_imgZoom.closePopup();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_SubAdd_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 조리법 추가
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_SubAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_addCooking();
}

function fn_addCooking()
{
	ds_CookMethodTemp1.copyData(ds_CookMethod);
	ds_CookMethodTemp1.filter("CUISINE_SEQ < 90");
	
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		g_Message("EE","HMR은 조회만 가능합니다.");
		return;
	}
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}		
	if(grd_List.formatid=="StdRecipe")
	{
		if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
		{
			return;
		}
		else
		{
			ds_CookMethod.addRow();
			ds_CookMethod.setColumn(ds_CookMethod.rowposition, "RECIPE_CD", ds_Recipe.getColumn(0,"RECIPE_CD"));
			ds_CookMethod.setColumn(ds_CookMethod.rowposition, "CUISINE_SEQ", ds_CookMethodTemp1.getMax("CUISINE_SEQ") + 1);
		}
	}
	else
	{
		if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
		{
			return;
		}
		ds_CookMethod.addRow();
		ds_CookMethod.setColumn(ds_CookMethod.rowposition,"NEW_RECIPE_SEQ",ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ"));
		//ds_CookMethod.setColumn(ds_CookMethod.getColumn(ds_CookMethod.getRowCount() - 2, "CUISINE_SEQ"), "CUISINE_SEQ");
	}
	
	ds_CookMethodTemp1.clear();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_SubDelete_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 조리법 삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_SubDelete_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		g_Message("EE","HMR은 조회만 가능합니다.");
		return;
	}	
	ds_CookMethod.deleteRow(ds_CookMethod.rowposition);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_RecipeElement_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피영양성분 조회 팝업
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_RecipeElement_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	
	var v_arg = new Array();
	
	if(grd_List.formatid=="StdRecipe") {
		v_arg = {IN_RECIPE_CD:ds_Recipe.getColumn(0,"RECIPE_CD"),gbn:"0"};
	} else {
		v_arg  = {IN_RECIPE_CD:ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ"),gbn:"1"};
	}
	
	gfn_dialog("", "U_FSR::FSR00012P.xfdl", v_arg);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_ratio_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피비율 일괄변경
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_ratio_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		g_Message("EE","HMR은 조회만 가능합니다.");
		return ;
	}	
	var v_NQ=0;
	if(Tab00.tabpage1.ed_ratio.visible==true)
	{
		//화면에서 가리고 반영하기
		Tab00.tabpage1.ed_ratio.visible=false;
		Tab00.tabpage1.st_Ratio.visible=false;
		if(gfn_length(gfn_trim(Tab00.tabpage1.ed_ratio.value))==0 || gfn_trim(Tab00.tabpage1.ed_ratio.value)==null )
		{
			return;
		}
		for(i=0; i<ds_ItemList.getRowCount(); i++)
		{
			v_NQ = Math.round((toNumber(ds_ItemList.getColumn(i,"NEED_QTY")) * toNumber(Tab00.tabpage1.ed_ratio.value)) / 100, 2);
			ds_ItemList.setColumn(i, "NEED_QTY", v_NQ);
		}
		Tab00.tabpage1.ed_ratio.value="";
	}
	else
	{
		Tab00.tabpage1.ed_ratio.visible=true;
		Tab00.tabpage1.st_Ratio.visible=true;
		Tab00.tabpage1.ed_ratio.setFocus();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_Date_OnClick(obj:Button, e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 달력호출
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function btn_Date_OnClick(obj:Button, e:ClickEventInfo)
{
	g_CalButton_OnClick(obj);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_grd_jajea_onmousemove(obj:Grid, e:GridMouseEventInfo)
 * 기ㅡㅡㅡ능 : 자재목록 규격 툴팁처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_grd_jajea_onmousemove(obj:Grid, e:GridMouseEventInfo)
{
	var strMsg = "";
	var v_Value;
	// 레시피구성
	if (e.cell == 5 && !gfn_isNull(ds_ItemList.getColumn(e.row, "ITEM_SIZE")))
	{
		strMsg = ds_ItemList.getColumn(e.row, "ITEM_SIZE");
	}
	Tab00.tabpage1.grd_jajea.tooltiptext = strMsg;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_sRecipeNM_ontextchanged(obj:Combo, e:TextChangedEventInfo)
 * 기ㅡㅡㅡ능 : 레시피명 컴포넌트 이벤트 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function cbo_sRecipeNM_ontextchanged(obj:Combo, e:TextChangedEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1";
}

function cbo_sRecipeNM_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
    var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
	objDs			= eval(obj.innerdataset);
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = objDs.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = objDs.addRow();
			objDs.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index = 0;
	}	
}

function cbo_sRecipeNM_onkeydown(obj:Combo, e:KeyEventInfo)
{
	if (e.keycode == 13 && obj.userchange == "1") {
		var strValue,nFRow,objDs,strDataColumn;
		
		strValue 		= obj.userdata;
		objDs			= eval(obj.innerdataset);
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = objDs.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = objDs.addRow();
				objDs.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		
		div_cmnBtn.btn_search.setFocus();
		fn_search();
		cbo_sRecipeNM.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}	
}

function cbo_sRecipeNM_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		div_cmnBtn.btn_search.setFocus();
		fn_search();		
		cbo_sRecipeNM.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : ds_ItemList_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
 * 기ㅡㅡㅡ능 : 자재목록 데이터 변경시 가식부량, 1인원가, 에너지 계산
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function ds_ItemList_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var v_EQ=0;	// EDIBLE_QTY		가식부량 1인소요량*폐기율==>NEED_QTY*(100-DISUSE_RATE)
	var v_PP=0; // PERSON_PRICE 	인원가	자재g당단가*1인소요량==>GRAM_PRICE*NEED_QTY
	var v_CC=0; // CAL_CALC			에너지    100g:기본에너지=가식부량:계산할에너지==>CAL_CALC=(CAL*EDIBLE_QTY)/100

	switch(e.columnid)
	{
		case "EDIBLE_QTY":
			v_CC=Math.round((ds_ItemList.getColumn(e.row,"CAL")*ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"DISUSE_RATE"))/100))/100,2);
			ds_ItemList.setColumn(e.row,"CAL_CALC",v_CC);			
			break;
		case "NEED_QTY":	// 1인소요량
			v_PP=Math.round(ds_ItemList.getColumn(e.row,"GRAM_PRICE")*ds_ItemList.getColumn(e.row,"NEED_QTY"),0);
			ds_ItemList.setColumn(e.row,"PERSON_PRICE",v_PP);
			
			v_EQ=Math.round(ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"DISUSE_RATE"))/100),2);
			ds_ItemList.setColumn(e.row,"EDIBLE_QTY",v_EQ);			
			//EDIBLE_QTY변경시
			v_CC=Math.round((ds_ItemList.getColumn(e.row,"CAL")*ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"DISUSE_RATE"))/100))/100,2);
			ds_ItemList.setColumn(e.row,"CAL_CALC",v_CC);			
			break;
			break;	
        default :
            break;
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_sRecipeClass_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 레시피분류 변경시 레시피유형 필터링
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function cbo_sRecipeClass_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	switch(gfn_trim(e.postvalue))
	{
		case "H":
			ds_RecipeType.filter("SET1=='YN' || SET1=='Y'");
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 7, "text", "1회소요량\n(g)");
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 9, "text", "1인원가\n(원)");
			break;
		case "N":
			ds_RecipeType.filter("SET1=='YN' || SET1=='Y'");
			//장례식장은 몇칭 변경 20190521 김호석(FS R&D팀 박현정  요청)
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 7, "text", "1회제공량\n(g)");
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 9, "text", "1회원가\n(원)");
			break;
		case "":
			ds_RecipeType.filter("");
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 7, "text", "1회소요량\n(g)");
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 9, "text", "1인원가\n(원)");			
			break;
		default:
			ds_RecipeType.filter("SET1=='YN' || SET1=='N'");
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 7, "text", "1회소요량\n(g)");
			var bSucc = Tab00.tabpage1.grd_jajea.setCellProperty( "Head", 9, "text", "1인원가\n(원)");			
			break;
	}
	
	
	cbo_sRecipeType.index = 0;	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_sRecipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 조회조건 레시피유형 변경시 조리법유형 필터링
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function cbo_sRecipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(e.postindex==0)
	{
		ds_CookClass.filter("");
	}
	else
	{
		ds_CookClass.filter("gfn_length(SET1)==0 || SET1=='"+e.postvalue+"'");
	}
	cbo_sCookClass.index = 0;
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_sRecipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 레시피유형 변경시 조리법유형 필터링
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function cbo_RecipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	var strCode2=ds_Recipe.getColumn(0, "RECIPE_TYPE");
	switch(gfn_trim(strCode2))
	{
		case "":
			ds_CCLASS.filter("");
			break;
		default:
			ds_CCLASS.filter("gfn_nvl(SET1)=='' || SET1=='"+strCode2+"'");
			break;
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_ed_ratio_onkeydown(obj:Edit, e:KeyEventInfo)
 * 기ㅡㅡㅡ능 : 레시피비율 일괄조정값 입력 후 엔터시 조정처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_ed_ratio_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13)
	{
		Tab00.tabpage1.btn_ratio.click();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : ed_RecipeNM_onkeydown(obj:Edit, e:KeyEventInfo)
 * 기ㅡㅡㅡ능 : 레시피명 변경시 중복체크 여부를 N으로 세팅
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function ed_RecipeNM_onkeydown(obj:Edit, e:KeyEventInfo)
{
	DupCheck = "N";
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_color(nRow)
 * 기ㅡㅡㅡ능 : 자재명에 칼라 적용
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_color(nRow)
{
	// 불용자재
	if(ds_ItemList.getColumn(nRow, "MTG_UNS") == 'UK' || ds_ItemList.getColumn(nRow, "MTG_STP") == 'TK')
	{
		return "#FFAA9C";
	}

	// 금지 자재
	var sMenuDate = gfn_trim(ds_ItemList.getColumn(nRow, "TODAY"));
	if( sMenuDate >= ds_ItemList.getColumn(nRow,"RESTRICT_START") &&
		sMenuDate <= ds_ItemList.getColumn(nRow,"RESTRICT_END") )
	{
		if(sMenuDate >= ds_ItemList.getColumn(nRow,"CNL_START") &&
		   sMenuDate <= ds_ItemList.getColumn(nRow,"CNL_END") )
		{
			return "default";
		}
		else
		{
			return "khaki";
		}
	}
	return "default";
}


function Tab00_tabpage2_btn_Exct_onclick(obj:Button,  e:ClickEventInfo)
{
	
	ds_CookMethodTemp2.copyData(ds_CookMethod);
	ds_CookMethodTemp2.filter("CUISINE_SEQ > 89");
	
	var nRowCnt = ds_CookMethodTemp2.rowcount;
	
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		g_Message("EE","HMR은 조회만 가능합니다.");
		return;
	}
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}		
	if(grd_List.formatid=="StdRecipe")
	{
		if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
		{
			return;
		}
		else
		{
			if(nRowCnt > 0)
			{
				ds_CookMethod.addRow();
				ds_CookMethod.setColumn(ds_CookMethod.rowposition, "RECIPE_CD", ds_Recipe.getColumn(0,"RECIPE_CD"));
				ds_CookMethod.setColumn(ds_CookMethod.rowposition, "CUISINE_SEQ", ds_CookMethodTemp2.getMax("CUISINE_SEQ") + 1);
			}
			else
			{
				ds_CookMethod.addRow();
				ds_CookMethod.setColumn(ds_CookMethod.rowposition, "RECIPE_CD", ds_Recipe.getColumn(0,"RECIPE_CD"));
				ds_CookMethod.setColumn(ds_CookMethod.rowposition, "CUISINE_SEQ", 90);
			}
		}
	}
	else
	{
		if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
		{
			return;
		}
		ds_CookMethod.addRow();
		ds_CookMethod.setColumn(ds_CookMethod.rowposition,"NEW_RECIPE_SEQ",ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ"));
		//ds_CookMethod.setColumn(ds_CookMethod.getColumn(ds_CookMethod.getRowCount() - 2, "CUISINE_SEQ"), "CUISINE_SEQ");
	}
	
	ds_CookMethodTemp2.clear();
}
]]></Script>
  </Form>
</FDL>
