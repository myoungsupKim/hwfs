<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSM00100E" onkeydown="frm_OnKeyDown" onload="form_onload" titletext="식단복사" position="absolute 0 0 1140 716" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 14 474 1125 501"/>
        <Static id="Static17" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 14 284 1125 297"/>
        <Static id="Static16" position="absolute 47 1135 998 1308" class="sta_WFDA_Label01"/>
        <Static id="Static15" position="absolute 49 1137 996 1306" class="sta_WFDA_Labelbg"/>
        <Static id="Static4" position="absolute 55 1143 567 1171" class="sta_WFDA_Label01"/>
        <Static id="Static04" position="absolute 120 1145 564 1169" class="sta_WFDA_Labelbg"/>
        <Grid autoenter="select" binddataset="ds_Master" cellmovingtype="col" cellsizingtype="col" readonly="false" enable="true" id="grd_Master" useinputpanel="false" oncellclick="grd_Master_OnCellClick" oncelldblclick="grd_Master_OnCellDblClick" taborder="4" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 14 120 1125 284" selecttype="row" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="490"/>
                <Column size="80"/>
                <Column size="70"/>
                <Column size="0"/>
                <Column size="70"/>
                <Column size="55"/>
                <Column size="45"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" edittype="normal" text="선택"/>
                <Cell col="2" displaytype="text" text="구성"/>
                <Cell col="3" displaytype="text" text="제공일"/>
                <Cell col="4" displaytype="text" text="과거원가"/>
                <Cell col="5"/>
                <Cell col="6" displaytype="text" text="현재원가"/>
                <Cell col="7" displaytype="text" text="날씨"/>
                <Cell col="8" displaytype="text" text="끼니"/>
                <Cell col="9" displaytype="text" text="코너"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="expr:setEditExpr(iif(CHK=='0','checkbox','none'))" editfilter="expr:setfilterExpr(iif(CHK=='0','checkbox','none'))" style="align:center;background:white;background2:white;" text="bind:CHK"/>
                <Cell col="2" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_INFO"/>
                <Cell col="3" displaytype="date" style="align:center;background:white;background2:white;" text="bind:MENU_DATE"/>
                <Cell col="4" displaytype="number" style="align:right;background:white;background2:white;" text="bind:PAST_PRICE"/>
                <Cell col="5" style="align:left;background:white;background2:white;"/>
                <Cell col="6" displaytype="number" style="align:right;background:white;background2:white;" text="bind:CUR_PRICE"/>
                <Cell col="7" displaytype="text" style="align:left;background:white;background2:white;" text="bind:WDESC"/>
                <Cell col="8" displaytype="text" style="align:center;background:white;background2:white;" text="bind:MEAL_NAME"/>
                <Cell col="9" displaytype="text" style="align:left;background:white;background2:white;" text="bind:CORNER_NAME"/>
              </Band>
            </Format>
            <Format id="Default0">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="70"/>
                <Column size="652"/>
                <Column size="101"/>
                <Column size="30"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="선택"/>
                <Cell col="2" displaytype="text" text="표준원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="식단명"/>
                <Cell col="5" displaytype="text" text="사진"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="checkbox" style="align:center;background:white;background2:white;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" style="align:right;background:white;background2:white;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="text" style="align:left;background:white;background2:white;" text="bind:MENU_NAME"/>
                <Cell col="5" displaytype="expr:iif(gfn_length(SPHOTO_PATH_1)+gfn_length(SPHOTO_PATH_2)&gt; 0,'normal','normal')" style="align:left;background:white;background2:white;cursor:expr:iif(length(SPHOTO_PATH_1) +length(SPHOTO_PATH_2) &gt; 0,'hand','arrow');backgroundimage:EXPR(iif(gfn_length(SPHOTO_PATH_1)+gfn_length(SPHOTO_PATH_2)&gt; 0,'theme://Images/new/grd_WF_ExpandImage.png',''));"/>
              </Band>
            </Format>
            <Format id="Default1">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="70"/>
                <Column size="610"/>
                <Column size="85"/>
                <Column size="0"/>
                <Column size="45"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="선택"/>
                <Cell col="2" displaytype="text" text="표준원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="날짜"/>
                <Cell col="5" displaytype="text"/>
                <Cell col="6" displaytype="text" text="끼니"/>
                <Cell col="7" displaytype="text" text="코너"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="checkbox" style="align:center;background:white;background2:white;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" edittype="none" style="align:right;background:white;background2:white;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="date" style="align:center;background:white;background2:white;" text="bind:MENU_DATE"/>
                <Cell col="5" displaytype="text" style="align:left;background:white;background2:white;" text="bind:HALL_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;background:white;background2:white;" text="bind:MEAL_NAME"/>
                <Cell col="7" displaytype="text" style="align:left;background:white;background2:white;" text="bind:CORNER_NAME"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static12" text="복사대상" position="absolute 21 1135 43 1308" wordwrap="both" class="sta_WFDA_Label01"/>
        <Static id="Static13" text="사업장" position="absolute 14 474 77 501" class="sta_WFDA_Label01"/>
        <Edit enable="false" id="ed_UPJANG_NM" readonly="true" taborder="6" position="absolute 79 477 269 498" class="edt_WF_Essential"/>
        <Static id="Static14" text="식당" position="absolute 271 474 334 501" class="sta_WFDA_Label01"/>
        <Edit enable="false" id="ed_HALL_NAME" readonly="true" taborder="7" position="absolute 336 477 562 498" class="edt_WF_Essential"/>
        <Div id="div_1" taborder="2" text="Div0" position="absolute 15 40 1125 108" scrollbars="none">
          <Layouts>
            <Layout>
              <Static id="Static29" class="sta_WFSA_Labelbg" position="absolute 0 0 1110 67" anchor="left top right"/>
              <Static id="Static5" text="사업장" position="absolute 15 12 83 33" class="sta_WFSA_label" anchor="default"/>
              <Edit id="ed_UPJANG_NM" onkeydown="ed_pop_OnKeyDown" readonly="true" taborder="1" userdata="div_1.btn_pop1" position="absolute 82 10 182 31" anchor="default" class="edt_WF_Essential"/>
              <Button id="btn_pop1" onclick="btn_pop1_OnClick" taborder="13" userdata="MAC_UPJANG_V_S001" position="absolute 181 10 203 31" class="btn_WF_popSearch" text="" image="" anchor="default"/>
              <Static id="Static0" text="식당" position="absolute 233 12 278 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="HALL_CD" datacolumn="HALL_NAME" id="cbo_HALL_CD" index="0" innerdataset="ds_HALL_CD" taborder="2" position="absolute 313 10 431 31" anchor="default" class="cmb_WF_Essential"/>
              <Static id="Static2" text="끼니" position="absolute 461 12 529 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MEAL" index="0" innerdataset="ds_MEAL1" taborder="3" position="absolute 528 10 611 31" anchor="default"/>
              <Static id="Static6" text="코너" position="absolute 641 12 680 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_CORNER" index="0" innerdataset="ds_CORNER1" taborder="4" position="absolute 709 10 784 31" anchor="default"/>
              <Static id="Static8" text="기간" position="absolute 814 12 882 33" class="sta_WFSA_label" anchor="default"/>
              <Static id="Static7" text="~" position="absolute 984 13 992 29" anchor="default"/>
              <Static id="Static3" text="식단원가" position="absolute 814 38 882 59" class="sta_WFSA_label" anchor="default"/>
              <MaskEdit id="med_F_MENU_COST" taborder="11" value="MaskEdit0" position="absolute 882 36 982 57" anchor="default"/>
              <Static id="Static4" text="~" position="absolute 984 36 993 58" anchor="default"/>
              <MaskEdit id="med_T_MENU_COST" taborder="12" value="MaskEdit0" position="absolute 995 36 1095 57" anchor="default"/>
              <Static id="Static1" text="레시피명" position="absolute 15 38 83 59" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="RECIPE_NAME" datacolumn="RECIPE_NAME" id="cbo_RECIPE" index="0" innerdataset="ds_RECIPE_List" type="filter" taborder="7" position="absolute 82 36 203 57" anchor="default" onitemchanged="div_1_cbo_RECIPE_onitemchanged" onkeydown="div_1_cbo_RECIPE_onkeydown" onkillfocus="div_1_cbo_RECIPE_onkillfocus" ontextchanged="div_1_cbo_RECIPE_ontextchanged" userdata="" userchange="0" imemode="hangul,full"/>
              <Edit id="ed_SCHEDULE" taborder="8" position="absolute 313 36 431 57" anchor="default"/>
              <Static id="Static9" text="고객사일정" position="absolute 233 38 306 59" class="sta_WFSA_label" anchor="default"/>
              <Static id="Static10" text="식단특성" position="absolute 461 38 529 59" class="sta_WFSA_label" anchor="default"/>
              <Edit id="ed_MENU_FEATURE" taborder="9" position="absolute 528 36 611 57" anchor="default"/>
              <Static id="Static11" text="상위건수" position="absolute 641 38 709 59" class="sta_WFSA_label" anchor="default"/>
              <MaskEdit id="med_Topcnt" taborder="10" position="absolute 709 36 784 57" anchor="default"/>
              <Static id="Static18" text="W30" visible="false" position="absolute 611 10 641 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static15" text="W30" visible="false" position="absolute 431 10 461 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static35" text="W30" visible="false" position="absolute 203 10 233 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static72" text="W15" visible="false" position="absolute 0 -1 15 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static43" text="W10" visible="false" position="absolute 0 0 1052 10" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static51" text="W05." visible="false" position="absolute 0 31 1052 36" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static44" text="W10" visible="false" position="absolute 0 57 1052 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static83" text="W10" visible="false" position="absolute 72 1 82 72" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static12" text="W10" visible="false" position="absolute 303 1 313 72" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static13" text="W10" visible="false" position="absolute 518 1 528 72" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static14" text="W10" visible="false" position="absolute 699 -2 709 69" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static16" text="W30" visible="false" position="absolute 784 10 814 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static17" text="W10" visible="false" position="absolute 872 -2 882 69" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static19" text="W15" visible="false" position="absolute 1095 -1 1110 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <ObjCalendar id="me_MENU_F_DATE" anchor="left top" titletext="캘린더" taborder="14" scrollbars="none" position="absolute 882 10 981 31"/>
              <ObjCalendar id="me_MENU_T_DATE" anchor="left top" titletext="캘린더" taborder="15" scrollbars="none" position="absolute 996 10 1095 31"/>
            </Layout>
          </Layouts>
        </Div>
        <Grid autoenter="select" binddataset="ds_Detail" cellmovingtype="col" cellsizingtype="col" readonly="false" enable="true" id="grd_Detail" useinputpanel="false" onheadclick="grd_list_OnHeadClick" taborder="5" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 14 297 1125 441" selecttype="row" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30"/>
                <Column size="78"/>
                <Column size="124"/>
                <Column size="80"/>
                <Column size="148"/>
                <Column size="80"/>
                <Column size="110"/>
                <Column size="39"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="레시피코드" wordwrap="word"/>
                <Cell col="2" displaytype="text" text="레시피명"/>
                <Cell col="3" displaytype="text" text="자재코드" wordwrap="word"/>
                <Cell col="4" displaytype="text" text="자재명" wordwrap="word"/>
                <Cell col="5" displaytype="text" text="자재 특성" wordwrap="word"/>
                <Cell col="6" displaytype="text" text="규격" wordwrap="word"/>
                <Cell col="7" displaytype="text" text="단위"/>
                <Cell col="8" displaytype="text" text="1인량 (g)" wordwrap="word"/>
                <Cell col="9" displaytype="text" text="과거원가" wordwrap="word"/>
                <Cell col="10" displaytype="text" text="현재원가"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="text" style="align:center;background:white;background2:white;" text="bind:RECIPE_CD" suppress="2"/>
                <Cell col="2" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_NAME" suppress="3"/>
                <Cell col="3" displaytype="text" style="align:left;background:white;background2:white;" text="bind:ITEM_CODE"/>
                <Cell col="4" displaytype="text" style="align:left;background:white;background2:white;" text="bind:ITEM_NAME"/>
                <Cell col="5" displaytype="text" style="align:left;background:white;background2:white;" text="bind:FEATURE_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;background:white;background2:white;" text="bind:ITEM_SIZE"/>
                <Cell col="7" displaytype="text" style="align:center;background:white;background2:white;" text="bind:PO_UOM"/>
                <Cell col="8" displaytype="number" style="align:right;background:white;background2:white;" text="bind:NEED_QTY"/>
                <Cell col="9" displaytype="number" style="align:right;background:white;background2:white;" text="bind:PAST_PRICE"/>
                <Cell col="10" displaytype="number" style="align:right;background:white;background2:white;" text="bind:CUR_PRICE"/>
              </Band>
            </Format>
            <Format id="Default0">
              <Columns>
                <Column size="30"/>
                <Column size="78"/>
                <Column size="158"/>
                <Column size="87"/>
                <Column size="165"/>
                <Column size="85"/>
                <Column size="117"/>
                <Column size="39"/>
                <Column size="80"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="레시피코드" wordwrap="word"/>
                <Cell col="2" displaytype="text" text="레시피명"/>
                <Cell col="3" displaytype="text" text="자재코드" wordwrap="word"/>
                <Cell col="4" displaytype="text" text="자재명" wordwrap="word"/>
                <Cell col="5" displaytype="text" text="자재 특성" wordwrap="word"/>
                <Cell col="6" displaytype="text" text="규격" wordwrap="word"/>
                <Cell col="7" displaytype="text" text="단위"/>
                <Cell col="8" displaytype="text" text="1인량 (g)" wordwrap="word"/>
                <Cell col="9" displaytype="text" text="표준원가" wordwrap="word"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="text" style="align:center;background:white;background2:white;" text="bind:RECIPE_CD" suppress="2"/>
                <Cell col="2" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_NAME" suppress="3"/>
                <Cell col="3" displaytype="text" style="align:center;background:white;background2:white;" text="bind:ITEM_CODE"/>
                <Cell col="4" displaytype="text" style="align:left;background:white;background2:white;" text="bind:ITEM_NAME"/>
                <Cell col="5" displaytype="text" style="align:left;background:white;background2:white;" text="bind:FEATURE_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;background:white;background2:white;" text="bind:ITEM_SIZE"/>
                <Cell col="7" displaytype="text" style="align:center;background:white;background2:white;" text="bind:PO_UOM"/>
                <Cell col="8" displaytype="number" style="align:right;background:white;background2:white;" text="bind:NEED_QTY"/>
                <Cell col="9" displaytype="number" style="align:right;background:white;background2:white;" text="bind:UNIT_COST"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_Copy" onclick="fn_save" taborder="9" text="복사" position="absolute 1060 477 1111 498" class="btn_WF_Custom" image=""/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="code_name" id="rdo_CType" index="0" innerdataset="ds_CType" onitemchanged="rdo_SType_OnChanged" taborder="8" position="absolute 873 479 1052 500"/>
        <Div id="div_2" taborder="3" text="Div0" visible="false" position="absolute 1150 40 2260 108" scrollbars="none">
          <Layouts>
            <Layout>
              <Static id="Static29" class="sta_WFSA_Labelbg" position="absolute 0 0 1110 67" anchor="left top right"/>
              <Static id="Static43" text="W10" visible="false" position="absolute 15 0 1095 10" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static45" text="W15" visible="false" position="absolute 0 0 15 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static51" text="W05." visible="false" position="absolute 15 31 1095 36" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static50" text="W10" visible="false" position="absolute 87 36 97 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static5" text="구분" position="absolute 15 12 83 33" class="sta_WFSA_label" anchor="default"/>
              <Static id="Static0" text="분류" position="absolute 217 12 285 33" class="sta_WFSA_label" anchor="default"/>
              <Static id="Static2" text="끼니" position="absolute 15 37 83 58" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_MEAL" index="0" innerdataset="ds_MEAL2" taborder="7" position="absolute 56 36 187 57" anchor="default" class="cmb_WF_Essential"/>
              <Static id="Static6" text="코너" position="absolute 217 37 285 58" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_CORNER" index="0" innerdataset="ds_CORNER2" taborder="8" position="absolute 258 36 388 57" anchor="default" class="cmb_WF_Essential"/>
              <Static id="Static8" text="기간" position="absolute 813 12 858 33" class="sta_WFSA_label" anchor="default"/>
              <Static id="Static7" text="~" position="absolute 984 14 992 30" anchor="default"/>
              <Static id="Static3" text="식단원가" position="absolute 813 37 881 58" class="sta_WFSA_label" anchor="default"/>
              <MaskEdit id="med_F_MENU_COST" taborder="11" value="MaskEdit0" position="absolute 882 36 981 57" anchor="default"/>
              <Static id="Static4" text="~" position="absolute 984 36 993 58" anchor="default"/>
              <MaskEdit id="med_T_MENU_COST" taborder="12" value="MaskEdit0" position="absolute 996 36 1095 57" anchor="default"/>
              <Static id="Static1" text="레시피명" position="absolute 418 37 486 58" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="RECIPE_NAME" datacolumn="RECIPE_NAME" id="cbo_RECIPE" index="0" innerdataset="ds_RECIPE_List" type="filter" taborder="9" position="absolute 485 36 595 57" anchor="default" onitemchanged="div_2_cbo_RECIPE_onitemchanged" onkeydown="div_2_cbo_RECIPE_onkeydown" onkillfocus="div_2_cbo_RECIPE_onkillfocus" ontextchanged="div_2_cbo_RECIPE_ontextchanged" userdata="" userchange="0" imemode="hangul,full"/>
              <Edit id="ed_MENU_NAME" taborder="10" position="absolute 692 36 783 57" anchor="default"/>
              <Static id="Static9" text="식단명" position="absolute 625 37 693 58" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_MENU_TYPE" index="0" innerdataset="ds_MENU_TYPE" taborder="4" position="absolute 692 10 783 31" anchor="default" class="cmb_WF_Essential"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_COST_TYPE" index="0" innerdataset="ds_COST_TYPE" taborder="3" position="absolute 485 10 595 31" anchor="default" class="cmb_WF_Essential"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MENU_CLASS" index="0" innerdataset="@ds_MENU_CLASS" taborder="2" position="absolute 258 10 388 31" anchor="default" class="cmb_WF_Essential"/>
              <Combo codecolumn="CODE" datacolumn="code_name" id="cbo_SType2" index="0" innerdataset="ds_SType2" onitemchanged="div_2_cbo_SType2_OnChanged" taborder="1" position="absolute 56 10 187 31" anchor="default" class="cmb_WF_Essential"/>
              <Static id="Static10" text="원가유형" position="absolute 418 12 486 33" class="sta_WFSA_label" onclick="div_2_Static10_onclick" anchor="default"/>
              <Static id="Static11" text="식단유형" position="absolute 625 12 693 33" class="sta_WFSA_label" anchor="default"/>
              <Static id="Static44" text="W10" visible="false" position="absolute 15 57 1095 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static34" text="W10" visible="false" position="absolute 46 10 56 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static12" text="W10" visible="false" position="absolute 46 36 56 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static35" text="W30" visible="false" position="absolute 187 10 217 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static13" text="W10" visible="false" position="absolute 248 10 258 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static14" text="W10" visible="false" position="absolute 248 36 258 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static15" text="W30" visible="false" position="absolute 388 10 418 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static16" text="W10" visible="false" position="absolute 475 10 485 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static17" text="W10" visible="false" position="absolute 475 36 485 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static18" text="W30" visible="false" position="absolute 595 10 625 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static19" text="W10" visible="false" position="absolute 682 10 692 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static20" text="W10" visible="false" position="absolute 682 36 692 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static21" text="W30" visible="false" position="absolute 783 10 813 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static22" text="W10" visible="false" position="absolute 872 36 882 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static23" text="W10" visible="false" position="absolute 872 10 882 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static24" text="W15" visible="false" position="absolute 1095 0 1110 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <ObjCalendar id="me_MENU_F_DATE" anchor="left top" titletext="캘린더" taborder="13" scrollbars="none" position="absolute 882 10 981 31"/>
              <ObjCalendar id="me_MENU_T_DATE" anchor="left top" titletext="캘린더" taborder="14" scrollbars="none" position="absolute 996 10 1095 31"/>
            </Layout>
          </Layouts>
        </Div>
        <ImageViewer id="Image0" image="" taborder="25" position="absolute 57 1145 65 1165" class="img_WF_essential" text=""/>
        <ImageViewer id="Image1" image="" taborder="26" position="absolute 271 1145 279 1165" class="img_WF_essential" text=""/>
        <Tab id="Tab_list" onchanged="Tab_list_OnChanged" canchange="Tab_list_OnChanging" taborder="10" position="absolute 14 511 1125 706" showextrabutton="false">
          <Tabpages>
            <Tabpage id="tab1" taborder="1" text="개별복사" position="absolute 2 24 935 121" scrollbars="none">
              <Layouts>
                <Layout width="1109" height="95">
                  <Grid autoenter="select" binddataset="ds_list" cellsizingtype="col" readonly="false" enable="true" id="grd_Save" useinputpanel="false" oncellclick="Tab_list_tab1_grd_Save_OnCellClick" onexpanddown="Tab_list_tab1_grd_Save_OnExpandEdit" onheadclick="grd_list_OnHeadClick" taborder="2" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 11 10 1099 157" selecttype="cell" autofittype="col" ondropdown="Tab_list_tab1_grd_Save_ondropdown" oncloseup="Tab_list_tab1_grd_Save_oncloseup">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="95"/>
                          <Column size="94"/>
                          <Column size="117"/>
                          <Column size="528"/>
                          <Column size="39"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="text" class="head_Excel"/>
                          <Cell col="1" displaytype="text" text="제공일" wordwrap="word"/>
                          <Cell col="2" displaytype="text" text="끼니"/>
                          <Cell col="3" displaytype="text" text="코너" wordwrap="word"/>
                          <Cell col="4" displaytype="text" text="구성" wordwrap="word"/>
                          <Cell col="5" displaytype="text" text="삭제"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="normal" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                          <Cell col="1" displaytype="text" edittype="mask" style="align:center;background:white;background2:white;" text="bind:MENU_DATE" mask="####-##-##" editautoselect="true" expandshow="show" expandsize="20"/>
                          <Cell col="2" displaytype="combo" edittype="combo" style="align:left;background:white;background2:white;" text="bind:MEAL" combodataset="ds_MEAL3" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="align:left;background:white;background2:white;" text="bind:CORNER" combodataset="ds_CORNER3" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="4" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_INFO"/>
                          <Cell col="5" displaytype="image" style="align:center middle;background:white;background2:white;" text="theme://images/new/grd_WF_ExpandImageX.png"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab2" taborder="5" text="기간복사" position="absolute 2 24 935 121" scrollbars="none">
              <Layouts>
                <Layout width="1109" height="99">
                  <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 11 10 1099 37"/>
                  <Static id="Static2" text="끼니" position="absolute 11 10 111 37" class="sta_WFDA_Label01"/>
                  <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MEAL" index="0" innerdataset="@ds_MEAL3" taborder="1" position="absolute 113 13 232 34" class="cmb_WF_Essential" onitemchanged="Tab_list_tab2_cbo_MEAL_onitemchanged"/>
                  <Static id="Static6" text="코너" position="absolute 234 10 334 37" class="sta_WFDA_Label01"/>
                  <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_CORNER" index="0" innerdataset="@ds_CORNER3" onsetfocus="Tab_list_tab2_cbo_CORNER_OnFocus" taborder="3" position="absolute 336 13 463 34" class="cmb_WF_Essential"/>
                  <Static id="Static8" text="기간" position="absolute 465 10 565 37" class="sta_WFDA_Label01"/>
                  <MaskEdit id="me_MENU_F_DATE" mask="####-##-##" onchar="Tab_list_tab2_me_MENU_F_DATE_OnChar" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="10" type="string" userdata="Tab_list.tab2.btn_MENU_F_DATE" position="absolute 567 13 646 34" class="msk_WF_Essential"/>
                  <Button id="btn_MENU_F_DATE" onclick="Tab_list_tab2_btn_MENU_F_DATE_OnClick" taborder="11" userdata="Tab_list.tab2.me_MENU_F_DATE" position="absolute 645 13 667 34" class="btn_WF_calEssential" text="" image=""/>
                  <Static id="Static7" text="~" position="absolute 670 16 678 32"/>
                  <MaskEdit id="me_MENU_T_DATE" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="12" type="string" userdata="Tab_list.tab2.btn_MENU_T_DATE" position="absolute 682 13 761 34" class="msk_WF_Essential"/>
                  <Button id="btn_MENU_T_DATE" onclick="Tab_list_tab2_btn_MENU_F_DATE_OnClick" taborder="17" userdata="Tab_list.tab2.me_MENU_T_DATE" position="absolute 760 13 782 34" class="btn_WF_calEssential" text="" image=""/>
                  <Static id="Static41" text="기간복사시에는 반드시 복사원본에서 끼니, 코너를 선택해주십시오." class="sta_WF_DiscPoint" position="absolute 11 45 598 60" anchor="top right"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <MaskEdit enable="false" id="me_priod" mask="[ ####-##-## ~ ####-##-## ]" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="28" type="string" position="absolute 564 477 733 498"/>
        <Static id="Static01" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 1125 10"/>
        <Static id="Static02" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 676"/>
        <Static id="Static03" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1125 0 1140 700"/>
        <Static id="Static05" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 15 441 1125 456"/>
        <Button id="btn_search" taborder="29" text="조회" onclick="fn_search" class="btn_WF_searchCm" position2="absolute r:61 w:59 t:10 h:25" positiontype="position2"/>
        <Button id="btn_close" taborder="30" text="닫기" onclick="fn_Close" class="btn_WF_CRUD" position2="absolute r:15 w:45 t:10 h:25" positiontype="position2"/>
        <Static id="Static22" text="복사원본" class="sta_WF_Title01" position="absolute 15 23 95 40"/>
        <Static id="Static11" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 14 107 1125 120"/>
        <Static id="Static18" text="복사대상" class="sta_WF_Title01" position="absolute 15 456 343 473"/>
        <Static id="Static19" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 469 1125 474"/>
        <Static id="Static10" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 14 501 1125 511"/>
        <Static id="Static21" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 14 706 1125 716"/>
        <Static id="Static23" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 538 1126 548"/>
        <Static id="Static24" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 15 548 26 705"/>
        <Static id="Static25" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 26 695 1114 705"/>
        <Static id="Static26" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1114 548 1125 705"/>
        <Static id="Static07" text="W15" visible="false" position="absolute 1110 474 1125 501" style="background:#ff000055;align:center middle;"/>
        <Static id="Static06" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 35 1125 40"/>
        <Static id="Static41" text="레시피 미포함 선택 시 업장표준레시피로 전환되어 복사됩니다. (업장표준레시피가 존재하지 않는 경우 표준레시피로 전환됩니다.)" class="sta_WF_DiscInfo" position="absolute 334 517 1129 532" anchor="top right"/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="code_name" id="rdo_SType" index="0" innerdataset="ds_SType" onitemchanged="rdo_SType_OnChanged" taborder="1" position="absolute 99 20 280 41"/>
        <Static id="Static00" text="복사 후 레시피검색 및 등록에서 구성요소를 지정해야 식단등록 화면에 메뉴명이 표시됩니다." class="sta_WF_DiscPoint" position="absolute 286 21 873 36" anchor="top right"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_Master" oncolumnchanged="ds_Master_OnColumnChanged" cancolumnchange="ds_Master_cancolumnchange">
        <ColumnInfo>
          <Column id="CORNER" size="20" type="STRING"/>
          <Column id="CORNER_NAME" size="100" type="STRING"/>
          <Column id="CUR_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="HALL_CD" size="20" type="STRING"/>
          <Column id="HALL_NAME" size="50" type="STRING"/>
          <Column id="MEAL" size="20" type="STRING"/>
          <Column id="MEAL_NAME" size="100" type="STRING"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="MENU_DATE" size="8" type="STRING"/>
          <Column id="PAST_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_INFO" size="4000" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="WDESC" size="100" type="STRING"/>
          <Column id="CHK" size="256" type="STRING"/>
          <Column id="COST_TYPE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_input" oncolumnchanged="ds_input_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="UPJANG_NM" size="256" type="STRING"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="MEAL1" size="256" type="STRING"/>
          <Column id="CORNER1" size="256" type="STRING"/>
          <Column id="MENU_F_DATE1" size="256" type="STRING"/>
          <Column id="MENU_T_DATE1" size="256" type="STRING"/>
          <Column id="RECIPE_NAME1" size="256" type="STRING"/>
          <Column id="SCHEDULE" size="256" type="STRING"/>
          <Column id="TOPCNT" size="256" type="BIGDECIMAL"/>
          <Column id="MENU_FEATURE" size="256" type="STRING"/>
          <Column id="STYPE2" size="256" type="STRING"/>
          <Column id="MENU_CLASS" size="256" type="STRING"/>
          <Column id="COST_TYPE" size="256" type="STRING"/>
          <Column id="MENU_TYPE" size="256" type="STRING"/>
          <Column id="MEAL2" size="256" type="STRING"/>
          <Column id="CORNER2" size="256" type="STRING"/>
          <Column id="MENU_F_DATE2" size="256" type="STRING"/>
          <Column id="MENU_T_DATE2" size="256" type="STRING"/>
          <Column id="RECIPE_NAME2" size="256" type="STRING"/>
          <Column id="MENU_NAME" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="FILEURL" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
          <Column id="STYPE" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CORNER1"/>
            <Col id="CORNER2"/>
            <Col id="COST_TYPE"/>
            <Col id="FILEURL"/>
            <Col id="HALL_CD"/>
            <Col id="MEAL"/>
            <Col id="MEAL1"/>
            <Col id="MEAL2"/>
            <Col id="MENU_CLASS"/>
            <Col id="MENU_F_DATE1"/>
            <Col id="MENU_F_DATE2"/>
            <Col id="MENU_FEATURE"/>
            <Col id="MENU_NAME"/>
            <Col id="MENU_T_DATE1"/>
            <Col id="MENU_T_DATE2"/>
            <Col id="MENU_TYPE"/>
            <Col id="RECIPE_NAME1"/>
            <Col id="RECIPE_NAME2"/>
            <Col id="SCHEDULE"/>
            <Col id="STYPE"/>
            <Col id="STYPE2"/>
            <Col id="SUBINV_CODE"/>
            <Col id="TOPCNT"/>
            <Col id="UPJANG"/>
            <Col id="UPJANG_NM"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_SType">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="code_name">사업장식단</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="code_name">표준식단</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MEAL2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_COST_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RECIPE_List">
        <ColumnInfo>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_HALL_CD"/>
      <Dataset id="ds_Detail">
        <ColumnInfo>
          <Column id="CUR_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="FEATURE_NAME" size="100" type="STRING"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PAST_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail2" oncolumnchanged="ds_Detail2_OnColumnChanged" onrowposchanged="ds_OnRowPosChanged">
        <ColumnInfo>
          <Column id="CUT_SPEC" size="20" type="STRING"/>
          <Column id="DISH_INFO" size="20" type="STRING"/>
          <Column id="DISUSE_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="EDIBLE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_COST" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="ITEM_SPEC" size="0" type="STRING"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RESTRICT_YN" size="1" type="STRING"/>
          <Column id="SINGLE_MENU_CD" size="20" type="STRING"/>
          <Column id="UNIT_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CType">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="code_name">레시피포함</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="code_name">레시피미포함</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_SType2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="code_name">개별표준식단</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="code_name">권장식단</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MEAL1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list" oncolumnchanged="ds_list_OnColumnChanged">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
          <Column id="RECIPE_INFO" size="256" type="STRING"/>
          <Column id="MENU_ID" size="256" type="STRING"/>
          <Column id="COPY_TYPE" size="256" type="STRING"/>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="MENU_CD" size="256" type="STRING"/>
          <Column id="ORG_MENU_DATE" type="STRING" size="256"/>
          <Column id="COST_TYPE" type="STRING" size="256"/>
          <Column id="ORG_CORNER" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RECIPE_LINK"/>
      <Dataset id="ds_MEAL3">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER3">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
          <Column id="MEAL" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Result">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="HALL_NAME" size="256" type="STRING"/>
          <Column id="MEAL_NAME" size="256" type="STRING"/>
          <Column id="CORNER_NAME" size="256" type="STRING"/>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_in"/>
      <Dataset id="ds_ResultDt">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="MSG" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER4">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recUpjang" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
    </Objects>
    <Bind>
      <BindItem id="div_1_ed_UPJANG_NM_value" compid="div_1.ed_UPJANG_NM" propid="value" datasetid="ds_input" columnid="UPJANG_NM"/>
      <BindItem id="div_1_cbo_HALL_CD_value" compid="div_1.cbo_HALL_CD" propid="value" datasetid="ds_input" columnid="HALL_CD"/>
      <BindItem id="div_1_cbo_MEAL_value" compid="div_1.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL1"/>
      <BindItem id="div_1_cbo_CORNER_value" compid="div_1.cbo_CORNER" propid="value" datasetid="ds_input" columnid="CORNER1"/>
      <BindItem id="div_1_cbo_RECIPE_value" compid="div_1.cbo_RECIPE" propid="value" datasetid="ds_input" columnid="RECIPE_NAME1"/>
      <BindItem id="div_1_ed_SCHEDULE_value" compid="div_1.ed_SCHEDULE" propid="value" datasetid="ds_input" columnid="SCHEDULE"/>
      <BindItem id="div_1_ed_MENU_FEATURE_value" compid="div_1.ed_MENU_FEATURE" propid="value" datasetid="ds_input" columnid="MENU_FEATURE"/>
      <BindItem id="div_1_med_Topcnt_value" compid="div_1.med_Topcnt" propid="value" datasetid="ds_input" columnid="TOPCNT"/>
      <BindItem id="div_2_cbo_MEAL_value" compid="div_2.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL2"/>
      <BindItem id="div_2_cbo_CORNER_value" compid="div_2.cbo_CORNER" propid="value" datasetid="ds_input" columnid="CORNER2"/>
      <BindItem id="div_2_cbo_RECIPE_value" compid="div_2.cbo_RECIPE" propid="value" datasetid="ds_input" columnid="RECIPE_NAME2"/>
      <BindItem id="div_2_ed_MENU_NAME_value" compid="div_2.ed_MENU_NAME" propid="value" datasetid="ds_input" columnid="MENU_NAME"/>
      <BindItem id="div_2_cbo_MENU_TYPE_value" compid="div_2.cbo_MENU_TYPE" propid="value" datasetid="ds_input" columnid="MENU_TYPE"/>
      <BindItem id="div_2_cbo_COST_TYPE_value" compid="div_2.cbo_COST_TYPE" propid="value" datasetid="ds_input" columnid="COST_TYPE"/>
      <BindItem id="div_2_cbo_MENU_CLASS_value" compid="div_2.cbo_MENU_CLASS" propid="value" datasetid="ds_input" columnid="MENU_CLASS"/>
      <BindItem id="div_2_cbo_SType2_value" compid="div_2.cbo_SType2" propid="value" datasetid="ds_input" columnid="STYPE2"/>
      <BindItem id="item5" compid="sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item4" compid="Tab_list.tab2.sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분   : 메뉴관리/식단관리/식단등록-식단복사
 * 프로그램명   : FSM00100E.XML
 * 기      능   : 식단복사
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18
 * 비      고   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "lib::sc_comon.js"
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js"
//@@컨버터에서 주석처리 #include "lib::tit_comm_0001.js"		// X-Framework Lib
//@@컨버터에서 주석처리 #include "lib::sc_sql_common.js"		// 사업장팝업용 Lib
//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
//var fa_UPJANG,fa_UPJANG_NM,fa_HALL_CD,fa_HALL_NAME,fa_FROM_DT,fa_TO_DT;
var strCopyGubun = "0";		// 0 : 사업장식단, 1 : 개별표준식단, 2 : 기간표준식단
var serverSaveDir = "FSM_SINGLE_MENU_MST";		// 파일패스
var serverSaveUrl;								// 파일패스URL
var ActionVal='';

// 조회
var actionName, cmdName, inData, outData, otherArg, callBackFnc, sqlId;

//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(this);
	
	// 업데이트 DS
	v_ds_check = "ds_list";
	
	// X-Framework : Action 정보 생성 
	fsp_init(this);
	
	// 공통코드 조회
	var v_fil_cond;
 	 var v_ds = fn_common_code("'FS0023','FS0022','FS0030','FS0031','FS0029','FS0028'","","","all","Y"); 
  
	// 끼니(ds_MEAL, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0023' && SET3=='Y'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MEAL2,v_ds.name); 
	
	// 코너(ds_CORNER, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0022' && SET3 =='Y'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_CORNER2,v_ds.name);
	
	// 원가유형(ds_COST_TYPE, GROUP_CODE : 'FS0030')
	v_fil_cond = "GROUP_CODE == 'FS0030'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_COST_TYPE,v_ds.name); 
	
	// 식단유형(ds_MENU_TYPE, GROUP_CODE : 'FS0031')
	v_fil_cond = "GROUP_CODE == 'FS0031'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_TYPE,v_ds.name); 

	// 개별식단분류(ds_MENU_CLASS1, GROUP_CODE : 'FS0028')
//	v_fil_cond = "GROUP_CODE == 'FS0028' && gfn_length(CODE) > 0";
	v_fil_cond = "GROUP_CODE == 'FS0028' && CODE_NAME <> '전체'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_CLASS1,v_ds.name);  
	
	// 기간식단분류(ds_MENU_CLASS1, GROUP_CODE : 'FS0029')
//	v_fil_cond = "GROUP_CODE == 'FS0029' && gfn_length(CODE) > 0";
	v_fil_cond = "GROUP_CODE == 'FS0029' && CODE_NAME <> '전체'";
	
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_CLASS2,v_ds.name);  
    
    // 레시피명 조회    
    fn_SearchCommon("fs/fsc:FSR_RECIPE_CD_REF_S001","","ds_RECIPE_List=gds_Csqlout","","fn_Callback_Recipe");
 
    // 업장별 레시피 분류
     fn_SearchCommon("fs/fsc:FSA_UPJANG_RECIPE_LINK_S001","","ds_RECIPE_LINK=gds_Csqlout","","fn_Callback_Recipe_Class");
	
	// 끼니 조회(입력용)
	ActionVal 	="UPJANG="   + fa_UPJANG 
				+" HALL_CD=" +	wrapQuote(fa_HALL_CD)
				+" USE_YN="	 +	'Y';
				
	// 코너 조회(입력용)
 	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER3=gds_Csqlout",ActionVal,"fn_Callback_Corner3");  
  	
  	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER4=gds_Csqlout",ActionVal,"fn_Callback_Corner4");
 
 	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S001","","ds_MEAL3=gds_Csqlout",ActionVal,"fn_Callback_Meal3"); 
	
	// 초기값 셋팅
	//ds_input.SetColumn(0,"MENU_F_DATE1",fa_FROM_DT);	
	//ds_input.SetColumn(0,"MENU_T_DATE1",fa_TO_DT);	
	//ds_input.SetColumn(0,"MENU_F_DATE2",fa_FROM_DT);
	//ds_input.SetColumn(0,"MENU_T_DATE2",fa_TO_DT);

	div_1.me_MENU_F_DATE.fn_initMonthCal(this, gfn_today(), '', ds_input, 'MENU_F_DATE1');
	div_1.me_MENU_T_DATE.fn_initMonthCal(this, gfn_today(), '', ds_input, 'MENU_T_DATE1');
	div_2.me_MENU_F_DATE.fn_initMonthCal(this, gfn_today(), '', ds_input, 'MENU_F_DATE2');
	div_2.me_MENU_T_DATE.fn_initMonthCal(this, gfn_today(), '', ds_input, 'MENU_T_DATE2');
	
	ds_input.setColumn(0,"STYPE2","1");								// 표준식단->구분 : 개별표준식단
	ds_input.setColumn(0,"UPJANG",fa_UPJANG);						// 사업장식단->사업장코드
	ds_input.setColumn(0,"UPJANG_NM",fa_UPJANG_NM);					// 사업장식단->사업장명
	ds_input.setColumn(0,"HALL_CD",fa_HALL_CD);						// 사업장식단->식당
	ed_UPJANG_NM.value	= fa_UPJANG_NM;
	ed_HALL_NAME.value	= fa_HALL_NAME;
	
	//Tab_list.tab2.me_MENU_F_DATE 	= fa_FROM_DT;
	//Tab_list.tab2.me_MENU_T_DATE 	= fa_TO_DT;
	me_priod.value 					= fa_FROM_DT + fa_TO_DT;
	
	// 초기값 셋팅
	serverSaveUrl = fsp_getServerDir(serverSaveDir);
	ds_input.setColumn(0,"FILEURL",serverSaveUrl);
	
	// 2008.06.24 한화 S&C 박종세 ==> 병원식단과의 호환을 위해서 변경
	//ds_input.SetColumn(0,"SUBINV_CODE",parent.ds_HALL_CD.GetColumn(parent.cbo_HALL_CD.index,"SUBINV_CODE"));
	//ds_input.setColumn(0,"SUBINV_CODE",fa_SUBINV_CODE);
	
	// 병원식에서 호출했을 경우 표준식만 복사 가능하도록 처리
	if(fa_CALL_PGM == 'H')
	{
		rdo_SType.enable = false;
		rdo_SType.value = 2;
		fn_formSetting();
	}
	else
	{
		// 그룹레시피 복사는 일반식에 대해서만 가능하며, 사업장식단만 복사 가능하다.
		if(fa_IS_ENF == "Y")
		{
			// 사업장식단 강제 세팅
			rdo_SType.enable = false;
			rdo_SType.value = 1;
			fn_formSetting();		
			
			// 기간 강제 세팅
			div_1.me_MENU_F_DATE.enable = false;
			div_1.me_MENU_T_DATE.enable = false;
			div_1.me_MENU_F_DATE.fn_setValue(fa_FROM_DT);
			div_1.me_MENU_T_DATE.fn_setValue(fa_TO_DT);
			
			// 레시피 포함으로 강제세팅
			rdo_CType.enable = false;
			
			// 상단 문구 변경
			Static00.text = "강제레시피 대상 업장은 사업장식단만 복사가 가능합니다. (레시피 포함으로만 복사 가능)";
		}
	}
	
	div_2.cbo_MEAL.index		= 0;
	div_2.cbo_COST_TYPE.index	= 0;
	div_2.cbo_MENU_TYPE.index	= 0;
	div_2.cbo_MENU_CLASS.index	= 0;

	fn_getRecUpjang();
}

function frm_OnKeyDown(obj:Form, e:KeyEventInfo)
{
	gfn_formKeyDown(obj, e); //(obj,e.fromreferenceobject,e.keycode,e.shiftKey,e.ctrlKey,e.altKey,-1,-1);
}
//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_Search()
 * 기      능   : [조회버튼] 검색조건에 해당하는 정보를 조회
 ******************************************************************************************
 */
function fn_search(obj:Button, e:ClickEventInfo)
{
	// 조회조건체크
	if(!fn_SearchCheck())
	{
		return;
	}

	fn_getRecUpjang();

	// 초기화
	ds_Master.clearData();
	ds_Detail.clearData();
	ds_list.clearData();
	
	
	if (rdo_SType.value=="1")		//사업장식단
	{
		sqlId	= "fs/fsm:FSM90100E_S001";
		
		ds_input.setColumn(0,"STYPE","0");
	}
	else							//기간표준식단
	{
		if (ds_input.getColumn(0,"STYPE2") == "1")
		{
			sqlId	= "fs/fsm:FSM00100E_S003";
			ds_input.setColumn(0,"STYPE","1");
		}
		else
		{
			sqlId	= "fs/fsm:FSM00100E_S005";
			ds_input.setColumn(0,"STYPE","2");
		}
	}
	
	if(ds_input.getColumn(0,"RECIPE_NAME1") == '전체') {
	   ds_input.setColumn(0,"RECIPE_NAME1",'');
	}
	
    if(ds_input.getColumn(0,"RECIPE_NAME2") == '전체') {
	   ds_input.setColumn(0,"RECIPE_NAME2",'');
	}
	
	inData			= "ds_input=ds_input";
	outData			= "ds_Master=ds_Master";
	callBackFnc		= "fn_afterSearch";
	otherArg		=  "fa_UPJANG="			+ wrapQuote(fa_UPJANG);
	otherArg		+= " fa_SUBINV_CODE="	+ wrapQuote(fa_SUBINV_CODE); 
	
	ds_input.setColumn(0,"SUBINV_CODE", ds_HALL_CD.getColumn(div_1.cbo_HALL_CD.index, "SUBINV_CODE"));
	 
	fsp_clear(this); 
    fsp_addSearch(this, sqlId);													// 조회 
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출 
    
    var ActionVal = "UPJANG="   + fa_UPJANG 
					//+" HALL_CD=" +	wrapQuote(div_1.cbo_HALL_CD.value)
					+" HALL_CD=" +	wrapQuote(fa_HALL_CD) //2016.10.26 다른업장 식단 복사시 끼니코드 잘못 가져와서 수정
					+" USE_YN="	 +	'Y';
						
	// 코너 조회(입력용)
	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER3=gds_Csqlout",ActionVal,"fn_Callback_Corner3");    
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Save()
 * 기      능   : [저장버튼] 저장 시 처리되는 작업
 ******************************************************************************************
 */
function fn_save(obj:Button, e:ClickEventInfo)
{
	// 저장조건체크
	if(!fn_SaveCheck())
	{
		return;
	}

	// 권장식단의 기간복사일 경우 대상업장 체크
	if( rdo_SType.value == '2' && div_2.cbo_SType2.value == "2" && Tab_list.tabindex == 1 )
	{
		fn_getRecUpjang();

		// 대상업장여부 확인
		if( ds_recUpjang.findRow("USE_YN", "Y") > -1 )
		{
			// 기간복사 식단의 원가유형
			var sCostType = div_2.cbo_COST_TYPE.value;

			// 대상업장의 원가유형에 있는지 체크
			var nRow = ds_recUpjang.findRowExpr("USE_YN=='Y' && COST_TYPE=='" + sCostType + "'");

			// 대상업장의 원가유형에 없으면 리턴처리
			if( nRow < 0 )
			{
				var sCostNm = "";
				for( var i = 0; i < ds_recUpjang.rowcount; i++ )
				{
					var cType = ds_recUpjang.getColumn(i, "COST_TYPE");

					if( ds_recUpjang.getColumn(i, "USE_YN") == "Y" )
							sCostNm += ds_COST_TYPE.getColumn(ds_COST_TYPE.findRow("CODE", cType), "CODE_NAME") + ",";
				}
						
				sCostNm = sCostNm.substr(0, sCostNm.length -1);

				gfn_alert("[" + fa_UPJANG_NM + "] 사업장은\n"+ sCostNm + " 식단만 복사 가능합니다.\n원가유형을 변경하세요.");
				return false;
			}
		}
	}

	var sqlId,inData, outData, otherArg, callBackFnc;
	
	ds_Result.clearData();
	ds_ResultDt.clearData();

	// 파라미터셋팅
	otherArg	= "g_EmpNo=" + wrapQuote(g_EmpNo) + " fa_UPJANG=" + wrapQuote(fa_UPJANG) + " fa_HALL_CD=" + wrapQuote(fa_HALL_CD) + " fa_SUBINV_CODE=" + wrapQuote(fa_SUBINV_CODE) + " SaveType=" + wrapQuote(Tab_list.tabindex);
	
	if (Tab_list.tabindex == 1)		// 기간복사
	{
		otherArg	+= " strCopyGubun=" + wrapQuote(strCopyGubun);
		
		if (strCopyGubun == "0" || strCopyGubun == "2")		// 사업장식단,기간표준식단
		{
			var sday,eday;
			
			sday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
			eday = Tab_list.tab2.me_MENU_F_DATE.value;
			
			otherArg	+= " MEAL=" 	+ wrapQuote(Tab_list.tab2.cbo_MEAL.value);
			otherArg	+= " CORNER=" 	+ wrapQuote(Tab_list.tab2.cbo_CORNER.value);
			otherArg	+= " D_DT=" 	+ wrapQuote(gfn_getDiffDay(sday, eday));
		}
	}
	
	// 서비스셋팅
	if (rdo_CType.value=="1")		// 레시피포함
	{
		sqlId	= "U_svc::" + "fs/fsm/FSM00100E_T001.jsp";
	}
	else							// 레시피미포함
	{
		sqlId	= "U_svc::" + "fs/fsm/FSM00100E_T002.jsp";
	}
    
    inData		= "ds_list=ds_list ds_input=ds_input ds_Result=ds_Result ds_ResultDt=ds_ResultDt";
    outData		= "ds_Result=ds_Result ds_ResultDt=ds_ResultDt";
    
	jsp_transaction(this,"FSM00100E",sqlId,inData,outData,otherArg,"fn_SaveCallback",false,true,false);
	//transaction("FSM00100E",sqlId,inData,outData,otherArg,"fn_SaveCallback");
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function fn_Close(obj:Button, e:ClickEventInfo)
{
	this.close();
}
//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchSub(nRow)
 * 입      력   : nRow = Master Row
 * 반      환   : 없음
 * 기      능   : 상세내역 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_SearchSub(nRow)
{
	// 초기화
	ds_Detail.clearData();
	
	// 조회
	var actionName, cmdName, inData, outData, otherArg, callBackFnc,sqlId;
	
	var strStype = ds_input.getColumn(0,"STYPE");
	
	if (strStype=="0")			//사업장식단
	{
		otherArg	= "MENU_CD=" + wrapQuote(ds_Master.getColumn(nRow,"MENU_CD"));
		//ds_input.SetColumn(0,"MENU_CD",ds_Master.GetColumn(nRow,"MENU_CD"));
		sqlId	= "fs/fsm:FSM90100E_S002";
	}
	else if (strStype=="1")		//개별표준식단
	{
		//ds_input.SetColumn(0,"SINGLE_MENU_CD",ds_Master.GetColumn(nRow,"SINGLE_MENU_CD"));
		otherArg	= "SINGLE_MENU_CD=" + wrapQuote(ds_Master.getColumn(nRow,"SINGLE_MENU_CD"));
		sqlId	= "fs/fsm:FSM00100E_S004";
	}
	else						//기간표준식단
	{
		otherArg	= "TERM_MENU_CD=" + wrapQuote(ds_Master.getColumn(nRow,"TERM_MENU_CD"));
		sqlId	= "fs/fsm:FSM00100E_S006";
	}
	
 	
 	//trace(opener.parent.name);
 	
	otherArg		+= " fa_UPJANG="		+ wrapQuote(fa_UPJANG);
	//otherArg		+= " fa_SUBINV_CODE="	+ wrapQuote(opener.ds_cond.getColumn(0, "SUBINV_CODE"));
	//그리드 업장코드를 가져오도록 변경(타업장 식단 복사시 상세 조회 안되는 문제 수정) 2018.03.30 김호석	
	otherArg		+= " fa_SUBINV_CODE="	+ ds_input.getColumn(0, "SUBINV_CODE");
//	otherArg		+= " fa_SUBINV_CODE="	+ wrapQuote(fa_SUBINV_CODE);
	
	inData			= "ds_input=ds_input";
	outData			= "ds_Detail=ds_Detail";
	callBackFnc		= "fn_afterSearch";

	
	fsp_clear(this); 
    fsp_addSearch(this, sqlId);													// 조회 
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출 
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchCommon(sqlId,inDS,outDS,otherArg)
 * 입      력   : sqlId = 실행할 sqlID
				  inDS	= input DS
				  outDS	= out DS
				  otherArg = arg
 * 반      환   : 없음
 * 기      능   : 코드조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_SearchCommon(sqlId,inDS,outDS,otherArg,vCallback)
{

    if(gfn_isNull(vCallback)) {
       vCallback = "fn_callBack_searchCommon";
    }

	fsp_clear(this);
	fsp_addSearch(this, sqlId);
	fsp_callService(this, "", "", inDS, outDS ,otherArg, vCallback);
}

function fn_callBack_searchCommon(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {  
    }
}


function fn_Callback_Hall(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
     
    
    }
}

function fn_Callback_Corner1(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
     
    
    }
}

function fn_Callback_Corner3(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
     
       // trace(ds_CORNER3.saveXML());
    
    }
}

function fn_Callback_Corner4(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else { 
        //trace(ds_CORNER4.saveXML());
    }
}

function fn_Callback_Corner5(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else { 
    
       //trace(ds_CORNER4.saveXML());
    }
    
    ds_CORNER4.filter('');
}

function fn_Callback_Recipe(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
    
        ds_RECIPE_List.insertRow(0);
        ds_RECIPE_List.setColumn(0,"RECIPE_SEQ",'');
        ds_RECIPE_List.setColumn(0,"RECIPE_NAME",'전체');
        div_1.cbo_RECIPE.index = 0;
        div_2.cbo_RECIPE.index = 0;
    
    }
}

function fn_Callback_Recipe_Class(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
      
 
    
    }
}

function fn_Callback_Meal1(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
      
    
    }
}
function fn_Callback_Meal3(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
      
    
    }
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_GetFilter(nRow)
 * 입      력   : nRow = 그리드의 현재로우
 * 반      환   : 없음
 * 기      능   : 필터리턴
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_GetFilter(nRow)
{
	var strFilter;
	
	if (nRow == -1)
	{
		strFilter = "MEAL="+wrapQuote(Tab_list.tab2.cbo_MEAL.value);
	}
	else
	{
		strFilter = "MEAL="+wrapQuote(ds_list.getColumn(nRow,"MEAL"));
	}
	
	return strFilter;
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 사업장 조회 후 실행 함수
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function fn_afterSearch(errCode, errMsg)
{
	// 식단원가 filter
	if (ds_Master.rowcount > 0)
	{
	
	    if(ds_input.getColumn(0,"RECIPE_NAME1") == '') {
	    
	       div_1.cbo_RECIPE.index = 0;
	       
	    }
	
	    if(ds_input.getColumn(0,"RECIPE_NAME2") == '') {
	    
	       div_2.cbo_RECIPE.index = 0;
	       
	    }
	
	
	
		var strFilter = "";			// Filter Script
		
		if (rdo_SType.value=="1")
		{
			if (toNumber(div_1.med_F_MENU_COST.value)>0)
			{
				strFilter	+= "CUR_PRICE>=" + toNumber(div_1.med_F_MENU_COST.value) + " ";
			}
			
			if (toNumber(div_1.med_T_MENU_COST.value)>0)
			{
				strFilter	+= " CUR_PRICE<=" + toNumber(div_1.med_T_MENU_COST.value);
			}
		}
		else if (rdo_SType.value=="2" && ds_input.getColumn(0,"STYPE2") == "1")
		{
			if (toNumber(div_2.med_F_MENU_COST.value)>0)
			{
				strFilter	+= "MENU_COST>=" + toNumber(div_2.med_F_MENU_COST.value) + " ";
			}
			
			if (toNumber(div_2.med_T_MENU_COST.value)>0)
			{
				strFilter	+= " MENU_COST<=" + toNumber(div_2.med_T_MENU_COST.value);
			}
		}
		
		strFilter	= gfn_replace(strFilter,"  "," && ");
		
		//trace(strFilter);
		
		ds_Master.filter(strFilter);
	}
	
	// 그리드셋팅
	if (rdo_SType.value=="1")		//사업장식단
	{
		grd_Master.formatid = "Default";
		grd_Detail.formatid = "Default";
	}
	else							//기간표준식단
	{
		if (ds_input.getColumn(0,"STYPE2") == "1")
		{
			grd_Master.formatid = "Default0";
		}
		else
		{
			grd_Master.formatid = "Default1";
		}
		
		grd_Detail.formatid = "Default0";
	} 
	
//	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 사업장 조회 후 실행 함수
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function fn_SaveCallback(errCode, errMsg)
{
	// 식단원가 filter
	if (errCode != 0)
	{
		g_Message("EE", errMsg);
		return;
	}
	
	if (ds_Result.rowcount + ds_ResultDt.rowcount == 0)
	{
		g_Message("03", "");
	}
	else
	{
	 
		gfn_dialog("", "U_FSM::FSM00101P.xfdl",{ds_pResultDt:ds_ResultDt});
	}
	
	//this.Close();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchCheck()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 조회시 필수조회조건 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_SearchCheck()
{
	if (rdo_SType.value == "1")					// 1: 사업장식단
	{
		// 사업장
		if (gfn_length(ds_input.getColumn(0,"UPJANG"))==0)
		{
			g_Message("EE", "사업장을 선택하세요.");
			div_1.ed_UPJANG_NM.setFocus();
			return false;
		}
		
		// 식당
		if (gfn_length(ds_input.getColumn(0,"HALL_CD"))==0)
		{
			g_Message("EE", "식당을 선택하세요.");
			div_1.cbo_HALL_CD.setFocus();
			return false;
		}
	
		// 기간 - from
		if (gfn_length(ds_input.getColumn(0,"MENU_F_DATE1"))==0)
		{
			g_Message("EE", "기간을 입력하세요.");
			div_1.me_MENU_F_DATE.setFocus();
			return false;
		}

		// 기간 -  to
		if (gfn_length(ds_input.getColumn(0,"MENU_T_DATE1"))==0)
		{
			g_Message("EE", "기간을 입력하세요.");
			div_1.me_MENU_T_DATE.setFocus();
			return false;
		}
/*
		if (addMonth(ds_input.GetColumn(0,"MENU_F_DATE1"),1)<ds_input.GetColumn(0,"MENU_T_DATE1"))
		{
			g_Message("EE", "기간은 최대 1개월입니다.");
			div_1.me_MENU_T_DATE.SetFocus();
			return false;
		}
*/
	}
	else										// 2 : 표준식단
	{
		// 구분
		if (gfn_length(ds_input.getColumn(0,"STYPE2"))==0)
		{
			g_Message("EE", "구분을 선택하세요.");
			div_2.cbo_SType2.setFocus();
			return false;
		}
		
		// 분류
		if (gfn_length(ds_input.getColumn(0,"MENU_CLASS"))==0)
		{
			g_Message("EE", "분류를 선택하세요.");
			div_2.cbo_MENU_CLASS.setFocus();
			return false;
		}
			
		if (div_2.cbo_SType2.value == "2")	// 기간표준식단
		{
			// 원가유형
			if (gfn_length(ds_input.getColumn(0,"COST_TYPE"))==0)
			{
				g_Message("EE", "원가유형을 선택하세요.");
				div_2.cbo_COST_TYPE.setFocus();
				return false;
			}
			
			// 식단유형
			if (gfn_length(ds_input.getColumn(0,"MENU_TYPE"))==0)
			{
				g_Message("EE", "식단유형을 선택하세요.");
				div_2.cbo_MENU_TYPE.setFocus();
				return false;
			}
			
			// 기간 - from
			if (gfn_length(ds_input.getColumn(0,"MENU_F_DATE2"))==0)
			{
				g_Message("EE", "기간을 입력하세요.");
				div_2.me_MENU_F_DATE.setFocus();
				return false;
			}
			
			// 기간 -  to
			if (gfn_length(ds_input.getColumn(0,"MENU_T_DATE2"))==0)
			{
				g_Message("EE", "기간을 입력하세요.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
/*
			if (addMonth(ds_input.GetColumn(0,"MENU_F_DATE2"),1)<ds_input.GetColumn(0,"MENU_T_DATE2"))
			{
				g_Message("EE", "조회기간은 최대 1개월입니다.");
				div_2.me_MENU_T_DATE.SetFocus();
				return false;
			}
*/
			/*
			// 끼니
			if (length(ds_input.GetColumn(0,"MEAL2"))=0)
			{
				g_Message("EE", "끼니를 선택하세요.");
				div_2.cbo_MEAL.SetFocus();
				return false;
			}
			
			// 코너
			if (length(ds_input.GetColumn(0,"CORNER2"))=0)
			{
				g_Message("EE", "코너를 선택하세요.");
				div_2.cbo_CORNER.SetFocus();
				return false;
			}
			*/
		}
	}
    
    return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SaveCheck()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 저상시 필수입력 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_SaveCheck()
{
	// 조회조건체크
	if(!fn_SearchCheck())
	{
		return false;
	}
	
	var strGDt1,strGDt2;
	
	if (Tab_list.tabindex == 0)		// 개별복사시
	{
		var nFRow;
		
		if (ds_list.rowcount == 0)
		{
			g_Message("EE", "복사할 데이터가 없습니다.");
			Tab_list.tab1.grd_Save.setFocus();
			return false;
		}
		
		// 제공일
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(MENU_DATE))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "제공일을 입력해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(1);
			return false;
		}
		
		// 끼니
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(MEAL))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "끼니를 선택해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(2);
			return false;
		}
		
		// 코너
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(CORNER))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "코너를 선택해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(3);
			return false;
		}

		// 권장식단일 경우 복사원본의 끼니와 복사대상의 끼니가 동일해야한다.
		if( rdo_SType.value == "2" && div_2.cbo_SType2.value == "2" )
		{
			var orgMeal = div_2.cbo_MEAL.value;
			var newMeal = "";
			for( var i = 0; i < ds_list.rowcount; i++ )
			{
				newMeal = ds_list.getColumn(i, "MEAL");

				if(orgMeal != newMeal )
				{
					g_Message("EE", "복사 원본의 끼니와 복사 대상의 끼니는 동일해야 합니다.");
					ds_list.rowposition = i;
					Tab_list.tab1.grd_Save.setCellPos(2);
					return false;
				}
			}
		}
	}
	else							// 기간복사시에는 끼니 코너도체크
	{
		var strSType = rdo_SType.value;
		
		// 끼니
		if (gfn_length(ds_input.getColumn(0,"MEAL" + strSType))==0)
		{
			g_Message("EE", "끼니를 선택하세요.");
			eval("div_" + strSType).cbo_MEAL.setFocus();
			return false;
		}
		
		// 코너
		if (gfn_length(ds_input.getColumn(0,"CORNER" + strSType))==0)
		{
			g_Message("EE", "코너를 선택하세요.");
			eval("div_" + strSType).cbo_CORNER.setFocus();
			return false;
		}
		
		// 복사대상 - 끼니
		if (gfn_length(Tab_list.tab2.cbo_MEAL.value)==0)
		{
			g_Message("EE", "끼니를 선택하세요.");
			Tab_list.tab2.cbo_MEAL.setFocus();
			return false;
		}

		// 권장식단일 경우 복사원본의 끼니와 복사대상의 끼니가 동일해야한다.
		if( strCopyGubun == "2" )
		{
			if( div_2.cbo_MEAL.value != Tab_list.tab2.cbo_MEAL.value )
			{
				g_Message("EE", "복사 원본의 끼니와 복사 대상의 끼니는 동일해야 합니다.");
				Tab_list.tab2.cbo_MEAL.value
				return false;
			}
		}

		if (strCopyGubun == "0")					// 0: 사업장식단
		{
			// 기간
			strGDt1 = G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE1"), ds_input.getColumn(0,"MENU_T_DATE1"));
			
			if (strGDt1>6)
			{
				g_Message("EE", "기간복사시 일주일 이내로 복사 가능합니다.");
				div_1.me_MENU_T_DATE.setFocus();
				return false;
			}
			
			
		}
		else
		{
			// 기간
			strGDt1 = G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE2"), ds_input.getColumn(0,"MENU_T_DATE2"));
			
			if (G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE2"), ds_input.getColumn(0,"MENU_T_DATE2"))>6)
			{
				g_Message("EE", "기간복사시 일주일 이내로 복사 가능합니다.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
		}
		
		// 검색기간과 기간복사 기간체크
		strGDt2 = G_fn_GapDay(Tab_list.tab2.me_MENU_F_DATE.value, Tab_list.tab2.me_MENU_T_DATE.value);
		//trace("strGDt1 : " + strGDt1 + " strGDt2 : " + strGDt2);
		if (strGDt1 != strGDt2)
		{
			g_Message("EE", "복사원본과 복사대상의 기간이 다릅니다.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
		
		// 복사대상 - 코너
		if (gfn_length(Tab_list.tab2.cbo_CORNER.value)==0)
		{
			g_Message("EE", "코너를 선택하세요.");
			Tab_list.tab2.cbo_CORNER.setFocus();
			return false;
		}
		
		// 복사대상 - 기간
		if (gfn_length(Tab_list.tab2.me_MENU_F_DATE.value)==0)
		{
			g_Message("EE", "기간를 선택하세요.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
		if (gfn_length(Tab_list.tab2.me_MENU_T_DATE.value)==0)
		{
			g_Message("EE", "기간를 선택하세요.");
			Tab_list.tab2.me_MENU_T_DATE.setFocus();
			return false;
		}
		if (Tab_list.tab2.me_MENU_F_DATE.value > Tab_list.tab2.me_MENU_T_DATE.value)
		{
			g_Message("EE", "기간을 확인해 주십시오.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}		
		if (Tab_list.tab2.me_MENU_F_DATE.value < fa_FROM_DT || Tab_list.tab2.me_MENU_T_DATE.value > fa_TO_DT)
		{
			var strmsg;
			
			strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
			strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
			strmsg += "를 입력해 주십시오." ;
			
			g_Message("EE", strmsg);
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
	}

	// 권장메뉴 복사일 경우 강제업장은 레시피포함이 필수이다.
	if( rdo_SType.value == "2" && div_2.cbo_SType2.value == "2")
	{
		if( rdo_CType.value == "2" )
		{
			var compYn = ds_recUpjang.getColumn(0, "COMP_YN");
			if( compYn == "Y" )
			{
				gfn_alert("권장메뉴 대상업장은 레시피포함이 필수입니다.");
				rdo_CType.value = "1";
				return false;
			}
		}
	}

    return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_formSetting()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 화면버튼셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_formSetting()
{
	var btp1,btp2;
	
	if (rdo_SType.value == "1")					// 1: 사업장식단
	{
		div_1.position = "absolute 15 40 1125 108";
		div_1.visible = true;
		div_2.visible = false;
		
		if (Tab_list.tabindex == 0)		// 개별복사
		{
			btp1 = true;
			
		}
		else							// 기간복사
		{
			btp1 = false;
		}
		
		div_1.cbo_RECIPE.enable 		= btp1;
		div_1.ed_SCHEDULE.enable		= btp1;
		div_1.ed_MENU_FEATURE.enable 	= btp1;
		div_1.med_Topcnt.enable 		= btp1;
		div_1.med_F_MENU_COST.enable 	= btp1;
		div_1.med_T_MENU_COST.enable 	= btp1;
	}
	else										// 2 : 기간표준식단
	{
		div_2.position = "absolute 15 40 1125 108";
		div_1.visible = false;
		div_2.visible = true;
		
		if (div_2.cbo_SType2.value == "1")	// 개별표준식단
		{
			Tab_list.tabindex = 0;
			
			btp1 = false;
			btp2 = true;
		}
		else								// 권장식단
		{
			btp1 = true;
			btp2 = false;

			// 원가유형은 권장식단대상업장 원가유형에 따라서 설정함
			div_2.cbo_COST_TYPE.value = ds_recUpjang.getColumn(0, "COST_TYPE");	
			div_2.cbo_MENU_TYPE.index = 1; // 식단유형 - 단일
		}
		
		// 필수여부이미지
//		div_2.img_imp1.visible = btp1;
//		div_2.img_imp2.visible = btp1;
//		div_2.img_imp3.visible = btp1;
		//div_2.img_imp4.Visible = btp1;
		//div_2.img_imp5.Visible = btp1;
		
		div_2.cbo_COST_TYPE.enable 		= btp1;
		div_2.cbo_MENU_TYPE.enable		= btp1;
		div_2.me_MENU_F_DATE.enable 	= btp1;
		div_2.me_MENU_T_DATE.enable 	= btp1;
	 	div_2.cbo_MEAL.enable 			= btp1;
	 	div_2.cbo_CORNER.enable 		= btp1;
		div_2.cbo_RECIPE.enable 		= btp2;
		div_2.ed_MENU_NAME.enable 		= btp2;
		div_2.med_F_MENU_COST.enable 	= btp2;
		div_2.med_T_MENU_COST.enable 	= btp2;
	}
	
	if (Tab_list.tabindex == 0)		// 개별복사 : 선택
	{
		grd_Master.setFormatColProperty(1,"size",30);
	}
	else							// 기간복사 : 선택제거
	{
		grd_Master.setFormatColProperty(1,"size",0);
	}
	
	strCopyGubun = iif(rdo_SType.value=="1","0",ds_input.getColumn(0,"STYPE2"));
}
//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : grd_List_OnHeadClick(obj,nCell,nX,nY,nPivotIndex)
 * 기      능   : 그리드헤드 더블클릭시 Sort
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function grd_List_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_pop1_OnClick(obj)
 * 기      능   : 팝업버튼 클릭 -> 사업장 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function btn_pop1_OnClick(obj:Button, e:ClickEventInfo)
{
	var strAddWhere;
	
	if( toNumber(g_AuthLevel) < 99 ) {
		//strAddWhere = " AND UPJANG IN (SELECT UPJANG  FROM FSA_UPJANG_GRP A WHERE EXISTS (SELECT 1 FROM FSA_UPJANG_GRP X WHERE X.GRP_SEQ = A.GRP_SEQ AND X.UPJANG = " + fa_UPJANG + ") )";
		strAddWhere =  "   AND (A.UPJANG = '" + fa_UPJANG + "' \n";
		strAddWhere += "     OR A.UPJANG IN \n";
		strAddWhere += "      ( \n";
		strAddWhere += "      SELECT UPJANG \n";
		strAddWhere += "        FROM FSA_UPJANG_GRP A \n";
		strAddWhere += "       WHERE EXISTS \n";
		strAddWhere += "             ( \n";
		strAddWhere += "             SELECT 1 \n";
		strAddWhere += "               FROM FSA_UPJANG_GRP X \n";
		strAddWhere += "              WHERE X.GRP_SEQ = A.GRP_SEQ \n";
		strAddWhere += "                AND X.UPJANG = '" + fa_UPJANG + "' \n";
		strAddWhere += "             ) \n";
		strAddWhere += "      ) \n";
		strAddWhere += "   OR A.UPJANG IN \n";
		strAddWhere += "      ( \n";
		strAddWhere += "      SELECT UPJANG \n";
		strAddWhere += "        FROM MAS_DUALUPJANG_MGMT \n";
		strAddWhere += "       WHERE SABUN = '" + g_EmpNo + "' \n";
		strAddWhere += "      ) \n";
		strAddWhere += " ) \n";
	}
	
	fn_sql_common_setup( strQuery_Upjang
						,strQuery_UpjangKeyField
						,strQuery_UpjangValueField
						,strQuery_UpjangKeyFieldNM
						,strQuery_UpjangValueFieldNM
						,""
						,""
						,strAddWhere
						,strQuery_UpjangCaption
						);
						
	ds_input.setColumn(0,"UPJANG_NM",gds_sql_common.getColumn(0, "ret_name"));
	ds_input.setColumn(0,"UPJANG",gds_sql_common.getColumn(0, "ret_code"));
	//trace(gds_sql_common.getColumn(0, "ret_code"));
}

/*
 ******************************************************************************************
 * 함  수  명   : rdo_SType_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 식단에 따라 검색조건 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function rdo_SType_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : sp_line_OnMove(obj,nBeforePos,nPos)
 * 기      능   : 그리드 리사이즈시 최대,최소 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-20  
 ******************************************************************************************
 */
function sp_line_OnMove(obj:Splitter, e:MoveEventInfo)
{
	// Top
	if (-1 < st_bk1.position.top)
	{
		sp_line.position.top = st_bk1.position.top -5;
	}
	
	// Bottom
	if (-1 > toNumber(st_bk2.position.top + st_bk2.position.height))
	{
		sp_line.position.top = toNumber(st_bk2.position.top + st_bk2.position.height);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_input_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 조회조건이 변경된 경우
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ds_input_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 업장선택시 식당리스트 조회
	if (e.columnid == "UPJANG")
	{
		if (gfn_length(gfn_toString(e.newvalue))== 0)
		{
			ds_HALL_CD.clearData();
			ds_MEAL1.clearData();
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 식당 조회
			fn_SearchCommon("fs/fsc:FSA_HALL_MST_S001","ds_in=ds_input","ds_HALL_CD=gds_Csqlout","","fn_Callback_Hall");
		}
		
		ds_input.setColumn(0,"HALL_CD","");
	}
	
	// 식당선택시 끼니리스트 조회
	if (e.columnid == "HALL_CD")
	{
		if (gfn_length(e.newvalue)== 0)
		{
			ds_MEAL1.clearData();
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 끼니 조회
			fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S001","ds_in=ds_input","ds_MEAL1=gds_Csqlout","USE_YN='Y'","fn_Callback_Meal1");
		}
	}
	
	// 끼니선택시 코너리스트 조회
	if (e.columnid == "MEAL1")
	{
		if (gfn_length(e.newvalue)== 0)
		{
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 코너 조회
			ds_input.setColumn(0,"MEAL",ds_input.getColumn(0,"MEAL1"));
			fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","ds_in=ds_input","ds_CORNER1=gds_Csqlout","USE_YN='Y'","fn_Callback_Corner1");
			
		}
	}

	// 구분에 따라 분류셋팅
	if (e.columnid == "STYPE2")
	{
		// 단일
		if (e.newvalue == "1")			// 개별표준식단
		{
			Copy(ds_MENU_CLASS,ds_MENU_CLASS1);
		}
		else							// 기간표준식단
		{
			Copy(ds_MENU_CLASS,ds_MENU_CLASS2);
		}
	}
	
	// 식단유형
	if (e.columnid == "MENU_TYPE")
	{
		// 단일
		if (e.newvalue == "001")
		{
			ds_CORNER2.filter("SET3=='Y'");
			ds_input.setColumn(0,"CORNER2","001");
		}
		else
		{
			ds_CORNER2.filter("");
		}
	}
/*
	// 조회일자가 한달이상 안됨.
	if ((strColumnID == "MENU_F_DATE1" || strColumnID == "MENU_T_DATE1" 
		|| strColumnID == "MENU_F_DATE2" || strColumnID == "MENU_T_DATE2")  && length(trim(varNewValue)) > 0 )
	{
		if (rdo_SType.Value == "1")					// 1: 사업장식단
		{
			if (addMonth(ds_input.GetColumn(0,"MENU_F_DATE1"),1)<ds_input.GetColumn(0,"MENU_T_DATE1"))
			{
				g_Message("EE", "기간은 최대 1개월입니다.");
				ds_input.SetColumn(0,strColumnID,"");
				//div_1.me_MENU_T_DATE.SetFocus();
				return false;
			}
		}
		else
		{
			if (addMonth(ds_input.GetColumn(0,"MENU_F_DATE2"),1)<ds_input.GetColumn(0,"MENU_T_DATE2"))
			{
				g_Message("EE", "조회기간은 최대 1개월입니다.");
				ds_input.SetColumn(0,strColumnID,"");
				//div_2.me_MENU_T_DATE.SetFocus();
				return false;
			}
		}
	}
*/
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_OnChanged(obj,nOldIndex,nNewindex)
 * 기      능   : 텝클릭후 폼셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function Tab_list_OnChanged(obj:Tab, e:TabIndexChangeEventInfo)
{

	if(Tab_list.getIndex() == 1) {
	
	    if(rdo_SType.value == 1) {
	
			Tab_list.tab2.cbo_MEAL.value = div_1.cbo_MEAL.value;
			Tab_list.tab2.cbo_CORNER.value = div_1.cbo_CORNER.value;
		} else {
			Tab_list.tab2.cbo_MEAL.value = div_2.cbo_MEAL.value;
			Tab_list.tab2.cbo_CORNER.value = div_2.cbo_CORNER.value;
		}
	
	}
	
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_OnChanging(obj,nOldIndex,nNewIndex)
 * 기      능   : 텝클릭시 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function Tab_list_OnChanging(obj:Tab, e:TabIndexChangeEventInfo)
{
	if (rdo_SType.value == "2")
	{
		if (div_2.cbo_SType2.value == "1" && e.postindex == 1)
		{
			g_Message("EE", "개별표준식단인 경우 기간복사를 하실 수 없습니다.");
			return false;
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : div_2_cbo_SType2_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 구분선택시
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function div_2_cbo_SType2_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_list.clearData();
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_Date_OnClick(obj,nX,nY)
 * 기      능   : 달력
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function btn_Date_OnClick(obj:Button, e:ClickEventInfo)
{
	var objme = eval(obj.userdata);
	
	var retDate = gfn_dialog("", "U_SCC::SCC_CALENDAR.xfdl","fa_Date="+wrapQuote(objme.value),-1,-1,"Title=false Status=false");
	
	objme.value  = retDate;
	
	g_CalButton_OnClick(obj);
	cal_MENU_DATE.value=me_GiveDay.value;
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_Master_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 선택된 경우 개별복사에 추가
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ds_Master_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 선택된 경우 개별복사에 추가
	if (e.columnid == "CHK" && e.newvalue == "1")
	{
		var nARow = ds_list.addRow();
		ds_list.copyRow(nARow,obj,e.row,"RECIPE_INFO=RECIPE_INFO,MENU_ID=MENU_ID,UPJANG=UPJANG,MENU_CD=MENU_CD,COST_TYPE=COST_TYPE,ORG_CORNER=CORNER");
		ds_list.setColumn(nARow,"COPY_TYPE",strCopyGubun); 

		if(rdo_SType.value == '2')
		{
			if( div_2.cbo_SType2.value == "2" )
			{
				ds_list.setColumn(nARow, "ORG_MENU_DATE", obj.getColumn(e.row, "MENU_DATE"));
				ds_list.setColumn(nARow, "MENU_DATE", obj.getColumn(e.row, "MENU_DATE"));
			}

			ds_list.setColumn(nARow,"MEAL",div_2.cbo_MEAL.value); 
			ds_list.setColumn(nARow,"CORNER",ds_CORNER3.getColumn(0, "CODE"));
		}
		
		
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_list_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 개별복사시 데이터 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ds_list_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if (e.columnid == "MEAL")
	{
		ds_CORNER3.filter("MEAL==" + wrapQuote(e.newvalue));
		ds_list.setColumn(e.row, "CORNER", "");
	}
	
	if (e.columnid == "MENU_DATE" || e.columnid == "MEAL" || e.columnid == "CORNER")
	{
		var strMENU_DATE 	= ds_list.getColumn(e.row,"MENU_DATE");
		var strMEAL 		= ds_list.getColumn(e.row,"MEAL");
		var strCORNER 		= ds_list.getColumn(e.row,"CORNER");

		if( rdo_SType.value == "2" && div_2.cbo_SType2.value == "2" )
		{
			if( !gfn_isNull(obj.getColumn(e.row, "MENU_DATE")) && (obj.getColumn(e.row, "MENU_DATE") != obj.getColumn(e.row, "ORG_MENU_DATE")) )
			{
				obj.setColumn(e.row, "MENU_DATE", obj.getColumn(e.row, "ORG_MENU_DATE"));
				g_Message("EE", "권장식단 개별복사일 경우\n제공일은 복사대상의 날짜와 동일해야 합니다.");
			}
		}
		else
		{
			// 부모기간안에 있는지 체크
			if (e.columnid == "MENU_DATE" && gfn_length(e.newvalue)> 0)
			{
				if (strMENU_DATE < fa_FROM_DT || strMENU_DATE > fa_TO_DT)
				{
					var strmsg;
					
					strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
					strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
					strmsg += "를 입력해 주십시오." ;
					
					g_Message("EE", strmsg);
					ds_list.setColumn(e.row,e.columnid,"");
					Tab_list.tab1.grd_Save.setCellPos(1);
				}
			}
		}
		
		if (gfn_length(strMENU_DATE)> 0 && gfn_length(strMEAL)> 0 && gfn_length(strCORNER)> 0)
		{
			var nCnt,otherArg,strMenuCD;
			
			// 중복체크
			nCnt = ds_list.getCaseCount("MENU_DATE==" + wrapQuote(strMENU_DATE) + " && MEAL==" + wrapQuote(strMEAL) + " && CORNER==" + wrapQuote(strCORNER));
			
			if (nCnt>1)
			{
				g_Message("EE", "중복된 식단이 있습니다.");
				ds_list.setColumn(e.row,e.columnid,"");
				Tab_list.tab1.grd_Save.setCellPos(decode(e.columnid,"MENU_DATE",1,"MEAL",2,"CORNER",3));
			}
			
			// 식단이 있는지  체크(식수예측을 미리해야함.)
			otherArg 	= "UPJANG=" + wrapQuote(fa_UPJANG) + " HALL_CD=" + wrapQuote(fa_HALL_CD);
			otherArg	+= " MENU_DATE=" + wrapQuote(strMENU_DATE) + " MEAL=" + wrapQuote(strMEAL) + " CORNER=" + wrapQuote(strCORNER);
			
			http.Sync = true;
			fn_SearchCommon("fs/fsm:FSM00100E_S007","","gds_Csqlout=gds_Csqlout",otherArg);
			http.Sync = false;
			
			strMenuCD = gds_Csqlout.getColumn(0,"MENU_CD");
			
			if (gfn_length(strMenuCD)== 0)
			{
				g_Message("EE", "존재하지 않는 식단입니다.");
				ds_list.setColumn(e.row,e.columnid,"");
				Tab_list.tab1.grd_Save.setCellPos(decode(e.columnid,"MENU_DATE",1,"MEAL",2,"CORNER",3));
			}
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab1_grd_Save_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 개별복사 그리드 삭제버튼 클릭
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function Tab_list_tab1_grd_Save_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	// 삭제클릭
	if (e.cell==5)
	{
		var nFRow = ds_Master.findRow("MENU_ID",ds_list.getColumn(e.row,"MENU_ID"));
		ds_Master.setColumn(nFRow,"CHK","0");
		
		ds_list.deleteRow(e.row);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab2_cbo_CORNER_OnFocus(obj)
 * 기      능   : 코너클릭시 기니에 따라 필터
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function Tab_list_tab2_cbo_CORNER_OnFocus(obj:Combo, e:SetFocusEventInfo)
{
 	ds_CORNER4.filter(fn_GetFilter(-1));
}

/*
 ******************************************************************************************
 * 함  수  명   : grd_Master_OnCellDblClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 상세내역조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function grd_Master_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{
	fn_SearchSub(e.row);
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab1_grd_Save_OnExpandEdit(obj,nRow,nCell,strVal,nPivotIndex)
 * 기      능   : 날짜팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function Tab_list_tab1_grd_Save_OnExpandEdit(obj:Grid, e:GridMouseEventInfo)
{
 
//	var retDate,strValue;
	
// 	strValue = ds_list.getColumn(ds_list.rowposition,"MENU_DATE");
// 	
// 	retDate = gfn_dialog("", "U_SCC::SCC_CALENDAR.xfdl","fa_Date="+wrapQuote(strValue),-1,-1,"Title=false Status=false");
// 
// 	ds_list.setColumn(ds_list.rowposition,"MENU_DATE",retDate); 
// 	
  	var str_ColumnTitle = fn_Get_ColHeaderTitle(obj, e.cell);
	
	if(str_ColumnTitle == '제공일') {

		var nCellRect  = obj.getCellRect(e.row, 1);  

		var nX = system.clientToScreenX(obj, nCellRect.left);

		var nY = system.clientToScreenY(obj, nCellRect.top);

		var orgDate = ds_list.getColumn(ds_list.rowposition, "MENU_DATE");		
		var retDate = gfn_callCalendarPopDiv(ds_list.getColumn(ds_list.rowposition, "MENU_DATE"),nX, nY-76);

		if(gfn_isNull(retDate)) {
		   ds_list.setColumn(ds_list.rowposition,"MENU_DATE",orgDate); 
		} else {
		   ds_list.setColumn(ds_list.rowposition,"MENU_DATE",retDate); 
		}
	}	 
	 
   obj.moveToNextCell(); 
}




/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab2_btn_MENU_F_DATE_OnClick(obj)
 * 기      능   : 기간복사시 날짜
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function Tab_list_tab2_btn_MENU_F_DATE_OnClick(obj:Button, e:ClickEventInfo)
{
	/*
	var retDate,strValue,sday,eday;
	
	strValue = Tab_list.tab2.me_MENU_F_DATE.Value ;
	
	retDate = gfn_dialog("", "U_SCC::SCC_CALENDAR.xml","fa_Date="+quote(strValue),-1,-1,"Title=false Status=false");

	sday = ds_input.GetColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
	eday = ds_input.GetColumn(0,iif(strCopyGubun == "0","MENU_T_DATE1","MENU_T_DATE2"));

	Tab_list.tab2.me_MENU_F_DATE.Value = retDate;
	Tab_list.tab2.me_MENU_T_DATE.Value = AddDate(retDate,G_fn_GapDay(sday, eday));
	*/
	
	
	 
	
	//var objme 	= eval("Tab_list.tab2."+obj.userdata);
	
	
	//var retDate = gfn_dialog("", "U_SCC::SCC_CALENDAR.xfdl","fa_Date="+wrapQuote(objme.value),-1,-1,"Title=false Status=false"); 

   // var retDate = g_CalButton_OnClick(objme);
    
    
    var retDate = g_CalButton_OnClick(obj); 

	// 부모기간안에 있는지 체크
	if (retDate < fa_FROM_DT || retDate > fa_TO_DT)
	{
		var strmsg;
		
		strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
		strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
		strmsg += "를 입력해 주십시오." ;
		
		g_Message("EE", strmsg);
		
		retDate = "";
	}


//	objme.value  = retDate;
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab2_me_MENU_F_DATE_OnChar(obj,strPreText,nChar,strPostText,nLLParam,nHLParam)
 * 기      능   : 기간복사 날짜 입력
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function Tab_list_tab2_me_MENU_F_DATE_OnChar(obj:MaskEdit, e:CharEventInfo)
{
	/*
	var strDate = replace(strPostText,"-","");

	if (right(strDate,1) != "_")
	{
		sday = ds_input.GetColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
		eday = ds_input.GetColumn(0,iif(strCopyGubun == "0","MENU_T_DATE1","MENU_T_DATE2"));
		
		Tab_list.tab2.me_MENU_T_DATE.Value = AddDate(strDate,G_fn_GapDay(sday, eday));
	}
	*/
}
/*
 ******************************************************************************************
 * 함  수  명   : ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 업장엔터시팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ed_pop_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13)
	{
		var objme = eval(obj.userdata);
		objme.click();
	}
	else if( e.keycode == 46 ) 
	{
		if (obj.name == "ed_UPJANG_NM")
		{
			ds_input.setColumn(0, "UPJANG",    "");
			ds_input.setColumn(0, "UPJANG_NM", "");
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : grd_Master_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 사진팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function grd_Master_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	if (e.cell==5)	// 사진팝업
	{
		ds_Master.rowposition = e.row;
		//strReturn = gfn_dialog("", "U_FSM::FSM00010P.xfdl","fa_Enable=" + wrapQuote("false")); 
	    var rDs = gfn_dialog("", "U_FSM::FSM00010P.xfdl",{fa_Enable:false,pRow:e.row,fa_ObjDs:ds_Master}); 
	    
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : cbo_OnKillFocus(obj) /cbo_OnChar(obj,strPreText,nChar,strPostText,LLParam,HLParam)
 * 기      능   : 레시피명 자동완성기능
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function cbo_OnKillFocus(obj:Combo, e:KillFocusEventInfo)
{
	var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
	objDs			= obj.innerdataset;
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue)==0) return;
	
	nFRow = eval(objDs).findRow(strDataColumn,strValue);
	
	if (nFRow == -1)
	{
		var nRow = eval(objDs).addRow();
		eval(objDs).setColumn(nRow,strDataColumn,strValue);
		obj.value = strValue;
	}
}
function cbo_OnChar(obj:Combo, e:CharEventInfo)
{
	if (e.chartext == 13)
	{
		div_cmnBtn.btn_search.setFocus();
		div_cmnBtn.btn_search.click();
	}
	else
	{
		obj.userdata = e.posttext;
	}
}  

function Tab_list_tab1_grd_Save_ondropdown(obj:Grid, e:GridEditEventInfo)
{
	if(e.cell == 3) {
		ds_CORNER3.filter("MEAL==" + wrapQuote(ds_list.getColumn(e.row, "MEAL")));
	}
}

function Tab_list_tab2_cbo_MEAL_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
		 ActionVal 	="UPJANG="   + wrapQuote(fa_UPJANG)
					//복사하려는 TO 업장의 식단코드를 가져와야함, 오류 수정 2018.08.02 김호석
					//+" HALL_CD=" +	wrapQuote(div_1.cbo_HALL_CD.value)
					+" HALL_CD=" +	wrapQuote(fa_HALL_CD)							
					+" MEAL=" + wrapQuote(e.postvalue)
					+" USE_YN="	 +	wrapQuote('Y'); 
					
		// 코너 조회(입력용)
		fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER3=gds_Csqlout",ActionVal,"fn_Callback_Corner5"); 
		
}

function div_2_cbo_RECIPE_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
//trace("obj.userchange=="+obj.userchange+":::::e.pretext=="+e.pretext+"::::::e.posttext=="+e.posttext);
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		btn_search.setFocus();
		btn_search.click();
		div_2.cbo_RECIPE.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}
}

function div_2_cbo_RECIPE_onkeydown(obj:Combo, e:KeyEventInfo)
{
if (e.keycode == 13 && obj.userchange == "1") {
		var strValue,nFRow,objDs,strDataColumn;
		
		strValue 		= obj.userdata;
		//objDs			= eval(obj.innerdataset);
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = ds_RECIPE_List.addRow();
				ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		btn_search.setFocus();
		btn_search.click();
		div_2.cbo_RECIPE.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}
}

function div_2_cbo_RECIPE_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
	//objDs			= eval(obj.innerdataset);
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = ds_RECIPE_List.addRow();
			ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index 		= 0;
	}
}

function div_2_cbo_RECIPE_ontextchanged(obj:Combo, e:TextChangedEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1";
}


function div_1_cbo_RECIPE_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
//trace("obj.userchange=="+obj.userchange+":::::e.pretext=="+e.pretext+"::::::e.posttext=="+e.posttext);
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		btn_search.setFocus();
		btn_search.click();
		div_1.cbo_RECIPE.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}
}

function div_1_cbo_RECIPE_onkeydown(obj:Combo, e:KeyEventInfo)
{
if (e.keycode == 13 && obj.userchange == "1") {
		var strValue,nFRow,objDs,strDataColumn;
		
		strValue 		= obj.userdata;
		//objDs			= eval(obj.innerdataset);
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = ds_RECIPE_List.addRow();
				ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		btn_search.setFocus();
		btn_search.click();
		div_1.cbo_RECIPE.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}
}

function div_1_cbo_RECIPE_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
	//objDs			= eval(obj.innerdataset);
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = ds_RECIPE_List.addRow();
			ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index 		= 0;
	}
}

function div_1_cbo_RECIPE_ontextchanged(obj:Combo, e:TextChangedEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1";
}

function Tab_list_tab1_grd_Save_oncloseup(obj:Grid, e:GridEditEventInfo)
{
	ds_CORNER3.filter("");
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_getRecUpjang
 * 기      능   : 권장메뉴 대상업장 조회
 * 작  성  자   : 
 * 작성  일자   : 
 ******************************************************************************************
 */
function fn_getRecUpjang()
{
	ds_recUpjang.clearData();
	
	var strInDatasets = "";
	var strOutDatasets = "ds_recUpjang=ds_recUpjang";
	var strArgument  = "fa_UPJANG=" + wrapQuote(fa_UPJANG);
		strArgument += " fa_FR=" + wrapQuote(div_2.me_MENU_F_DATE.fn_getValue());
		strArgument += " fa_TO=" + wrapQuote(div_2.me_MENU_T_DATE.fn_getValue());	
	var strCallbackFunc = "";
	var strTrId = "";

	fsp_clear(this);
	fsp_addSingle(this, "fs/fsm:FSM00100E_S008");
	fsp_callService(this, "", "", strInDatasets, strOutDatasets, strArgument, strCallbackFunc, true, true, true, strTrId);

	// 권장메뉴대상업장이 아닐경우 초기 설정
	if( ds_recUpjang.rowcount == 0 )
	{
		var nRow = ds_recUpjang.addRow();
		ds_recUpjang.setColumn(nRow, "USE_YN", "N");		// 대상업장여부
		ds_recUpjang.setColumn(nRow, "COMP_YN", "N");		// 강제업장여부
		ds_recUpjang.setColumn(nRow, "COST_TYPE", "001");	// 원가유형 - 저단가
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_Master_cancolumnchange
 * 기      능   : 권장식단 개별복사전 체크
 * 작  성  자   : 
 * 작성  일자   : 
 ******************************************************************************************
 */
function ds_Master_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
{
	if( e.columnid == "CHK" && e.newvalue == "1" )
	{
		if( rdo_SType.value == '2' && div_2.cbo_SType2.value == "2" )
		{
			// 대상업장여부 확인
			if( ds_recUpjang.findRow("USE_YN", "Y") > -1 )
			{
				// 선택한 식단의 원가유형
				var sCostType = obj.getColumn(e.row, "COST_TYPE");

				// 대상업장의 원가유형에 있는지 체크
				var nRow = ds_recUpjang.findRowExpr("USE_YN=='Y' && COST_TYPE=='" + sCostType + "'");

				// 대상업장의 원가유형에 없으면 리턴처리
				if( nRow < 0 )
				{
					var sCostNm = "";
					for( var i = 0; i < ds_recUpjang.rowcount; i++ )
					{
						var cType = ds_recUpjang.getColumn(i, "COST_TYPE");

						if( ds_recUpjang.getColumn(i, "USE_YN") == "Y" )
							sCostNm += ds_COST_TYPE.getColumn(ds_COST_TYPE.findRow("CODE", cType), "CODE_NAME") + ",";
					}
					
					sCostNm = sCostNm.substr(0, sCostNm.length -1);

					gfn_alert("[" + fa_UPJANG_NM + "] 사업장은\n"+ sCostNm + " 식단만 복사 가능합니다.");
					return false;
				}
			}
		}
	}

	return true;
}]]></Script>
  </Form>
</FDL>
