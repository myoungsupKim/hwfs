<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FMP00863P" onkeydown="fn_form_OnKeyDown" onload="form_onload" titletext="즐겨찾기 복사 관리" position="absolute 0 0 950 650" scrollbars="none">
    <Layouts>
      <Layout>
        <Grid autoenter="select" binddataset="ds_list" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="grd_list" useinputpanel="false" selecttype="multirow" onheadclick="grd_list_OnHeadClick" taborder="12" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 15 115 548 421" autofittype="none">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="28" band="left"/>
                <Column size="80" band="left"/>
                <Column size="142"/>
                <Column size="100"/>
                <Column size="80"/>
                <Column size="65"/>
                <Column size="60"/>
                <Column size="65"/>
                <Column size="30"/>
                <Column size="30"/>
                <Column size="30"/>
                <Column size="30"/>
                <Column size="30"/>
                <Column size="30"/>
                <Column size="30"/>
                <Column size="61"/>
                <Column size="65"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" style="align:center;"/>
                <Cell col="1" displaytype="text" style="align:center;" text="상품코드"/>
                <Cell col="2" displaytype="text" text="상품명"/>
                <Cell col="3" displaytype="text" style="align:center;" text="규격"/>
                <Cell col="4" displaytype="text" style="align:center;" text="원산지"/>
                <Cell col="5" displaytype="text" text="단위"/>
                <Cell col="6" displaytype="text" text="단가"/>
                <Cell col="7" displaytype="text" text="기본수량"/>
                <Cell col="8" displaytype="text" text="월"/>
                <Cell col="9" displaytype="text" text="화"/>
                <Cell col="10" displaytype="text" text="수"/>
                <Cell col="11" displaytype="text" text="목"/>
                <Cell col="12" displaytype="text" text="금"/>
                <Cell col="13" displaytype="text" text="토"/>
                <Cell col="14" displaytype="text" text="일"/>
                <Cell col="15" displaytype="text" text="비고"/>
                <Cell col="16" displaytype="text" text="사용여부"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:left;" expr="expr:currow+1" editimemode="english"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:ITEM_CODE" editimemode="english"/>
                <Cell col="2" displaytype="text" style="align:left;" text="bind:ITEM_NAME" editimemode="native"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:ITEM_SIZE" editimemode="english"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:ORIGIN_TYPE" editimemode="english"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:PO_UOM" editimemode="native"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:UNIT_PRICE" editimemode="native"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:DEF_QTY" editimemode="native"/>
                <Cell col="8" displaytype="text" style="align:left;" text="bind:MON" editimemode="native"/>
                <Cell col="9" displaytype="text" style="align:left;" text="bind:TUE" editimemode="native"/>
                <Cell col="10" displaytype="text" style="align:left;" text="bind:WED" editimemode="native"/>
                <Cell col="11" displaytype="text" style="align:left;" text="bind:THU" editimemode="native"/>
                <Cell col="12" displaytype="text" style="align:left;" text="bind:FRI" editimemode="native"/>
                <Cell col="13" displaytype="text" style="align:left;" text="bind:SAT" editimemode="native"/>
                <Cell col="14" displaytype="text" style="align:left;" text="bind:SUN" editimemode="native"/>
                <Cell col="15" displaytype="text" style="align:left;" text="bind:REMARK" editimemode="native"/>
                <Cell col="16" displaytype="text" style="align:left;" text="bind:USE_YN" editimemode="native"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_select1" onclick="btn_select_OnClick" taborder="13" tabstop="false" text="" position="absolute 554 193 569 209" class="btn_WF_arrowRight" image=""/>
        <Button id="btn_select2" onclick="btn_select_OnClick" taborder="15" tabstop="false" text="" position="absolute 554 211 569 227" class="btn_WF_arrowRight" image=""/>
        <Button id="btn_select3" onclick="btn_select_OnClick" taborder="16" tabstop="false" text="" position="absolute 554 231 569 247" class="btn_WF_arrowRight" image=""/>
        <Grid autoenter="select" binddataset="ds_MultiUpj" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="gd_list" useinputpanel="false" selecttype="row" onheadclick="gd_list_OnHeadClick" taborder="18" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 574 115 935 421" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="60"/>
                <Column size="241"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" text="사업장"/>
                <Cell col="1" displaytype="text" text="사업장명"/>
                <Cell col="2" displaytype="checkbox" edittype="checkbox"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" text="bind:UPJANG"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:UPJANGNM_DISP" editimemode="native"/>
                <Cell col="2" displaytype="checkbox" edittype="checkbox" style="align: ;" text="bind:CHK"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_copy" onclick="btn_copy_OnClick" taborder="19" text="복사(저장)" position="absolute 863 90 935 110" class="btn_WF_Custom" image=""/>
        <Button enable="false" id="Button4" onclick="btn_select_OnClick" taborder="26" tabstop="false" text="" position="absolute 554 475 569 491" class="btn_WF_arrowRight" image=""/>
        <Button enable="false" id="Button5" onclick="btn_select_OnClick" taborder="28" tabstop="false" text="" position="absolute 554 493 569 509" class="btn_WF_arrowRight" image=""/>
        <Button enable="false" id="Button6" onclick="btn_select_OnClick" taborder="29" tabstop="false" text="" position="absolute 554 513 569 529" class="btn_WF_arrowRight" image=""/>
        <Grid autoenter="select" binddataset="ds_MultiUpjang" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="false" id="gd_list2" useinputpanel="false" selecttype="row" onheadclick="gd_list_OnHeadClick" taborder="31" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 574 452 935 635" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="60"/>
                <Column size="244"/>
                <Column size="40"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="사업장"/>
                <Cell col="1" text="사업장명"/>
                <Cell col="2" displaytype="checkbox" edittype="checkbox"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" text="bind:UPJANG"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:UPJANGNM_DISP" editimemode="native"/>
                <Cell col="2" displaytype="checkbox" edittype="checkbox" style="align: ;" text="bind:CHK"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button enable="false" id="btn_AllSave" onclick="btn_AllSave_OnClick" taborder="32" text="   ▶ 일괄반영(저장)" position="absolute 396 512 548 534" class="btn_WF_Copy" image=""/>
        <Button enable="false" id="Button9" onclick="btn_select_OnClick" taborder="35" tabstop="false" text="" position="absolute 554 557 569 573" class="btn_WF_arrowLeft" image=""/>
        <Button enable="false" id="Button10" onclick="btn_select_OnClick" taborder="36" tabstop="false" text="" position="absolute 554 575 569 591" class="btn_WF_arrowLeft" image=""/>
        <Button enable="false" id="Button11" onclick="btn_select_OnClick" taborder="37" tabstop="false" text="" position="absolute 554 595 569 611" class="btn_WF_arrowLeft" image=""/>
        <Button enable="false" id="btn_AllDelete" onclick="btn_AllDelete_OnClick" taborder="38" text="  ◀ 일괄삭제(저장)" position="absolute 396 572 548 594" class="btn_WF_Copy" image=""/>
        <Button id="btn_search" onclick="fn_search" taborder="41" text="조회" position="absolute 508 48 549 68" class="btn_WF_Function" image=""/>
        <Button id="btn_search2" onclick="btn_search2_OnClick" taborder="42" text="조회" position="absolute 820 90 861 110" class="btn_WF_Function" image=""/>
        <Button id="btn_search3" onclick="btn_search3_OnClick" taborder="43" text="조회" position="absolute 894 427 935 447" class="btn_WF_Function" image=""/>
        <Static id="Static15" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 15 0 1021 15"/>
        <Static id="Static01" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 476"/>
        <Static id="Static02" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 935 1 950 605"/>
        <Static id="Static03" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 635 934 650"/>
        <Static id="Static79" class="sta_WFDA_Labelbg" position="absolute 15 15 935 42"/>
        <Radio codecolumn="CODE" columncount="6" datacolumn="code_name" id="rdo_Gubun" index="0" innerdataset="ds_Gubun" onitemchanged="rdo_Gubun_OnChanged" taborder="6" value="1" position="absolute 21 19 297 40"/>
        <Button id="btn_close" onclick="fn_close" taborder="40" text="닫기" position="absolute 880 18 930 39" class="btn_WF_CRUD" image=""/>
        <Static id="stat" text="그룹 업장 일괄 복사" position="absolute 739 19 869 40" style="font:arial,9,bold;"/>
        <Static id="Static18" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 42 257 55"/>
        <Static id="Static22" text="즐겨찾기 상품 전체(그룹) 복사" class="sta_WF_Title01" position="absolute 15 55 241 73"/>
        <Static id="Static21" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 15 68 257 73"/>
        <Static id="Static10" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 405 42 549 48" anchor="top right"/>
        <Static id="Static19" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 405 68 549 73" anchor="top right"/>
        <Static id="Static00" class="sta_WFDA_Labelbg" position="absolute 15 73 548 100"/>
        <Static id="st_Upjang" text="사업장" userdata="strQuery_FMUpjang" position="absolute 15 73 87 100" class="sta_WFDA_Label01"/>
        <Edit id="ed_Upjang" imemode="native" onkeydown="fn_edBtn_OnKeyDown" readonly="true" taborder="7" position="absolute 89 76 267 97"/>
        <Static id="Static7" text="복사 할 그룹" position="absolute 289 73 370 100" class="sta_WFDA_Label01"/>
        <Combo codecolumn="FAVOR_GROUP" datacolumn="FAVOR_NAME" displayrowcount="10" id="cbo_groupList" index="0" innerdataset="ds_groupList" onitemchanged="cbo_groupList_OnChanged" taborder="9" position="absolute 372 76 545 97"/>
        <Button id="btn_Upjang" onclick="fn_edBtn_OnClick" taborder="39" tabstop="false" text="" position="absolute 266 76 287 97" class="btn_WF_popSearch" image=""/>
        <Static id="Static11" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 15 100 561 115"/>
        <Static id="Static12" text="w05" class="Guide01_AreaRed" visible="false" position="absolute 548 196 553 241" anchor="left top"/>
        <Static id="Static16" text="w05" class="Guide01_AreaRed" visible="false" position="absolute 569 196 574 241" anchor="left top"/>
        <Static id="Static04" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 790 84 934 90" anchor="top right"/>
        <Static id="Static05" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 790 110 934 115" anchor="top right"/>
        <Static id="Static17" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 421 257 434"/>
        <Static id="Static20" text="즐겨찾기 상품 개별 복사(추가/제거)" class="sta_WF_Title01" position="absolute 15 434 273 452"/>
        <Static id="Static23" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 15 447 881 452"/>
        <Static id="Static08" class="sta_WFDA_Labelbg" position="absolute 15 452 548 479"/>
        <Static id="st_Item" text="상품명" userdata="strQuery_FMUpjang" position="absolute 15 452 87 479" class="sta_WFDA_Label01"/>
        <Edit enable="false" id="ed_Item" imemode="native" onkeydown="fn_edBtn_OnKeyDown" readonly="true" taborder="23" position="absolute 89 455 297 476"/>
        <Button enable="false" id="btn_Item" onclick="btn_Item_OnClick" taborder="24" tabstop="false" text="" position="absolute 296 455 317 476" class="btn_WF_popSearch" image=""/>
        <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 15 478 548 505"/>
        <Edit enable="false" id="edt_ItemCode" imemode="native" readonly="true" taborder="33" position="absolute 18 481 162 502"/>
        <Edit enable="false" id="edt_ItemNm" imemode="native" readonly="true" taborder="34" position="absolute 163 481 545 502"/>
        <Static id="Static13" text="w05" class="Guide01_AreaRed" visible="false" position="absolute 548 371 553 656" anchor="left top"/>
        <Static id="Static14" text="w05" class="Guide01_AreaRed" visible="false" position="absolute 569 371 574 656" anchor="left top"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" oncolumnchanged="ds_cond_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="BIGDECIMAL"/>
          <Column id="MAIN_UPJANG" size="256" type="BIGDECIMAL"/>
          <Column id="FAVOR_GROUP" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="FAVOR_GROUP"/>
            <Col id="MAIN_UPJANG"/>
            <Col id="UPJANG"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_groupList">
        <ColumnInfo>
          <Column id="ATTR01" size="300" type="STRING"/>
          <Column id="ATTR02" size="300" type="STRING"/>
          <Column id="ATTR03" size="300" type="STRING"/>
          <Column id="ATTR04" size="300" type="STRING"/>
          <Column id="ATTR05" size="300" type="STRING"/>
          <Column id="ATTR06" size="300" type="STRING"/>
          <Column id="ATTR07" size="300" type="STRING"/>
          <Column id="ATTR08" size="300" type="STRING"/>
          <Column id="ATTR09" size="300" type="STRING"/>
          <Column id="ATTR10" size="300" type="STRING"/>
          <Column id="CDATE" size="7" type="DATE"/>
          <Column id="CONTENTS" size="300" type="STRING"/>
          <Column id="CUSER" size="9" type="STRING"/>
          <Column id="FAVOR_GROUP" size="50" type="STRING"/>
          <Column id="FAVOR_NAME" size="100" type="STRING"/>
          <Column id="FAVOR_TYPE" size="50" type="STRING"/>
          <Column id="REMARK" size="300" type="STRING"/>
          <Column id="SORT_SEQ" size="22" type="BIGDECIMAL"/>
          <Column id="UDATE" size="7" type="DATE"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="USE_YN" size="1" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Gubun">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="code_name">그룹 전체 복사</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="code_name">개별 복사</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_list">
        <ColumnInfo>
          <Column id="CDATE" size="7" type="DATE"/>
          <Column id="CONTENTS" size="300" type="STRING"/>
          <Column id="CUSER" size="9" type="STRING"/>
          <Column id="FAVOR_GROUP" size="50" type="STRING"/>
          <Column id="FAVOR_NAME" size="100" type="STRING"/>
          <Column id="FAVOR_TYPE" size="50" type="STRING"/>
          <Column id="REMARK" size="300" type="STRING"/>
          <Column id="SORT_SEQ" size="22" type="BIGDECIMAL"/>
          <Column id="UDATE" size="7" type="DATE"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="USE_YN" size="1" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
          <Column id="DEF_QTY" size="256" type="STRING"/>
          <Column id="MON" size="256" type="STRING"/>
          <Column id="TUE" size="256" type="STRING"/>
          <Column id="WED" size="256" type="STRING"/>
          <Column id="THU" size="256" type="STRING"/>
          <Column id="FRI" size="256" type="STRING"/>
          <Column id="SAT" size="256" type="STRING"/>
          <Column id="SUN" size="256" type="STRING"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MultiUpj">
        <ColumnInfo>
          <Column id="UPJANG" size="255" type="STRING"/>
          <Column id="UPJANGNM_DISP" size="255" type="STRING"/>
          <Column id="CHK" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_con" oncolumnchanged="ds_cond_OnColumnChanged">
        <ColumnInfo>
          <Column id="ITEM_CODE" size="255" type="STRING"/>
          <Column id="ITEM_NAME" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="ITEM_CODE"/>
            <Col id="ITEM_NAME"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MultiUpjang">
        <ColumnInfo>
          <Column id="UPJANG" size="255" type="STRING"/>
          <Column id="UPJANGNM_DISP" size="255" type="STRING"/>
          <Column id="CHK" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="edt_ItemCode_value" compid="edt_ItemCode" propid="value" datasetid="ds_con" columnid="ITEM_CODE"/>
      <BindItem id="edt_ItemNm_value" compid="edt_ItemNm" propid="value" datasetid="ds_con" columnid="ITEM_NAME"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분   : 구매관리 > 상품정보관리 
 * 프로그램명   : FMP00863P.xml
 * 기      능   : 즐겨찾기 상품복사 관리
 * 작  성  자   : 노규완
 * 작성  일자   : 2010-04-06
 * 비      고   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    : 
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "LIB::sc_comon.js";
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js";
//@@컨버터에서 주석처리 #include "LIB::tit_comm_0001.js";		// X-Framework Lib
//@@컨버터에서 주석처리 #include "LIB::fm_common.js";
//@@컨버터에서 주석처리 #include "LIB::sc_sql_common.js";
//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
// 1. 본부 직원은 모든 사업장 조회 및 복사 가능 해야 한다.
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo) {
	gfn_formOnLoad(obj, false);

	fsp_init(this);

	//본부직원은 모든 본사가능
	if (g_UserKind == '본부') {
		btn_Upjang.enable = true;
		ed_Upjang.enable = true;
	}   
    
	//기본적으로 일반 사업장 담당자는 즐겨찾기 상품 등록 폼에 있는 사업장 정보를 기본적으로 불러 온다.
	ed_Upjang.userdata = opener.ed_Upjang.userdata;
	ed_Upjang.value     = opener.ed_Upjang.text;
	
	//Loading 시 자동 조회를 위해 ds_cond DataSet에 조회 할 정보를 입력 해 준다.
    ds_cond.setColumn(0, "UPJANG", ed_Upjang.userdata);
    
    //최초 Loading 시 자동 조회.
    fn_search();
}
//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//=========================================================================================

/*******************************************************************************************
 * 함  수  명   : fn_Search()
 * 기      능   : [조회버튼] 검색조건에 해당하는 정보를 조회
 ****************************************************************************************** */
function fn_search(obj:Button, e:ClickEventInfo) 
{
    // 필수 입력사항 체크 
    // 사업장 정보/복사 그룹 정보 확인.
    if ( gfn_isNull(ed_Upjang.value, "사업장", ed_Upjang) ) {
        return;
    }
    
    ds_cond.setColumn(0, "UPJANG", ed_Upjang.userdata);
        
    // 그룹정보 조회 
    fsp_clear(this);
    fsp_addSearch(this, "fm/fmp:FMP00860E_S001");
    // 서비스 호출 
    fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_groupList=ds_groupList", "", "fn_afterSearch");
}

/*******************************************************************************************
 * 함  수  명   : fn_Insert()
 * 기      능   : [입력버튼] 입력 시 처리되는 작업
 * 비      고	: 팝업사용
 *******************************************************************************************/
function fn_insert() 
{    
}
/*******************************************************************************************
 * 함  수  명   : fn_Save()
 * 기      능   : [저장버튼] 저장 시 처리되는 작업
 *******************************************************************************************/ 
function fn_save() 
{
}
/*******************************************************************************************
 * 함  수  명   : fn_SaveData()
 * 기      능   : 복사(저장)  Click Event.
 *              : 그룹 전체 복사 이벤트.
 *******************************************************************************************/ 
function fn_SaveData()
{
	// 필수 항목 체크
    if ( ds_list.getRowCount() == 0 ) 
    {
        gfn_alert(gfn_msg(SCCW00008, "복사할 즐겨찾기 상품 정보"));
        return;
    }

	// 파라미터셋팅
	var strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FMP00863P_T001";
	strURL   = "U_svc::" + "fm/fmp/FMP00863P_T001.jsp";
	
	// 데이터셋 설정
	strInDatasets  = "ds_MultiUpj=ds_MultiUpj ds_list=ds_list";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "g_Upjang=" + wrapQuote(g_Upjang);
	strArgument += " g_EmpNo=" + wrapQuote(g_EmpNo);
	//strArgument += " sMainUpjang=" + wrapQuote(ed_MainUpjang.userdata); //없는 콤포넌트
	strArgument += " sMainUpjang=" + wrapQuote("");
	strArgument += " sUpjang=" + wrapQuote(ed_Upjang.userdata);
	strArgument += " sFavor_Name=" + wrapQuote(cbo_groupList.text);
	
	// 콜백함수 지정
	strCallbackFunc = "fn_CallBack_Save";
	
	// 서버 호출 
	jsp_transaction(this, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, false, true, true);
}

function fn_CallBack_Save(errCode, errMsg)
{
	this.setWaitCursor(false);

	if (errCode == 0)
		g_Message("02","일괄 작업" + fn_AlertMsg("000"));
	else
		g_Message("EE",fn_AlertMsg("002"));
}

function fn_AlertMsg(cd)
{
	var v_Msg="";
	switch(cd)
	{
		case "000":
			v_Msg= "이(가) 저장되었습니다.";
			break;
		case "001":
			v_Msg= "버튼이 정의 되어 있지않습니다.";
			break;
		case "002":
			v_Msg="서비스 오류:시스템 관리자에게 문의하십시오";
			break;
		case "003":
			v_Msg="필수항목은 반드시 선택하시기 바랍니다.";
			break;
			
		default:
			break;			
	}
	return v_Msg;
}
/*******************************************************************************************
 * 함  수  명   : fn_Print()
 * 기      능   : [출력버튼] 출력 시 처리되는 작업
 *******************************************************************************************/
function fn_print() 
{
}

/*******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************/ 
function fn_close(obj:Button, e:ClickEventInfo) 
{
	close();
}

/*******************************************************************************************
 * 함  수  명   : fn_Help()
 * 기      능   : [도움말버튼] 도움말
 ******************************************************************************************/ 
function fn_help() 
{
}

/*******************************************************************************************
 * 함  수  명   : fn_Excel
 * 기      능   : Excel
******************************************************************************************/  
function fn_Excel()
{
}

/*******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 리스트 조회 후 callback 
 * 작  성  자   : 노규완
 * 작성  일자   : 2010-04-06
 ******************************************************************************************/   
function fn_afterSearch(errCode, errMsg)
{
   if ( ds_groupList.getRowCount() > 0 ) {
        // 그룹정보 조회 
        cbo_groupList.index = 0;
        
        var eCombo = new EventInfo();
        eCombo.preindex = -2;
		eCombo.postindex = -2;
		eCombo.postvalue = cbo_groupList.value;
		eCombo.posttext = cbo_groupList.text;        
        cbo_groupList_OnChanged(cbo_groupList, eCombo);
   }
}

/*******************************************************************************************
 * 함  수  명   : grd_list_OnHeadClick
 * 입      력   : 
 * 반      환   : 없음
 * 기      능   : 그리드 헤더 클릭 
 * 작  성  자   : 노규완
 * 작성  일자   :
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 *******************************************************************************************/ 
function grd_list_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
   gfn_gridSort(obj, e); //(ds_list, grd_list, e.cell);
}

/*******************************************************************************************
 * 함  수  명   : fn_edBtn_OnClick
 * 입      력   : 
 * 반      환   : 없음
 * 기      능   : 업장 조회 
 * 작  성  자   : 노규완
 * 작성  일자   : 2010-04-06
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 *******************************************************************************************/ 
function fn_edBtn_OnClick(obj:Button, e:ClickEventInfo)
{
	var sAddWhere = "";

	switch(obj.name)
	{
		case "btn_Upjang":
			if (application.g_UserKind == '사업장'){
				sAddWhere = " AND A.USE_YN = 'Y' AND A.MAIN_UPJANG = " + g_Main_Upjang;  
				sAddWhere += " AND ( A.UPJANG = " + application.g_Upjang + " OR EXISTS (SELECT 1 FROM FMS_USER_UPJANG B WHERE B.USE_YN = 'Y' AND B.UPJANG = A.UPJANG AND B.SABUN = '" + application.g_EmpNo + "') )"; 
			}
			else if (application.g_UserKind == '본사'){  
				sAddWhere = " AND A.USE_YN = 'Y' AND A.MAIN_UPJANG = " + g_Main_Upjang; 
			}
			else if (application.g_UserKind == '본부'){
				sAddWhere = " AND A.USE_YN = 'Y' AND A.MAIN_UPJANG = " + opener.ed_MainUpjang.userdata;
			}
			
			break;
		case "btn_Upjang2":
			if (application.g_UserKind == '사업장'){
				sAddWhere = " AND A.USE_YN = 'Y' AND A.MAIN_UPJANG = " + g_Main_Upjang;
				sAddWhere += " AND ( A.UPJANG = " + application.g_Upjang + " OR EXISTS (SELECT 1 FROM FMS_USER_UPJANG B WHERE B.USE_YN = 'Y' AND B.UPJANG = A.UPJANG AND B.SABUN = '" + application.g_EmpNo + "') )"; 
			}
			else if (application.g_UserKind == '본사'){  
				sAddWhere = " AND A.USE_YN = 'Y' AND A.MAIN_UPJANG = " + g_Main_Upjang; 
			}
			else if (application.g_UserKind == '본부'){
				sAddWhere = " AND A.USE_YN = 'Y' AND A.MAIN_UPJANG = " + opener.ed_MainUpjang.userdata;
			}
					
			break;
			
		default:
			break;
	}
	//fm공통 팝업클릭 호출
	if (ffn_btn_OnClick(obj, sAddWhere, "this.")) fn_Trigger_edBtn(eval("ed_" + gfn_subStr(obj.name, 4)));	
	
	fn_searchGroup();	
}	
/*******************************************************************************************
 * 함  수  명   : fn_Trigger_edBtn
 * 기      능   : 
******************************************************************************************/  
function fn_Trigger_edBtn(obj)
{
// 	switch(obj)
// 	{			
// 		default:
// 			break;
// 	}
}
/*******************************************************************************************
 * 함  수  명   : fn_Trigger_edBtn
 * 기      능   : 
******************************************************************************************/
function fn_edBtn_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	ffn_ed_OnKeyDown(obj,e.keycode);
	//Del의 경우 뒷처리
	if (e.keycode == 46) fn_Trigger_edBtn(obj);
}
function btn_upjangCd_OnClick(obj)
{
}

/*******************************************************************************************
 * 함  수  명   : fn_searchGroup
 * 입      력   : 
 * 반      환   : 없음
 * 기      능   : 조회  
 * 작  성  자   : 노규완
 * 작성  일자   : 2010-04-06
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 *******************************************************************************************/ 
function fn_searchGroup() {
    // 필수 입력사항 체크 
    if ( gfn_isNull(ed_Upjang.value, "사업장", '') ) {
        return;
    }
     
    ds_list.clearData();
    ds_cond.setColumn(0, "UPJANG", ed_Upjang.userdata);
    // 그룹정보 조회 
    fsp_clear(this);
    fsp_addSearch(this, "fm/fmp:FMP00860E_S001");
        
    fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_groupList=ds_groupList", "", "fn_afterSearchGroup", true);		// 서비스 호출 
}

/*******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 리스트 조회 후 callback 
 * 작  성  자   : 
 * 작성  일자   : 
 *******************************************************************************************/ 
function fn_afterSearchGroup(errCode, errMsg)
{	
    if ( ds_groupList.getRowCount() > 0 ) {
        // 그룹정보 조회 
        cbo_groupList.index = 0;
    }
}

/*******************************************************************************************
 * 함  수  명   : btn_copy_OnClick
 * 입      력   : 
 * 반      환   : 없음
 * 기      능   : 복사 처리 
 * 작  성  자   : 노규완
 * 작성  일자   : 2010-04-06
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 *******************************************************************************************/ 
function btn_copy_OnClick(obj:Button, e:ClickEventInfo)
{
	//필수항목 		
	if (ds_MultiUpj.findRowExpr("CHK=='1'") < 0)
	{
		g_Message("EE","작업할 업장을 선택하세요!");
		gd_list.setFocus();
		return;
	}
	if (g_Confirm("02", '즐겨찾기 일괄 복사 작업을 하시겠습니까?!')) fn_SaveData();
}

function fn_afterGroupSearch(errCode, errMsg)
{	
   gfn_showMsgGrid(grd_list);
}
function cbo_groupList_OnChanged(obj:Combo, e)
{
	if( e.postindex >= 0 ) {
        // 변경사항 확인
        if ( gfn_isChangeDs(ds_list, "즐겨찾기그룹", "", true) ) {
            if ( !gfn_confirm(gfn_msg(SCCI00003)) ) {
                cbo_groupList.index = e.preindex;
                return;
            }
        }
	}    
	gfn_clearGrid(grd_list);
    
	ds_cond.setColumn(0, "FAVOR_GROUP", e.postvalue);
	
	if ( gfn_length( e.postvalue)== 0 ) {
        ds_list.clearData();
        return;
	}
	    
	jsp_transaction(this, "FMP00860E_S002", "U_svc::" + "fm/fmp/FMP00860E_S002.jsp", "ds_cond=ds_cond", "ds_list=ds_list", "", "fn_afterGroupSearch", true, false, false);	
}

function rdo_Gubun_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	fn_formSetting();
}

/*******************************************************************************************
 * 함  수  명   : fn_formSetting()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 화면버튼셋팅
 * 작  성  자   : 노규완
 * 작성  일자   : 2010-03-30
 *******************************************************************************************/
function fn_formSetting()
{	
	if (rdo_Gubun.value == "1")					// 1: 그룹전체 복사
	{
		ed_Upjang.enable = true;
		btn_Upjang.enable = true;
		cbo_groupList.enable = true;
		grd_list.enable = true;
		btn_select1.enable = true;
		btn_select2.enable = true;
		btn_select3.enable = true;
		btn_search.enable = true;
		btn_search2.enable = true;
		btn_copy.enable = true;
		gd_list.enable = true;
		grd_list.enable = true;
		
		btn_search3.enable = false;
		ed_Item.enable = false;
		btn_Item.enable = false;
		edt_ItemCode.enable = false;
		edt_ItemNm.enable = false;
		btn_AllSave.enable = false;
		btn_AllDelete.enable = false;
		btn_search3.enable = false;
		
		stat.text = "그룹 업장 일괄 복사";
		stat.style.color = "cornflower";
		
		ds_MultiUpjang.clear();
		gd_list2.enable = false;
		ds_con.clearData();
		
		Button4.enable = false;
		Button5.enable = false;
		Button6.enable = false;
		Button9.enable = false;
		Button10.enable = false;
		Button11.enable = false;
	}
	else										// 2 : 개별 복사
	{	
		ed_Upjang.enable = false;
		btn_Upjang.enable = false;
		cbo_groupList.enable = false;
		grd_list.enable = false;
		btn_select1.enable = false;
		btn_select2.enable = false;
		btn_select3.enable = false;
		btn_search.enable = false;
		btn_search2.enable = false;
		btn_copy.enable = false;
		
		ds_list.clear();
		grd_list.enable = false;
		ds_MultiUpj.clearData();
		gd_list.enable = false;	
		
		btn_search3.enable = true;
		ed_Item.enable = true;
		btn_Item.enable = true;
		btn_AllSave.enable = true;
		btn_AllDelete.enable = true;
		btn_search3.enable = true;
		gd_list2.enable = true;
		
		Button4.enable = true;
		Button5.enable = true;
		Button6.enable = true;
		Button9.enable = true;
		Button10.enable = true;
		Button11.enable = true;		
		
		stat.text = "상품 별 개별 복사";
		stat.style.color = "Crimson";
		
		ed_Item.setFocus();
	}
}

function gd_list_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	if( e.cell == 0 ) {
		if( ds_MultiUpj.getRowCount() > 0 ) {
			var v_Chk = "";
			if( obj.getCellProperty("head", e.cell, "text") == "1" ) {
				v_Chk = "0";
			} else {
				v_Chk = "1";
			}
			// Grid Header Check!!
			obj.setCellProperty("head", e.cell, "text", v_Chk);
			for( var i=0; i<ds_MultiUpj.getRowCount(); i++ ) {
				// Grid Body Check!!
				ds_MultiUpj.setColumn(i, "CHK", v_Chk);
			}
		}
	} else {
		gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
	}	
}

function btn_Item_OnClick(obj:Button, e:ClickEventInfo)
{
        var arg = {p_upjang:ds_cond.getColumn(0, "UPJANG")};
        var arr = gfn_openPopup("U_FMP::FMP00922P.xfdl", true, null, null, arg);
                  
        if ( arr != null ) 
        {
			edt_ItemCode.value = arr[0];
			edt_ItemNm.value = arr[1];			
        }	
}

function btn_search3_OnClick(obj:Button, e:ClickEventInfo)
{
		ds_MultiUpjang.clearData();
		var strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc;
		// 경로 설정
		strSvcID = "FMM00110E_T001";
		strURL   = "U_svc::" + "fm/fmm/FMM00110E_T001.jsp";
		// 데이터셋 설정
		strInDatasets  = "";
		//strOutDatasets = "ds_MultiUpj=ds_List";
		strOutDatasets = "ds_MultiUpjang=ds_List";
		// 파라메터 설정
		strArgument  = "g_Upjang=" + wrapQuote(g_Upjang);
		strArgument += " g_EmpNo=" + wrapQuote(g_EmpNo);
		strArgument += " sMainUpjang=" + wrapQuote(opener.ed_MainUpjang.userdata);
		strArgument += " sUpjang=" + wrapQuote(ed_Upjang.userdata);
		strArgument += " sItem_Code=" + wrapQuote(edt_ItemCode.value);		
		strArgument += " sType=" + wrapQuote("FAV_UpjLst");
		
		// 콜백함수 지정
		strCallbackFunc = "";
		// 서버 호출 
		http.Sync = true;
		Transaction(strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc);
		http.Sync = false;	
		
		//ds_MultiUpj.Copy("ds_MultiUpjang");
		//ds_MultiUpj.cl
		
}

function btn_AllSave_OnClick(obj:Button, e:ClickEventInfo)
{
	//필수항목 		
	if (ds_MultiUpjang.findRowExpr("CHK=='1'") < 0)
	{
		g_Message("EE","작업할 업장을 선택하세요!");
		gd_list2.setFocus();
		return;
	}
	if (g_Confirm("02", '개별 상품 일괄 추가 작업을 하시겠습니까?!')) fn_SaveCopyAll();
}

function btn_AllDelete_OnClick(obj:Button, e:ClickEventInfo)
{
	//필수항목 		
	if (ds_MultiUpjang.findRowExpr("CHK=='1'") < 0)
	{
		g_Message("EE","작업할 업장을 선택하세요!");
		gd_list2.setFocus();
		return;
	}
	if (g_Confirm("02", '개별 상품 일괄 삭제 작업을 하시겠습니까?!')) fn_SaveDeleteAll();
}

function fn_SaveDeleteAll()
{
/*  // 필수 항목 체크 ==============================================================
   필수 항목 체크 ==============================================================*/
   
	// 파라미터셋팅
	var strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc;
	// 경로 설정
	strSvcID = "FMP00863P_T002";
	strURL   = "U_svc::" + "fm/fmp/FMP00863P_T002.jsp";
	// 데이터셋 설정
	strInDatasets  = "ds_MultiUpjang=ds_MultiUpjang ds_con=ds_con";
	strOutDatasets = "";
	// 파라메터 설정
	strArgument  = "g_Upjang=" + wrapQuote(g_Upjang);
	strArgument += " g_EmpNo=" + wrapQuote(g_EmpNo);
//	strArgument += " sMainUpjang=" + quote(ed_MainUpjang.UserData);
	strArgument += " sUpjang=" + wrapQuote(ed_Upjang.userdata);
	strArgument += " sItem_Code=" + wrapQuote(edt_ItemCode.value);
	strArgument += " sGubun= 2 " ;
	// 콜백함수 지정
	strCallbackFunc = "fn_CallBack_Save";
	// 서버 호출 
	//Transaction(strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc);
	jsp_transaction(this, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, false, true, true);
}

function fn_SaveCopyAll()
{
/*  // 필수 항목 체크 ==============================================================
   필수 항목 체크 ==============================================================*/
   
	// 파라미터셋팅
	var strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc;
	// 경로 설정
	strSvcID = "FMP00863P_T002";
	strURL   = "U_svc::" + "fm/fmp/FMP00863P_T002.jsp";
	// 데이터셋 설정
	strInDatasets  = "ds_MultiUpjang=ds_MultiUpjang ds_con=ds_con";
	strOutDatasets = "";
	// 파라메터 설정
	strArgument  = "g_Upjang=" + wrapQuote(g_Upjang);
	strArgument += " g_EmpNo=" + wrapQuote(g_EmpNo);
	strArgument += " sMainUpjang=" + wrapQuote(opener.ed_MainUpjang.userdata);
	strArgument += " sUpjang=" + wrapQuote(ed_Upjang.userdata);
	strArgument += " sItem_Code=" + wrapQuote(edt_ItemCode.value);
	strArgument += " sGubun=" + wrapQuote("1") ;
	// 콜백함수 지정
	strCallbackFunc = "fn_CallBack_Save";
	// 서버 호출 
	//Transaction(strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc);
	jsp_transaction(this, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, false, true, true);
}

function btn_search2_OnClick(obj:Button, e:ClickEventInfo)
{
		ds_MultiUpj.clearData();
		var strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc;
		// 경로 설정
		strSvcID = "FMM00110E_T001";
		strURL   = "U_svc::" + "fm/fmm/FMM00110E_T001.jsp";
		// 데이터셋 설정
		strInDatasets  = "";
		strOutDatasets = "ds_MultiUpj=ds_List";
		// 파라메터 설정
		strArgument  = "g_Upjang=" + wrapQuote(g_Upjang);
		strArgument += " g_EmpNo=" + wrapQuote(g_EmpNo);
		strArgument += " sMainUpjang=" + wrapQuote(opener.ed_MainUpjang.userdata);
		strArgument += " sUpjang=" + wrapQuote(ed_Upjang.userdata);
		strArgument += " sFavor_Name=" + wrapQuote(cbo_groupList.text);		
		strArgument += " sType=" + wrapQuote("FAV_UpjLst");
		
		// 콜백함수 지정
		strCallbackFunc = "";
		// 서버 호출 
		http.Sync = true;
		Transaction(strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc);
		http.Sync = false;	
}
]]></Script>
  </Form>
</FDL>
