<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="BanquetReport" onload="form_onload" titletext="연회행사지시서" position="absolute 0 0 761 725" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="Static34" class="sta_WFDA_Labelbg" position="absolute 15 260 742 715" anchor="left top"/>
        <Static id="Static27" class="sta_WFDA_Labelbg" position="absolute 15 166 742 193" anchor="left top"/>
        <Static id="Static23" class="sta_WFDA_Labelbg" position="absolute 15 140 742 167" anchor="left top"/>
        <Static id="Static13" class="sta_WFDA_Labelbg" position="absolute 15 88 742 115" anchor="left top"/>
        <Static id="Static06" class="sta_WFDA_Labelbg" position="absolute 15 36 742 63" anchor="left top"/>
        <Static id="Static04" class="sta_WFDA_Labelbg" position="absolute 15 10 428 37" anchor="left top"/>
        <Static id="Static76" class="sta_WFDA_Labelbg" position="absolute 15 62 742 89" anchor="left top"/>
        <Static id="Static15" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 311 10"/>
        <Static id="Static01" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 714"/>
        <Static id="Static02" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 745 11 760 720"/>
        <Button id="btn_close" taborder="5" text="취소" onclick="btn_close_OnClick" class="btn_POP_Default" position="absolute 687 7 737 32" anchor="right bottom"/>
        <Button id="btn_confirm" taborder="4" text="저장" class="btn_POP_Default" position="absolute 635 7 685 32" anchor="right bottom" onclick="btn_confirm_onclick"/>
        <Static id="Static16" text="w2" class="Guide01_AreaRed" visible="false" position="absolute 685 6 687 31"/>
        <Static id="Static09" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 715 516 725"/>
        <Static id="Static68" text="행사명" class="sta_WFDA_Label01" position="absolute 173 36 258 63" anchor="left top"/>
        <Edit id="edt_celeNm" taborder="6" autoselect="true" class="edt_WF_Essential" position="absolute 260 39 424 60" anchor="left top"/>
        <Edit id="edt_rsvnNm" taborder="7" autoselect="true" class="edt_WF_Essential" position="absolute 339 143 430 164" anchor="left top"/>
        <Static id="Static36" text="행사시간" class="sta_WFDA_Label01" position="absolute 15 62 100 89" anchor="left top"/>
        <Combo id="cbo_strTime" taborder="8" class="cmb_WF_Essential" position="absolute 102 65 182 86" readonly="true"/>
        <Combo id="cbo_endTime" taborder="9" class="cmb_WF_Essential" position="absolute 205 65 292 86" readonly="true"/>
        <Static id="Static14" text="행사월일" class="sta_WFDA_Label01" position="absolute 427 36 512 63" anchor="left top"/>
        <ObjCalendar id="cal_strDate" titletext="캘린더" taborder="10" text="ObjCalendar00" scrollbars="none" position="absolute 514 39 614 60" enable="true"/>
        <Static id="Static26" class="Guide01_AreaRed" visible="false" position="absolute 614 45 622 52"/>
        <Static id="Static33" text="~" class="sta_WF_Dash" position="absolute 622 39 638 60"/>
        <Static id="Static35" class="Guide01_AreaRed" visible="false" position="absolute 630 45 638 52"/>
        <ObjCalendar id="cal_endDate" titletext="캘린더" taborder="11" text="ObjCalendar00" scrollbars="none" position="absolute 638 39 738 60" enable="true"/>
        <Edit id="edt_amNm" taborder="12" readonly="false" onkeydown="edt_amNm_onkeydown" class="edt_WF_Essential" position="absolute 102 39 171 60" anchor="left top" uCode=""/>
        <TelephoneComponent id="uc_handPhone" titletext="전화번호Component(전화번호,휴대폰 번호-개인정보보안적용컴포넌트)" taborder="13" position="absolute 520 143 660 165" bindDataset="ds_reservOrder" bindTelNo1Column="handPhone1" bindTelNo2Column="handPhone2" bindTelNo3Column="handPhone3"/>
        <Static id="Static65" text="제목" class="sta_WFDA_Label01" position="absolute 15 10 100 37" anchor="left top"/>
        <Edit id="edt_custNm" taborder="14" readonly="false" onkeydown="edt_custNm_onkeydown" position="absolute 102 13 424 34" style=":disabled {cursor:arrowwait;}" custCd=""/>
        <Static id="Static05" text="기안자" class="sta_WFDA_Label01" position="absolute 15 36 100 63" anchor="left top"/>
        <Edit id="edt_custNm00" taborder="15" onkeydown="edt_custNm_onkeydown" position="absolute 102 169 738 190" style=":disabled {cursor:arrowwait;}" custCd=""/>
        <Static id="Static10" text="연회형식" class="sta_WFDA_Label01" position="absolute 335 62 420 89" anchor="left top"/>
        <Edit id="edt_custNm01" taborder="16" onkeydown="edt_custNm_onkeydown" position="absolute 422 65 738 86" style=":disabled {cursor:arrowwait;}" custCd=""/>
        <Static id="Static11" text="식료단가" class="sta_WFDA_Label01" position="absolute 335 88 420 115" anchor="left top"/>
        <Static id="Static12" text="행사장소" class="sta_WFDA_Label01" position="absolute 15 88 100 115" anchor="left top"/>
        <Static id="Static18" class="sta_WFDA_Labelbg" position="absolute 15 114 742 141" anchor="left top"/>
        <Static id="Static19" text="지불방법" class="sta_WFDA_Label01" position="absolute 335 114 420 141" anchor="left top"/>
        <Static id="Static20" text="예상인원" class="sta_WFDA_Label01" position="absolute 15 114 100 141" anchor="left top"/>
        <Static id="Static21" text="지불보증인원" class="sta_WFDA_Label01" position="absolute 165 114 250 141" anchor="left top"/>
        <Static id="Static22" text="예약금" class="sta_WFDA_Label01" position="absolute 515 114 600 141" anchor="left top"/>
        <MaskEdit id="msk_psn" taborder="17" mask="#,###" autoselect="true" class="msk_WF_Essential" position="absolute 102 117 162 138" style="padding:3 0 0 -5;align:center middle;"/>
        <MaskEdit id="msk_maxPsn" taborder="18" mask="#,###" autoselect="true" class="msk_WF_Essential" position="absolute 252 117 332 138" style="padding:3 0 0 -5;align:center middle;"/>
        <Static id="Static24" text="주      최" class="sta_WFDA_Label01" position="absolute 15 140 100 167" anchor="left top"/>
        <Static id="Static25" text="예약자" class="sta_WFDA_Label01" position="absolute 249 140 336 167" anchor="left top"/>
        <Static id="Static28" text="주      소" class="sta_WFDA_Label01" position="absolute 15 166 100 193" anchor="left top"/>
        <Static id="Static29" text="연락처" class="sta_WFDA_Label01" position="absolute 433 140 518 167" anchor="left top"/>
        <Edit id="edt_custNm04" taborder="21" onkeydown="edt_custNm_onkeydown" position="absolute 102 143 244 164" style=":disabled {cursor:arrowwait;}" custCd=""/>
        <Edit id="edt_custNm05" taborder="22" readonly="false" onkeydown="edt_custNm_onkeydown" position="absolute 422 117 513 138" style=":disabled {cursor:arrowwait;}" custCd=""/>
        <Edit id="edt_custNm06" taborder="23" onkeydown="edt_custNm_onkeydown" position="absolute 102 91 332 112" style=":disabled {cursor:arrowwait;}" custCd=""/>
        <MaskEdit id="msk_maxPsn00" taborder="24" mask="#,###" autoselect="true" class="msk_WF_Essential" position="absolute 422 91 513 112" style="padding:3 0 0 -5;align:center middle;"/>
        <MaskEdit id="msk_maxPsn01" taborder="25" mask="#,###" autoselect="true" class="msk_WF_Essential" position="absolute 602 117 738 138" style="padding:3 0 0 -5;align:center middle;"/>
        <Static id="Static00" class="sta_WFDA_Labelbg" position="absolute 15 192 742 261" anchor="left top"/>
        <Static id="Static08" text="GENERAL" class="sta_WFDA_Label01" position="absolute 15 192 100 219" anchor="left top"/>
        <TextArea id="txt_fnb" taborder="26" position="absolute 103 194 738 259"/>
        <Static id="Static30" class="Guide01_AreaRed" visible="false" position="absolute 181 72 189 79"/>
        <Static id="Static31" text="~" class="sta_WF_Dash" position="absolute 189 66 205 87"/>
        <Static id="Static32" class="Guide01_AreaRed" visible="false" position="absolute 197 72 205 79"/>
        <Static id="Static07" text="KITCHEN" class="sta_WFDA_Label01" position="absolute 15 260 100 287" anchor="left top"/>
        <TextArea id="txt_fnb00" taborder="27" position="absolute 103 263 419 446"/>
        <Static id="Static37" text="BEVERAGE" class="sta_WFDA_Label01" position="absolute 15 449 100 476" anchor="left top"/>
        <TextArea id="txt_fnb01" taborder="28" position="absolute 103 451 419 570" anchor="default"/>
        <TextArea id="txt_fnb03" taborder="30" position="absolute 422 263 738 570" anchor="default"/>
        <Static id="Static39" text="OTHER" class="sta_WFDA_Label01" position="absolute 15 570 100 597" anchor="left top"/>
        <TextArea id="txt_fnb02" taborder="31" position="absolute 103 572 419 713" anchor="default"/>
        <TextArea id="txt_fnb04" taborder="32" position="absolute 422 572 738 642" anchor="default"/>
        <TextArea id="txt_fnb05" taborder="33" position="absolute 422 643 738 713" anchor="default"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_reservOrder" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="orderTitle" type="STRING" size="256"/>
          <Column id="reservNm" type="STRING" size="256"/>
          <Column id="rsvnNm" type="STRING" size="256"/>
          <Column id="strDate" type="STRING" size="256"/>
          <Column id="endDate" type="STRING" size="256"/>
          <Column id="strTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
          <Column id="amCd" type="STRING" size="256"/>
          <Column id="amNm" type="STRING" size="256"/>
          <Column id="psn" type="STRING" size="256"/>
          <Column id="maxPsn" type="STRING" size="256"/>
          <Column id="handPhone" type="STRING" size="256"/>
          <Column id="handPhone1" type="STRING" size="256"/>
          <Column id="handPhone2" type="STRING" size="256"/>
          <Column id="handPhone3" type="STRING" size="256"/>
          <Column id="reservClass" type="STRING" size="256"/>
          <Column id="reservFoodAmt" type="STRING" size="256"/>
          <Column id="reservAmt" type="STRING" size="256"/>
          <Column id="reservPayType" type="STRING" size="256"/>
          <Column id="reservRoom" type="STRING" size="256"/>
          <Column id="reservSponsor" type="STRING" size="256"/>
          <Column id="reservAddr" type="STRING" size="256"/>
          <Column id="generalInfo" type="STRING" size="4000"/>
          <Column id="kitchen" type="STRING" size="4000"/>
          <Column id="beverage" type="STRING" size="4000"/>
          <Column id="other" type="STRING" size="4000"/>
          <Column id="banquet" type="STRING" size="4000"/>
          <Column id="engineering" type="STRING" size="4000"/>
          <Column id="transportation" type="STRING" size="4000"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">Y</Col>
            <Col id="insYn">Y</Col>
            <Col id="delYn">N</Col>
            <Col id="savYn">Y</Col>
            <Col id="prtYn">Y</Col>
            <Col id="exlYn">Y</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item10" compid="edt_celeNm" propid="value" datasetid="ds_reservOrder" columnid="reservNm"/>
      <BindItem id="item1" compid="edt_rsvnNm" propid="value" datasetid="ds_reservOrder" columnid="rsvnNm"/>
      <BindItem id="item12" compid="cbo_strTime" propid="value" datasetid="ds_reservOrder" columnid="strTime"/>
      <BindItem id="item14" compid="cbo_endTime" propid="value" datasetid="ds_reservOrder" columnid="endTime"/>
      <BindItem id="item4" compid="edt_amNm" propid="value" datasetid="ds_reservOrder" columnid="amCd"/>
      <BindItem id="item6" compid="edt_custNm" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item7" compid="edt_custNm" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item34" compid="edt_custNm" propid="value" datasetid="ds_reservOrder" columnid="orderTitle"/>
      <BindItem id="item0" compid="edt_custNm00" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item2" compid="edt_custNm00" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item3" compid="edt_custNm00" propid="value" datasetid="ds_reservOrder" columnid="reservAddr"/>
      <BindItem id="item5" compid="edt_custNm01" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item8" compid="edt_custNm01" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item9" compid="edt_custNm01" propid="value" datasetid="ds_reservOrder" columnid="reservClass"/>
      <BindItem id="item13" compid="msk_psn" propid="value" datasetid="ds_reservOrder" columnid="psn"/>
      <BindItem id="item33" compid="msk_maxPsn" propid="value" datasetid="ds_reservOrder" columnid="maxPsn"/>
      <BindItem id="item20" compid="edt_custNm04" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item21" compid="edt_custNm04" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item22" compid="edt_custNm04" propid="value" datasetid="ds_reservOrder" columnid="reservSponsor"/>
      <BindItem id="item23" compid="edt_custNm05" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item24" compid="edt_custNm05" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item25" compid="edt_custNm05" propid="value" datasetid="ds_reservOrder" columnid="reservPayType"/>
      <BindItem id="item26" compid="edt_custNm06" propid="userdata" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item27" compid="edt_custNm06" propid="UserData" datasetid="ds_search" columnid="GUBUN"/>
      <BindItem id="item28" compid="edt_custNm06" propid="value" datasetid="ds_reservOrder" columnid="reservRoom"/>
      <BindItem id="item29" compid="msk_maxPsn00" propid="value" datasetid="ds_reservOrder" columnid="reservFoodAmt"/>
      <BindItem id="item30" compid="msk_maxPsn01" propid="value" datasetid="ds_reservOrder" columnid="reservAmt"/>
      <BindItem id="item17" compid="txt_fnb" propid="value" datasetid="ds_reservOrder" columnid="generalInfo"/>
      <BindItem id="item18" compid="txt_fnb00" propid="value" datasetid="ds_reservOrder" columnid="kitchen"/>
      <BindItem id="item19" compid="txt_fnb01" propid="value" datasetid="ds_reservOrder" columnid="beverage"/>
      <BindItem id="item32" compid="txt_fnb03" propid="value" datasetid="ds_reservOrder" columnid="banquet"/>
      <BindItem id="item31" compid="txt_fnb02" propid="value" datasetid="ds_reservOrder" columnid="other"/>
      <BindItem id="item35" compid="txt_fnb04" propid="value" datasetid="ds_reservOrder" columnid="engineering"/>
      <BindItem id="item36" compid="txt_fnb05" propid="value" datasetid="ds_reservOrder" columnid="transportation"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[ 
/*
  화 면 명 : S.Mgmt Popup
  파 일 명 : AmPop.xfdl
  기    능 : 팝업기능
              

*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";
include "lib::LimsUtil.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var argArgs;

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{
    // Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
    gfn_formOnLoad(this);		// 검체유형 GRID에는 공통 이벤트 제외
	argArgs = this.getOwnerFrame().fv_Contents;
	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	cal_strDate.fn_initMonthCal(this, fv_sToday,    "fn_calendarCallBackStr", ds_reservOrder, "strDate",    "Y"); //예약일자FR
 	cal_endDate.fn_initMonthCal(this, fv_sToday,    "fn_calendarCallBackEnd", ds_reservOrder, "endDate",    "Y"); //예약일자TO
	SCCombo.bind(this, "ComCode", "cbo_strTime",      	null, {groupCode:"BMS_0015", useYn:"Y",defVal:"firstrow"});	                //행사시작시간
 	SCCombo.bind(this, "ComCode", "cbo_endTime",      	null, {groupCode:"BMS_0015", useYn:"Y",defVal:"firstrow"});	                //행사종료시간
	fn_search();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_close()
{

}
/*----------------------------------------------------------------------------------------------
 * 설명      : 코드를 검색 한다.
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
	 
	ds_reservOrder.clearData();
	 
	 
	
	var strSvcID    = "search";
    var strURL      = "rc/bms/banquetReport/selectList.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_reservOrder=ds_reservOrder";
    var strArg      = "reservNum="      + argArgs[0]
					+ " maskAuth=" + SCAuth.getMaskAuth(this) ;
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		// 코드분류 조회
        case "search" :
            if (ds_reservOrder.rowcount<=0)
			{
				var nRow = ds_reservOrder.addRow();
				
				  
				
				ds_reservOrder.setColumn(nRow, "reservNum",argArgs[0] );
				ds_reservOrder.setColumn(nRow, "amCd",argArgs[2]);
				//ds_reservOrder.setColumn(nRow, "amNm",argArgs[2]);
				ds_reservOrder.setColumn(nRow, "reservNm",argArgs[3]);
				
				ds_reservOrder.setColumn(nRow, "psn",argArgs[4]);
				ds_reservOrder.setColumn(nRow, "maxPsn",argArgs[5]);
				ds_reservOrder.setColumn(nRow, "rsvnNm",argArgs[6]);
				
				ds_reservOrder.setColumn(nRow, "handPhone",argArgs[7]);
				ds_reservOrder.setColumn(nRow, "handPhone1",argArgs[8]);
				ds_reservOrder.setColumn(nRow, "handPhone2",argArgs[9]);
				ds_reservOrder.setColumn(nRow, "handPhone3",argArgs[10]);
				
				ds_reservOrder.setColumn(nRow, "strDate",argArgs[11]);
				ds_reservOrder.setColumn(nRow, "endDate",argArgs[12]);
				ds_reservOrder.setColumn(nRow, "strTime",argArgs[13]);
				ds_reservOrder.setColumn(nRow, "endTime",argArgs[14]);

			}
            break;
        
        // 저장
        case "save" :
			gfn_alert("msg.save.success");	// 저장 되었습니다.
            break;    
    }
}

function fn_calendarCallBackStr()
{

}
function fn_calendarCallBackEnd()
{

}

/***************************************************************************
 * 설명   : LayerPopup에서 받을 공통 함수
 ***************************************************************************/
/*

*/
function btn_confirm_onclick(obj:Button,  e:ClickEventInfo)
{
	 if (!gfn_dsIsUpdated(ds_reservOrder))
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
	 
	var strSvcID    = "save";
    var strURL      = "rc/bms/banquetReport/saveData.xdo";
    var strInDs     = "ds_reservOrder=ds_reservOrder:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);

    
}

function btn_close_OnClick(obj:Button,  e:ClickEventInfo)
{
	var retVal = new Array();
    retVal[0] = "CANCEL";
    close(retVal);
}
 

 ]]></Script>
  </Form>
</FDL>
