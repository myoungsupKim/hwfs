<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FSP00015P1" classname="FSP00005P" inheritanceid="" position="absolute 0 0 865 360" titletext="주문변경" onload="form_onload" onbeforeclose="frm_onbeforeclose">
    <Layouts>
      <Layout>
        <Static id="sta_detail06" class="sta_WFDA_Labelbg" position="absolute 771 65 850 92"/>
        <Static id="sta_detail17" class="sta_WFDA_Labelbg" position="absolute 678 65 772 92"/>
        <Static id="sta_detail16" class="sta_WFDA_Labelbg" position="absolute 522 65 601 92"/>
        <Static id="sta_detail11" class="sta_WFDA_Labelbg" position="absolute 429 65 523 92"/>
        <Static id="sta_detail07" class="sta_WFDA_Labelbg" position="absolute 369 65 430 92"/>
        <Static id="sta_detail01" class="sta_WFDA_Labelbg" position="absolute 294 65 370 92"/>
        <Static id="sta_detail00" class="sta_WFDA_Labelbg" position="absolute 95 0 295 0"/>
        <Static id="sta_detail14" class="sta_WFDA_Labelbg" position="absolute 15 65 96 92"/>
        <Static id="Static06" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 850 10"/>
        <Static id="Static09" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 850 0 865 360"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 360"/>
        <Static id="Static22" text="주문정보" class="sta_WF_Title01" position="absolute 15 20 95 38"/>
        <Button id="btn_close" taborder="20" text="닫기" onclick="fn_Close" class="btn_WF_Custom" position="absolute 809 13 850 34"/>
        <Button id="btn_save" taborder="19" text="확인" onclick="fn_confirm" class="btn_WF_Custom" position="absolute 765 13 806 34"/>
        <Static id="Static10" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 15 345 850 360"/>
        <MaskEdit id="msk_stockQty" taborder="21" tabstop="false" mask="#,##0" enable="false" position="absolute 774 68 847 89"/>
        <MaskEdit id="msk_totAmount" taborder="22" tabstop="false" mask="#,##0" enable="false" position="absolute 681 68 769 89"/>
        <MaskEdit id="msk_dcAmount" taborder="23" tabstop="false" mask="#,##0" enable="false" position="absolute 525 68 598 89"/>
        <MaskEdit id="msk_saleAmount" taborder="24" tabstop="false" mask="#,##0" enable="false" position="absolute 432 68 520 89"/>
        <MaskEdit id="msk_prQty" taborder="0" mask="#,##0" autoselect="true" position="absolute 372 68 427 89"/>
        <MaskEdit id="msk_salePrice" taborder="25" tabstop="false" mask="#,##0" enable="false" position="absolute 297 68 367 89"/>
        <Edit id="edt_itemCode" taborder="27" tabstop="false" enable="false" position="absolute 18 68 93 89" style="align:left middle; :disabled {align:center middle;}"/>
        <Static id="Static15" text="지불정보" class="sta_WF_Title01" position="absolute 15 105 95 123"/>
        <Static id="sta_detail10" class="sta_WFDA_Labelbg" position="absolute 125 149 275 176"/>
        <Static id="sta_detail15" class="sta_WFDA_Labelbg" position="absolute 274 149 374 176"/>
        <Combo id="cmb_payMethod" taborder="3" innerdataset="@ds_pay" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 128 152 272 173" index="-1"/>
        <Static id="sta_detail18" class="sta_WFDA_Labelbg" position="absolute 15 149 126 176"/>
        <Combo id="cmb_instPeriod" taborder="4" innerdataset="@ds_inst" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 277 152 371 173"/>
        <Static id="sta_detail02" class="sta_WFDA_Labelbg" position="absolute 373 149 473 176"/>
        <Static id="sta_detail03" class="sta_WFDA_Labelbg" position="absolute 571 149 712 176"/>
        <Static id="sta_detail04" class="sta_WFDA_Labelbg" position="absolute 472 149 572 176"/>
        <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 711 149 850 176"/>
        <MaskEdit id="msk_cardNum" taborder="7" type="string" mask="####-####-####-####" autoselect="true" position="absolute 574 152 709 173" style="padding:0 0 0 0;align:center middle;"/>
        <Combo id="cmb_cardClass" taborder="5" innerdataset="@ds_cardClass" codecolumn="CODE" datacolumn="NAME" position="absolute 376 152 470 173"/>
        <Combo id="cmb_cardComp" taborder="6" innerdataset="@ds_card" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 475 152 569 173"/>
        <Combo id="cmb_validThruMm" taborder="8" innerdataset="@ds_mm" codecolumn="CODE" datacolumn="NAME" position="absolute 714 152 772 173"/>
        <Static id="Static19" text="/" position="absolute 775 154 785 175" style="font:Gulim,15, bold;"/>
        <Combo id="cmb_validThruYy" taborder="9" innerdataset="@ds_yy" codecolumn="CODE" datacolumn="NAME" position="absolute 789 152 847 173"/>
        <Static id="sta_admAmount01" class="sta_WFDA_Labelbg" position="absolute 600 65 679 92"/>
        <Combo id="cmb_saleType" taborder="2" innerdataset="@ds_sale" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 18 152 123 173"/>
        <Static id="Static01" text="결제자 상세정보" class="sta_WF_Title01" position="absolute 15 189 135 207"/>
        <Static id="sta_detail09" class="sta_WFDA_Labelbg" position="absolute 285 233 511 260"/>
        <Static id="sta_detail12" class="sta_WFDA_Labelbg" position="absolute 15 233 197 260"/>
        <Static id="sta_detail13" class="sta_WFDA_Labelbg" position="absolute 510 233 604 260"/>
        <Static id="sta_detail19" class="sta_WFDA_Labelbg" position="absolute 694 233 850 260"/>
        <Static id="sta_detail20" class="sta_WFDA_Labelbg" position="absolute 603 233 695 260"/>
        <Static id="sta_detail08" class="sta_WFDA_Labelbg" position="absolute 196 233 286 260"/>
        <CustSearchComponent id="edt_arCustCd" titletext="거래처 검색용 Component" taborder="10" text="CustSearchComponent00" position="absolute 18 236 194 258" bindDataset="ds_order" eventBeforeTrigger="" eventAfterTrigger="fn_afterCustPop" bindCustCodeColumn="AR_CUSTCD" bindCustNameColumn="AR_CUSTNM"/>
        <MaskEdit id="msk_arSaupNo" taborder="11" type="string" mask="###-##-#####" autoselect="true" position="absolute 199 236 283 257" style="padding:0 0 0 0;align:center middle;"/>
        <Edit id="edt_arAddr" taborder="12" position="absolute 288 236 508 257" autoselect="true"/>
        <Edit id="edt_arName" taborder="13" position="absolute 513 236 601 257" autoselect="true"/>
        <Edit id="edt_arTel" taborder="14" position="absolute 606 236 692 257" autoselect="true"/>
        <Static id="sta_detail21" class="sta_WFDA_Labelbg" position="absolute 95 65 295 92"/>
        <Edit id="edt_arEmail" taborder="15" position="absolute 697 236 847 257" autoselect="true"/>
        <MaskEdit id="msk_admAmount" taborder="1" mask="#,##0" position="absolute 603 68 676 89" autoselect="true"/>
        <Edit id="edt_itemName" taborder="26" tabstop="false" enable="false" position="absolute 98 68 292 89"/>
        <Static id="Static26" text="담당자명" class="sta_WFDA_Label01" position="absolute 510 207 604 234" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static27" text="연락처" class="sta_WFDA_Label01" position="absolute 603 207 697 234" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static28" text="주소" class="sta_WFDA_Label01" position="absolute 285 207 511 234" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static29" text="이메일" class="sta_WFDA_Label01" position="absolute 694 207 850 234" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static05" text="거래처" class="sta_WFDA_Label01" position="absolute 15 207 197 234" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static25" text="사업자번호" class="sta_WFDA_Label01" position="absolute 196 207 286 234" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static14" text="판매구분" class="sta_WFDA_Label01" position="absolute 15 123 126 150" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static16" text="지불방식" class="sta_WFDA_Label01" position="absolute 125 123 275 150" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static17" text="카드구분" class="sta_WFDA_Label01" position="absolute 373 123 473 150" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static18" text="카드" class="sta_WFDA_Label01" position="absolute 472 123 572 150" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static20" text="할부" class="sta_WFDA_Label01" position="absolute 274 123 374 150" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static21" text="카드번호" class="sta_WFDA_Label01" position="absolute 571 123 712 150" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static23" text="카드유효기간" class="sta_WFDA_Label01" position="absolute 711 123 850 150" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static24" text="재고량" class="sta_WFDA_Label01" position="absolute 771 39 850 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static13" text="지불금액" class="sta_WFDA_Label01" position="absolute 678 39 772 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static12" text="할인금액" class="sta_WFDA_Label01" position="absolute 522 39 601 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static11" text="판매금액" class="sta_WFDA_Label01" position="absolute 429 39 523 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static08" text="수량" class="sta_WFDA_Label01" position="absolute 369 39 430 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static04" text="상품가" class="sta_WFDA_Label01" position="absolute 294 39 370 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static02" text="상품코드" class="sta_WFDA_Label01" position="absolute 15 39 96 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static00" text="관리자할인" class="sta_WFDA_Label01" position="absolute 600 39 679 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static03" text="상품명" class="sta_WFDA_Label01" position="absolute 95 39 295 66" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center middle;font:Gulim,9, bold;"/>
        <Static id="Static30" text="결제 정보" class="sta_WF_Title01" position="absolute 15 273 135 291"/>
        <Static id="Static32" text="승인번호" class="sta_WFDA_Label01" position="absolute 15 291 135 318" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="Static33" text="가맹점번호" class="sta_WFDA_Label01" position="absolute 134 291 274 318" style="background:#566572ff;border:1 solid #78848eff ;color:#ffffffff;padding:0 0 0 0;align:center;font:Gulim,9, bold;"/>
        <Static id="sta_detail23" class="sta_WFDA_Labelbg" position="absolute 15 318 135 345"/>
        <Static id="sta_detail24" class="sta_WFDA_Labelbg" position="absolute 134 318 274 345"/>
        <Edit id="edt_apprvNum" taborder="17" autoselect="true" position="absolute 18 321 132 342"/>
        <Edit id="edt_frncStorNum" taborder="18" autoselect="true" position="absolute 137 321 251 342"/>
        <Button id="btn_frncStorNum" taborder="28" position="absolute 250 321 271 342" class="btn_WF_popSearch" onclick="btn_frncStorNum_onclick"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_pay"/>
      <Dataset id="ds_inst"/>
      <Dataset id="ds_card"/>
      <Dataset id="ds_mm">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="NAME" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">01</Col>
            <Col id="NAME">01</Col>
          </Row>
          <Row>
            <Col id="CODE">02</Col>
            <Col id="NAME">02</Col>
          </Row>
          <Row>
            <Col id="CODE">03</Col>
            <Col id="NAME">03</Col>
          </Row>
          <Row>
            <Col id="CODE">04</Col>
            <Col id="NAME">04</Col>
          </Row>
          <Row>
            <Col id="CODE">05</Col>
            <Col id="NAME">05</Col>
          </Row>
          <Row>
            <Col id="CODE">06</Col>
            <Col id="NAME">06</Col>
          </Row>
          <Row>
            <Col id="CODE">07</Col>
            <Col id="NAME">07</Col>
          </Row>
          <Row>
            <Col id="CODE">08</Col>
            <Col id="NAME">08</Col>
          </Row>
          <Row>
            <Col id="CODE">09</Col>
            <Col id="NAME">09</Col>
          </Row>
          <Row>
            <Col id="CODE">10</Col>
            <Col id="NAME">10</Col>
          </Row>
          <Row>
            <Col id="CODE">11</Col>
            <Col id="NAME">11</Col>
          </Row>
          <Row>
            <Col id="CODE">12</Col>
            <Col id="NAME">12</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_yy">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="NAME" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">15</Col>
            <Col id="NAME">15</Col>
          </Row>
          <Row>
            <Col id="CODE">16</Col>
            <Col id="NAME">16</Col>
          </Row>
          <Row>
            <Col id="CODE">17</Col>
            <Col id="NAME">17</Col>
          </Row>
          <Row>
            <Col id="CODE">18</Col>
            <Col id="NAME">18</Col>
          </Row>
          <Row>
            <Col id="CODE">19</Col>
            <Col id="NAME">19</Col>
          </Row>
          <Row>
            <Col id="CODE">20</Col>
            <Col id="NAME">20</Col>
          </Row>
          <Row>
            <Col id="CODE">21</Col>
            <Col id="NAME">21</Col>
          </Row>
          <Row>
            <Col id="CODE">22</Col>
            <Col id="NAME">22</Col>
          </Row>
          <Row>
            <Col id="CODE">23</Col>
            <Col id="NAME">23</Col>
          </Row>
          <Row>
            <Col id="CODE">24</Col>
            <Col id="NAME">24</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_sale"/>
      <Dataset id="ds_cardClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="NAME" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">신용</Col>
            <Col id="NAME">신용</Col>
          </Row>
          <Row>
            <Col id="CODE">체크</Col>
            <Col id="NAME">체크</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_common" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_order" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_order_oncolumnchanged" cancolumnchange="ds_order_cancolumnchange">
        <ColumnInfo>
          <Column id="SP_ID" type="BIGDECIMAL" size="39"/>
          <Column id="SEASON_NUM" type="BIGDECIMAL" size="39"/>
          <Column id="ITEM_CODE" type="STRING" size="12"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="SALE_PRICE" type="BIGDECIMAL" size="22"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="14"/>
          <Column id="SALE_AMOUNT" type="BIGDECIMAL" size="21"/>
          <Column id="DC_AMOUNT" type="BIGDECIMAL" size="21"/>
          <Column id="ADM_DC_AMOUNT" type="BIGDECIMAL" size="21"/>
          <Column id="TOT_AMOUNT" type="BIGDECIMAL" size="39"/>
          <Column id="SALE_TYPE" type="STRING" size="50"/>
          <Column id="LINE_STATUS" type="STRING" size="50"/>
          <Column id="PAY_METHOD" type="STRING" size="50"/>
          <Column id="INST_PERIOD" type="STRING" size="20"/>
          <Column id="CARD_CLASS" type="STRING" size="18"/>
          <Column id="CARD_COMP" type="STRING" size="50"/>
          <Column id="CARD_NUM" type="STRING" size="4000"/>
          <Column id="VALID_THRU_MM" type="STRING" size="2"/>
          <Column id="VALID_THRU_YY" type="STRING" size="2"/>
          <Column id="STOCK_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="QTY_DC_STD" type="BIGDECIMAL" size="14"/>
          <Column id="QTY_DC_RATE" type="BIGDECIMAL" size="14"/>
          <Column id="AMT_DC_STD" type="BIGDECIMAL" size="21"/>
          <Column id="AMT_DC_RATE" type="BIGDECIMAL" size="14"/>
          <Column id="AR_CUSTCD" type="BIGDECIMAL" size="11"/>
          <Column id="AR_CUSTNM" type="STRING" size="200"/>
          <Column id="AR_SAUPNO" type="STRING" size="13"/>
          <Column id="AR_ADDR" type="STRING" size="4000"/>
          <Column id="AR_NAME" type="STRING" size="100"/>
          <Column id="AR_TEL" type="STRING" size="4000"/>
          <Column id="AR_EMAIL" type="STRING" size="4000"/>
          <Column id="APPRV_NUM" type="STRING" size="20"/>
          <Column id="FRNC_STOR_NUM" type="STRING" size="50"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item30" compid="cmb_validThruYy" propid="value" datasetid="ds_order" columnid="VALID_THRU_YY"/>
      <BindItem id="item29" compid="cmb_validThruMm" propid="value" datasetid="ds_order" columnid="VALID_THRU_MM"/>
      <BindItem id="item27" compid="cmb_cardComp" propid="value" datasetid="ds_order" columnid="CARD_COMP"/>
      <BindItem id="item26" compid="cmb_cardClass" propid="value" datasetid="ds_order" columnid="CARD_CLASS"/>
      <BindItem id="item28" compid="msk_cardNum" propid="value" datasetid="ds_order" columnid="CARD_NUM"/>
      <BindItem id="item5" compid="sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item4" compid="sta_detail04" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item3" compid="sta_detail03" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item2" compid="sta_detail02" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item25" compid="cmb_instPeriod" propid="value" datasetid="ds_order" columnid="INST_PERIOD"/>
      <BindItem id="item18" compid="sta_detail18" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item24" compid="cmb_payMethod" propid="value" datasetid="ds_order" columnid="PAY_METHOD"/>
      <BindItem id="item15" compid="sta_detail15" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item10" compid="sta_detail10" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item14" compid="sta_detail14" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item0" compid="sta_detail00" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item1" compid="sta_detail01" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item8" compid="edt_itemCode" propid="value" datasetid="ds_order" columnid="ITEM_CODE"/>
      <BindItem id="item9" compid="edt_itemName" propid="value" datasetid="ds_order" columnid="ITEM_NAME"/>
      <BindItem id="item7" compid="sta_detail07" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item11" compid="sta_detail11" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item16" compid="sta_detail16" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item17" compid="sta_detail17" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item12" compid="msk_salePrice" propid="value" datasetid="ds_order" columnid="SALE_PRICE"/>
      <BindItem id="item13" compid="msk_prQty" propid="value" datasetid="ds_order" columnid="PR_QTY"/>
      <BindItem id="item19" compid="msk_saleAmount" propid="value" datasetid="ds_order" columnid="SALE_AMOUNT"/>
      <BindItem id="item20" compid="msk_dcAmount" propid="value" datasetid="ds_order" columnid="DC_AMOUNT"/>
      <BindItem id="item21" compid="msk_totAmount" propid="value" datasetid="ds_order" columnid="TOT_AMOUNT"/>
      <BindItem id="item6" compid="sta_detail06" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item22" compid="msk_stockQty" propid="value" datasetid="ds_order" columnid="STOCK_QTY"/>
      <BindItem id="item31" compid="msk_admAmount" propid="value" datasetid="ds_order" columnid="ADM_DC_AMOUNT"/>
      <BindItem id="item32" compid="sta_admAmount01" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item33" compid="cmb_saleType" propid="value" datasetid="ds_order" columnid="SALE_TYPE"/>
      <BindItem id="item34" compid="sta_detail09" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item36" compid="sta_detail12" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item38" compid="sta_detail13" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item39" compid="sta_detail19" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item40" compid="sta_detail20" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item23" compid="sta_detail08" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item35" compid="msk_arSaupNo" propid="value" datasetid="ds_order" columnid="AR_SAUPNO"/>
      <BindItem id="item37" compid="sta_detail21" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item41" compid="edt_arAddr" propid="value" datasetid="ds_order" columnid="AR_ADDR"/>
      <BindItem id="item42" compid="edt_arName" propid="value" datasetid="ds_order" columnid="AR_NAME"/>
      <BindItem id="item43" compid="edt_arTel" propid="value" datasetid="ds_order" columnid="AR_TEL"/>
      <BindItem id="item44" compid="edt_arEmail" propid="value" datasetid="ds_order" columnid="AR_EMAIL"/>
      <BindItem id="item46" compid="sta_detail23" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item47" compid="sta_detail24" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item49" compid="edt_apprvNum" propid="value" datasetid="ds_order" columnid="APPRV_NUM"/>
      <BindItem id="item50" compid="edt_frncStorNum" propid="value" datasetid="ds_order" columnid="FRNC_STOR_NUM"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 ******************************************************************************************
 * 시스템구분	: 구매관리>신청관리>판촉상품마감
 * 프로그램명	: FSP00015P1.xfdl
 * 기      능	: 주문변경 팝업
 * 작  성  자	: 백승현
 * 작성  일자	: 2015-07-06
 * 비      고	:
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
 ************************************************************************************************/ 
include "U_lib::lib_conversionCom.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
 ************************************************************************************************/ 
var fa_cardClass = "";
var fa_cardComp = "";
var fa_cardNum = "";
var fa_validThruMm = "";
var fa_validThruYy = "";
/************************************************************************************************
 * FORM EVENT 영역 (필수)
 ************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);

	// FSP Action 정보 생성
	fsp_init(this);

	// 화면 초기화
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 초기화
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	// 공통코드
	var v_fil_cond;
	var v_ds = fn_common_code("'022', '023', '024', '028'", "", "", "non", "Y");

	// 결제수단
	v_fil_cond = "GROUP_CODE == '022'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_pay, v_ds.name);	

	// 할부기간
	v_fil_cond = "GROUP_CODE == '023'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_inst, v_ds.name);

	// 카드사
	v_fil_cond = "GROUP_CODE == '024'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_card, v_ds.name);	

	// 특판판매구분
	v_fil_cond = "GROUP_CODE == '028'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_sale, v_ds.name);

	fn_search();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 공통 단축키 이벤트
 *---------------------------------------------------------------------------------------------*/
function frm_OnKeyDown(obj:Form, e:KeyEventInfo)
{
	gfn_formKeyDown(obj, e);
}

/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
 ************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
	var strSvcID = "SEARCH";
	var strURL   = "U_svc::" + "fs/fsp/FSP00015E_T001.jsp";
	var strInDatasets  = "ds_cond=ds_cond";
	var strOutDatasets = "ds_order=ds_list";
	var strArgument  = "sType='OrdLst'";
		strArgument += " sSpId=" +  wrapQuote(v_spId);
		strArgument += " sSeasonNum=" +  wrapQuote(v_seasonNum);
	var strCallbackFunc = "fn_callback";

	jsp_transaction(this, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, true, true, false);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 입력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 엑셀 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_Excel()
{

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 닫기 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_Close()
{
	this.close();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{

}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
 ************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수
 *---------------------------------------------------------------------------------------------*/
function fn_callback(nErrorCode, strErrorMsg, strSvcID)
{
	switch( strSvcID )
	{
		case "SEARCH":
			if( nErrorCode == 0 )
			{
				fn_setEnable();

				if( !gfn_isNull(ds_order.getColumn(0, "CARD_NUM")) )
				{
					fa_cardClass = ds_order.getColumn(0, "CARD_CLASS");
					fa_cardComp = ds_order.getColumn(0, "CARD_COMP");
					fa_cardNum = ds_order.getColumn(0, "CARD_NUM");
					fa_validThruMm = ds_order.getColumn(0, "VALID_THRU_MM");
					fa_validThruYy = ds_order.getColumn(0, "VALID_THRU_YY");
				}

				if( ds_order.getColumn(0, "ADM_DC_AMOUNT") == 0 )
					ds_order.setColumn(0, "ADM_DC_AMOUNT", v_admDcAmt);
			}
			else
			{
				g_Message("EE", fn_alertMsg("002"));	
			}
			break;
	}
}

/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
 ************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 화면에 나타나는 메시지 코드및 텍스트 리턴
 *---------------------------------------------------------------------------------------------*/
function fn_alertMsg(msgCd)
{
	var v_Msg="";
	switch( msgCd )
	{
		case "000":
			v_Msg= "이(가) 저장되었습니다.";
			break;
		case "001":
			v_Msg= "버튼이 정의 되어 있지않습니다.";
			break;
		case "002":
			v_Msg="서비스 오류:시스템 관리자에게 문의하십시오";
			break;
		case "003":
			v_Msg="필수항목은 반드시 선택하시기 바랍니다.";
			break;	
		case "004":
			v_Msg="작업대상 본사를 선택하세요.";
			break;
		case "005":
			v_Msg="을(를) 입력하세요";
			break;
		case "006":
			v_Msg="삭제할 데이터가 없습니다.";
			break;
		case "007":
			v_Msg="변경된 데이터가 없습니다.";
			break;
		case "008":
			v_Msg="시스템ID가 없습니다.";
			break;			
		default:
			break;			
	}
	return v_Msg;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지불방식에 따른 지불정보 입력상태 제어
 *---------------------------------------------------------------------------------------------*/
function fn_setEnable()
{
	var payMethod = ds_order.getColumn(0, "PAY_METHOD");

	// 지불방식이 카드일 경우 카드정보를 모두 입력해야 한다.
	if( payMethod == "2" )
	{
		cmb_instPeriod.enable  = true;
		cmb_cardClass.enable   = true;
		cmb_cardComp.enable    = true;
		msk_cardNum.enable     = true;
		cmb_validThruMm.enable = true;
		cmb_validThruYy.enable = true;
		edt_apprvNum.enable    = true;
		edt_frncStorNum.enable = true;
		btn_frncStorNum.enable = true;
	}
	else
	{
		cmb_instPeriod.enable  = false;
		cmb_cardClass.enable   = false;
		cmb_cardComp.enable    = false;
		msk_cardNum.enable     = false;
		cmb_validThruMm.enable = false;
		cmb_validThruYy.enable = false;
		edt_apprvNum.enable    = false;
		edt_frncStorNum.enable = false;
		btn_frncStorNum.enable = false;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지불금액 계산
 *---------------------------------------------------------------------------------------------*/
function fn_Calcul(obj, nRow, strColumnID, varOldValue, varNewValue)
{
	var nAmt = 0;
	var nAmt2 = 0;

	// 수량할인
	if( numFormat(obj.getColumn(nRow, "QTY_DC_STD"), 1) <> "0.0" )
	{
		if( Math.abs(toNumber(obj.getColumn(nRow, "PR_QTY"))) >=  toNumber(obj.getColumn(nRow, "QTY_DC_STD")) )
			nAmt = Math.ceil(Math.abs(toNumber(obj.getColumn(nRow, "SALE_AMOUNT"))) * toNumber(obj.getColumn(nRow, "QTY_DC_RATE")) / 100);	
	}

	// 금액할인
	if( numFormat(obj.getColumn(nRow, "AMT_DC_STD"), 1) <> "0.0" )
	{
		if( Math.abs(toNumber(obj.getColumn(nRow, "SALE_AMOUNT"))) >=  toNumber(obj.getColumn(nRow, "AMT_DC_STD")) )
			nAmt2 = Math.ceil(Math.abs(toNumber(obj.getColumn(nRow, "SALE_AMOUNT"))) * toNumber(obj.getColumn(nRow, "AMT_DC_RATE")) / 100);	
	}

	obj.setColumn(nRow, "DC_AMOUNT", greatest(nAmt, nAmt2) * fn_Sign(obj.getColumn(nRow, "PR_QTY")));
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 거래처 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_afterCustPop(obj, arrRtn)
{
	ds_order.setColumn(0, "AR_SAUPNO", arrRtn.saupno);
}

/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
 ************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 데이터 변경 전 이벤트
 *---------------------------------------------------------------------------------------------*/
function ds_order_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
{
	// 지불방식
	if( e.columnid == "PAY_METHOD" )
	{
		if( obj.getColumn(e.row, "SALE_TYPE") == "내부거래" )
		{
			if( e.newvalue <> "Z" )
			{
				g_Message("EE", "내부거래 지불방식을 확인하세요!");
				return false;
			}
		}
		else
		{
			if( e.newvalue == "Z" )
			{
				g_Message("EE", "지불방식을 확인하세요!");
				return false;
			}
		}
	}

	// 수량
	if( e.columnid == "PR_QTY" )
	{
		if( e.newvalue == 0 )
		{
			g_Message("EE", "변경된 수량이 0 입니다.\n 수량을 확인하세요.");
			return false;
		}

		if( e.newvalue > obj.getColumn(0, "STOCK_QTY") )
		{
			g_Message("EE", "현재고량보다 입력한 수량이 많습니다.\n 수량을 확인하세요.");
			return false;
		}
	}

	// 관리자 할인금액
	if( e.columnid == "ADM_DC_AMOUNT" )
	{
		if( toNumber(e.newvalue) > toNumber(obj.getColumn(e.row, "SALE_AMOUNT") - obj.getColumn(e.row, "DC_AMOUNT")) )
		{
			g_Message("EE", "입력한 할인금액이 현재 지불금액 보다 큽니다.");
			return false;
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 데이터 변경 후 이벤트
 *---------------------------------------------------------------------------------------------*/
function ds_order_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 지불방식
	if( e.columnid == "PAY_METHOD" )
	{
		// 카드결제
		if( e.newvalue == "2" )
		{
			cmb_instPeriod.enable	= true;
			cmb_cardClass.enable	= true;
			cmb_cardComp.enable 	= true;
			msk_cardNum.enable 		= true;
			cmb_validThruMm.enable	= true;
			cmb_validThruYy.enable	= true;
			edt_apprvNum.enable     = true;
			edt_frncStorNum.enable  = true;
			btn_frncStorNum.enable  = true;
		}
		else
		{
			cmb_instPeriod.enable	= false;
			cmb_cardClass.enable	= false;
			cmb_cardComp.enable		= false;
			msk_cardNum.enable		= false;
			cmb_validThruMm.enable	= false;
			cmb_validThruYy.enable	= false;
			edt_apprvNum.enable     = false;
			edt_frncStorNum.enable  = false;
			btn_frncStorNum.enable  = false;
			
			ds_order.setColumn(0, "INST_PERIOD", "");
			ds_order.setColumn(0, "CARD_CLASS", "");
			ds_order.setColumn(0, "CARD_COMP", "");
			ds_order.setColumn(0, "CARD_NUM", "");
			ds_order.setColumn(0, "VALID_THRU_MM", "");
			ds_order.setColumn(0, "VALID_THRU_YY", "");
			ds_order.setColumn(0, "APPRV_NUM", "");
			ds_order.setColumn(0, "FRNC_STOR_NUM", "");
		}
	}

	var nAmt;

	// 수량
	if( e.columnid == "PR_QTY" )
	{
		// 총 판매금액
		nAmt = Math.round(toNumber(obj.getColumn(e.row, "SALE_PRICE")) * toNumber(obj.getColumn(e.row, "PR_QTY")));
		obj.setColumn(e.row, "SALE_AMOUNT", nAmt);

		// 배송료, 할인액 계산
		fn_Calcul(obj, e.row, e.columnid, e.oldvalue, e.newvalue);

		// 총 매출금액
		nAmt = toNumber(obj.getColumn(e.row, "SALE_AMOUNT")) - toNumber(obj.getColumn(e.row, "DC_AMOUNT")) - toNumber(obj.getColumn(e.row, "ADM_DC_AMOUNT"));
		obj.setColumn(e.row, "TOT_AMOUNT", nAmt);
	}

	// 관리자 할인금액
	if( e.columnid == "ADM_DC_AMOUNT" )
	{
		nAmt = toNumber(obj.getColumn(e.row, "SALE_AMOUNT")) - toNumber(obj.getColumn(e.row, "DC_AMOUNT")) - toNumber(obj.getColumn(e.row, "ADM_DC_AMOUNT"));
		obj.setColumn(e.row, "TOT_AMOUNT", nAmt);
	}

	// 지불 방식이 변경되면 결제 정보를 새로 입력해야한다.
	// 카드 정보가 변경될 경우 결제 정보를 새로 입력해야한다.
	// 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 확인 버튼 클릭 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_confirm(obj:Button,  e:ClickEventInfo)
{
	var payMethod = ds_order.getColumn(0, "PAY_METHOD");

	// 지불방식이 카드일 경우 카드정보를 모두 입력해야 한다.
	if( payMethod == "2" )
	{
		var instPeriod	= ds_order.getColumn(0, "INST_PERIOD");		// 할부
		var cardClass	= ds_order.getColumn(0, "CARD_CLASS");		// 카드구분
		var cardComp	= ds_order.getColumn(0, "CARD_COMP");		// 카드회사
		var cardNum		= ds_order.getColumn(0, "CARD_NUM");		// 카드번호
		var validThruMm = ds_order.getColumn(0, "VALID_THRU_MM");	// 카드유효기간 월
		var validThruYy = ds_order.getColumn(0, "VALID_THRU_YY");	// 카드유효기간 년
		var apprvNum    = ds_order.getColumn(0, "APPRV_NUM");		// 승인번호
		var frncStorNum = ds_order.getColumn(0, "FRNC_STOR_NUM");	// 가맹점번호

		if( !gfn_length(instPeriod) || !gfn_length(cardClass) || !gfn_length(cardComp) || !gfn_length(cardNum) || !gfn_length(validThruMm) || !gfn_length(validThruYy) )
		{
			g_Message("EE", "카드정보를 입력하세요.");
			return;
		}

		if(  !gfn_length(apprvNum) || !gfn_length(frncStorNum) )
		{
			g_Message("EE", "지불정보를 입력하세요.");
			return;
		}
	}

	// 지불방식이 계산서발행일 경우 결제자 상세정보를 모두 입력해야 한다.
	if( payMethod == "E" )
	{
		var arCustCd	= ds_order.getColumn(0, "AR_CUSTCD");	// 거래처코드
		var arCustNm	= ds_order.getColumn(0, "AR_CUSTNM");	// 거래처명
		var arSaupNo	= ds_order.getColumn(0, "AR_SAUPNO");	// 사업자번호
		var arAddr		= ds_order.getColumn(0, "AR_ADDR");		// 주소
		var arName		= ds_order.getColumn(0, "AR_NAME");		// 이름
		var arTel		= ds_order.getColumn(0, "AR_TEL");		// 전화번호
		var arEmail		= ds_order.getColumn(0, "AR_EMAIL");	// 이메일

		if( !gfn_length(arCustCd) || !gfn_length(arSaupNo) || !gfn_length(arAddr) || !gfn_length(arName) || !gfn_length(arTel) || !gfn_length(arEmail) )
		{
			g_Message("EE", "결제자 정보를 입력하세요.");
			return;
		}
	}

	v_dsObj.copyData(ds_order);
	this.close();
}

function btn_frncStorNum_onclick(obj:Button,  e:ClickEventInfo)
{
	var frncStorNum = "";
		// 팝업 호출
	var args = {  v_rqSabun:""
				, v_frncStorNum:frncStorNum
				, v_scrn:"15E"
			};
	var rtn = gfn_dialog("", "U_FSP::FSP00015P2.xfdl", args);

	if( !gfn_isNull(rtn) )
	{
		ds_order.setColumn(0, "FRNC_STOR_NUM", rtn);
	}
	else
	{
		ds_order.setColumn(0, "FRNC_STOR_NUM", "");
	}
}
]]></Script>
  </Form>
</FDL>
