<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSP00035E" onload="form_onload" titletext="구매신청(추가)" position="absolute 0 0 1200 700" scrollbars="none" onsize="FSP00035E_onsize">
    <Layouts>
      <Layout>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 15 10 1185 51" anchor="left top right"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1185 0 1200 687"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 10 15 687"/>
        <Static id="Static15" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 1237 10"/>
        <Static id="Static23" text="W10" visible="false" position="absolute 15 41 1237 51" style="background:#ff000055;align:center middle;"/>
        <Static id="Static24" text="W15" visible="false" position="absolute 15 20 30 41" style="background:#ff000055;align:center middle;"/>
        <Static id="Static21" text="W10" visible="false" position="absolute 15 10 1237 20" style="background:#ff000055;align:center middle;"/>
        <Static id="Static14" text="W30" visible="false" position="absolute 689 20 719 41" style="background:#ff000055;align:center middle;"/>
        <Static id="st_ContractStart02" text="승인자" class="sta_WFSA_label" position="absolute 655 -4 702 17" visible="false"/>
        <Static id="Static17" text="W30" visible="false" position="absolute 786 20 816 41" style="background:#ff000055;align:center middle;"/>
        <Static id="st_ContractStart03" text="사유" class="sta_WFSA_label" position="absolute 720 20 767 41"/>
        <Static id="Static18" text="W10" visible="false" position="absolute 866 20 876 41" style="background:#ff000055;align:center middle;"/>
        <Combo codecolumn="SABUN" datacolumn="NM_KOR" id="cbo_Approver" imemode="native" index="0" innerdataset="ds_approver" type="filter" taborder="5" position="absolute 709 -4 786 17" visible="false"/>
        <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_reason" imemode="native" index="0" innerdataset="@ds_reson" type="dropdown" taborder="3" position="absolute 762 20 863 41" onitemchanged="cbo_reason_OnChanged"/>
        <Static id="Static02" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 687 1252 700" anchor="left top"/>
        <Static id="Static26" text="W15" visible="false" position="absolute 1170 20 1185 41" style="background:#ff000055;align:center middle;"/>
        <Static id="st_ContractStart" text="신청일" class="sta_WFSA_label" position="absolute 30 20 85 41"/>
        <MaskEdit id="msk_pr_date" taborder="0" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" oneditclick="g_Date_OnFocus" class="msk_WF_Cal" enable="false" position="absolute 84 20 158 41"/>
        <Button id="btn_PrDate" taborder="37" tabstop="false" onclick="g_CalButton_OnClick" class="btn_WF_cal" enable="false" position="absolute 157 20 178 41" userdata="me_PrDate"/>
        <Static id="st_ContractStart00" text="입고일" class="sta_WFSA_label" position="absolute 207 20 262 41"/>
        <MaskEdit id="msk_need_date" taborder="1" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" oneditclick="g_Date_OnFocus" class="msk_WF_Cal" enable="false" position="absolute 261 20 335 41"/>
        <Button id="btn_NeedDate" taborder="39" tabstop="false" onclick="g_CalButton_OnClick" class="btn_WF_cal" enable="false" position="absolute 334 20 355 41" userdata="me_NeedDate"/>
        <Static id="st_ContractStart01" text="창고" class="sta_WFSA_label" position="absolute 385 20 440 41"/>
        <Combo id="cbo_subInv" taborder="2" innerdataset="ds_subinv" codecolumn="SUBINV_CODE" datacolumn="SUBINV_NAME" position="absolute 427 20 689 41" canitemchange="cbo_subInv_canitemchange"/>
        <Static id="Static04" text="h13" onclick="Static04_onclick" class="Guide01_AreaRed" visible="false" position="absolute 15 51 1237 64"/>
        <Static id="Static01" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 253 85 1237 90" anchor="left top"/>
        <Splitter id="sp_line" min="96" max="685" type="vertical" class="spt_WF_2" position="absolute 15 403 1185 413" anchor="left top right">
          <Formats>
            <Format id="default">
              <SplitterItems id="items">
                <SplitterItem id="item00" bindtype="resize" position="leftortop" offset="5" componentid="tab_Item"/>
                <SplitterItem id="item01" bindtype="resize" position="rightorbottom" offset="5" componentid="div_bottom"/>
              </SplitterItems>
            </Format>
          </Formats>
        </Splitter>
        <Div id="div_bottom" taborder="41" text="Div00" position="absolute 15 418 1185 687" anchor="all" scrollbars="none">
          <Layouts>
            <Layout>
              <Grid id="grd_pr" taborder="0" binddataset="ds_pr_item" scrollbars="autoboth" wheelscrollrow="1" autoenter="select" useinputpanel="false" selecttype="multirow" cellsizingtype="col" autofittype="col" position="absolute 0 27 1170 269" anchor="all" onexpanddown="div_bottom_grd_pr_onexpanddown" tabstop="false" class="grd_WF_LineNone" onheadclick="div_bottom_grd_pr_onheadclick">
                <Formats>
                  <Format id="Default">
                    <Columns>
                      <Column size="30" band="left"/>
                      <Column size="100" band="left"/>
                      <Column size="200"/>
                      <Column size="120"/>
                      <Column size="51"/>
                      <Column size="60"/>
                      <Column size="71"/>
                      <Column size="60"/>
                      <Column size="85"/>
                      <Column size="48"/>
                      <Column size="49"/>
                      <Column size="60"/>
                      <Column size="125"/>
                      <Column size="66"/>
                    </Columns>
                    <Rows>
                      <Row size="26" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="text" class="head_Excel"/>
                      <Cell col="1" displaytype="text" style="align:center;linetype:nocross;" text="자재코드" taborder="undefined"/>
                      <Cell col="2" displaytype="text" style="align:center;" text="자재명"/>
                      <Cell col="3" displaytype="text" style="align:center;" text="규격"/>
                      <Cell col="4" displaytype="text" style="align:center;" text="단위"/>
                      <Cell col="5" displaytype="text" style="align:center;" text="원산지"/>
                      <Cell col="6" displaytype="text" text="단가"/>
                      <Cell col="7" displaytype="text" class="grd_WF_Essential" text="신청량"/>
                      <Cell col="8" displaytype="text" style="align:center;" text="금액"/>
                      <Cell col="9" displaytype="text" style="align:center;" text="과/면세"/>
                      <Cell col="10" text="D_Day"/>
                      <Cell col="11" displaytype="text" style="align:center;" text="센터경유"/>
                      <Cell col="12" displaytype="text" style="align:center;" class="grd_WF_Essential" text="비고"/>
                      <Cell col="13" text="진행상태"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="text" style="align:center;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" expr="expr:currow+1"/>
                      <Cell col="1" displaytype="text" edittype="expand" style="align:center;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:ITEM_CODE" expandshow="show" expandsize="24" expandimage="URL('theme://Images\new\grd_WF_ExpandImage.png')"/>
                      <Cell col="2" displaytype="text" edittype="expr:gfn_isNull(IMG_PATH) ? 'none' : 'expand'" style="align:left;padding:EXPR(expr:gfn_isNull(FEATURE_NAME) ? '0 0 0 5' : '0 0 0 45');background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');backgroundimage:EXPR(FEATURE_NAME);" text="bind:ITEM_NAME" expandshow="expr:gfn_isNull(IMG_PATH) ? 'hide' : 'show'" expandsize="24" expandimage="URL('theme://Images/new/grd_WF_Camerabtn.png')"/>
                      <Cell col="3" displaytype="text" style="align:left;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:ITEM_SIZE"/>
                      <Cell col="4" displaytype="text" style="align:center;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:PO_UOM"/>
                      <Cell col="5" displaytype="text" style="align:left;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:ORIGIN_TYPE"/>
                      <Cell col="6" displaytype="number" style="align:right;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:MARGIN_PRICE"/>
                      <Cell col="7" displaytype="number" edittype="expr:PR_YN=='Y' ? (LINE_STATUS == 'DL' || LINE_STATUS == 'PD' ? 'none' : 'masknumber') : 'none'" editfilter="number" style="align:right;background:EXPR(LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : '#ffdad7ff');background2:EXPR(LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : '#ffdad7ff');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');selectbackground:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#a9a9a932' : '#ffdad7ff');selectcolor:black;" text="bind:PR_QTY" mask="#,##0.0#" editautoselect="true" editlimitbymask="both"/>
                      <Cell col="8" displaytype="number" style="align:right;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:PR_AMT"/>
                      <Cell col="9" displaytype="combo" style="align:center;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:TAX_CODE" combodataset="ds_tax" combocodecol="code" combodatacol="code_name"/>
                      <Cell col="10" style="background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:D_DAY"/>
                      <Cell col="11" displaytype="text" style="align:center;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:CENTER_FLAG"/>
                      <Cell col="12" displaytype="text" edittype="expr:PR_YN=='Y' ? (LINE_STATUS == 'DL' || LINE_STATUS == 'PD' ? 'none' : 'text') : 'none'" style="align:left;background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default') : 'red');color2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default') : 'red');" text="bind:PR_REMARK" editlimit="200"/>
                      <Cell col="13" displaytype="combo" edittype="none" style="background:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');background2:EXPR(PR_YN=='Y' ? (LINE_STATUS == 'PR' || LINE_STATUS == 'PD' || LINE_STATUS == '003' ? '#a9a9a932' : LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? '#ff63471e' : 'default') : '#ff63471e');color:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');color2:EXPR(LINE_STATUS == 'DL' || LINE_STATUS == 'GC' || LINE_STATUS == 'IV' ? 'gray' : 'default');" text="bind:LINE_STATUS" combodataset="ds_line_status" combocodecol="CODE" combodatacol="CODE_NAME"/>
                    </Band>
                  </Format>
                  <Format id="Default0">
                    <Columns>
                      <Column size="30"/>
                      <Column size="101"/>
                      <Column size="188"/>
                      <Column size="56"/>
                      <Column size="121"/>
                      <Column size="51"/>
                      <Column size="71"/>
                      <Column size="60"/>
                      <Column size="101"/>
                      <Column size="48"/>
                      <Column size="60"/>
                      <Column size="238"/>
                    </Columns>
                    <Rows>
                      <Row size="26" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="text" class="head_Excel"/>
                      <Cell col="1" displaytype="text" style="align:center;" text="자재코드"/>
                      <Cell col="2" displaytype="text" style="align:center;" text="자재명"/>
                      <Cell col="3" displaytype="text" style="align:center;" text="자재특성"/>
                      <Cell col="4" displaytype="text" style="align:center;" text="규격"/>
                      <Cell col="5" displaytype="text" style="align:center;" text="단위"/>
                      <Cell col="6" displaytype="text" text="단가"/>
                      <Cell col="7" displaytype="text" text="신청량"/>
                      <Cell col="8" displaytype="text" style="align:center;" text="금액"/>
                      <Cell col="9" displaytype="text" style="align:center;" text="과/면세"/>
                      <Cell col="10" displaytype="text" style="align:center;" text="센터경유"/>
                      <Cell col="11" displaytype="text" style="align:center;" text="비고"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                      <Cell col="1" displaytype="text" style="align:center;" text="bind:ITEM_CODE"/>
                      <Cell col="2" displaytype="text" style="align:left;" text="bind:ITEM_NAME"/>
                      <Cell col="3" displaytype="text" style="align:center;" text="bind:FEATURE_NAME"/>
                      <Cell col="4" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                      <Cell col="5" displaytype="text" style="align:center;" text="bind:PO_UOM"/>
                      <Cell col="6" displaytype="number" edittype="text" editfilter="integer" style="align:left;" text="bind:MARGIN_PRICE"/>
                      <Cell col="7" displaytype="number" edittype="text" editfilter="number" style="align:left;" text="bind:PR_QTY"/>
                      <Cell col="8" displaytype="number" style="align:left;" text="bind:PR_AMT"/>
                      <Cell col="9" displaytype="combo" style="align:center;" text="bind:TAX_CODE" combodataset="ds_tax" combocodecol="TAX_CODE" combodatacol="TAX_NAME"/>
                      <Cell col="10" displaytype="text" style="align:center;" text="bind:CENTER_FLAG"/>
                      <Cell col="11" displaytype="text" edittype="normal" style="align:left;" text="bind:REMARK"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="img_Tag080" text="신청리스트" class="sta_WF_Title01" position="absolute 0 9 370 27" anchor="left top"/>
              <Static id="Static19" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 22 1222 27" anchor="left top"/>
              <Button id="btn_DelItem" taborder="1" text="자재삭제" onclick="btn_DelItem_OnClick" class="btn_WF_Custom" position="absolute 1097 0 1170 22" anchor="top right" tabstop="true" hotkey="CTRL+ALT+UP"/>
              <Button id="btn_batch_add" taborder="2" text="일괄추가" class="btn_WF_AllCopyDown" position="absolute 1019 0 1095 22" anchor="top right" visible="false" onclick="div_bottom_btn_batch_add_onclick" hotkey="CTRL+ALT+DOWN"/>
              <Static id="Static00" text="(배송중 자재 : 수량수정 불가)" position="absolute 89 5 309 26" style="color:red;font:Gulim,9,bold;"/>
            </Layout>
          </Layouts>
        </Div>
        <Combo id="cbo_reason_remark" taborder="4" position="absolute 864 20 1090 41" index="-1" innerdataset="@ds_reson_d" datacolumn="CODE_NAME" codecolumn="CODE" enable="false"/>
        <Tab id="tab_Item" taborder="42" tabindex="0" scrollbars="autoboth" position="absolute 15 64 1185 398" anchor="left top right" style="border:0 solid #5f697bff,0 solid #aaaaaaff,0 solid #aaaaaaff,0 solid #aaaaaaff;" tabstop="true" onchanged="tab_Item_onchanged" tabjustify="false" multiline="false" rotatetext="false" dragscrolltype="both">
          <Tabpages>
            <Tabpage id="tab1" text="자재 추가" scrollbars="none">
              <Layouts>
                <Layout width="1170" height="308"/>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab2" text="최근 DATA" scrollbars="none"/>
            <Tabpage id="tab3" text="즐겨찾기" scrollbars="none"/>
          </Tabpages>
        </Tab>
        <Button id="btn_Confirm" onclick="Common_Btn_common_OnClick" taborder="7" text="확정" position="absolute 1084 64 1134 85" class="btn_WF_Custom" image="" anchor="top right" tabstop="true" enable="true"/>
        <Button id="btn_Close" onclick="Common_Btn_common_OnClick" taborder="8" text="닫기" position="absolute 1135 64 1185 85" class="btn_WF_Custom" image="" anchor="top right" tabstop="true" enable="true"/>
        <Button id="btn_Save" onclick="Common_Btn_common_OnClick" taborder="6" text="임시저장" position="absolute 1010 64 1083 85" class="btn_WF_Custom" image="" anchor="top right" tabstop="true" enable="false"/>
        <Static id="sta_info" class="sta_WF_DiscInfo" position="absolute 359 69 925 84"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_condi" useclientlayout="true">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="TYPE" type="STRING" size="256"/>
          <Column id="PR_SABUN" type="STRING" size="256"/>
          <Column id="PR_DEPT_ID" type="STRING" size="256"/>
          <Column id="PO_TYPE" type="STRING" size="256"/>
          <Column id="PO_TYPE_NM" type="STRING" size="256"/>
          <Column id="PR_UPJANG" type="STRING" size="256"/>
          <Column id="PR_UPJANG_NM" type="STRING" size="256"/>
          <Column id="RC_UPJANG" type="STRING" size="256"/>
          <Column id="RC_UPJANG_NM" type="STRING" size="256"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="128"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="128"/>
          <Column id="PR_NUM" type="STRING" size="256"/>
          <Column id="APPROVE_NUM" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="SORT_TYPE" type="STRING" size="256"/>
          <Column id="STATUS" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_subinv">
        <ColumnInfo>
          <Column id="SUBINV_CODE" size="20" type="STRING"/>
          <Column id="SUBINV_NAME" size="100" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_approver">
        <ColumnInfo>
          <Column id="SABUN" size="20" type="STRING"/>
          <Column id="NM_KOR" size="100" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_item_list" onrowposchanged="ds_item_list_OnRowPosChanged">
        <ColumnInfo>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="1"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="G_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="REMARK" type="STRING" size="255"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="255"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="14"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="14"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="KEEPING_TYPE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="14"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="22"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="8"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAY_YN" type="STRING" size="1"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pr_item" oncolumnchanged="ds_pr_item_OnColumnChanged">
        <ColumnInfo>
          <Column id="ITEM_CODE" type="string" size="18"/>
          <Column id="ITEM_NAME" type="string" size="601"/>
          <Column id="ITEM_CLASS4" type="string" size="18"/>
          <Column id="FEATURE_NAME" type="string" size="1"/>
          <Column id="ITEM_SIZE" type="string" size="1000"/>
          <Column id="PO_UOM" type="string" size="18"/>
          <Column id="KG_QTY" type="bigdecimal" size="39"/>
          <Column id="CANCEL_PR_QTY" type="bigdecimal" size="39"/>
          <Column id="G_PRICE" type="bigdecimal" size="39"/>
          <Column id="PR_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_AMT" type="bigdecimal" size="39"/>
          <Column id="TOT_AMT" type="bigdecimal" size="39"/>
          <Column id="TAX_CODE" type="string" size="3"/>
          <Column id="CENTER_FLAG" type="string" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="256"/>
          <Column id="REMARK" type="string" size="255"/>
          <Column id="POINT_FLAG" type="string" size="1"/>
          <Column id="SUBINV_CODE" type="string" size="8"/>
          <Column id="NEED_DATE" type="string" size="8"/>
          <Column id="UPJANG" type="bigdecimal" size="39"/>
          <Column id="DEPT_ID" type="string" size="6"/>
          <Column id="ACCTCD" type="string" size="255"/>
          <Column id="BUD_CLS" type="string" size="30"/>
          <Column id="MU_CD" type="string" size="4"/>
          <Column id="INVAT_FLAG" type="string" size="1"/>
          <Column id="OUTVAT_FLAG" type="string" size="1"/>
          <Column id="MIN_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="MAX_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="CENTER_CODE" type="string" size="18"/>
          <Column id="STOCK_FLAG" type="string" size="1"/>
          <Column id="BARCODE" type="string" size="60"/>
          <Column id="KEEPING_TYPE" type="string" size="60"/>
          <Column id="MULTIPLIER_QTY" type="bigdecimal" size="14"/>
          <Column id="BUDDEPT_ID" type="string" size="30"/>
          <Column id="USE_YN" type="string" size="1"/>
          <Column id="CONTRACT_YN" type="string" size="1"/>
          <Column id="MARGIN_PRICE" type="string" size="40"/>
          <Column id="UNIT_PRICE" type="bigdecimal" size="22"/>
          <Column id="CUSTCD" type="bigdecimal" size="39"/>
          <Column id="CHEAP_YN" type="string" size="1"/>
          <Column id="KG_CONVERT_RATE" type="bigdecimal" size="39"/>
          <Column id="MARGIN_RATE" type="bigdecimal" size="8"/>
          <Column id="AP_UNITPRICE_UPJANG" type="bigdecimal" size="39"/>
          <Column id="RESTRICT_PERIOD" type="string" size="21"/>
          <Column id="RESTRICT_REASON" type="string" size="200"/>
          <Column id="DUTY_END_DATE" type="string" size="255"/>
          <Column id="MIN_DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="REAL_USE_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_YN" type="string" size="1"/>
          <Column id="D_DAY" type="bigdecimal" size="39"/>
          <Column id="D_DAYS" type="bigdecimal" size="39"/>
          <Column id="D_TIMES" type="bigdecimal" size="39"/>
          <Column id="D_DAY_YN" type="string" size="1"/>
          <Column id="SPICE_YN" type="string" size="1"/>
          <Column id="CORN_YN" type="string" size="1"/>
          <Column id="IMG_PATH" type="string" size="756"/>
          <Column id="ORIGIN_NAT" type="string" size="60"/>
          <Column id="ORIGIN_TYPE" type="string" size="60"/>
          <Column id="VD_SN" type="string" size="18"/>
          <Column id="APPLY_SD" type="string" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_InsItem">
        <ColumnInfo>
          <Column id="ACCTCD" size="7" type="STRING"/>
          <Column id="BARCODE" size="13" type="STRING"/>
          <Column id="BUD_CLS" size="6" type="STRING"/>
          <Column id="BUDDEPT_ID" size="22" type="BIGDECIMAL"/>
          <Column id="CENTER_CODE" size="22" type="BIGDECIMAL"/>
          <Column id="CENTER_FLAG" size="1" type="STRING"/>
          <Column id="CUSTCD" size="40" type="STRING"/>
          <Column id="D_DAY" size="22" type="BIGDECIMAL"/>
          <Column id="D_DAYS" size="22" type="BIGDECIMAL"/>
          <Column id="D_TIMES" size="22" type="BIGDECIMAL"/>
          <Column id="DEPT_ID" size="22" type="BIGDECIMAL"/>
          <Column id="DUTY_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="EXP_CD" size="3" type="STRING"/>
          <Column id="FEATURE_NAME" size="100" type="STRING"/>
          <Column id="G_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="IMG_PATH" size="100" type="STRING"/>
          <Column id="INVAT_FLAG" size="1" type="STRING"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="KEEPING_TYPE" size="50" type="STRING"/>
          <Column id="KG_CONVERT_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="MIN_ORD_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MAX_ORD_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MU_CD" size="2" type="STRING"/>
          <Column id="MULTIPLIER_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_DATE" size="8" type="STRING"/>
          <Column id="OUTVAT_FLAG" size="1" type="STRING"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="ORIGIN_INFO" size="100" type="STRING"/>
          <Column id="POINT_FLAG" size="1" type="STRING"/>
          <Column id="PR_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="PR_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PR_YN" size="1" type="STRING"/>
          <Column id="REAL_USE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="REMARK" size="0" type="STRING"/>
          <Column id="RESTRICT_PERIOD" size="21" type="STRING"/>
          <Column id="RESTRICT_REASON" size="200" type="STRING"/>
          <Column id="STOCK_FLAG" size="1" type="STRING"/>
          <Column id="SUBINV_CODE" size="8" type="STRING"/>
          <Column id="TAX_CODE" size="3" type="STRING"/>
          <Column id="UNIT_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="D_DAY_YN" size="1" type="STRING"/>
          <Column id="MIN_DUTY_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="DUTY_END_DATE" size="100" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_item_list_recent" onrowposchanged="ds_item_list_recent_OnRowPosChanged">
        <ColumnInfo>
          <Column id="ACCTCD" size="7" type="STRING"/>
          <Column id="BARCODE" size="13" type="STRING"/>
          <Column id="BUD_CLS" size="6" type="STRING"/>
          <Column id="BUDDEPT_ID" size="22" type="BIGDECIMAL"/>
          <Column id="CENTER_CODE" size="22" type="BIGDECIMAL"/>
          <Column id="CENTER_FLAG" size="1" type="STRING"/>
          <Column id="CUSTCD" size="40" type="STRING"/>
          <Column id="D_DAY" size="22" type="BIGDECIMAL"/>
          <Column id="D_DAYS" size="22" type="BIGDECIMAL"/>
          <Column id="D_TIMES" size="22" type="BIGDECIMAL"/>
          <Column id="DEPT_ID" size="22" type="BIGDECIMAL"/>
          <Column id="DUTY_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="EXP_CD" size="3" type="STRING"/>
          <Column id="FEATURE_NAME" size="100" type="STRING"/>
          <Column id="G_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="IMG_PATH" size="100" type="STRING"/>
          <Column id="INVAT_FLAG" size="1" type="STRING"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="KEEPING_TYPE" size="50" type="STRING"/>
          <Column id="KG_CONVERT_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="MIN_ORD_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MAX_ORD_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MU_CD" size="2" type="STRING"/>
          <Column id="MULTIPLIER_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_DATE" size="8" type="STRING"/>
          <Column id="OUTVAT_FLAG" size="1" type="STRING"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="ORIGIN_INFO" size="100" type="STRING"/>
          <Column id="POINT_FLAG" size="1" type="STRING"/>
          <Column id="PR_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="PR_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PR_YN" size="1" type="STRING"/>
          <Column id="SCH_INFO" size="225" type="STRING"/>
          <Column id="REAL_USE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="REMARK" size="0" type="STRING"/>
          <Column id="RESTRICT_PERIOD" size="21" type="STRING"/>
          <Column id="RESTRICT_REASON" size="200" type="STRING"/>
          <Column id="STOCK_FLAG" size="1" type="STRING"/>
          <Column id="SUBINV_CODE" size="8" type="STRING"/>
          <Column id="TAX_CODE" size="3" type="STRING"/>
          <Column id="UNIT_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="D_DAY_YN" size="1" type="STRING"/>
          <Column id="MIN_DUTY_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="DUTY_END_DATE" size="100" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_item_list_open" onrowposchanged="ds_item_list_open_OnRowPosChanged">
        <ColumnInfo>
          <Column id="ACCTCD" size="7" type="STRING"/>
          <Column id="BARCODE" size="13" type="STRING"/>
          <Column id="BUD_CLS" size="6" type="STRING"/>
          <Column id="BUDDEPT_ID" size="22" type="BIGDECIMAL"/>
          <Column id="CENTER_CODE" size="22" type="BIGDECIMAL"/>
          <Column id="CENTER_FLAG" size="1" type="STRING"/>
          <Column id="CUSTCD" size="40" type="STRING"/>
          <Column id="D_DAY" size="22" type="BIGDECIMAL"/>
          <Column id="D_DAYS" size="22" type="BIGDECIMAL"/>
          <Column id="D_TIMES" size="22" type="BIGDECIMAL"/>
          <Column id="DEPT_ID" size="22" type="BIGDECIMAL"/>
          <Column id="DUTY_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="EXP_CD" size="3" type="STRING"/>
          <Column id="FEATURE_NAME" size="100" type="STRING"/>
          <Column id="G_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="IMG_PATH" size="100" type="STRING"/>
          <Column id="INVAT_FLAG" size="1" type="STRING"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="KEEPING_TYPE" size="50" type="STRING"/>
          <Column id="KG_CONVERT_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="MIN_ORD_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MAX_ORD_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MU_CD" size="2" type="STRING"/>
          <Column id="MULTIPLIER_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_DATE" size="8" type="STRING"/>
          <Column id="OUTVAT_FLAG" size="1" type="STRING"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="ORIGIN_INFO" size="100" type="STRING"/>
          <Column id="POINT_FLAG" size="1" type="STRING"/>
          <Column id="PR_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="PR_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PR_YN" size="1" type="STRING"/>
          <Column id="SCH_INFO" size="225" type="STRING"/>
          <Column id="REAL_USE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="REMARK" size="0" type="STRING"/>
          <Column id="RESTRICT_PERIOD" size="21" type="STRING"/>
          <Column id="RESTRICT_REASON" size="200" type="STRING"/>
          <Column id="STOCK_FLAG" size="1" type="STRING"/>
          <Column id="SUBINV_CODE" size="8" type="STRING"/>
          <Column id="TAX_CODE" size="3" type="STRING"/>
          <Column id="UNIT_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="D_DAY_YN" size="1" type="STRING"/>
          <Column id="MIN_DUTY_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="DUTY_END_DATE" size="100" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reson" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GROUP_NAME" type="STRING" size="100"/>
          <Column id="GROUP_CODE" type="STRING" size="50"/>
          <Column id="CODE" type="STRING" size="50"/>
          <Column id="CODE_NAME" type="STRING" size="500"/>
          <Column id="CONTENTS" type="STRING" size="300"/>
          <Column id="SORT_SEQ" type="BIGDECIMAL" size="39"/>
          <Column id="SYSTEM_YN" type="STRING" size="1"/>
          <Column id="SET1" type="STRING" size="100"/>
          <Column id="SET2" type="STRING" size="100"/>
          <Column id="SET3" type="STRING" size="100"/>
          <Column id="SET4" type="STRING" size="100"/>
          <Column id="SET5" type="STRING" size="100"/>
          <Column id="REMARK" type="STRING" size="300"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="ATTR01" type="STRING" size="300"/>
          <Column id="ATTR02" type="STRING" size="300"/>
          <Column id="ATTR03" type="STRING" size="300"/>
          <Column id="ATTR04" type="STRING" size="300"/>
          <Column id="ATTR05" type="STRING" size="300"/>
          <Column id="ATTR06" type="STRING" size="300"/>
          <Column id="ATTR07" type="STRING" size="300"/>
          <Column id="ATTR08" type="STRING" size="300"/>
          <Column id="ATTR09" type="STRING" size="300"/>
          <Column id="ATTR10" type="STRING" size="300"/>
          <Column id="CUSER" type="STRING" size="20"/>
          <Column id="CDATE" type="DATETIME" size="7"/>
          <Column id="UUSER" type="STRING" size="20"/>
          <Column id="UDATE" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_reson_d" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GROUP_NAME" type="STRING" size="100"/>
          <Column id="GROUP_CODE" type="STRING" size="50"/>
          <Column id="CODE" type="STRING" size="50"/>
          <Column id="CODE_NAME" type="STRING" size="500"/>
          <Column id="CONTENTS" type="STRING" size="300"/>
          <Column id="SORT_SEQ" type="BIGDECIMAL" size="39"/>
          <Column id="SYSTEM_YN" type="STRING" size="1"/>
          <Column id="SET1" type="STRING" size="100"/>
          <Column id="SET2" type="STRING" size="100"/>
          <Column id="SET3" type="STRING" size="100"/>
          <Column id="SET4" type="STRING" size="100"/>
          <Column id="SET5" type="STRING" size="100"/>
          <Column id="REMARK" type="STRING" size="300"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="ATTR01" type="STRING" size="300"/>
          <Column id="ATTR02" type="STRING" size="300"/>
          <Column id="ATTR03" type="STRING" size="300"/>
          <Column id="ATTR04" type="STRING" size="300"/>
          <Column id="ATTR05" type="STRING" size="300"/>
          <Column id="ATTR06" type="STRING" size="300"/>
          <Column id="ATTR07" type="STRING" size="300"/>
          <Column id="ATTR08" type="STRING" size="300"/>
          <Column id="ATTR09" type="STRING" size="300"/>
          <Column id="ATTR10" type="STRING" size="300"/>
          <Column id="CUSER" type="STRING" size="20"/>
          <Column id="CDATE" type="DATETIME" size="7"/>
          <Column id="UUSER" type="STRING" size="20"/>
          <Column id="UDATE" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_del_item">
        <ColumnInfo>
          <Column id="ITEM_CODE" type="string" size="18"/>
          <Column id="ITEM_NAME" type="string" size="601"/>
          <Column id="ITEM_CLASS4" type="string" size="18"/>
          <Column id="FEATURE_NAME" type="string" size="1"/>
          <Column id="ITEM_SIZE" type="string" size="1000"/>
          <Column id="PO_UOM" type="string" size="18"/>
          <Column id="KG_QTY" type="bigdecimal" size="39"/>
          <Column id="ONHAND_QTY" type="bigdecimal" size="14"/>
          <Column id="CANCEL_PR_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_QTY" type="bigdecimal" size="39"/>
          <Column id="TOT_AMT" type="bigdecimal" size="39"/>
          <Column id="TAX_CODE" type="string" size="3"/>
          <Column id="CENTER_FLAG" type="string" size="1"/>
          <Column id="REMARK" type="string" size="255"/>
          <Column id="POINT_FLAG" type="string" size="1"/>
          <Column id="SUBINV_CODE" type="string" size="8"/>
          <Column id="NEED_DATE" type="string" size="8"/>
          <Column id="UPJANG" type="bigdecimal" size="7"/>
          <Column id="DEPT_ID" type="string" size="6"/>
          <Column id="ACCTCD" type="string" size="255"/>
          <Column id="BUD_CLS" type="string" size="30"/>
          <Column id="MU_CD" type="string" size="4"/>
          <Column id="INVAT_FLAG" type="string" size="1"/>
          <Column id="OUTVAT_FLAG" type="string" size="1"/>
          <Column id="MIN_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="MAX_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="CENTER_CODE" type="string" size="18"/>
          <Column id="STOCK_FLAG" type="string" size="1"/>
          <Column id="BARCODE" type="string" size="60"/>
          <Column id="MULTIPLIER_QTY" type="bigdecimal" size="14"/>
          <Column id="BUDDEPT_ID" type="string" size="30"/>
          <Column id="USE_YN" type="string" size="1"/>
          <Column id="CONTRACT_YN" type="string" size="1"/>
          <Column id="MARGIN_PRICE" type="string" size="40"/>
          <Column id="UNIT_PRICE" type="bigdecimal" size="22"/>
          <Column id="CUSTCD" type="bigdecimal" size="39"/>
          <Column id="CHEAP_YN" type="string" size="1"/>
          <Column id="KG_CONVERT_RATE" type="bigdecimal" size="39"/>
          <Column id="MARGIN_RATE" type="bigdecimal" size="8"/>
          <Column id="AP_UNITPRICE_UPJANG" type="bigdecimal" size="7"/>
          <Column id="RESTRICT_PERIOD" type="string" size="21"/>
          <Column id="RESTRICT_REASON" type="string" size="200"/>
          <Column id="DUTY_END_DATE" type="string" size="255"/>
          <Column id="MIN_DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="REAL_USE_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_YN" type="string" size="1"/>
          <Column id="D_DAY" type="bigdecimal" size="39"/>
          <Column id="D_DAYS" type="bigdecimal" size="39"/>
          <Column id="D_TIMES" type="bigdecimal" size="39"/>
          <Column id="D_DAY_YN" type="string" size="1"/>
          <Column id="SPICE_YN" type="string" size="1"/>
          <Column id="CORN_YN" type="string" size="1"/>
          <Column id="IMG_PATH" type="string" size="756"/>
          <Column id="ORIGIN_NAT" type="string" size="60"/>
          <Column id="ORIGIN_TYPE" type="string" size="60"/>
          <Column id="VD_SN" type="string" size="18"/>
          <Column id="APPLY_SD" type="string" size="8"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_item_condi" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_CLASS1" type="STRING" size="256"/>
          <Column id="ITEM_CLASS2" type="STRING" size="256"/>
          <Column id="ITEM_CLASS3" type="STRING" size="256"/>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
          <Column id="BARCODE" type="STRING" size="256"/>
          <Column id="CUSTCD" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_recent_condi" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_CLASS1" type="STRING" size="256"/>
          <Column id="ITEM_CLASS2" type="STRING" size="256"/>
          <Column id="ITEM_CLASS3" type="STRING" size="256"/>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
          <Column id="CUSTCD" type="STRING" size="256"/>
          <Column id="DT_FR" type="STRING" size="256"/>
          <Column id="DT_TO" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_favor_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="FAVOR_GROUP" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_save_out" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_tax">
        <ColumnInfo>
          <Column id="code" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">100</Col>
            <Col id="code_name">과세</Col>
          </Row>
          <Row>
            <Col id="code">210</Col>
            <Col id="code_name">면세</Col>
          </Row>
          <Row>
            <Col id="code">220</Col>
            <Col id="code_name">영세</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_line_status" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GROUP_NAME" type="STRING" size="100"/>
          <Column id="GROUP_CODE" type="STRING" size="50"/>
          <Column id="CODE" type="STRING" size="50"/>
          <Column id="CODE_NAME" type="STRING" size="500"/>
          <Column id="CONTENTS" type="STRING" size="300"/>
          <Column id="SORT_SEQ" type="BIGDECIMAL" size="39"/>
          <Column id="SYSTEM_YN" type="STRING" size="1"/>
          <Column id="SET1" type="STRING" size="100"/>
          <Column id="SET2" type="STRING" size="100"/>
          <Column id="SET3" type="STRING" size="100"/>
          <Column id="SET4" type="STRING" size="100"/>
          <Column id="SET5" type="STRING" size="100"/>
          <Column id="REMARK" type="STRING" size="300"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="ATTR01" type="STRING" size="300"/>
          <Column id="ATTR02" type="STRING" size="300"/>
          <Column id="ATTR03" type="STRING" size="300"/>
          <Column id="ATTR04" type="STRING" size="300"/>
          <Column id="ATTR05" type="STRING" size="300"/>
          <Column id="ATTR06" type="STRING" size="300"/>
          <Column id="ATTR07" type="STRING" size="300"/>
          <Column id="ATTR08" type="STRING" size="300"/>
          <Column id="ATTR09" type="STRING" size="300"/>
          <Column id="ATTR10" type="STRING" size="300"/>
          <Column id="CUSER" type="STRING" size="20"/>
          <Column id="CDATE" type="DATETIME" size="7"/>
          <Column id="UUSER" type="STRING" size="20"/>
          <Column id="UDATE" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pr_item2" oncolumnchanged="ds_pr_item_OnColumnChanged">
        <ColumnInfo>
          <Column id="ITEM_CODE" type="string" size="18"/>
          <Column id="ITEM_NAME" type="string" size="601"/>
          <Column id="ITEM_CLASS4" type="string" size="18"/>
          <Column id="FEATURE_NAME" type="string" size="1"/>
          <Column id="ITEM_SIZE" type="string" size="1000"/>
          <Column id="PO_UOM" type="string" size="18"/>
          <Column id="KG_QTY" type="bigdecimal" size="39"/>
          <Column id="CANCEL_PR_QTY" type="bigdecimal" size="39"/>
          <Column id="G_PRICE" type="bigdecimal" size="39"/>
          <Column id="PR_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_AMT" type="bigdecimal" size="39"/>
          <Column id="TOT_AMT" type="bigdecimal" size="39"/>
          <Column id="TAX_CODE" type="string" size="3"/>
          <Column id="CENTER_FLAG" type="string" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="256"/>
          <Column id="REMARK" type="string" size="255"/>
          <Column id="POINT_FLAG" type="string" size="1"/>
          <Column id="SUBINV_CODE" type="string" size="8"/>
          <Column id="NEED_DATE" type="string" size="8"/>
          <Column id="UPJANG" type="bigdecimal" size="39"/>
          <Column id="DEPT_ID" type="string" size="6"/>
          <Column id="ACCTCD" type="string" size="255"/>
          <Column id="BUD_CLS" type="string" size="30"/>
          <Column id="MU_CD" type="string" size="4"/>
          <Column id="INVAT_FLAG" type="string" size="1"/>
          <Column id="OUTVAT_FLAG" type="string" size="1"/>
          <Column id="MIN_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="MAX_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="CENTER_CODE" type="string" size="18"/>
          <Column id="STOCK_FLAG" type="string" size="1"/>
          <Column id="BARCODE" type="string" size="60"/>
          <Column id="KEEPING_TYPE" type="string" size="60"/>
          <Column id="MULTIPLIER_QTY" type="bigdecimal" size="14"/>
          <Column id="BUDDEPT_ID" type="string" size="30"/>
          <Column id="USE_YN" type="string" size="1"/>
          <Column id="CONTRACT_YN" type="string" size="1"/>
          <Column id="MARGIN_PRICE" type="string" size="40"/>
          <Column id="UNIT_PRICE" type="bigdecimal" size="22"/>
          <Column id="CUSTCD" type="bigdecimal" size="39"/>
          <Column id="CHEAP_YN" type="string" size="1"/>
          <Column id="KG_CONVERT_RATE" type="bigdecimal" size="39"/>
          <Column id="MARGIN_RATE" type="bigdecimal" size="8"/>
          <Column id="AP_UNITPRICE_UPJANG" type="bigdecimal" size="39"/>
          <Column id="RESTRICT_PERIOD" type="string" size="21"/>
          <Column id="RESTRICT_REASON" type="string" size="200"/>
          <Column id="DUTY_END_DATE" type="string" size="255"/>
          <Column id="MIN_DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="REAL_USE_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_YN" type="string" size="1"/>
          <Column id="D_DAY" type="bigdecimal" size="39"/>
          <Column id="D_DAYS" type="bigdecimal" size="39"/>
          <Column id="D_TIMES" type="bigdecimal" size="39"/>
          <Column id="D_DAY_YN" type="string" size="1"/>
          <Column id="SPICE_YN" type="string" size="1"/>
          <Column id="CORN_YN" type="string" size="1"/>
          <Column id="IMG_PATH" type="string" size="756"/>
          <Column id="ORIGIN_NAT" type="string" size="60"/>
          <Column id="ORIGIN_TYPE" type="string" size="60"/>
          <Column id="VD_SN" type="string" size="18"/>
          <Column id="APPLY_SD" type="string" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_del_item2">
        <ColumnInfo>
          <Column id="ITEM_CODE" type="string" size="18"/>
          <Column id="ITEM_NAME" type="string" size="601"/>
          <Column id="ITEM_CLASS4" type="string" size="18"/>
          <Column id="FEATURE_NAME" type="string" size="1"/>
          <Column id="ITEM_SIZE" type="string" size="1000"/>
          <Column id="PO_UOM" type="string" size="18"/>
          <Column id="KG_QTY" type="bigdecimal" size="39"/>
          <Column id="ONHAND_QTY" type="bigdecimal" size="14"/>
          <Column id="CANCEL_PR_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_QTY" type="bigdecimal" size="39"/>
          <Column id="TOT_AMT" type="bigdecimal" size="39"/>
          <Column id="TAX_CODE" type="string" size="3"/>
          <Column id="CENTER_FLAG" type="string" size="1"/>
          <Column id="REMARK" type="string" size="255"/>
          <Column id="POINT_FLAG" type="string" size="1"/>
          <Column id="SUBINV_CODE" type="string" size="8"/>
          <Column id="NEED_DATE" type="string" size="8"/>
          <Column id="UPJANG" type="bigdecimal" size="7"/>
          <Column id="DEPT_ID" type="string" size="6"/>
          <Column id="ACCTCD" type="string" size="255"/>
          <Column id="BUD_CLS" type="string" size="30"/>
          <Column id="MU_CD" type="string" size="4"/>
          <Column id="INVAT_FLAG" type="string" size="1"/>
          <Column id="OUTVAT_FLAG" type="string" size="1"/>
          <Column id="MIN_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="MAX_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="CENTER_CODE" type="string" size="18"/>
          <Column id="STOCK_FLAG" type="string" size="1"/>
          <Column id="BARCODE" type="string" size="60"/>
          <Column id="MULTIPLIER_QTY" type="bigdecimal" size="14"/>
          <Column id="BUDDEPT_ID" type="string" size="30"/>
          <Column id="USE_YN" type="string" size="1"/>
          <Column id="CONTRACT_YN" type="string" size="1"/>
          <Column id="MARGIN_PRICE" type="string" size="40"/>
          <Column id="UNIT_PRICE" type="bigdecimal" size="22"/>
          <Column id="CUSTCD" type="bigdecimal" size="39"/>
          <Column id="CHEAP_YN" type="string" size="1"/>
          <Column id="KG_CONVERT_RATE" type="bigdecimal" size="39"/>
          <Column id="MARGIN_RATE" type="bigdecimal" size="8"/>
          <Column id="AP_UNITPRICE_UPJANG" type="bigdecimal" size="7"/>
          <Column id="RESTRICT_PERIOD" type="string" size="21"/>
          <Column id="RESTRICT_REASON" type="string" size="200"/>
          <Column id="DUTY_END_DATE" type="string" size="255"/>
          <Column id="MIN_DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="REAL_USE_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_YN" type="string" size="1"/>
          <Column id="D_DAY" type="bigdecimal" size="39"/>
          <Column id="D_DAYS" type="bigdecimal" size="39"/>
          <Column id="D_TIMES" type="bigdecimal" size="39"/>
          <Column id="D_DAY_YN" type="string" size="1"/>
          <Column id="SPICE_YN" type="string" size="1"/>
          <Column id="CORN_YN" type="string" size="1"/>
          <Column id="IMG_PATH" type="string" size="756"/>
          <Column id="ORIGIN_NAT" type="string" size="60"/>
          <Column id="ORIGIN_TYPE" type="string" size="60"/>
          <Column id="VD_SN" type="string" size="18"/>
          <Column id="APPLY_SD" type="string" size="8"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condi2" useclientlayout="true">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="TYPE" type="STRING" size="256"/>
          <Column id="PR_SABUN" type="STRING" size="256"/>
          <Column id="PR_DEPT_ID" type="STRING" size="256"/>
          <Column id="PO_TYPE" type="STRING" size="256"/>
          <Column id="PO_TYPE_NM" type="STRING" size="256"/>
          <Column id="PR_UPJANG" type="STRING" size="256"/>
          <Column id="PR_UPJANG_NM" type="STRING" size="256"/>
          <Column id="RC_UPJANG" type="STRING" size="256"/>
          <Column id="RC_UPJANG_NM" type="STRING" size="256"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="128"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="128"/>
          <Column id="PR_NUM" type="STRING" size="256"/>
          <Column id="APPROVE_NUM" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="SORT_TYPE" type="STRING" size="256"/>
          <Column id="STATUS" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condi3" useclientlayout="true">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="TYPE" type="STRING" size="256"/>
          <Column id="PR_SABUN" type="STRING" size="256"/>
          <Column id="PR_DEPT_ID" type="STRING" size="256"/>
          <Column id="PO_TYPE" type="STRING" size="256"/>
          <Column id="PO_TYPE_NM" type="STRING" size="256"/>
          <Column id="PR_UPJANG" type="STRING" size="256"/>
          <Column id="PR_UPJANG_NM" type="STRING" size="256"/>
          <Column id="RC_UPJANG" type="STRING" size="256"/>
          <Column id="RC_UPJANG_NM" type="STRING" size="256"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="128"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="128"/>
          <Column id="PR_NUM" type="STRING" size="256"/>
          <Column id="APPROVE_NUM" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="SORT_TYPE" type="STRING" size="256"/>
          <Column id="STATUS" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pr_item3" oncolumnchanged="ds_pr_item_OnColumnChanged">
        <ColumnInfo>
          <Column id="ITEM_CODE" type="string" size="18"/>
          <Column id="ITEM_NAME" type="string" size="601"/>
          <Column id="ITEM_CLASS4" type="string" size="18"/>
          <Column id="FEATURE_NAME" type="string" size="1"/>
          <Column id="ITEM_SIZE" type="string" size="1000"/>
          <Column id="PO_UOM" type="string" size="18"/>
          <Column id="KG_QTY" type="bigdecimal" size="39"/>
          <Column id="CANCEL_PR_QTY" type="bigdecimal" size="39"/>
          <Column id="G_PRICE" type="bigdecimal" size="39"/>
          <Column id="PR_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_AMT" type="bigdecimal" size="39"/>
          <Column id="TOT_AMT" type="bigdecimal" size="39"/>
          <Column id="TAX_CODE" type="string" size="3"/>
          <Column id="CENTER_FLAG" type="string" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="256"/>
          <Column id="REMARK" type="string" size="255"/>
          <Column id="POINT_FLAG" type="string" size="1"/>
          <Column id="SUBINV_CODE" type="string" size="8"/>
          <Column id="NEED_DATE" type="string" size="8"/>
          <Column id="UPJANG" type="bigdecimal" size="39"/>
          <Column id="DEPT_ID" type="string" size="6"/>
          <Column id="ACCTCD" type="string" size="255"/>
          <Column id="BUD_CLS" type="string" size="30"/>
          <Column id="MU_CD" type="string" size="4"/>
          <Column id="INVAT_FLAG" type="string" size="1"/>
          <Column id="OUTVAT_FLAG" type="string" size="1"/>
          <Column id="MIN_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="MAX_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="CENTER_CODE" type="string" size="18"/>
          <Column id="STOCK_FLAG" type="string" size="1"/>
          <Column id="BARCODE" type="string" size="60"/>
          <Column id="KEEPING_TYPE" type="string" size="60"/>
          <Column id="MULTIPLIER_QTY" type="bigdecimal" size="14"/>
          <Column id="BUDDEPT_ID" type="string" size="30"/>
          <Column id="USE_YN" type="string" size="1"/>
          <Column id="CONTRACT_YN" type="string" size="1"/>
          <Column id="MARGIN_PRICE" type="string" size="40"/>
          <Column id="UNIT_PRICE" type="bigdecimal" size="22"/>
          <Column id="CUSTCD" type="bigdecimal" size="39"/>
          <Column id="CHEAP_YN" type="string" size="1"/>
          <Column id="KG_CONVERT_RATE" type="bigdecimal" size="39"/>
          <Column id="MARGIN_RATE" type="bigdecimal" size="8"/>
          <Column id="AP_UNITPRICE_UPJANG" type="bigdecimal" size="39"/>
          <Column id="RESTRICT_PERIOD" type="string" size="21"/>
          <Column id="RESTRICT_REASON" type="string" size="200"/>
          <Column id="DUTY_END_DATE" type="string" size="255"/>
          <Column id="MIN_DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="REAL_USE_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_YN" type="string" size="1"/>
          <Column id="D_DAY" type="bigdecimal" size="39"/>
          <Column id="D_DAYS" type="bigdecimal" size="39"/>
          <Column id="D_TIMES" type="bigdecimal" size="39"/>
          <Column id="D_DAY_YN" type="string" size="1"/>
          <Column id="SPICE_YN" type="string" size="1"/>
          <Column id="CORN_YN" type="string" size="1"/>
          <Column id="IMG_PATH" type="string" size="756"/>
          <Column id="ORIGIN_NAT" type="string" size="60"/>
          <Column id="ORIGIN_TYPE" type="string" size="60"/>
          <Column id="VD_SN" type="string" size="18"/>
          <Column id="APPLY_SD" type="string" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_del_item3">
        <ColumnInfo>
          <Column id="ITEM_CODE" type="string" size="18"/>
          <Column id="ITEM_NAME" type="string" size="601"/>
          <Column id="ITEM_CLASS4" type="string" size="18"/>
          <Column id="FEATURE_NAME" type="string" size="1"/>
          <Column id="ITEM_SIZE" type="string" size="1000"/>
          <Column id="PO_UOM" type="string" size="18"/>
          <Column id="KG_QTY" type="bigdecimal" size="39"/>
          <Column id="ONHAND_QTY" type="bigdecimal" size="14"/>
          <Column id="CANCEL_PR_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_QTY" type="bigdecimal" size="39"/>
          <Column id="TOT_AMT" type="bigdecimal" size="39"/>
          <Column id="TAX_CODE" type="string" size="3"/>
          <Column id="CENTER_FLAG" type="string" size="1"/>
          <Column id="REMARK" type="string" size="255"/>
          <Column id="POINT_FLAG" type="string" size="1"/>
          <Column id="SUBINV_CODE" type="string" size="8"/>
          <Column id="NEED_DATE" type="string" size="8"/>
          <Column id="UPJANG" type="bigdecimal" size="7"/>
          <Column id="DEPT_ID" type="string" size="6"/>
          <Column id="ACCTCD" type="string" size="255"/>
          <Column id="BUD_CLS" type="string" size="30"/>
          <Column id="MU_CD" type="string" size="4"/>
          <Column id="INVAT_FLAG" type="string" size="1"/>
          <Column id="OUTVAT_FLAG" type="string" size="1"/>
          <Column id="MIN_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="MAX_ORD_QTY" type="bigdecimal" size="14"/>
          <Column id="CENTER_CODE" type="string" size="18"/>
          <Column id="STOCK_FLAG" type="string" size="1"/>
          <Column id="BARCODE" type="string" size="60"/>
          <Column id="MULTIPLIER_QTY" type="bigdecimal" size="14"/>
          <Column id="BUDDEPT_ID" type="string" size="30"/>
          <Column id="USE_YN" type="string" size="1"/>
          <Column id="CONTRACT_YN" type="string" size="1"/>
          <Column id="MARGIN_PRICE" type="string" size="40"/>
          <Column id="UNIT_PRICE" type="bigdecimal" size="22"/>
          <Column id="CUSTCD" type="bigdecimal" size="39"/>
          <Column id="CHEAP_YN" type="string" size="1"/>
          <Column id="KG_CONVERT_RATE" type="bigdecimal" size="39"/>
          <Column id="MARGIN_RATE" type="bigdecimal" size="8"/>
          <Column id="AP_UNITPRICE_UPJANG" type="bigdecimal" size="7"/>
          <Column id="RESTRICT_PERIOD" type="string" size="21"/>
          <Column id="RESTRICT_REASON" type="string" size="200"/>
          <Column id="DUTY_END_DATE" type="string" size="255"/>
          <Column id="MIN_DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="DUTY_QTY" type="bigdecimal" size="39"/>
          <Column id="REAL_USE_QTY" type="bigdecimal" size="39"/>
          <Column id="PR_YN" type="string" size="1"/>
          <Column id="D_DAY" type="bigdecimal" size="39"/>
          <Column id="D_DAYS" type="bigdecimal" size="39"/>
          <Column id="D_TIMES" type="bigdecimal" size="39"/>
          <Column id="D_DAY_YN" type="string" size="1"/>
          <Column id="SPICE_YN" type="string" size="1"/>
          <Column id="CORN_YN" type="string" size="1"/>
          <Column id="IMG_PATH" type="string" size="756"/>
          <Column id="ORIGIN_NAT" type="string" size="60"/>
          <Column id="ORIGIN_TYPE" type="string" size="60"/>
          <Column id="VD_SN" type="string" size="18"/>
          <Column id="APPLY_SD" type="string" size="8"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item1" compid="msk_pr_date" propid="value" datasetid="ds_condi" columnid="PR_DATE"/>
      <BindItem id="item2" compid="msk_need_date" propid="value" datasetid="ds_condi" columnid="NEED_DATE"/>
      <BindItem id="item3" compid="cbo_subInv" propid="value" datasetid="ds_condi" columnid="SUBINV_CODE"/>
      <BindItem id="item0" compid="cbo_reason" propid="value" datasetid="ds_condi" columnid="REASON_CD"/>
      <BindItem id="item4" compid="cbo_reason_remark" propid="value" datasetid="ds_condi" columnid="PR_REASON"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 ******************************************************************************************
 * 시스템구분   : 구매관리 / 신청관리 / 구매신청(추가) 
 * 프로그램명   : FSP00100V
 * 기      능   : 구매빈려 내역 조회
 * 작  성  자   : 정영철
 * 작성  일자   : 2015-06-04
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
 
/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/ 
include "U_lib::lib_conversionCom.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/ 
var t_timeout;
var fv_PoItemName;		// 구매신청 반려 item (확정시 리턴되는 값)
var fv_closeRamak;   // 유형별 디데이 디타임 체크 변수(확정시 리턴되는 값)
var v_REASON_CD = "";
var v_PR_REASON = "";

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 로드시 이벤트
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	gfn_formOnLoad(obj, false);

	fsp_init(this);
	
	fn_PoCommon();
	
	// 부모창 데이터셋 복사
	ds_condi.copyData(opener.ds_condi);
	
	tab_Item.tab1.url = "U_FSP::FSP00037V.xfdl"
	tab_Item.tab2.url = "U_FSP::FSP00038V.xfdl"
	tab_Item.tab3.url = "U_FSP::FSP00039V.xfdl"
	
	
	
	fn_init();
}

function fn_init()
{
	var v_ds;
	var nRow;
	var sType;
	var sLineStatus;		// 임시저장건인지 발주확정건인지 구분하기 위해 받아온 진행상태값
	
	
	// 공통코드
	v_ds = fn_common_code("'FS0123','FS0124','FM0037'","","","non", "Y");
		
	// 추가구매승인사유 대분류
	v_fil_cond = "GROUP_CODE == 'FS0123'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_reson,v_ds.name);
	
	ds_reson.insertRow(0);
	ds_reson.setColumn(0, "CODE", "");
	ds_reson.setColumn(0, "CODE_NAME", "선택");
	cbo_reason.index = 0;
	
	//진행상태
	v_fil_cond = "GROUP_CODE == 'FM0037' && (SET1 == 'FS' || CODE_NAME == '전체')";	
	v_ds.filter(v_fil_cond);
	CopyF(ds_line_status,v_ds.name);
	
	

	// 추가구매승인사유 소분류
	v_fil_cond = "GROUP_CODE == 'FS0124'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_reson_d, v_ds.name);
	
	// 임시저장건이 아니면 임시저장버튼 비활성화
	sType  = ds_condi.getColumn(0, "TYPE");
	sLineStatus = ds_condi.getColumn(0, "LINE_STATUS");

	if(sLineStatus == "001" || sLineStatus == "PD"|| sType == "NEW")		
	{
		btn_Save.enable = true;
	}
	else
	{
		btn_Save.enable = false;
	}
	
	// 창고조회
	fn_search_subinv();
	
	// 업장정보 문구 설정
	fn_setInfoText();
}

function fn_setInfoText()
{
	var sPoType   = ds_condi.getColumn(0, "PO_TYPE");
	// 구매유형이 식자재추가, 외식추가  일경우 추가구매승인 여부에 따른 로직
	if(sPoType == "05" || sPoType == "99")
	{
		var sExpYn = ds_condi.getColumn(0, "EXPT_UPJANG_YN");
		var sApvYn = ds_condi.getColumn(0, "APPROV_YN");
		
		if(sExpYn){	// 제외업장은 승인여부 없이 추가신청 가능
			sta_info.class = "sta_WF_DiscInfo";
			sta_info.text  = "추가신청 제외 업장입니다.";
		}else{		// 제외업장이 아닐경우 추가신청승인여부에 따라 자재선택에 제한이 있다.
			if(sApvYn == "Y"){
				sta_info.class = "sta_WF_DiscInfo";
				sta_info.text  = "추가구매신청이 승인된 업장입니다.";
			}else{
				sta_info.class = "sta_WF_DiscPoint";
				sta_info.text  = "추가구매신청이 되지 않아 양념/미곡만 신청가능합니다.";
			}
		}
	}
	else if (sPoType == "11" || sPoType == "88")
	{
		ds_condi.setColumn(0, "EXPT_UPJANG_YN", "Y");
		ds_condi.setColumn(0, "REASON_CD", "3");
		ds_condi.setColumn(0, "PR_REASON", "34");
		
		cbo_reason.enable = false;
		sta_info.class = "sta_WF_DiscInfo";
		sta_info.text  = "해당유형은 승인여부 상관없이 구매신청가능합니다.";
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 버튼 클릭 이벤트
 *---------------------------------------------------------------------------------------------*/
function Common_Btn_common_OnClick(obj:Button, e:ClickEventInfo)
{
	switch(obj.name)
	{
		case "btn_Search":
			fn_search();
			break;
		case "btn_Save":
			fn_save("001");
			break;
		case "btn_Confirm":
			fn_save("002");
			break;
		case "btn_Close":
			fn_Close();
			break;
		default:
			break;
	}
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 해당업장 창고조회
 *---------------------------------------------------------------------------------------------*/
function fn_search_subinv()
{
	var sSvcID;			// 서비스 ID
	var sUrl;			// jsp 경로
	var sInDs;			// 입력 데이터셋
	var sOutDs;			// 출력 데이터셋
	var sArg;			// 추가 파라미터
	var sCallFunc;		// 콜백함수명
	
	ds_subinv.clearData();
	
	sSvcID    = "SEARCH_SUBINV";
	sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T001.jsp";
	sInDs     = "ds_condi=ds_condi";
	sOutDs    = "ds_subinv=ds_out";
	sCallFunc = "fn_transation_callback";
	
	// 트랜잭션
	jsp_transaction(this, sSvcID, sUrl, sInDs, sOutDs, sArg, sCallFunc, false, false, true);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchPr
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 신청내역 조회
 * 작  성  자   : 김동표
 * 작성  일자   : 2008-01-08
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
function fn_search_prlist()
{	
	var sSvcID;			// 서비스 ID
	var sUrl;			// jsp 경로
	var sInDs;			// 입력 데이터셋
	var sOutDs;			// 출력 데이터셋
	var sArg;			// 추가 파라미터
	var sCallFunc;		// 콜백함수명
	
	sSvcID    = "PR_SEARCH";
	sUrl      = "U_svc::" + "fs/fsp/FSP00035E_T003.jsp";
	sInDs     = "ds_condi=ds_condi";
	sOutDs    = "ds_pr_item=ds_pr_item ds_reson_save=ds_reson_save";
	sCallFunc = "fn_transation_callback";
	
	ds_pr_item.clearData();
	
	// 트랜잭션
	jsp_transaction(this, sSvcID, sUrl, sInDs, sOutDs, sArg, sCallFunc, false, false, false);
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_save
 * 기      능   : 구매신청 확정
*----------------------------------------------------------------------------------------------*/
function fn_save(sType)
{
	var sSvcID;			// 서비스 ID
	var sUrl;			// jsp 경로
	var sInDs;			// 입력 데이터셋
	var sOutDs;			// 출력 데이터셋
	var sArg;			// 추가 파라미터
	var sCallFunc;		// 콜백함수명
	
	// 임시저장과 이전 상태가 확정(002)일 경우에만 변경여부 체크
	if(sType == "001" && ds_condi.getColumn(0,"LINE_STATUS") == "002"){
		if(!gfn_isChangeDs(ds_pr_item, "", "", true)) {
			gfn_alert("msg.save.nochange", "");	
			return false;   
		}
	}
	 // confirm
	if(sType == "001"){
		if(!g_Confirm("02", "신청자료를 저장하시겠습니까?!\n향후 확정하지 않으면 발주되지 않으니 참고하시기 바랍니다.")) return false;
	}
	if(sType == "002"){
		if(!g_Confirm("02", "신청자료를 확정하시겠습니까?!")) return false;
	}		
	
	//수량 0인건은 삭제상태로 변경 20171201 김호석 추가 오류수정 선조치
	var strText = "";
	
    for(var i=0; i < ds_pr_item.rowcount; i++){
		
		if(ds_pr_item.getColumn(i, "PR_QTY") == "0"){
			//alert(ds_pr_item.getColumn(i, "ITEM_NAME"))
			ds_pr_item.deleteRow(i);			
		}
		strText = "";
		//특수문자 '제거 
		if (ds_pr_item.getColumn(i, "PR_REMARK") != null) {
			strText = ds_pr_item.getColumn(i, "PR_REMARK").replace("'","");   		
			ds_pr_item.setColumn(i, "PR_REMARK", strText);
		}
	}
	
	
	sSvcID    = "SAVE";
	sOutDs    = "ds_save_out=ds_save_out";
	sCallFunc = "fn_transation_callback";
	
	sArg = "p_mobile_gubun="+ wrapQuote("P");
	
	// 이전상태가 
	if(ds_condi.getColumn(0,"TYPE") == "TEMP_UPDATE" || ds_condi.getColumn(0,"TYPE") == "UPDATE") {
		sInDs     = "ds_pr_item=ds_pr_item:A ds_condi=ds_condi ds_del_item=ds_del_item";
		sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T012.jsp";
	}else{
		sInDs     = "ds_pr_item=ds_pr_item:A ds_condi=ds_condi ds_del_item=ds_del_item";
		sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T007.jsp";
	}
	
	if(!fn_transation_validation(sSvcID)) return;
	
	ds_condi.setColumn(0, "STATUS", sType);	// sType : 001-신청저장, 002-신청확정
	
	// 트랜잭션
	jsp_transaction(this, sSvcID, sUrl, sInDs, sOutDs, sArg, sCallFunc, false, false, false);
}

 /*
 ******************************************************************************************
 * 함  수  명   : fn_SearchApprover
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 창고 조회
 * 작  성  자   : 김동표
 * 작성  일자   : 2008-01-17
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
 function fn_SearchApprover()
 {
	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FSP00035E_T001";
	strURL   = "U_svc::" + "fs/fsp/FSP00035E_T001.jsp";
	
	// 데이터셋 설정
	strInDatasets = "";
	strOutDatasets = "ds_approver=ds_pprover";
	
	// 파라메터 설정
	strArgument  = "p_PrSgn=" + wrapQuote(dsPoAuthType.getColumn(0,"PrSgn"));	// 005
	strArgument += " p_PoType=" + wrapQuote(ds_type.getColumn(0,"PO_TYPE"));
	strArgument += " p_MuCd=" + wrapQuote("AC");
	
	// 콜백함수 지정
	strCallbackFunc = "fn_SearchApproverCallback";
	
	jsp_transaction(this, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, false, false, false);
 }

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_transation_validation()
 * 기      능   : 조회 전 유효성체크
*----------------------------------------------------------------------------------------------*/
function fn_transation_validation(sSvcID)
{
	switch(sSvcID)
	{
		case "SEARCH_SUBINV" :
		    
			break;
		
		case "SEARCH" :
			break;
		
		case "SAVE" :
			var sReasonCd = ds_condi.getColumn(0, "REASON_CD");
			var sPrReason = ds_condi.getColumn(0, "PR_REASON");
			var nRow;
			
			nRow = ds_pr_item.findRow("PR_QTY", 0)
			if(nRow != -1){
				g_Message("EE","구매신청내역중 신청수량이 0개인 자재가 존재합니다.\n신청수량을 확인하시기 바랍니다.");
				ds_pr_item.rowposition = nRow;
				div_bottom.grd_pr.setFocus();
				div_bottom.grd_pr.setCellPos(10);
				return;
			}

			if(gfn_isNull(sReasonCd) || gfn_isNull(sPrReason))
			{
				cbo_reason.class = "msk_WF_Error";
				g_Message("EE","식자재 구매신청은 사유 선택/입력을 반드시 해야 합니다.");
				cbo_reason.setFocus();
				return;		
			}
			cbo_reason.class = "";
			
			// 작성 내역 확인
			if(ds_pr_item.getCountNF() < 0){
				g_Message("EE","작성된 구매 신청 내역이 없습니다.");
				ds_pr_item.filter("");
				return false;
			}

			ds_pr_item.filter("PR_QTY>0");
			if(ds_pr_item.getRowCount() < 1){
				g_Message("EE","구매신청내역중 확정이 가능한 자재가 없습니다.\n신청수량,발주가능여부등을 점검하시기 바랍니다.");
				ds_pr_item.filter("");
				return;
			}
			
			//마감 여부 점검
			if(!fn_CheckCloseYN()){
				ds_pr_item.filter("");
				return false;
			}
			
			//배송중 여부 점검 2017.11.27 김호석 추가(신청서수정 중 배송중처리 되는 경우 체크)			
			if(!fn_CheckDLYN()){				
				ds_pr_item.filter("");
				fn_search_prlist();
				return false;
			}
			
			//발주취소 및 취소 여부 점검 2018.03.13 김호석 추가
			if(!fn_CheckPDYN()){				
				ds_pr_item.filter("");
				fn_search_prlist();
				return false;
			}
		
			//서버에서 점검
// 			//D-Day 점검
// 			if(!fn_CheckDateTime()) {
// 				ds_pr_item.filter("");
// 				return false;
// 			}
// 			//선발주 점검,의무자재 제한 점검
// 			if(!fn_CheckDutyAndPreOrder()){
// 				ds_pr_item.filter("");
// 				return false;
// 			}	
			break;
	}
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 콜백함수
 *---------------------------------------------------------------------------------------------*/
function fn_transation_callback(nErrorCode, sErrorMag, sSvcID)
{
	var sResult = "";
	var sMsg    = "";
	
	switch(sSvcID)
	{
		case "SEARCH_SUBINV" :			
			var sType  = ds_condi.getColumn(0, "TYPE");
			var sPrNum = ds_condi.getColumn(0, "PR_NUM");
			 
			 if(ds_subinv.rowcount < 1)
			 {
				var nRow = ds_subinv.addRow();
				sta_info.class = "sta_WF_DiscPoint";
				sta_info.text  = "등록된 창고가 없습니다.";
				
				ds_subinv.setColumn(nRow, "SUBINV_NAME" , "※ 등록된 창고가 없습니다.");
				ds_subinv.setColumn(nRow, "SUBINV_CODE" , "NULL");
				btn_Save.enable      = false;
				btn_Confirm.enable   = false;
				cbo_subInv.index     = 0;
				return false;
			 }
			 
			//식단 신청 수정일 경우
			if(sType <> "NEW")
			{
				// 취소 재작성일 경우에만 변경 가능하게 창고콤보 활성화 (윤지혜M 요청)
				if(sType == "CANCEL_UPDATE"){
					cbo_subInv.enable = true;
					sta_info.class = "sta_WF_DiscPoint";
					sta_info.text = "자재조회전에 창고를 변경하실수 있습니다."
				}else{
					cbo_subInv.enable = false;
				}				
				fn_search_prlist();
			}
			else
			{
				cbo_subInv.index = 0;
			}
			break;
		
		case "PR_SEARCH" :
			if(nErrorCode != 0){
				g_Message("EE", sErrorMag);
				return;
			}
			
			if ((ds_pr_item.rowcount) < 1){
				g_Message("EE",'조회된 자료가 없습니다.');
				return;
			}
			/*
			for (i=0 ; i < ds_pr_item.rowcount ; i++)
			{
				if (ds_pr_item.getColumn(0, "REASON_CD") == 'DL') {
						
				}			
			}
			*/
			
			ds_condi.setColumn(0, "REASON_CD" , ds_pr_item.getColumn(0, "REASON_CD"));
			ds_condi.setColumn(0, "PR_REASON" , ds_pr_item.getColumn(0, "PR_REASON"));

			cbo_reason.enable 		 = true;
			cbo_reason_remark.enable = true;
			
			break;
		
		case "SAVE" :
			var sType = ds_condi.getColumn(0, "STATUS");
			ds_pr_item.filter("");
	
			if(toNumber(nErrorCode) == 0)
			{
				if(gfn_length(gfn_trim(fv_PoItemName))!= 0)
				{
					sMsg = " ※ 수정 불가!! 수정 중 일부 자재 구매 결의됨\n";
					sMsg+= "    결의된 자재명 : " + fv_PoItemName;
					g_Message("EE",sMsg);
					fv_PoItemName = ""; //2015.12.15 최학진 오류 변수 초기화 안하면 정상적인데도 불구하고 중복으로 저장 됨.
					return;		
				}
				else if(gfn_length(gfn_trim(fv_closeRamak))!= 0)
				{
					sMsg = " ※ 신청서 확정 가능시간 초과\n";
					sMsg+= "    사유 : " + fv_closeRamak;
					g_Message("EE",sMsg);
					fv_closeRamak = ""; //2015.12.15 최학진 오류 변수 초기화 안하면 정상적인데도 불구하고 중복으로 저장 됨.
					return;		
				}
				else
				{
					if(sType == "001"){
						g_Message("02","정상적으로 임시저장 되었습니다.");
					}else{
						g_Message("02","정상적으로 확정 되었습니다.");
					}
					this.close("OK");
				}
			}
			else if(ds_save_out.rowcount >0)
			{
				// 자재유효성체크에서 걸린 리스트
				var sRet = gfn_dialog("", "U_FSP::FSP00030P.xfdl", "", "", "", "", "", "", "", "", "", false);
			}
			else
			{
				if(sType == "001"){
					g_Message("EE","임시저장 중 오류가 발생했습니다.\n에러메세지:" + sErrorMag);
				}else{
					g_Message("EE","확정처리 중 오류가 발생했습니다.\n에러메세지:" + sErrorMag);
				}
			}
		
			break;
	}
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
 /*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 단기 버튼 이벤트
 * 작  성  자   : 김동표
 * 작성  일자   : 2008-01-08
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
function fn_Close()
{
	if(!fn_GetUpdate()) return;
	this.close();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckDutyAndPreOrder()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 선발주 제한 및 의무자재 사용량 점검
 * 작  성  자   : 김동표
 * 작성  일자   : 2008-01-30
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
// function fn_CheckDutyAndPreOrder()
// {
// 	var v_Msg;
// 	
// 	var f_CurrDateTime = fn_CurrDateWeek("ymdtm");
// 	var nDutyQty     = 0;
// 	var nRUseQty     = 0;
// 	var nPrQty       = 0;
// 	var nPoUom       = 0;
// 	var sItemName    = "";
// 	var sNeedDate    = "";
// 	var nMinDutyQty  = 0;
// 	var sdutyEndDate = "";
// 
// 	for(var i = 0; i < ds_pr_item.rowcount; i++)
// 	{
// 		nDutyQty     = ds_pr_item.getColumn(i,"DUTY_QTY"      );
// 		nRUseQty     = ds_pr_item.getColumn(i,"REAL_USE_QTY"  );
// 		nPrQty       = ds_pr_item.getColumn(i,"PR_QTY"        );
// 		nPoUom       = ds_pr_item.getColumn(i,"PO_UOM"        );
// 		sItemName    = ds_pr_item.getColumn(i,"ITEM_NAME"     );
// 		sNeedDate    = ds_pr_item.getColumn(i,"NEED_DATE"     );
// 		nMinDutyQty  = ds_pr_item.getColumn(i,"MIN_DUTY_QTY"  );
// 		sDutyEndDate = ds_pr_item.getColumn(i,"DUTY_END_DATE" );
// 		
// // 		if( (toNumber(nDutyQty) > 0) && (toNumber(nDutyQty) < toNumber(nRUseQty) + toNumber(nPrQty)) )
// // 		{
// // 			v_Msg  = " ※ 의무사용량 초과!! \n\n";
// // 			v_Msg += "    자  재  명 : " + sItemName + "\n";
// // 			v_Msg += "    의무사용량 : " + gfn_toString(nDutyQty)+ nPoUom + "\n";
// // 			v_Msg += "    기간신청량 : " + gfn_toString(toNumber(nRUseQty) + toNumber(nPrQty)) + nPoUom;
// // 			
// // 			g_Message("EE",v_Msg);		
// // 			return false;
// // 		}	
// // 		else if((sNeedDate == sDutyEndDate) && (toNumber(nMinDutyQty) > 0) && (toNumber(nMinDutyQty) > toNumber(nRUseQty) + toNumber(nPrQty)) )
// // 		{
// // 
// // 			v_Msg  = " ※ 의무사용량 미달!! \n\n";
// // 			v_Msg += "    자  재  명 : "     + sItemName + "\n";
// // 			v_Msg += "    최소의무사용량 : " + gfn_toString(nMinDutyQty)       + nPoUom + "\n";
// // 			v_Msg += "    기간신청량 : "     + gfn_toString(toNumber(nRUseQty) + toNumber(nPrQty)) + nPoUom;
// // 			
// // 			g_Message("EE",v_Msg);		
// // 			return false;
// // 		}				
// 	} 
// // 	//2008.08.08 박은규 : 저장 시점에 선발주 다시체크(최희정)
// // 	v_Msg = ''; 
// // 	v_Msg = fn_CheckPreOrder();
// // 	if (gfn_length(v_Msg)> 0)
// // 	{
// // 		g_Message("EE",v_Msg);		
// // 		return false;
// // 	}
// 	return true;
// }

/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckCloseYN()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 수불마감 및 재고마감 점검
 * 작  성  자   : 김동표
 * 작성  일자   : 2008-01-29
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
var v_SubulCloseYN, v_JaegoCloseYN;
function fn_CheckCloseYN()
{
	//if(!opener.opener.fn_Validation("")) return false;
	
	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FSP000000_T001";
	strURL   = "U_svc::" + "fs/fsp/FSP000000_T001.jsp";
	
	// 데이터셋 설정
	strInDatasets = "";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "p_SubinvCode=" + wrapQuote(gfn_nvl(cbo_subInv.value), "");
	strArgument += " p_NeedDate="  + wrapQuote(gfn_nvl(msk_need_date.value), "");
	
	// 콜백함수 지정
	strCallbackFunc = "";

	http.Sync = true;
	Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc); 
	http.Sync = false;
	
	var strMsg;
	
	if(v_SubulCloseYN <> "N")
	{
		strMsg = " ※ 구매신청 불가!! 수불 마감 완료 창고\n";
		strMsg+= "    마감월 : " + v_SubulCloseYN;
	
		g_Message("EE",strMsg);
		return false;
	}
	
	if(v_JaegoCloseYN <> "N")
	{
		strMsg = " ※ 구매신청 불가!! 재고 반영 완료 창고\n";
		strMsg+= "    재고반영일 : " + v_JaegoCloseYN;
	
		g_Message("EE",strMsg);
		return false;
	}
		
	return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckPoYN()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 신청서 수정 중 결의 여부 점검
 * 작  성  자   : 김동표
 * 작성  일자   : 2008-01-31
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
var v_ItemName;
function fn_CheckPoYN(strPrNum)
{
	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FSP00032E_T008";
	strURL   = "U_svc::" + "fs/fsp/FSP00032E_T008.jsp";
	
	// 데이터셋 설정
	strInDatasets = "dsPoLineStatus=dsPoLineStatus";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "p_PrNum=" + wrapQuote(strPrNum);
	
	// 콜백함수 지정
	strCallbackFunc = "";

	http.Sync = true;
	Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc); 
	http.Sync = false;
	
	var strMsg;
	
	if(gfn_length(v_ItemName)!= 0)
	{
		strMsg = " ※ 구매신청 불가!! 신청서 수정 중 일부 자재 구매 결의됨\n";
		strMsg+= "    결의된 자재명 : " + v_ItemName;
	
		g_Message("EE",strMsg);
		return false;
	}
	
	return true;
}


/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckPoYN()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 신청서 수정 중 배송중 여부 점검
 * 작  성  자   : 김호석
 * 작성  일자   : 2017-11-27
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
var v_ItemName;
function fn_CheckDLYN(strPrNum)
{
	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FSP00032E_T013";
	strURL   = "U_svc::" + "fs/fsp/FSP00032E_T013.jsp";
	
	// 데이터셋 설정	
    var nRowCnt = ds_pr_item2.assign(ds_pr_item);
    var nRowCnt2 = ds_del_item2.assign(ds_del_item);
    var nRowCnt3 = ds_condi2.assign(ds_condi);    
	strInDatasets = "ds_pr_item2=ds_pr_item2:A ds_condi2=ds_condi2 ds_del_item2=ds_del_item2";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "p_PrNum=" + wrapQuote(strPrNum);
	
	// 콜백함수 지정
	strCallbackFunc = "";

	http.Sync = true;
	Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc); 
	http.Sync = false;
	
	var strMsg;
	
	if(gfn_length(v_ItemName)!= 0)
	{
		strMsg = " ※ 신청서 수정 중 일부 자재 배송처리됨\n";
		strMsg+= "    배송중 자재명 : " + v_ItemName;
	
		g_Message("EE",strMsg);
		return false;
	}
	
	return true;
}

// 날짜체크
function fn_CheckDateTime()
{	
	var nDday     = ds_condi.getColumn(0, "D_DAYS");
	var nDtime    = ds_condi.getColumn(0, "D_TIMES");
	var sNeedDate = ds_condi.getColumn(0, "NEED_DATE");
	
	if(nDday == "0") return true;

	var f_CurrDateTime = fn_CurrDateWeek("ymdtm");
	
	if( dateTime(sNeedDate)< dateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(nDday))))
	{
		var v_Msg;
		v_Msg  = " ※ 현재 입고일로는 구매신청할 수 없습니다. \n\n";
		v_Msg += "    구 매  유 형 : " + ds_potype.getColumn(0, "TYPE_NAME") + "\n";
		v_Msg += "    현 재  시 간 : " + fn_FormatDateTime(f_CurrDateTime) + "\n";
		v_Msg += "    신청가능일자 : " + fn_FormatDateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(nDday))) + " (D_DAY=" + nDday + "일" + nDtime + "시) \n";
		
		g_Message("EE",v_Msg);
		
		return false;
	}
	
	if( dateTime(sNeedDate)== dateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(nDday))))
	{
		if(toNumber(nDtime) == 0) return true;
		
		if( toNumber(gfn_subStr(f_CurrDateTime,8,2)) >= toNumber(nDtime))
		{
			var v_Msg;
			v_Msg  = " ※ 현재 시간은 구매신청할 수 없습니다. \n\n";
			v_Msg += "    구 매  유 형 : " + ds_potype.getColumn(0, "TYPE_NAME") + "\n";
			v_Msg += "    현 재  시 간 : " + fn_FormatDateTime(f_CurrDateTime) + "\n";
			v_Msg += "    신청가능일시 : " + fn_FormatDateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(nDday))) + " " + nDtime + "시 (D_DAY=" + nDday + "일" + nDtime + "시) \n";
			
			g_Message("EE",v_Msg);
			
			return false;
		}
	}
	
	return true;
}

// 화면 close 될때 이벤트
function fn_GetUpdate()
{
	if(gfn_dsIsUpdated(ds_pr_item)== true) 
	{
		if(!g_Confirm("02", "미저장 데이터가 있습니다.\n추가구매신청 화면을 닫으시겠습니까?")) 
		{
			return false;
		}
		else
		{
			return true;
		}
	}
	else 
		return true;
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================

// 삭제버튼 클릭시 이벤트
function btn_DelItem_OnClick(obj:Button, e:ClickEventInfo)
{
	var rowCnt = ds_pr_item.getCountNF();

	div_bottom.grd_pr.enableredraw=false;
	
    for(var row=rowCnt-1; row >= 0; row--) 
    {
		if(ds_pr_item.getSelect(row)) 
		{
			if (ds_pr_item.getColumn(row, "PR_YN") != "Y") {				
				g_Message("EE","유효성 체크 제한된 자재는 삭제가 불가합니다. 비고를 참고해주세요 ");
			} else {
				//배송중인 경우 삭제 안되도록 처리 2017.11.24 추가 김호석
				if (ds_pr_item.getColumn(row, "LINE_STATUS") == "DL") {				
					g_Message("EE"," ※ 배송중인 자재는 삭제 불가! ");
				} else {
					ds_pr_item.deleteRow(row);
				}
			}
		} 
	}
    
	div_bottom.grd_pr.enableredraw=true;		
}

// 신청리스트 값 변경시
function ds_pr_item_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var strMsg;
	
	if(e.columnid <> "PR_QTY" && e.columnid <> "MARGIN_PRICE") return;

	if(e.columnid == "PR_QTY")
	{
		//소숫점 발주 제한 점검
		if(obj.getColumn(e.row,"POINT_FLAG") == "N" && Math.ceil(toNumber(e.newvalue)) != toNumber(e.newvalue))
		{
			strMsg = " ※ 소숫점 신청 불가!!\n";
			strMsg+= "    자재명 : " + obj.getColumn(e.row,"ITEM_NAME");
			g_Message("EE", strMsg);
			obj.setColumn(e.row,"PR_QTY",e.oldvalue);
			return;
		}
		//최소발주량 제한 점검
		else if(toNumber(obj.getColumn(e.row,"MIN_ORD_QTY")) > 0 && toNumber(e.newvalue) < toNumber(obj.getColumn(e.row,"MIN_ORD_QTY")) )
		{
			strMsg = " ※ 최소발주량 이하 신청 불가!!\n";
			strMsg+= "    자재명     : " + obj.getColumn(e.row,"ITEM_NAME") + "\n";
			strMsg+= "    최소발주량 : " + obj.getColumn(e.row,"MIN_ORD_QTY") + "\n";
			g_Message("EE", strMsg);
			obj.setColumn(e.row,"PR_QTY",e.oldvalue);
			return;
		}
		//최대발주량 제한 점검
		else if(toNumber(obj.getColumn(e.row,"MAX_ORD_QTY")) > 0 && toNumber(e.newvalue) > toNumber(obj.getColumn(e.row,"MAX_ORD_QTY")) )
		{
			strMsg = " ※ 최대발주량 이상 신청 불가!!\n";
			strMsg+= "    자재명     : " + obj.getColumn(e.row,"ITEM_NAME") + "\n";
			strMsg+= "    최대발주량 : " + obj.getColumn(e.row,"MAX_ORD_QTY") + "\n";
			g_Message("EE", strMsg);
			obj.setColumn(e.row,"PR_QTY",e.oldvalue);
			return;
		}
		//발주승수량 제한 점검
		else if(obj.getColumn(e.row,"MULTIPLIER_QTY") != 0)
		{
			var nMqty = ds_pr_item.getColumn(e.row,"MULTIPLIER_QTY");
			var nRt = e.newvalue - (Math.floor(e.newvalue / nMqty) * nMqty)

			if(nRt != 0)
			{
				strMsg = " ※ 발주승수량 이외 신청 불가!!\n";
				strMsg+= "    자재명     : " + obj.getColumn(e.row,"ITEM_NAME") + "\n";
				strMsg+= "    발주승수량 : " + obj.getColumn(e.row,"MULTIPLIER_QTY") + "\n";
				g_Message("EE", strMsg);
				obj.setColumn(e.row,"PR_QTY",e.oldvalue);
				return;
			}
		}

		//마이너스 신청 여부 점검
		if(toNumber(e.newvalue) <= 0)
		{
			strMsg = " ※ '0'이하 수량 신청 불가!!\n";
			strMsg+= "    자재명 : " + obj.getColumn(e.row,"ITEM_NAME");
		
			g_Message("EE",strMsg);
			obj.setColumn(e.row,"PR_QTY",e.oldvalue);
			return;
		}
		
		obj.setColumn(e.row,"PR_AMT", toNumber(obj.getColumn(e.row,"MARGIN_PRICE")) * toNumber(e.newvalue));
	}
	
	if(e.columnid == "MARGIN_PRICE")
	{
		obj.setColumn(e.row,"PR_AMT", toNumber(obj.getColumn(e.row,"PR_QTY")) * toNumber(e.newvalue));
	}
	
}

//사유대분류콤보 값 변경시 이벤트
function cbo_reason_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	var sFilter = e.postvalue;
	if(e.postindex == 0)
	{
		ds_reson_d.filterstr = "SET1 == '"+ sFilter +"'";
		cbo_reason_remark.enable = false;
	}
	else 
	{
		ds_reson_d.filterstr = "SET1 == '"+ sFilter +"'";
		cbo_reason_remark.enable = true;
		cbo_reason_remark.index = 0;
	}
	
}

// var v_PreOrderMsg;
// function fn_CheckPreOrder()
// {
// 	v_PreOrderMsg = '';
// 
// 	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
// 	// 경로 설정
// 	strSvcID = "FSP00032E_T011";
// 	strURL   = "U_svc::" + "fs/fsp/FSP00032E_T011.jsp";
// 	// 데이터셋 설정
// 	strInDatasets = "ds_List=ds_pr_item";
// 	strOutDatasets = "";
// 	// 파라메터 설정
// 	strArgument  = "";
// 	// 콜백함수 지정
// 	strCallbackFunc = "";
// 	
// 	// 트랜잭션 실행
// 	jsp_transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc,false,false,true); 
// 
// }

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_ItemList_onexpandup(obj:Grid, e:GridMouseEventInfo)
 * 기ㅡㅡㅡ능 : 자재조회그리드 expend 이벤트
 * 작ㅡ성ㅡ자 : 정영철
 * 작성ㅡ일자 : 2015-03-23
 ******************************************************************************************/
function div_bottom_grd_pr_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	switch(e.col)
	{
	
		// 구매링크 버튼 클릭시 구매 자재상세 링크
		case 1 : 
			SCSysIf.eprocPopup (SCSysIf.EPROC_ITEM_POPUP, ds_item_list.getColumn(e.row, "ITEM_CODE"));
			break;
		case  2: 
			var ret;
            var sItemCode = ds_pr_item.getColumn(e.row, "ITEM_CODE");
            
			ret = gfn_dialog("", "U_FSP::FSP00000P.xfdl",{fv_itemCode: sItemCode}, "", "", "", "", "", "", "", "", true);
			break;		
	}
}

// 화면 사이즈 변경시 스플리터 최대값 최소값 변경
function FSP00035E_onsize(obj:Form, e:SizeEventInfo)
{
	var nSpt  = sp_line.position.y;
	var nForm = this.position.bottom;
	
	if(nForm -25 <  nSpt && nSpt > 96)
	{
		sp_line.position.y = nForm -25;
	}
	sp_line.max = this.position.bottom - 15;
	sp_line.min = 96;
}

//창고코드 변경시
function cbo_subInv_canitemchange(obj:Combo, e:ItemChangeEventInfo)
{
	
	var sType = ds_condi.getColumn(0, "TYPE");
	
	// 취소재작성일경우 창고 변경 가능한 확인창
	if(sType == "CANCEL_UPDATE")
	{
		var rs = g_Confirm("02", " 창고를 변경하시면 기존 취소내역은 삭제됩니다. \n 창고를 변경하시겠습니까?")
		if(!rs){
			return false;
		}
	}
}

//탭 변경시 이벤트
function tab_Item_onchanged(obj:Tab, e:TabIndexChangeEventInfo)
{
	if(e.postindex == 2)
	{
		div_bottom.btn_batch_add.visible = true;
	}
	else
	{
		div_bottom.btn_batch_add.visible = false;
	}
}

// 일괄추가버튼 이벤트
function div_bottom_btn_batch_add_onclick(obj:Button,  e:ClickEventInfo)
{
	for( var i =0; i < tab_Item.tab3.ds_favori_list.rowcount; i++ ) {
        if (tab_Item.tab3.ds_favori_list.getSelect(i) == true) {
            // 선택되었다. 
            var row = ds_pr_item.findRow("ITEM_CODE", tab_Item.tab3.ds_favori_list.getColumn(i, "ITEM_CODE")) ;
            if ( row == -1 ) {
                var r = ds_pr_item.addRow();
                ds_pr_item.copyRow(r, tab_Item.tab3.ds_favori_list, i)
            } else {
				
				g_Message("EE","  선택된 자재는 신청내역에 이미 포함되어 있습니다. \n  " + tab_Item.tab3.ds_favori_list.getColumn(i, "ITEM_NAME") + "(" + tab_Item.tab3.ds_favori_list.getColumn(i, "ITEM_CODE") + ")");
			}
        }
	}
}

function div_bottom_grd_pr_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}


/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckPDYN()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 신청서 수정 중 배송중 여부 점검
 * 작  성  자   : 김호석
 * 작성  일자   : 2018-03-13
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
var v_ItemName;
function fn_CheckPDYN(strPrNum)
{
	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FSP00032E_T014";
	strURL   = "U_svc::" + "fs/fsp/FSP00032E_T014.jsp";
	
	// 데이터셋 설정	
    var nRowCnt = ds_pr_item3.assign(ds_pr_item);
    var nRowCnt2 = ds_del_item3.assign(ds_del_item);
    var nRowCnt3 = ds_condi3.assign(ds_condi);    
	strInDatasets = "ds_pr_item3=ds_pr_item3:A ds_condi3=ds_condi3 ds_del_item3=ds_del_item3";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "p_PrNum=" + wrapQuote(strPrNum);
	
	// 콜백함수 지정
	strCallbackFunc = "";

	http.Sync = true;
	Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc); 
	http.Sync = false;
	
	var strMsg;
	
	if(gfn_length(v_ItemName)!= 0)
	{		
		strMsg = "※ 신청서 수정 중 일부 자재 취소처리됨\n";
		strMsg+= "취소 자재명 : " + v_ItemName;
	
		g_Message("EE",strMsg);
		return false;
	}
	
	return true;
}]]></Script>
  </Form>
</FDL>
