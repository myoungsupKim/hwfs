<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSM00012P" onkeydown="frm_OnKeyDown" onload="form_onload" titletext="식단복사" position="absolute 0 0 990 570" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 15 470 976 497" onclick="Static09_onclick"/>
        <Static id="Static8" position="absolute 15 528 976 555" class="sta_WFDA_Labelbg"/>
        <Static id="Static6" position="absolute 5 1085 984 1115"/>
        <Button id="btn_Copy" onclick="btn_Copy_OnClick" taborder="15" text="복사" position="absolute 926 502 977 524" class="btn_WF_CRUD" image=""/>
        <Static id="Static01" position="absolute 5 599 984 1047"/>
        <Div id="div_2" taborder="3" visible="false" position="absolute 15 40 975 107" scrollbars="none">
          <Layouts>
            <Layout>
              <Static id="Static00" onclick="div_1_Static00_onclick" class="sta_WFSA_Labelbg" position="absolute 0 0 960 67" anchor="left top right"/>
              <Static id="Static0" text="기간식단분류" position="absolute 15 9 109 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MENU_CLASS" index="0" innerdataset="ds_MENU_CLASS" taborder="1" position="absolute 109 10 250 31" anchor="default"/>
              <Static id="Static2" text="끼니" position="absolute 708 9 771 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MEAL" index="0" innerdataset="ds_MEAL2" taborder="4" position="absolute 749 10 840 31" anchor="default"/>
              <Static id="Static6" text="원가유형" position="absolute 280 9 343 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_COST_TYPE" index="0" innerdataset="ds_COST_TYPE" taborder="2" position="absolute 347 10 479 31" anchor="default"/>
              <Static id="Static1" text="식단유형" position="absolute 509 9 572 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MENU_TYPE" index="0" innerdataset="ds_MENU_TYPE" taborder="3" position="absolute 576 10 678 31" anchor="default"/>
              <Static id="Static10" text="W10" visible="false" position="absolute 739 10 749 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static07" text="W30" visible="false" position="absolute 678 10 708 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static03" text="W10" visible="false" position="absolute 566 10 576 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static01" text="W30" visible="false" position="absolute 479 10 509 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static09" text="W10" visible="false" position="absolute 337 10 347 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static08" text="W30" visible="false" position="absolute 250 10 280 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static04" text="W10" visible="false" position="absolute 99 10 109 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static23" text="W15" visible="false" position="absolute 0 10 15 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static21" text="W10" visible="false" position="absolute 0 0 959 10" style="background:#ff000055;align:center middle;"/>
              <Static id="Static22" text="W10" visible="false" position="absolute 0 31 959 41" style="background:#ff000055;align:center middle;"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_1" taborder="2" text="Div0" position="absolute 15 40 975 107" scrollbars="none">
          <Layouts>
            <Layout>
              <Static id="Static00" onclick="div_1_Static00_onclick" class="sta_WFSA_Labelbg" position="absolute 0 0 960 67" anchor="left top right"/>
              <Static id="Static5" text="사업장" position="absolute 15 9 78 33" class="sta_WFSA_label" anchor="default"/>
              <Static id="Static0" text="식당" position="absolute 269 9 332 33" class="sta_WFSA_label" anchor="default"/>
              <Combo codecolumn="HALL_CD" datacolumn="HALL_NAME" id="cbo_HALL_CD" index="0" innerdataset="ds_HALL_CD" taborder="1" position="absolute 336 10 468 31" anchor="default"/>
              <Static id="Static2" text="끼니" position="absolute 498 9 561 33" class="sta_WFSA_label" anchor="default" onclick="div_1_Static2_onclick"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MEAL" index="0" innerdataset="ds_MEAL1" taborder="2" position="absolute 541 10 643 31" anchor="default"/>
              <Static id="Static6" text="코너" position="absolute 674 9 737 33" class="sta_WFSA_label" anchor="default" onclick="div_1_Static6_onclick"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_CORNER" index="0" innerdataset="ds_CORNER" taborder="3" position="absolute 715 10 806 31" anchor="default" onitemchanged="div_1_cbo_CORNER_onitemchanged"/>
              <Edit id="ed_UPJANG_NM" onkeydown="ed_pop_OnKeyDown" readonly="true" taborder="8" userdata="div_1.btn_pop1" position="absolute 84 10 218 31" anchor="default"/>
              <Button id="btn_pop1" onclick="btn_pop1_OnClick" taborder="9" userdata="MAC_UPJANG_V_S001" position="absolute 217 10 239 31" class="btn_WF_popSearch" text="" image="" anchor="default"/>
              <Static id="Static23" text="W15" visible="false" position="absolute 0 10 15 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static21" text="W10" visible="false" position="absolute 0 0 959 10" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static04" text="W10" visible="false" position="absolute 61 10 71 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static22" text="W10" visible="false" position="absolute 0 31 959 41" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static08" text="W30" visible="false" position="absolute 223 10 253 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static09" text="W10" visible="false" position="absolute 286 10 296 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static01" text="W30" visible="false" position="absolute 428 10 458 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static03" text="W10" visible="false" position="absolute 489 10 499 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static07" text="W30" visible="false" position="absolute 643 10 673 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
              <Static id="Static10" text="W10" visible="false" position="absolute 662 10 672 31" anchor="left top" style="background:#ff000055;align:center middle;"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static0" text="식단원가" position="absolute 30 77 93 101" class="sta_WFSA_label"/>
        <MaskEdit id="med_F_MENU_COST" taborder="4" value="MaskEdit0" position="absolute 99 76 170 97" mask="###,###,###"/>
        <Static id="Static4" text="~" position="absolute 172 76 181 98"/>
        <MaskEdit id="med_T_MENU_COST" taborder="5" value="MaskEdit0" position="absolute 183 76 254 97" mask="###,###,###"/>
        <Combo codecolumn="RECIPE_NAME" datacolumn="RECIPE_NAME" id="cbo_RECIPE" index="0" innerdataset="ds_RECIPE_List" type="filter" taborder="6" position="absolute 351 76 483 97" autoselect="false" displaynulltext="전체" dropformat="TEXT" usecontextmenu="true" onitemchanged="cbo_RECIPE_onitemchanged" onkeydown="cbo_RECIPE_onkeydown" onkillfocus="cbo_RECIPE_onkillfocus" ontextchange="cbo_RECIPE_ontextchange" imemode="hangul,full" userdata="" userchange="0"/>
        <Static id="Static2" text="레시피명" position="absolute 284 77 347 101" class="sta_WFSA_label"/>
        <Static id="Static5" text="기간" position="absolute 513 77 576 101" class="sta_WFSA_label"/>
        <Grid autoenter="select" binddataset="ds_list" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="grd_list" useinputpanel="false" onheadclick="grd_list_OnHeadClick" taborder="11" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 15 138 976 465" selecttype="row" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="83"/>
                <Column size="494"/>
                <Column size="55"/>
                <Column size="45"/>
                <Column size="43"/>
                <Column size="79"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="제공일"/>
                <Cell col="2" displaytype="text" text="식단원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="식당"/>
                <Cell col="5" displaytype="text" text="끼니"/>
                <Cell col="6" displaytype="text" text="코너"/>
                <Cell col="7" displaytype="text" text="식단특이성"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="date" style="align:center;" text="bind:MENU_DATE"/>
                <Cell col="2" displaytype="number" style="align: ;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:HALL_NAME"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:MEAL_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:CORNER_NAME"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:MENU_FEATURE"/>
              </Band>
            </Format>
            <Format id="Default0">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="83"/>
                <Column size="627"/>
                <Column size="45"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="제공일"/>
                <Cell col="2" displaytype="text" text="식단원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="끼니"/>
                <Cell col="5" displaytype="text" text="코너"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="date" style="align:center;" text="bind:MENU_DATE"/>
                <Cell col="2" displaytype="number" style="align:right;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:MEAL_NAME"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:CORNER_NAME"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static1" text="선택식단" position="absolute 15 528 78 555" class="sta_WFDA_Label01"/>
        <Edit id="ed_RECIPE_INFO" readonly="true" taborder="12" position="absolute 130 473 973 494"/>
        <Static id="Static10" text="개별식단분류" position="absolute 15 528 128 555" class="sta_WFDA_Label01" onclick="Static10_onclick"/>
        <Static id="Static11" text="식    단    명" position="absolute 291 528 404 555" class="sta_WFDA_Label01"/>
        <Edit id="ed_MENU_CLASS" readonly="true" taborder="13" position="absolute 130 531 284 552"/>
        <Edit id="ed_MENU_NAME" readonly="true" taborder="14" position="absolute 406 531 640 552"/>
        <MaskEdit id="me_FROM_DT" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="7" type="string" userdata="btn_FROM_DT" position="absolute 556 76 634 97" autoselect="true"/>
        <Button id="btn_FROM_DT" onclick="g_CalButton_OnClick" taborder="8" userdata="me_FROM_DT" position="absolute 633 76 655 97" class="btn_WF_cal" text="" image=""/>
        <Static id="Static3" text="~" position="absolute 656 79 664 95"/>
        <MaskEdit id="me_TO_DT" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="9" type="string" userdata="btn_TO_DT" position="absolute 666 76 744 97" autoselect="true"/>
        <Button id="btn_TO_DT" onclick="g_CalButton_OnClick" taborder="10" userdata="me_TO_DT" position="absolute 743 76 765 97" class="btn_WF_cal" text="" image=""/>
        <Radio id="rdo_SType" taborder="18" columncount="2" rowcount="0" index="0" innerdataset="ds_SType" codecolumn="CODE" datacolumn="code_name" value="1" onitemchanged="rdo_SType_OnChanged" position="absolute 29 19 218 41"/>
        <Static id="Static15" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 990 10"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 341"/>
        <Static id="Static12" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 975 0 990 341"/>
        <Static id="Static13" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 555 990 570" onclick="Static13_onclick"/>
        <Static id="Static16" text="W10" visible="false" position="absolute 89 14 99 107" style="background:#ff000055;align:center middle;" onclick="Static16_onclick"/>
        <Static id="Static17" text="W30" visible="false" position="absolute 254 14 284 107" style="background:#ff000055;align:center middle;" onclick="Static17_onclick"/>
        <Static id="Static24" text="W15" visible="false" position="absolute 15 14 30 107" style="background:#ff000055;align:center middle;"/>
        <Static id="Static22" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 728 35 975 40"/>
        <Button id="btn_close" taborder="19" text="닫기" onclick="fn_Close" class="btn_WF_CRUD" position="absolute 930 10 975 35" anchor="top right"/>
        <Button id="btn_search" taborder="20" text="조회" onclick="fn_search" class="btn_WF_searchCm" position="absolute 869 10 928 35" anchor="top right"/>
        <Static id="Static26" text="W10" visible="false" position="absolute 15 97 975 107" style="background:#ff000055;align:center middle;"/>
        <Static id="Static82" text="W05." visible="false" position="absolute 15 45 975 50" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static94" text="W05." visible="false" position="absolute 15 71 975 76" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static27" text="W10" visible="false" position="absolute 341 14 351 107" style="background:#ff000055;align:center middle;"/>
        <Static id="Static19" text="W30" onclick="Static17_onclick" visible="false" position="absolute 483 15 513 108" style="background:#ff000055;align:center middle;"/>
        <Static id="Static21" text="W10" visible="false" position="absolute 546 15 556 108" style="background:#ff000055;align:center middle;"/>
        <Static id="Static18" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 831 107 975 113" anchor="top right"/>
        <Static id="Static23" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 15 133 976 138" anchor="top right"/>
        <Static id="Static28" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 0 107 144 120" anchor="top right"/>
        <Static id="Static29" text="복사원본" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 14 120 342 151" anchor="left top"/>
        <Static id="Static20" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 833 497 977 503" anchor="top right"/>
        <Static id="Static30" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 15 523 976 528" anchor="top right"/>
        <Static id="Static31" text="h06" onclick="Static03_onclick" class="Guide01_AreaRed" visible="false" position="absolute 2 497 146 510" anchor="top right"/>
        <Static id="Static32" text="복사대상" onclick="Static22_onclick" class="sta_WF_Title01" position="absolute 16 510 344 524" anchor="left top"/>
        <Static id="Static06" class="Guide01_AreaRed" visible="false" position="absolute 284 528 291 555"/>
        <Static id="Static33" text="선택식단" onclick="Static10_onclick" class="sta_WFDA_Label01" position="absolute 15 470 128 497"/>
        <Static id="Static34" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 15 465 976 470" anchor="top right"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_list">
        <ColumnInfo>
          <Column id="CORNER_NAME" size="100" type="STRING"/>
          <Column id="HALL_NAME" size="50" type="STRING"/>
          <Column id="MEAL_NAME" size="100" type="STRING"/>
          <Column id="MENU_COST" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_DATE" size="8" type="STRING"/>
          <Column id="MENU_FEATURE" size="200" type="STRING"/>
          <Column id="RECIPE_INFO" size="4000" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_input" oncolumnchanged="ds_input_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="UPJANG_NM" size="256" type="STRING"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="MEAL1" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
          <Column id="MENU_F_DATE" size="256" type="STRING"/>
          <Column id="MENU_T_DATE" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
          <Column id="MENU_CLASS" size="256" type="STRING"/>
          <Column id="COST_TYPE" size="256" type="STRING"/>
          <Column id="MENU_TYPE" size="256" type="STRING"/>
          <Column id="MEAL2" size="256" type="STRING"/>
          <Column id="MST_UPJANG" size="256" type="STRING"/>
          <Column id="MST_MENU_CD" size="256" type="STRING"/>
          <Column id="MST_TERM_MENU_CD" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CORNER"/>
            <Col id="COST_TYPE"/>
            <Col id="HALL_CD"/>
            <Col id="MEAL1"/>
            <Col id="MEAL2"/>
            <Col id="MENU_CLASS"/>
            <Col id="MENU_F_DATE"/>
            <Col id="MENU_T_DATE"/>
            <Col id="MENU_TYPE"/>
            <Col id="MST_MENU_CD"/>
            <Col id="MST_TERM_MENU_CD"/>
            <Col id="MST_UPJANG"/>
            <Col id="RECIPE_NAME"/>
            <Col id="UPJANG"/>
            <Col id="UPJANG_NM"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_SType">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="code_name">사업장식단</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="code_name">기간표준식단</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MEAL2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_COST_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_HALL_CD">
        <ColumnInfo>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="HALL_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail1">
        <ColumnInfo>
          <Column id="DISH_INFO" size="20" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="SINGLE_MENU_CD" size="20" type="STRING"/>
          <Column id="RECIPE_SEQ" size="256" type="INT"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail2" oncolumnchanged="ds_Detail2_OnColumnChanged" onrowposchanged="ds_OnRowPosChanged">
        <ColumnInfo>
          <Column id="CUT_SPEC" size="20" type="STRING"/>
          <Column id="DISH_INFO" size="20" type="STRING"/>
          <Column id="DISUSE_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="EDIBLE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_COST" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="ITEM_SPEC" size="0" type="STRING"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RESTRICT_YN" size="1" type="STRING"/>
          <Column id="SINGLE_MENU_CD" size="20" type="STRING"/>
          <Column id="UNIT_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="STRING"/>
          <Column id="RESTRICT_PERIOD" size="256" type="STRING"/>
          <Column id="RESTRICT_REASON" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MEAL1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RECIPE_List" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
    </Objects>
    <Bind>
      <BindItem id="div_2_cbo_MENU_CLASS_value" compid="div_2.cbo_MENU_CLASS" propid="value" datasetid="ds_input" columnid="MENU_CLASS"/>
      <BindItem id="div_2_cbo_MEAL_value" compid="div_2.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL2"/>
      <BindItem id="div_2_cbo_COST_TYPE_value" compid="div_2.cbo_COST_TYPE" propid="value" datasetid="ds_input" columnid="COST_TYPE"/>
      <BindItem id="div_2_cbo_MENU_TYPE_value" compid="div_2.cbo_MENU_TYPE" propid="value" datasetid="ds_input" columnid="MENU_TYPE"/>
      <BindItem id="div_1_cbo_HALL_CD_value" compid="div_1.cbo_HALL_CD" propid="value" datasetid="ds_input" columnid="HALL_CD"/>
      <BindItem id="div_1_cbo_MEAL_value" compid="div_1.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL1"/>
      <BindItem id="div_1_cbo_CORNER_value" compid="div_1.cbo_CORNER" propid="value" datasetid="ds_input" columnid="CORNER"/>
      <BindItem id="div_1_ed_UPJANG_NM_value" compid="div_1.ed_UPJANG_NM" propid="value" datasetid="ds_input" columnid="UPJANG_NM"/>
      <BindItem id="cbo_RECIPE_value" compid="cbo_RECIPE" propid="value" datasetid="ds_input" columnid="RECIPE_NAME"/>
      <BindItem id="ed_RECIPE_INFO_value" compid="ed_RECIPE_INFO" propid="value" datasetid="ds_list" columnid="RECIPE_INFO"/>
      <BindItem id="me_FROM_DT_value" compid="me_FROM_DT" propid="value" datasetid="ds_input" columnid="MENU_F_DATE"/>
      <BindItem id="me_TO_DT_value" compid="me_TO_DT" propid="value" datasetid="ds_input" columnid="MENU_T_DATE"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분   : 메뉴관리/식단관리/개별표준식단관리-식단복사
 * 프로그램명   : FSM00012P.XML
 * 기      능   : 식단복사
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-11-20
 * 비      고   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "lib::sc_comon.js"
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js"
//@@컨버터에서 주석처리 #include "lib::tit_comm_0001.js"		// X-Framework Lib
//@@컨버터에서 주석처리 #include "lib::sc_sql_common.js"		// 사업장팝업용 Lib
//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
//var strSINGLE_MENU_CD,strMENU_CLASS,strMENU_CLASS_NM,strMENU_NAME;
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================

var nKey = '';

var sinKey = '';

function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);

	v_ds_check = "";
	
	// X-Framework : Action 정보 생성 
	fsp_init(this);
	
	ds_RECIPE_List.clear();
	
	Copy(ds_RECIPE_List,ds_pRECIPE_List);
	
	cbo_RECIPE.index = 0;
	
	// 공통코드 조회
	var v_fil_cond;
	var v_ds = fn_common_code("'FS0023','FS0030','FS0031','FS0029'","","","all","Y");
	
	// 끼니(ds_MEAL2, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0023' && SET3=='Y'";
	v_ds.filter();
	v_ds.filter('');
	v_ds.filter(v_fil_cond);
	CopyF(ds_MEAL2,v_ds.name);
	
	// 원가유형(ds_COST_TYPE, GROUP_CODE : 'FS0030')
	v_fil_cond = "GROUP_CODE == 'FS0030'   && CODE_NAME <> '전체'";
	v_ds.filter();
	v_ds.filter('');
	v_ds.filter(v_fil_cond);
	CopyF(ds_COST_TYPE,v_ds.name);
	
	// 식단유형(ds_MENU_TYPE, GROUP_CODE : 'FS0031')
	v_fil_cond = "GROUP_CODE == 'FS0031'  && CODE_NAME <> '전체'";
	v_ds.filter();
	v_ds.filter('');
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_TYPE,v_ds.name);
	
	// 기간식단분류(ds_MENU_CLASS, GROUP_CODE : 'FS0029')
	v_fil_cond = "GROUP_CODE == 'FS0029'";
	v_ds.filter();
	v_ds.filter('');
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_CLASS,v_ds.name);
	
	// 초기값 셋팅
	ds_input.setColumn(0,"MENU_F_DATE",fn_CurrDateWeek());	
	ds_input.setColumn(0,"MENU_T_DATE",fn_CurrDateWeek());	
	ds_input.setColumn(0,"MENU_CLASS","001");	// 기간식단분류 : 일반식
	ds_input.setColumn(0,"COST_TYPE","002");	// 원가유형	: 표준
	ds_input.setColumn(0,"MENU_TYPE","002");	// 식단유형 : 복수
	
	div_2.cbo_MENU_TYPE.index 	= 0;
	div_2.cbo_MEAL.index 		= 0;
	ed_MENU_CLASS.value	= strMENU_CLASS_NM;
	ed_MENU_NAME.value	= strMENU_NAME;
}

function frm_OnKeyDown(obj:Form, e:KeyEventInfo)
{
	gfn_formKeyDown(obj, e); //(obj,e.fromreferenceobject,e.keycode,e.shiftKey,e.ctrlKey,e.altKey,-1,-1);
}
//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_Search()
 * 기      능   : [조회버튼] 검색조건에 해당하는 정보를 조회
 ******************************************************************************************
 */
function fn_search(obj:Button, e:ClickEventInfo)
{
	// 조회조건체크
	if(!fn_SearchCheck())
	{
		return;
	}
	
	// 초기화
	ds_list.clearData();
	
	
	if(ds_input.getColumn(0, 'RECIPE_NAME') == '전체') {
	
	    ds_input.setColumn(0, 'RECIPE_NAME', '');
	
	}
	
	// 조회
	var actionName, cmdName, inData, outData, otherArg, callBackFnc, sqlId;
	
	if (rdo_SType.value=="1")		//사업장식단
	{
		sqlId	= "fs/fsm:FSM00012P_S001";
	}
	else							//기간표준식단
	{
		sqlId	= "fs/fsm:FSM00012P_S002";
	}
	
	inData			= "ds_input=ds_input";
	outData			= "ds_list=ds_list";
	callBackFnc		= "fn_afterSearch";
	
	fsp_clear(this); 
    fsp_addSearch(this, sqlId);													// 조회 
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출 
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function fn_Close(obj:Button, e:ClickEventInfo)
{
	this.close();
}
//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchSub(nRow)
 * 입      력   : nRow = Master Row
 * 반      환   : 없음
 * 기      능   : 상세내역 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_SearchSub(nRow)
{
	// 초기화
	ds_Detail1.clearData();
	ds_Detail2.clearData();
	
	// 조회
	var actionName, cmdName, inData, outData, otherArg, callBackFnc,sqlId1,sqlId2;
	
	if (rdo_SType.value=="1")		//사업장식단
	{
		ds_input.setColumn(0,"MST_UPJANG",ds_list.getColumn(nRow,"UPJANG"));
		ds_input.setColumn(0,"MST_MENU_CD",ds_list.getColumn(nRow,"MENU_CD"));
		
		sqlId1	= "fs/fsm:FSM00012P_S003";
		sqlId2	= "fs/fsm:FSM00012P_S004";
	}
	else							//기간표준식단
	{
		ds_input.setColumn(0,"MST_TERM_MENU_CD",ds_list.getColumn(nRow,"TERM_MENU_CD"));
		
		sqlId1	= "fs/fsm:FSM00012P_S005";
		sqlId2	= "fs/fsm:FSM00012P_S006";
	}
	
	inData			= "ds_input=ds_input";
	outData			= "ds_Detail1=ds_Detail1 ds_Detail2=ds_Detail2";
	callBackFnc		= "fn_afterSearch";
	
	fsp_clear(this); 
    fsp_addSearch(this, sqlId1);													// 조회 (레시피)
    fsp_addSearch(this, sqlId2);													// 조회 (자재)
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출 
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 사업장 조회 후 실행 함수
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-11-20  
 ******************************************************************************************
 */
function fn_afterSearch(errCode, errMsg)
{
	if(errCode!=0)
	{
		g_Message("EE","서비스 오류:시스템 관리자에게 문의하십시오");
		return;
	}
	
	sinKey = '';
	
	if(ds_input.getColumn(0,"RECIPE_NAME") == '') {
	    cbo_RECIPE.index = 0;
	}
	// 식단원가 filter
	if (ds_list.rowcount > 0)
	{
		var strFilter = "";			// Filter Script
		
		if (toNumber(med_F_MENU_COST.value)>0)
		{
			strFilter	+= "MENU_COST>=" + toNumber(med_F_MENU_COST.value) + " ";
		}
		
		if (toNumber(med_T_MENU_COST.value)>0)
		{
			strFilter	+= " MENU_COST<=" + toNumber(med_T_MENU_COST.value);
		}
		
		strFilter	= gfn_replace(strFilter,"  "," && ");
		
		ds_list.filter(strFilter);
	}
	
	// 그리드셋팅
	if (rdo_SType.value=="1")		//사업장식단
	{
		grd_list.formatid = "Default";
	}
	else					//기간표준식단
	{
		grd_list.formatid = "Default0";
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchCheck()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 조회시 필수조회조건 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_SearchCheck()
{
	if (rdo_SType.value == "1")					// 1: 사업장식단
	{
		// 사업장
		if (gfn_length(ds_input.getColumn(0,"UPJANG"))==0)
		{
			g_Message("EE", "사업장을 선택하세요.");
			div_1.ed_UPJANG_NM.setFocus();
			return false;
		}
	}
	else										// 2 : 기간표준식단
	{	
		// 분류
		if (gfn_length(ds_input.getColumn(0,"MENU_CLASS"))==0)
		{
			g_Message("EE", "기간식단분류를 선택하세요.");
			div_2.cbo_MENU_CLASS.setFocus();
			return false;;
		}
		
		// 원가유형
		if (gfn_length(ds_input.getColumn(0,"COST_TYPE"))==0)
		{
			g_Message("EE", "원가유형을 선택하세요.");
			div_2.cbo_COST_TYPE.setFocus();
			return false;;
		}
		
		// 식단유형
		if (gfn_length(ds_input.getColumn(0,"MENU_TYPE"))==0)
		{
			g_Message("EE", "식단유형을 선택하세요.");
			div_2.cbo_MENU_TYPE.setFocus();
			return false;;
		}
	}
	
	// 기간 - from
	if (gfn_length(ds_input.getColumn(0,"MENU_F_DATE"))==0)
	{
		g_Message("EE", "기간을 입력하세요.");
		me_FROM_DT.setFocus();
		return false;;
	}
	
	// 기간 -  to
	if (gfn_length(ds_input.getColumn(0,"MENU_T_DATE"))==0)
	{
		g_Message("EE", "기간을 입력하세요.");
		me_TO_DT.setFocus();
		return false;;
	}
	
	if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE"),1)<ds_input.getColumn(0,"MENU_T_DATE"))
	{
		g_Message("EE", "조회기간은 최대 1개월입니다.");
		me_TO_DT.setFocus();
		return false;;
	}
	
    
    return true;
}
//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : grd_List_OnHeadClick(obj,nCell,nX,nY,nPivotIndex)
 * 기      능   : 그리드헤드 더블클릭시 Sort
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-11-20  
 ******************************************************************************************
 */
// function grd_List_OnHeadClick(obj:Grid, e:GridClickEventInfo)
// {
// 	gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
// }

/*
 ******************************************************************************************
 * 함  수  명   : btn_pop1_OnClick(obj)
 * 기      능   : 팝업버튼 클릭 -> 사업장 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function btn_pop1_OnClick(obj:Button, e:ClickEventInfo)
{
	fn_sql_common_setup(strMAQuery_Upjang, 
						strMAQuery_UpjangKeyField, 
						strMAQuery_UpjangValueField, 
						strMAQuery_UpjangKeyFieldNM, 
						strMAQuery_UpjangValueFieldNM, 
						"", 
						"",
						"",   // 팀 비교
						strMAQuery_UpjangCaption,
						strMAQuery_UpjangAllField);
		
    if (gds_sql_common.getColumn(0, "ret_code") != "")
    {
		ds_input.setColumn(0,"UPJANG",gds_sql_common.getColumn(0, "ret_code"));
		ds_input.setColumn(0,"UPJANG_NM",gds_sql_common.getColumn(0, "ret_name"));
    }
    else
    {
    	ds_input.setColumn(0,"UPJANG","");
		ds_input.setColumn(0,"UPJANG_NM","");
    }
}

/*
 ******************************************************************************************
 * 함  수  명   : rdo_SType_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 식단에 따라 검색조건 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function rdo_SType_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	if (e.postvalue=="1")		//사업장식단
	{
		div_1.visible = true;
		div_2.visible = false;
	}
	else					//기간표준식단
	{
		div_1.visible = false;
		div_2.visible = true;
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_Copy_OnClick(obj)
 * 기      능   : 복사버튼 클릭시
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function btn_Copy_OnClick(obj:Button, e:ClickEventInfo)
{
	// 상세내역 조회
	http.Sync = true;
	fn_SearchSub(ds_list.rowposition);
	http.Sync = false;
	
	if (ds_Detail1.rowcount == 0 || ds_Detail2.rowcount == 0)
	{
		g_Message("EE","잘못된 레시피 정보입니다.");
		return;
	}
	
	// 초기화
	opener.ds_Copy1.clearData();
	opener.ds_Copy2.clearData();
	
	Copy(opener.ds_Copy1,ds_Detail1);
	Copy(opener.ds_Copy2,ds_Detail2);
	
	this.close("ok");
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_input_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 조회조건이 변경된 경우
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ds_input_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 업장선택시 식당리스트 조회
	if (e.columnid == "UPJANG")
	{
		if (gfn_length(e.newvalue)== 0)
		{
			ds_HALL_CD.clearData();
			ds_MEAL1.clearData();
			ds_CORNER.clearData();
			
			ds_input.setColumn(0,"HALL_CD","");
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER","");
		}
		else
		{
			// 식당 조회
			fsp_clear(this);
			fsp_addSearch(this, "fs/fsc:FSA_HALL_MST_S001");
			fsp_callService(this, "", "", "ds_in=ds_input", "ds_HALL_CD=gds_Csqlout", "nullyn='Y'", "");
		}
	}
	
	// 식당선택시 끼니리스트 조회
	if (e.columnid == "HALL_CD")
	{
		if (gfn_length(e.newvalue)== 0)
		{
			ds_MEAL1.clearData();
			ds_CORNER.clearData();
			
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER","");
		}
		else
		{
			// 끼니 조회
			fsp_clear(this);
			fsp_addSearch(this, "fs/fsc:FSA_HALL_DTL_S001");
			fsp_callService(this, "", "", "ds_in=ds_input", "ds_MEAL1=gds_Csqlout", "nullyn='Y'", "");
		}
	}
	
	// 끼니선택시 코너리스트 조회
	if (e.columnid == "MEAL1")
	{
		if (gfn_length(e.newvalue)== 0)
		{
			ds_CORNER.clearData();
			
			ds_input.setColumn(0,"CORNER","");
		}
		else
		{
			// 코너 조회
			fsp_clear(this);
			fsp_addSearch(this, "fs/fsc:FSA_HALL_DTL_S002");
			fsp_callService(this, "", "", "ds_in=ds_input", "ds_CORNER=gds_Csqlout", "nullyn='Y' MEAL="+wrapQuote(ds_input.getColumn(0,"MEAL1")), "");
		}
	}
/*	
	// 조회일자가 한달이상 안됨.
	if (e.columnid == "MENU_F_DATE"  && gfn_length(gfn_trim(e.newvalue))>0 && gfn_length(ds_input.getColumn(0,"MENU_T_DATE")) > 0)
	{ 
	
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE"),1)<ds_input.getColumn(0,"MENU_T_DATE"))
		{
			g_Message("EE", "조회기간은 최대 1개월입니다.");
			ds_input.setColumn(0,e.columnid,"");
			me_FROM_DT.setFocus();
			return false;
		}
	}
	
	if (e.columnid == "MENU_T_DATE"  && gfn_length(gfn_trim(e.newvalue))>0 && gfn_length(ds_input.getColumn(0,"MENU_F_DATE")) > 0)
	{ 
	
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE"),1)<ds_input.getColumn(0,"MENU_T_DATE"))
		{
			g_Message("EE", "조회기간은 최대 1개월입니다.");
			ds_input.setColumn(0,e.columnid,"");
			me_TO_DT.setFocus();
			return false;
		}
	}
*/	
		
}

/*
 ******************************************************************************************
 * 함  수  명   : ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 업장엔터시팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ed_pop_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13)
	{
		var objme = eval(obj.userdata);
		objme.click();
	}
	else if( e.keycode == 46 ) 
	{
		if (obj.name == "ed_UPJANG_NM")
		{
			ds_input.setColumn(0, "UPJANG",    "");
			ds_input.setColumn(0, "UPJANG_NM", "");
		}
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : cbo_OnKillFocus(obj) /cbo_OnChar(obj,strPreText,nChar,strPostText,LLParam,HLParam)
 * 기      능   : 레시피명 자동완성기능
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function cbo_OnKillFocus(obj:Combo, e:KillFocusEventInfo)
{

    trace('killfocus');

	var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
	objDs			= obj.innerdataset;
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue)==0) return;
	
// 	trace('strValue => ' + strValue);
// 	
	nFRow = eval(objDs).findRow(strDataColumn,strValue);
	
	if (nFRow == -1)
	{
		var nRow = eval(objDs).addRow();
		eval(objDs).setColumn(nRow,strDataColumn,strValue);
		obj.value = strValue;
	    ds_input.setColumn(0,'RECIPE_NAME', strValue);
	    
	    trace('ds_input => ' + ds_input.getColumn(0,'RECIPE_NAME'));
	} else {
        eval(objDs).setColumn(nRow,strDataColumn,strValue);
		obj.value = strValue;
	    ds_input.setColumn(0,'RECIPE_NAME', strValue);
	}
}

function cbo_RECIPE_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{ 
 	//trace("obj.userchange=="+obj.userchange+":::::e.pretext=="+e.pretext+"::::::e.posttext=="+e.posttext);
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		btn_search.setFocus();
		btn_search.click();
		cbo_RECIPE.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}
}

function cbo_RECIPE_onkeydown(obj:Combo, e:KeyEventInfo)
{
 
	if (e.keycode == 13 && obj.userchange == "1") {
		var strValue,nFRow,objDs,strDataColumn;
		
		strValue 		= obj.userdata;
	//	objDs			= eval(obj.innerdataset);
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = ds_RECIPE_List.addRow();
				ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		btn_search.setFocus();
		btn_search.click();
		cbo_RECIPE.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}
}


 
function cbo_RECIPE_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
   var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
//	objDs			= eval(obj.innerdataset);
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = ds_RECIPE_List.addRow();
			ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index 		= 0;
	}
}

function cbo_RECIPE_ontextchange(obj:Combo, e:TextChangeEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1"; 
} 
function grd_list_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
      gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}
]]></Script>
  </Form>
</FDL>
