<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSM00040E" onkeydown="frm_OnKeyDown" onload="form_onload" titletext="식단복사" position="absolute 0 0 1140 716" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 14 503 1125 530"/>
        <MaskEdit id="me_priod" taborder="0" type="string" mask="[ ####-##-## ~ ####-##-## ]" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" oneditclick="g_Date_OnFocus" enable="false" position="absolute 670 506 841 527" class="edt_WF_Essential"/>
        <Edit id="ed_MEAL_NM" taborder="1" readonly="true" enable="false" position="absolute 584 506 665 527" class="edt_WF_Essential"/>
        <Static id="Static1" text="끼    니" class="sta_WFDA_Label01" position="absolute 519 503 582 530"/>
        <Static id="Static0" text="식단유형" class="sta_WFDA_Label01" position="absolute 371 503 434 530"/>
        <Edit id="ed_MENU_TYPE_NM" taborder="4" readonly="true" enable="false" position="absolute 436 506 517 527" class="edt_WF_Essential"/>
        <Tab id="Tab_list" taborder="5" canchange="Tab_list_OnChanging" onchanged="Tab_list_OnChanged" tabindex="0" position="absolute 14 540 1125 706" style="showextrabutton:false;">
          <Tabpages>
            <Tabpage id="tab1" text="개별복사" scrollbars="none">
              <Layouts>
                <Layout width="1109" height="95">
                  <Grid id="grd_Save" taborder="1" binddataset="ds_list" wheelscrollrow="1" autoenter="select" useinputpanel="false" cellsizingtype="both" oncellclick="Tab_list_tab1_grd_Save_OnCellClick" onheadclick="grd_list_OnHeadClick" onexpanddown="Tab_list_tab1_grd_Save_OnExpandEdit" position="absolute 10 10 1099 129" autofittype="col">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="95"/>
                          <Column size="117"/>
                          <Column size="621"/>
                          <Column size="39"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="text" class="head_Excel"/>
                          <Cell col="1" displaytype="text" text="제공일" wordwrap="word"/>
                          <Cell col="2" displaytype="text" text="코너" wordwrap="word"/>
                          <Cell col="3" displaytype="text" text="구성" wordwrap="word"/>
                          <Cell col="4" displaytype="text" text="삭제"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" style="align:left;" expr="expr:currow+1"/>
                          <Cell col="1" displaytype="text" edittype="mask" style="align:left;" text="bind:MENU_DATE" mask="####-##-##" editautoselect="true" expandshow="show" expandsize="20"/>
                          <Cell col="2" displaytype="combo" edittype="combo" style="align:left;" text="bind:CORNER" combodataset="ds_CORNER3" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                          <Cell col="4" displaytype="normal" style="align:center middle;backgroundimage:URL('theme://images/new/grd_WF_ExpandImageX.png');"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab2" text="기간복사" scrollbars="none">
              <Layouts>
                <Layout>
                  <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 10 10 446 37"/>
                  <Static id="Static6" text="코너" class="sta_WFDA_Label01" position="absolute 10 10 73 37"/>
                  <Combo id="cbo_CORNER" taborder="14" innerdataset="ds_CORNER4" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 75 13 162 34" class="cmb_WF_Essential" onitemchanged="Tab_list_tab2_cbo_CORNER_onitemchanged"/>
                  <Static id="Static8" text="기간" class="sta_WFDA_Label01" position="absolute 164 10 227 37"/>
                  <MaskEdit id="me_MENU_F_DATE" taborder="17" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" oneditclick="g_Date_OnFocus" onchar="Tab_list_tab2_me_MENU_F_DATE_OnChar" position="absolute 229 13 308 34" userdata="Tab_list.tab2.btn_MENU_F_DATE" class="msk_WF_Essential"/>
                  <Button id="btn_MENU_F_DATE" taborder="18" onclick="Tab_list_tab2_btn_MENU_F_DATE_OnClick" class="btn_WF_calEssential" position="absolute 307 13 329 34" userdata="Tab_list.tab2.me_MENU_F_DATE"/>
                  <Static id="Static7" text="~" position="absolute 332 13 340 34"/>
                  <MaskEdit id="me_MENU_T_DATE" taborder="19" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" oneditclick="g_Date_OnFocus" position="absolute 343 13 422 34" userdata="Tab_list.tab2.btn_MENU_T_DATE" class="msk_WF_Essential"/>
                  <Button id="btn_MENU_T_DATE" taborder="20" onclick="Tab_list_tab2_btn_MENU_F_DATE_OnClick" class="btn_WF_calEssential" position="absolute 421 13 443 34" userdata="Tab_list.tab2.me_MENU_T_DATE"/>
                  <Static id="Static41" text="기간복사시에는 반드시 복사원본에서 끼니, 코너를 선택해주십시오." class="sta_WF_DiscPoint" position="absolute 11 45 598 60" anchor="top right"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Button id="btn_Copy" taborder="9" text="복사" onclick="fn_save" class="btn_WF_Custom" position="absolute 1071 506 1122 528"/>
        <Grid id="grd_Detail" taborder="10" binddataset="ds_Detail" wheelscrollrow="1" autoenter="select" useinputpanel="false" cellsizingtype="both" cellmovingtype="col" onheadclick="grd_list_OnHeadClick" position="absolute 14 288 1125 472" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30"/>
                <Column size="78"/>
                <Column size="158"/>
                <Column size="87"/>
                <Column size="165"/>
                <Column size="85"/>
                <Column size="117"/>
                <Column size="39"/>
                <Column size="85"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="레시피코드" wordwrap="word"/>
                <Cell col="2" displaytype="text" text="레시피명"/>
                <Cell col="3" displaytype="text" text="자재코드" wordwrap="word"/>
                <Cell col="4" displaytype="text" text="자재명" wordwrap="word"/>
                <Cell col="5" displaytype="text" text="자재 특성" wordwrap="word"/>
                <Cell col="6" displaytype="text" text="규격" wordwrap="word"/>
                <Cell col="7" displaytype="text" text="단위"/>
                <Cell col="8" displaytype="text" text="1인량 (g)" wordwrap="word"/>
                <Cell col="9" displaytype="text" text="표준원가" wordwrap="word"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:RECIPE_CD" suppress="2"/>
                <Cell col="2" displaytype="text" style="align:left;" text="bind:RECIPE_NAME" suppress="3"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:ITEM_CODE"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:ITEM_NAME"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:FEATURE_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:PO_UOM"/>
                <Cell col="8" displaytype="number" style="align:left;" text="bind:NEED_QTY"/>
                <Cell col="9" displaytype="number" style="align:left;" text="bind:UNIT_COST"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Edit id="ed_COST_TYPE_NM" taborder="12" readonly="true" enable="false" position="absolute 286 506 367 527" class="edt_WF_Essential"/>
        <Static id="Static14" text="원가유형" class="sta_WFDA_Label01" position="absolute 221 503 284 530"/>
        <Edit id="ed_MENU_CLASS_NM" taborder="13" readonly="true" enable="false" position="absolute 119 506 219 527" class="edt_WF_Essential"/>
        <Static id="Static13" text="기간식단분류" class="sta_WFDA_Label01" position="absolute 14 503 117 530"/>
        <Grid id="grd_Master" taborder="14" binddataset="ds_Master" wheelscrollrow="1" autoenter="select" useinputpanel="false" cellsizingtype="both" cellmovingtype="col" oncellclick="grd_Master_OnCellClick" onheadclick="grd_list_OnHeadClick" oncelldblclick="grd_Master_OnCellDblClick" position="absolute 14 112 1125 275" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="540"/>
                <Column size="85"/>
                <Column size="0"/>
                <Column size="55"/>
                <Column size="45"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" edittype="normal" text="선택"/>
                <Cell col="2" displaytype="text" text="표준원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="제공일"/>
                <Cell col="5" displaytype="text"/>
                <Cell col="6" displaytype="text" text="날씨"/>
                <Cell col="7" displaytype="text" text="끼니"/>
                <Cell col="8" displaytype="text" text="코너"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="expr:setEditExpr(iif(CHK=='0','checkbox','none'))" editfilter="expr:setfilterExpr(iif(CHK=='0','checkbox','none'))" style="align:center;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" style="align:right middle;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="date" style="align: ;" text="bind:MENU_DATE"/>
                <Cell col="5" displaytype="text" style="align:left;"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:WDESC"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:MEAL_NAME"/>
                <Cell col="8" displaytype="text" style="align:left;" text="bind:CORNER_NAME"/>
              </Band>
            </Format>
            <Format id="Default0">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="637"/>
                <Column size="85"/>
                <Column size="38"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="선택"/>
                <Cell col="2" displaytype="text" text="표준원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="식단명"/>
                <Cell col="5" displaytype="text" text="사진"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" style="align:right middle;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:MENU_NAME"/>
                <Cell col="5" displaytype="normal" style="align:center;background:EXPR(iif(gfn_length(SPHOTO_PATH_1)+gfn_length(SPHOTO_PATH_2)&gt; 0,'transparent URL(&quot;theme://Images/new/grd_WF_ExpandImage.png&quot;) center middle'));background2:EXPR(iif(gfn_length(SPHOTO_PATH_1)+gfn_length(SPHOTO_PATH_2)&gt; 0,'transparent URL(&quot;theme://Images/new/grd_WF_ExpandImage.png&quot;) center middle'));cursor:expr:iif(length(SPHOTO_PATH_1) +length(SPHOTO_PATH_2) &gt; 0,'hand','arrow');selectbackground:EXPR(iif(gfn_length(SPHOTO_PATH_1)+gfn_length(SPHOTO_PATH_2)&gt; 0,'#24a3a8ff URL(&quot;theme://Images/new/grd_WF_ExpandImage.png&quot;) center middle'));"/>
              </Band>
            </Format>
            <Format id="Default1">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="595"/>
                <Column size="85"/>
                <Column size="0"/>
                <Column size="45"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="선택"/>
                <Cell col="2" displaytype="text" text="표준원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="날짜"/>
                <Cell col="5" displaytype="text"/>
                <Cell col="6" displaytype="text" text="끼니"/>
                <Cell col="7" displaytype="text" text="코너"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" style="align:right middle;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="date" style="align:left;" text="bind:MENU_DATE"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:HALL_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:MEAL_NAME"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:CORNER_NAME"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Radio id="rdo_SType" taborder="15" columncount="2" rowcount="0" index="0" innerdataset="ds_SType" codecolumn="CODE" datacolumn="code_name" value="1" onitemchanged="rdo_SType_OnChanged" position="absolute 103 19 284 40"/>
        <Static id="Static01" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 1015 10"/>
        <Button id="btn_search" taborder="18" text="조회" onclick="fn_search" class="btn_WF_searchCm" position2="absolute r:61 w:59 t:10 h:25" positiontype="position2"/>
        <Button id="btn_close" taborder="19" text="닫기" onclick="fn_Close" class="btn_WF_CRUD" position2="absolute r:15 w:45 t:10 h:25" positiontype="position2"/>
        <Static id="Static22" text="복사원본" class="sta_WF_Title01" position="absolute 15 22 95 39"/>
        <Static id="Static08" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 35 1125 40"/>
        <Static id="Static94" text="W05." visible="false" position="absolute 15 63 985 68" style="background:#ff000055;align:center middle;"/>
        <Static id="Static09" text="W10" visible="false" position="absolute 15 89 985 99" style="background:#ff000055;align:center middle;"/>
        <Static id="Static83" text="W10" visible="false" position="absolute 102 42 112 63" style="background:#ff000055;align:center middle;"/>
        <Static id="Static95" text="W10" visible="false" position="absolute 102 68 112 89" style="background:#ff000055;align:center middle;"/>
        <Static id="Static11" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 14 99 1125 112"/>
        <Static id="Static03" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1125 0 1140 700"/>
        <Static id="Static05" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 676"/>
        <Static id="Static18" text="복사대상" class="sta_WF_Title01" position="absolute 15 485 343 502"/>
        <Static id="Static19" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 8 498 1008 503"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 14 530 1125 540"/>
        <Static id="Static21" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 14 706 1125 716"/>
        <Static id="Static23" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 567 1126 577"/>
        <Static id="Static24" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 15 577 26 661"/>
        <Static id="Static26" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1114 577 1125 661"/>
        <Div id="div_2" taborder="17" text="Div0" scrollbars="none" visible="false" position="absolute 1145 40 2255 108">
          <Layouts>
            <Layout>
              <Static id="Static29" class="sta_WFSA_Labelbg" position="absolute 0 0 1110 67" anchor="left top right"/>
              <Static id="Static43" text="W10" visible="false" position="absolute 0 0 1052 10" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static45" text="W15" visible="false" position="absolute 0 0 15 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static51" text="W05." visible="false" position="absolute 0 31 1052 36" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static50" text="W10" visible="false" position="absolute 87 36 97 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static5" text="구분" class="sta_WFSA_label" position="absolute 15 11 83 32" anchor="default"/>
              <Static id="Static0" text="분류" class="sta_WFSA_label" position="absolute 199 11 267 32" anchor="default"/>
              <Static id="Static2" text="끼니" class="sta_WFSA_label" position="absolute 15 38 83 59" anchor="default"/>
              <Combo id="cbo_MEAL" taborder="8" innerdataset="ds_MEAL2" codecolumn="CODE" datacolumn="CODE_NAME" class="cmb_WF_Essential" enable="false" position="absolute 56 36 169 57" anchor="default"/>
              <Static id="Static6" text="코너" class="sta_WFSA_label" position="absolute 199 38 267 59" anchor="default"/>
              <Combo id="cbo_CORNER" taborder="9" innerdataset="ds_CORNER2" codecolumn="CODE" datacolumn="CODE_NAME" class="cmb_WF_Essential" enable="false" position="absolute 240 36 346 57" anchor="default"/>
              <Static id="Static8" text="기간" class="sta_WFSA_label" position="absolute 756 11 801 32" anchor="default"/>
              <Static id="Static3" text="식단원가" class="sta_WFSA_label" position="absolute 755 38 823 59" anchor="default"/>
              <MaskEdit id="med_F_MENU_COST" taborder="12" value="MaskEdit0" position="absolute 824 36 923 57" anchor="default"/>
              <Static id="Static4" text="~" position="absolute 926 36 935 58" anchor="default"/>
              <MaskEdit id="med_T_MENU_COST" taborder="13" value="MaskEdit0" position="absolute 938 36 1037 57" anchor="default"/>
              <Static id="Static1" text="레시피명" class="sta_WFSA_label" position="absolute 376 38 444 59" anchor="default"/>
              <Combo id="cbo_RECIPE" taborder="10" innerdataset="ds_RECIPE_List" codecolumn="RECIPE_NAME" datacolumn="RECIPE_NAME" type="filter" position="absolute 443 36 545 57" anchor="default" onitemchanged="div_2_cbo_RECIPE_onitemchanged" onkeydown="div_2_cbo_RECIPE_onkeydown" onkillfocus="div_2_cbo_RECIPE_onkillfocus" ontextchanged="div_2_cbo_RECIPE_ontextchanged" imemode="hangul,full" userdata="" userchange="0"/>
              <Edit id="ed_MENU_NAME" taborder="11" position="absolute 642 36 725 57" anchor="default"/>
              <Static id="Static9" text="식단명" class="sta_WFSA_label" position="absolute 575 38 643 59" anchor="default"/>
              <Combo id="cbo_MENU_TYPE" taborder="3" innerdataset="ds_MENU_TYPE" codecolumn="CODE" datacolumn="CODE_NAME" class="cmb_WF_Essential" enable="false" position="absolute 642 10 725 31" anchor="default"/>
              <Combo id="cbo_COST_TYPE" taborder="2" innerdataset="ds_COST_TYPE" codecolumn="CODE" datacolumn="CODE_NAME" class="cmb_WF_Essential" enable="false" position="absolute 443 10 545 31" anchor="default"/>
              <Combo id="cbo_MENU_CLASS" taborder="1" innerdataset="ds_MENU_CLASS" codecolumn="CODE" datacolumn="CODE_NAME" class="cmb_WF_Essential" position="absolute 240 10 346 31" anchor="default"/>
              <Combo id="cbo_SType2" taborder="0" value="1" text="개별표준식단" innerdataset="@ds_SType2" codecolumn="CODE" datacolumn="code_name" index="0" onitemchanged="div_2_cbo_SType2_OnChanged" class="cmb_WF_Essential" position="absolute 56 10 169 31" anchor="default"/>
              <Static id="Static10" text="원가유형" onclick="div_2_Static10_onclick" class="sta_WFSA_label" position="absolute 376 11 444 32" anchor="default"/>
              <Static id="Static11" text="식단유형" class="sta_WFSA_label" position="absolute 575 11 643 32" anchor="default"/>
              <Static id="Static44" text="W10" visible="false" position="absolute 0 57 1052 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static34" text="W10" visible="false" position="absolute 46 10 56 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static12" text="W10" visible="false" position="absolute 46 36 56 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static35" text="W30" visible="false" position="absolute 169 10 199 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static13" text="W10" visible="false" position="absolute 230 10 240 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static14" text="W10" visible="false" position="absolute 230 36 240 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static15" text="W30" visible="false" position="absolute 346 10 376 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static16" text="W10" visible="false" position="absolute 433 10 443 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static17" text="W10" visible="false" position="absolute 433 36 443 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static18" text="W30" visible="false" position="absolute 545 10 575 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static19" text="W10" visible="false" position="absolute 632 10 642 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static20" text="W10" visible="false" position="absolute 632 36 642 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static21" text="W30" visible="false" position="absolute 725 10 755 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static22" text="W10" visible="false" position="absolute 814 36 824 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static23" text="W10" visible="false" position="absolute 814 10 824 31" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static24" text="W15" visible="false" position="absolute 1037 0 1052 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static7" text="~" position="absolute 926 14 934 30" anchor="default"/>
              <ObjCalendar id="me_MENU_F_DATE" anchor="left top" titletext="캘린더" taborder="14" scrollbars="none" position="absolute 824 10 923 31" enable="false"/>
              <ObjCalendar id="me_MENU_T_DATE" anchor="left top" titletext="캘린더" taborder="15" scrollbars="none" position="absolute 938 10 1037 31" enable="false"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_1" taborder="16" text="Div0" scrollbars="none" position="absolute 15 40 1125 108">
          <Layouts>
            <Layout>
              <Static id="Static29" class="sta_WFSA_Labelbg" position="absolute 0 0 1110 67" anchor="left top right"/>
              <Static id="Static5" text="사업장" class="sta_WFSA_label" position="absolute 15 12 83 33" anchor="default" userdata=""/>
              <Edit id="ed_UPJANG_NM" taborder="0" readonly="true" onkeydown="ed_pop_OnKeyDown" class="edt_WF_Essential" position="absolute 82 10 182 31" userdata="div_1.btn_pop1" anchor="default"/>
              <Button id="btn_pop1" taborder="1" onclick="btn_pop1_OnClick" class="btn_WF_popSearch" position="absolute 181 10 203 31" userdata="MAC_UPJANG_V_S001" anchor="default"/>
              <Static id="Static0" text="식당" class="sta_WFSA_label" position="absolute 233 12 278 33" anchor="default"/>
              <Combo id="cbo_HALL_CD" taborder="2" innerdataset="ds_HALL_CD" codecolumn="HALL_CD" datacolumn="HALL_NAME" class="cmb_WF_Essential" position="absolute 313 10 431 31" anchor="default"/>
              <Static id="Static2" text="끼니" class="sta_WFSA_label" position="absolute 461 12 529 33" anchor="default"/>
              <Combo id="cbo_MEAL" taborder="3" innerdataset="@ds_MEAL1" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 528 10 611 31" anchor="default"/>
              <Static id="Static6" text="코너" class="sta_WFSA_label" position="absolute 641 12 680 33" anchor="default"/>
              <Combo id="cbo_CORNER" taborder="4" innerdataset="@ds_CORNER1" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 709 10 784 31" anchor="default"/>
              <Static id="Static8" text="기간" class="sta_WFSA_label" position="absolute 814 12 882 33" anchor="default"/>
              <Static id="Static3" text="식단원가" class="sta_WFSA_label" position="absolute 814 38 882 59" anchor="default"/>
              <MaskEdit id="med_F_MENU_COST" taborder="13" value="MaskEdit0" position="absolute 882 36 982 57" anchor="default"/>
              <Static id="Static4" text="~" position="absolute 984 36 993 58" anchor="default"/>
              <MaskEdit id="med_T_MENU_COST" taborder="14" value="MaskEdit0" position="absolute 995 36 1095 57" anchor="default"/>
              <Static id="Static1" text="레시피명" class="sta_WFSA_label" position="absolute 15 38 83 59" anchor="default"/>
              <Combo id="cbo_RECIPE" taborder="9" innerdataset="ds_RECIPE_List" codecolumn="RECIPE_NAME" datacolumn="RECIPE_NAME" type="filter" position="absolute 82 36 203 57" anchor="default" onitemchanged="div_1_cbo_RECIPE_onitemchanged" onkillfocus="div_1_cbo_RECIPE_onkillfocus" onkeydown="div_1_cbo_RECIPE_onkeydown" userdata="" userchange="0" ontextchanged="div_1_cbo_RECIPE_ontextchanged" imemode="hangul,full"/>
              <Edit id="ed_SCHEDULE" taborder="10" position="absolute 313 36 431 57" anchor="default"/>
              <Static id="Static9" text="고객사일정" class="sta_WFSA_label" position="absolute 233 38 306 59" anchor="default"/>
              <Static id="Static10" text="식단특성" class="sta_WFSA_label" position="absolute 461 38 529 59" anchor="default"/>
              <Edit id="ed_MENU_FEATURE" taborder="11" position="absolute 528 36 611 57" anchor="default"/>
              <Static id="Static11" text="상위건수" class="sta_WFSA_label" position="absolute 641 38 709 59" anchor="default"/>
              <MaskEdit id="med_Topcnt" taborder="12" position="absolute 709 36 784 57" anchor="default"/>
              <Edit id="ed_UPJANG_NM00" taborder="15" readonly="true" onkeydown="ed_pop_OnKeyDown" position="absolute 69 -203 169 -181" userdata="div_1.btn_pop1" anchor="default"/>
              <Combo id="cbo_RECIPE00" taborder="16" innerdataset="ds_RECIPE_List" codecolumn="RECIPE_NAME" datacolumn="RECIPE_NAME" type="filter" onchar="cbo_OnChar" onkillfocus="cbo_OnKillFocus" position="absolute 69 -175 192 -155" anchor="default"/>
              <Button id="btn_pop00" taborder="17" onclick="btn_pop1_OnClick" class="btn_WF_popSearch" position="absolute 170 -203 192 -181" userdata="MAC_UPJANG_V_S001" anchor="default"/>
              <Combo id="cbo_HALL_CD00" taborder="18" innerdataset="ds_HALL_CD" codecolumn="HALL_CD" datacolumn="HALL_NAME" position="absolute 265 -202 383 -182" anchor="default"/>
              <Edit id="ed_SCHEDULE00" taborder="19" position="absolute 265 -176 383 -154" anchor="default"/>
              <Static id="Static18" text="W30" visible="false" position="absolute 611 10 641 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static15" text="W30" visible="false" position="absolute 431 10 461 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static35" text="W30" visible="false" position="absolute 203 10 233 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static72" text="W15" visible="false" position="absolute 0 -1 15 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static43" text="W10" visible="false" position="absolute 0 0 1052 10" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static51" text="W05." visible="false" position="absolute 0 31 1052 36" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static44" text="W10" visible="false" position="absolute 0 57 1052 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static83" text="W10" visible="false" position="absolute 72 1 82 72" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static12" text="W10" visible="false" position="absolute 303 1 313 72" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static13" text="W10" visible="false" position="absolute 518 1 528 72" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static14" text="W10" visible="false" position="absolute 699 -2 709 69" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static16" text="W30" visible="false" position="absolute 784 10 814 57" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static17" text="W10" visible="false" position="absolute 872 -2 882 69" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static19" text="W15" visible="false" position="absolute 1095 -1 1110 67" style="background:#ff000055;align:center middle;" anchor="default"/>
              <Static id="Static7" text="~" position="absolute 984 13 992 29"/>
              <ObjCalendar id="me_MENU_F_DATE" anchor="left top" titletext="캘린더" taborder="20" scrollbars="none" position="absolute 882 10 982 31"/>
              <ObjCalendar id="me_MENU_T_DATE" anchor="left top" titletext="캘린더" taborder="21" scrollbars="none" position="absolute 995 10 1095 31"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static17" text="h10" onclick="Static17_onclick" class="Guide01_AreaRed" visible="false" position="absolute 14 275 1125 288"/>
        <Static id="Static02" text="h10" onclick="Static17_onclick" class="Guide01_AreaRed" visible="false" position="absolute 14 472 1125 485"/>
        <Static id="Static06" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 695 1124 705"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_Master" oncolumnchanged="ds_Master_OnColumnChanged">
        <ColumnInfo>
          <Column id="CORNER" size="20" type="STRING"/>
          <Column id="CORNER_NAME" size="100" type="STRING"/>
          <Column id="CUR_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="HALL_CD" size="20" type="STRING"/>
          <Column id="HALL_NAME" size="50" type="STRING"/>
          <Column id="MEAL" size="20" type="STRING"/>
          <Column id="MEAL_NAME" size="100" type="STRING"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="MENU_DATE" size="8" type="STRING"/>
          <Column id="PAST_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_INFO" size="4000" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="WDESC" size="100" type="STRING"/>
          <Column id="CHK" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_input" oncolumnchanged="ds_input_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="UPJANG_NM" size="256" type="STRING"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="MEAL1" size="256" type="STRING"/>
          <Column id="CORNER1" size="256" type="STRING"/>
          <Column id="MENU_T_DATE1" size="256" type="STRING"/>
          <Column id="RECIPE_NAME1" size="256" type="STRING"/>
          <Column id="SCHEDULE" size="256" type="STRING"/>
          <Column id="TOPCNT" size="256" type="INT"/>
          <Column id="MENU_FEATURE" size="256" type="STRING"/>
          <Column id="STYPE2" size="256" type="STRING"/>
          <Column id="MENU_CLASS" size="256" type="STRING"/>
          <Column id="COST_TYPE" size="256" type="STRING"/>
          <Column id="MENU_TYPE" size="256" type="STRING"/>
          <Column id="MEAL2" size="256" type="STRING"/>
          <Column id="CORNER2" size="256" type="STRING"/>
          <Column id="MENU_F_DATE2" size="256" type="STRING"/>
          <Column id="MENU_T_DATE2" size="256" type="STRING"/>
          <Column id="RECIPE_NAME2" size="256" type="STRING"/>
          <Column id="MENU_NAME" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="FILEURL" size="256" type="STRING"/>
          <Column id="STYPE" size="256" type="STRING"/>
          <Column id="MENU_F_DATE1" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="UPJANG"/>
            <Col id="HALL_CD"/>
            <Col id="UPJANG_NM"/>
            <Col id="STYPE"/>
            <Col id="FILEURL"/>
            <Col id="MEAL"/>
            <Col id="RECIPE_NAME2"/>
            <Col id="MENU_T_DATE2"/>
            <Col id="MENU_F_DATE2"/>
            <Col id="CORNER2"/>
            <Col id="MEAL2"/>
            <Col id="MENU_TYPE"/>
            <Col id="COST_TYPE"/>
            <Col id="MENU_CLASS"/>
            <Col id="STYPE2"/>
            <Col id="MENU_FEATURE"/>
            <Col id="TOPCNT"/>
            <Col id="RECIPE_NAME1"/>
            <Col id="MENU_T_DATE1"/>
            <Col id="SCHEDULE"/>
            <Col id="CORNER1"/>
            <Col id="MEAL1"/>
            <Col id="MENU_NAME"/>
            <Col id="MENU_F_DATE1"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_SType">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="code_name">사업장식단</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="code_name">표준식단</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MEAL2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_COST_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RECIPE_List">
        <ColumnInfo>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_HALL_CD"/>
      <Dataset id="ds_Detail">
        <ColumnInfo>
          <Column id="CUR_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="FEATURE_NAME" size="100" type="STRING"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PAST_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail2" oncolumnchanged="ds_Detail2_OnColumnChanged" onrowposchanged="ds_OnRowPosChanged">
        <ColumnInfo>
          <Column id="CUT_SPEC" size="20" type="STRING"/>
          <Column id="DISH_INFO" size="20" type="STRING"/>
          <Column id="DISUSE_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="EDIBLE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_COST" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="ITEM_SPEC" size="0" type="STRING"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RESTRICT_YN" size="1" type="STRING"/>
          <Column id="SINGLE_MENU_CD" size="20" type="STRING"/>
          <Column id="UNIT_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SType2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="code_name">개별표준식단</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="code_name">권장식단</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MEAL1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list" oncolumnchanged="ds_list_OnColumnChanged">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
          <Column id="RECIPE_INFO" size="256" type="STRING"/>
          <Column id="MENU_ID" size="256" type="STRING"/>
          <Column id="COPY_TYPE" size="256" type="STRING"/>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="MENU_CD" size="256" type="STRING"/>
          <Column id="ORG_MENU_DATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RECIPE_LINK"/>
      <Dataset id="ds_MEAL3">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER3">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER4">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Result">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="CORNER_NAME" size="256" type="STRING"/>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_in"/>
      <Dataset id="ds_MENU_CLASS1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ResultDt">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="MSG" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER5">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item5" compid="sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item0" compid="Tab_list.tab2.sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item1" compid="div_1.ed_UPJANG_NM" propid="value" datasetid="ds_input" columnid="UPJANG_NM"/>
      <BindItem id="item2" compid="div_1.cbo_HALL_CD" propid="value" datasetid="ds_input" columnid="HALL_CD"/>
      <BindItem id="item3" compid="div_1.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL1"/>
      <BindItem id="item4" compid="div_1.cbo_CORNER" propid="value" datasetid="ds_input" columnid="CORNER1"/>
      <BindItem id="item8" compid="div_1.cbo_RECIPE" propid="value" datasetid="ds_input" columnid="RECIPE_NAME1"/>
      <BindItem id="item9" compid="div_1.ed_SCHEDULE" propid="value" datasetid="ds_input" columnid="SCHEDULE"/>
      <BindItem id="item10" compid="div_1.ed_MENU_FEATURE" propid="value" datasetid="ds_input" columnid="MENU_FEATURE"/>
      <BindItem id="item11" compid="div_1.med_Topcnt" propid="value" datasetid="ds_input" columnid="TOPCNT"/>
      <BindItem id="item13" compid="div_2.cbo_MENU_TYPE" propid="value" datasetid="ds_input" columnid="MENU_TYPE"/>
      <BindItem id="item14" compid="div_2.cbo_COST_TYPE" propid="value" datasetid="ds_input" columnid="COST_TYPE"/>
      <BindItem id="item15" compid="div_2.cbo_MENU_CLASS" propid="value" datasetid="ds_input" columnid="MENU_CLASS"/>
      <BindItem id="item16" compid="div_2.cbo_SType2" propid="value" datasetid="ds_input" columnid="STYPE2"/>
      <BindItem id="item17" compid="div_2.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL2"/>
      <BindItem id="item18" compid="div_2.cbo_RECIPE" propid="value" datasetid="ds_input" columnid="RECIPE_NAME2"/>
      <BindItem id="item19" compid="div_2.cbo_CORNER" propid="value" datasetid="ds_input" columnid="CORNER2"/>
      <BindItem id="item12" compid="div_1.me_MENU_F_DATE" propid="text" datasetid="ds_input" columnid="MENU_F_DATE1"/>
      <BindItem id="item21" compid="div_1.me_MENU_T_DATE" propid="text" datasetid="ds_input" columnid="MENU_T_DATE1"/>
      <BindItem id="item6" compid="div_2.me_MENU_F_DATE" propid="text" datasetid="ds_input" columnid="MENU_F_DATE2"/>
      <BindItem id="item7" compid="div_2.me_MENU_T_DATE" propid="text" datasetid="ds_input" columnid="MENU_T_DATE2"/>
      <BindItem id="item22" compid="div_2.ed_MENU_NAME" propid="value" datasetid="ds_input" columnid="RECIPE_NAME2"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분   : 메뉴관리/식단관리/식단등록-식단복사
 * 프로그램명   : FSM00040E.XML
 * 기      능   : 식단복사
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09
 * 비      고   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "lib::sc_comon.js"
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js"
//@@컨버터에서 주석처리 #include "lib::tit_comm_0001.js"		// X-Framework Lib
//@@컨버터에서 주석처리 #include "lib::sc_sql_common.js"		// 사업장팝업용 Lib
//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
// var fa_MENU_CLASS,fa_MENU_CLASS_NM,fa_COST_TYPE,fa_COST_TYPE_NM,fa_MENU_TYPE,fa_MENU_TYPE_NM;
// var fa_MEAL,fa_MEAL_NM,fa_FROM_DT,fa_TO_DT;
var strCopyGubun = "0";		// 0 : 사업장식단, 1 : 개별표준식단, 2 : 기간표준식단
var serverSaveDir = "FSM_SINGLE_MENU_MST";		// 파일패스
var serverSaveUrl;								// 파일패스URL
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);
	
	/*
	fa_MENU_CLASS		= "001";
	fa_MENU_CLASS_NM	= "001";
	fa_COST_TYPE		= "001";
	fa_COST_TYPE_NM		= "001";
	fa_MENU_TYPE		= "001";
	fa_MENU_TYPE_NM		= "001";
	fa_MEAL				= "001";
	fa_MEAL_NM			= "001";
	fa_FROM_DT			= "20071118";
	fa_TO_DT			= "20071124";
	*/
	
	// 업데이트 DS
	v_ds_check = "ds_list";
	
	// X-Framework : Action 정보 생성 
	fsp_init(this);
	
    ds_input.clearData();
    ds_input.addRow();
	
	// 공통코드 조회
	var v_fil_cond;
	var v_ds = fn_common_code("'FS0023','FS0022','FS0030','FS0031','FS0029','FS0028'","","","all","Y");
	
	// trace(v_ds.saveXML());
	
	// 끼니(ds_MEAL, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0023' && SET3=='Y'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MEAL2,v_ds.name);
	//ds_MEAL2.SetColumn(0,"code_name","");
	
	// 코너(ds_CORNER, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0022' && SET3 =='Y'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_CORNER2,v_ds.name);
	
	//trace(ds_CORNER2.saveXML());
	
	// 입력용코너
	
	if(fa_MENU_TYPE == '001') {
	     v_fil_cond = "GROUP_CODE == 'FS0022' && SET3 == 'Y'";
	} else {
	     v_fil_cond = "GROUP_CODE == 'FS0022' && SET3 == 'Y'";
	}
	
	v_ds.filter(v_fil_cond);
	CopyF(ds_CORNER3,v_ds.name);
	CopyF(ds_CORNER4,v_ds.name);
	
	// 원가유형(ds_COST_TYPE, GROUP_CODE : 'FS0030')
	v_fil_cond = "GROUP_CODE == 'FS0030'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_COST_TYPE,v_ds.name);
	
	// 식단유형(ds_MENU_TYPE, GROUP_CODE : 'FS0031')
	v_fil_cond = "GROUP_CODE == 'FS0031'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_TYPE,v_ds.name);

	// 개별식단분류(ds_MENU_CLASS1, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0028'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_CLASS1,v_ds.name);
	
	// 기간식단분류(ds_MENU_CLASS1, GROUP_CODE : 'FS0029')
	v_fil_cond = "GROUP_CODE == 'FS0029'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_CLASS2,v_ds.name);
    
    // 레시피명 조회    
    fn_SearchCommon("fs/fsc:FSR_RECIPE_CD_REF_S001","","ds_RECIPE_List=gds_Csqlout","");
 
    // 업장별 레시피 분류
    fn_SearchCommon("fs/fsc:FSA_UPJANG_RECIPE_LINK_S001","","ds_RECIPE_LINK=gds_Csqlout","");
	
	// 초기값 셋팅
	//ds_input.SetColumn(0,"MENU_F_DATE1",fa_FROM_DT);	
	//ds_input.SetColumn(0,"MENU_T_DATE1",fa_TO_DT);	
	//ds_input.SetColumn(0,"MENU_F_DATE2",fa_FROM_DT);	
	//ds_input.SetColumn(0,"MENU_T_DATE2",fa_TO_DT);	
	ds_input.setColumn(0,"STYPE2","1");								// 표준식단->구분 : 개별표준식단	
	ed_MENU_CLASS_NM.value	= fa_MENU_CLASS_NM;
	ed_COST_TYPE_NM.value	= fa_COST_TYPE_NM;
	ed_MENU_TYPE_NM.value	= fa_MENU_TYPE_NM;
	ed_MEAL_NM.value			= fa_MEAL_NM;
	
	
	//trace(fa_FROM_DT + ' === ' + fa_TO_DT);  
	//Tab_list.tab2.me_MENU_F_DATE 	= fa_FROM_DT;
	//Tab_list.tab2.me_MENU_T_DATE 	= fa_TO_DT;
	
	div_1.me_MENU_F_DATE.fn_initMonthCal(this, "", "", ds_input, "MENU_F_DATE1", "Y");
	div_1.me_MENU_T_DATE.fn_initMonthCal(this, "", "", ds_input, "MENU_T_DATE1", "Y");
	div_2.me_MENU_F_DATE.fn_initMonthCal(this, "", "", ds_input, "MENU_F_DATE2", "Y");
	div_2.me_MENU_T_DATE.fn_initMonthCal(this, "", "", ds_input, "MENU_T_DATE2", "Y");
	
	me_priod.value = fa_FROM_DT + fa_TO_DT;
	
	// 초기값 셋팅
	serverSaveUrl = fsp_getServerDir(serverSaveDir);
	ds_input.setColumn(0,"FILEURL",serverSaveUrl);
	
	div_2.cbo_MEAL.index		= 0;
	div_2.cbo_COST_TYPE.index	= 0;
	div_2.cbo_MENU_TYPE.index	= 0;
	div_2.cbo_MENU_CLASS.index	= 0;
}

function frm_OnKeyDown(obj:Form, e:KeyEventInfo)
{
	gfn_formKeyDown(obj, e); //(obj,e.fromreferenceobject,e.keycode,e.shiftKey,e.ctrlKey,e.altKey,-1,-1);
}
//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_Search()
 * 기      능   : [조회버튼] 검색조건에 해당하는 정보를 조회
 ******************************************************************************************
 */
function fn_search(obj:Button, e:ClickEventInfo)
{
	// 조회조건체크
	if(!fn_SearchCheck())
	{
		return;
	}
	
	// 초기화
	ds_Master.clearData();
	ds_Detail.clearData();
	
	// 조회
	var actionName, cmdName, inData, outData, otherArg, callBackFnc, sqlId;
	
	if (rdo_SType.value=="1")		//사업장식단
	{
		sqlId	= "fs/fsm:FSM00040E_S001";
		ds_input.setColumn(0,"STYPE","0");
	}
	else							//기간표준식단
	{
		if (ds_input.getColumn(0,"STYPE2") == "1")
		{
			sqlId	= "fs/fsm:FSM00040E_S003";
			ds_input.setColumn(0,"STYPE","1");
		}
		else
		{
			sqlId	= "fs/fsm:FSM00040E_S005";
			ds_input.setColumn(0,"STYPE","2");
		}
	}
	
	inData			= "ds_input=ds_input";
	outData			= "ds_Master=ds_Master";
	callBackFnc		= "fn_afterSearch";
	
	fsp_clear(this); 
    fsp_addSearch(this, sqlId);													// 조회 
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출 
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Save()
 * 기      능   : [저장버튼] 저장 시 처리되는 작업
 ******************************************************************************************
 */
function fn_save(obj:Button, e:ClickEventInfo)
{
	// 저장조건체크
	if(!fn_SaveCheck())
	{
		return;
	}

	var sqlId,inData, outData, otherArg, callBackFnc;
	
	ds_Result.clearData();
	ds_ResultDt.clearData();

	// 파라미터셋팅
	otherArg	 = "g_EmpNo="+wrapQuote(g_EmpNo);
	otherArg    += " SaveType="+wrapQuote(Tab_list.tabindex);
	otherArg    += " fa_MENU_CLASS="+wrapQuote(fa_MENU_CLASS);
	otherArg    += " fa_COST_TYPE="+wrapQuote(fa_COST_TYPE);
	otherArg    += " fa_MENU_TYPE="+wrapQuote(fa_MENU_TYPE);
	otherArg    += " fa_MEAL="+wrapQuote(fa_MEAL);
	
	
	//trace('save1');
	if (Tab_list.tabindex == 1)		// 기간복사
	{
	 
// 		otherArg	= {g_EmpNo:g_EmpNo,SaveType:Tab_list.tabindex
// 	                  ,fa_MENU_CLASS:fa_MENU_CLASS,fa_COST_TYPE:fa_COST_TYPE
// 	                  ,fa_MENU_TYPE:fa_MENU_TYPE,fa_MEAL:fa_MEAL,strCopyGubun:strCopyGubun};
		
		otherArg	 = "g_EmpNo="+wrapQuote(g_EmpNo);
		otherArg    += " SaveType="+wrapQuote(Tab_list.tabindex);
		otherArg    += " fa_MENU_CLASS="+wrapQuote(fa_MENU_CLASS);
		otherArg    += " fa_COST_TYPE="+wrapQuote(fa_COST_TYPE);
		otherArg    += " fa_MENU_TYPE="+wrapQuote(fa_MENU_TYPE);
		otherArg    += " fa_MEAL="+wrapQuote(fa_MEAL);
		otherArg    += " strCopyGubun="+wrapQuote(strCopyGubun);
		
		if (strCopyGubun == "0" || strCopyGubun == "2")		// 사업장식단,기간표준식단
		{
			var sday,eday;
			
			sday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
			eday = Tab_list.tab2.me_MENU_F_DATE.value;
		
// 			otherArg	= "g_EmpNo=g_EmpNo,SaveType:Tab_list.tabindex
// 						  ,fa_MENU_CLASS:fa_MENU_CLASS,fa_COST_TYPE:fa_COST_TYPE
// 						  ,fa_MENU_TYPE:fa_MENU_TYPE,fa_MEAL:fa_MEAL,strCopyGubun:strCopyGubun
// 						  ,CORNER:Tab_list.tab2.cbo_CORNER.value,D_DT:G_fn_GapDay(sday, eday) }; 
	    
	    otherArg	 = "g_EmpNo="+wrapQuote(g_EmpNo);
		otherArg    += " SaveType="+wrapQuote(Tab_list.tabindex);
		otherArg    += " fa_MENU_CLASS="+wrapQuote(fa_MENU_CLASS);
		otherArg    += " fa_COST_TYPE="+wrapQuote(fa_COST_TYPE);
		otherArg    += " fa_MENU_TYPE="+wrapQuote(fa_MENU_TYPE);
		otherArg    += " fa_MEAL="+wrapQuote(fa_MEAL);
		otherArg    += " strCopyGubun="+wrapQuote(strCopyGubun);
		otherArg    += " CORNER="+wrapQuote(Tab_list.tab2.cbo_CORNER.value);
		otherArg    += " D_DT="+ wrapQuote(G_fn_GapDay(sday, eday));
		
	
		}
	}
	
	// 서비스셋팅
    sqlId	= "U_svc::" + "fs/fsm/FSM00040E_T001.jsp";
	
	//trace(otherArg);
	
	//sqlId	= "fs/fsm/FSM00040E_T001.jsp";
    
    inData		= "ds_list=ds_list ds_input=ds_input ds_Result=ds_Result ds_ResultDt=ds_ResultDt";
    outData		= "ds_Result=ds_Result ds_ResultDt=ds_ResultDt";
    
	//transaction("FSM00040E",sqlId,inData,outData,otherArg,"fn_SaveCallback");
	jsp_transaction(this,"FSM00040E",sqlId,inData,outData,otherArg,"fn_SaveCallback",false,true,false);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function fn_Close(obj:Button, e:ClickEventInfo)
{
	this.close();
}
//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchSub(nRow)
 * 입      력   : nRow = Master Row
 * 반      환   : 없음
 * 기      능   : 상세내역 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_SearchSub(nRow)
{
	// 초기화
	ds_Detail.clearData();
	
	// 조회
	var actionName, cmdName, inData, outData, otherArg, callBackFnc,sqlId;
	
	var strStype = ds_input.getColumn(0,"STYPE");
	
	if (strStype=="0")			//사업장식단
	{
		otherArg	= "MENU_CD=" + wrapQuote(ds_Master.getColumn(nRow,"MENU_CD"));
		sqlId	= "fs/fsm:FSM00040E_S002";
	}
	else if (strStype=="1")		//개별표준식단
	{
		otherArg	= "SINGLE_MENU_CD=" + wrapQuote(ds_Master.getColumn(nRow,"SINGLE_MENU_CD"));
		sqlId	= "fs/fsm:FSM00040E_S004";
	}
	else						//기간표준식단
	{
		otherArg	= "TERM_MENU_CD=" + wrapQuote(ds_Master.getColumn(nRow,"TERM_MENU_CD"));
		sqlId	= "fs/fsm:FSM00040E_S006";
	}
	
	inData			= "ds_input=ds_input";
	outData			= "ds_Detail=ds_Detail";
	callBackFnc		= "fn_afterSearch";
	
	fsp_clear(this); 
    fsp_addSearch(this, sqlId);													// 조회 
    fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);		// 서비스 호출 
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchCommon(sqlId,inDS,outDS,otherArg)
 * 입      력   : sqlId = 실행할 sqlID
				  inDS	= input DS
				  outDS	= out DS
				  otherArg = arg
 * 반      환   : 없음
 * 기      능   : 코드조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_SearchCommon(sqlId,inDS,outDS,otherArg)
{
	fsp_clear(this);
	fsp_addSearch(this, sqlId);
	fsp_callService(this, "", "", inDS, outDS ,otherArg, "");
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 사업장 조회 후 실행 함수
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function fn_afterSearch(errCode, errMsg)
{
	// 식단원가 filter
	if (ds_Master.rowcount > 0)
	{
		var strFilter = "";			// Filter Script
		
		if (rdo_SType.value=="1")
		{
			if (toNumber(div_1.med_F_MENU_COST.value)>0)
			{
				strFilter	+= "MENU_COST>=" + toNumber(div_1.med_F_MENU_COST.value) + " ";
			}
			
			if (toNumber(div_1.med_T_MENU_COST.value)>0)
			{
				strFilter	+= " MENU_COST<=" + toNumber(div_1.med_T_MENU_COST.value);
			}
		}
		else if (rdo_SType.value=="2" && ds_input.getColumn(0,"STYPE2") == "1")
		{
			if (toNumber(div_2.med_F_MENU_COST.value)>0)
			{
				strFilter	+= "MENU_COST>=" + toNumber(div_2.med_F_MENU_COST.value) + " ";
			}
			
			if (toNumber(div_2.med_T_MENU_COST.value)>0)
			{
				strFilter	+= " MENU_COST<=" + toNumber(div_2.med_T_MENU_COST.value);
			}
		}
		
		strFilter	= gfn_replace(strFilter,"  "," && ");
		
		ds_Master.filter(strFilter);
	}
	
	// 그리드셋팅
	if (rdo_SType.value=="1")		//사업장식단
	{
		grd_Master.formatid = "Default";
	}
	else							//기간표준식단
	{
		if (ds_input.getColumn(0,"STYPE2") == "1")
		{
			grd_Master.formatid = "Default0";
		}
		else
		{
			grd_Master.formatid = "Default1";
		}

		if( div_2.cbo_SType2.value == "2" )
		{
			Tab_list.tab2.me_MENU_F_DATE.value = ds_input.getColumn(0, "MENU_F_DATE2");
			Tab_list.tab2.me_MENU_T_DATE.value = ds_input.getColumn(0, "MENU_T_DATE2");
		}
	}
	
//	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 사업장 조회 후 실행 함수
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function fn_SaveCallback(errCode, errMsg)
{


    //trace(errMsg);

	// 식단원가 filter
	if (errCode != 0)
	{
		g_Message("EE", errMsg);
		return;
	}
	
	if (ds_Result.rowcount + ds_ResultDt.rowcount == 0)
	{
		g_Message("03", "");
	}
	else
	{
		gfn_dialog("", "U_FSM::FSM00041P.xfdl","");
	}
	
	//this.Close();
}

function fn_Callback_Corner3(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else {
     
        //trace(ds_CORNER3.saveXML());
    
    }
}

function fn_Callback_Corner4(errCode, errMsg){

	if( errCode != 0 ) {
			return;
    } else { 
       ds_CORNER4.filter(fn_GetFilter(-1));
    }
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchCheck()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 조회시 필수조회조건 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_SearchCheck()
{
	if (rdo_SType.value == "1")					// 1: 사업장식단
	{
		// 사업장
		if (gfn_length(ds_input.getColumn(0,"UPJANG"))==0)
		{
			g_Message("EE", "사업장을 선택하세요.");
			div_1.ed_UPJANG_NM.setFocus();
			return false;
		}
		
		// 식당
		if (gfn_length(ds_input.getColumn(0,"HALL_CD"))==0)
		{
			g_Message("EE", "식당을 선택하세요.");
			div_1.cbo_HALL_CD.setFocus();
			return false;
		}
		// 기간 - from
		if (gfn_length(ds_input.getColumn(0,"MENU_F_DATE1"))==0)
		{
			g_Message("EE", "기간을 입력하세요.");
			div_1.me_MENU_F_DATE.setFocus();
			return false;
		}

		// 기간 -  to
		if (gfn_length(ds_input.getColumn(0,"MENU_T_DATE1"))==0)
		{
			g_Message("EE", "기간을 입력하세요.");
			div_1.me_MENU_T_DATE.setFocus();
			return false;
		}
		
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE1"),1)<ds_input.getColumn(0,"MENU_T_DATE1"))
		{
			g_Message("EE", "기간은 최대 1개월입니다.");
			div_1.me_MENU_T_DATE.setFocus();
			return false;
		}
	}
	else										// 2 : 표준식단
	{
		// 구분
		if (gfn_length(ds_input.getColumn(0,"STYPE2"))==0)
		{
			g_Message("EE", "구분을 선택하세요.");
			div_2.cbo_SType2.setFocus();
			return false;
		}
		
		// 분류
		if (gfn_length(ds_input.getColumn(0,"MENU_CLASS"))==0)
		{
			g_Message("EE", "분류를 선택하세요.");
			div_2.cbo_MENU_CLASS.setFocus();
			return false;
		}
			
		if (div_2.cbo_SType2.value == "2")	// 기간표준식단
		{
			// 원가유형
			if (gfn_length(ds_input.getColumn(0,"COST_TYPE"))==0)
			{
				g_Message("EE", "원가유형을 선택하세요.");
				div_2.cbo_COST_TYPE.setFocus();
				return false;
			}
			
			// 식단유형
			if (gfn_length(ds_input.getColumn(0,"MENU_TYPE"))==0)
			{
				g_Message("EE", "식단유형을 선택하세요.");
				div_2.cbo_MENU_TYPE.setFocus();
				return false;
			}
			
			// 기간 - from
			if (gfn_length(ds_input.getColumn(0,"MENU_F_DATE2"))==0)
			{
				g_Message("EE", "기간을 입력하세요.");
				div_2.me_MENU_F_DATE.setFocus();
				return false;
			}
			
			// 기간 -  to
			if (gfn_length(ds_input.getColumn(0,"MENU_T_DATE2"))==0)
			{
				g_Message("EE", "기간을 입력하세요.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
			
			if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE2"),1)<ds_input.getColumn(0,"MENU_T_DATE2"))
			{
				g_Message("EE", "조회기간은 최대 1개월입니다.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
		}
	}
    
    return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SaveCheck()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 저상시 필수입력 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_SaveCheck()
{
	// 조회조건체크
	if(!fn_SearchCheck())
	{
		return false;
	}
	
	var strGDt1,strGDt2;
	
	if (Tab_list.tabindex == 0)		// 개별복사시
	{
		var nFRow;
		
		if (ds_list.rowcount == 0)
		{
			g_Message("EE", "복사할 데이터가 없습니다.");
			Tab_list.tab1.grd_Save.setFocus();
			return false;
		}
		
		// 제공일
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(MENU_DATE))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "제공일을 입력해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(1);
			return false;
		}
		
		// 코너
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(CORNER))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "코너를 선택해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(3);
			return false;
		}
	}
	else							// 기간복사시에는 끼니 코너도체크
	{
		var strSType = rdo_SType.value;

		// 끼니
		if (gfn_length(ds_input.getColumn(0,"MEAL" + strSType))==0)
		{
			g_Message("EE", "끼니를 선택하세요.");
			eval("div_" + strSType).cbo_MEAL.setFocus();
			return false;
		}
		
		// 코너
		if (gfn_length(ds_input.getColumn(0,"CORNER" + strSType))==0)
		{
			g_Message("EE", "코너를 선택하세요.");
			eval("div_" + strSType).cbo_CORNER.setFocus();
			return false;
		}
		
		if (strCopyGubun == "0")					// 0: 사업장식단
		{
			// 기간
			strGDt1 = G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE1"), ds_input.getColumn(0,"MENU_T_DATE1"));
			
			if (strGDt1>6)
			{
				g_Message("EE", "기간복사시 일주일 이내로 복사 가능합니다.");
				div_1.me_MENU_T_DATE.setFocus();
				return false;
			}
			
			
		}
		else
		{
			// 기간
			strGDt1 = G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE2"), ds_input.getColumn(0,"MENU_T_DATE2"));
			
			if (G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE2"), ds_input.getColumn(0,"MENU_T_DATE2"))>6)
			{
				g_Message("EE", "기간복사시 일주일 이내로 복사 가능합니다.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
		}
		
		// 검색기간과 기간복사 기간체크
		strGDt2 = G_fn_GapDay(Tab_list.tab2.me_MENU_F_DATE.value, Tab_list.tab2.me_MENU_T_DATE.value);
		if (strGDt1 != strGDt2)
		{
			g_Message("EE", "복사원본과 복사대상의 기간이 다릅니다.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
		
		// 복사대상 - 코너
		if (gfn_length(Tab_list.tab2.cbo_CORNER.value)==0)
		{
			g_Message("EE", "코너를 선택하세요.");
			Tab_list.tab2.cbo_CORNER.setFocus();
			return false;
		}
		
		// 복사대상 - 기간
		if (gfn_length(Tab_list.tab2.me_MENU_F_DATE.value)==0)
		{
			g_Message("EE", "기간를 선택하세요.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
		if (gfn_length(Tab_list.tab2.me_MENU_T_DATE.value)==0)
		{
			g_Message("EE", "기간를 선택하세요.");
			Tab_list.tab2.me_MENU_T_DATE.setFocus();
			return false;
		}
		if (Tab_list.tab2.me_MENU_F_DATE.value > Tab_list.tab2.me_MENU_T_DATE.value)
		{
			g_Message("EE", "기간을 확인해 주십시오.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
		
		if (Tab_list.tab2.me_MENU_F_DATE.value < fa_FROM_DT || Tab_list.tab2.me_MENU_T_DATE.value > fa_TO_DT)
		{
			var strmsg;
			
			strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
			strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
			strmsg += "를 입력해 주십시오." ;
			
			g_Message("EE", strmsg);
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
	}
	
    return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_formSetting()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 화면버튼셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_formSetting()
{
	var btp1,btp2;
	//trace(rdo_SType.value);
	if (rdo_SType.value == "1")					// 1: 사업장식단
	{
		div_1.position = "absolute 15 40 1125 108";
		div_1.visible = true;
		div_2.visible = false;
		
		if (Tab_list.tabindex == 0)		// 개별복사
		{
			btp1 = true;
			
		}
		else							// 기간복사
		{
			btp1 = false;
		}
		
		div_1.cbo_RECIPE.enable 		= btp1;
		div_1.ed_SCHEDULE.enable		= btp1;
		div_1.ed_MENU_FEATURE.enable 	= btp1;
		div_1.med_Topcnt.enable 		= btp1;
		div_1.med_F_MENU_COST.enable 	= btp1;
		div_1.med_T_MENU_COST.enable 	= btp1;
	}
	else										// 2 : 기간표준식단
	{
		div_2.position = "absolute 15 40 1125 108";
		div_1.visible = false;
		div_2.visible = true;
		
		if (div_2.cbo_SType2.value == "1")	// 개별표준식단
		{
			btp1 = false;
			btp2 = true;
		}
		else								// 기간표준식단
		{
			btp1 = true;
			btp2 = false;
			
			Tab_list.tab2.me_MENU_F_DATE.value = ds_input.getColumn(0, "MENU_F_DATE2");
			Tab_list.tab2.me_MENU_T_DATE.value = ds_input.getColumn(0, "MENU_T_DATE2");
		}
		
		// 필수여부이미지
// 		div_2.img_imp1.visible = btp1;
// 		div_2.img_imp2.visible = btp1;
// 		div_2.img_imp3.visible = btp1;
		
		
		div_2.cbo_COST_TYPE.enable 		= btp1;
		div_2.cbo_MENU_TYPE.enable		= btp1;
		div_2.me_MENU_F_DATE.enable 	= btp1;
		div_2.me_MENU_T_DATE.enable 	= btp1;
		div_2.cbo_MEAL.enable 			= btp1;
		div_2.cbo_CORNER.enable 		= btp1;
		div_2.cbo_RECIPE.enable 		= btp2;
		div_2.ed_MENU_NAME.enable 		= btp2;
		div_2.med_F_MENU_COST.enable 	= btp2;
		div_2.med_T_MENU_COST.enable 	= btp2;
		
		div_2.cbo_MENU_CLASS.index = 1;
		div_2.cbo_COST_TYPE.index = fa_COST_TYPE;
		div_2.cbo_MENU_TYPE.index = 1;
		div_2.cbo_MEAL.index = 0;
		div_2.cbo_CORNER.index = 0;
		
		
	}
	
	if (Tab_list.tabindex == 0)		// 개별복사 : 선택
	{
		grd_Master.setFormatColProperty(1,"size",30);
	}
	else							// 기간복사 : 선택제거
	{
		grd_Master.setFormatColProperty(1,"size",0);
	}
	
	strCopyGubun = iif(rdo_SType.value=="1","0",ds_input.getColumn(0,"STYPE2"));
}
//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : grd_List_OnHeadClick(obj,nCell,nX,nY,nPivotIndex)
 * 기      능   : 그리드헤드 더블클릭시 Sort
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function grd_List_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_pop1_OnClick(obj)
 * 기      능   : 팝업버튼 클릭 -> 사업장 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function btn_pop1_OnClick(obj:Button, e:ClickEventInfo)
{
// 	//[[As-Is 소스
// 	if (SCPopup.runTimeMode == "As-Is")
// 	{
		fn_sql_common_setup( strQuery_Upjang
							,strQuery_UpjangKeyField
							,strQuery_UpjangValueField
							,strQuery_UpjangKeyFieldNM
							,strQuery_UpjangValueFieldNM
							,""
							,""
							,""
							,strQuery_UpjangCaption
							,strQuery_UpjangAllField);
							
		ds_input.setColumn(0,"UPJANG_NM",gds_sql_common.getColumn(0, "ret_name"));
		ds_input.setColumn(0,"UPJANG",gds_sql_common.getColumn(0, "ret_code"));
// 	}
// 	//As-Is 소스]]
// 	//[[To-Be 소스
// 	else
// 	{
// 		fn_sql_common_setup( strQuery_Upjang
// 							,strQuery_UpjangKeyField
// 							,strQuery_UpjangValueField
// 							,strQuery_UpjangKeyFieldNM
// 							,strQuery_UpjangValueFieldNM
// 							,""
// 							,""
// 							,{}
// 							,strQuery_UpjangCaption
// 							,strQuery_UpjangAllField);
// 							
// 		ds_input.setColumn(0,"UPJANG_NM",gds_sql_common.getColumn(0, "ret_name"));
// 		ds_input.setColumn(0,"UPJANG",gds_sql_common.getColumn(0, "ret_code"));
// 	}
// 	//To-Be 소스]]
 
}

/*
 ******************************************************************************************
 * 함  수  명   : rdo_SType_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 식단에 따라 검색조건 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function rdo_SType_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	if( ds_Master.rowcount > 0 )
	{
		for( var i = 0; i < ds_Master.rowcount; i++ )
		{
			ds_Master.setColumn(i, "CHK", 0);
		}
	}

	ds_list.clearData();

	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : sp_line_OnMove(obj,nBeforePos,nPos)
 * 기      능   : 그리드 리사이즈시 최대,최소 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-20  
 ******************************************************************************************
 */
function sp_line_OnMove(obj:Splitter, e:MoveEventInfo)
{
	// Top
	if (-1 < st_bk1.position.top)
	{
		sp_line.position.top = st_bk1.position.top -5;
	}
	
	// Bottom
	if (-1 > toNumber(st_bk2.position.top + st_bk2.position.height))
	{
		sp_line.position.top = toNumber(st_bk2.position.top + st_bk2.position.height);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_input_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 조회조건이 변경된 경우
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function ds_input_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 업장선택시 식당리스트 조회
	if (e.columnid == "UPJANG")
	{
		if (gfn_length(gfn_toString(e.newvalue))== 0)
		{
			ds_HALL_CD.clearData();
			ds_MEAL1.clearData();
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 식당 조회
			fn_SearchCommon("fs/fsc:FSA_HALL_MST_S001","ds_in=ds_input","ds_HALL_CD=gds_Csqlout","");
		}
		
		ds_input.setColumn(0,"HALL_CD","");
	}
	
	// 식당선택시 끼니리스트 조회
	if (e.columnid == "HALL_CD")
	{
		if (gfn_length(e.newvalue)== 0)
		{
			ds_MEAL1.clearData();
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 끼니 조회
			fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S001","ds_in=ds_input","ds_MEAL1=gds_Csqlout","nullyn='Y'");
		}
	}
	
	// 끼니선택시 코너리스트 조회
	if (e.columnid == "MEAL1")
	{
		if (gfn_length(e.newvalue)== 0)
		{
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 코너 조회
			ds_input.setColumn(0,"MEAL",ds_input.getColumn(0,"MEAL1"));
			fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","ds_in=ds_input","ds_CORNER1=gds_Csqlout","nullyn='Y'");
			
		}
	}

	// 구분에 따라 분류셋팅
	if (e.columnid == "STYPE2")
	{
		// 단일
		if (e.newvalue == "1")			// 개별표준식단
		{
			Copy(ds_MENU_CLASS,ds_MENU_CLASS1);
		}
		else							// 기간표준식단
		{
			Copy(ds_MENU_CLASS,ds_MENU_CLASS2);
		}
	}
	
	// 식단유형
	if (e.columnid == "MENU_TYPE")
	{
	
	    //trace('MENU_TYPE => ' + e.newvalue);
	
		// 단일
		
		//trace(ds_CORNER2.saveXML());
		
		if (e.newvalue == "001")
		{
		 
//			 var vFil = "CODE=='001'";
//		    ds_CORNER2.filter('');
//			ds_CORNER2.filter(vFil);
			
			//trace(ds_CORNER2.saveXML());
			
			ds_input.setColumn(0,"CORNER2","001");
		}
		else
		{
			ds_CORNER2.filter("");
		}
	}
	
	// 조회일자가 한달이상 안됨.
	
// 조회일자가 한달이상 안됨.
	if (e.columnid == "MENU_F_DATE"  && gfn_length(gfn_trim(e.newvalue))>0 && gfn_length(ds_input.getColumn(0,"MENU_T_DATE")) > 0)
	{
	
	    ds_input.getColumn(0,"MENU_F_DATE")
	
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE"),1)<ds_input.getColumn(0,"MENU_T_DATE"))
		{
			g_Message("EE", "조회기간은 최대 1개월입니다.");
			ds_input.setColumn(0,e.columnid,"");
			me_FROM_DT.setFocus();
			return false;
		}
	}
	
	if (e.columnid == "MENU_F_DATE1"  && gfn_length(gfn_trim(e.newvalue))>0 && gfn_length(ds_input.getColumn(0,"MENU_T_DATE1")) > 0)
	{
	 
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE1"),1)<ds_input.getColumn(0,"MENU_T_DATE1"))
		{
			g_Message("EE", "조회기간은 최대 1개월입니다.");
			ds_input.setColumn(0,e.columnid,"");
			div_1.me_MENU_F_DATE.setFocus();
			return false;
		}
	}
	
	if (e.columnid == "MENU_T_DATE1"  && gfn_length(gfn_trim(e.newvalue))>0 && gfn_length(ds_input.getColumn(0,"MENU_F_DATE1")) > 0)
	{
 
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE1"),1)<ds_input.getColumn(0,"MENU_T_DATE1"))
		{
			g_Message("EE", "조회기간은 최대 1개월입니다.");
			ds_input.setColumn(0,e.columnid,"");
			div_1.me_MENU_T_DATE.setFocus();
			return false;
		}
	}
		
    if (e.columnid == "MENU_F_DATE2"  && gfn_length(gfn_trim(e.newvalue))>0 && gfn_length(ds_input.getColumn(0,"MENU_T_DATE2")) > 0)
	{
	 
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE2"),1)<ds_input.getColumn(0,"MENU_T_DATE2"))
		{
			g_Message("EE", "조회기간은 최대 1개월입니다.");
			ds_input.setColumn(0,e.columnid,"");
			div_2.me_MENU_F_DATE.setFocus();
			return false;
		}
	}
	
	if (e.columnid == "MENU_T_DATE2"  && gfn_length(gfn_trim(e.newvalue))>0 && gfn_length(ds_input.getColumn(0,"MENU_F_DATE2")) > 0)
	{
 
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE2"),1)<ds_input.getColumn(0,"MENU_T_DATE2"))
		{
			g_Message("EE", "조회기간은 최대 1개월입니다.");
			ds_input.setColumn(0,e.columnid,"");
			div_2.me_MENU_T_DATE.setFocus();
			return false;
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_OnChanged(obj,nOldIndex,nNewindex)
 * 기      능   : 텝클릭후 폼셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function Tab_list_OnChanged(obj:Tab, e:TabIndexChangeEventInfo)
{
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_OnChanging(obj,nOldIndex,nNewIndex)
 * 기      능   : 텝클릭시 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function Tab_list_OnChanging(obj:Tab, e:TabIndexChangeEventInfo)
{
	if (rdo_SType.value == "2")
	{
		if (div_2.cbo_SType2.value == "1" && e.postindex == 1)
		{
			g_Message("EE", "개별표준식단인 경우 기간복사를 하실 수 없습니다.");
			return false;
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : div_2_cbo_SType2_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 구분선택시
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function div_2_cbo_SType2_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_MENU_CLASS.clearData();
		
	// 단일
	if (e.postindex == 0)			// 개별표준식단
	{
		 ds_MENU_CLASS.copyData(ds_MENU_CLASS1);
	}
	else							// 기간표준식단
	{
		ds_MENU_CLASS.copyData(ds_MENU_CLASS2);
	}

	if( ds_Master.rowcount > 0 )
	{
		for( var i = 0; i < ds_Master.rowcount; i++ )
		{
			ds_Master.setColumn(i, "CHK", 0);
		}
	}

	ds_list.clearData();

	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_Date_OnClick(obj,nX,nY)
 * 기      능   : 달력
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function btn_Date_OnClick(obj:Button, e:ClickEventInfo)
{
	var objme = eval(obj.userdata);
	
	var retDate = gfn_dialog("", "U_SCC::SCC_CALENDAR.xfdl","fa_Date="+wrapQuote(objme.value),-1,-1,"Title=false Status=false");

	objme.value  = retDate;
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_Master_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 선택된 경우 개별복사에 추가
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function ds_Master_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 선택된 경우 개별복사에 추가
	if (e.columnid == "CHK" && e.newvalue == "1")
	{
		var nARow = ds_list.addRow();
		ds_list.copyRow(nARow,obj,e.row,"RECIPE_INFO=RECIPE_INFO,MENU_ID=MENU_ID,MENU_CD=MENU_CD");
		ds_list.setColumn(nARow,"COPY_TYPE",strCopyGubun); 
		ds_list.setColumn(nARow,"CORNER",iif(fa_MENU_TYPE=="001","001")); 

		// 권장식단일 경우 제공일 자동입력
		if(rdo_SType.value == "2" && div_2.cbo_SType2.value == "2" )
		{
			ds_list.setColumn(nARow, "ORG_MENU_DATE", obj.getColumn(e.row, "MENU_DATE"));
			ds_list.setColumn(nARow, "MENU_DATE", obj.getColumn(e.row, "MENU_DATE"));
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_list_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 개별복사시 데이터 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function ds_list_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if (e.columnid == "MENU_DATE" || e.columnid == "CORNER")
	{
		var strMENU_DATE 	= ds_list.getColumn(e.row,"MENU_DATE");
		var strCORNER 		= ds_list.getColumn(e.row,"CORNER");

		if( rdo_SType.value == "2" && div_2.cbo_SType2.value == "2" )
		{
			if( !gfn_isNull(obj.getColumn(e.row, "MENU_DATE")) && (obj.getColumn(e.row, "MENU_DATE") != obj.getColumn(e.row, "ORG_MENU_DATE")) )
			{
				obj.setColumn(e.row, "MENU_DATE", obj.getColumn(e.row, "ORG_MENU_DATE"));
				g_Message("EE", "권장식단 개별복사일 경우\n제공일은 복사대상의 날짜와 동일해야 합니다.");
			}
		}
		else
		{
			// 부모기간안에 있는지 체크
			if (e.columnid == "MENU_DATE" && gfn_length(e.newvalue)> 0)
			{
				if (strMENU_DATE < fa_FROM_DT || strMENU_DATE > fa_TO_DT)
				{
					var strmsg;
					
					strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
					strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
					strmsg += "를 입력해 주십시오." ;
					
					g_Message("EE", strmsg);
					ds_list.setColumn(e.row,e.columnid,"");
					Tab_list.tab1.grd_Save.setCellPos(1);
				}
			}
			
			if (gfn_length(strMENU_DATE)> 0 && gfn_length(strCORNER)> 0)
			{
				var nCnt,otherArg,strMenuCD;
				
				// 중복체크
				nCnt = ds_list.getCaseCount("MENU_DATE=" + wrapQuote(strMENU_DATE) + " && CORNER=" + wrapQuote(strCORNER));
				
				if (nCnt>1)
				{
					g_Message("EE", "중복된 식단이 있습니다.");
					ds_list.setColumn(e.row,e.columnid,"");
					Tab_list.tab1.grd_Save.setCellPos(decode(e.columnid,"MENU_DATE",1,"CORNER",2));
				}
			}
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab1_grd_Save_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 개별복사 그리드 삭제버튼 클릭
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function Tab_list_tab1_grd_Save_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	// 삭제클릭
	if (e.cell==4)
	{
		var nFRow = ds_Master.findRow("MENU_ID",ds_list.getColumn(e.row,"MENU_ID"));
		ds_Master.setColumn(nFRow,"CHK","0");
		
		ds_list.deleteRow(e.row);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : grd_Master_OnCellDblClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 상세내역조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function grd_Master_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{
	fn_SearchSub(e.row);
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab1_grd_Save_OnExpandEdit(obj,nRow,nCell,strVal,nPivotIndex)
 * 기      능   : 날짜팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function Tab_list_tab1_grd_Save_OnExpandEdit(obj:Grid, e:GridMouseEventInfo)
{
	var retDate,strValue;
	
	 var nCellRect  = obj.getCellRect(e.row, 1); //left,right,top,bottom


	var nX = system.clientToScreenX(obj, nCellRect.left);

	var nY = system.clientToScreenY(obj, nCellRect.top);
	
	

	var orgDate = ds_list.getColumn(ds_list.rowposition, "MENU_DATE");		
	var retDate = gfn_callCalendarPopDiv(ds_list.getColumn(ds_list.rowposition, "MENU_DATE"),nX, nY-356);

	if(gfn_isNull(retDate)) {
	 ds_list.setColumn(ds_list.rowposition, "MENU_DATE", orgDate);
	} else {
	 ds_list.setColumn(ds_list.rowposition, "MENU_DATE", retDate);
	} 
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab2_btn_MENU_F_DATE_OnClick(obj)
 * 기      능   : 기간복사시 날짜
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function Tab_list_tab2_btn_MENU_F_DATE_OnClick(obj:Button, e:ClickEventInfo)
{
	/*
	var retDate,strValue,sday,eday;
	
	strValue = Tab_list.tab2.me_MENU_F_DATE.Value ;
	
	retDate = gfn_dialog("", "U_SCC::SCC_CALENDAR.xml","fa_Date="+quote(strValue),-1,-1,"Title=false Status=false");

	sday = ds_input.GetColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
	eday = ds_input.GetColumn(0,iif(strCopyGubun == "0","MENU_T_DATE1","MENU_T_DATE2"));

	Tab_list.tab2.me_MENU_F_DATE.Value = retDate;
	Tab_list.tab2.me_MENU_T_DATE.Value = AddDate(retDate,G_fn_GapDay(sday, eday));
	*/
	
	var objme 	= "Tab_list.tab2."+obj.userdata;
	
	
	//var retDate = gfn_dialog("", "U_SCC::SCC_CALENDAR.xfdl","fa_Date="+wrapQuote(objme.value),-1,-1,"Title=false Status=false");

    var retDate=g_CalButton_OnClick(obj);


	// 부모기간안에 있는지 체크
	if (retDate < fa_FROM_DT || retDate > fa_TO_DT)
	{
		var strmsg;
		
		strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
		strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
		strmsg += "를 입력해 주십시오." ;
		
		g_Message("EE", strmsg);
		
		retDate = "";
	}
	
	objme.value  = retDate;
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab2_me_MENU_F_DATE_OnChar(obj,strPreText,nChar,strPostText,nLLParam,nHLParam)
 * 기      능   : 기간복사 날짜 입력
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function Tab_list_tab2_me_MENU_F_DATE_OnChar(obj:MaskEdit, e:CharEventInfo)
{
	var strDate = gfn_replace(e.posttext,"-","");

	if (gfn_right(strDate,1)!= "_")
	{
		sday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
		eday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_T_DATE1","MENU_T_DATE2"));
		
		Tab_list.tab2.me_MENU_T_DATE.value = gfn_addDate(strDate,G_fn_GapDay(sday, eday));
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 업장엔터시팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-01-09  
 ******************************************************************************************
 */
function ed_pop_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13)
	{
		var objme = eval(obj.userdata);
		objme.click();
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : grd_Master_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 사진팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function grd_Master_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	if (e.cell==5)	// 사진팝업
	{
		if (gfn_length(ds_Master.getColumn(e.row,"SPHOTO_PATH_1"))+ gfn_length(ds_Master.getColumn(e.row,"SPHOTO_PATH_2"))> 0)
		{
			ds_Master.rowposition = e.row;
			gfn_dialog("", "U_FSM::FSM00010P.xfdl",{fa_Enable:false,pRow:e.row,fa_ObjDs:ds_Master}); 
		}	
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : cbo_OnKillFocus(obj) /cbo_OnChar(obj,strPreText,nChar,strPostText,LLParam,HLParam)
 * 기      능   : 레시피명 자동완성기능
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function cbo_OnKillFocus(obj:Combo, e:KillFocusEventInfo)
{
	var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
	objDs			= obj.innerdataset;
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue)==0) return;
	
	nFRow = eval(objDs).findRow(strDataColumn,strValue);
	
	if (nFRow == -1)
	{
		var nRow = eval(objDs).addRow();
		eval(objDs).setColumn(nRow,strDataColumn,strValue);
		obj.value = strValue;
	}
}
function cbo_OnChar(obj:Combo, e:CharEventInfo)
{
	if (e.chartext == 13)
	{
		div_cmnBtn.btn_search.setFocus();
		div_cmnBtn.btn_search.click();
	}
	else
	{
		obj.userdata = e.posttext;
	}
}
 
 
function div_1_cbo_HALL_CD_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ActionVal 	="UPJANG="   +  gfn_nvl(ds_input.getColumn(0,"UPJANG"))
				+" HALL_CD=" +	gfn_nvl(ds_input.getColumn(0,"HALL_CD"))
				+" MEAL=" +	gfn_nvl(ds_input.getColumn(0,"MEAL"))
				+" USE_YN="	 +	'Y';
				
// 코너 조회(입력용)
 	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER3=gds_Csqlout",ActionVal,"fn_Callback_Corner3");  
 
 	
  	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER4=gds_Csqlout",ActionVal,"fn_Callback_Corner4");
}

function div_1_cbo_MEAL_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
		ActionVal 	="UPJANG="   +  gfn_nvl(ds_input.getColumn(0,"UPJANG"))
				+" HALL_CD=" +	gfn_nvl(ds_input.getColumn(0,"HALL_CD"))
				+" MEAL=" +	gfn_nvl(ds_input.getColumn(0,"MEAL"))
				+" USE_YN="	 +	'Y';
				
// 코너 조회(입력용)
 	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER3=gds_Csqlout",ActionVal,"fn_Callback_Corner3");  
 
 	
  	fn_SearchCommon("fs/fsc:FSA_HALL_DTL_S002","","ds_CORNER4=gds_Csqlout",ActionVal,"fn_Callback_Corner4");
}

function div_1_cbo_RECIPE_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{ 
 	//trace("obj.userchange=="+obj.userchange+":::::e.pretext=="+e.pretext+"::::::e.posttext=="+e.posttext);
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		btn_search.setFocus();
		btn_search.click();
		div_1.cbo_RECIPE.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}
}

function div_1_cbo_RECIPE_onkeydown(obj:Combo, e:KeyEventInfo)
{
 
	if (e.keycode == 13 && obj.userchange == "1") {
		var strValue,nFRow,objDs,strDataColumn;
		
		strValue 		= obj.userdata;
	//	objDs			= eval(obj.innerdataset);
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = ds_RECIPE_List.addRow();
				ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		btn_search.setFocus();
		btn_search.click();
		cbo_RECIPE.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}
}


 
function div_1_cbo_RECIPE_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
   var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
//	objDs			= eval(obj.innerdataset);
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = ds_RECIPE_List.addRow();
			ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index 		= 0;
	}
}
function div_1_cbo_RECIPE_ontextchanged(obj:Combo, e:TextChangedEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1";  
}

function div_2_cbo_RECIPE_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
 	//trace("obj.userchange=="+obj.userchange+":::::e.pretext=="+e.pretext+"::::::e.posttext=="+e.posttext);
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		btn_search.setFocus();
		btn_search.click();
		div_2.cbo_RECIPE.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}
}

function div_2_cbo_RECIPE_onkeydown(obj:Combo, e:KeyEventInfo)
{
if (e.keycode == 13 && obj.userchange == "1") {
		var strValue,nFRow,objDs,strDataColumn;
		
		strValue 		= obj.userdata;
	//	objDs			= eval(obj.innerdataset);
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = ds_RECIPE_List.addRow();
				ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		btn_search.setFocus();
		btn_search.click();
		div_2.cbo_RECIPE.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}
}

function div_2_cbo_RECIPE_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
 var strValue,nFRow,objDs,strDataColumn;
	
	strValue 		= obj.userdata;
//	objDs			= eval(obj.innerdataset);
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = ds_RECIPE_List.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = ds_RECIPE_List.addRow();
			ds_RECIPE_List.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index 		= 0;
	}
}

function div_2_cbo_RECIPE_ontextchanged(obj:Combo, e:TextChangedEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1";  
}

function grd_list_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	 switch(e.cell)
	{
		case 0:
			gfn_exportExcel(obj, "Sheet1");
			break;
	    default:break;
	}
}]]></Script>
  </Form>
</FDL>
