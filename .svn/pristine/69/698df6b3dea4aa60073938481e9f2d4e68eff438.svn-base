<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FMS00102E" titletext="매출처 정보관리-설정관리" position="absolute 0 0 686 661" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="sta_detail11" class="sta_WFDA_Labelbg" position="absolute 520 89 676 116" anchor="default"/>
        <Static id="sta_detail07" class="sta_WFDA_Labelbg" position="absolute 215 401 676 428" anchor="default"/>
        <Static id="sta_detail04" class="sta_WFDA_Labelbg" position="absolute 311 173 676 200" anchor="default"/>
        <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 311 199 676 226" anchor="default"/>
        <Static id="sta_detail06" class="sta_WFDA_Labelbg" position="absolute 192 251 676 298" anchor="default"/>
        <Static id="sta_detail00" class="sta_WFDA_Labelbg" position="absolute 10 115 177 142" anchor="default"/>
        <Static id="sta_detail01" class="sta_WFDA_Labelbg" position="absolute 176 115 345 142" anchor="default"/>
        <Static id="sta_detail02" class="sta_WFDA_Labelbg" position="absolute 344 115 508 142" anchor="default"/>
        <Static id="sta_detail03" class="sta_WFDA_Labelbg" position="absolute 507 115 676 142" anchor="default"/>
        <Static id="sta_detail08" class="sta_WFDA_Labelbg" position="absolute 153 31 676 58" anchor="default"/>
        <Button id="btn_Batch" onclick="btn_Batch_OnClick" taborder="25" text="일괄적용" visible="false" position="absolute 610 5 675 26" class="btn_WF_Custom" image=""/>
        <Static id="Static7" text="공급업체 단가업장" position="absolute 10 31 154 58" class="sta_WFDA_Label01" anchor="default"/>
        <Static id="Static11" text="공급업체 운영단가 작업" visible="false" position="absolute 726 77 870 101" class="sta_WFDA_Label01"/>
        <Static id="Static20" text="공급업체 제출단가 작업" visible="false" position="absolute 728 5 872 29" class="sta_WFDA_Label01"/>
        <Static id="Static21" text="소모품 운영단가 작업" visible="false" position="absolute 726 100 870 124" class="sta_WFDA_Label01"/>
        <Static id="Static22" text="소모품 제출단가 조정" visible="false" position="absolute 728 30 872 54" class="sta_WFDA_Label01"/>
        <Static id="Static23" text="판 매 장 려 금 율" visible="false" position="absolute 728 53 872 77" class="sta_WFDA_Label01"/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="code_name" id="rdo_OTCUST_UPJANG_TYPE" index="-1" innerdataset="ds_OtcustType" taborder="0" position="absolute 159 35 331 56" anchor="default">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">1</Col>
                <Col id="datacolumn">대표업장</Col>
              </Row>
              <Row>
                <Col id="codecolumn">2</Col>
                <Col id="datacolumn">대상업장</Col>
              </Row>
            </Rows>
          </Dataset>
        </Radio>
        <Radio codecolumn="CODE" columncount="2" datacolumn="code_name" id="rdo_OTCUST_OP_RATE_YN" index="1" innerdataset="ds_useyn" taborder="19" visible="false" position="absolute 873 80 1017 98"/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="code_name" id="rdo_OTCUST_SM_RATE_YN" index="1" innerdataset="ds_useyn" taborder="20" visible="false" position="absolute 875 8 1019 26"/>
        <Edit id="ed_OTCUST_PRICE_UPJANG_NM" onkeydown="ed_pop_OnKeyDown" readonly="true" taborder="1" userdata="btn_pop6" position="absolute 333 34 506 55" anchor="default"/>
        <Button id="btn_pop6" onclick="btn_pop6_OnClick" taborder="2" visible="false" position="absolute 505 34 525 55" class="btn_WF_popSearch" text="" image="" anchor="default"/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="code_name" id="rdo_CONSUM_OP_RATE_YN" index="1" innerdataset="ds_useyn" taborder="21" visible="false" position="absolute 873 103 1017 121"/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="code_name" id="rdo_CONSUM_SM_RATE_YN" index="1" innerdataset="ds_useyn" taborder="22" visible="false" position="absolute 875 33 1019 51"/>
        <MaskEdit id="med_SALE_RATE" taborder="23" value="MaskEdit0" visible="false" position="absolute 873 54 914 76"/>
        <Static id="Static44" text="%" visible="false" position="absolute 917 60 928 71"/>
        <Static id="Static0" text="결  재  자  1" position="absolute 10 89 177 116" class="sta_WFDA_Label01" anchor="default"/>
        <Static id="Static1" text="결  재  자  2" position="absolute 176 89 345 116" class="sta_WFDA_Label01" anchor="default"/>
        <Static id="Static2" text="결  재  자  3" position="absolute 344 89 508 116" class="sta_WFDA_Label01" anchor="default"/>
        <Static id="Static3" text="결  재  자  4" position="absolute 507 89 676 116" class="sta_WFDA_Label01" anchor="default"/>
        <Edit id="ed_SIGN4" taborder="6" position="absolute 510 118 673 139" anchor="default"/>
        <Edit id="ed_SIGN3" taborder="5" position="absolute 347 118 505 139" anchor="default"/>
        <Edit id="ed_SIGN2" taborder="4" position="absolute 179 118 342 139" anchor="default"/>
        <Edit id="ed_SIGN1" taborder="3" position="absolute 13 118 174 139" anchor="default"/>
        <Static id="st_bk1" position="absolute 10 173 183 370" class="sta_WFDA_AddBg" anchor="default"/>
        <ImageViewer stretch="fit" id="img_photo" transparenthittest="false" taborder="7" position="absolute 14 176 179 341" class="img_WF_NoImage" anchor="default"/>
        <Static id="st_text" text="* 이미지 사이즈 : 163 * 165 &#10;&#10; (이미지는 확장자를 .jpg 파일로 저장 해 주시기 바랍니다. &#10;  추가/삭제 후 반드시 저장 버튼을 눌러 주시기 바랍니다.)" position="absolute 192 312 552 370" class="sta_WF_DiscPointN" anchor="default"/>
        <Static id="Static73" text="사업자번호" position="absolute 192 173 312 200" class="sta_WFDA_Label01" anchor="default"/>
        <Static id="Static54" text="대  표  자" position="absolute 192 199 312 226" class="sta_WFDA_Label01" anchor="default"/>
        <Edit id="ed_DRNAME" imemode="native" taborder="11" position="absolute 314 202 504 223" anchor="default"/>
        <Static id="Static56" text="현  주  소" position="absolute 192 225 312 252" class="sta_WFDA_Label01" anchor="default"/>
        <Edit id="ed_ADDR2" imemode="native" taborder="24" position="absolute 742 228 1026 249" anchor="default" visible="false"/>
        <Edit id="ed_SAUPNO" imemode="native" taborder="10" position="absolute 314 176 504 197" anchor="default"/>
        <Static id="Static6" text="인장" position="absolute 19 344 46 357" anchor="default"/>
        <Static id="Static8" text="이미지" position="absolute 19 358 60 371" anchor="default"/>
        <Button defaultbutton="false" id="btn_UploadImg" onclick="btn_UploadImg_OnClick" taborder="8" text="첨부" position="absolute 95 344 136 365" class="btn_WF_P" image="" anchor="default"/>
        <Button id="btn_DeleteImg" onclick="btn_DeleteImg_OnClick" taborder="9" text="삭제" position="absolute 138 344 179 365" class="btn_WF_P" image="" anchor="default"/>
        <Static id="Static9" text="공급업체 및 단가작업 설정" position="absolute 10 13 190 31" class="sta_WF_Title01"/>
        <Static id="Static10" text="결재라인 설정" position="absolute 10 71 118 89" class="sta_WF_Title01" anchor="default"/>
        <Static id="Static12" text="거래명세서 설정" position="absolute 10 155 128 173" class="sta_WF_Title01" anchor="default"/>
        <Static id="Static16" text="D-1상품 휴일 계산 반영 여부" position="absolute 10 383 201 401" class="sta_WF_Title01" anchor="default"/>
        <Static id="Static25" text="반영여부(반영 시 일요일 발주가능)" position="absolute 10 401 216 428" class="sta_WFDA_Label01" anchor="default"/>
        <Radio codecolumn="CODE" columncount="3" datacolumn="code_name" id="rdo_Holiday_yn" index="-1" innerdataset="ds_Holiday_yn" taborder="13" position="absolute 221 404 416 425" anchor="default"/>
        <Static id="Static40" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 676 10 686 610"/>
        <Static id="Static38" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 0 575 13" anchor="left top"/>
        <Static id="Static41" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
        <Static id="Static07" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 40 10 570" anchor="default"/>
        <Static id="Static39" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 16 651 591 661" anchor="default"/>
        <Static id="Static04" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 18 84 468 89" anchor="default"/>
        <Static id="Static05" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 8 58 583 71" anchor="default"/>
        <Static id="Static13" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 16 142 591 155" anchor="default"/>
        <Static id="Static15" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 26 168 476 173" anchor="default"/>
        <Static id="Static18" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 19 370 594 383" anchor="default"/>
        <Static id="Static19" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 29 396 479 401" anchor="default"/>
        <Static id="Static24" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 12 428 587 441" anchor="default"/>
        <Static id="sta_detail17" class="sta_WFDA_Labelbg" position="absolute 100 459 676 486" anchor="default"/>
        <Static id="sta_detail18" class="sta_WFDA_Labelbg" position="absolute 100 485 676 512" anchor="default"/>
        <Static id="Static34" class="sta_WFDA_Labelbg" position="absolute 100 511 676 611" anchor="default"/>
        <TextArea id="ta_SPECIAL_NOTE" taborder="18" position="absolute 103 514 674 608" anchor="default"/>
        <Static id="Static31" text="세 부 직 군" class="sta_WFDA_Label01" position="absolute 209 485 300 512" anchor="default"/>
        <Static id="Static26" text="사   업   군" class="sta_WFDA_Label01" position="absolute 10 459 101 486" anchor="default"/>
        <Static id="Static28" text="파 트 코 드" class="sta_WFDA_Label01" position="absolute 10 485 101 512" anchor="default"/>
        <Combo id="cbo_BIZ_KIND" taborder="14" innerdataset="ds_BizKind" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 103 462 207 483" displayrowcount="10" anchor="default"/>
        <Static id="Static29" text="직         군" class="sta_WFDA_Label01" position="absolute 209 459 300 486" anchor="default"/>
        <Combo id="cbo_BizDetail" taborder="17" innerdataset="ds_BizDetail" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 302 488 430 509" displayrowcount="10" anchor="default"/>
        <Static id="Static27" text="특이사항" class="sta_WFDA_Label01" position="absolute 10 511 101 611" anchor="default"/>
        <Combo id="cbo_PART_CODE" taborder="16" innerdataset="ds_PartCode" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 103 488 207 509" displayrowcount="10" anchor="default"/>
        <Combo id="cbo_BIZ_GROUP" taborder="15" innerdataset="ds_BizGroup" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 302 462 430 483" displayrowcount="10" anchor="default"/>
        <Static id="Static36" text="추가정보" class="sta_WF_Title01" position="absolute 10 441 100 459" anchor="default"/>
        <Static id="Static08" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 20 454 275 459" anchor="default"/>
        <AddrSearchComponent id="comp_addr2" titletext="주소검색 Component" taborder="12" text="AddrSearchComponent00" position="absolute 192 254 673 298" bindDataset="ds_main" isAutoDatasetRowChangedEvent="true" bindAddrColumn="ADDR2_INFO" eventBeforeTrigger="" eventAfterTrigger="" bindAddrKeyColumn="ADDR2_KEY" isReadOnly="false" class="edt_WF"/>
        <Static id="Static14" text="예산설정" class="sta_WFDA_Label01" position="absolute 433 459 524 486"/>
        <Combo id="cbo_budGet" taborder="26" displayrowcount="10" position="absolute 526 462 654 483" codecolumn="codecolumn" datacolumn="datacolumn" index="1" value="N" text="N">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn">Y</Col>
                <Col id="datacolumn">Y</Col>
              </Row>
              <Row>
                <Col id="codecolumn">N</Col>
                <Col id="datacolumn">N</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="Static17" text="법인구분" class="sta_WFDA_Label01" position="absolute 433 485 524 512" visible="false"/>
        <Combo id="cbo_bizGnb" taborder="27" codecolumn="codecolumn" datacolumn="datacolumn" displayrowcount="10" position="absolute 526 488 654 509" index="0" text="해당없음" displaynulltext="해당없음" visible="false">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">해당없음</Col>
              </Row>
              <Row>
                <Col id="codecolumn">01</Col>
                <Col id="datacolumn">한촌</Col>
              </Row>
              <Row>
                <Col id="codecolumn">02</Col>
                <Col id="datacolumn">육수당</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="Static30" text="시스템연동" class="sta_WFDA_Label01" position="absolute 10 610 101 637"/>
        <Static id="sta_detail09" class="sta_WFDA_Labelbg" position="absolute 100 610 676 637"/>
        <Edit id="edt_interfaceAttr01" taborder="28" position="absolute 103 613 299 634"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item10" compid="cbo_bizGnb" propid="value" datasetid="ds_main" columnid="BIZ_GNB"/>
      <BindItem id="rdo_OTCUST_UPJANG_TYPE_value" compid="rdo_OTCUST_UPJANG_TYPE" propid="value" datasetid="ds_main" columnid="OTCUST_UPJANG_TYPE"/>
      <BindItem id="rdo_OTCUST_OP_RATE_YN_value" compid="rdo_OTCUST_OP_RATE_YN" propid="value" datasetid="ds_main" columnid="OTCUST_OP_RATE_YN"/>
      <BindItem id="rdo_OTCUST_SM_RATE_YN_value" compid="rdo_OTCUST_SM_RATE_YN" propid="value" datasetid="ds_main" columnid="OTCUST_SM_RATE_YN"/>
      <BindItem id="ed_OTCUST_PRICE_UPJANG_NM_value" compid="ed_OTCUST_PRICE_UPJANG_NM" propid="value" datasetid="ds_main" columnid="OTCUST_PRICE_UPJANG_NM"/>
      <BindItem id="rdo_CONSUM_OP_RATE_YN_value" compid="rdo_CONSUM_OP_RATE_YN" propid="value" datasetid="ds_main" columnid="CONSUM_OP_RATE_YN"/>
      <BindItem id="rdo_CONSUM_SM_RATE_YN_value" compid="rdo_CONSUM_SM_RATE_YN" propid="value" datasetid="ds_main" columnid="CONSUM_SM_RATE_YN"/>
      <BindItem id="med_SALE_RATE_value" compid="med_SALE_RATE" propid="value" datasetid="ds_main" columnid="SALE_RATE"/>
      <BindItem id="ed_SIGN4_value" compid="ed_SIGN4" propid="value" datasetid="ds_main" columnid="SIGN4"/>
      <BindItem id="ed_SIGN3_value" compid="ed_SIGN3" propid="value" datasetid="ds_main" columnid="SIGN3"/>
      <BindItem id="ed_SIGN2_value" compid="ed_SIGN2" propid="value" datasetid="ds_main" columnid="SIGN2"/>
      <BindItem id="ed_SIGN1_value" compid="ed_SIGN1" propid="value" datasetid="ds_main" columnid="SIGN1"/>
      <BindItem id="ed_DRNAME_value" compid="ed_DRNAME" propid="value" datasetid="ds_main" columnid="DRNAME"/>
      <BindItem id="ed_ADDR2_value" compid="ed_ADDR2" propid="value" datasetid="ds_main" columnid="ADDR2"/>
      <BindItem id="ed_SAUPNO_value" compid="ed_SAUPNO" propid="value" datasetid="ds_main" columnid="SAUPNO"/>
      <BindItem id="rdo_Holiday_yn_value" compid="rdo_Holiday_yn" propid="value" datasetid="ds_main" columnid="HOLIDAY_CHK_YN"/>
      <BindItem id="item8" compid="sta_detail08" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item0" compid="sta_detail00" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item1" compid="sta_detail01" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item2" compid="sta_detail02" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item3" compid="sta_detail03" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item4" compid="sta_detail04" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item5" compid="sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item6" compid="sta_detail06" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item7" compid="sta_detail07" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item11" compid="sta_detail11" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item17" compid="sta_detail17" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item18" compid="sta_detail18" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="ta_SPECIAL_NOTE_value" compid="ta_SPECIAL_NOTE" propid="value" datasetid="ds_main" columnid="SPECIAL_NOTE"/>
      <BindItem id="cbo_BIZ_KIND_value" compid="cbo_BIZ_KIND" propid="value" datasetid="ds_main" columnid="BIZ_KIND"/>
      <BindItem id="cbo_BizDetail_value" compid="cbo_BizDetail" propid="value" datasetid="ds_main" columnid="BIZ_DETAIL"/>
      <BindItem id="cbo_PART_CODE_value" compid="cbo_PART_CODE" propid="value" datasetid="ds_main" columnid="PART_CODE"/>
      <BindItem id="cbo_BIZ_GROUP_value" compid="cbo_BIZ_GROUP" propid="value" datasetid="ds_main" columnid="BIZ_GROUP"/>
      <BindItem id="item9" compid="cbo_budGet" propid="value" datasetid="ds_main" columnid="BUDGET_YN"/>
      <BindItem id="item12" compid="sta_detail09" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item13" compid="edt_interfaceAttr01" propid="value" datasetid="ds_main" columnid="INTERFACE_ATTR01"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분   : 기준정보/사업장관리/매출처 정보관리-설정관리
 * 프로그램명   : FMS00102E.XML
 * 기      능   : 매출처 정보관리
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-11-20
 * 비      고   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : btn_pop6_OnClick(obj)
 * 기      능   : 타거래처 단가업장 팝업이미지 클릭
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-11-20  
 ******************************************************************************************
 */
function btn_pop6_OnClick(obj:Button, e:ClickEventInfo)
{
	var strReturn,strResult,nRow,strMainUpjang;
	
	nRow = ds_main.rowposition;
	trace(ds_main.getColumn(nRow,"MAIN_UPJANG"));
	strMainUpjang 	= ds_main.getColumn(nRow,"MAIN_UPJANG");
	strUpjang		= ds_main.getColumn(nRow,"UPJANG");
	
	if (strMainUpjang<=0)
	{
		g_Message("EE", "본사그룹을 입력해주십시오.");
		tab_list.tabindex = 0;
		tab_list.tab1.ed_MAIN_UPJANG.setFocus();
		return;
	}
	
	// 팝업
	var arg ={strUpjang:strUpjang,strMainUpjang:strMainUpjang};
	strReturn = gfn_dialog("", "U_FMS::FMS00102P.xfdl",arg);
	
	if (gfn_length(strReturn)==0)
	{
		ds_main.setColumn(nRow, "OTCUST_PRICE_UPJANG", "");			// 단가업장
		ds_main.setColumn(nRow, "OTCUST_PRICE_UPJANG_NM", "");		// 단가업장명
		return;
	}
	
	strResult	= gfn_split(strReturn, ";");
	
	// 초기값 셋팅
	ds_main.setColumn(nRow, "OTCUST_PRICE_UPJANG", gfn_trim(strResult[0]));			// 단가업장
	ds_main.setColumn(nRow, "OTCUST_PRICE_UPJANG_NM", gfn_trim(strResult[1]));		// 단가업장명
	//rdo_OTCUST_OP_RATE_YN.SetFocus();
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_Batch_OnClick(obj)
 * 기      능   : 일괄적용
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-11-20  
 ******************************************************************************************
 */
function btn_Batch_OnClick(obj:Button, e:ClickEventInfo)
{
	// 변경여부 확인
	if(gfn_dsIsUpdated(ds_main)==true)
	{
		if(g_Confirm("02","변경된 내역이 있습니다. 변경된 내역을 저장하시겠습니까?"))
		{
			fn_save();
		}
	}
	
	// 팝업
	var strLink,nRow;
	
	nRow = ds_main.rowposition;
	
	strLink = 		  ds_main.getColumn(nRow,"UPJANG");					// 업장
	strLink += "; " + ds_main.getColumn(nRow,"MAIN_UPJANG");			// 본사
	strLink += "; " + ds_main.getColumn(nRow,"CONSUM_OP_RATE_YN");		// 소모품운영단가 작업
	strLink += "; " + ds_main.getColumn(nRow,"OTCUST_OP_RATE_YN");		// 타거래처운영단가작업
	strLink += "; " + ds_main.getColumn(nRow,"CONSUM_SM_RATE_YN"); 		// 소모품 제출단가 조정
	strLink += "; " + ds_main.getColumn(nRow,"OTCUST_SM_RATE_YN"); 		// 타거래처 제출단가 작업
	strLink += "; " + ds_main.getColumn(nRow,"SALE_RATE"); 				// 판매장려금율
			
	strReturn = gfn_dialog("", "U_FMS::FMS00101P.xfdl",{strLink:strLink});
}

/*
 ******************************************************************************************
 * 함  수  명   : ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 업장엔터시팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ed_pop_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
 
	var strValue = ds_main.getColumn(ds_main.rowposition,"OTCUST_UPJANG_TYPE");
	if (strValue == "대상업장")
	{
		if (e.keycode == 13 )
		{
			var objme = eval(obj.userdata);
			objme.click();
		}
		else if (e.keycode == 46)
		{
			var nRow = ds_main.rowposition;
			ds_main.setColumn(nRow, "OTCUST_PRICE_UPJANG", "");			// 코드
			ds_main.setColumn(nRow, "OTCUST_PRICE_UPJANG_NM", "");			// 명
		}
	}
	
	
}

/*
 ******************************************************************************************
 * 함  수  명   : common_imgphoto_OnClick(obj,nX,nY)
 * 기      능   : 이미지클릭
 * 작  성  자   : 노규완
 * 작성  일자   : 2008-08-27
 ******************************************************************************************
 */
function img_photo_OnClick(obj,nX,nY)
{
	if (gfn_length(obj.image)> 0)
	{
		gfn_dialog("", "U_SCC::SCC91000P.xfdl",{fa_Image:obj.image});
		//ExecBrowser(obj.ImageID);
	}	
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_UploadImg_OnClick(obj)
 * 기      능   : 파일추가
 * 작  성  자   : 노규완
 * 작성  일자   : 2008-08-27
 ******************************************************************************************
 */
function btn_UploadImg_OnClick(obj:Button, e:ClickEventInfo)
{	
	
//*******************************************************************************
// 조회 된 데이터가 하나도 없을 경우. return;	
	if(ds_main.getRowCount()==0)
	{
		return;
	} 
// 이미지를 저장 하기 위해서는 반드시 매출처 코드가 존재 해야 합니다.	
	if(gfn_length(gfn_trim(ds_main.getColumn(ds_main.rowposition,"UPJANG")))== 0)
	{
		g_Message("EE","이미지를 저장 하기 위해서는 반드시 매출처 코드가 존재 해야 합니다.");
		return;
	}
//	기존 등록 된 도장 이미지가 있을 경우 삭제 후 등록 하도록 한다.
	if(gfn_length(gfn_trim(ds_main.getColumn(0,"STAMP_IMG")))>0)
	{
		g_Message("EE","기존 도장 이미지를 삭제 하고 첨부하세요.");
		return;
	}	
	 
	
// FileDialog 가 Open 상태가 false 이면 return; 시킨다.	
	if(fileDialog.Open()==false)
	{
		//g_Message("EE","FileDialog 가 False 입니다.");
		return;
	}
	
	
	
	var v_filename=fileDialog.FileName;
	var v_filepath=fileDialog.FilePath;	
	
// 파일명이 없거나 null 일때 return;	
	if(gfn_length(gfn_trim(v_filename))==0 || gfn_trim(v_filename)==null)
	{
		return;
	}
	
	var v_point_index=gfn_indexOf(v_filename,".");
	var v_ext=gfn_subStr(v_filename,v_point_index);

	var v_path="";
	var v_savenm="";
	
	v_path="FMS_UPJANG_STAMP";	
	v_savenm=ds_main.getColumn(ds_main.rowposition,"UPJANG")+v_ext;	
	
	// 파일 서버로 전송

	var arr = fsp_fileWrite(HttpFile, v_path, v_filepath, v_filename,v_savenm,"U");

	// 처리 결과 확인하기 
    if( arr[0] == "E" ) {
		gfn_alert(fn_AlertMsg("018"));
		return;
    }
	else
	{
//		ds_main.SetColumn(ds_main.row,"STAMP_IMG",v_filename);
//		ds_main.setColumn(ds_main.rowposition,"STAMP_IMG",v_savenm);	//As-Is
		ds_main.setColumn(ds_main.rowposition,"STAMP_IMG",arr[2]);	//To-Be
				
		/******************************************************
		 *  서버에서 실제 이미지 경로 가져오기 
		 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
		 * @param  fileName  보여줄 파일명 ( 옵션 )
		 * @return  서버 전제 url 경로
		 ******************************************************/
		 img_photo.text=""; 		 
		 img_photo.image=fsp_getServerDir(v_path,arr[2]);
		 //trace(fsp_getServerDir(v_path,arr[2]));		 
		 
		 img_photo.image=fsp_getServerDir(v_path,ds_main.getColumn(ds_main.rowposition,"STAMP_IMG"));		 
	}
		//img_photo.ImageID = "http://172.25.1.247:8080/hwfs/upload/fm/stamp/100681.gif";
}

function btn_DeleteImg_OnClick(obj:Button, e:ClickEventInfo)
{
	var v_path="";
	
	v_path="FMS_UPJANG_STAMP";
		
	if(gfn_length(gfn_trim(ds_main.getColumn(ds_main.rowposition,"UPJANG")))>0)
	{
		if (! g_Confirm("03","등록된 업장인장 이미지를 삭제하시겠습니까?!")) return;

		var v_rtn=fsp_fileDelete(v_path, ds_main.getColumn(ds_main.rowposition,"STAMP_IMG"),true);				
		
		if(v_rtn == true)
		{		
			ds_main.setColumn(ds_main.rowposition,"STAMP_IMG","");
			img_photo.image="";
		}
		else
		{
			if(gfn_trim(ds_main.getColumn(ds_main.rowposition,"STAMP_IMG"))==gfn_length(gfn_trim(null))==0)
			{			    
				return;
			}
			else
			{
				//gfn_alert(fn_AlertMsg("017"));	//fn_AlertMsg함수 존재하지않음			
			}
			return;
		}
	}		
}
]]></Script>
  </Form>
</FDL>
