<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="CmmnFrameMenu" classname="frameMenu" left="0" top="0" width="540" height="833" titletext="Menu Frame" onload="CmmnFrameMenu_onload" scrollbars="autoboth" style="background:#ffffffff;">
    <Layouts>
      <Layout screenid="ScreenPad,ScreenPhone">
        <Div id="divMenu" taborder="19" left="0" top="73" width="540" height="760" scrollbars="autovert" visible="true" async="false">
          <Layouts>
            <Layout>
              <Div id="divMenu01" taborder="0" left="0" top="295" width="100%" height="155" visible="true" async="false">
                <Layouts>
                  <Layout>
                    <Button id="btnMenu01" taborder="3" onclick="mainMenu_onclick" left="0" top="0" width="180" height="155" cssclass="btn_MAIN_Menu01" visible="false"/>
                    <Button id="btnMenu02" taborder="4" onclick="mainMenu_onclick" left="180" top="0" width="180" height="155" cssclass="btn_MAIN_Menu02" visible="false"/>
                    <Button id="btnMenu03" taborder="5" onclick="mainMenu_onclick" left="360" top="0" width="179" height="155" cssclass="btn_MAIN_Menu03" visible="false"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="divMenu02" taborder="1" left="0" top="450" width="100%" height="155" visible="true">
                <Layouts>
                  <Layout>
                    <Button id="btnMenu06" taborder="3" onclick="mainMenu_onclick" left="360" top="0" width="179" height="155" cssclass="btn_MAIN_Menu06" visible="false"/>
                    <Button id="btnMenu05" taborder="4" onclick="mainMenu_onclick" left="180" top="0" width="180" height="155" visible="false" cssclass="btn_MAIN_Menu05"/>
                    <Button id="btnMenu04" taborder="5" onclick="mainMenu_onclick" left="0" top="0" width="180" height="155" visible="false" cssclass="btn_MAIN_Menu04"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="divMenu03" taborder="2" left="0" top="605" width="100%" height="155" visible="true">
                <Layouts>
                  <Layout>
                    <Button id="btnMenu09" taborder="3" onclick="mainMenu_onclick" left="360" top="0" width="179" height="155" cssclass="btn_MAIN_Menu09" visible="false"/>
                    <Button id="btnMenu08" taborder="4" onclick="mainMenu_onclick" left="180" top="0" width="180" height="155" visible="false" cssclass="btn_MAIN_Menu08"/>
                    <Button id="btnMenu07" taborder="5" onclick="mainMenu_onclick" left="0" top="0" width="180" height="155" visible="false" cssclass="btn_MAIN_Menu07"/>
                  </Layout>
                </Layouts>
              </Div>
              <Static id="staWelcomeMsg" taborder="4" text="외식담당자님 로그인 하셨습니다" cssclass="sta_MAIN_WelcomeBg" left="0" top="0" right="0" height="62" wordwrap="char" onclick="divMenu_staWelcomeMsg_onclick"/>
              <Static id="sta_backImage" taborder="5" cssclass="sta_MAIN_BgImg" left="0" top="62" right="0" height="233"/>
              <Div id="divSubMenu" taborder="6" left="0" top="128" width="540" height="219" visible="false" style="background:#f57f50ff;">
                <Layouts>
                  <Layout width="540" height="219">
                    <Button id="btnSubMenu01" taborder="6" text="추가발주" cssclass="btn_MAIN_2DepthMenu" left="2.78%" top="17" right="67.22%" height="55" visible="false" onclick="divMenu_divSubMenu_btnSubMenu_onclick"/>
                    <Button id="btnSubMenu02" taborder="7" text="추가발주취소" cssclass="btn_MAIN_2DepthMenu" left="35%" top="17" right="35%" height="55" onclick="divMenu_divSubMenu_btnSubMenu_onclick" visible="false"/>
                    <Button id="btnSubMenu03" taborder="8" text="추가발주현황" cssclass="btn_MAIN_2DepthMenu" left="67.22%" top="17" right="2.78%" height="55" onclick="divMenu_divSubMenu_btnSubMenu_onclick" visible="false"/>
                    <Button id="btnSubMenu06" taborder="9" text="발주반려현황" cssclass="btn_MAIN_2DepthMenu" left="67.22%" top="83" right="2.78%" height="55" visible="false" onclick="divMenu_divSubMenu_btnSubMenu_onclick"/>
                    <Button id="btnSubMenu05" taborder="10" text="일일발주내역" cssclass="btn_MAIN_2DepthMenu" left="35%" top="83" right="35%" height="55" visible="false" onclick="divMenu_divSubMenu_btnSubMenu_onclick"/>
                    <Button id="btnSubMenu04" taborder="11" text="상품발주" cssclass="btn_MAIN_2DepthMenu" left="2.78%" top="83" right="67.22%" height="55" visible="false" onclick="divMenu_divSubMenu_btnSubMenu_onclick"/>
                    <Button id="btnSubMenu09" taborder="12" text="발주반려현황" cssclass="btn_MAIN_2DepthMenu" left="67.22%" top="149" right="2.78%" height="55" visible="false" onclick="divMenu_divSubMenu_btnSubMenu_onclick"/>
                    <Button id="btnSubMenu08" taborder="13" text="일일발주내역" cssclass="btn_MAIN_2DepthMenu" left="35%" top="149" right="35%" height="55" visible="false" onclick="divMenu_divSubMenu_btnSubMenu_onclick"/>
                    <Button id="btnSubMenu07" taborder="14" text="상품발주" cssclass="btn_MAIN_2DepthMenu" left="2.78%" top="149" right="67.22%" height="55" visible="false" onclick="divMenu_divSubMenu_btnSubMenu_onclick"/>
                  </Layout>
                </Layouts>
              </Div>
              <Div id="divMenu04" taborder="7" left="0%" top="760" right="0.19%" height="155" visible="false">
                <Layouts>
                  <Layout>
                    <Button id="btnMenu12" taborder="6" onclick="mainMenu_onclick" cssclass="btn_MAIN_Menu11" visible="false" left="66.67%" top="0" height="155" width="179"/>
                    <Button id="btnMenu11" taborder="7" onclick="mainMenu_onclick" cssclass="btn_MAIN_Menu11" visible="false" left="33.33%" top="0" height="155" width="180"/>
                    <Button id="btnMenu10" taborder="8" onclick="mainMenu_onclick" cssclass="btn_MAIN_Menu10" visible="false" left="0%" top="0" height="155" width="180"/>
                  </Layout>
                </Layouts>
              </Div>
              <Button id="Button00" taborder="8" text="TEST1" left="2.78%" top="69" right="75%" height="50" onclick="divMenu_Button00_onclick" visible="false"/>
              <Button id="Button01" taborder="9" text="TEST2" left="26.48%" top="69" right="51.3%" height="50" onclick="divMenu_Button01_onclick" visible="false"/>
              <Button id="Button02" taborder="10" text="TEST3" left="50.19%" top="69" right="27.59%" height="50" onclick="divMenu_Button02_onclick" visible="false"/>
              <Button id="Button04" taborder="12" text="TEST4" left="73.89%" top="69" right="3.89%" height="50" onclick="divMenu_Button04_onclick" visible="false"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="divMenuTop" taborder="21" left="0" top="0" right="0" height="73" scrollbars="none" visible="true"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_menu" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="sysId" type="STRING" size="256"/>
          <Column id="sysName" type="STRING" size="256"/>
          <Column id="menuId" type="STRING" size="256"/>
          <Column id="menuName" type="STRING" size="256"/>
          <Column id="parentMenuId" type="STRING" size="256"/>
          <Column id="prgId" type="STRING" size="256"/>
          <Column id="prgName" type="STRING" size="256"/>
          <Column id="prgPath" type="STRING" size="256"/>
          <Column id="menuType" type="STRING" size="256"/>
          <Column id="levels" type="STRING" size="256"/>
          <Column id="sortSeq" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="prgType" type="STRING" size="256"/>
          <Column id="leaderMenu" type="STRING" size="256"/>
          <Column id="isLeaf" type="INT" size="256"/>
          <Column id="callParam" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_subMenu" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="sysId" type="STRING" size="256"/>
          <Column id="sysName" type="STRING" size="256"/>
          <Column id="menuId" type="STRING" size="256"/>
          <Column id="menuName" type="STRING" size="256"/>
          <Column id="parentMenuId" type="STRING" size="256"/>
          <Column id="prgId" type="STRING" size="256"/>
          <Column id="prgName" type="STRING" size="256"/>
          <Column id="prgPath" type="STRING" size="256"/>
          <Column id="menuType" type="STRING" size="256"/>
          <Column id="levels" type="STRING" size="256"/>
          <Column id="sortSeq" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="prgType" type="STRING" size="256"/>
          <Column id="leaderMenu" type="STRING" size="256"/>
          <Column id="isLeaf" type="INT" size="256"/>
          <Column id="callParam" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboDeviceTest" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="name" type="STRING" size="256"/>
          <Column id="url" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">01</Col>
            <Col id="name">Camera</Col>
            <Col id="url">sample::frmSampleGetPicture.xfdl</Col>
          </Row>
          <Row>
            <Col id="code">02</Col>
            <Col id="name">Map</Col>
            <Col id="url">sample::frmSampleGPSMap.xfdl</Col>
          </Row>
          <Row>
            <Col id="code">03</Col>
            <Col id="name">Call</Col>
            <Col id="url">sample::frmSampleCall.xfdl</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[//########################################################
// [프로젝트]		FC종합전산 모바일시스템 구축
// [시스템명]		공통 
// [부시스템명]	공통 - 메인메뉴
// [프로그램]		CmmnFrameMain.xfdl
// [설명]
// 		프로젝트 실행 메인메뉴 화면
// [작성자명] 		투비소프트
// [작성일자]		2015.01.12
// -----------------[수정이력]--------------------------
// 수정일자 : 수정자 : 수정내용
// 2015.01.12 : 김광호 : 신규생성.
//########################################################
include "lib::sz_fsp_mobile_xp.xjs"

this.f_sSetFlag;

this.CmmnFrameMenu_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	application.goMenu = this;
	
	this.fn_init();
	
	this.divMenuTop.set_url("frame::CmmnFrameTop.xfdl");
}

this.fn_init = function()
{
	//뒤로가기 체크를 위한 cnt 추가
	application.gvWaitCount = 0;
	
	// 로그인 환영 메세지 셋팅
	this.divMenu.staWelcomeMsg.set_text(application.g_UpjangNm+" "+application.g_Name+"님 로그인 하셨습니다");	
	//trace("application.gds_menu :: " +application.gds_menu.saveXML("gds_menu", "V"));
	// menu복사 및 필터링
	this.ds_menu.clearData();	
	this.ds_menu.copyData(application.gds_menu, true);
	this.ds_subMenu.clearData();
	this.ds_subMenu.copyData(application.gds_menu, true);
	
	this.ds_menu.filter("levels == '0'");
	this.ds_subMenu.filter("levels == '1'");
	
	if (this.ds_menu.rowcount > 9)
	{
		this.divMenu.divMenu04.set_visible(true);
	}
	this.fn_menuSetting();
	
	this.resetScroll();
}

// 매인메뉴셋팅
this.fn_menuSetting = function()
{
	var nRow = this.ds_menu.rowcount;
	var i;
	var objDiv;
	var objBtn;
	
	for (i = 0; i < nRow; i++)
	{
		objDiv = this.divMenu.components["divMenu0"+(nexacro.floor(i/3)+1)];
		objBtn = objDiv.components["btnMenu"+application.goMain.gfn_LPad((i+1).toString(), "0", 2)];
		objBtn.set_visible(true);
		
		// cssclass 설정
		switch (this.ds_menu.getColumn(i, "sysName"))
		{
			case "발주관리" :	// 발주관리
				objBtn.set_cssclass("btn_MAIN_Menu01");
				break;
			case "재고관리" :	// 재고관리
				objBtn.set_cssclass("btn_MAIN_Menu02");
				break;
			case "상품정보" :	// 상품정보
				objBtn.set_cssclass("btn_MAIN_Menu03");
				break;
			case "E-FOODIST" :	//  E-FOODIST
				objBtn.set_cssclass("btn_MAIN_Menu04");
				break;
			case "여신관리" :	// 여신관리
				objBtn.set_cssclass("btn_MAIN_Menu11");
				break;
			case "영업관리" :	// 영업관리
				objBtn.set_cssclass("btn_MAIN_Menu09");
				break;
			case "팀장승인" :	// 팀장승인
				objBtn.set_cssclass("btn_MAIN_Menu05");
				break;
			case "클레임관리" :	// 클레임관리
				objBtn.set_cssclass("btn_MAIN_Menu06");
				break;
			case "웨딩예약" :	// 웨딩예약
				objBtn.set_cssclass("btn_MAIN_Menu07");
				break;
			case "이미지전송" :	// 위생관리
				objBtn.set_cssclass("btn_MAIN_Menu08");
				break;
			case "게시판" :	// 게시판
				objBtn.set_cssclass("btn_MAIN_Menu10");
				break;
		}
		
		// objBtn.set_cssclass(this.ds_menu.getColumn(i, "cssclass"));
	}
	
	this.divMenu.resetScroll();
}

// 매인메뉴 클릭 시 동작
this.mainMenu_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	this.ds_subMenu.filter("");
	
	switch (application.goMain.gfn_Right(obj.cssclass, 2))
	{
		case "01" :	// 발주관리
			this.ds_subMenu.filter("sysName == '발주관리' && levels == '1'");
			break;
		case "02" :	// 재고관리
			this.ds_subMenu.filter("sysName == '재고관리' && levels == '1'");
			break;
		case "03" :	// 상품정보
			this.ds_subMenu.filter("sysName == '상품정보' && levels == '1'");	
			break;
		case "04" :	//  E-FOODIST
			this.ds_subMenu.filter("sysName == 'E-FOODIST' && levels == '1'");
			break;
		case "11" :	// 여신관리
			this.ds_subMenu.filter("sysName == '여신관리' && levels == '1'");
			break;
		case "09" :	// 영업관리
			this.ds_subMenu.filter("sysName == '영업관리' && levels == '1'");
			break;
		case "05" :	// 팀장승인
			this.ds_subMenu.filter("sysName == '팀장승인' && levels == '1'");
			break;
		case "06" :	// 클레임관리
			this.ds_subMenu.filter("sysName == '클레임관리' && levels == '1'");
			break;
		case "07" :	// 웨딩예약
			this.ds_subMenu.filter("sysName == '웨딩예약' && levels == '1'");
			break;
		case "08" :	// 이미지전송
			this.ds_subMenu.filter("sysName == '이미지전송' && levels == '1'");
			break;
		case "10" :	// 게시판
			this.ds_subMenu.filter("sysName == '게시판' && isLeaf == '0'");
			break;
	}	
	
	// 서브메뉴가 하나일경우 바로 페이지로 이동
	if(this.ds_subMenu.getRowCount() == "1")
	{
	
		this.fn_goPage();
		
	}else{
		if (obj.parent.name == "divMenu01")
		{
			// 메뉴 cssclass를 기준으로 토글
			if (application.goMain.gfn_Right(obj.cssclass, 1) != "S")
			{
				// 서브메뉴 셋팅
				// 서브메뉴 dataset필터
				this.fn_subMenuSetting(obj.cssclass);
			
				// 메뉴 원래대로
				this.fn_menuReset();
				// 모든 메뉴 cssclass 리셋
				this.fn_menuBtnReset();
				// 서브 보여주기
				this.divMenu.divSubMenu.set_top(this.divMenu.divMenu01.getOffsetBottom());
				this.divMenu.divSubMenu.set_visible(true);
				// 다른 메뉴 밀기
				this.divMenu.divMenu02.set_top(parseInt(this.divMenu.divMenu01.getOffsetBottom())+parseInt(this.divMenu.divSubMenu.getOffsetHeight()));
				this.divMenu.divMenu03.set_top(parseInt(this.divMenu.divMenu02.getOffsetBottom()));
				this.divMenu.divMenu04.set_top(parseInt(this.divMenu.divMenu03.getOffsetBottom()));
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass + "S");
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				// 서브메뉴에 포커스(스크롤이동 효과)
				this.divMenu.divSubMenu.setFocus();
			}
			else
			{
				// 메뉴 원래대로
				this.fn_menuReset();
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				this.divMenu.divMenu01.setFocus();
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass.substr(0, obj.cssclass.length-1));
			}
		}
		if (obj.parent.name == "divMenu02")
		{
			// 메뉴 cssclass를 기준으로 토글
			if (application.goMain.gfn_Right(obj.cssclass, 1) != "S")
			{
				// 서브메뉴 셋팅
				// 서브메뉴 dataset필터
				this.fn_subMenuSetting(obj.cssclass);
			
				// 메뉴 원래대로
				this.fn_menuReset();
				// 모든 메뉴 cssclass 리셋
				this.fn_menuBtnReset();
				// 서브 보여주기
				this.divMenu.divSubMenu.set_top(this.divMenu.divMenu02.getOffsetBottom());
				this.divMenu.divSubMenu.set_visible(true);
				// 다른 메뉴 밀기
				this.divMenu.divMenu03.set_top(parseInt(this.divMenu.divMenu02.getOffsetBottom())+parseInt(this.divMenu.divSubMenu.getOffsetHeight()));
				this.divMenu.divMenu04.set_top(parseInt(this.divMenu.divMenu03.getOffsetBottom()));
				
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass + "S");
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				// 서브메뉴에 포커스(스크롤이동 효과)
				this.divMenu.divSubMenu.setFocus();
			}
			else
			{
				// 메뉴 원래대로
				this.fn_menuReset();
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				this.divMenu.divMenu02.setFocus();
			
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass.substr(0, obj.cssclass.length-1));
			}
		}
		if (obj.parent.name == "divMenu03")
		{
			// 메뉴 cssclass를 기준으로 토글
			if (application.goMain.gfn_Right(obj.cssclass, 1) != "S")
			{
				// 서브메뉴 셋팅
				// 서브메뉴 dataset필터
				this.fn_subMenuSetting(obj.cssclass);
			
				// 메뉴 원래대로
				this.fn_menuReset();
				// 모든 메뉴 cssclass 리셋
				this.fn_menuBtnReset();
				// 서브 보여주기
				this.divMenu.divSubMenu.set_top(this.divMenu.divMenu03.getOffsetBottom());
				this.divMenu.divSubMenu.set_visible(true);
				// 다른 메뉴 밀기
				this.divMenu.divMenu04.set_top(parseInt(this.divMenu.divMenu03.getOffsetBottom())+parseInt(this.divMenu.divSubMenu.getOffsetHeight()));
				
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass + "S");
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				// 서브메뉴에 포커스(스크롤이동 효과)
				this.divMenu.divSubMenu.setFocus();
			}
			else
			{
				// 메뉴 원래대로
				this.fn_menuReset();
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				this.divMenu.divMenu03.setFocus();
			
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass.substr(0, obj.cssclass.length-1));
			}
		}
		if (obj.parent.name == "divMenu04")
		{
			// 메뉴 cssclass를 기준으로 토글
			if (application.goMain.gfn_Right(obj.cssclass, 1) != "S")
			{
				// 서브메뉴 셋팅
				// 서브메뉴 dataset필터
				this.fn_subMenuSetting(obj.cssclass);
			
				// 메뉴 원래대로
				this.fn_menuReset();
				// 모든 메뉴 cssclass 리셋
				this.fn_menuBtnReset();
				// 서브 보여주기
				this.divMenu.divSubMenu.set_top(this.divMenu.divMenu04.getOffsetBottom());
				this.divMenu.divSubMenu.set_visible(true);
				
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass + "S");
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				// 서브메뉴에 포커스(스크롤이동 효과)
				this.divMenu.divSubMenu.setFocus();
			}
			else
			{
				// 메뉴 원래대로
				this.fn_menuReset();
				
				// 스크롤 리셋
				this.divMenu.resetScroll();
				
				this.divMenu.divMenu04.setFocus();
			
				// 메뉴 cssclass 변경
				obj.set_cssclass(obj.cssclass.substr(0, obj.cssclass.length-1));
			}
		}	
	}	
}

// 서브메뉴 클릭 시 동작
this.divMenu_divSubMenu_btnSubMenu_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = parseInt(application.goMain.gfn_Right(obj.id, 2))-1;	
	
	// action 실행
	application.gv_menuId = this.ds_subMenu.getColumn(nRow, "menuId");
	application.gv_formUrl = this.ds_subMenu.getColumn(nRow, "prgPath");
	application.gv_menuName = this.ds_subMenu.getColumn(nRow, "menuName");
	application.gv_progrmId = this.ds_subMenu.getColumn(nRow, "prgId");
	
	// 메뉴이동전 메뉴정보 글로벌 변수에 담기
	application.gv_menuBefId = this.ds_subMenu.getColumn(nRow, "menuId");
	application.gv_formBefUrl = this.ds_subMenu.getColumn(nRow, "prgPath");
	application.gv_menuBefName = this.ds_subMenu.getColumn(nRow, "menuName");
	application.gv_progrmBefId = this.ds_subMenu.getColumn(nRow, "prgId");
	
	application.goMain.fn_action("SUBMENU");
}

// 서브메뉴가 하나일경우 바로 페이지로 이동
this.fn_goPage = function ()
{
	// action 실행
	application.gv_menuId = this.ds_subMenu.getColumn(0, "menuId");
	application.gv_formUrl = this.ds_subMenu.getColumn(0, "prgPath");
	application.gv_menuName = this.ds_subMenu.getColumn(0, "menuName");
	application.gv_progrmId = this.ds_subMenu.getColumn(0, "prgId");
	
	// 메뉴이동전 메뉴정보 글로벌 변수에 담기
	application.gv_menuBefId = this.ds_subMenu.getColumn(0, "menuId");
	application.gv_formBefUrl = this.ds_subMenu.getColumn(0, "prgPath");
	application.gv_menuBefName = this.ds_subMenu.getColumn(0, "menuName");
	application.gv_progrmBefId = this.ds_subMenu.getColumn(0, "prgId");	
	
	application.goMain.fn_action("SUBMENU");
	
}

// 서브메뉴 셋팅
this.fn_subMenuSetting = function (sCssClass)
{
	//trace("서브메뉴셋팅 : "+application.goMain.gfn_Right(sCssClass, 2));
	this.ds_subMenu.filter("");
	switch (application.goMain.gfn_Right(sCssClass, 2))
	{
		case "01" :	// 발주관리
			this.ds_subMenu.filter("sysName == '발주관리' && levels == '1'");
			break;
		case "02" :	// 재고관리
			this.ds_subMenu.filter("sysName == '재고관리' && levels == '1'");
			break;
		case "03" :	// 상품정보
			this.ds_subMenu.filter("sysName == '상품정보' && levels == '1'");	
			break;
		case "04" :	//  E-FOODIST
			this.ds_subMenu.filter("sysName == 'E-FOODIST' && levels == '1'");
			break;
		case "11" :	// 여신관리
			this.ds_subMenu.filter("sysName == '여신관리' && levels == '1'");
			break;
		case "09" :	// 영업관리
			this.ds_subMenu.filter("sysName == '영업관리' && levels == '1'");
			break;
		case "05" :	// 팀장승인
			this.ds_subMenu.filter("sysName == '팀장승인' && levels == '1'");
			break;
		case "06" :	// 클레임관리
			this.ds_subMenu.filter("sysName == '클레임관리' && levels == '1'");
			break;
		case "07" :	// 웨딩예약
			this.ds_subMenu.filter("sysName == '웨딩예약' && levels == '1'");
			break;
		case "08" :	// 위생관리
			this.ds_subMenu.filter("sysName == '이미지전송' && levels == '1'");
			break;
		case "10" :	// 게시판
			this.ds_subMenu.filter("sysName == '게시판' && levels == '1'");
			break;
	}
	
	// subMenu동적 셋팅
	var nRow = this.ds_subMenu.rowcount;
	var i;
	var objDiv;
	var objBtn;
	// subMenu버튼 visible false로 만들기
	for (i = 0; i < 9; i++)
	{
		objDiv = this.divMenu.divSubMenu;
		objBtn = objDiv.components["btnSubMenu"+application.goMain.gfn_LPad((i+1).toString(), "0", 2)];
		objBtn.set_visible(false);
	}
	for (i = 0; i < nRow; i++)
	{
		objDiv = this.divMenu.divSubMenu;
		objBtn = objDiv.components["btnSubMenu"+application.goMain.gfn_LPad((i+1).toString(), "0", 2)];
		objBtn.set_visible(true);
		objBtn.set_text(this.ds_subMenu.getColumn(i, "menuName"));
	}
	if (nRow >= 1 && nRow <= 3)
	{
		objDiv.set_height(17 + 55 + 17);
	}
	else if (nRow >= 4 && nRow <= 6)
	{
		objDiv.set_height(83 + 55 + 17);
	}
	else if (nRow >= 7 && nRow <= 9)
	{
		objDiv.set_height(149 + 55 + 17);
	}
}

// 모든 메뉴를 원래대로
this.fn_menuReset = function()
{
	// 서브 감추기
	this.divMenu.divSubMenu.set_visible(false);
	// 모든 메뉴 위치 원래대로
	this.divMenu.divMenu02.set_top(parseInt(this.divMenu.divMenu01.getOffsetBottom()));
	this.divMenu.divMenu03.set_top(parseInt(this.divMenu.divMenu02.getOffsetBottom()));
	this.divMenu.divMenu04.set_top(parseInt(this.divMenu.divMenu03.getOffsetBottom()));
}

// 모든 메뉴의 cssclass를 원래대로
this.fn_menuBtnReset = function()
{
	this.fn_menuSetting();
}

// ==================================
// TEST 버튼들

this.divMenu_Button00_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	application.goMain.fn_action("TEST");
}

this.divMenu_Button01_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	application.goMain.fn_action("TEST2");
}

this.divMenu_Button02_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	application.goMain.fn_action("TEST3");
}

this.divMenu_Button03_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var arg = new Array();
	arg[0] = this.ds_cboDeviceTest;
	arg[1] = "DeviceTest";
	arg[2] = "";
	arg[3] = "name";
	application.goMain.gfn_POP_create("DeviceTest", "cmmn::CmmnComboList.xfdl", "fn_callbackPOP", this, arg, "POP", application.goMain.divBase);
//	return false;
}

/** 
 * 팝업 callBack
 * @param  : popname - 팝업을 구분짓는 id
 rtn : 팝업이 닫히면서 전달된 값
 * @return : 없음
 */
this.fn_callbackPOP = function (popname, rtn)
{
	trace(rtn);
	switch (popname)
	{
		case "DeviceTest":
			application.gv_backFlag = "MENU";
			application.gv_menuId = "DeviceTest";
			application.gv_menuName = this.ds_cboDeviceTest.getColumn(rtn, "name");
			application.gv_formUrl = this.ds_cboDeviceTest.getColumn(rtn, "url");
			application.goMain.fn_action("DeviceTest");
// 			this.divMain.set_url("");
// 			this.divMain.set_url("frame::CmmnFrameSub.xfdl");
// 			this.divMain.bringToFront();
			break;
			break;
	}
}
this.divMenu_Button04_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	application.goMain.fn_action("TEST4");
}

this.divMenu_staWelcomeMsg_onclick = function(obj:Static,  e:nexacro.ClickEventInfo)
{
	if ( application.g_userId == "Z1855902" ) {
		if( !this.divMenu.divSubMenu.cssclass || this.divMenu.divSubMenu.cssclass == null ) {
			this.divMenu.divSubMenu.set_cssclass("div_MAIN_2DepthMenuBg");
		} else {
			this.divMenu.divSubMenu.set_cssclass("");
		}
	}
}
]]></Script>
  </Form>
</FDL>
