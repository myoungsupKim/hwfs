<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="ReturnOrderList" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="발주현황조회" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="15" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static28" text="입고예정일" class="sta_WFSA_label" position="absolute 15 40 95 61" anchor="left top"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 200 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 200 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 389 40 399 61" anchor="left top"/>
        <Static id="Static12" text="주문유형" class="sta_WFSA_label" position="absolute 927 40 989 61" anchor="left top"/>
        <Static id="Static13" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 985 40 995 61" anchor="left top"/>
        <Combo id="cbo_schOrderType" taborder="6" position="absolute 995 40 1096 61" anchor="left top" codecolumn="codecolumn" datacolumn="datacolumn" index="0">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">전체</Col>
              </Row>
              <Row>
                <Col id="codecolumn">0</Col>
                <Col id="datacolumn">정상주문</Col>
              </Row>
              <Row>
                <Col id="codecolumn">5</Col>
                <Col id="datacolumn">반환</Col>
              </Row>
              <Row>
                <Col id="codecolumn">6</Col>
                <Col id="datacolumn">교환</Col>
              </Row>
              <Row>
                <Col id="codecolumn">7</Col>
                <Col id="datacolumn">증정</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="Static14" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 700 40 715 61" anchor="left top"/>
        <Static id="Static15" text="~" position="absolute 197 41 213 60" style="align:center middle;"/>
        <Static id="Static16" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 85 39 95 60" anchor="left top"/>
        <ObjCalendar id="cal_fromDate" titletext="캘린더" taborder="0" text="20150101" scrollbars="none" position="absolute 93 40 193 61"/>
        <ObjCalendar id="cal_toDate" titletext="캘린더" taborder="1" text="20150101" scrollbars="none" position="absolute 216 40 316 61"/>
        <Static id="Static87" class="Guide01_AreaRed" visible="false" position="absolute 193 45 201 52"/>
        <Static id="Static47" class="Guide01_AreaRed" visible="false" position="absolute 208 45 216 52"/>
        <Static id="Static00" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 316 40 331 61" anchor="left top"/>
        <Static id="Static01" text="사업장" class="sta_WFSA_label" position="absolute 495 40 557 61" anchor="left top"/>
        <Static id="Static02" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 540 40 550 61" anchor="left top"/>
        <Static id="st_Upjang" text="영업담당" class="sta_WFSA_label" position="absolute 715 40 776 61" userdata="strQuery_FMUpjang"/>
        <Static id="Static03" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 774 40 784 61" anchor="left top"/>
        <Static id="Static09" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 913 40 928 61" anchor="left top"/>
        <Static id="Static18" text="주문목록" class="sta_WF_Title01" position="absolute 0 84 450 102" anchor="left top"/>
        <Grid id="grd_list" taborder="8" binddataset="ds_list" cellsizingtype="col" autofittype="col" oncelldblclick="grd_list_oncelldblclick" position="absolute 0 107 1237 326" anchor="left top right" onheadclick="grd_list_onheadclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="26"/>
                <Column size="150"/>
                <Column size="120"/>
                <Column size="240"/>
                <Column size="280"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="150"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell style="background:#566572ff URL('theme://convertImages/new/img_WF_Excel.png') center middle;" class="head_Excel"/>
                <Cell col="1" displaytype="checkbox"/>
                <Cell col="2" text="주문신청번호"/>
                <Cell col="3" text="입고예정일"/>
                <Cell col="4" text="고객사명"/>
                <Cell col="5" text="주문상품"/>
                <Cell col="6" text="금액"/>
                <Cell col="7" text="부가세"/>
                <Cell col="8" text="합계"/>
                <Cell col="9" text="주문유형"/>
                <Cell col="10" text="물류센터"/>
                <Cell col="11" text="주문상태"/>
                <Cell col="12" text="비고"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" displaytype="expr:iif(orderType=='0','none',iif(fv_authSaveYn != 'Y', 'none', iif( dDaySign &gt;= 0 , iif(lineStatus == '001' || lineStatus == '998', 'checkbox', 'none'), 'none')))" edittype="expr:iif(orderType=='0','none',iif(fv_authSaveYn != 'Y', 'none', iif( dDaySign &gt;= 0 , iif(lineStatus == '001' || lineStatus == '998', 'checkbox', 'none'), 'none')))" text="bind:chk"/>
                <Cell col="2" displaytype="text" style="align:center;color:EXPR(orderCntYn=='N'?'red':'default');color2:EXPR(orderCntYn=='N'?'red':'default');" text="bind:prNum"/>
                <Cell col="3" displaytype="text" style="align:center;color:EXPR(orderCntYn=='N'?'red':'default');color2:EXPR(orderCntYn=='N'?'red':'default');" text="bind:needDate" mask="####-##-##"/>
                <Cell col="4" style="align:left middle;" text="bind:upjangnm"/>
                <Cell col="5" style="align:left;" text="bind:itemName"/>
                <Cell col="6" displaytype="number" style="align:right middle;" text="bind:itemAmt" mask="#,##0.#0"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:itemVat" mask="#,##0.#0"/>
                <Cell col="8" displaytype="number" style="align:right;" text="bind:sumAmt" mask="#,##0.#0"/>
                <Cell col="9" displaytype="text" style="align:center;" text="bind:poTypeNm"/>
                <Cell col="10" displaytype="text" style="align:center;" text="bind:centerName"/>
                <Cell col="11" displaytype="text" style="align:center;" text="bind:lineStatusNm"/>
                <Cell col="12" displaytype="text" style="align:left;" expr="expr:iif(orderType=='5'||orderType=='6'||orderType=='7',oRtnMsg,iif(lineStatus == '998', oRtnMsg, ''))"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1"/>
                <Cell col="2" style="align:center middle;" text="합계"/>
                <Cell col="3"/>
                <Cell col="4"/>
                <Cell col="5"/>
                <Cell col="6" displaytype="number" style="align:right;" expr="expr:getSum(&quot;itemAmt&quot;)" mask="#,##0.#0"/>
                <Cell col="7" displaytype="number" style="align:right;" expr="expr:getSum(&quot;itemVat&quot;)" mask="#,##0.#0"/>
                <Cell col="8" displaytype="number" style="align:right;" expr="expr:getSum(&quot;sumAmt&quot;)" mask="#,##0.#0"/>
                <Cell col="9"/>
                <Cell col="10"/>
                <Cell col="11"/>
                <Cell col="12"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static37" text="주문상세정보" class="sta_WF_Title01" position="absolute 0 388 450 406" anchor="left top"/>
        <Grid id="grd_sub" taborder="14" binddataset="ds_sub" position="absolute 0 409 1237 710" anchor="all" oncellclick="grd_sub_oncellclick" autofittype="col" scrollbars="autoboth" cellsizingtype="col">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="37"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="224"/>
                <Column size="120"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="140"/>
                <Column size="100"/>
                <Column size="60"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell style="background:#566572ff URL('theme://convertImages/new/img_WF_Excel.png') center middle;" class="head_Excel"/>
                <Cell col="1" text="자재코드"/>
                <Cell col="2" text="바코드"/>
                <Cell col="3" text="자재명"/>
                <Cell col="4" text="규격"/>
                <Cell col="5" text="구매단위"/>
                <Cell col="6" text="과세"/>
                <Cell col="7" text="단가"/>
                <Cell col="8" text="신청수량"/>
                <Cell col="9" text="발주수량"/>
                <Cell col="10" text="신청금액"/>
                <Cell col="11" displaytype="text" text="실주문자"/>
                <Cell col="12" text="진행상황"/>
                <Cell col="13" text="최종변경시각"/>
                <Cell col="14" text="최종변경자"/>
                <Cell col="15"/>
                <Cell col="16" text="비고"/>
              </Band>
              <Band id="body">
                <Cell style="background:EXPR(poStatus!='HK'?'darkgray':fmpStatus=='Y'?'olive':poNoStatus=='Y'?'gold':'');background2:EXPR(poStatus!='HK'?'darkgray':fmpStatus=='Y'?'olive':poNoStatus=='Y'?'gold':'');selectbackground:EXPR(poStatus!='HK'?'darkgray':fmpStatus=='Y'?'olive':poNoStatus=='Y'?'gold':'');" expr="currow+1"/>
                <Cell col="1" style="align:center;selectbackground:EXPR(poStatus!='HK'?'darkgray':fmpStatus=='Y'?'olive':poNoStatus=='Y'?'gold':'');" text="bind:itemCode"/>
                <Cell col="2" style="align:center;" text="bind:winItemCd"/>
                <Cell col="3" style="align:left middle;" text="bind:itemName"/>
                <Cell col="4" displaytype="text" text="bind:itemSize"/>
                <Cell col="5" style="align:center;" text="bind:itemUnit"/>
                <Cell col="6" text="bind:taxCode"/>
                <Cell col="7" displaytype="number" text="bind:salePriceTax" mask="#,##0.#0"/>
                <Cell col="8" displaytype="number" text="bind:prQty" mask="#,##0.#0"/>
                <Cell col="9" displaytype="number" text="bind:poQty" mask="#,##0.#0"/>
                <Cell col="10" displaytype="number" text="bind:sumAmount" mask="#,##0.#0"/>
                <Cell col="11" displaytype="text" text="bind:tOrder"/>
                <Cell col="12" text="bind:poLineStatusNm"/>
                <Cell col="13" text="bind:updateDate"/>
                <Cell col="14" text="bind:updateUserName"/>
                <Cell col="15" displaytype="expr:iif(fv_authSaveYn != 'Y', 'none', iif( dDaySign &gt;= 0 , iif(lineStatus == '001' || lineStatus == '998', 'button', 'none'), 'none'))" edittype="expr:iif(fv_authSaveYn != 'Y', 'none', iif( dDaySign &gt;= 0 , iif(lineStatus == '001' || lineStatus == '998', 'button', 'none'), 'none'))" text="반려"/>
                <Cell col="16" text="bind:oRtnMsg" style="align:left middle;"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1" style="align:center middle;" text="합계"/>
                <Cell col="2"/>
                <Cell col="3"/>
                <Cell col="4"/>
                <Cell col="5"/>
                <Cell col="6"/>
                <Cell col="7"/>
                <Cell col="8" displaytype="number" expr="expr:getSum(&quot;prQty&quot;)" mask="#,##0.#0"/>
                <Cell col="9" displaytype="number" expr="expr:getSum(&quot;poQty&quot;)" mask="#,##0.#0"/>
                <Cell col="10" displaytype="number" expr="expr:getSum(&quot;sumAmount&quot;)" mask="#,##0.#0"/>
                <Cell col="11"/>
                <Cell col="12"/>
                <Cell col="13"/>
                <Cell col="14"/>
                <Cell col="15"/>
                <Cell col="16"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static10" position="absolute 1352 284 2366 1428" style="linespace:20;background:bisque;padding:20 20 20 20;align:left top;" visible="false" text="#. 초기설정&#13;&#10;&#9;- 입고예정일(필수) : (sysdate+1) ~ (sysdate+10)&#13;&#10;&#9;- 주문유형 : 전체&#13;&#10;&#9;- 확정버튼 : 권한제어 버튼 중 &quot;저장&quot;을 &quot;확정&quot;으로 명칭, 기능 대체 (fn_save())&#13;&#10;&#9;- 권한제어 버튼중 저장 버튼이 보이는(권한이 있는) 사용자만 주문목록의 체크박스 사용가능, 주문내역의 반려기능 사용 가능&#13;&#10;&#13;&#10;#. 조회조건&#13;&#10;&#9;- 사업장 : 브랜드유통사업장만 조회(/hwfs_QA/WebContent/xui/form/fm/fms/BrandUpjangSearchPop.xfdl)&#13;&#10;&#9;- 영업담당 : composit component&#13;&#10;&#9;- 주문유형&#13;&#10;&#9;&#9;* 전체&#13;&#10;&#9;&#9;* 판매 (일반주문)&#13;&#10;&#9;&#9;* 반환 (PO_TYPE@SO_PR_RTN; 51/52)&#13;&#10;&#9;&#9;* 교환 (PO_TYPE@SO_PR_RTN; 61/62)&#13;&#10;&#9;&#9;* 증정 (PO_TYPE@SO_PR_RTN; 71/72)&#13;&#10;&#13;&#10;#. 조회내용(주문목록)&#13;&#10;&#9;- 판매(일반주문)&#13;&#10;&#9;&#9;* 참조 : /hwfs_QA/WebContent/xui/form/fm/fmo/OrderDecision.xfdl&#13;&#10;&#9;&#9;* 구매유형 = 전체&#13;&#10;&#9;&#9;* 브랜드유통사업장만 대상&#13;&#10;&#9;&#9;* 체크박스 = none ; 판매(일반주문)유형은 해당 화면에서 확정기능을 제공하지 않음.(단순 정보 조회만 제공)&#13;&#10;&#9;- 반환/교환/증정&#13;&#10;&#9;&#9;* 주문신청 번호 기준으로 조회(group by PR_NUM@SO_PR_RTN); 취소 주문내용(LINE_STATUS = 003, 004 or 주문수량 0) 제외&#13;&#10;&#9;&#9;* 주문상품 ( MIN(PR_ID)의 상품명 외 n건 )&#13;&#10;&#9;&#9;* 비고 : 구매I/F 실패(LINE_STATUS = 998) 시 O_RTN_MSG@SO_PR_RTN 표시&#13;&#10;&#9;&#9;* 체크박스 : LINE_STATUS = 009, 100 이 아닌 경우에만 활성화(displaytype으로 control)&#13;&#10;&#9;&#9;&#13;&#10;#. 주문상세정보&#13;&#10;&#9;- 상동&#13;&#10;&#9;- 반려버튼 : LINE_STATUS = 004로 설정, 발주한 고객에게 SMS문자발송[반환/교환/증정발주(브랜드) 화면의 취소 안내 SMS 설명 확인@confluence]&#13;&#10;&#13;&#10;#. 확정 기능(저장)&#13;&#10;&#9;- 주문목록에서 선택한 주문정보를 기준으로 LINE_STATUS = 008로 업데이트"/>
        <UpjangSearchComponent id="comp_upjang" titletext="사업장 검색용 Component" taborder="3" onclick="edt_upjangNm_onclick" text="UpjangSearchComponent" position="absolute 550 40 700 61" bindDataset="ds_search" bindUpjangCodeColumn="schUpjang" bindUpjangNameColumn="schUpjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId="BrandUpjang"/>
        <Static id="Static17" text="물류센터" class="sta_WFSA_label" position="absolute 331 41 392 62" anchor="left top"/>
        <Combo id="cbo_schCenter" taborder="2" text="전체" codecolumn="code" datacolumn="codeName" index="0" position="absolute 399 40 479 61" anchor="left top" innerdataset="@ds_schCenter"/>
        <Static id="Static19" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 480 40 495 61" anchor="left top"/>
        <Static id="Static20" text="주문상태" class="sta_WFSA_label" position="absolute 1135 64 1197 85" anchor="left top" visible="false"/>
        <Static id="Static21" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 1128 40 1138 61" anchor="left top"/>
        <Combo id="cbo_schLineStatus" taborder="7" text="전체" codecolumn="code" datacolumn="codeName" index="0" position="absolute 1138 40 1223 61" anchor="left top" innerdataset="@ds_schLineStatus" visible="false"/>
        <Static id="Static22" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1096 40 1111 61" anchor="left top"/>
        <Static id="Static39" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 321 450 334" anchor="left top"/>
        <Static id="Static41" class="sta_WFSA_Labelbg01" position="absolute 0 334 1237 375" anchor="left top right"/>
        <Static id="Static42" text="신청번호" class="sta_WFSA_label01" position="absolute 130 344 192 365" anchor="left top"/>
        <Static id="Static43" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 334 1237 344" anchor="left top"/>
        <Static id="Static45" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 344 15 365" anchor="left top"/>
        <Static id="Static46" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 190 344 200 365" anchor="left top"/>
        <Static id="Static26" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 307 344 337 365" anchor="left top"/>
        <Edit id="edt_PoNum" taborder="9" readonly="true" position="absolute 200 344 307 365" anchor="left top" style="background:white;"/>
        <Static id="Static48" text="고객사명" class="sta_WFSA_label01" position="absolute 684 344 746 365" anchor="left top"/>
        <Static id="Static49" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 743 344 753 365" anchor="left top"/>
        <Edit id="edt_upjangnm" taborder="12" readonly="true" position="absolute 753 344 981 365" anchor="left top" style="background:white;"/>
        <Static id="Static50" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 981 344 1011 365" anchor="left top"/>
        <Static id="Static51" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 1044 344 1054 365" anchor="left top"/>
        <Static id="Static52" text="합계" class="sta_WFSA_label01" position="absolute 1012 344 1046 365" anchor="left top"/>
        <Static id="Static29" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 560 344 570 365" anchor="left top"/>
        <Static id="Static30" text="신청일" class="sta_WFSA_label" position="absolute 510 344 571 365" anchor="left top"/>
        <Static id="Static31" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 654 344 684 365" anchor="left top"/>
        <MaskEdit id="mak_sumAmt" taborder="13" readonly="true" mask="#,##0.#0" position="absolute 1053 344 1176 365" style="selectcolor:#444444ff;background:white;color:#444444ff;"/>
        <Static id="Static27" text="주문유형" class="sta_WFSA_label" position="absolute 337 344 399 365" anchor="left top"/>
        <Static id="Static32" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 100 344 130 365" anchor="left top"/>
        <Static id="Static40" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 480 344 510 365" anchor="left top"/>
        <Static id="Static53" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 395 344 405 365" anchor="left top"/>
        <Static id="st_po" text="신청상세" position="absolute 15 344 100 365" style="background:lightgrey;align:center middle;font:Gulim,9,bold;"/>
        <Edit id="edt_createDate" taborder="11" readonly="true" position="absolute 568 344 654 365" anchor="left top" style="background:white;align:center middle;"/>
        <Edit id="edt_sabunNm" taborder="4" readonly="true" onkeydown="edt_sabunNm_onkeydown" position="absolute 784 40 894 61" userdata="btn_pop5"/>
        <Button id="btn_pop5" taborder="5" onclick="fn_csSabunPop" class="btn_WF_popSearch" position="absolute 893 40 913 61"/>
        <Edit id="edt_poTypeNm" taborder="10" readonly="true" position="absolute 405 344 480 365" anchor="left top" style="background:white;align:center middle;"/>
        <Static id="Static23" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1222 40 1237 61" anchor="left top"/>
        <Static id="Static9" text="해당 입고예정일에 정상주문이 없을 경우 빨간색으로 표시(반환발주만 존재)" class="sta_WF_Redhelp" visible="true" position="absolute 81 84 557 97" style="color:red;"/>
        <Splitter id="sp_line" type="vertical" class="spt_WF_2" position="absolute 0 374 1237 383" anchor="left top right" onmove="sp_line_onmove">
          <Formats>
            <Format id="default">
              <SplitterItems id="items">
                <SplitterItem id="item00" position="leftortop" bindtype="move" componentid="Static41" offset="0"/>
                <SplitterItem id="item01" bindtype="resize" position="leftortop" offset="43" componentid="grd_list"/>
                <SplitterItem id="item02" bindtype="move" position="leftortop" offset="10" componentid="st_po"/>
                <SplitterItem id="item03" bindtype="move" position="leftortop" offset="10" componentid="Static42"/>
                <SplitterItem id="item04" bindtype="move" position="leftortop" offset="10" componentid="edt_PoNum"/>
                <SplitterItem id="item05" bindtype="move" position="leftortop" offset="10" componentid="Static27"/>
                <SplitterItem id="item06" bindtype="move" position="leftortop" offset="10" componentid="Static30"/>
                <SplitterItem id="item07" bindtype="move" position="leftortop" offset="10" componentid="edt_createDate"/>
                <SplitterItem id="item08" bindtype="move" position="leftortop" offset="10" componentid="edt_poTypeNm"/>
                <SplitterItem id="item09" bindtype="move" position="leftortop" offset="10" componentid="Static48"/>
                <SplitterItem id="item10" bindtype="move" position="leftortop" offset="10" componentid="edt_upjangnm"/>
                <SplitterItem id="item11" bindtype="move" position="leftortop" offset="10" componentid="Static52"/>
                <SplitterItem id="item12" bindtype="move" position="leftortop" offset="10" componentid="mak_sumAmt"/>
                <SplitterItem id="item13" bindtype="move" position="rightorbottom" offset="7" componentid="Static37"/>
                <SplitterItem id="item14" bindtype="resize" position="rightorbottom" offset="30" componentid="grd_sub"/>
              </SplitterItems>
            </Format>
          </Formats>
        </Splitter>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item6" compid="cal_fromDate" propid="text" datasetid="ds_search" columnid="schDate1"/>
      <BindItem id="item7" compid="cal_toDate" propid="text" datasetid="ds_search" columnid="schDate2"/>
      <BindItem id="item1" compid="cbo_schOrderType" propid="value" datasetid="ds_search" columnid="schOrderType"/>
      <BindItem id="item2" compid="cbo_schCenter" propid="value" datasetid="ds_search" columnid="schCenter"/>
      <BindItem id="item3" compid="cbo_schLineStatus" propid="value" datasetid="ds_search" columnid="schLineStatus"/>
      <BindItem id="item0" compid="edt_PoNum" propid="value" datasetid="ds_list" columnid="prNum"/>
      <BindItem id="item9" compid="edt_upjangnm" propid="value" datasetid="ds_list" columnid="upjangnm"/>
      <BindItem id="item10" compid="mak_sumAmt" propid="value" datasetid="ds_list" columnid="sumAmt"/>
      <BindItem id="item11" compid="edt_createDate" propid="value" datasetid="ds_list" columnid="createDate"/>
      <BindItem id="ed_CS_SABUN_NM_value" compid="edt_sabunNm" propid="value" datasetid="ds_search" columnid="schCsSabunNm"/>
      <BindItem id="item4" compid="edt_poTypeNm" propid="value" datasetid="ds_list" columnid="poTypeNm"/>
    </Bind>
    <Objects>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_search_oncolumnchanged">
        <ColumnInfo>
          <Column id="schFromDate" type="STRING" size="256"/>
          <Column id="schToDate" type="STRING" size="256"/>
          <Column id="schCenter" type="STRING" size="256"/>
          <Column id="schUpjang" type="STRING" size="256"/>
          <Column id="schUpjangNm" type="STRING" size="256"/>
          <Column id="schCsSabun" type="STRING" size="256"/>
          <Column id="schCsSabunNm" type="STRING" size="256"/>
          <Column id="schOrderType" type="STRING" size="256"/>
          <Column id="schLineStatus" type="STRING" size="256"/>
          <Column id="schDDays" type="STRING" size="256"/>
          <Column id="schPrNum" type="STRING" size="256"/>
          <Column id="schSubStatus" type="STRING" size="256"/>
          <Column id="schCustcd" type="STRING" size="256"/>
          <Column id="schRcUpjang" type="STRING" size="256"/>
          <Column id="schMainUpjang" type="STRING" size="256"/>
          <Column id="schNeedDate" type="STRING" size="256"/>
          <Column id="schOrderType2" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="schOrderType"/>
            <Col id="schCenter"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_searchValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="schFromDate" type="STRING" size="256"/>
          <Column id="schToDate" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="schFromDate">title:입고예정시작일,required:true,comparemin:schToDate:입고예정종료일,date:true,focus:cal_fromDate</Col>
            <Col id="schToDate">title:입고예정종료일,required:true,comparemax:schFromDate:입고예정시작일,date:true,focus:cal_toDate</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_schCenter">
        <ColumnInfo>
          <Column id="centerCode" type="STRING" size="255"/>
          <Column id="centerName" type="STRING" size="255"/>
          <Column id="code" type="STRING" size="255"/>
          <Column id="codeName" type="STRING" size="255"/>
          <Column id="centerType" type="STRING" size="255"/>
          <Column id="useYn" type="STRING" size="255"/>
          <Column id="attr01" type="BIGDECIMAL" size="255"/>
          <Column id="attr02" type="STRING" size="255"/>
          <Column id="wmsUse" type="STRING" size="255"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_schLineStatus">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="255"/>
          <Column id="code" type="STRING" size="255"/>
          <Column id="codeName" type="STRING" size="255"/>
          <Column id="sortSeq" type="BIGDECIMAL" size="255"/>
          <Column id="systemYn" type="STRING" size="255"/>
          <Column id="set1" type="STRING" size="255"/>
          <Column id="set2" type="STRING" size="255"/>
          <Column id="set3" type="STRING" size="255"/>
          <Column id="set4" type="STRING" size="255"/>
          <Column id="set5" type="STRING" size="255"/>
          <Column id="attr01" type="STRING" size="255"/>
          <Column id="attr02" type="STRING" size="255"/>
          <Column id="attr03" type="STRING" size="255"/>
          <Column id="attr04" type="STRING" size="255"/>
          <Column id="attr05" type="STRING" size="255"/>
          <Column id="attr06" type="STRING" size="255"/>
          <Column id="attr07" type="STRING" size="255"/>
          <Column id="attr08" type="STRING" size="255"/>
          <Column id="attr09" type="STRING" size="255"/>
          <Column id="attr10" type="STRING" size="255"/>
          <Column id="useYn" type="STRING" size="255"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_list_onrowposchanged">
        <ColumnInfo>
          <Column id="chk" type="STRING" size="255"/>
          <Column id="prNum" type="STRING" size="255"/>
          <Column id="upjangnm" type="STRING" size="255"/>
          <Column id="prDate" type="STRING" size="255"/>
          <Column id="itemName" type="STRING" size="255"/>
          <Column id="itemAmt" type="BIGDECIMAL" size="255"/>
          <Column id="itemVat" type="BIGDECIMAL" size="255"/>
          <Column id="sumAmt" type="BIGDECIMAL" size="255"/>
          <Column id="poType" type="STRING" size="255"/>
          <Column id="rcUpjang" type="BIGDECIMAL" size="255"/>
          <Column id="custcd" type="BIGDECIMAL" size="255"/>
          <Column id="centerCode" type="STRING" size="255"/>
          <Column id="centerName" type="STRING" size="255"/>
          <Column id="subinvCode" type="STRING" size="255"/>
          <Column id="lineStatus" type="STRING" size="255"/>
          <Column id="soStatus" type="STRING" size="255"/>
          <Column id="prSabun" type="STRING" size="255"/>
          <Column id="needDate" type="STRING" size="255"/>
          <Column id="headCreditYn" type="STRING" size="255"/>
          <Column id="mainUpjang" type="BIGDECIMAL" size="255"/>
          <Column id="lineStatusNm" type="STRING" size="255"/>
          <Column id="csSabun" type="STRING" size="255"/>
          <Column id="flag" type="BIGDECIMAL" size="255"/>
          <Column id="orderType" type="STRING" size="255"/>
          <Column id="oRtnMsg" type="STRING" size="255"/>
          <Column id="createDate" type="STRING" size="255"/>
          <Column id="dDays" type="BIGDECIMAL" size="255"/>
          <Column id="dDaySign" type="BIGDECIMAL" size="255"/>
          <Column id="poTypeNm" type="STRING" size="256"/>
          <Column id="orderCntYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sub" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="chk" type="STRING" size="255"/>
          <Column id="prId" type="BIGDECIMAL" size="255"/>
          <Column id="prNum" type="STRING" size="255"/>
          <Column id="approveNum" type="STRING" size="255"/>
          <Column id="itemCode" type="STRING" size="255"/>
          <Column id="itemName" type="STRING" size="255"/>
          <Column id="itemSize" type="STRING" size="255"/>
          <Column id="itemUnit" type="STRING" size="255"/>
          <Column id="unitPrice" type="BIGDECIMAL" size="255"/>
          <Column id="marginPrice" type="BIGDECIMAL" size="255"/>
          <Column id="salePrice" type="BIGDECIMAL" size="255"/>
          <Column id="opPrice" type="BIGDECIMAL" size="255"/>
          <Column id="prQty" type="BIGDECIMAL" size="255"/>
          <Column id="poQty" type="BIGDECIMAL" size="255"/>
          <Column id="saleAmount" type="BIGDECIMAL" size="255"/>
          <Column id="vat" type="BIGDECIMAL" size="255"/>
          <Column id="sumAmount" type="BIGDECIMAL" size="255"/>
          <Column id="lineStatus" type="STRING" size="255"/>
          <Column id="prRemark" type="STRING" size="255"/>
          <Column id="poLineStatusNm" type="STRING" size="255"/>
          <Column id="subinvCode" type="STRING" size="255"/>
          <Column id="needDate" type="STRING" size="255"/>
          <Column id="taxCode" type="STRING" size="255"/>
          <Column id="custcd" type="BIGDECIMAL" size="255"/>
          <Column id="centerFlag" type="STRING" size="255"/>
          <Column id="centerCode" type="STRING" size="255"/>
          <Column id="prUpjang" type="BIGDECIMAL" size="255"/>
          <Column id="rcUpjang" type="BIGDECIMAL" size="255"/>
          <Column id="invatFlag" type="STRING" size="255"/>
          <Column id="outvatFlag" type="STRING" size="255"/>
          <Column id="docuSource" type="STRING" size="255"/>
          <Column id="applySd" type="STRING" size="255"/>
          <Column id="vdSn" type="STRING" size="255"/>
          <Column id="upjangGrp" type="STRING" size="255"/>
          <Column id="opRate" type="STRING" size="255"/>
          <Column id="tOrder" type="STRING" size="255"/>
          <Column id="createDate" type="STRING" size="255"/>
          <Column id="createBy" type="STRING" size="255"/>
          <Column id="updateDate" type="STRING" size="255"/>
          <Column id="winItemCd" type="STRING" size="255"/>
          <Column id="updateUserName" type="STRING" size="255"/>
          <Column id="orderType" type="STRING" size="255"/>
          <Column id="dDays" type="BIGDECIMAL" size="255"/>
          <Column id="dDaySign" type="BIGDECIMAL" size="255"/>
          <Column id="salePriceTax" type="BIGDECIMAL" size="255"/>
          <Column id="oRtnMsg" type="STRING" size="255"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : ReturnOrderList
  파 일 명 : ReturnOrderList.xfdl
  기    능 : 반환/교환/증정 발주 현황 조회/확정

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2021.08.30   DEV0X   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";


/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_processCnt = 0;			//처리건수

var fv_errorFlag;				//에러발생 여부(Y/N)
var fv_errorMsg;				//에러발생 메시지

var fv_authSaveYn = "N";        //화면저장 권한 check
var fv_returnPrNum = ""; 

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo) {	

	// 확정 권한 확인 
	if(SCAuth.isUserRole("브랜드유통업장") || SCAuth.isUserRole("마트 직영(DC)")) {
		parent.objects["ds_cmnAuth"].setColumn(0, "savYn", "N");
	}
	
	gfn_formOnLoad(this);
	div_cmnBtn.btn_save.text = "확정";
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅 
 *---------------------------------------------------------------------------------------------*/
function fn_init() {
	cal_fromDate.fn_initMonthCal(this, gfn_addDate(fv_sToday,1), "", ds_search, "schFromDate", "Y");
	cal_toDate.fn_initMonthCal(this, gfn_addDate(fv_sToday,10), "", ds_search, "schToDate", "Y");
	
	comp_upjang.setRoleSetId("BrandUpjang");	// 브랜드 유통사업장 roleSetId
	
	// 브랜드유통업장일 경우 본인 사업장만 조회가능, 물류센터/영업담당 비활성화
	if(SCAuth.isUserRole("브랜드유통업장") || SCAuth.isUserRole("마트 직영(DC)")) {
		comp_upjang.enable = false; 
		cbo_schCenter.enable = false;
		edt_sabunNm.readonly=true;
		edt_sabunNm.enable = false;
		btn_pop5.enable=false;
	} else {	
		comp_upjang.enable = true;
		comp_upjang.setUpjangCode("");
		comp_upjang.setUpjangName("");
	}
	
	SCCombo.bind(this, "ScCenter", "cbo_schCenter", ds_schCenter, {useYn:"Y", defVal:""}, SCCombo.ALL); //센터
	SCCombo.bind(this, "ComCode", "cbo_schLineStatus", ds_schLineStatus, {groupCode:"RTN_LINE_STATUS", useYn:"Y"}, SCCombo.ALL);     // 주문상태

	
	//저장권한 확인
	var dsCmnAuth = parent.objects["ds_cmnAuth"];
	var strType = dsCmnAuth.toString().toUpperCase()
	
	if(strType == "[OBJECT DATASET]" && dsCmnAuth.rowcount > 0){
		fv_authSaveYn = dsCmnAuth.getColumn(0, "savYn");
	}
}


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search(sPrNum){		
	
	// 조회시 Validation Check
	if(!gfn_validCheck(ds_search, ds_searchValid, true)) return;
 	
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_list);
    ds_list.clearData();
    ds_sub.clearData();
    grd_list.setCellProperty("head", 1, "text", "0"); // CHECKBOX 초기화
    
    //반려시 prNum 저장
    fv_returnPrNum = gfn_nvl(sPrNum, "");
	
    var strSvcID    = "searchReturnOrderList";
    var strURL      = "fm/fms/returnOrderList/selectList.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_list=ds_list";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert(){	

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete(){

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save(){

	if( ds_list.getCaseCount(" chk == '1' ") == 0){
		gfn_alert("msg.err.grid.noselect");	// 선택된 항목이 없습니다.
		return;
	}

	if (!gfn_confirm("확정 하시겠습니까?")) return false;
	
    var strSvcID    = "saveConfirmList";
    var strURL      = "fm/fms/returnOrderList/saveConfirmList.xdo";
    var strInDs     = "ds_list=ds_list:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print(){
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help(){
	
}
/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg){

	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0){
		return;
	}
	
    switch(strSvcID){
		// 주문목록 조회
        case "searchReturnOrderList" :
            //trace(ds_list.saveXML());
            
            //반려 처리시 위치 찾기 / 상세조회 처리
            if(!gfn_isNull(fv_returnPrNum)){
				var nRow = this.ds_list.findRowExpr( "prNum == '" + fv_returnPrNum + "'");
				if(nRow > -1){
					this.ds_list.rowposition = nRow;
					fv_returnPrNum = "";
					
					fn_searchDetail();
				}
            }
            break;
        // 주문상세정보 조회
        case "searchReturnOrderDetailList" :
			//trace(ds_sub.saveXML());
            break;
        // 확정저장
        case "saveConfirmList" :
			trace("saveConfirmList" + fv_processCnt);
			gfn_alert("msg.action.success");	//처리 되었습니다.
			fn_search();
            break;     
        // 반려 저장
        case "saveReturnList" :
			trace("saveReturnList" + fv_processCnt);
			gfn_alert("msg.action.success");	//처리 되었습니다.
			fn_search(ds_list.getColumn(ds_list.rowposition, "prNum"));
            break;
            

    }
}
/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조건 Dataset 변경 시 Clear
 *---------------------------------------------------------------------------------------------*/
function ds_search_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 조건 변경 시 DataSet Clear	
	if (e.columnid == "schFromDate" || e.columnid == "schToDate" || e.columnid == "schCenter" || e.columnid == "schUpjang" 
	    || e.columnid == "schCsSabun" || e.columnid == "schOrderType" || e.columnid == "schLineStatus" || e.columnid == "schDDays") {
		ds_list.clearData();
		ds_sub.clearData();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Grid 해더 클릭시 checkbox, sort 처리
 *---------------------------------------------------------------------------------------------*/
function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	if(grd_list.getCellProperty("Head", e.cell,"displaytype") == "checkbox"){
		
		var sValue = obj.getCellProperty("Head", e.cell,"text") == "0" ? "1" : "0";
		obj.setCellProperty("Head", e.cell,"text",sValue);
		
		ds_list.enableevent = false;
		for(var idx = 0; idx < ds_list.rowcount; idx++){		
			var dDaySign = ds_list.getColumn(idx, "dDaySign");
			var lineStatus = ds_list.getColumn(idx, "lineStatus");
			
			if(fv_authSaveYn == 'Y' && dDaySign >= 0 && (lineStatus == '001' || lineStatus == '998')) {
				ds_list.setColumn(idx, "chk", sValue);
			}
		}
		ds_list.enableevent = true;
		
	} else {
		gfn_gridSort(obj, e);
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명      : Grid 더블클릭시 결의 상세 조회
 *---------------------------------------------------------------------------------------------*/
function grd_list_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	fn_searchDetail();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 조건 Dataset ROW 변경 시 
 *---------------------------------------------------------------------------------------------*/
function ds_list_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	// 하위상세내역은 기본적으로 Clear
	ds_sub.clearData();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 주문상세정보 cell click event 
 *---------------------------------------------------------------------------------------------*/
function grd_sub_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	// bind 정보가 없으면 반려
	var sText = obj.getCellProperty("Body", e.cell,"text");
	if(sText == "반려"){
		//trace("button cell click " + e.row);
		var dDaySign = ds_sub.getColumn(e.row, "dDaySign");
		var lineStatus = ds_sub.getColumn(e.row, "lineStatus");
		if(fv_authSaveYn == 'Y' && dDaySign >= 0 && (lineStatus == '001' || lineStatus == '998')){
			fn_saveReturn(); //반려 저장
		}
	}
}


/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/

/*----------------------------------------------------------------------------------------------
 * 설명      : 선택한 구매신청서의 상세정보 조회
 *---------------------------------------------------------------------------------------------*/
function fn_searchDetail()
{
	// 선택한 ROW 여부 CHECK
	if(ds_list.rowposition == -1) 
	{
		gfn_alert("msg.noselect", "주문목록");	// 선택해 주십시오.
		return;
	}
	
	// 조건 SET : 선택한 구매신청번호
	ds_search.setColumn(ds_search.rowposition, "schPrNum",      ds_list.getColumn(ds_list.rowposition, "prNum"));// 구매신청번호
	ds_search.setColumn(ds_search.rowposition, "schSubStatus",  ds_list.getColumn(ds_list.rowposition, "soStatus"));// 구매신청번호
	ds_search.setColumn(ds_search.rowposition, "schCustcd",     ds_list.getColumn(ds_list.rowposition, "custcd"));// 업체 고객사
	ds_search.setColumn(ds_search.rowposition, "schRcUpjang",   ds_list.getColumn(ds_list.rowposition, "rcUpjang"));// 업장 사업장
	ds_search.setColumn(ds_search.rowposition, "schMainUpjang", ds_list.getColumn(ds_list.rowposition, "mainUpjang"));// 메인 사업장
	ds_search.setColumn(ds_search.rowposition, "schNeedDate",   ds_list.getColumn(ds_list.rowposition, "needDate"));// 메인 사업장
	ds_search.setColumn(ds_search.rowposition, "schOrderType2", ds_list.getColumn(ds_list.rowposition, "orderType"));// 주문유형
 	
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_sub);
    ds_sub.clearData();
    	
    var strSvcID    = "searchReturnOrderDetailList";
    var strURL      = "fm/fms/returnOrderList/selectSub.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_sub=ds_sub";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}



/*----------------------------------------------------------------------------------------------
 * 설명      : 선택한 상세정보 조회 반려 처리
 *---------------------------------------------------------------------------------------------*/
function fn_saveReturn()
{
	if(ds_sub.getRowCount() == 0){
		gfn_alert("반려할 데이터가 없습니다.");
		return;
	}

	if (!gfn_confirm("반려 하시겠습니까?")) return false;
	
	ds_sub.setColumn(ds_sub.rowposition, "chk", "1");
	
	
    var strSvcID    = "saveReturnList";
    var strURL      = "fm/fms/returnOrderList/saveReturnList.xdo";
    var strInDs     = "ds_sub=ds_sub:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 영업담당자 조회 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_csSabunPop(obj:Button,  e:ClickEventInfo)
{
	var strReturn,strResult,nRow;
	var strCodeCol,strNameCol,strTitle,strSerchSvc,strText,arg1,nullyn;
	
	strCodeCol 	= "schCsSabun"; 
	strNameCol 	= "schCsSabunNm";
	strTitle	= "영업담당";
	strText		= "SABUN;NM_KOR";

	fn_sql_common_setup( strMAQuery_SABUN
						,strMAQuery_SABUNKeyField
						,strMAQuery_SABUNValueField
						,strMAQuery_SABUNKeyFieldNM
						,strMAQuery_SABUNValueFieldNM
						,""
						,""
						," AND MU_CD LIKE '200%'"
						,strTitle
						,strText
						);

	nRow = ds_search.rowposition;
	
	if(gds_sql_common.getColumn(0, "ret_code") == '')
	{
		return
	}
	
	edt_sabunNm.value = gds_sql_common.getColumn(0, "ret_name");
	edt_sabunNm.userdata = gds_sql_common.getColumn(0, "ret_code");
	
	ds_search.setColumn(nRow,strNameCol,gds_sql_common.getColumn(0, "ret_name"));
	ds_search.setColumn(nRow,strCodeCol,gds_sql_common.getColumn(0, "ret_code"));
}

function edt_sabunNm_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 8 || e.keycode == 46) {
		ds_search.setColumn(0,"schCsSabun","");
		ds_search.setColumn(0,"schCsSabunNm","");
	}
}
]]></Script>
  </Form>
</FDL>
