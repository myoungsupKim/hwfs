<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="BasOutletRpt" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="업장별 출력 내역 관리" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static32" class="sta_WFDA_Labelbg" position="absolute 164 496 919 581"/>
        <Static id="Static19" class="sta_WFDA_Labelbg" position="absolute 918 128 1237 239" anchor="left top"/>
        <Static id="Static12" class="sta_WFDA_Labelbg" position="absolute 164 102 919 187"/>
        <Static id="Static11" class="sta_WFDA_Labelbg" position="absolute 164 238 919 265" anchor="default"/>
        <Static id="Static17" class="sta_WFDA_Labelbg" position="absolute 164 186 919 213" anchor="default"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="1" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static58" text="업장별 출력 내역 관리" class="sta_WF_Title01" position="absolute 0 84 450 102" anchor="left top"/>
        <Static id="Static59" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 97 450 102" anchor="left top"/>
        <Static id="Static60" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 450 84" anchor="left top"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 93 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Static id="Static28" text="사업장" class="sta_WFSA_label" position="absolute 367 40 414 61" anchor="left top"/>
        <Static id="Static23" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 413 40 423 61" anchor="left top"/>
        <Static id="Static24" text="사업부" class="sta_WFSA_label" position="absolute 16 40 63 61" anchor="left top"/>
        <Static id="Static27" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 61 40 71 61" anchor="left top"/>
        <MuSearchComponent id="cbo_mu" titletext="사업부 선택 Component" taborder="37" onkeydown="cbo_mu_onkeydown" text="MuSearchComponent00" class="cmb_WF_Essential" position="absolute 71 40 172 61" bindDataset="" bindMuCdColumn="" appendText="" onItemChangedEvent="fn_muChange"/>
        <TmSearchComponent id="edt_tm" titletext="팀 검색용 Component" taborder="38" text="TmSearchComponent00" class="edt_WF_Essential" position="absolute 230 40 337 61" bindDataset="" bindTmCdColumn="" bindTmNmColumn="" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmChange" eventBeforeTrigger=""/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="39" text="UpjangSearchComponent00" class="edt_WF_Essential" position="absolute 422 40 544 61" bindDataset="" bindUpjangCodeColumn="" bindUpjangNameColumn="" eventBeforeTrigger="" eventAfterTrigger="fn_upjangChange" roleSetId=""/>
        <Static id="Static29" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 172 40 202 61" anchor="left top"/>
        <Static id="Static25" text="팀" class="sta_WFSA_label" position="absolute 202 40 226 61" anchor="left top"/>
        <Static id="Static48" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 220 40 230 61" anchor="left top"/>
        <Static id="Static50" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 337 40 367 61" anchor="left top"/>
        <Static id="Static51" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 544 40 574 61" anchor="left top"/>
        <Static id="Static00" text="행사견적(계약)서 상단" class="sta_WFDA_Label01" position="absolute 0 102 165 187" anchor="left top"/>
        <TextArea id="txt_dcInfo" taborder="40" position="absolute 168 105 915 184" anchor="default"/>
        <Static id="Static01" text="상단오른쪽" class="sta_WFDA_Label01" position="absolute 0 186 165 213" anchor="left top"/>
        <Edit id="edt_dcTitleLeft" taborder="41" position="absolute 167 189 476 210" anchor="default"/>
        <Edit id="edt_dcTitleRight" taborder="42" position="absolute 606 189 915 210" anchor="default"/>
        <Static id="Static02" text="상단왼쪽" class="sta_WFDA_Label01" position="absolute 479 186 603 213" anchor="default"/>
        <Static id="Static03" text="견적유효일자" class="sta_WFDA_Label01" position="absolute 0 212 165 239" anchor="left top"/>
        <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 164 212 919 239" anchor="default"/>
        <Edit id="edt_dcDate" taborder="43" position="absolute 168 215 477 236" anchor="default"/>
        <Static id="Static10" text="입금계좌" class="sta_WFDA_Label01" position="absolute 0 238 165 265" anchor="left top"/>
        <Edit id="edt_dcBank" taborder="44" position="absolute 168 241 915 262" anchor="default"/>
        <Static id="Static13" class="sta_WFDA_Labelbg" position="absolute 164 264 919 349" anchor="default"/>
        <TextArea id="txt_dcBottom01" taborder="45" position="absolute 168 267 915 346" anchor="default"/>
        <Static id="Static14" text="하단내역1" class="sta_WFDA_Label01" position="absolute 0 264 165 349" anchor="left top"/>
        <Static id="Static15" class="sta_WFDA_Labelbg" position="absolute 164 348 919 433" anchor="default"/>
        <TextArea id="txt_dcBottom02" taborder="46" position="absolute 168 351 915 430" anchor="default"/>
        <Static id="Static16" text="하단내역2" class="sta_WFDA_Label01" position="absolute 0 348 165 433" anchor="left top"/>
        <Static id="Static18" text="명판내역" class="sta_WFDA_Label01" position="absolute 918 102 1237 129" anchor="left top"/>
        <Static id="Static20" text="팩스번호" class="sta_WFDA_Label01" position="absolute 918 238 1237 265" anchor="left top"/>
        <Static id="Static21" class="sta_WFDA_Labelbg" position="absolute 918 264 1237 349"/>
        <Edit id="edt_dcFax" taborder="51" position="absolute 921 269 1234 290" anchor="left top"/>
        <Static id="Static22" text="구분" class="sta_WFDA_Label01" position="absolute 0 432 165 465" anchor="left top"/>
        <Static id="Static26" class="sta_WFDA_Labelbg" position="absolute 164 432 919 497" anchor="default"/>
        <Static id="Static30" text="취소 수수료" class="sta_WFDA_Label01" position="absolute 0 464 165 497" anchor="left top"/>
        <Edit id="edt_dcGbTitle" taborder="52" position="absolute 168 434 915 455" anchor="default"/>
        <Edit id="edt_dcGb01" taborder="53" position="absolute 168 454 318 475" anchor="default"/>
        <Edit id="edt_dcGb02" taborder="54" position="absolute 317 454 468 475" anchor="default"/>
        <Edit id="edt_dcGb03" taborder="55" position="absolute 467 454 617 475" anchor="default"/>
        <Edit id="edt_dcGb04" taborder="56" position="absolute 616 454 766 475" anchor="default"/>
        <Edit id="edt_dcGb05" taborder="57" position="absolute 765 454 915 475" anchor="default"/>
        <Edit id="edt_dcTy01" taborder="58" position="absolute 168 474 318 495" anchor="default"/>
        <Edit id="edt_dcTy02" taborder="59" position="absolute 317 474 468 495" anchor="default"/>
        <Edit id="edt_dcTy03" taborder="60" position="absolute 467 474 617 495" anchor="default"/>
        <Edit id="edt_dcTy04" taborder="61" position="absolute 616 474 766 495" anchor="default"/>
        <Edit id="edt_dcTy05" taborder="62" position="absolute 765 474 915 495" anchor="default"/>
        <TextArea id="txt_dcSaupjang" taborder="63" position="absolute 921 131 1234 236"/>
        <Button id="btn_copy" taborder="64" text="복사" class="btn_WF_Function" position="absolute 1143 79 1235 99" onclick="btn_copy_onclick"/>
        <Static id="Static31" text="웨딩견적서 하단내역" class="sta_WFDA_Label01" position="absolute 0 496 165 581" anchor="left top"/>
        <TextArea id="txt_weddOrder" taborder="65" position="absolute 168 499 915 578"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item32" compid="txt_dcInfo" propid="value" datasetid="ds_outletRpt" columnid="dcInfo"/>
      <BindItem id="item6" compid="edt_dcTitleLeft" propid="value" datasetid="ds_outletRpt" columnid="dcTitleLeft"/>
      <BindItem id="item0" compid="edt_dcTitleRight" propid="value" datasetid="ds_outletRpt" columnid="dcTitleRight"/>
      <BindItem id="item1" compid="edt_dcDate" propid="value" datasetid="ds_outletRpt" columnid="dcDate"/>
      <BindItem id="item2" compid="edt_dcBank" propid="value" datasetid="ds_outletRpt" columnid="dcBank"/>
      <BindItem id="item3" compid="txt_dcBottom01" propid="value" datasetid="ds_outletRpt" columnid="dcBottom01"/>
      <BindItem id="item4" compid="txt_dcBottom02" propid="value" datasetid="ds_outletRpt" columnid="dcBottom02"/>
      <BindItem id="item10" compid="edt_dcFax" propid="value" datasetid="ds_outletRpt" columnid="dcFax"/>
      <BindItem id="item11" compid="edt_dcGbTitle" propid="value" datasetid="ds_outletRpt" columnid="dcGbTitle"/>
      <BindItem id="item12" compid="edt_dcGb01" propid="value" datasetid="ds_outletRpt" columnid="dcGb01"/>
      <BindItem id="item13" compid="edt_dcGb02" propid="value" datasetid="ds_outletRpt" columnid="dcGb02"/>
      <BindItem id="item14" compid="edt_dcGb03" propid="value" datasetid="ds_outletRpt" columnid="dcGb03"/>
      <BindItem id="item15" compid="edt_dcGb04" propid="value" datasetid="ds_outletRpt" columnid="dcGb04"/>
      <BindItem id="item16" compid="edt_dcGb05" propid="value" datasetid="ds_outletRpt" columnid="dcGb05"/>
      <BindItem id="item17" compid="edt_dcTy01" propid="value" datasetid="ds_outletRpt" columnid="dcTy01"/>
      <BindItem id="item18" compid="edt_dcTy02" propid="value" datasetid="ds_outletRpt" columnid="dcTy02"/>
      <BindItem id="item19" compid="edt_dcTy03" propid="value" datasetid="ds_outletRpt" columnid="dcTy03"/>
      <BindItem id="item20" compid="edt_dcTy04" propid="value" datasetid="ds_outletRpt" columnid="dcTy04"/>
      <BindItem id="item21" compid="edt_dcTy05" propid="value" datasetid="ds_outletRpt" columnid="dcTy05"/>
      <BindItem id="item5" compid="txt_dcSaupjang" propid="value" datasetid="ds_outletRpt" columnid="dcSaupjang"/>
      <BindItem id="item7" compid="txt_weddOrder" propid="value" datasetid="ds_outletRpt" columnid="weddOrder"/>
    </Bind>
    <Objects>
      <Dataset id="ds_outletRpt" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="50"/>
          <Column id="dcInfo" type="STRING" size="4000"/>
          <Column id="dcTitleLeft" type="STRING" size="4000"/>
          <Column id="dcTitleRight" type="STRING" size="4000"/>
          <Column id="dcDate" type="STRING" size="4000"/>
          <Column id="dcBank" type="STRING" size="4000"/>
          <Column id="dcBottom01" type="STRING" size="4000"/>
          <Column id="dcBottom02" type="STRING" size="4000"/>
          <Column id="dcFax" type="STRING" size="4000"/>
          <Column id="dcSaupjang" type="STRING" size="4000"/>
          <Column id="dcGbTitle" type="STRING" size="4000"/>
          <Column id="dcGb01" type="STRING" size="4000"/>
          <Column id="dcGb02" type="STRING" size="4000"/>
          <Column id="dcGb03" type="STRING" size="4000"/>
          <Column id="dcGb04" type="STRING" size="4000"/>
          <Column id="dcGb05" type="STRING" size="4000"/>
          <Column id="dcTy01" type="STRING" size="4000"/>
          <Column id="dcTy02" type="STRING" size="4000"/>
          <Column id="dcTy03" type="STRING" size="4000"/>
          <Column id="dcTy04" type="STRING" size="4000"/>
          <Column id="dcTy05" type="STRING" size="4000"/>
          <Column id="weddOrder" type="STRING" size="4000"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_outletRptValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="outletCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="outletCd">title:업장코드,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">Y</Col>
            <Col id="insYn">Y</Col>
            <Col id="delYn">N</Col>
            <Col id="savYn">Y</Col>
            <Col id="prtYn">Y</Col>
            <Col id="exlYn">Y</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : BasOutletRpt 
  파 일 명 : BasOutletRpt.xfdl
  기    능 : 업장별 출력물 관리
  
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();


/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
 	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	// 업데이트여부를 체크할 DataSet, 여러개 있을 경우 ;로 구분
	
	v_ds_check = "ds_outletRpt";
	ds_outletRpt.clearData();
	
	// 권한설정
	edt_tm.applyAuthLevel(cbo_mu);
	edt_upjang.applyAuthLevel(edt_tm);
	edt_upjang.setForcedRoleSet("OutletUpjang");
 
	fn_search();
	
}



/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
    // Grid sort 표시 초기화(필수)
	ds_outletRpt.clearData(); 

    var strSvcID    = "search";
    var strURL      = "rc/bms/basOutletRpt/selectList.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_outletRpt=ds_outletRpt";
    var strArg      = "outletCd="  + gfn_nvl(edt_upjang.getUpjangCode(),"");    
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{	
	
	if (gfn_nvl(edt_upjang.getUpjangCode(),"") == "")
	{
		gfn_alert("msg.noselect","사업장");
		return;	
	}
	
	var nRow = ds_outletRpt.addRow();	//행추가
	 
	ds_outletRpt.setColumn(nRow , "outletCd", gfn_nvl(edt_upjang.getUpjangCode(),""));
	 
 
	 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{
 
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
	if (gfn_dsIsUpdated(ds_outletRpt)==false )
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
	
	// 저장시 Validation Check	
	if (gfn_validCheck(ds_outletRpt, ds_outletRptValid) == false)	return;
	
    var strSvcID    = "save";
    var strURL      = "rc/bms/basOutletRpt/saveData.xdo";
    var strInDs     = "ds_outletRpt=ds_outletRpt:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
	
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		// 코드분류 조회
        case "search" :
            trace(ds_outletRpt.saveXML());
            break;
        
        // 저장
        case "save" :
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			 
            break;    
    }
}


/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/


/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/


/*----------------------------------------------------------------------------------------------
 * 설명      : 사업부 변경되는 경우
 *---------------------------------------------------------------------------------------------*/
function fn_muChange(obj, event)
{
	edt_tm.setTmCode("");
	edt_upjang.setUpjangCode("");
	ds_outletRpt.clearData();
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 팀(운영부서) 변경되는 경우
 *---------------------------------------------------------------------------------------------*/
function fn_tmChange(obj, data)
{
	edt_upjang.setUpjangCode("");	 
	ds_outletRpt.clearData();
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 업장(사업장) 변경되는 경우
 *---------------------------------------------------------------------------------------------*/
function fn_upjangChange(obj,data)
{
	fn_search();
}  
 

function btn_copy_onclick(obj:Button,  e:ClickEventInfo)
{
	var nData = gfn_nvl(ds_outletRpt.getColumn(ds_outletRpt.rowposition,"outletCd"),"");
	if (nData == "" )
	{
		gfn_alert("sc.no.copydata");	// 복사할 자료가 없습니다.
		return;
	}
	var arrParam = new Array();
	arrParam[0] =gfn_nvl(edt_upjang.getUpjangCode(),"");
	var rtnVal = gfn_dialog("BasOutletRptCopy"				// dialogId
				   , "X_BMS::BasOutletRptCopy.xfdl"	// Url
				   , {fv_Contents:arrParam}			// 배열
				   , null, null, null, null, null, false, true, -1);
				   
	if (typeof rtnVal != "undefined" && rtnVal != null) 
	{
		 
	}
}
]]></Script>
  </Form>
</FDL>
