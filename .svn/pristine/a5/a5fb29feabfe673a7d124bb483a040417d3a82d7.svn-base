<?xml version="1.0" encoding="euc-kr"?>
<query>
	<type>select</type>
	<description><![CDATA[]]></description>
	<reload>true</reload>
	<monitoring>true</monitoring>
	<result-count>1</result-count>
	<statement>
<![CDATA[
SELECT UPJANG, ITEM_CODE, CODE, CODE_NAME, CONTENTS, SET1, NUT_QTY, ORI_NUT_QTY
  FROM
(
---1)폐기율
SELECT #UPJANG# AS UPJANG, #ITEM_CODE# AS ITEM_CODE
     , '000' AS CODE, '폐기율' AS CODE_NAME, '폐기율' AS CONTENTS, '%' AS SET1
     , NVL(SUM(NUT_QTY),0) AS NUT_QTY
     , NVL(SUM(ORI_NUT_QTY),0) AS ORI_NUT_QTY
     , 0 AS SORT_SEQ
  FROM (SELECT 0 AS NUT_QTY, 0 AS ORI_NUT_QTY FROM DUAL
         UNION ALL
        SELECT DISUSE_RATE AS NUT_QTY, 0 AS ORI_NUT_QTY
          FROM FMP_ITEM_NUT
         WHERE ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
         UNION ALL
        SELECT 0 AS NUT_QTY, DISUSE_RATE AS ORI_NUT_QTY
          FROM FSI_ITEM_NUT
         WHERE ITEM_CODE = #ORI_ITEM_CODE#)
 UNION ALL
---2)영양소
SELECT #UPJANG# AS UPJANG, #ITEM_CODE# AS ITEM_CODE
     , A.CODE, A.CODE_NAME, '영양소' AS CONTENTS, A.SET1
     , NVL(B.NUT_QTY,0) AS NUT_QTY
     , NVL(C.ORI_NUT_QTY,0) AS ORI_NUT_QTY
     , A.SORT_SEQ
FROM SCC_COMMON_CODE A,
(
SELECT CAL AS NUT_QTY, 'CAL' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT WATER AS NUT_QTY, 'WATER' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT PROT AS NUT_QTY, 'PROT' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT FAT AS NUT_QTY, 'FAT' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT CARBO AS NUT_QTY, 'CARBO' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT FIBER AS NUT_QTY, 'FIBER' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT ASH AS NUT_QTY, 'ASH' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT CA AS NUT_QTY, 'CA' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT P AS NUT_QTY, 'P' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT FE AS NUT_QTY, 'FE' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT NA AS NUT_QTY, 'NA' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT K AS NUT_QTY, 'K' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT VITA_A AS NUT_QTY, 'VITA_A' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT RETIN AS NUT_QTY, 'RETIN' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT B_CAROT AS NUT_QTY, 'B_CAROT' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT THIA AS NUT_QTY, 'THIA' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT RIBO AS NUT_QTY, 'RIBO' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT NIACIN AS NUT_QTY, 'NIACIN' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT VITA_C AS NUT_QTY, 'VITA_C' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
UNION ALL
SELECT CHOLE AS NUT_QTY, 'CHOLE' AS NUT_NAME
FROM   FMP_ITEM_NUT
WHERE  ITEM_CODE = #ITEM_CODE# AND UPJANG = #UPJANG#
) B,
-----본사영양소
(SELECT CAL AS ORI_NUT_QTY, 'CAL' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT WATER AS ORI_NUT_QTY, 'WATER' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT PROT AS ORI_NUT_QTY, 'PROT' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT FAT AS ORI_NUT_QTY, 'FAT' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT CARBO AS ORI_NUT_QTY, 'CARBO' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT FIBER AS ORI_NUT_QTY, 'FIBER' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT ASH AS ORI_NUT_QTY, 'ASH' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT CA AS ORI_NUT_QTY, 'CA' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT P AS ORI_NUT_QTY, 'P' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT FE AS ORI_NUT_QTY, 'FE' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT NA AS ORI_NUT_QTY, 'NA' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT K AS ORI_NUT_QTY, 'K' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT VITA_A AS ORI_NUT_QTY, 'VITA_A' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT RETIN AS ORI_NUT_QTY, 'RETIN' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT B_CAROT AS ORI_NUT_QTY, 'B_CAROT' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT THIA AS ORI_NUT_QTY, 'THIA' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT RIBO AS ORI_NUT_QTY, 'RIBO' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT NIACIN AS ORI_NUT_QTY, 'NIACIN' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT VITA_C AS ORI_NUT_QTY, 'VITA_C' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#
UNION ALL
SELECT CHOLE AS ORI_NUT_QTY, 'CHOLE' AS NUT_NAME
FROM   FSI_ITEM_NUT
WHERE  ITEM_CODE = #ORI_ITEM_CODE#) C
-----본부영양소
 WHERE A.SET2 = B.NUT_NAME(+)
   AND A.SET2 = C.NUT_NAME(+)
   AND A.GROUP_CODE = 'FS0027'
)
 ORDER BY SORT_SEQ	]]></statement>
	<input default-name="ds_Cond">
		<col name="UPJANG" size="22" type="NUMERIC" description="" /> 
		<col name="ITEM_CODE" size="50" type="VARCHAR" description="" /> 
		<col name="ORI_ITEM_CODE" size="12" type="VARCHAR" description="" /> 
	</input>
	<output default-name="ds_List">
		<col name="UPJANG" size="22" type="NUMERIC" description="" /> 
		<col name="ITEM_CODE" size="50" type="VARCHAR" description="" /> 
		<col name="CODE" size="50" type="VARCHAR" description="" /> 
		<col name="CODE_NAME" size="100" type="VARCHAR" description="" /> 
		<col name="CONTENTS" size="300" type="VARCHAR" description="" /> 
		<col name="SET1" size="100" type="VARCHAR" description="" /> 
		<col name="NUT_QTY" size="22" type="NUMERIC" description="" /> 
		<col name="ORI_NUT_QTY" size="22" type="NUMERIC" description="" /> 
	</output>
</query>
