<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSR00013E" titletext="레시피관리" position="absolute 0 0 1082 780" scrollbars="none" onload="form_onload">
    <Layouts>
      <Layout>
        <MPFileDialog id="FileDialog" taborder="6" visible="false" position="absolute 1127 48 1151 72" FileName="" FileNameList="" FilePath="" UserData="" MultiSelect="false" Filter="ALL File(*.*)|*.*" FilterIndex="0" AppendExtDefault="false" Type="Open"/>
        <MPFileDialog id="FileDialogSave" taborder="7" visible="false" position="absolute 1151 48 1175 72" FileName="" FileNameList="" FilePath="" UserData="" MultiSelect="false" Filter="ALL File(*.*)|*.*" FilterIndex="0" AppendExtDefault="false" Type="Open"/>
        <MPFile id="file" taborder="8" visible="false" position="absolute 1151 72 1175 96" FileName="" UserData=""/>
        <Button id="Button0" taborder="35" text="추천계절" onclick="Button0_OnClick" class="btn_WF_Custom" position="absolute 760 142 823 163" visible="false"/>
        <Static id="Static43" class="sta_WFDA_Labelbg" position="absolute 282 88 1043 141"/>
        <Static id="Static18" class="sta_WFDA_Labelbg" position="absolute 656 88 1043 115"/>
        <Static id="Static38" class="sta_WFDA_Labelbg" position="absolute 878 10 1043 89"/>
        <Static id="Static14" class="sta_WFDA_Labelbg" position="absolute 798 36 1043 63"/>
        <Static id="Static13" class="sta_WFDA_Labelbg" position="absolute 282 88 541 115"/>
        <Static id="Static05" class="sta_WFDA_Labelbg" position="absolute 282 10 770 89"/>
        <ImageViewer id="Image0" taborder="36" stretch="fit" onclick="Image0_OnClick" position="absolute 15 10 139 141" onmouseleave="Image0_OnMouseOut" onloaderror="Image0_OnLoadError"/>
        <Div id="div_Material" anchor="left top right" taborder="37" url="U_FSR::FSR00014V.xfdl" text="Div0" position="absolute 15 465 1069 765"/>
        <Button id="btn_RecipeElement" taborder="38" text="레시피영양성분" onclick="btn_RecipeElement_OnClick" class="btn_WF_Custom" position="absolute 15 444 126 465"/>
        <Button id="btn_ratio" taborder="39" text="레시피비율일괄변경" onclick="btn_ratio_OnClick" class="btn_WF_Custom" position="absolute 128 444 263 465"/>
        <Radio id="rdo_Detail" taborder="40" columncount="3" rowcount="0" index="0" innerdataset="ds_SubRadio" codecolumn="CD" datacolumn="NM" value="0" onitemchanged="rdo_Detail_OnChanged" position="absolute 117 151 255 172" onitemclick="rdo_Detail_onitemclick"/>
        <Edit id="ed_ratio" taborder="41" inputtype="number" maxlength="3" visible="false" position="absolute 265 444 336 465" style="align:right;" oneditclick="ed_ratio_oneditclick"/>
        <Static id="Static12" class="sta_WFDA_Labelbg" position="absolute 282 36 770 63"/>
        <Static id="Static03" text="기&#13;&#10;본&#13;&#10;정&#13;&#10;보" class="sta_WFDA_Label01" position="absolute 142 10 188 89" style="padding:0 0 0 0;align:center middle;"/>
        <Static id="Static04" text="레시피코드/명" class="sta_WFDA_Label01" position="absolute 187 10 283 37"/>
        <Static id="Static06" text="레 시 피 분 류" class="sta_WFDA_Label01" position="absolute 187 36 283 63"/>
        <Static id="Static6" text="주   재  료  군" class="sta_WFDA_Label01" position="absolute 187 62 283 89"/>
        <Edit id="ed_RecipeCD" taborder="45" readonly="true" class="edt_WF_Essential" position="absolute 285 13 355 34" enable="false"/>
        <Edit id="ed_RecipeNM" taborder="46" onkeydown="common_OnKeyDown" enable="false" position="absolute 357 13 689 34"/>
        <Button id="btn_RecipePop" taborder="47" text="중복체크" onclick="btn_RecipePop_OnClick" class="btn_WF_Custom" position="absolute 691 13 767 34" visible="false"/>
        <Static id="Static1" visible="false" position="absolute 587 11 753 33"/>
        <Static id="Static11" text="레시피유형" class="sta_WFDA_Label01" position="absolute 389 36 477 63"/>
        <Static id="Static17" text="대표영양성분" class="sta_WFDA_Label01" position="absolute 389 62 477 89"/>
        <Static id="Static35" text="조리법유형" class="sta_WFDA_Label01" position="absolute 584 36 664 63"/>
        <Combo id="cbo_RecipeClass" taborder="48" innerdataset="@ds_RecipeClass" codecolumn="CD" datacolumn="NM" onitemchanged="common_OnChanged" onkeydown="common_OnKeyDown" class="cmb_WF_Essential" position="absolute 285 39 387 60" enable="false"/>
        <Combo id="cbo_RecipeType" taborder="49" innerdataset="@ds_RecipeType" codecolumn="CD" datacolumn="NM" type="filter" onitemchanged="common_OnChanged" onkeydown="common_OnKeyDown" class="cmb_WF_Essential" position="absolute 479 39 582 60" enable="false"/>
        <Combo id="Combo2" taborder="50" innerdataset="@ds_CookClass" codecolumn="CD" datacolumn="NM" type="filter" onitemchanged="common_OnChanged" onkeydown="common_OnKeyDown" class="cmb_WF_Essential" position="absolute 666 39 767 60" enable="false"/>
        <Combo id="Combo5" taborder="51" innerdataset="ds_Material" codecolumn="CD" datacolumn="NM" type="filter" onitemchanged="common_OnChanged" onkeydown="common_OnKeyDown" position="absolute 285 65 387 86" enable="false"/>
        <Combo id="Combo1" taborder="52" innerdataset="ds_Element" codecolumn="CD" datacolumn="NM" type="filter" onitemchanged="common_OnChanged" onkeydown="common_OnKeyDown" position="absolute 479 65 582 86" enable="false"/>
        <Static id="Static36" text="개&#10;발&#10;정&#10;보" class="sta_WFDA_Label01" position="absolute 769 10 799 89"/>
        <Static id="Static37" text="개  발  자" class="sta_WFDA_Label01" position="absolute 798 10 879 37"/>
        <Static id="Static39" text="최초개발일" class="sta_WFDA_Label01" position="absolute 798 36 879 63"/>
        <Static id="Static40" text="최종수정일" class="sta_WFDA_Label01" position="absolute 798 62 879 89"/>
        <Edit id="Edit0" taborder="53" onkeydown="common_OnKeyDown" position="absolute 881 13 1020 34" enable="false"/>
        <MaskEdit id="me_Cdate" taborder="54" readonly="true" type="string" mask="@@@@-@@-@@" position="absolute 881 39 1040 60" enable="false" style=":disabled {align:center middle;}"/>
        <MaskEdit id="MaskEdit00" taborder="55" readonly="true" type="string" mask="@@@@-@@-@@" position="absolute 881 65 1040 86" enable="false" style=":disabled {align:center middle;}"/>
        <Button id="btn_CustPop" taborder="56" onclick="btn_CustPop_OnClick" class="btn_WF_popSearch" position="absolute 1019 13 1040 34" enable="false"/>
        <Static id="Static41" text="품질 정보" wordwrap="word" class="sta_WFDA_Label01" position="absolute 142 88 188 141"/>
        <Static id="Static42" text="모    양" class="sta_WFDA_Label01" position="absolute 187 88 283 115"/>
        <Static id="Static44" text="질    감" class="sta_WFDA_Label01" position="absolute 187 114 283 141"/>
        <Static id="Static8" text="맛" class="sta_WFDA_Label01" position="absolute 374 88 446 115"/>
        <Static id="Static45" text="색" class="sta_WFDA_Label01" position="absolute 374 114 446 141"/>
        <Combo id="Combo9" taborder="57" innerdataset="ds_FS0008" codecolumn="CD" datacolumn="NM" type="filter" onkeydown="common_OnKeyDown" position="absolute 285 91 372 112" enable="false"/>
        <Combo id="Combo3" taborder="58" innerdataset="ds_FS0009" codecolumn="CD" datacolumn="NM" type="filter" onkeydown="common_OnKeyDown" position="absolute 448 91 535 112" enable="false"/>
        <Combo id="Combo4" taborder="59" innerdataset="ds_FS0010" codecolumn="CD" datacolumn="NM" type="filter" onkeydown="common_OnKeyDown" position="absolute 285 117 372 138" enable="false"/>
        <Combo id="Combo7" taborder="60" innerdataset="ds_FS0007" codecolumn="CD" datacolumn="NM" type="filter" onkeydown="common_OnKeyDown" position="absolute 448 117 535 138" enable="false"/>
        <Static id="Static46" text="제공 정보" class="sta_WFDA_Label01" position="absolute 537 88 583 141"/>
        <Static id="Static48" text="제 공 온 도" class="sta_WFDA_Label01" position="absolute 582 88 666 115"/>
        <Static id="Static49" text="중심온도체크" class="sta_WFDA_Label01" position="absolute 582 114 666 141"/>
        <Combo id="Combo10" taborder="61" innerdataset="ds_FS0011" codecolumn="CD" datacolumn="NM" type="filter" onkeydown="common_OnKeyDown" class="cmb_WF_Essential" position="absolute 668 91 767 112" enable="false"/>
        <Combo id="cbo_RecipeNM" taborder="62" innerdataset="ds_yn" codecolumn="CD" datacolumn="NM" type="filter" onkeydown="common_OnKeyDown" class="cmb_WF_Essential" position="absolute 668 117 767 138" enable="false"/>
        <Combo id="Combo12" taborder="63" innerdataset="ds_FS0013" codecolumn="CD" datacolumn="NM" type="filter" onkeydown="common_OnKeyDown" position="absolute 834 117 1040 138" enable="false"/>
        <CheckBox id="Checkbox2" taborder="64" text="겨울" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 990 91 1033 112" enable="false"/>
        <CheckBox id="Checkbox1" taborder="65" text="가을" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 937 91 981 112" enable="false"/>
        <CheckBox id="Checkbox0" taborder="66" text="여름" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 884 91 928 112" enable="false"/>
        <CheckBox id="chk_Dtlyn" taborder="67" text="봄" value="N" truevalue="Y" falsevalue="N" onkeydown="common_OnKeyDown" position="absolute 836 91 873 112" enable="false"/>
        <Static id="Static52" text="찬  기" class="sta_WFDA_Label01" position="absolute 769 114 832 141"/>
        <Static id="Static2" visible="false" position="absolute 897 147 1045 165" anchor="top right"/>
        <Static id="Static3" text="원가" class="sta_WFDA_Label01" visible="false" position="absolute 897 146 940 167" anchor="top right"/>
        <MaskEdit id="ed_wonga" taborder="68" value="MaskEdit0" enable="false" visible="false" position="absolute 941 146 1043 167" anchor="top right"/>
        <Button id="btn_ImgInsert" taborder="69" text="첨부" onclick="btn_ImgInsert_OnClick" class="btn_WF_Append" position="absolute 567 147 619 168" visible="false"/>
        <Button id="btn_ImgDelete" taborder="70" text="삭제" onclick="btn_ImgDelete_OnClick" class="btn_WF_Delete" position="absolute 513 147 565 168" visible="false"/>
        <Button id="btn_add" taborder="72" text="자재추가" onclick="btn_add_OnClick" class="btn_WF_Custom" position="absolute 968 444 1043 465" anchor="top right"/>
        <Grid id="grd_jajea" taborder="73" binddataset="ds_ItemList" wheelscrollrow="1" autoenter="select" useinputpanel="false" cellsizingtype="both" onkeydown="grd_jajea_OnKeyDown" onmousemove="grd_jajea_OnMouseOver" oncellclick="grd_jajea_OnCellClick" onheadclick="grd_jajea_OnHeadClick" position="absolute 15 172 1043 439" anchor="left top right" autofittype="col" class="grd_WF_LineNone">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30"/>
                <Column size="0"/>
                <Column size="0"/>
                <Column size="80"/>
                <Column size="0"/>
                <Column size="291"/>
                <Column size="120"/>
                <Column size="40"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="96"/>
                <Column size="0"/>
                <Column size="60"/>
              </Columns>
              <Rows>
                <Row size="48" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="금&#10;지" wordwrap="word"/>
                <Cell col="2" colspan="3" displaytype="text" text="자재코드"/>
                <Cell col="5" displaytype="text" text="자재명"/>
                <Cell col="6" displaytype="text" text="규격"/>
                <Cell col="7" displaytype="text" text="구매&#10;단위"/>
                <Cell col="8" displaytype="text" text="자재&#10;특성"/>
                <Cell col="9" displaytype="text" text="1인소요량&#10;(g)"/>
                <Cell col="10" displaytype="text" text="가식부량&#10;(g)"/>
                <Cell col="11" displaytype="text" text="1인원가&#10;(원)"/>
                <Cell col="12" colspan="2" displaytype="text" text="조리커팅규격"/>
                <Cell col="14" displaytype="text" text="에너지&#10;(kcal)"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:left;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:RESTRICT_YN"/>
                <Cell col="2" displaytype="image" style="align:center middle;" text="URL('theme://images/new/grd_WF_ExpandImageX.png')"/>
                <Cell col="3" displaytype="text" style="align:left;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));" text="bind:ITEM_CODE"/>
                <Cell col="4" displaytype="image" style="align:left;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));backgroundimage:EXPR(iif(expr_GetRowType(rowposition)=='insert','img_Popup1',''));" text="expr:getRowType(currow)==2?&quot;URL('theme://Images/new/grd_WF_ExpandImage.png')&quot;:&quot;&quot;"/>
                <Cell col="5" displaytype="text" style="align:left;background:EXPR(fn_color(currow));background2:EXPR(fn_color(currow));selectbackground:EXPR(fn_color(currow));" text="bind:ITEM_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:PO_UOM"/>
                <Cell col="8" displaytype="image" style="align:center;" text="bind:FEATURE_ICON"/>
                <Cell col="9" displaytype="number" edittype="none" editfilter="number" style="align:right;" text="bind:NEED_QTY" mask="#,###.##"/>
                <Cell col="10" displaytype="number" style="align:right;" text="bind:EDIBLE_QTY"/>
                <Cell col="11" displaytype="number" style="align:right;" text="bind:PERSON_PRICE"/>
                <Cell col="12" displaytype="combo" edittype="none" style="align:left;" text="bind:CUT_SPEC" combodataset="ds_CutList" combocodecol="DETAIL_CODE" combodatacol="DETAIL_NAME"/>
                <Cell col="13" displaytype="image" edittype="none" style="align:center middle;" text="URL('theme://Images\new\grd_WF_ExpandImage.png')"/>
                <Cell col="14" displaytype="number" style="align:right;" text="bind:CAL_CALC"/>
              </Band>
              <Band id="summary">
                <Cell colspan="9" displaytype="text" style="align:center;" text="합계"/>
                <Cell col="9" displaytype="number" style="align:right;" expr="expr:getSum('NEED_QTY')" mask="#,##0.00"/>
                <Cell col="10" displaytype="number" style="align:right;" expr="expr:getSum('EDIBLE_QTY')"/>
                <Cell col="11" displaytype="number" style="align:right;" expr="expr:getSum('PERSON_PRICE')"/>
                <Cell col="12" displaytype="text" style="align:left;"/>
                <Cell col="13" displaytype="text" style="align:left;"/>
                <Cell col="14" displaytype="number" style="align:right;" expr="expr:getSum('CAL_CALC')"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <PopupDiv id="pdiv_imgZoom" scrollbars="none" visible="false" position="absolute 122 177 501 442">
          <Layouts>
            <Layout>
              <ImageViewer id="Image0" taborder="0" stretch="fit" onclick="pdiv_imgZoom_Image0_OnClick" position="absolute 5 3 374 258" anchor="default"/>
            </Layout>
          </Layouts>
        </PopupDiv>
        <Static id="st_Ratio" text="(%)" visible="false" position="absolute 338 445 366 466"/>
        <Static id="sta_WF_Title01" text="재료구성" class="sta_WF_Title01" position="absolute 15 154 105 172"/>
        <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 15 167 465 172"/>
        <Static id="Static00" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 772 167 1070 172"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 141 465 154" anchor="left top"/>
        <Static id="Static07" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 466 465 479" anchor="left top"/>
        <Static id="Static10" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 15 439 1071 444"/>
        <Static id="Static09" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1067 25 1082 766"/>
        <Static id="Static19" text="추천계절" class="sta_WFDA_Label01" position="absolute 769 88 832 115"/>
        <Static id="Static20" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 33 15 774"/>
        <Static id="Static21" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 7 0 1081 10" anchor="left top"/>
        <Static id="Static22" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 7 765 1081 780" anchor="left top"/>
        <Static id="Static23" text="금지자재" position="absolute 387 150 460 171"/>
        <Static id="Static24" position="absolute 368 152 383 167" style="background:#ffe49cff;"/>
        <Static id="Static25" text="불용자재" position="absolute 299 150 372 171"/>
        <Static id="Static26" position="absolute 281 152 296 167" style="background:#ffaa9cff;"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_SubRadio">
        <ColumnInfo>
          <Column id="CD" size="256" type="STRING"/>
          <Column id="NM" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">0</Col>
            <Col id="NM">조리법</Col>
          </Row>
          <Row>
            <Col id="CD">2</Col>
            <Col id="NM">조리공정</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_tempRecipe"/>
      <Dataset id="ds_tempItem"/>
      <Dataset id="ds_tempCook"/>
      <Dataset id="ds_phf" oncolumnchanged="ds_phf_OnColumnChanged"/>
      <Dataset id="ds_Valid"/>
      <Dataset id="ds_Recipe" cancolumnchange="ds_Recipe_CanColumnChange" oncolumnchanged="ds_Recipe_OnColumnChanged" onload="ds_Recipe_OnLoadCompleted">
        <ColumnInfo>
          <Column id="ATTR01" size="200" type="STRING"/>
          <Column id="ATTR02" size="200" type="STRING"/>
          <Column id="ATTR03" size="200" type="STRING"/>
          <Column id="ATTR04" size="200" type="STRING"/>
          <Column id="ATTR05" size="200" type="STRING"/>
          <Column id="ATTR06" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR07" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR08" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR09" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR10" size="22" type="BIGDECIMAL"/>
          <Column id="AUTUMN_YN" size="1" type="STRING"/>
          <Column id="CDATE" size="7" type="DATE"/>
          <Column id="COOK_OPRN" size="100" type="STRING"/>
          <Column id="COOK_TOOL1" size="20" type="STRING"/>
          <Column id="COOK_TOOL2" size="20" type="STRING"/>
          <Column id="CORE_TEMPER_YN" size="1" type="STRING"/>
          <Column id="COST_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="CUSER" size="9" type="STRING"/>
          <Column id="DISPLAY_METHOD" size="20" type="STRING"/>
          <Column id="GOODS_FEATURE" size="200" type="STRING"/>
          <Column id="MAIN_ITEM_CODE1" size="12" type="STRING"/>
          <Column id="MAIN_ITEM_CODE2" size="12" type="STRING"/>
          <Column id="NM_KOR" size="20" type="STRING"/>
          <Column id="PHF_MGMT1" size="1" type="STRING"/>
          <Column id="PHF_MGMT2" size="1" type="STRING"/>
          <Column id="PHF_MGMT3" size="1" type="STRING"/>
          <Column id="PHF_MGMT4" size="1" type="STRING"/>
          <Column id="PHF_MGMT5" size="1" type="STRING"/>
          <Column id="PHF_MGMT_YN" size="1" type="STRING"/>
          <Column id="PHOTO_PATH" size="200" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COLOR" size="20" type="STRING"/>
          <Column id="RECIPE_FEEL" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_SHAPE" size="20" type="STRING"/>
          <Column id="RECIPE_TASTE" size="20" type="STRING"/>
          <Column id="RECIPE_TEMPER" size="20" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="RESP_NUT1" size="20" type="STRING"/>
          <Column id="RESP_NUT2" size="20" type="STRING"/>
          <Column id="SABUN" size="9" type="STRING"/>
          <Column id="SALE_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_UOM" size="20" type="STRING"/>
          <Column id="SPRING_YN" size="1" type="STRING"/>
          <Column id="SUMMER_YN" size="1" type="STRING"/>
          <Column id="UDATE" size="7" type="DATE"/>
          <Column id="USE_TOOL" size="20" type="STRING"/>
          <Column id="USE_YN" size="1" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
          <Column id="VALID_TIME" size="4" type="STRING"/>
          <Column id="WINTER_YN" size="1" type="STRING"/>
          <Column id="PHF" size="256" type="STRING"/>
          <Column id="RTN_REASON" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ItemList" cancolumnchange="ds_ItemList_CanColumnChange" oncolumnchanged="ds_ItemList_OnColumnChanged">
        <ColumnInfo>
          <Column id="CAL" size="22" type="BIGDECIMAL"/>
          <Column id="CAL_CALC" size="22" type="BIGDECIMAL"/>
          <Column id="CUT_SPEC" size="20" type="STRING"/>
          <Column id="CUT_SPEC_NAME" size="100" type="STRING"/>
          <Column id="DISUSE_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="EDIBLE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="GRAM_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="FEATURE_NAME" size="0" type="STRING"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PERSON_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RESTRICT_YN" size="1" type="STRING"/>
          <Column id="ITEM_SEQ" size="256" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Rowcnt"/>
      <Dataset id="ds_CheckCnt"/>
      <Dataset id="ds_RecipeSeq"/>
      <Dataset id="ds_CookMethod" cancolumnchange="ds_CookMethod_CanColumnChange" onrowposchanged="ds_CookMethod_OnRowPosChanged">
        <ColumnInfo>
          <Column id="CUISINE_DESC" size="200" type="STRING"/>
          <Column id="CUISINE_SEQ" size="22" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RecipeCD"/>
      <Dataset id="ds_UpdateImg"/>
      <Dataset id="ds_Valid2"/>
      <Dataset id="ds_RClass"/>
      <Dataset id="ds_RType"/>
      <Dataset id="ds_CClass"/>
      <Dataset id="ds_Material"/>
      <Dataset id="ds_Element"/>
      <Dataset id="ds_FS0008"/>
      <Dataset id="ds_FS0009"/>
      <Dataset id="ds_FS0010"/>
      <Dataset id="ds_FS0007"/>
      <Dataset id="ds_FS0011"/>
      <Dataset id="ds_yn">
        <ColumnInfo>
          <Column id="CD" size="256" type="STRING"/>
          <Column id="NM" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">Y</Col>
            <Col id="NM">예</Col>
          </Row>
          <Row>
            <Col id="CD">N</Col>
            <Col id="NM">아니요</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_FS0013"/>
      <Dataset id="ds_CookClass"/>
      <Dataset id="ds_CutList"/>
      <Dataset id="ds_GetDate"/>
      <Dataset id="ds_RecipeClass"/>
      <Dataset id="ds_RecipeNM"/>
      <Dataset id="ds_RecipeType"/>
      <Dataset id="ds_common"/>
      <Dataset id="ds_cond">
        <ColumnInfo>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
          <Column id="NEW_RECIPE_SEQ" size="256" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MainRecipeList"/>
    </Objects>
    <Bind>
      <BindItem id="ed_RecipeCD_value" compid="ed_RecipeCD" propid="value" datasetid="ds_Recipe" columnid="RECIPE_CD"/>
      <BindItem id="ed_RecipeNM_value" compid="ed_RecipeNM" propid="value" datasetid="ds_Recipe" columnid="RECIPE_NAME"/>
      <BindItem id="Static1_value" compid="Static1" propid="value" datasetid="ds_Recipe" columnid="NEW_RECIPE_SEQ"/>
      <BindItem id="cbo_RecipeClass_value" compid="cbo_RecipeClass" propid="value" datasetid="ds_Recipe" columnid="RECIPE_CLASS"/>
      <BindItem id="cbo_RecipeType_value" compid="cbo_RecipeType" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TYPE"/>
      <BindItem id="Combo2_value" compid="Combo2" propid="value" datasetid="ds_Recipe" columnid="CUISINE_TYPE"/>
      <BindItem id="Combo5_value" compid="Combo5" propid="value" datasetid="ds_Recipe" columnid="MAIN_ITEM_CODE1"/>
      <BindItem id="Combo1_value" compid="Combo1" propid="value" datasetid="ds_Recipe" columnid="RESP_NUT1"/>
      <BindItem id="Edit0_value" compid="Edit0" propid="value" datasetid="ds_Recipe" columnid="NM_KOR"/>
      <BindItem id="me_Cdate_value" compid="me_Cdate" propid="value" datasetid="ds_Recipe" columnid="CDATE"/>
      <BindItem id="MaskEdit00_value" compid="MaskEdit00" propid="value" datasetid="ds_Recipe" columnid="UDATE"/>
      <BindItem id="Combo9_value" compid="Combo9" propid="value" datasetid="ds_Recipe" columnid="RECIPE_SHAPE"/>
      <BindItem id="Combo3_value" compid="Combo3" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TASTE"/>
      <BindItem id="Combo4_value" compid="Combo4" propid="value" datasetid="ds_Recipe" columnid="RECIPE_FEEL"/>
      <BindItem id="Combo7_value" compid="Combo7" propid="value" datasetid="ds_Recipe" columnid="RECIPE_COLOR"/>
      <BindItem id="Combo10_value" compid="Combo10" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TEMPER"/>
      <BindItem id="cbo_RecipeNM_value" compid="cbo_RecipeNM" propid="value" datasetid="ds_Recipe" columnid="CORE_TEMPER_YN"/>
      <BindItem id="Combo12_value" compid="Combo12" propid="value" datasetid="ds_Recipe" columnid="USE_TOOL"/>
      <BindItem id="Checkbox2_value" compid="Checkbox2" propid="value" datasetid="ds_Recipe" columnid="WINTER_YN"/>
      <BindItem id="Checkbox1_value" compid="Checkbox1" propid="value" datasetid="ds_Recipe" columnid="AUTUMN_YN"/>
      <BindItem id="Checkbox0_value" compid="Checkbox0" propid="value" datasetid="ds_Recipe" columnid="SUMMER_YN"/>
      <BindItem id="chk_Dtlyn_value" compid="chk_Dtlyn" propid="value" datasetid="ds_Recipe" columnid="SPRING_YN"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";

//@@컨버터에서 주석처리 #include "lib::sc_comon.js"
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js"		//JAVA 코딩시
//@@컨버터에서 주석처리 #include "lib::tit_comm_0001.js"
var v_gbn;
var v_RECIPE;
var v_ImgNM="";
// 화면및 콤보 구성 데이타셋 로드
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);
	
	v_gbn = gbn;
	
	if(v_gbn == 0) {
		btn_ratio.visible = false;
		ed_ratio.visible  = false;
		st_Ratio.visible  = false;
		btn_add.visible   = false;
		
		div_Material.btn_SubAdd.visible = false;
		div_Material.btn_SubDelete.visible = false;		
	} else {
		btn_ratio.visible = true;
		ed_ratio.visible  = true;
		st_Ratio.visible  = true;
		btn_add.visible   = true;
		
		div_Material.btn_SubAdd.visible = true;
		div_Material.btn_SubDelete.visible = true;
	}

	fsp_init(this);
	Image0.text="이미지가 없습니다.";
	http.Sync=true;
	fsp_clear(this);
	// 오늘 날짜
	ds_GetDate.clearData();
	fsp_addSearch(this,"sc/scc:SCC_TODAY");
	fsp_callService(this,"","","","ds_GetDate=ds_GetDate","","fn_call_back");
	http.Sync=false;

	fsp_clear(this);
	// 레시피분류
	ds_RecipeClass.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S002");
	fsp_callService(this,"","","","ds_RecipeClass=ds_RecipeClass","","fn_call_back");

	fsp_clear(this);
	// 레시피유형
	ds_RecipeType.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S003");
	fsp_callService(this,"","","","ds_RecipeType=ds_RecipeType","","fn_call_back");

	fsp_clear(this);  
	// 조리법유형
	ds_CookClass.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S004");
	fsp_callService(this,"","","","ds_CookClass=ds_CookClass","","fn_call_back");
	
	fsp_clear(this);
	// 주재료군
	ds_Material.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S005");
	fsp_callService(this,"","","","ds_Material=ds_Material","","fn_call_back");	
	

	fsp_clear(this);
	// 대표영양성분
	ds_Element.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S006");
	fsp_callService(this,"","","","ds_Element=ds_Element","","fn_call_back");

	fsp_clear(this);
	// 커팅규격
	ds_CutList.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S022");
	fsp_callService(this,"","","","ds_CutList=ds_CuttingList","","fn_call_back");
	
	http.Sync=true;		
	// 레시피공통코드
	ds_common.clearData();
	fsp_clear(this);
	fsp_addSearch(this,"fs/fsr:FSR00010E_S008");
	fsp_callService(this,"","","","ds_common=ds_common","","fn_call_back");
	http.Sync=false;
//	--FS0009 맛  FS0007 색 FS0008 모양  FS0010 질감 FS0011 제공온도 FS0013 찬기
	ds_common.filter("GROUP_CODE=='FS0007'");
	CopyF(ds_FS0007,"ds_common");
	ds_FS0007.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0008'");
	CopyF(ds_FS0008,"ds_common");
	ds_FS0008.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0009'");
	CopyF(ds_FS0009,"ds_common");
	ds_FS0009.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0010'");
	CopyF(ds_FS0010,"ds_common");
	ds_FS0010.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0011'");
	CopyF(ds_FS0011,"ds_common");
	ds_FS0011.insertRow(0);
	ds_common.filter("GROUP_CODE=='FS0013'");
	CopyF(ds_FS0013,"ds_common");
	ds_FS0013.insertRow(0);


//	테스트용..본화면을 합할때 주석으로 뺄것
	 //fn_T0_Search(0,"A01294");
	 fn_T0_Search(gbn,RECIPE);
	
	fsp_clear(this);
	// 레시피명
	ds_RecipeNM.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S001");
	fsp_callService(this,"","","","ds_RecipeNM=ds_RecipeNM","","fn_call_back");
	
	return false;
	
}
//콜백 프로세스 처리
function fn_call_back(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
	}	
}
function fn_call_back_img(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		fn_T0_Clear();
	}	
}
//	레시피갖고오기 콜백
function fn_call_back_T0_search(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==1)
		{
			Copy(ds_tempRecipe,"ds_Recipe");
			ds_Recipe.clearData();
			ds_Recipe.addRow();
			ds_Recipe.copyRow(0,ds_tempRecipe,0);
			Image0.image="";
			Image0.text="이미지가 없습니다.";
			ds_Recipe.setColumn(0,"PHOTO_PATH","");
			ds_Recipe.setColumn(0,"SPHOTO_PATH","");
			ds_Recipe.setColumn(0,"CDATE","");
			ds_Recipe.setColumn(0,"UDATE","");
			ds_Recipe.setColumn(0,"SABUN","");
			ds_Recipe.setColumn(0,"NM_KOR","");
			if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H")
			{
				ds_Recipe.setColumn(0,"RECIPE_CLASS","");
			}
			ed_RecipeNM.readonly=false;
		}
		else
		{
			var v_path="";
			ed_RecipeNM.readonly=true;
			//if(grd_List.Format=="StdRecipe")
			//{
				v_path="FSR_STD_RECIPE_MST";
			//}
			//else
			//{
				//v_path="FSR_NEW_RECIPE_MST";
			//}
			if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))==0 || gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH"))==null )
			{
				Image0.image="";
				Image0.text="이미지가 없습니다.";
			}
			else
			{
				trace(fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH")));
				trace(ds_Recipe.getColumn(0,"SPHOTO_PATH"));
				
				if(gfn_length(gfn_trim(fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH"))))==0 ||
				    gfn_trim(fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH")))==null )
				{
					trace("1");
					Image0.image="";
					Image0.text="이미지가 없습니다.";
					
				}
				else
				{
					trace("2"); 
					Image0.text="";
					Image0.image=fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH"));
				}
			}
			
		}
		fn_filter();
		// if(grd_List.Format=="StdRecipe")
		// {		
			// if(ds_Recipe.GetRowType(0)=="insert")
			// {
				// cbo_RecipeClass.Enable=true;
			// }
			// else
			// {
				// cbo_RecipeClass.Enable=false;
				// ed_RecipeNM.Readonly=true;
			// }
		// }
		// else
		// {
				// cbo_RecipeClass.Enable=true;
				// ed_RecipeNM.Enable=true;
				// ed_RecipeNM.Readonly=false;
		// }
		
		// 자재 갖고 오기
		ds_cond.setColumn(0,"RECIPE_NAME",ds_Recipe.getColumn(0,"RECIPE_NAME"));
		fn_Jajea();
	}	
}

function fn_Call_ShowMsg(cd,errmsg)
{
	if(cd!=0)
	{
		g_Message("EE","시스템 오류!\n\n전산 담당자에게 문의하세요.");
		return;
	}
	else
	{
		g_Message("02");
		// 미확정 저장일 경우 RECIPE_SEQ 셋팅 --> 신규입력 후 바로 사진 업로드시에 에러로 인해 수정
		if( div_cmnBtn.rdo_RecipeGbn.index == 1 && gfn_length(gfn_trim(ds_Recipe.getColumn(0, "RECIPE_SEQ")))== 0 ) {
			fn_T0_SaveAfterSearch(0,ds_Recipe.getColumn(0,"RECIPE_NAME"));
		}
		
		return;
	}
}
function fn_T0_SaveAfterSearch(gbn,RECIPE)
{
	v_gbn=gbn;
	v_RECIPE=RECIPE;
	ds_cond.clearData();
	ds_cond.addRow();
	ds_cond.setColumn(0,"RECIPE_NAME",ds_Recipe.getColumn(0,"RECIPE_NAME"));
	ds_cond.setColumn(0,"NEW_RECIPE_SEQ",parseInt(ds_RecipeSeq.getColumn(0, "NEW_RECIPE_SEQ")));
	fsp_clear(this);
	ds_Recipe.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S030");
	fsp_callService(this,"","","ds_cond=ds_cond","ds_Recipe=ds_Recipe","","fn_call_back_T0_search","",true);
}
function fm_sRtn(cd,errmsg)
{
	if(cd!=0)
	{
		g_Message("EE","시스템 오류!\n\n전산 담당자에게 문의하세요.");
		return;
	}
	else
	{
		g_Message("02","데이터가 정상적으로 저장 되었습니다.\n\n미확정 레시피로 이동합니다.");
		fn_T0_Clear();
	}
}
function fn_T0_Reset()
{
	if(div_Detail.fn_Update_Chk())
	{
		return;
	}
	fn_ableChk(false);
	ds_RClass.filter("CD!='H'");
	fn_Phf();
	ed_RecipeNM.enable=true;
	fn_T0_Clear();
	ds_Recipe.clearData();
	ds_Recipe.addRow();
	ds_Recipe.setColumn(0,"PHF_MGMT_YN","N");
	ds_CookMethod.clearData();
	ed_RecipeNM.readonly=false;
	ds_ItemList.clearData();
	for(i=0;i<ds_phf.getRowCount();i++)
	{
		ds_phf.setColumn(i,"PHF","N");
	}
	Image0.image="";
	Image0.text="이미지가 없습니다.";
	ed_wonga.value="";	
	v_gbn=1;
	if(GetRowType(ds_Recipe,0)=="insert")
	{
		cbo_RecipeClass.enable=true;
	}
	else
	{
		cbo_RecipeClass.enable=false;
	}
}
function fn_call_back_imgDel(cd,errmsg)
{
	if(cd!=0)
	{
		v_ImgNM="";
	}
	else
	{
		trace("======>");
		trace(gfn_dsIsUpdated(ds_Recipe)+"/"+gfn_dsIsUpdated(ds_ItemList)+"/"+gfn_dsIsUpdated(ds_CookMethod)+"/"+gfn_dsIsUpdated(ds_phf));;
		ds_ItemList.applyChange();
		ds_CookMethod.applyChange();
		ds_ItemList.reset();
		ds_CookMethod.reset();
		g_Message("02");
		var v_path="";
		if(grd_List.formatid=="StdRecipe")
		{
			v_path="FSR_STD_RECIPE_MST";
		}
		else
		{
			return;
		}
		if(gfn_length(gfn_trim(v_ImgNM))>0)
		{
			var v_rtn=fsp_fileDelete(v_path, v_ImgNM,true);
			if(v_rtn==false)
			{
				//alert(fn_AlertMsg("017"));			
				g_Message("EE", fn_AlertMsg("017"));
				return;
			}
			else
			{
				Image0.image="";
				Image0.text="이미지가 없습니다.";
			}
		}		
	}
}
// 자재갖고오기 콜백
function fn_call_back_T0_jajea(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==1)
		{
			Copy(ds_tempItem,"ds_ItemList");
			ds_ItemList.clearData();
			if(grd_List.formatid=="StdRecipe")
			{
				for(i=0;i<ds_tempItem.getRowCount();i++)
				{
					ds_ItemList.addRow();
					ds_ItemList.copyRow(i,ds_tempItem,i);
					ds_ItemList.setColumn(i,"RECIPE_CD","");
				}
			}
			else
			{
				for(i=0;i<ds_tempItem.getRowCount();i++)
				{
					ds_ItemList.addRow();
					ds_ItemList.copyRow(i,ds_tempItem,i);
					ds_ItemList.setColumn(i,"NEW_RECIPE_SEQ","");
				}				
			}
			
		}
		//ds_ItemList.AddRow();
		ed_wonga.value=ds_ItemList.getSum("PERSON_PRICE");
		//조리법갖고오기
		fn_Jory();
	}	
}
// 조리법갖고오기 콜백
function fn_call_back_T0_jory(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==1)
		{
			Copy(ds_tempCook,"ds_CookMethod");
			ds_CookMethod.clearData();
			if(grd_List.formatid=="StdRecipe")
			{			
				for(i=0;i<ds_tempCook.getRowCount();i++)
				{
					ds_CookMethod.addRow();
					ds_CookMethod.copyRow(i,ds_tempCook,i);
				}
				ds_Recipe.setColumn(0,"RECIPE_CD","");//가장 마지막 조리법 처리후 레시피코드 리셋
			}
			else
			{
				for(i=0;i<ds_tempCook.getRowCount();i++)
				{
					ds_CookMethod.addRow();
					ds_CookMethod.copyRow(i,ds_tempCook,i);
				}
				ds_Recipe.setColumn(0,"NEW_RECIPE_SEQ","");//가장 마지막 조리법 처리후 미확정레시피순번 리셋				
			}
		}
	}	
}
// phf가져오기 콜백
function fn_call_back_T0_phf(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
	}	
}
// 레시피코드로 참조자료 조회
function fn_T0_Search(gbn,RECIPE)
{
    if( gfn_length(gfn_trim(RECIPE))==0 || gfn_trim(RECIPE)==null )
    {
		// 이루틴은 무조건 레시피 명이 들어와야 합니다.
		return;
    }
	v_ImgNM="";
	
	v_gbn=gbn;
	v_RECIPE=RECIPE;
	ds_cond.clearData();
	ds_cond.addRow();
	//ds_cond.SetColumn(0,"RECIPE_NAME",RECIPE);
	ds_cond.setColumn(0,"RECIPE_CD",RECIPE);
	fsp_clear(this);
	ds_Recipe.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S014");
	fsp_callService(this,"","","ds_cond=ds_cond","ds_Recipe=ds_Recipe","","fn_call_back_T0_search","",true);
}
//	레시피자재참조자료 조회
function fn_Jajea()
{

		fsp_clear(this);
		ds_ItemList.clearData();
		fsp_addSearch(this,"fs/fsr:FSR00010E_S010");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_ItemList=ds_ItemList","","fn_call_back_T0_jajea","",true);	


}
//	레시피조리법 참조자료조회
function fn_Jory()
{
		fsp_clear(this);
		ds_CookMethod.clearData();
		fsp_addSearch(this,"fs/fsr:FSR00010E_S011");
		fsp_callService(this,"","","ds_cond=ds_cond","ds_CookMethod=ds_CookMethod","","fn_call_back_T0_jory","",true);	

	fn_Phf();
}
function fn_Phf()
{
	fsp_clear(this);
	ds_phf.clearData();

	fsp_addSearch(this,"fs/fsr:FSR00010E_S037");

	fsp_callService(this,"","","ds_cond=ds_cond","ds_phf=ds_phf","","fn_call_back_T0_phf","",true);
}
function rdo_Detail_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	switch(e.postindex)
	{
		case 0:
			div_Material.url="U_FSR::FSR00014V.xfdl";
			break;
		case 1:
//			div_Material.url="U_FSR::FSR00015V.xfdl";
//			break;
//		case 2:
			div_Material.url="U_FSR::FSR00016V.xfdl";
			break;
        default :
            break;
	}	
}

function btn_ratio_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		g_Message("EE","HMR은 조회만 가능합니다.");
		return ;
	}	
	var v_NQ=0;
	if(ed_ratio.visible==true)
	{
		//화면에서 가리고 반영하기
		ed_ratio.visible=false;
		st_Ratio.visible=false;
		if(gfn_length(gfn_trim(ed_ratio.value))==0 || gfn_trim(ed_ratio.value)==null )
		{
			return;
		}
		for(i=0;i<ds_ItemList.getRowCount();i++)
		{
			v_NQ=Math.round((toNumber(ds_ItemList.getColumn(i,"NEED_QTY"))*toNumber(ed_ratio.value))/100,2);
			ds_ItemList.setColumn(i,"NEED_QTY",v_NQ);
		}
		ed_ratio.value="";
	}
	else
	{
		ed_ratio.visible=true;
		st_Ratio.visible=true;
	}
}
// PHF관리 ds_recipe에 반영하기
function ds_phf_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	switch(e.row)
	{
		case 0:
			if(e.columnid=="PHF")
			{
				ds_Recipe.setColumn(0,"PHF_MGMT1",e.newvalue);
			}
			break;
		case 1:
			if(e.columnid=="PHF")
			{
				ds_Recipe.setColumn(0,"PHF_MGMT2",e.newvalue);
			}
			break;
		case 2:
			if(e.columnid=="PHF")
			{			
				ds_Recipe.setColumn(0,"PHF_MGMT3",e.newvalue);
			}
			break;
		case 3:
			if(e.columnid=="PHF")
			{			
				ds_Recipe.setColumn(0,"PHF_MGMT4",e.newvalue);
			}
			break;
		case 4:
			if(e.columnid=="PHF")
			{		
				ds_Recipe.setColumn(0,"PHF_MGMT5",e.newvalue);
			}
			break;
        default :
            break;
	}
	var v_1=ds_Recipe.getColumn(0,"PHF_MGMT1");
	var v_2=ds_Recipe.getColumn(0,"PHF_MGMT2");
	var v_3=ds_Recipe.getColumn(0,"PHF_MGMT3");
	var v_4=ds_Recipe.getColumn(0,"PHF_MGMT4");
	var v_5=ds_Recipe.getColumn(0,"PHF_MGMT5");
	
	if( v_1=='Y' && v_2=='N')
	{
		ds_Recipe.setColumn(0,"PHF","Y");
	}
	else
	{
		if(v_1=='Y' || v_2=='N')
		{
			if(v_3=='Y' || v_4=='Y' || v_5=='Y')
			{
				ds_Recipe.setColumn(0,"PHF","Y");
			}
			else
			{
				ds_Recipe.setColumn(0,"PHF","N");
			}
		}
		else
		{
			ds_Recipe.setColumn(0,"PHF","N");
		}
	}
	
}

function btn_RecipePop_OnClick(obj:Button, e:ClickEventInfo)
{
 // 신규추가만 확인 fsr_std_recipe_mst에 존재하는지만 확인하고 신규추가 입력은 막지 않습니다.
 // 단 표준레시피로 확정 이동시 표준레시피에 존해하면 이동확정불가
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	//trace("초기화 v_gbn="+v_gbn);
	if(v_gbn==0)
	{
		return;
	}
	if(cbo_RecipeClass.index<1)
	{
		//alert(fn_AlertMsg("044"));
		g_Message("EE", fn_AlertMsg("044"));
		return;
	}
	if(gfn_length(gfn_trim(ed_RecipeNM.value))==0 || gfn_trim(ed_RecipeNM.value)==null )
	{
		//alert(fn_AlertMsg("009"));
		g_Message("EE", fn_AlertMsg("009"));
		return;
	}
	ds_input.clear();
	ds_input.addColumn("RECIPE_NAME","STRING");
	ds_input.addColumn("RECIPE_CLASS","STRING");
	ds_input.addRow();
	ds_input.setColumn(0,"RECIPE_NAME",gfn_trim(ed_RecipeNM.value));
	ds_input.setColumn(0,"RECIPE_CLASS",gfn_trim(cbo_RecipeClass.value));
	http.Sync=true;
	fsp_clear(this);
	ds_Valid.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S016");
	fsp_callService(this,"","","ds_input=ds_input","ds_Valid=ds_Valid","","fn_call_back","",true);
	http.Sync=false;
		
	if(ds_Valid.getRowCount()>0)
	{
		//alert(fn_AlertMsg("010"));
		g_Message("EE", fn_AlertMsg("010"));
		ed_RecipeNM.value="";
		return;
	}
	else
	{
		//alert(fn_AlertMsg("011"));
		g_Message("EE", fn_AlertMsg("011"));
		return;
	}
} 
function ds_ItemList_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var v_EQ=0;	// EDIBLE_QTY		가식부량 1인소요량*폐기율==>NEED_QTY*(100-disuse_rate)
	var v_PP=0; // PERSON_PRICE 	인원가	자재g당단가*1인소요량==>GRAM_PRICE*NEED_QTY
	var v_CC=0; // CAL_CALC			에너지    100g:기본에너지=가식부량:계산할에너지==>CAL_CALC=(CAL*EDIBLE_QTY)/100

	switch(e.columnid)
	{
		// case "PERSON_PRICE":	
			// ed_wonga.value=ds_ItemList.Sum("PERSON_PRICE");
			// break;
		// case "EDIBLE_QTY":
			// v_CC=round((ds_ItemList.GetColumn(ds_ItemList.row,"CAL")*ds_ItemList.GetColumn(ds_ItemList.row,"NEED_QTY")*((100-ds_ItemList.GetColumn(ds_ItemList.row,"disuse_rate"))/100))/100,2);
			// ds_ItemList.SetColumn(ds_ItemList.row,"CAL_CALC",v_CC);			
			// break;
		// case "NEED_QTY":	// 1인소요량
			// v_PP=round(ds_ItemList.GetColumn(ds_ItemList.row,"GRAM_PRICE")*ds_ItemList.GetColumn(ds_ItemList.row,"NEED_QTY"),2);
			// ds_ItemList.SetColumn(ds_ItemList.row,"PERSON_PRICE",v_PP);
			// v_EQ=round(ds_ItemList.GetColumn(ds_ItemList.row,"NEED_QTY")*((100-ds_ItemList.GetColumn(ds_ItemList.row,"disuse_rate"))/100),2);
			// ds_ItemList.SetColumn(ds_ItemList.row,"EDIBLE_QTY",v_EQ);			
			// break;
		case "PERSON_PRICE":	
			ed_wonga.value=ds_ItemList.getSum("PERSON_PRICE");
			break;
		case "EDIBLE_QTY":
			v_CC=Math.round((ds_ItemList.getColumn(e.row,"CAL")*ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"disuse_rate"))/100))/100,2);
			ds_ItemList.setColumn(e.row,"CAL_CALC",v_CC);			
			break;
		case "NEED_QTY":	// 1인소요량
			v_PP=Math.round(ds_ItemList.getColumn(e.row,"GRAM_PRICE")*ds_ItemList.getColumn(e.row,"NEED_QTY"),0);
			ds_ItemList.setColumn(e.row,"PERSON_PRICE",v_PP);
			v_EQ=Math.round(ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"disuse_rate"))/100),2);
			ds_ItemList.setColumn(e.row,"EDIBLE_QTY",v_EQ);			
			break;	
        default :
            break;
	}
}

function btn_CustPop_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
// 사원조회
	var arg  = {NM_KOR:gfn_trim(Edit0.value)};
	var v_rtn=gfn_dialog("", "U_FSR::FSR00018P.xfdl",arg);
	var v_result=gfn_split(v_rtn,";");// 0 사번 1 성명 2 영문명 3 주민번호
	
	if( gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
	{
		return;
	}
	
	ds_Recipe.setColumn(0,"SABUN",v_result[0]);
	ds_Recipe.setColumn(0,"NM_KOR",v_result[1]);	
}

function grd_jajea_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		return;
	}
	var ActionVal="";
	var v_rtn="";
	var v_result="";
	ds_ItemList.rowposition=e.row;
	return;
	
	
	switch(e.cell)
	{
		case 2:
			ds_ItemList.deleteRow(ds_ItemList.rowposition);
			break;
		case 4:
			if(GetRowType(ds_ItemList,e.row)!="insert")
			{
				return;
			}
			v_rtn=gfn_dialog("", "U_FSR::FSR00014P.xfdl",{fstrPriceGbn:''});
			if(gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
			{
				return;
			}
			// 0 자재코드 ,1 자재명, 2 규격, 3 단위 ,4 금지, 5 100g에너지, 6 폐기율, 7 g당단가, 8 자재특성 9 1인소요량
			v_result=gfn_split(v_rtn,";");
			if(ds_ItemList.findRow("ITEM_CODE",v_result[0])!=-1)
			{
				//alert(fn_AlertMsg("012"));
				g_Message("EE", fn_AlertMsg("012"));
				return;
			}
			ds_ItemList.setColumn(e.row,"ITEM_CODE",v_result[0]);
			ds_ItemList.setColumn(e.row,"ITEM_NAME",v_result[1]);
			ds_ItemList.setColumn(e.row,"ITEM_SIZE",v_result[2]);
			ds_ItemList.setColumn(e.row,"PO_UOM",v_result[3]);
			ds_ItemList.setColumn(e.row,"RESTRICT_YN",v_result[4]);			
			ds_ItemList.setColumn(e.row,"CAL",v_result[5]);
			ds_ItemList.setColumn(e.row,"DISUSE_RATE",v_result[6]);
			ds_ItemList.setColumn(e.row,"GRAM_PRICE",v_result[7]);
			ds_ItemList.setColumn(e.row,"FEATURE_NAME",v_result[8]);
			ds_ItemList.setColumn(e.row,"NEED_QTY",v_result[9]);
			break;
		case 13:
			v_rtn=gfn_dialog("", "U_FSR::FSR00015P.xfdl","");
			if(gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
			{
				return;
			}			
			v_result=gfn_split(v_rtn,";");	// 0 그룹코드 1 그룹명 2 상세코드 3 상세코드명
			ds_ItemList.setColumn(e.row,"CUT_SPEC",v_result[2]);
			ds_ItemList.setColumn(e.row,"CUT_SPEC_NAME",v_result[3]);	
			break;
		default :
			break;
	}	
}

function grd_jajea_OnKeyDown(obj:Grid, e:KeyEventInfo)
{
	return;
	if(e.keycode==13 && grd_jajea.getCellPos()!=9)
	{
		fn_addItem();
	}
	else if(e.keycode==13 && grd_jajea.getCellPos()==9)
	{
		grd_jajea.moveToNextCell();
	}
}
function fn_addItem()
{
	return;
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		g_Message("EE","HMR은 조회만 가능합니다.");
		return false;
	}
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(grd_List.formatid=="StdRecipe")
	{
		if(ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0 || gfn_trim(ITEM_CODE)==null")!=-1)
		{
			return;
		}
		ds_ItemList.addRow();
		ds_ItemList.setColumn(ds_ItemList.rowposition,"RECIPE_CD",ds_Recipe.getColumn(0,"RECIPE_CD"));
		ds_ItemList.setColumn(ds_ItemList.rowposition,"NEED_QTY",1);// 이베트 처리 문제로 1세팅
		// ds_ItemList.SetColumn(ds_ItemList.row,"PHOTO_PATH",ds_Recipe.GetColumn(0,"PHOTO_PATH"));
		// ds_ItemList.SetColumn(ds_ItemList.row,"SPHOTO_PATH",ds_Recipe.GetColumn(0,"SPHOTO_PATH"));
	}
	else
	{
		if(ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0 || gfn_trim(ITEM_CODE)==null")!=-1)
		{
			return;
		}
		ds_ItemList.addRow();
		ds_ItemList.setColumn(ds_ItemList.rowposition,"NEW_RECIPE_SEQ",ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ"));
		ds_ItemList.setColumn(ds_ItemList.rowposition,"NEED_QTY",1);// 이베트 처리 문제로 1세팅
		// ds_ItemList.SetColumn(ds_ItemList.row,"PHOTO_PATH",ds_Recipe.GetColumn(0,"PHOTO_PATH"));
		// ds_ItemList.SetColumn(ds_ItemList.row,"SPHOTO_PATH",ds_Recipe.GetColumn(0,"SPHOTO_PATH"));			
	}
	
	/* 자재추가시 자동 자재추가 팝업 호출 */
	grd_jajea_OnCellClick(grd_jajea, ds_ItemList.rowposition, 4);
}
function btn_RecipeElement_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	
	var v_arg = {gbn:v_gbn,IN_RECIPE_CD:ds_Recipe.getColumn(0,"RECIPE_CD")};

	
	gfn_dialog("", "U_FSR::FSR00012P.xfdl", v_arg);
}

function ds_Recipe_OnLoadCompleted(obj:Dataset, e:DSLoadEventInfo)
{
	if(v_gbn==1)// 0 조회 일대 1 신규추가 일때
	{
		ds_phf.setColumn(0,"PHF_MGMT1", ds_Recipe.getColumn(0,"PHF_MGMT1"));
		ds_phf.setColumn(0,"PHF_MGMT2", ds_Recipe.getColumn(0,"PHF_MGMT2"));
		ds_phf.setColumn(0,"PHF_MGMT3", ds_Recipe.getColumn(0,"PHF_MGMT3"));
		ds_phf.setColumn(0,"PHF_MGMT4", ds_Recipe.getColumn(0,"PHF_MGMT4"));
		ds_phf.setColumn(0,"PHF_MGMT5", ds_Recipe.getColumn(0,"PHF_MGMT5"));
		ds_phf.applyChange();
		ds_phf.reset();
	}

}

function fn_filter()
{
	var strCode1=ds_Recipe.getColumn(0,"RECIPE_CLASS");
	var strCode2=ds_Recipe.getColumn(0,"RECIPE_TYPE");
	switch(gfn_trim(strCode1))
	{
		case "H":
			ds_RecipeType.filter("SET1=='YN' || SET1=='Y'");
			break;
		case "":
			ds_RecipeType.filter("");
			break;
		default:
			ds_RecipeType.filter("SET1=='YN' || SET1=='N'"); 
			break;
	}
	switch(gfn_trim(strCode2))
	{
		case "":
			ds_CClass.filter("");
			break;
		default:
			ds_CClass.filter("gfn_length(SET1)==0 || SET1=='"+strCode2+"'");
			break;
	}
}
function common_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(e.postindex==0)
	{
		obj.index=e.preindex;
	}
	if(obj.name=="Combo2")
	{
		if(cbo_RecipeType.index==-1 || cbo_RecipeType.index==0)
		{
			obj.index=e.preindex;
		}
	}
	if(obj.name=="cbo_RecipeType")
	{
		if(e.postindex==0)
		{
			ds_CClass.filter(""); // ds_RecipeType.UnFilter();
		}
		else
		{
			ds_CClass.filter("gfn_length(SET1)==0 || SET1=='"+e.postvalue+"'");
		}
	}
}
/******************************************************
 *  서버로 파일 삭제 처리 
 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
 * @param  serverFileName 서버의 파일명 
 * @param  isNeedRtn 처리 결과 (TRUE : 삭제 결과 확인시  FALSE:확인불필요
 * @return  필요시 처리 성공 여부 : true / 그외 false 
 ******************************************************/
function btn_ImgDelete_OnClick(obj:Button, e:ClickEventInfo)
{
	return;
	var v_path="";
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(gfn_dsIsUpdated(ds_Recipe)==true || gfn_dsIsUpdated(ds_ItemList)==true || gfn_dsIsUpdated(ds_CookMethod)==true)
	{
		g_Message("02",fn_AlertMsg("047"));
		return;
	}	
	if(grd_List.formatid=="StdRecipe")
	{
		v_path="FSR_STD_RECIPE_MST";
	}
	else
	{
		v_path="FSR_NEW_RECIPE_MST";
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))>0)
	{
		if(g_Confirm("01",fn_AlertMsg("050"))==false)
		{
			return;
		}
	//	trace(ds_Recipe.GetColumn(0,"SPHOTO_PATH"));
		if(fsp_fileDelete(v_path, ds_Recipe.getColumn(0,"SPHOTO_PATH"),true))
		{
			ds_Recipe.setColumn(0,"SPHOTO_PATH","");
			ds_Recipe.setColumn(0,"PHOTO_PATH","");
			Image0.image="";
			Image0.text="이미지가 없습니다.";
			fn_T0_Save();
		}
		else
		{
			if(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH"))==null || gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))==0)
			{
				return;
			}
			else
			{
				//alert(fn_AlertMsg("017"));			
				g_Message("EE", fn_AlertMsg("017"));
			}
			return;
		}
	}

}
/******************************************************
 *  서버로 파일 전송 처리 
 * @param  httpfileObj  http file 처리 객체  
 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
 * @param  localFilePath 로컬 경로 
 * @param  localFileName 로컬 파일명 
 * @param  sendFileName  서버에 전송하고 싶은 이름 
 * @param  fileProcType  서버에서 기존 파일을 처리하는 타입 정의  
           D - deleteFileName에 기술된 파일명이 존재할 경우만 파일 삭제 ( 기본 값 )
           A - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
               ( 파일명은 서버에 정의된 되로 타임을 추가해야 할 경우 추가한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
           U - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
               ( 파일명은 무조건 Client를 기준으로 저장한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
           N - 전송하는 파일명으로 해당 파일이 존재할 경우 저장하지 않는다. 
               ( 파일명은 무조건 Client를 기준으로 저장한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
 * @param  deleteFileName 서버에서 삭제해야 하는 파일 명
           isDelete가 true이면서 해당 파일명이 기술되어 있지 않을 경우 
           기존 파일을 삭제한다. 
 * @return  서버에 저장된 파일 정보 Array 
            0 - 성공 : S / 실패 : E 
            1 - 서버에 저장된 실제 경로 
            2 - 서버에 저장된 실제 파일명 
            3 - 서버에 저장된 파일 사이즈 
******************************************************/
function btn_ImgInsert_OnClick(obj:Button, e:ClickEventInfo)
{
	return;
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(gfn_dsIsUpdated(ds_Recipe)==true || gfn_dsIsUpdated(ds_ItemList)==true || gfn_dsIsUpdated(ds_CookMethod)==true)
	{
		g_Message("02",fn_AlertMsg("047"));
		return;
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))>0)
	{
		g_Message("EE","이미지 정보를 삭제 하고 첨부하세요.");
		return;
	}
	if(FileDialog.Open()==false)
	{
		return;
	}
	var v_filename=FileDialog.FileName;
	var v_filepath=FileDialog.FilePath;
	if(gfn_length(gfn_trim(v_filename))==0 || gfn_trim(v_filename)==null)
	{
		return;
	}
	//trace(v_filename);
	//trace(indexOf(v_filename,"."));
	var v_point_index=gfn_indexOf(v_filename,".");
	var v_ext=gfn_subStr(v_filename,v_point_index);
	//trace(v_ext);
	var v_path="";
	var v_savenm="";
	if(grd_List.formatid=="StdRecipe")
	{
		v_path="FSR_STD_RECIPE_MST";
		v_savenm=ds_Recipe.getColumn(0,"RECIPE_CD")+v_ext;
	}
	else
	{
		v_path="FSR_NEW_RECIPE_MST";
		v_savenm=ds_Recipe.getColumn(0,"NEW_RECIPE_SEQ")+v_ext;
	}
	// 파일 서버로 전송 
	var arr = fsp_fileWrite(HttpFile, v_path, v_filepath, v_filename,v_savenm,"U");  
//	var arr = fsp_fileWrite(HttpFile, "FSR_STD_RECIPE_MST", v_filepath, v_filename,"A0100001"+v_ext,"U");  
//	alert(arr );
	// 처리 결과 확인하기 
    if( arr[0] == "E" ) {
		//alert(fn_AlertMsg("018"));
		g_Message("EE", fn_AlertMsg("018"));
		return;
    }
	else
	{
		ds_Recipe.setColumn(0,"PHOTO_PATH",v_filename);
		ds_Recipe.setColumn(0,"SPHOTO_PATH",arr[2]);
		fn_T0_Save();
		/******************************************************
		 *  서버에서 실제 이미지 경로 가져오기 
		 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
		 * @param  fileName  보여줄 파일명 ( 옵션 )
		 * @return  서버 전제 url 경로
		 ******************************************************/
		 Image0.text="";
		 Image0.image=fsp_getServerDir(v_path,arr[2]);
	}
}
// 표준및 미확정 레세피 라디오 변경시 데이타셋 클리어
function fn_T0_Clear()
{
	// if(ds_Recipe.GetUpdate()		==true ||
		// ds_ItemList.GetUpdate()		==true ||
		// ds_CookMethod.GetUpdate()	==true ||
		// ds_phf.GetUpdate()			==true	)
	// {
		// if(g_Confirm("02","변경된 데이타가 있습니다.\n\n저장하시겠습니까?"))
		// {
			// fn_T0_Save();
		// }
	// } 
	ds_Recipe.clearData();
	ds_ItemList.clearData();
	ds_CookMethod.clearData();
	Image0.image="";
	Image0.text="이미지가 없습니다.";
	ed_wonga.value="";
}
/* 지원하지 않는 이벤트입니다.*/
function Image0_OnLoadError(obj,nErrorCode,strErrorMsg)
{
	Image0.text="이미지 로드에\n\n실패했습니다.";
}
function fn_ValidCheck()
{
	return;
	if(grd_List.formatid=="StdRecipe" && GetRowType(ds_Recipe,0)!="insert")
	{
		// 표준레시피 저장시 데이터 체크 
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD"))==null)
		{
			//alert(fn_AlertMsg("031"));
			g_Message("EE", fn_AlertMsg("031"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			//alert(fn_AlertMsg("031"));
			g_Message("EE", fn_AlertMsg("031"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			//alert(fn_AlertMsg("030"));
			g_Message("EE", fn_AlertMsg("030"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
		{
			//alert(fn_AlertMsg("032"));
			g_Message("EE", fn_AlertMsg("032"));
			return false;
		}		
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE"))==null)
		{
			//alert(fn_AlertMsg("033"));
			g_Message("EE", fn_AlertMsg("033"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE"))==null)
		{
			//alert(fn_AlertMsg("034"));
			g_Message("EE", fn_AlertMsg("034"));
			return false;
		}
		// 제외
		// if(ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim()==null)
		// {
			 //  //   alert(fn_AlertMsg("035"));
			// g_Message("EE", fn_AlertMsg("035"));
			// return false;
		// }
		// if(ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim()==null)
		// {
			 //  //  //alert(fn_AlertMsg("036"));
			// g_Message("EE", fn_AlertMsg("036"));
			// return false;
		// }
		// if(ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim()==null)
		// {
			 //  //  //  ///alert(fn_AlertMsg("037"));
			// g_Message("EE", fn_AlertMsg("037"));
			// return false;
		// }
		// if(ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim()==null)
		// {
			 //  //  //  //  //alert(fn_AlertMsg("038"));
			// g_Message("EE", fn_AlertMsg("038"));
			// return false;
		// }
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER"))==null)
		{
			//alert(fn_AlertMsg("039"));
			g_Message("EE", fn_AlertMsg("039"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN"))==null)
		{
			//alert(fn_AlertMsg("040"));
			g_Message("EE", fn_AlertMsg("040"));
			return false;
		}
		// if(ds_Recipe.GetColumn(0,"PHF_MGMT_YN").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"PHF_MGMT_YN").trim()==null)
		// {
			//  //  //  //  // alert(fn_AlertMsg("041"));
			// g_Message("EE", fn_AlertMsg("041"));
			// return false;
		// }
		
		if(ds_ItemList.getRowCount()==0)
		{
			//alert(fn_AlertMsg("042"));
			g_Message("EE", fn_AlertMsg("042"));
			return false;
		}
		if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
		{
			//alert(fn_AlertMsg("043"));
			g_Message("EE", fn_AlertMsg("043"));
			return false;
		}		
		
		if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
		{
			//alert(fn_AlertMsg("014"));
			g_Message("EE", fn_AlertMsg("014"));
			return false;
		}		
	}
	else
	{
		// 미확정레시피 저장시 데이터 체크 
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			//alert(fn_AlertMsg("031"));
			g_Message("EE", fn_AlertMsg("031"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
		{
			//alert(fn_AlertMsg("031"));
			g_Message("EE", "레시피 분류는 필수 입력입니다.");
			return false;
		}
		
		if(ds_ItemList.getRowCount()==0)
		{
			//alert(fn_AlertMsg("042"));
			g_Message("EE", fn_AlertMsg("042"));
			return false;
		}
		if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
		{
			//alert(fn_AlertMsg("043"));
			g_Message("EE", fn_AlertMsg("043"));
			return false;
		}		
		
		if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
		{
			//alert(fn_AlertMsg("014"));
			g_Message("EE", fn_AlertMsg("014"));
			return false;
		}
	}
	return true;
}
function fn_ValidCheck_Conf()
{
	return;
	// 미확정레시피 표준레시피로 확정시 데이터 체크 
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
	{
		//alert(fn_AlertMsg("031"));
		g_Message("EE", fn_AlertMsg("031"));
		return false;
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
	{
		//alert(fn_AlertMsg("030"));
		g_Message("EE", fn_AlertMsg("030"));
		return false;
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
	{
		//alert(fn_AlertMsg("032"));
		g_Message("EE", fn_AlertMsg("032"));
		return false;
	}		
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE"))==null)
	{
		//alert(fn_AlertMsg("033"));
		g_Message("EE", fn_AlertMsg("033"));
		return false;
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE"))==null)
	{
		//alert(fn_AlertMsg("034"));
		g_Message("EE", fn_AlertMsg("034"));
		return false;
	}
	// if(ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim()==null)
	// {
		//  //  //  //  //alert(fn_AlertMsg("035"));
		// g_Message("EE", fn_AlertMsg("035"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim()==null)
	// {
		 //  //  //alert(fn_AlertMsg("036"));
		// g_Message("EE", fn_AlertMsg("036"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim()==null)
	// {
		 //  //  //  //alert(fn_AlertMsg("037"));
		// g_Message("EE", fn_AlertMsg("037"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim()==null)
	// {
		 //  //  //  //alert(fn_AlertMsg("038"));
		// g_Message("EE", fn_AlertMsg("038"));
		// return false;
	// }
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TEMPER"))==null)
	{
		//alert(fn_AlertMsg("039"));
		g_Message("EE", fn_AlertMsg("039"));
		return false;
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"CORE_TEMPER_YN"))==null)
	{
		//alert(fn_AlertMsg("040"));
		g_Message("EE", fn_AlertMsg("040"));
		return false;
	}
	// if(ds_Recipe.GetColumn(0,"PHF_MGMT_YN").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"PHF_MGMT_YN").trim()==null)
	// {
		  //  //  // //alert(fn_AlertMsg("041"));
		// g_Message("EE", fn_AlertMsg("041"));
		// return false;
	// }
	
	if(ds_ItemList.getRowCount()==0)
	{
		//alert(fn_AlertMsg("042"));
		g_Message("EE", fn_AlertMsg("042"));
		return false;
	}
	if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
	{
		//alert(fn_AlertMsg("043"));
		g_Message("EE", fn_AlertMsg("043"));
		return false;
	}		
	
	if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
	{
		//alert(fn_AlertMsg("014"));
		g_Message("EE", fn_AlertMsg("014"));
		return false;
	}
	return true;
}
function grd_jajea_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	//TRACE(nCell);
	switch(e.cell)
	{
		case 0:
			gfn_exportExcel(grd_jajea, "sheet1");
			break;
		case 2:
			if(obj.userdata==true)
			{
				obj.userdata=false;
			}
			else
			{
				obj.userdata=true;
			}
			Sort(eval(obj.binddataset),"ITEM_CODE",obj.userdata);
			break;
		case 10:
			if(obj.userdata==true)
			{
				obj.userdata=false;
			}
			else
			{
				obj.userdata=true;
			}
			Sort(eval(obj.binddataset),"CUT_SPEC",obj.userdata);
			break;
		default:
			gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
			break;
	}
}


function ds_ItemList_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		//trace("3<======");
		g_Message("EE","HMR은 조회만 가능합니다.");
		return false;
	}	
	if(e.columnid=="NEED_QTY")
	{
		if(toNumber(e.newvalue) <= 0 )
		{
			g_Message("EE","0보다 큰값을 입력하세요.");
			return false;
		}
	}
}

function Button0_OnClick(obj:Button, e:ClickEventInfo)
{
	if(GetRowType(ds_Recipe,0)!="insert" && ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H")
	{
		return;
	}
	
	if(chk_Dtlyn.value=="Y" || Checkbox0.value=="Y" || Checkbox1.value=="Y" || Checkbox2.value=="Y")
	{
		chk_Dtlyn.value=false;
		Checkbox0.value=false;
		Checkbox1.value=false;
		Checkbox2.value=false;
	}
	else
	{
		chk_Dtlyn.value=true;
		Checkbox0.value=true;
		Checkbox1.value=true;
		Checkbox2.value=true;
	
	} 
}

function ds_CookMethod_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
	{
		//trace("1<======");
		g_Message("EE","HMR은 조회만 가능합니다.");
		return false;
	}
}

function ds_Recipe_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(v_gbn==0)  // strColumnID=="RECIPE_CLASS" && 
	{
		if(ds_Recipe.getColumn(0,"RECIPE_CLASS")=="H" )
		{
			//trace("2<======");
			g_Message("EE","HMR은 조회만 가능합니다.");
			return false;
		}
	}
}

function ds_Recipe_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid=="PHF_MGMT_YN")
	{
		if(e.newvalue=="N")
		{
			for(i=0;i<5;i++)
			{
				ds_phf.setColumn(i,"PHF","N");
			}
		}
	}
}
function fn_Update_Chk()
{
	if(gfn_dsIsUpdated(ds_Recipe)==true ||
		gfn_dsIsUpdated(ds_ItemList)==true ||
		gfn_dsIsUpdated(ds_CookMethod)==true ||
		gfn_dsIsUpdated(ds_phf)==true	)
	{
		trace(gfn_dsIsUpdated(ds_Recipe)+"/"+gfn_dsIsUpdated(ds_ItemList)+"/"+gfn_dsIsUpdated(ds_CookMethod)+"/"+gfn_dsIsUpdated(ds_phf));
		if(g_Confirm("02","변경된 데이타가 있습니다.\n\n저장하시겠습니까?"))
		{
			fn_Trans();
			return true;
		}
		else
		{
			return false;
		}
	}
	else
	{
		return false;
	}
}

function common_OnKeyDown(obj, e:KeyEventInfo)
{
	if(e.keycode==13)
	{
		switch(obj.name)
		{
			case "Edit0":				
				btn_CustPop.click();
				break;
			default :
				break;
		}
		var strObj=GetNextComponent(null);
		strObj.setFocus();
	}

}

function Image0_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	pdiv_imgZoom.Image0.image=Image0.image;
	var nX = system.clientToScreenX(Image0,Image0.position.width); // Popup Button의 화면상의 X좌표 얻어오기
	var nY = system.clientToScreenY(Image0,50);	// Popup Button의 화면상의 Y좌표 얻어오기	
	
	pdiv_imgZoom.trackPopup(nX, nY+3);
}

function pdiv_imgZoom_Image0_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	pdiv_imgZoom.closePopup();
}
function Image0_OnMouseOut(obj:ImageViewer, e:MouseEventInfo)
{
	pdiv_imgZoom.closePopup();	
}
function btn_add_OnClick(obj:Button, e:ClickEventInfo)
{
	return;
	fn_addItem();
}

function ds_CookMethod_OnRowPosChanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	// if(ds_CookMethod.GetUpdate()==true)
	// {
		// for(i=0;i<ds_CookMethod.RowCount();i++)
		// {
			// if(ds_CookMethod.GetRowType(i)=="insert")
			// {
				// ds_CookMethod.DeleteRow(i);
				// return;
			// }
		// }
	// }
}

function grd_jajea_OnMouseOver(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row>=0)
	{
		if(ds_ItemList.getColumn(e.row,"RESTRICT_YN")=="Y")
		{
			grd_jajea.tooltiptext="금지기간:"+ds_ItemList.getColumn(e.row,"RESTRICT_START")+"~"+ds_ItemList.getColumn(e.row,"RESTRICT_END")+"\n금지사유:"+ds_ItemList.getColumn(e.row,"RESTRICT_REASON");
		}
		else
		{
			grd_jajea.tooltiptext="";
		}
	}
	else
	{
		grd_jajea.tooltiptext="";
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_color(nRow)
 * 기ㅡㅡㅡ능 : 자재명에 칼라 적용
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_color(nRow)
{
	// 불용자재
	if(ds_ItemList.getColumn(nRow, "MTG_UNS") == 'UK' || ds_ItemList.getColumn(nRow, "MTG_STP") == 'TK')
	{
		return "#FFAA9C";
	}

	// 금지 자재
	var sMenuDate = gfn_trim(ds_ItemList.getColumn(nRow, "TODAY"));
	if( sMenuDate >= ds_ItemList.getColumn(nRow,"RESTRICT_START") &&
		sMenuDate <= ds_ItemList.getColumn(nRow,"RESTRICT_END") )
	{
		if(sMenuDate >= ds_ItemList.getColumn(nRow,"CNL_START") &&
		   sMenuDate <= ds_ItemList.getColumn(nRow,"CNL_END") )
		{
			return "default";
		}
		else
		{
			return "khaki";
		}
	}
	return "default";
}

function ed_ratio_oneditclick(obj:Edit,  e:EditClickEventInfo)
{
	
}

function rdo_Detail_onitemclick(obj:Radio, e:RadioMouseEventInfo)
{
	
}
]]></Script>
  </Form>
</FDL>
