<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="ProposalDtl" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 780" titletext="품의서 작성" scrollbars="autoboth" onload="form_onload" visible="true" dragscrolltype="both" onclose="ProposalDtl_onclose">
    <Layouts>
      <Layout>
        <Static id="Static39" class="sta_WFDA_Labelbg" position="absolute 17 311 1237 338" anchor="left top"/>
        <Static id="Static40" class="sta_WFDA_Labelbg" position="absolute 17 337 1237 364" anchor="left top"/>
        <Static id="Static41" class="sta_WFDA_Labelbg" position="absolute 17 363 1237 390" anchor="left top"/>
        <Static id="Static43" class="sta_WFDA_Labelbg" position="absolute 17 389 1237 416" anchor="left top"/>
        <Static id="Static11" class="sta_WFDA_Labelbg" position="absolute 16 160 1237 208" anchor="left top"/>
        <Static id="Static10" class="sta_WFDA_Labelbg" position="absolute 16 134 1237 161" anchor="left top"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 1027" anchor="top right"/>
        <Static id="Static31" class="sta_WFDA_Labelbg" position="absolute 16 56 1237 83" anchor="left top"/>
        <Static id="Static49" class="sta_WFDA_Labelbg" position="absolute 16 30 1237 57" anchor="left top"/>
        <Static id="Static67" class="sta_WFDA_Labelbg" position="absolute 16 82 1237 109" anchor="left top"/>
        <Static id="Static60" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 656 450 671" anchor="left top"/>
        <Static id="Static07" class="sta_WFDA_Labelbg" position="absolute 16 259 1237 286" anchor="left top"/>
        <Static id="Static18" class="sta_WFDA_Labelbg" position="absolute 16 415 1237 463" anchor="left top"/>
        <Tab id="Tab00" taborder="70" tabindex="0" scrollbars="autoboth" position="absolute 15 671 1237 1014" style="showextrabutton:false;" anchor="left top right">
          <Tabpages>
            <Tabpage id="tabpage1" text="품목">
              <Layouts>
                <Layout>
                  <Grid id="grd_itemList" taborder="3" binddataset="ds_itemList" autoenter="select" useinputpanel="false" cellsizingtype="none" position="absolute 10 31 1210 303" anchor="all" oncellclick="grd_itemList_oncellclick" onexpandup="grd_itemList_onexpandup">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="42"/>
                          <Column size="105"/>
                          <Column size="348"/>
                          <Column size="156"/>
                          <Column size="73"/>
                          <Column size="80"/>
                          <Column size="80"/>
                          <Column size="87"/>
                          <Column size="80"/>
                          <Column size="97"/>
                          <Column size="80"/>
                          <Column size="89"/>
                          <Column size="77"/>
                          <Column size="70"/>
                          <Column size="76"/>
                          <Column size="89"/>
                          <Column size="82"/>
                          <Column size="78"/>
                          <Column size="76"/>
                          <Column size="69"/>
                          <Column size="85"/>
                          <Column size="75"/>
                          <Column size="90"/>
                          <Column size="140"/>
                          <Column size="120"/>
                          <Column size="149"/>
                          <Column size="110"/>
                          <Column size="128"/>
                          <Column size="250"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="품목코드"/>
                          <Cell col="2" text="품목명"/>
                          <Cell col="3" text="HS코드"/>
                          <Cell col="4" text="과세여부"/>
                          <Cell col="5" text="단위"/>
                          <Cell col="6" text="수량"/>
                          <Cell col="7" text="중량"/>
                          <Cell col="8" edittype="none" text="expr:fv_poType=='10'? '단가(USD)':'단가'"/>
                          <Cell col="9" text="expr:fv_poType=='10'? &quot;원물금액(USD)&quot;:&quot;원물금액&quot;"/>
                          <Cell col="10" text="수수료"/>
                          <Cell col="11" text="창고료"/>
                          <Cell col="12" text="금리"/>
                          <Cell col="13" text="관세율"/>
                          <Cell col="14" text="매입단가"/>
                          <Cell col="15" displaytype="number" edittype="masknumber" style="align:center;" text="매입액"/>
                          <Cell col="16" text="매출단가"/>
                          <Cell col="17" text="매출액"/>
                          <Cell col="18" text="매출이익액"/>
                          <Cell col="19" text="매출이익률"/>
                          <Cell col="20" text="직접이익액"/>
                          <Cell col="21" text="직접이익률"/>
                          <Cell col="22" text="BL 대금(\)"/>
                          <Cell col="23" text="통관 및 부대비용(\)"/>
                          <Cell col="24" text="단위당 OFFER價"/>
                          <Cell col="25" text="단위당 OFFER價 比"/>
                          <Cell col="26" text="단위당 도매價"/>
                          <Cell col="27" text="단위당 도매價 比"/>
                          <Cell col="28" text="비고"/>
                        </Band>
                        <Band id="body">
                          <Cell style="align: ;" text="bind:proposalSeq" expr="currow+1"/>
                          <Cell col="1" displaytype="text" edittype="expand" style="align:left;" text="bind:itemCd" expandshow="show" expandsize="21"/>
                          <Cell col="2" displaytype="normal" edittype="none" style="align:left;" text="bind:itemNm"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="align:left;" text="bind:hsCd"/>
                          <Cell col="4" displaytype="combo" edittype="combo" text="bind:taxYn"/>
                          <Cell col="5" displaytype="combo" edittype="combo" text="bind:unit"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" style="align:right;" text="bind:quantity" mask="###,###,###,##0.##" editlimitbymask="integer"/>
                          <Cell col="7" displaytype="number" edittype="masknumber" text="bind:wgt" mask="#,##0.00"/>
                          <Cell col="8" displaytype="number" edittype="masknumber" style="align:right;" text="bind:uprice" mask="#,##0.00"/>
                          <Cell col="9" displaytype="number" edittype="masknumber" style="align:right;" text="bind:wonwtrAmt" mask="expr:fv_poType=='10'? '#,##0.00':'#,##0'"/>
                          <Cell col="10" displaytype="number" edittype="masknumber" style="align:right;" text="bind:comm" mask="#,##0.##"/>
                          <Cell col="11" displaytype="number" edittype="masknumber" text="bind:whCost" mask="expr:fv_poType=='10'? '#,##0.00':'#,##0'"/>
                          <Cell col="12" displaytype="number" edittype="masknumber" text="bind:intRate"/>
                          <Cell col="13" displaytype="number" edittype="masknumber" text="bind:gvrntaxRate" mask="#,##0.000"/>
                          <Cell col="14" displaytype="number" edittype="masknumber" text="bind:buyPrice" mask="#,##0.##"/>
                          <Cell col="15" displaytype="number" edittype="masknumber" text="bind:buyAmt" mask="#,##0.##"/>
                          <Cell col="16" displaytype="number" edittype="masknumber" text="bind:salsUprice" mask="#,##0.##"/>
                          <Cell col="17" displaytype="number" edittype="masknumber" text="bind:salsAmt" mask="#,##0.##"/>
                          <Cell col="18" displaytype="number" edittype="masknumber" text="bind:salsGainAmt" mask="#,##0.##"/>
                          <Cell col="19" displaytype="number" edittype="masknumber" text="bind:salsGainRat" mask="#,##0.0"/>
                          <Cell col="20" displaytype="number" edittype="masknumber" text="bind:drctGainAmt" mask="#,##0.##"/>
                          <Cell col="21" displaytype="number" edittype="masknumber" text="bind:drctGainRat" mask="#,##0.0"/>
                          <Cell col="22" displaytype="number" edittype="masknumber" text="bind:expectBlPaym" mask="#,##0.##"/>
                          <Cell col="23" displaytype="number" edittype="masknumber" text="bind:entryOtherAmt" mask="#,##0.##"/>
                          <Cell col="24" displaytype="number" edittype="masknumber" text="bind:offer" mask="#,##0.00"/>
                          <Cell col="25" displaytype="text" edittype="text" style="align:right;" text="bind:offer2"/>
                          <Cell col="26" displaytype="number" edittype="masknumber" text="bind:wholeSale" mask="#,##0"/>
                          <Cell col="27" displaytype="text" edittype="text" style="align:right;" text="bind:wholeSale2"/>
                          <Cell col="28" displaytype="text" edittype="text" style="align:left;" text="bind:remark"/>
                        </Band>
                        <Band id="summary">
                          <Cell colspan="6" displaytype="number" text="합계" taborder="undefined"/>
                          <Cell col="6" displaytype="number" edittype="masknumber" text="expr:getSum('quantity')" mask="#,##0.##"/>
                          <Cell col="7" displaytype="number" text="expr:getSum('wgt')" mask="#,##0.00"/>
                          <Cell col="8" displaytype="number"/>
                          <Cell col="9" displaytype="number" text="expr:getSum('wonwtrAmt')" mask="#,##0.00"/>
                          <Cell col="10" displaytype="number" text="expr:getSum('comm')" mask="#,##0.##"/>
                          <Cell col="11" displaytype="number" text="expr:getSum('whCost')" mask="#,##0.00"/>
                          <Cell col="12" displaytype="number" text="expr:getSum('intRate')"/>
                          <Cell col="13"/>
                          <Cell col="14" displaytype="number" text="expr:Math.round(getAvg('buyPrice'), 0)" mask="#,##0"/>
                          <Cell col="15" displaytype="number" text="expr:getSum('buyAmt')" mask="#,##0.##"/>
                          <Cell col="16" displaytype="number" text="expr:Math.round(getAvg('salsUprice'), 0)" mask="#,##0"/>
                          <Cell col="17" displaytype="number" text="expr:getSum('salsAmt')" mask="#,##0.##"/>
                          <Cell col="18" displaytype="number" text="expr:getSum('salsGainAmt')" mask="#,##0.##"/>
                          <Cell col="19" displaytype="number" expr="expr:Math.round(getSum('salsGainAmt') / getSum('salsAmt')*100  , 1)" mask="#,##0.0#"/>
                          <Cell col="20" displaytype="number" text="expr:getSum('drctGainAmt')" mask="#,##0.##"/>
                          <Cell col="21" displaytype="number" expr="expr:Math.round(getSum('drctGainAmt') / getSum('salsAmt')*100  , 1)" mask="#,##0.0#"/>
                          <Cell col="22" displaytype="number" text="expr:getSum('expectBlPaym')" mask="#,##0.##"/>
                          <Cell col="23" displaytype="number" text="expr:getSum('entryOtherAmt')" mask="#,##0.##"/>
                          <Cell col="24" displaytype="number"/>
                          <Cell col="25" displaytype="number"/>
                          <Cell col="26" displaytype="number"/>
                          <Cell col="27" displaytype="number"/>
                          <Cell col="28"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static22" text="품목 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Button id="Button00" taborder="4" class="btn_WF_GrdPlus" position="absolute 1172 8 1190 28" anchor="top right" onclick="fn_addRow1"/>
                  <Button id="Button01" taborder="5" class="btn_WF_GrdMinus" position="absolute 1192 8 1210 28" anchor="top right" onclick="fn_deleteRow"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="지불조건">
              <Layouts>
                <Layout>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static22" text="Payment Agreement 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Static id="Static63" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1 515 11 830"/>
                  <Static id="Static44" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1226 515 1236 830"/>
                  <Static id="Static64" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 11 834 1226 844"/>
                  <Grid id="grd_payList" taborder="3" binddataset="ds_payList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 10 31 1210 303" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="40"/>
                          <Column size="202"/>
                          <Column size="194"/>
                          <Column size="77"/>
                          <Column size="84"/>
                          <Column size="78"/>
                          <Column size="85"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                          <Row size="24" band="summ"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="지불조건명"/>
                          <Cell col="2" text="지불예정금"/>
                          <Cell col="3" text="작성자"/>
                          <Cell col="4" text="작성일자"/>
                          <Cell col="5" text="수정자"/>
                          <Cell col="6" text="수정일자"/>
                        </Band>
                        <Band id="body">
                          <Cell expr="expr:currow+1"/>
                          <Cell col="1" displaytype="combo" edittype="combo" text="bind:payCondCd"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" editfilter="integer" text="bind:payExpectAmt" mask="expr:fv_poType=='10'? '#,##0.00':'#,##0'"/>
                          <Cell col="3" text="bind:cuser"/>
                          <Cell col="4" displaytype="date" text="bind:cdate" calendardisplaynulltype="none"/>
                          <Cell col="5" text="bind:uuser"/>
                          <Cell col="6" displaytype="date" text="bind:udate" calendardisplaynulltype="none"/>
                        </Band>
                        <Band id="summary">
                          <Cell colspan="2" style="align:center;" text="합계" taborder="undefined"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" text="expr:getSum('payExpectAmt')" mask="#,##0.00"/>
                          <Cell col="3"/>
                          <Cell col="4"/>
                          <Cell col="5"/>
                          <Cell col="6"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="Button02" taborder="4" class="btn_WF_GrdPlus" position="absolute 1172 8 1190 28" anchor="top right" onclick="fn_addRow2"/>
                  <Button id="Button03" taborder="5" class="btn_WF_GrdMinus" position="absolute 1192 8 1210 28" anchor="top right" onclick="fn_deleteRow2"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage3" text="패널티">
              <Layouts>
                <Layout width="1235" height="330">
                  <Static id="Static22" text="패널티 정보" class="sta_WF_Title01" position="absolute 10 13 460 31" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Grid id="grd_blckMarkList" taborder="1" binddataset="ds_blckMarkList" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" position="absolute 10 31 1210 303" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="31"/>
                          <Column size="67"/>
                          <Column size="91"/>
                          <Column size="66"/>
                          <Column size="89"/>
                          <Column size="82"/>
                          <Column size="80"/>
                          <Column size="84"/>
                          <Column size="92"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="기한일수"/>
                          <Cell col="2" text="기준패널티율"/>
                          <Cell col="3" text="증가일수"/>
                          <Cell col="4" text="증가패널티율"/>
                          <Cell col="5" text="작성자"/>
                          <Cell col="6" text="작성일자"/>
                          <Cell col="7" text="수정자"/>
                          <Cell col="8" text="수정일자"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="align:center;" text="bind:seq" expr="currow+1"/>
                          <Cell col="1" displaytype="number" edittype="masknumber" text="bind:basisDays" mask="#,##0"/>
                          <Cell col="2" displaytype="number" edittype="masknumber" text="bind:basisBlckMarkRat" mask="#,##0.0" editlimitbymask="both"/>
                          <Cell col="3" displaytype="number" edittype="masknumber" text="bind:incDays" mask="#,##0"/>
                          <Cell col="4" displaytype="number" edittype="masknumber" text="bind:incBlckMarkRat" mask="#,##0.0"/>
                          <Cell col="5" text="bind:cuser"/>
                          <Cell col="6" displaytype="date" text="bind:cdate" calendardisplaynulltype="none"/>
                          <Cell col="7" text="bind:uuser"/>
                          <Cell col="8" displaytype="date" text="bind:udate" calendardisplaynulltype="none"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="Button02" taborder="2" class="btn_WF_GrdPlus" position="absolute 1172 8 1190 28" anchor="top right" onclick="fn_addRow3"/>
                  <Button id="Button03" taborder="3" class="btn_WF_GrdMinus" position="absolute 1192 8 1210 28" anchor="top right" onclick="fn_deleteRow3"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage4" text="첨부파일">
              <Layouts>
                <Layout>
                  <ObjAtchFile id="ObjAtchFile2" anchor="all" titletext="Attach File Object" taborder="0" position="absolute 10 -4 1210 303"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static63" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 16 711 27 1001"/>
        <Static id="Static44" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1226 690 1237 979"/>
        <Static id="Static64" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 11 1014 1237 1027"/>
        <Static id="Static00" class="sta_WFDA_Labelbg" position="absolute 16 233 1237 260" anchor="left top"/>
        <Static id="Static16" class="sta_WFDA_Labelbg" position="absolute 16 207 1237 234" anchor="left top"/>
        <Static id="Static22" class="sta_WFDA_Labelbg" position="absolute 16 603 1237 656" anchor="left top"/>
        <Static id="Static62" class="sta_WFDA_Labelbg" position="absolute 16 108 1237 135" anchor="left top"/>
        <ObjAtchFile id="ObjAtchFile" anchor="all" titletext="Attach File Object" taborder="71" visible="false" position="absolute 833 1032 1246 1196"/>
        <Static id="Static81" text="품의정보" onclick="Static41_onclick" class="sta_WFDA_Label03" position="absolute 15 30 51 208" anchor="left top"/>
        <Static id="Static70" class="sta_WFDA_Labelbg" position="absolute 35 285 1237 312" anchor="left top"/>
        <Static id="Static17" text="기본정보" onclick="Static41_onclick" class="sta_WFDA_Label03" position="absolute 15 311 51 416" anchor="left top"/>
        <Button id="btn_close" taborder="84" text="닫기" onclick="fn_close" class="btn_WF_CRUD" position2="absolute r:6 w:46 t:3 h:25" positiontype="position2"/>
        <Button id="btn_save" taborder="85" text="저장" onclick="fn_save" class="btn_WF_CRUD" position2="absolute r:53 w:46 t:3 h:25" positiontype="position2"/>
        <Button id="btn_temSave" taborder="88" text="임시저장" onclick="fn_temSave" class="btn_WF_CRUD" position2="absolute r:100 w:72 t:3 h:25" positiontype="position2"/>
        <Static id="Static45" text="품의상태" class="sta_WFDA_Label01" position="absolute 935 30 1043 57" anchor="left top"/>
        <Edit id="edt_poProposalStatus" taborder="89" value="진행중" enable="true" position="absolute 1045 33 1234 54" anchor="left top" readonly="true" style="background:#ecececff;"/>
        <Static id="Static01" text="품의구분" class="sta_WFDA_Label01" position="absolute 50 30 158 57" anchor="left top"/>
        <Combo id="cbo_proposalClass" taborder="0" class="cmb_WF_Essential" position="absolute 160 33 352 54" anchor="left top" index="-1" onitemchanged="cbo_proposalClass_onitemchanged"/>
        <Edit id="edt_poProposalNum" taborder="91" value="PR-100-2015_0001" enable="true" position="absolute 464 33 641 54" anchor="left top" readonly="true" style="background:#ecececff; :disabled {compositecolor:#ffffffff;}"/>
        <Static id="Static46" text="품의서번호(G)" class="sta_WFDA_Label01" position="absolute 643 30 751 57" anchor="left top"/>
        <Edit id="edt_groupPoProposalNum" taborder="92" value="GW-2015-0001" enable="true" position="absolute 753 33 933 54" anchor="left top" readonly="true" style="background:#ecececff;" maxlength="20"/>
        <Static id="Static03" text="기안자" class="sta_WFDA_Label01" position="absolute 50 56 158 83" anchor="left top"/>
        <PersonalSearchComponent id="edt_drafterNm" titletext="New Form" taborder="1" text="edt_drafterNm" class="edt_WF_Essential" position="absolute 160 59 245 80" bindDataset="ds_proposalInfo" bindSabunColumn="drafterId" bindNmKorColumn="drafterNm" qoMuCd="" qoTmCd="" qoTmNm="" eventAfterTrigger="" eventBeforeTrigger=""/>
        <Static id="Static02" text="품의서번호" class="sta_WFDA_Label01" position="absolute 354 30 462 57" anchor="left top"/>
        <Static id="Static04" text="품의등록일자" class="sta_WFDA_Label01" position="absolute 354 56 462 83" anchor="left top"/>
        <MaskEdit id="edt_proposalWriteDate" taborder="94" type="string" mask="####-##-##" enable="true" position="absolute 464 59 599 80" anchor="left top" style="align:center middle; :disabled {align:center middle;}" readonly="true"/>
        <Static id="Static48" text="품의상신일자" class="sta_WFDA_Label01" position="absolute 643 56 751 83" anchor="left top"/>
        <Static id="Static50" text="품의승인일자" class="sta_WFDA_Label01" position="absolute 935 56 1043 83" anchor="left top"/>
        <Static id="Static08" text="구매형태" class="sta_WFDA_Label01" position="absolute 50 82 158 109" anchor="left top"/>
        <Combo id="cbo_poType" taborder="2" value="0" onitemchanged="cbo_poType_onitemchanged" class="cmb_WF_Essential" position="absolute 160 85 352 106" anchor="left top"/>
        <Static id="Static35" text="귀속부서" class="sta_WFDA_Label01" position="absolute 643 82 751 109" anchor="left top"/>
        <Combo id="cbo_attachDept" taborder="4" class="cmb_WF_Essential" position="absolute 753 85 933 106" anchor="left top" onitemchanged="cbo_attachDept_onitemchanged" canitemchange="cbo_attachDept_canitemchange"/>
        <Static id="Static09" text="구매종류" class="sta_WFDA_Label01" position="absolute 354 82 462 109" anchor="left top"/>
        <Combo id="cbo_poKind" taborder="3" class="cmb_WF_Essential" position="absolute 464 85 641 106" anchor="left top"/>
        <Static id="Static30" text="판매유형" class="sta_WFDA_Label01" position="absolute 935 82 1043 109" anchor="left top"/>
        <Combo id="cbo_saleType" taborder="5" class="cmb_WF_Essential" position="absolute 1045 85 1234 106" anchor="left top" canitemchange="cbo_saleType_canitemchange"/>
        <Static id="Static27" text="제목" class="sta_WFDA_Label01" position="absolute 50 108 158 135" anchor="left top"/>
        <Edit id="edt_proposalTitle" taborder="6" value="제목..." imemode="hangul" class="edt_WF_Essential" position="absolute 160 111 641 132" anchor="left top" ontextchanged="edt_proposalTitle_ontextchanged"/>
        <Static id="Static86" text="결제예정일" class="sta_WFDA_Label01" position="absolute 643 108 751 135" anchor="left top"/>
        <ObjCalendar id="cal_settleSchdDate" titletext="캘린더" taborder="7" text="ObjCalendar00" scrollbars="none" position="absolute 753 111 889 132"/>
        <Static id="Static59" text="판매종료예정일" class="sta_WFDA_Label01" position="absolute 935 108 1043 135" anchor="left top"/>
        <ObjCalendar id="cal_proposalSaleEdate" titletext="캘린더" taborder="8" text="ObjCalendar00" scrollbars="none" position="absolute 1045 111 1181 132"/>
        <Static id="Static12" text="매출처" class="sta_WFDA_Label01" position="absolute 643 134 751 161" anchor="left top"/>
        <Edit id="edt_salsplceNm" taborder="11" value="석정수산" class="edt_WF_Essential" position="absolute 753 137 1214 158" anchor="left top" enable="true"/>
        <Static id="Static13" text="매입처" class="sta_WFDA_Label01" position="absolute 50 134 158 161" anchor="left top"/>
        <Edit id="edt_splrNm" taborder="9" value="CHANGLI HAIDONG AQUATIC PRODUCT AND FOODS STUFF CO.,LTD" class="edt_WF_Essential" position="absolute 160 137 621 158" anchor="left top" enable="true"/>
        <Static id="Static15" text="매입처 결제조건" class="sta_WFDA_Label01" position="absolute 50 160 158 208" anchor="left top"/>
        <Static id="Static19" text="매출처 결제조건" class="sta_WFDA_Label01" position="absolute 643 160 751 208" anchor="left top"/>
        <Static id="Static20" text="수입정보" onclick="Static41_onclick" class="sta_WFDA_Label03" position="absolute 15 207 51 312" anchor="left top"/>
        <Combo id="cbo_incomeType" taborder="17" position="absolute 160 210 352 231" anchor="left top" class="cmb_WF_Essential">
          <Dataset id="innerdataset">
            <ColumnInfo>
              <Column id="codecolumn" size="256"/>
              <Column id="datacolumn" size="256"/>
            </ColumnInfo>
            <Rows>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">품의 작성일자</Col>
              </Row>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">품의 상신일자</Col>
              </Row>
              <Row>
                <Col id="codecolumn"/>
                <Col id="datacolumn">상신 완료일자</Col>
              </Row>
            </Rows>
          </Dataset>
        </Combo>
        <Static id="Static25" text="수입유형" class="sta_WFDA_Label01" position="absolute 50 207 158 234" anchor="left top"/>
        <Static id="Static21" text="지불조건" class="sta_WFDA_Label01" position="absolute 354 207 462 234" anchor="left top"/>
        <Edit id="edt_payCond" taborder="109" value="At sight L/C" enable="true" position="absolute 464 210 641 231" anchor="left top" readonly="true" style="background:#ecececff;"/>
        <Static id="Static23" text="인코텀즈" class="sta_WFDA_Label01" position="absolute 643 207 751 234" anchor="left top"/>
        <Combo id="cbo_incoterms" taborder="18" class="cmb_WF_Essential" position="absolute 753 210 1191 231" anchor="left top"/>
        <Static id="Static24" text="신용장개설일" class="sta_WFDA_Label01" position="absolute 50 233 158 260" anchor="left top"/>
        <ObjCalendar id="cal_lcIssuingSchdDate" titletext="캘린더" taborder="19" text="ObjCalendar00" scrollbars="none" position="absolute 160 236 316 257"/>
        <Static id="Static26" text="선적예정일" class="sta_WFDA_Label01" position="absolute 354 233 462 260" anchor="left top"/>
        <ObjCalendar id="cal_lshipSchdDate" titletext="캘린더" taborder="20" text="ObjCalendar00" scrollbars="none" position="absolute 464 236 599 257"/>
        <Static id="Static82" text="입고예정일" class="sta_WFDA_Label01" position="absolute 935 233 1043 260" anchor="left top"/>
        <ObjCalendar id="cal_deliverSchdDate" titletext="캘린더" taborder="22" text="ObjCalendar00" scrollbars="none" position="absolute 1045 236 1191 257"/>
        <Static id="Static28" text="입항예정일" class="sta_WFDA_Label01" position="absolute 643 233 751 260" anchor="left top"/>
        <ObjCalendar id="cal_arrivSchdDate" titletext="캘린더" taborder="21" text="ObjCalendar00" scrollbars="none" position="absolute 753 236 899 257"/>
        <Static id="Static29" text="통관예정일" class="sta_WFDA_Label01" position="absolute 50 259 158 286" anchor="left top"/>
        <ObjCalendar id="cal_entrySchdDate" titletext="캘린더" taborder="23" text="ObjCalendar00" scrollbars="none" position="absolute 160 262 316 283"/>
        <Edit id="edt_signProgressStatus" taborder="116" readonly="true" position="absolute 247 59 352 80" anchor="left top" style="background:#ecececff;"/>
        <Button id="btn_tariffHouseCd" taborder="25" tabstop="false" onclick="btn_tariffHouseCd_onclick" class="btn_WF_popSearch" position="absolute 620 262 641 283"/>
        <Edit id="cbo_tariffHouseNm" taborder="24" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 464 262 621 283" visible="true" enable="true" class="edt_WF_Essential"/>
        <Static id="Static47" text="관세사" class="sta_WFDA_Label01" position="absolute 354 259 462 286" anchor="left top"/>
        <Static id="Static42" text="추가관세율" class="sta_WFDA_Label01" position="absolute 643 259 751 286" anchor="left top"/>
        <MaskEdit id="edt_addGvrntaxRate" taborder="26" mask="#,##0.00" canchange="edt_addGvrntaxRate_canchange" position="absolute 753 262 933 283" anchor="left top" class="msk_WF_Essential"/>
        <Static id="Static33" text="선적지항구" class="sta_WFDA_Label01" position="absolute 50 285 158 312" anchor="left top"/>
        <Edit id="edt_lshipNationNm" taborder="27" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 160 288 332 309" userdata="" class="edt_WF_Essential"/>
        <Static id="Static51" text="도착지항구" class="sta_WFDA_Label01" position="absolute 354 285 462 312" anchor="left top"/>
        <Edit id="edt_arrivNationNm" taborder="29" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" oneditclick="edt_employee00_oneditclick" position="absolute 464 288 621 309" class="edt_WF_Essential"/>
        <Static id="Static37" text="품의환율일자" class="sta_WFDA_Label01" position="absolute 643 285 751 312" anchor="left top"/>
        <ObjCalendar id="cal_proposalExchangeRateDate" titletext="캘린더" taborder="31" text="ObjCalendar00" scrollbars="none" position="absolute 753 288 899 309"/>
        <Static id="Static38" text="품의환율" class="sta_WFDA_Label01" position="absolute 935 285 1043 312" anchor="left top"/>
        <MaskEdit id="edt_proposalExchangeRate" taborder="32" mask="#,##0.##" class="msk_WF_EssentialCal" position="absolute 1045 288 1234 309" anchor="left top" style="align:right middle;" canchange="edt_proposalExchangeRate_canchange"/>
        <Static id="Static71" text="%" position="absolute 936 263 957 284" anchor="left top"/>
        <Static id="Static56" text="총수량" class="sta_WFDA_Label01" position="absolute 50 311 158 338" anchor="left top"/>
        <MaskEdit id="edt_totQuantity" taborder="124" mask="#,##0.##" enable="true" position="absolute 160 314 352 335" anchor="left top" style=":disabled {align:right middle;}" readonly="true"/>
        <Static id="Static57" text="총중량" class="sta_WFDA_Label01" position="absolute 354 311 462 338" anchor="left top"/>
        <MaskEdit id="edt_totWgt" taborder="125" mask="#,##0.00" enable="true" position="absolute 464 314 641 335" anchor="left top" style=":disabled {align:right middle;}" readonly="true"/>
        <Static id="lbl_totUsdWonwtrAmt" text="금액(Unit)" class="sta_WFDA_Label01" position="absolute 643 311 751 338" anchor="left top"/>
        <MaskEdit id="edt_totUsdWonwtrAmt" taborder="126" mask="#,##0.00" enable="true" position="absolute 753 314 850 335" anchor="left top" style=":disabled {align:right middle;}" readonly="true"/>
        <Static id="Static55" text="금액(KRW)" class="sta_WFDA_Label01" position="absolute 935 311 1043 338" anchor="left top"/>
        <Button id="btn_lshipNationNm" taborder="28" tabstop="false" onclick="btn_lshipNationNm_onclick" class="btn_WF_popSearch" position="absolute 331 288 352 309"/>
        <Button id="btn_arrivNationNm" taborder="30" tabstop="false" onclick="btn_arrivNationNm_onclick" class="btn_WF_popSearch" position="absolute 620 288 641 309"/>
        <Button id="btn_salsplceNm" taborder="12" tabstop="false" onclick="btn_salsplceNm_onclick" class="btn_WF_popSearch" position="absolute 1213 137 1234 158"/>
        <Button id="btn_splrNm" taborder="10" tabstop="false" onclick="btn_splrNm_onclick" class="btn_WF_popSearch" position="absolute 620 137 641 158"/>
        <MaskEdit id="edt_ioutAmt" taborder="37" mask="#,##0.00" canchange="edt_ioutAmt_canchange" position="absolute 563 340 641 361" anchor="left top" class="msk_WF_Essential"/>
        <Static id="Static87" text="/" position="absolute 548 341 569 362" anchor="left top"/>
        <MaskEdit id="edt_whChargAmt" taborder="36" mask="#,##0.00" canchange="edt_whChargAmt_canchange" position="absolute 464 340 541 361" anchor="left top" class="msk_WF_Essential"/>
        <Static id="Static58" text="보관료/입출고료" class="sta_WFDA_Label01" position="absolute 354 337 462 364" anchor="left top"/>
        <Button id="btn_deliverWhNm" taborder="35" tabstop="false" onclick="btn_deliverWhNm_OnClick" class="btn_WF_popSearch" position="absolute 331 340 352 361"/>
        <Edit id="edt_deliverWhNm" taborder="34" readonly="false" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 160 340 332 361" class="edt_WF_Essential"/>
        <Static id="Static61" text="창고" class="sta_WFDA_Label01" position="absolute 50 337 158 364" anchor="left top"/>
        <Static id="Static84" text="품의잔액" class="sta_WFDA_Label01" position="absolute 643 337 751 364" anchor="left top" style="padding:0 0 0 9;"/>
        <MaskEdit id="edt_proposalBalAmt" taborder="136" mask="#,##0.##" class="edt_WF_Essential" enable="true" position="absolute 753 340 933 361" anchor="left top" style="align:right middle;" readonly="true"/>
        <Static id="Static83" text="수수료" class="sta_WFDA_Label01" position="absolute 50 363 158 390" anchor="left top"/>
        <Static id="Static65" text="%" position="absolute 336 367 349 388" anchor="left top"/>
        <MaskEdit id="edt_comm" taborder="38" mask="#,##0.00" canchange="edt_comm_canchange" class="msk_WF_Essential" position="absolute 160 366 332 387" anchor="left top" style="align:right middle;" limitbymask="both"/>
        <Static id="Static66" text="금리" onclick="Static25_onclick" class="sta_WFDA_Label01" position="absolute 354 363 462 390" anchor="left top"/>
        <Static id="Static68" text="%" position="absolute 624 367 637 388" anchor="left top"/>
        <MaskEdit id="edt_intRate" taborder="39" mask="#,##0.00" limitbymask="both" canchange="edt_intRate_canchange" position="absolute 464 366 621 387" anchor="left top" class="msk_WF_Essential"/>
        <Static id="Static69" text="예상이익율(매출)" onclick="Static25_onclick" class="sta_WFDA_Label01" position="absolute 50 389 158 416" anchor="left top" style="font:Gulim,9;"/>
        <MaskEdit id="edt_expectSalsGainRate" taborder="139" mask="#,##0.#" limitbymask="both" enable="true" position="absolute 160 392 352 413" anchor="left top" readonly="true"/>
        <Static id="Static72" text="예상이익액(매출)" onclick="Static25_onclick" class="sta_WFDA_Label01" position="absolute 354 389 462 416" anchor="left top"/>
        <MaskEdit id="edt_expectGainAmtSals" taborder="140" mask="#,##0.##" enable="true" position="absolute 464 392 641 413" anchor="left top" readonly="true"/>
        <Static id="Static73" text="예상이익율(직접)" onclick="Static25_onclick" class="sta_WFDA_Label01" position="absolute 643 389 751 416" anchor="left top"/>
        <MaskEdit id="edt_expectDrctGainRate" taborder="141" mask="+#0.#" limitbymask="both" enable="true" position="absolute 753 392 933 413" anchor="left top" readonly="true"/>
        <Static id="Static74" text="예상이익액(직접)" onclick="Static25_onclick" class="sta_WFDA_Label01" position="absolute 935 389 1043 416" anchor="left top"/>
        <MaskEdit id="edt_expectGainAmtDrct" taborder="142" mask="#,##0.##" enable="true" position="absolute 1045 392 1234 413" anchor="left top" readonly="true"/>
        <Static id="Static75" text="예상매출액" onclick="Static25_onclick" class="sta_WFDA_Label01" position="absolute 935 363 1043 390" anchor="left top" style="font:Gulim,9;"/>
        <Static id="Static76" text="예상매입액" onclick="Static25_onclick" class="sta_WFDA_Label01" position="absolute 643 363 751 390" anchor="left top" style="font:Gulim,9;"/>
        <MaskEdit id="edt_expectSalsAmt" taborder="143" mask="#,##0.##" enable="true" position="absolute 1045 366 1234 387" anchor="left top" readonly="true"/>
        <MaskEdit id="edt_expectBuyAmt" taborder="144" mask="#,##0.##" enable="true" position="absolute 753 366 933 387" anchor="left top" readonly="true"/>
        <Static id="Static05" class="sta_WFDA_Labelbg" position="absolute 16 462 1237 510" anchor="left top"/>
        <Static id="Static14" class="sta_WFDA_Labelbg" position="absolute 16 509 1237 557" anchor="left top"/>
        <Static id="Static34" class="sta_WFDA_Labelbg" position="absolute 16 556 1237 604" anchor="left top"/>
        <Static id="Static32" text="비고" onclick="Static41_onclick" class="sta_WFDA_Label03" position="absolute 15 415 51 656" anchor="left top"/>
        <Static id="Static36" text="거래개요" class="sta_WFDA_Label01" position="absolute 50 415 158 463" anchor="left top"/>
        <TextArea id="txt_dealOtln" taborder="40" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 160 418 609 460" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Button id="btn_dealOtln" taborder="41" tabstop="false" onclick="btn_dealOtln_onclick" class="btn_WF_popSearch" position="absolute 615 428 636 449"/>
        <Static id="Static53" text="거래규모" class="sta_WFDA_Label01" position="absolute 643 415 751 463" anchor="left top"/>
        <TextArea id="edt_dealScaleRemark" taborder="42" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 753 418 1202 460" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Button id="btn_dealScaleRemark" taborder="43" tabstop="false" onclick="btn_dealScaleRemark_onclick" class="btn_WF_popSearch" position="absolute 1208 428 1229 449"/>
        <Edit id="edt_refSeq01" taborder="149" readonly="true" position="absolute 160 474 442 495" anchor="left top" class="edt_WF_Essential"/>
        <Button id="btn_fileAdd" taborder="150" text="파일 추가" onclick="btn_fileAdd_onclick" class="btn_WF_Custom" position="absolute 444 474 509 495"/>
        <Button id="btn_fileDel" taborder="151" text="파일 삭제" onclick="btn_fileDel_onclick" class="btn_WF_Custom" position="absolute 510 474 575 495"/>
        <Button id="btn_fileView" taborder="152" text="파일 보기" onclick="btn_fileView_onclick" class="btn_WF_Custom" position="absolute 576 474 641 495"/>
        <Static id="Static54" text="거래구조 이미지" class="sta_WFDA_Label01" position="absolute 50 462 158 510" anchor="left top"/>
        <Static id="Static77" text="거래조건" class="sta_WFDA_Label01" position="absolute 643 462 751 510" anchor="left top"/>
        <Button id="btn_dealCondRemark" taborder="45" tabstop="false" onclick="btn_dealCondRemark_onclick" class="btn_WF_popSearch" position="absolute 1208 475 1229 496"/>
        <TextArea id="txt_dealCondRemark" taborder="44" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 753 465 1202 507" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Static id="Static78" text="판매계획" class="sta_WFDA_Label01" position="absolute 50 509 158 557" anchor="left top"/>
        <TextArea id="txt_salGainPlanRemark" taborder="46" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 160 512 609 554" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Button id="btn_salGainPlanRemark" taborder="47" tabstop="false" onclick="btn_salGainPlanRemark_onclick" class="btn_WF_popSearch" position="absolute 615 522 636 543"/>
        <Static id="Static79" text="가격관리" class="sta_WFDA_Label01" position="absolute 50 556 158 604" anchor="left top"/>
        <TextArea id="txt_priceMgmtRemark" taborder="50" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 160 559 609 601" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Button id="btn_priceMgmtRemark" taborder="51" tabstop="false" onclick="btn_priceMgmtRemark_onclick" class="btn_WF_popSearch" position="absolute 615 569 636 590"/>
        <Static id="Static80" text="품질관리" class="sta_WFDA_Label01" position="absolute 643 556 751 604" anchor="left top"/>
        <TextArea id="txt_qualityMgmtSchm" taborder="52" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 753 559 1202 601" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Button id="btn_qualityMgmtSchm" taborder="53" tabstop="false" onclick="btn_qualityMgmtSchm_onclick" class="btn_WF_popSearch" position="absolute 1208 569 1229 590"/>
        <Static id="Static85" text="REMARK" class="sta_WFDA_Label01" position="absolute 50 603 158 656" anchor="left top"/>
        <TextArea id="txt_remark" taborder="54" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 160 606 609 653" anchor="left top" style="linespace:0;padding:0 0 0 0;"/>
        <Button id="btn_remark" taborder="55" tabstop="false" onclick="btn_remark_onclick" class="btn_WF_popSearch" position="absolute 615 618 636 639"/>
        <Button id="btn_arMgmtSchm" taborder="49" tabstop="false" onclick="btn_arMgmtSchm_onclick" class="btn_WF_popSearch" position="absolute 1208 522 1229 543"/>
        <TextArea id="txt_arMgmtSchm" taborder="48" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 753 512 1202 554" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Static id="Static88" text="채권처리방안" class="sta_WFDA_Label01" position="absolute 643 509 751 557" anchor="left top"/>
        <Combo id="cbo_proposalAmountUnit" taborder="33" class="cmb_WF_Essential" position="absolute 852 314 933 335" anchor="left top" onitemchanged="cbo_proposalAmountUnit_onitemchanged"/>
        <MaskEdit id="edt_totKrwWonwtrAmt" taborder="167" mask="#,##0.##" enable="true" position="absolute 1045 314 1234 335" anchor="left top" style=":disabled {align:right middle;}" readonly="true"/>
        <Static id="Static89" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 1027"/>
        <TextArea id="txt_splrPayCond" taborder="13" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 160 163 609 205" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Button id="btn_splrPayCond" taborder="14" tabstop="false" class="btn_WF_popSearch" position="absolute 615 173 636 194" onclick="btn_splrPayCond_onclick"/>
        <TextArea id="txt_salsplcePayCond" taborder="15" scrollbars="fixedvert" imemode="hangul" wordwrap="word" position="absolute 753 163 1202 205" anchor="left top" style="linespace:0;padding:0 0 0 0;" class="txt_WF_Essential"/>
        <Button id="btn_salsplcePayCond" taborder="16" tabstop="false" class="btn_WF_popSearch" position="absolute 1208 173 1229 194" onclick="btn_salsplcePayCond_onclick"/>
        <ObjCalendar id="cal_proposalUpnewDate" titletext="캘린더" taborder="168" text="ObjCalendar00" scrollbars="none" position="absolute 753 59 889 80"/>
        <ObjCalendar id="cal_proposalApprvDate" titletext="캘린더" taborder="169" text="ObjCalendar00" scrollbars="none" position="absolute 1045 59 1181 80"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item34" compid="edt_expectSalsAmt" propid="value" datasetid="ds_proposalInfo" columnid="expectSalsAmt"/>
      <BindItem id="item4" compid="edt_poProposalStatus" propid="value" datasetid="ds_proposalInfo" columnid="poProposalStatusNm"/>
      <BindItem id="item9" compid="cbo_proposalClass" propid="value" datasetid="ds_proposalInfo" columnid="proposalClass"/>
      <BindItem id="item0" compid="edt_poProposalNum" propid="value" datasetid="ds_proposalInfo" columnid="poProposalNum"/>
      <BindItem id="item2" compid="edt_groupPoProposalNum" propid="value" datasetid="ds_proposalInfo" columnid="groupProposalNum"/>
      <BindItem id="item5" compid="edt_proposalWriteDate" propid="value" datasetid="ds_proposalInfo" columnid="proposalWriteDate"/>
      <BindItem id="item1" compid="cbo_poType" propid="value" datasetid="ds_proposalInfo" columnid="poType"/>
      <BindItem id="item23" compid="cbo_attachDept" propid="value" datasetid="ds_proposalInfo" columnid="attachDept"/>
      <BindItem id="item3" compid="cbo_poKind" propid="value" datasetid="ds_proposalInfo" columnid="poKind"/>
      <BindItem id="item14" compid="cbo_saleType" propid="value" datasetid="ds_proposalInfo" columnid="saleType"/>
      <BindItem id="item10" compid="edt_proposalTitle" propid="value" datasetid="ds_proposalInfo" columnid="proposalTitle"/>
      <BindItem id="item13" compid="edt_salsplceNm" propid="value" datasetid="ds_proposalInfo" columnid="salsplceNm"/>
      <BindItem id="item16" compid="edt_splrNm" propid="value" datasetid="ds_proposalInfo" columnid="splrNm"/>
      <BindItem id="item36" compid="cbo_incomeType" propid="value" datasetid="ds_proposalInfo" columnid="incomeType"/>
      <BindItem id="item12" compid="edt_payCond" propid="value" datasetid="ds_proposalInfo" columnid="payCondCd"/>
      <BindItem id="item15" compid="cbo_incoterms" propid="value" datasetid="ds_proposalInfo" columnid="incoterms"/>
      <BindItem id="item30" compid="edt_signProgressStatus" propid="value" datasetid="ds_list" columnid="signProgressStatus"/>
      <BindItem id="item27" compid="cbo_tariffHouseNm" propid="value" datasetid="ds_proposalInfo" columnid="tariffHouseNm"/>
      <BindItem id="item28" compid="edt_addGvrntaxRate" propid="value" datasetid="ds_proposalInfo" columnid="addGvrntaxRate"/>
      <BindItem id="item45" compid="edt_lshipNationNm" propid="value" datasetid="ds_proposalInfo" columnid="lshipNationNm"/>
      <BindItem id="item46" compid="edt_arrivNationNm" propid="value" datasetid="ds_proposalInfo" columnid="arrivNationNm"/>
      <BindItem id="item49" compid="edt_proposalExchangeRate" propid="value" datasetid="ds_proposalInfo" columnid="proposalExchangeRate"/>
      <BindItem id="item24" compid="edt_totQuantity" propid="value" datasetid="ds_proposalInfo" columnid="totQuantity"/>
      <BindItem id="item50" compid="edt_totWgt" propid="value" datasetid="ds_proposalInfo" columnid="totWgt"/>
      <BindItem id="item17" compid="edt_totUsdWonwtrAmt" propid="value" datasetid="ds_proposalInfo" columnid="totUsdWonwtrAmt"/>
      <BindItem id="item44" compid="edt_ioutAmt" propid="value" datasetid="ds_proposalInfo" columnid="ioutAmt"/>
      <BindItem id="item29" compid="edt_whChargAmt" propid="value" datasetid="ds_proposalInfo" columnid="whChargAmt"/>
      <BindItem id="item26" compid="edt_deliverWhNm" propid="value" datasetid="ds_proposalInfo" columnid="deliverWhNm"/>
      <BindItem id="item22" compid="edt_proposalBalAmt" propid="value" datasetid="ds_proposalInfo" columnid="proposalBalAmt"/>
      <BindItem id="item21" compid="edt_comm" propid="value" datasetid="ds_proposalInfo" columnid="comm"/>
      <BindItem id="item35" compid="edt_intRate" propid="value" datasetid="ds_proposalInfo" columnid="intRate"/>
      <BindItem id="item38" compid="edt_expectSalsGainRate" propid="value" datasetid="ds_proposalInfo" columnid="expectSalsGainRate"/>
      <BindItem id="item39" compid="edt_expectGainAmtSals" propid="value" datasetid="ds_proposalInfo" columnid="expectGainAmtSals"/>
      <BindItem id="item40" compid="edt_expectDrctGainRate" propid="value" datasetid="ds_proposalInfo" columnid="expectDrctGainRate"/>
      <BindItem id="item41" compid="edt_expectGainAmtDrct" propid="value" datasetid="ds_proposalInfo" columnid="expectGainAmtDrct"/>
      <BindItem id="item19" compid="edt_expectBuyAmt" propid="value" datasetid="ds_proposalInfo" columnid="expectBuyAmt"/>
      <BindItem id="item20" compid="txt_dealOtln" propid="value" datasetid="ds_proposalInfo" columnid="dealOtln"/>
      <BindItem id="item51" compid="edt_dealScaleRemark" propid="value" datasetid="ds_proposalInfo" columnid="dealScaleRemark"/>
      <BindItem id="item25" compid="edt_refSeq01" propid="value" datasetid="ds_file" columnid="orgnlFileNm"/>
      <BindItem id="item31" compid="txt_dealCondRemark" propid="value" datasetid="ds_proposalInfo" columnid="dealCondRemark"/>
      <BindItem id="item32" compid="txt_salGainPlanRemark" propid="value" datasetid="ds_proposalInfo" columnid="salGainPlanRemark"/>
      <BindItem id="item33" compid="txt_priceMgmtRemark" propid="value" datasetid="ds_proposalInfo" columnid="priceMgmtRemark"/>
      <BindItem id="item37" compid="txt_qualityMgmtSchm" propid="value" datasetid="ds_proposalInfo" columnid="qualityMgmtSchm"/>
      <BindItem id="item43" compid="txt_remark" propid="value" datasetid="ds_proposalInfo" columnid="remark"/>
      <BindItem id="item42" compid="txt_arMgmtSchm" propid="value" datasetid="ds_proposalInfo" columnid="arMgmtSchm"/>
      <BindItem id="item47" compid="cbo_proposalAmountUnit" propid="value" datasetid="ds_proposalInfo" columnid="proposalAmountUnit"/>
      <BindItem id="item48" compid="edt_totKrwWonwtrAmt" propid="value" datasetid="ds_proposalInfo" columnid="totKrwWonwtrAmt"/>
      <BindItem id="item18" compid="edt_drafterNm" propid="text" datasetid="ds_proposalInfo" columnid="drafterNm"/>
      <BindItem id="item8" compid="txt_splrPayCond" propid="value" datasetid="ds_proposalInfo" columnid="splrPayCond"/>
      <BindItem id="item11" compid="txt_salsplcePayCond" propid="value" datasetid="ds_proposalInfo" columnid="salsplcePayCond"/>
    </Bind>
    <Objects>
      <Dataset id="ds_itemList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_itemList_oncolumnchanged">
        <ColumnInfo>
          <Column id="proposalSeq" type="STRING" size="256"/>
          <Column id="itemCd" type="STRING" size="256"/>
          <Column id="itemNm" type="STRING" size="256"/>
          <Column id="brand" type="STRING" size="256"/>
          <Column id="hsCd" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="quantity" type="BIGDECIMAL" size="256"/>
          <Column id="uprice" type="BIGDECIMAL" size="256"/>
          <Column id="wonwtrAmt" type="BIGDECIMAL" size="256"/>
          <Column id="wgt" type="BIGDECIMAL" size="256"/>
          <Column id="taxYn" type="STRING" size="256"/>
          <Column id="cuser" type="STRING" size="256"/>
          <Column id="cdate" type="STRING" size="256"/>
          <Column id="uuser" type="STRING" size="256"/>
          <Column id="udate" type="STRING" size="256"/>
          <Column id="poProposalNum" type="STRING" size="256"/>
          <Column id="origin" type="STRING" size="256"/>
          <Column id="gradeStand" type="STRING" size="256"/>
          <Column id="offer" type="BIGDECIMAL" size="256"/>
          <Column id="offer2" type="STRING" size="256"/>
          <Column id="wholeSale" type="BIGDECIMAL" size="256"/>
          <Column id="wholeSale2" type="STRING" size="256"/>
          <Column id="gvrntaxRate" type="BIGDECIMAL" size="256"/>
          <Column id="buyAmt" type="BIGDECIMAL" size="256"/>
          <Column id="buyPrice" type="BIGDECIMAL" size="256"/>
          <Column id="proposalExchangeRate" type="BIGDECIMAL" size="256"/>
          <Column id="comm" type="BIGDECIMAL" size="256"/>
          <Column id="whCost" type="BIGDECIMAL" size="256"/>
          <Column id="intRate" type="BIGDECIMAL" size="256"/>
          <Column id="salsUprice" type="BIGDECIMAL" size="256"/>
          <Column id="salsAmt" type="BIGDECIMAL" size="256"/>
          <Column id="salsGainAmt" type="BIGDECIMAL" size="256"/>
          <Column id="salsGainRat" type="BIGDECIMAL" size="256"/>
          <Column id="drctGainAmt" type="BIGDECIMAL" size="256"/>
          <Column id="drctGainRat" type="BIGDECIMAL" size="256"/>
          <Column id="expectBlPaym" type="BIGDECIMAL" size="256"/>
          <Column id="entryOtherAmt" type="BIGDECIMAL" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="set1" type="STRING" size="256"/>
          <Column id="kgConvertRate" type="STRING" size="256"/>
          <Column id="offer2Sign" type="STRING" size="256"/>
          <Column id="wholeSale2Sign" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="flag" type="STRING" size="256"/>
          <Column id="poProposalNum" type="STRING" size="256"/>
          <Column id="exchangeRateDate" type="STRING" size="256"/>
          <Column id="amountUnit" type="STRING" size="256"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="temp" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_payList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_payList_oncolumnchanged">
        <ColumnInfo>
          <Column id="paySeq" type="STRING" size="256"/>
          <Column id="payCondClass" type="STRING" size="256"/>
          <Column id="orgPayCondClass" type="STRING" size="256"/>
          <Column id="payCondCd" type="STRING" size="256"/>
          <Column id="payExpectAmt" type="BIGDECIMAL" size="256"/>
          <Column id="cuser" type="STRING" size="256"/>
          <Column id="cdate" type="STRING" size="256"/>
          <Column id="uuser" type="STRING" size="256"/>
          <Column id="udate" type="STRING" size="256"/>
          <Column id="poProposalNum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_blckMarkList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="poProposalNum" type="STRING" size="16"/>
          <Column id="seq" type="BIGDECIMAL" size="22"/>
          <Column id="basisDays" type="BIGDECIMAL" size="22"/>
          <Column id="basisBlckMarkRat" type="BIGDECIMAL" size="22"/>
          <Column id="incDays" type="BIGDECIMAL" size="22"/>
          <Column id="incBlckMarkRat" type="BIGDECIMAL" size="22"/>
          <Column id="cuser" type="STRING" size="9"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="9"/>
          <Column id="udate" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_itemListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="itemCd" type="STRING" size="255"/>
          <Column id="itemNm" type="STRING" size="255"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="quantity" type="STRING" size="256"/>
          <Column id="uprice" type="STRING" size="256"/>
          <Column id="wonwtrAmt" type="STRING" size="256"/>
          <Column id="wgt" type="STRING" size="256"/>
          <Column id="taxYn" type="STRING" size="256"/>
          <Column id="offer" type="STRING" size="256"/>
          <Column id="wholeSale" type="STRING" size="256"/>
          <Column id="salsUprice" type="STRING" size="256"/>
          <Column id="salsAmt" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="itemCd">title:품목코드,required:true</Col>
            <Col id="itemNm">title:품목명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
            <Col id="quantity">title:수량,required:true</Col>
            <Col id="uprice">title:단가,required:true</Col>
            <Col id="wonwtrAmt">title:원물금액,required:true</Col>
            <Col id="wgt">title:중량,required:true</Col>
            <Col id="taxYn">title:과세여부,required:true</Col>
            <Col id="offer">title:단위당 OFFER價,required:true</Col>
            <Col id="wholeSale">title:단위당 도매價,required:true</Col>
            <Col id="salsUprice">title:매출단가,required:true</Col>
            <Col id="salsAmt">title:매출액,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_payListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="payCondCd" type="STRING" size="255"/>
          <Column id="payExpectAmt" type="STRING" size="255"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="payCondCd">title:지불조건,required:true</Col>
            <Col id="payExpectAmt">title:지불예정금,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_blckMarkListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="limtDaysCd" type="STRING" size="256"/>
          <Column id="ratio" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="limtDaysCd">title:기한일수,required:true</Col>
            <Col id="ratio">title:요율,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_proposalInfo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="poProposalNum" type="STRING" size="256"/>
          <Column id="poProposalStatus" type="STRING" size="256"/>
          <Column id="poProposalStatusNm" type="STRING" size="256"/>
          <Column id="attachDept" type="STRING" size="256"/>
          <Column id="proposalAmt" type="STRING" size="256"/>
          <Column id="poType" type="STRING" size="256"/>
          <Column id="drafterId" type="STRING" size="256"/>
          <Column id="drafterNm" type="STRING" size="256"/>
          <Column id="payCondCd" type="STRING" size="256"/>
          <Column id="proposalTitle" type="STRING" size="256"/>
          <Column id="splrCd" type="STRING" size="256"/>
          <Column id="splrNm" type="STRING" size="256"/>
          <Column id="salsplceCd" type="STRING" size="256"/>
          <Column id="salsplceNm" type="STRING" size="256"/>
          <Column id="saleType" type="STRING" size="256"/>
          <Column id="saleTypebyExpectGainrat" type="STRING" size="256"/>
          <Column id="groupProposalNum" type="STRING" size="256"/>
          <Column id="proposalWriteDate" type="STRING" size="256"/>
          <Column id="proposalUpnewDate" type="STRING" size="256"/>
          <Column id="proposalApprvDate" type="STRING" size="256"/>
          <Column id="proposalSaleEdate" type="STRING" size="256"/>
          <Column id="lshipSchdDate" type="STRING" size="256"/>
          <Column id="arrivSchdDate" type="STRING" size="256"/>
          <Column id="lcIssuingSchdDate" type="STRING" size="256"/>
          <Column id="entrySchdDate" type="STRING" size="256"/>
          <Column id="proposalAmountUnit" type="STRING" size="256"/>
          <Column id="totWonwtrAmt" type="STRING" size="256"/>
          <Column id="totQuantity" type="STRING" size="256"/>
          <Column id="totWgt" type="STRING" size="256"/>
          <Column id="proposalExchangeRateDate" type="STRING" size="256"/>
          <Column id="proposalExchangeRate" type="STRING" size="256"/>
          <Column id="lshipNationCd" type="STRING" size="256"/>
          <Column id="lshipNationNm" type="STRING" size="256"/>
          <Column id="arrivNationCd" type="STRING" size="256"/>
          <Column id="arrivNationNm" type="STRING" size="256"/>
          <Column id="arrivportPortCd" type="STRING" size="256"/>
          <Column id="arrivportPortNm" type="STRING" size="256"/>
          <Column id="originNationCd" type="STRING" size="256"/>
          <Column id="originNationNm" type="STRING" size="256"/>
          <Column id="incoterms" type="STRING" size="256"/>
          <Column id="deliverWhCd" type="STRING" size="256"/>
          <Column id="deliverWhNm" type="STRING" size="256"/>
          <Column id="tariffHouseCd" type="STRING" size="256"/>
          <Column id="tariffHouseNm" type="STRING" size="256"/>
          <Column id="whChargAmt" type="STRING" size="256"/>
          <Column id="whChargAmtCalBasis" type="STRING" size="256"/>
          <Column id="ioutAmt" type="STRING" size="256"/>
          <Column id="ioutAmtCalBasis" type="STRING" size="256"/>
          <Column id="expectSalsAmt" type="STRING" size="256"/>
          <Column id="intRate" type="STRING" size="256"/>
          <Column id="expectSalsGainRate" type="STRING" size="256"/>
          <Column id="expectGainAmtSals" type="STRING" size="256"/>
          <Column id="expectDrctGainRate" type="STRING" size="256"/>
          <Column id="expectGainAmtDrct" type="STRING" size="256"/>
          <Column id="arMgmtSchm" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="poCreationYn" type="STRING" size="256"/>
          <Column id="incomeType" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="proposalBalAmt" type="STRING" size="256"/>
          <Column id="dealOtln" type="STRING" size="255"/>
          <Column id="dealScaleRemark" type="STRING" size="256"/>
          <Column id="dealStructImgeSrlnum" type="STRING" size="255"/>
          <Column id="dealCondRemark" type="STRING" size="255"/>
          <Column id="salGainPlanRemark" type="STRING" size="255"/>
          <Column id="priceMgmtSchm" type="STRING" size="255"/>
          <Column id="priceMgmtRemark" type="STRING" size="255"/>
          <Column id="qualityMgmtSchm" type="STRING" size="255"/>
          <Column id="deliverSchdDate" type="STRING" size="256"/>
          <Column id="comm" type="STRING" size="256"/>
          <Column id="cuser" type="STRING" size="256"/>
          <Column id="cdate" type="STRING" size="256"/>
          <Column id="uuser" type="STRING" size="256"/>
          <Column id="udate" type="STRING" size="256"/>
          <Column id="fileRefSrlNum" type="STRING" size="256"/>
          <Column id="addGvrntaxRate" type="STRING" size="256"/>
          <Column id="settleSchdDate" type="STRING" size="256"/>
          <Column id="proposalClass" type="STRING" size="256"/>
          <Column id="poKind" type="STRING" size="256"/>
          <Column id="splrPayCond" type="STRING" size="256"/>
          <Column id="salsplcePayCond" type="STRING" size="256"/>
          <Column id="totUsdWonwtrAmt" type="STRING" size="256"/>
          <Column id="totKrwWonwtrAmt" type="STRING" size="256"/>
          <Column id="expectBuyAmt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_proposalInfoValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="proposalClass" type="STRING" size="256"/>
          <Column id="proposalTitle" type="STRING" size="256"/>
          <Column id="settleSchdDate" type="STRING" size="256"/>
          <Column id="poType" type="STRING" size="256"/>
          <Column id="poKind" type="STRING" size="256"/>
          <Column id="drafterNm" type="STRING" size="256"/>
          <Column id="splrPayCond" type="STRING" size="256"/>
          <Column id="salsplcePayCond" type="STRING" size="256"/>
          <Column id="incomeType" type="STRING" size="256"/>
          <Column id="proposalSaleEdate" type="STRING" size="256"/>
          <Column id="salsplceNm" type="STRING" size="256"/>
          <Column id="incoterms" type="STRING" size="256"/>
          <Column id="lcIssuingSchdDate" type="STRING" size="256"/>
          <Column id="splrNm" type="STRING" size="256"/>
          <Column id="proposalExchangeRateDate" type="STRING" size="256"/>
          <Column id="proposalExchangeRate" type="STRING" size="256"/>
          <Column id="attachDept" type="STRING" size="256"/>
          <Column id="saleType" type="STRING" size="256"/>
          <Column id="proposalAmountUnit" type="STRING" size="256"/>
          <Column id="whChargAmt" type="STRING" size="256"/>
          <Column id="deliverWhCd" type="STRING" size="256"/>
          <Column id="ioutAmt" type="STRING" size="256"/>
          <Column id="comm" type="STRING" size="256"/>
          <Column id="intRate" type="STRING" size="256"/>
          <Column id="lshipSchdDate" type="STRING" size="256"/>
          <Column id="arrivSchdDate" type="STRING" size="256"/>
          <Column id="deliverSchdDate" type="STRING" size="256"/>
          <Column id="entrySchdDate" type="STRING" size="256"/>
          <Column id="tariffHouseCd" type="STRING" size="256"/>
          <Column id="addGvrntaxRate" type="STRING" size="256"/>
          <Column id="lshipNation" type="STRING" size="256"/>
          <Column id="arrivNationNm" type="STRING" size="256"/>
          <Column id="dealOtln" type="STRING" size="256"/>
          <Column id="dealScaleRemark" type="STRING" size="256"/>
          <Column id="dealCondRemark" type="STRING" size="256"/>
          <Column id="salGainPlanRemark" type="STRING" size="256"/>
          <Column id="arMgmtSchm" type="STRING" size="256"/>
          <Column id="priceMgmtRemark" type="STRING" size="256"/>
          <Column id="qualityMgmtSchm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="proposalTitle">title:제목,required:true,focus:edt_proposalTitle</Col>
            <Col id="proposalSaleEdate">title:판매종료일자,required:true,focus:cal_proposalSaleEdate</Col>
            <Col id="poType">title:구매형태,required:true,focus:cbo_poType</Col>
            <Col id="drafterNm">title:기안자,required:true,focus:edt_drafterNm</Col>
            <Col id="salsplceNm">title:매출처명,required:true,focus:edt_salsplceNm</Col>
            <Col id="incoterms">title:Incoterms,required:true,focus:cbo_incoterms</Col>
            <Col id="splrNm">title:매입처명,required:true,focus:edt_splrNm</Col>
            <Col id="proposalExchangeRateDate">title:품의환율일자,required:true,focus:cal_proposalExchangeRateDate</Col>
            <Col id="attachDept">title:귀속부서,required:true,focus:cbo_attachDept</Col>
            <Col id="proposalAmountUnit">title:화폐단위,required:true,focus:cbo_proposalAmountUnit</Col>
            <Col id="dealOtln">title:거래개요,required:true,focus:txt_dealOtln,maxlengthB:500</Col>
            <Col id="dealCondRemark">title:거래조건,required:true,focus:txt_dealCondRemark,maxlengthB:500</Col>
            <Col id="salGainPlanRemark">title:판매계획,required:true,focus:txt_salGainPlanRemark,maxlengthB:500</Col>
            <Col id="priceMgmtRemark">title:가격관리,required:true,focus:txt_priceMgmtRemark,maxlengthB:500</Col>
            <Col id="qualityMgmtSchm">title:품질관리,required:true,focus:txt_qualityMgmtSchm,maxlengthB:500</Col>
            <Col id="poKind">title:구매종류,required:true,focus:cbo_poKind</Col>
            <Col id="proposalClass">title:품의구분,required:true,focus:cbo_proposalClass</Col>
            <Col id="entrySchdDate">title:통관예정일,required:true,focus:cal_entrySchdDate</Col>
            <Col id="lshipSchdDate">title:선적예정일,required:true,focus:cal_lshipSchdDate</Col>
            <Col id="arrivSchdDate">title:입항예정일,required:true,focus:cal_arrivSchdDate</Col>
            <Col id="deliverSchdDate">title:입고예정일,required:true,focus:cal_deliverSchdDate</Col>
            <Col id="splrPayCond">title:매입처 결제조건,required:true,focus:txt_splrPayCond</Col>
            <Col id="salsplcePayCond">title:매출처 결제조건,required:true,focus:txt_salsplcePayCond</Col>
            <Col id="incomeType">title:수입유형,required:true,focus:cbo_incomeType</Col>
            <Col id="proposalExchangeRate">title:품의환율,required:true,focus:edt_proposalExchangeRate</Col>
            <Col id="lcIssuingSchdDate">title:신용장개설일,required:true,focus:cal_lcIssuingSchdDate</Col>
            <Col id="tariffHouseCd">title:관세사,required:true,focus:cbo_tariffHouseNm</Col>
            <Col id="addGvrntaxRate">title:추가관세율,required:true,focus:edt_addGvrntaxRate</Col>
            <Col id="lshipNation">title:선적지항구,required:true,focus:edt_lshipNation</Col>
            <Col id="arrivNationNm">title:도착지항구,required:true,focus:edt_arrivNationNm</Col>
            <Col id="dealScaleRemark">title:거래규모,required:true,focus:edt_dealScaleRemark,maxlengthB:500</Col>
            <Col id="arMgmtSchm">title:채권처리방안,required:true,focus:txt_arMgmtSchm,maxlengthB:500</Col>
            <Col id="whChargAmt">title:보관료,required:true,focus:edt_whChargAmt</Col>
            <Col id="ioutAmt">title:입출고료,required:true,focus:edt_ioutAmt</Col>
            <Col id="comm">title:수수료,required:true,focus:edt_comm</Col>
            <Col id="intRate">title:금리,required:true,focus:edt_intRate</Col>
            <Col id="settleSchdDate">title:결제예정일,required:true,focus:cal_settleSchdDate</Col>
            <Col id="saleType">title:판매유형,required:true,focus:cbo_saleType</Col>
            <Col id="deliverWhCd">title:창고,required:true,focus:btn_deliverWhNm</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_file" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="refSeq" type="STRING" size="256"/>
          <Column id="appendSeq" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="fileSize" type="STRING" size="256"/>
          <Column id="fileExt" type="STRING" size="256"/>
          <Column id="encYn" type="STRING" size="256"/>
          <Column id="fileDesc" type="STRING" size="256"/>
          <Column id="fileUploadNm" type="STRING" size="256"/>
          <Column id="chk" type="INT" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_file2" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="refSeq" type="STRING" size="256"/>
          <Column id="appendSeq" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="fileSize" type="STRING" size="256"/>
          <Column id="fileExt" type="STRING" size="256"/>
          <Column id="encYn" type="STRING" size="256"/>
          <Column id="fileDesc" type="STRING" size="256"/>
          <Column id="fileUploadNm" type="STRING" size="256"/>
          <Column id="chk" type="INT" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_blOtherCost" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="itemCd" type="STRING" size="256"/>
          <Column id="itemNm" type="STRING" size="256"/>
          <Column id="brand" type="STRING" size="256"/>
          <Column id="gradeStand" type="STRING" size="256"/>
          <Column id="blPaym" type="STRING" size="256"/>
          <Column id="otherCost" type="STRING" size="256"/>
          <Column id="gvrntaxRate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_amountUnit" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="Dataset03" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_proposalInfoValidIncom" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="proposalClass" type="STRING" size="256"/>
          <Column id="proposalTitle" type="STRING" size="256"/>
          <Column id="poType" type="STRING" size="256"/>
          <Column id="poKind" type="STRING" size="256"/>
          <Column id="drafterNm" type="STRING" size="256"/>
          <Column id="proposalSaleEdate" type="STRING" size="256"/>
          <Column id="salsplceNm" type="STRING" size="256"/>
          <Column id="splrNm" type="STRING" size="256"/>
          <Column id="attachDept" type="STRING" size="256"/>
          <Column id="deliverSchdDate" type="STRING" size="256"/>
          <Column id="proposalAmountUnit" type="STRING" size="256"/>
          <Column id="dealOtln" type="STRING" size="256"/>
          <Column id="dealCondRemark" type="STRING" size="256"/>
          <Column id="salGainPlanRemark" type="STRING" size="256"/>
          <Column id="priceMgmtRemark" type="STRING" size="256"/>
          <Column id="qualityMgmtSchm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="proposalTitle">title:제목,required:true,focus:edt_proposalTitle</Col>
            <Col id="proposalSaleEdate">title:판매종료일자,required:true,focus:cal_proposalSaleEdate</Col>
            <Col id="poType">title:구매형태,required:true,focus:cbo_poType</Col>
            <Col id="drafterNm">title:기안자,required:true,focus:edt_drafterNm</Col>
            <Col id="salsplceNm">title:매출처명,required:true,focus:edt_salsplceNm</Col>
            <Col id="splrNm">title:매입처명,required:true,focus:edt_splrNm</Col>
            <Col id="attachDept">title:귀속부서,required:true,focus:cbo_attachDept,focus:cbo_attachDept</Col>
            <Col id="proposalAmountUnit">title:화폐단위,required:true,focus:cbo_proposalAmountUnit</Col>
            <Col id="dealOtln">title:거래개요,required:true,focus:txt_dealOtln,maxlengthB:500</Col>
            <Col id="dealCondRemark">title:거래조건,required:true,focus:txt_dealCondRemark,maxlengthB:500</Col>
            <Col id="salGainPlanRemark">title:판매계획,required:true,focus:txt_salGainPlanRemark,maxlengthB:500</Col>
            <Col id="priceMgmtRemark">title:가격관리,required:true,focus:txt_priceMgmtRemark,maxlengthB:500</Col>
            <Col id="qualityMgmtSchm">title:품질관리,required:true,focus:txt_qualityMgmtSchm,maxlengthB:500</Col>
            <Col id="poKind">title:구매종류,required:true,focus:cbo_poKind</Col>
            <Col id="proposalClass">title:품의구분,required:true,focus:cbo_proposalClass</Col>
            <Col id="deliverSchdDate">title:입고예정일,required:true,focus:cbo_attachDept,focus:cal_deliverSchdDate</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_itemListValidIncom" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="itemCd" type="STRING" size="255"/>
          <Column id="itemNm" type="STRING" size="255"/>
          <Column id="unit" type="STRING" size="256"/>
          <Column id="quantity" type="STRING" size="256"/>
          <Column id="uprice" type="STRING" size="256"/>
          <Column id="wonwtrAmt" type="STRING" size="256"/>
          <Column id="wgt" type="STRING" size="256"/>
          <Column id="taxYn" type="STRING" size="256"/>
          <Column id="salsUprice" type="STRING" size="256"/>
          <Column id="salsAmt" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="itemCd">title:품목코드,required:true</Col>
            <Col id="itemNm">title:품목명,required:true</Col>
            <Col id="unit">title:단위,required:true</Col>
            <Col id="quantity">title:수량,required:true</Col>
            <Col id="uprice">title:단가,required:true</Col>
            <Col id="wonwtrAmt">title:원물금액,required:true</Col>
            <Col id="wgt">title:중량,required:true</Col>
            <Col id="taxYn">title:과세여부,required:true</Col>
            <Col id="salsUprice">title:매출단가,required:true</Col>
            <Col id="salsAmt">title:매출액,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : ProposalDtl
  파 일 명 : ProposalDtl.xfdl
  기    능 : Design 및 Script Template 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2015.01.12   kksoo   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";
include "lib::FTCommon.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_iProcessCnt = 0; //저장에 대한 처리건수를 저장한다.(AuthMgmtController에서 할당함.)
var fv_poProposalNum;
var fv_flag;
var fv_focFlag;
var fv_exchangeRate;		//환율
var fv_exchangeRateBasis;	//환율 기준(1 or 100)
var fv_set1;	//실단위
var fv_currRow;
var fv_poType;
var fv_isSearch = false;
var fv_isItemListChange = true;	// 조회시 품목항목 재 계산을 막기위한 변수

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 화면에 default readonly component의 색상을 회색으로 변경 한다.
	for (var i = 0, iLen = this.components.length; i < iLen; i++) {
		if (this.components[i].readonly == true) {
			this.components[i].style.backgroundColor = "#ecececff";
		}
	}
	
	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	// Grid내의 input field를 자동 선택 제어 함수
    var arrExclde = ["HS코드","수수료","창고료","금리","관세율","매입단가","매입액","매출단가","매출액","매출이익액","매출이익률","직접이익액","직접이익률","BL 대금(\\)","통관 및 부대비용(\\)","단위당 OFFER價 比","단위당 도매價 比"];	 
	FTCommon.setGridAutoSelect (this, true, arrExclde);
 
	ds_search.addRow();

	SCCombo.bind2(this, "ComCode", "cbo_poType", null, {groupCode:"PO_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	 //구매형태
	SCCombo.bind2(this, "ComCode", "cbo_saleType", null, {groupCode:"SALE_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 //판매유형 
	SCCombo.bind2(this, "ComCode", "cbo_incoterms", null, {groupCode:"INCOTERMS", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 //Incoterms 
	SCCombo.bind2(this, "ComCode", "cbo_attachDept", null, {groupCode:"ATTACH_DEPT", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	  //귀속부서
	SCCombo.bind2(this, "ComCode", "cbo_proposalAmountUnit", ds_amountUnit, {groupCode:"AMOUNT_UNIT", useYn:"Y", defVal:""}, SCCombo.CHOOSE);  //화폐 단위
	//SCCombo.bind(this, "ComCode", "cbo_tariffHouseCd", null, {groupCode:"TARIFF_HOUSE_CD", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	  //관세사
	SCCombo.bind2(this, "ComCode", "cbo_incomeType", null, {groupCode:"INCOME_TYPE", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	 	  //수입 유형
	// 2015.06.08 jsh
	//SCCombo.bind2(this, "ComCode", "cbo_poCreationYn", null, {groupCode:"CREATION_YN", useYn:"Y", defVal:"N"});	 				  //po 생성여부
	SCCombo.bind2(this, "ComCode", "cbo_proposalClass", null, {groupCode:"PROPOSAL_CLASS", useYn:"Y", defVal:""});	 	  //품의구분
	SCCombo.bind2(this, "ComCode", "cbo_poKind", null, {groupCode:"PO_KIND", useYn:"Y", defVal:""});	 	  //구매종류

	SCCombo.bind2(this, "ComCode", "Tab00.tabpage1.grd_itemList.unit", null, {groupCode:"ITEM_UNIT", useYn:"Y", defVal:""}, SCCombo.CHOOSE);		//단위
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage1.grd_itemList.taxYn", null, {groupCode:"TAX_YN", useYn:"Y", defVal:""}, SCCombo.CHOOSE);			//과세여부
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage1.grd_itemList.hsCd", null, {groupCode:"HS_CD", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	//HS코드

	SCCombo.bind2(this, "ComCode", "Tab00.tabpage2.grd_payList.payCondCd", null, {groupCode:"PAY_TERMS_CD", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	//지불조건
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage2.grd_payList.payCondClass", null, {groupCode:"PAY_COND_CLASS", useYn:"Y", defVal:""}, SCCombo.CHOOSE);	//지불조건구분 : 매입처,매출처
	SCCombo.bind2(this, "ComCode", "Tab00.tabpage3.grd_blckMarkList.limtDaysCd", null, {groupCode:"LIMT_DAYS_CD", useYn:"Y", defVal:"", isLast:true, lastEvent:"fn_doSearch"}, SCCombo.CHOOSE);	//기한일수코드

	//SCPopup.bind(this, "ComCode", "edt_lshipNationNm", "btn_lshipNationNm", null, {groupCode:"NATION_CD", useYn:"Y", design:{title:"국가조회",label:"국가",labelWidth:100,columns:[{text:"국가코드",width:100},{text:"국가명",width:200}]}}, {after:"fn_AfterEventLshipNation"}); //선적국가 after 이벤트 처리
	//SCPopup.bind(this, "ComCode", "edt_arrivNationNm", "btn_arrivNationNm", null, {groupCode:"NATION_CD", useYn:"Y", design:{title:"국가조회",label:"국가",labelWidth:100,columns:[{text:"국가코드",width:100},{text:"국가명",width:200}]}}, {after:"fn_AfterEventArrivNation"}); //도착국가 after 이벤트 처리
	// 2015.06.08 jsh
	//SCPopup.bind(this, "ComCode", "edt_originNationNm", "btn_originNationNm", null, {groupCode:"NATION_CD", useYn:"Y", design:{title:"국가조회",label:"국가",labelWidth:100,columns:[{text:"국가코드",width:100},{text:"국가명",width:200}]}}, {after:"fn_AfterEventoriginNation"}); //원산지 after 이벤트 처리

	SCDataset.bind(this, "ComCode", "Dataset03", {groupCode:"DATA_SET", code:"DEF_FT_TM_CODE", useYn:"Y"}, "fn_defValue");

	//첨부파일 저장소를 webapp아래로 할지 여부 (보안과 관련이 없는 이미지와 파일을 webapp아래로 첨부하는 경우만 사용)
	ObjAtchFile.setWebRepoYn(true);
	ObjAtchFile.setSingleFile(true);
    ObjAtchFile.setDataset("ds_file");
    ObjAtchFile.setMaxFileSize(20);
    
	Tab00.tabpage4.ObjAtchFile2.setWebRepoYn(false);
	Tab00.tabpage4.ObjAtchFile2.setSingleFile(false);
    Tab00.tabpage4.ObjAtchFile2.setDataset("ds_file2");
    Tab00.tabpage4.ObjAtchFile2.setMaxFileSize(20);    

	fv_poProposalNum = gfn_nvl(poProposalNum, "");
	fv_flag = gfn_nvl(flag, "");
	fv_focFlag = gfn_nvl(flag, "");

	if ( fv_flag != "NEW" && fv_flag != "COPY") {	 //신규생성
		cbo_poType.readonly = true;	//구매형태 disabled
	}
	
	cal_proposalSaleEdate.fn_initMonthCal(this, "", "fn_proposalSaleEdateCallBack", ds_proposalInfo, "proposalSaleEdate","Y");	//판매종료일자	
	cal_proposalExchangeRateDate.fn_initMonthCal(this, "", "fn_proposalExchangeRateDateCallBack", ds_proposalInfo, "proposalExchangeRateDate","Y");	//품의환율일자	
	cal_lcIssuingSchdDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_proposalInfo, "lcIssuingSchdDate", "Y");		//L/C개설일자	
	cal_lshipSchdDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_proposalInfo, "lshipSchdDate","Y");				//선적예정일자
	cal_arrivSchdDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_proposalInfo, "arrivSchdDate","Y");		//도착예정일자
	cal_entrySchdDate.fn_initMonthCal(this, "", "fn_calendarCallBack", ds_proposalInfo, "entrySchdDate","Y");		//통관예정일자
	cal_deliverSchdDate.fn_initMonthCal(this, "", "fn_deliverSchdDateCallBack", ds_proposalInfo, "deliverSchdDate","Y");		//입고예정일자
	cal_settleSchdDate.fn_initMonthCal(this, "", "fn_deliverSchdDateCallBack", ds_proposalInfo, "settleSchdDate","Y");		//결재예정일자
	
	cal_proposalUpnewDate.fn_initMonthCal(this, "", "", ds_proposalInfo, "proposalUpnewDate","Y");		//품의상신일자
	cal_proposalApprvDate.fn_initMonthCal(this, "", "", ds_proposalInfo, "proposalApprvDate","Y");		//품의상신일자
	
	setGroupInfo("A");	//품의구분에 따른 구룹웨어 정보 활성화 세팅
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 콤보코드 최종 callback 함수
 *---------------------------------------------------------------------------------------------*/
function fn_doSearch()
{
	// 수입/내수 구분 Enable 세팅
	fn_setPoTypeEnable(false);

	if ( fv_poProposalNum == "" ) {
		ds_proposalInfo.insertRow(0);
		
		cbo_proposalClass.index = 0;
		cbo_poKind.index = 0;
		
	} else {
		fn_search();
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
 	// v_ds_check 미사용시 변경사항 체크
 	if (gfn_dsIsUpdated(ds_itemList) || gfn_dsIsUpdated(ds_payList) || gfn_dsIsUpdated(ds_blckMarkList) || gfn_dsIsUpdated(ds_file2) ) 
 	{
		// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
 		var retValue = gfn_confirm("confirm.before.search");
 		if (retValue == false) return;
 	}
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(Tab00.tabpage1.grd_itemList);
    gfn_clearSortMark(Tab00.tabpage2.grd_payList);
    gfn_clearSortMark(Tab00.tabpage3.grd_blckMarkList);
    
    //코드목록을 초기화한다.
    ds_itemList.clearData();
    ds_payList.clearData();
    ds_blckMarkList.clearData();

	ds_search.setColumn(0, "poProposalNum", fv_poProposalNum);
	ds_search.setColumn(0, "flag", fv_flag);
	
	// 품목항목 재 계산 막기
	fv_isItemListChange = false;
	fv_isSearch = true;
	
    var strSvcID    = "selectProposalDtl";
    var strURL      = "ft/ftp/selectProposalDtl.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_search=ds_search ds_proposalInfo=ds_proposalInfo ds_itemList=ds_itemList ds_payList=ds_payList ds_blckMarkList=ds_blckMarkList ds_file=ds_file ds_file2=ds_file2";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		//품의 조회
        case "selectProposalDtl" :
			// 2015.06.24 김영은M 요청으로 작성중인 경우에만 버튼 활성화
			if ( fv_flag != "COPY" && ds_proposalInfo.getColumn(0, "poProposalStatus") != '10') {	//승인완료시 저장버튼 비활성화
				btn_save.enable   = false;
				btn_temSave.enable   = false;
			}

			if ( fv_flag == "COPY" ) {	 //품의복사
				ds_proposalInfo.setColumn(0, "proposalSaleEdate", ""  );	//판매종료일자	
				ds_proposalInfo.setColumn(0, "lcIssuingSchdDate", ""  );	//L/C개설일자	
				ds_proposalInfo.setColumn(0, "lshipSchdDate", ""  );		//선적예정일자
				ds_proposalInfo.setColumn(0, "proposalExchangeRateDate", ""  );	//품의환율일자	
				ds_proposalInfo.setColumn(0, "arrivSchdDate", ""  );			//도착예정일자
				ds_proposalInfo.setColumn(0, "entrySchdDate", ""  );			//통관예정일자
				ds_proposalInfo.setColumn(0, "deliverSchdDate", ""  );			//입고예정일자
			} else {
				cal_proposalSaleEdate.fn_setValue(ds_proposalInfo.getColumn(0, "proposalSaleEdate"));	//판매종료일자	
				cal_proposalExchangeRateDate.fn_setValue(ds_proposalInfo.getColumn(0, "proposalExchangeRateDate"));	//품의환율일자	
				cal_lcIssuingSchdDate.fn_setValue(ds_proposalInfo.getColumn(0, "lcIssuingSchdDate"));	//L/C개설일자	
				cal_lshipSchdDate.fn_setValue(ds_proposalInfo.getColumn(0, "lshipSchdDate"));	//선적예정일자
				cal_arrivSchdDate.fn_setValue(ds_proposalInfo.getColumn(0, "arrivSchdDate"));		//도착예정일자
				cal_entrySchdDate.fn_setValue(ds_proposalInfo.getColumn(0, "entrySchdDate"));		//통관예정일자
				cal_deliverSchdDate.fn_setValue("");		//입고예정일자
				cal_settleSchdDate.fn_setValue("");			//결재예정일자
			}
			fn_setSize(ds_proposalInfo.getColumn(0, "poType"));	   //구매형태 변경시  offeer,도매 사이즈 세팅
			fn_setCbo_proposalAmountUnit(ds_proposalInfo.getColumn(0, "poType"));	//환율 단위 세팅
			edt_drafterNm.setNmKor(ds_proposalInfo.getColumn(0, "drafterNm"));	// 기안자 세팅
			
			// 수입
			var bEnable = true;
			if (ds_proposalInfo.getColumn(0, "poType") == '10') {
				bEnable = true;
			} else {
				bEnable = false;
			}
			fn_setPoTypeEnable(bEnable); 
			fv_poType = ds_proposalInfo.getColumn(0, "poType") ;
			
			//trace(ds_itemList.saveXML());
			
			// 품목항목 재 계산 활성화
			fv_isItemListChange = true;
			
			if ( fv_poProposalNum != "" ) {		//키값 있을시 품의구분 disabled
				if ( cbo_attachDept.value == "40" ) { // 가공식품팀
					if ( cbo_proposalClass.value == "B" ) {
						cbo_proposalClass.enable = true;
						setGroupInfo("B");
					} else {
						cbo_proposalClass.enable = false;
					}
				} else {
					cbo_proposalClass.enable = false;
				}
			}
			if ( ds_proposalInfo.getColumn(0, "splrCd") == "" ) {	//매입처코드 없을시
				edt_splrNm.enable = true;
			}
			else
			{
				edt_splrNm.enable = false;
			}
			if ( ds_proposalInfo.getColumn(0, "salsplceCd") == "" ) {	//매출처코드 없을시
				edt_salsplceNm.enable = true;
			} 
			else
			{
				edt_salsplceNm.enable = false;
			}
			
			fv_isSearch = false;
			
            break;
        // 저장
        case "save" :
			if (fv_iProcessCnt > 0) {
				gfn_alert("msg.save.success");	// 저장 되었습니다.
				//alert("품의서 번호["+fv_poProposalNum+"]가 생성되었습니다.");
				fv_flag = "UPDATE";
				fn_search();
			}
            break;
        case "getExchangeRate":
			if ( fv_exchangeRate != "" )
			{
				ds_proposalInfo.setColumn(0, "proposalExchangeRate", fv_exchangeRate / fv_exchangeRateBasis);
				// maskEdit때문에 강제 로직을 태운다.
				edt_proposalExchangeRate_canchange(edt_proposalExchangeRate,  new ChangeEventInfo());
			}
			break;
        case "getUnitInfo":
			if ( fv_set1 != "" )
			{
				ds_itemList.setColumn(fv_currRow, "set1", fv_set1  );
				fn_calSale(fv_currRow, 'CHANGE', '1');	  //판매 및 이익계획 자동계산식 적용				
			}
			break;			
    }
}

//3. after 이벤트 처리
function fn_AfterEventLshipNation(p, data)
{
	//edt_LshipNationNm.userdata = data.code;	  //저장시  edt_LshipNationCd 값에 담는다.
	ds_proposalInfo.setColumn(0, "lshipNationCd", data.code  );
}

//3. after 이벤트 처리
function fn_AfterEventArrivNation(p, data)
{
	ds_proposalInfo.setColumn(0, "arrivNationCd", data.code  );
}

//3. after 이벤트 처리
function fn_AfterEventoriginNation(p, data)
{
	ds_proposalInfo.setColumn(0, "originNationCd", data.code  );
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save(temp)
{
	if ( fv_flag == "COPY" ) {	 //품의복사
		ds_proposalInfo.updatecontrol = false;
		bSucc = ds_proposalInfo.setRowType(0, Dataset.ROWTYPE_INSERT);
		ds_proposalInfo.updatecontrol = true;

		ds_itemList.updatecontrol = false;
		for ( var i=0; i<ds_itemList.getRowCount(); i++ ) {
			bSucc = ds_itemList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_itemList.updatecontrol = true;

		ds_payList.updatecontrol = false;
		for ( var i=0; i<ds_payList.getRowCount(); i++ ) {
			bSucc = ds_payList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_payList.updatecontrol = true;

		ds_blckMarkList.updatecontrol = false;
		for ( var i=0; i<ds_blckMarkList.getRowCount(); i++ ) {
			bSucc = ds_blckMarkList.setRowType(i, Dataset.ROWTYPE_INSERT);
		}
		ds_blckMarkList.updatecontrol = true;
	}
	
	//v_ds_check 미사용시 변경사항 체크
 	if ( !gfn_dsIsUpdated(ds_proposalInfo) && !gfn_dsIsUpdated(ds_itemList) && !gfn_dsIsUpdated(ds_payList)  && !gfn_dsIsUpdated(ds_blckMarkList) && !gfn_dsIsUpdated(ds_file) && !gfn_dsIsUpdated(ds_file2))
 	{
 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
 		return;
 	}
 	
	// 첨부 파일 추가가 있을때만
	if(ObjAtchFile.fn_countDs("insert") > 0)
	{	
		var rtn = ObjAtchFile.fn_uploadFile();		
		ds_proposalInfo.updatecontrol = false;
		bSucc = ds_proposalInfo.setRowType(0, Dataset.ROWTYPE_UPDATE);
		ds_proposalInfo.updatecontrol = true;		
		if (rtn < 0)	return;
	}		

	// 첨부 파일 추가가 있을때만
	if(Tab00.tabpage4.ObjAtchFile2.fn_countDs("insert") > 0)
	{	
		var rtn = Tab00.tabpage4.ObjAtchFile2.fn_uploadFile();		
		ds_proposalInfo.updatecontrol = false;
		bSucc = ds_proposalInfo.setRowType(0, Dataset.ROWTYPE_UPDATE);
		ds_proposalInfo.updatecontrol = true;		
		if (rtn < 0)	return;
	}			

	if ( gfn_nvl(ds_proposalInfo.getColumn(0, "poType"),"") == "") 
	{
		gfn_alert("구매형태는 필수 입력 항목입니다.");
		cbo_poType.setFocus();
		return;
	}
    if ( ds_proposalInfo.getColumn(0, "proposalClass")  == "B" )    //품의구분 :그룹웨어 	
    {
		if ( gfn_nvl(ds_proposalInfo.getColumn(0, "groupProposalNum"),"") == "") 
		{
			gfn_alert("품의서번호(G)는 필수 입력 항목입니다.");
			edt_groupPoProposalNum.setFocus();
			return;
		}
		if ( gfn_nvl(ds_proposalInfo.getColumn(0, "proposalUpnewDate"),"") == "") 
		{
			gfn_alert("품의상신일자는 필수 입력 항목입니다.");
			cal_proposalUpnewDate.setFocus();
			return;
		}
		if ( gfn_nvl(ds_proposalInfo.getColumn(0, "proposalApprvDate"),"") == "") 
		{
			gfn_alert("품의승인일자는 필수 입력 항목입니다.");
			cal_proposalApprvDate.setFocus();
			return;
		}		
    }

	if ( temp != "TEMP" ) {	//임시저장
		if ( parseInt(ds_proposalInfo.getColumn(0, "deliverSchdDate")) < ds_proposalInfo.getColumn(0, "lshipSchdDate") )	//입고예정일은 반드시 선적예정일 보다 뒤에있는 날짜여야합니다.
		{
			gfn_alert("입고예정일은 반드시 선적예정일 보다 뒤에있는 날짜여야합니다.");
			cal_deliverSchdDate.mae_cal.setFocus();
			
			return;
		}
		//선적예정일- cal_lshipSchdDate < 입항예정일 - cal_arrivSchdDate < 입고예정일 -cal_deliverSchdDate <통관예정일 - cal_entrySchdDate < 판매예정일 - cal_proposalSaleEdate
		
		if ( parseInt(ds_proposalInfo.getColumn(0, "arrivSchdDate")) < ds_proposalInfo.getColumn(0, "lshipSchdDate") )
		{
			gfn_alert("입항예정일은 반드시 선적예정일 보다 뒤에있는 날짜여야합니다.");
			cal_arrivSchdDate.mae_cal.setFocus();
			
			return;
		}

		if ( parseInt(ds_proposalInfo.getColumn(0, "deliverSchdDate")) < ds_proposalInfo.getColumn(0, "arrivSchdDate") )
		{
			gfn_alert("입고예정일은 반드시 입항예정일 보다 뒤에있는 날짜여야합니다.");
			cal_deliverSchdDate.mae_cal.setFocus();
			
			return;
		}

		if ( parseInt(ds_proposalInfo.getColumn(0, "entrySchdDate")) < ds_proposalInfo.getColumn(0, "deliverSchdDate") )
		{
			gfn_alert("통관예정일은 반드시 입고예정일 보다 뒤에있는 날짜여야합니다.");
			cal_entrySchdDate.mae_cal.setFocus();
			
			return;
		}

		if ( parseInt(ds_proposalInfo.getColumn(0, "proposalSaleEdate")) < ds_proposalInfo.getColumn(0, "entrySchdDate") )
		{
			gfn_alert("판매예정일은 반드시 통관예정일 보다 뒤에있는 날짜여야합니다.");
			cal_proposalSaleEdate.mae_cal.setFocus();
			
			return;
		}

		
		// 저장시 Validation Check
		if (gfn_isNull(cbo_poType.value)) {
			gfn_alert("구매형태를 선택하여 주십시오!");
			return;
		}
		if (cbo_poType.value == "10") {	// 수입
			if (gfn_validCheck(ds_proposalInfo, ds_proposalInfoValid) == false)	return;
		} else {	// 내수
			if (gfn_validCheck(ds_proposalInfo, ds_proposalInfoValidIncom) == false) return;
		}

//재고 저장용으로 임시로 주석 
// 		if (gfn_nvl(edt_refSeq01.value, "")== "") 
// 		{	
// 			gfn_alert("거래구조 이미지는 필수 입력항목입니다.");
// 			btn_fileAdd.setFocus();
// 			return;
// 		}
		// 판매유형이 계약인 경우에는 수수료 필수
		if (cbo_saleType.value == "20" && (Number(edt_comm.value) <= 0 || gfn_isNull(edt_comm.value))) {
			gfn_alert("수수료는 필수 입니다.");
			edt_comm.setFocus();
			return;
		}

		if (cbo_poType.value == "10") {	// 수입
			if (gfn_validCheck(Tab00.tabpage1.grd_itemList, ds_itemListValid) == false)	return;
		} else {	// 내수
			if (gfn_validCheck(Tab00.tabpage1.grd_itemList, ds_itemListValidIncom) == false)	return;
		}		
		
		if (gfn_validCheck(Tab00.tabpage2.grd_payList, ds_payListValid) == false) {
			Tab00.tabindex = 1;
			return;
		}
		if (gfn_validCheck(Tab00.tabpage3.grd_blckMarkList, ds_blckMarkListValid) == false) {
			Tab00.tabindex = 2;
			return;
		}
		if ( ds_itemList.getRowCount() == 0 )
		{
			gfn_alert("품목탭의 품목을 등록하세요.");
			Tab00.tabindex = 0;
			return;
		}
		
		//품목의 매입액 합계 [ $1 ] 와 지불조건의 지불예정금 합계[ $2 ] 같게 체크 : 물품대금시 지불금액으로 지불
		if ( ds_payList.getRowCount() == 0 )
		{
			gfn_alert("지불조건을 입력하세요");
			Tab00.tabindex = 1;
			return;
		}
		
		if ( ds_itemList.getSum("wonwtrAmt") != ds_payList.getCaseSum("payCondClass=='B'","payExpectAmt") ) 
		{
			gfn_alert("ftp.validator.no.same", gfn_numFormat(ds_itemList.getSum("wonwtrAmt"))+"^"+gfn_numFormat(ds_payList.getCaseSum("payCondClass=='B'","payExpectAmt")) );	//품목의 매입액 합계 [ $1 ] 와 지불조건의 지불예정금 합계[ $2 ] 은 같아야 합니다.
			return;
		}
	}
	
    if ( ds_proposalInfo.getColumn(0, "proposalClass")  == "B" )    //품의구분 :그룹웨어 	
    {
		if ( gfn_nvl(temp,"")  == "TEMP" ) 
		{
			if (!gfn_confirm("품의구분 그룹웨어 임시저장시 수정 가능합니다. \n임시저장 하시겠습니까?")) return false;
		}
		else
		{
			if (!gfn_confirm("품의구분 그룹웨어 저장시 \n품의 승인완료 상태가 되며 수정할 수 없습니다. \n저장 하시겠습니까?")) return false;
		}
    } 
    else
    {
		if ( fv_flag == "COPY" ) {	 //품의복사
			// 품의복사 하시겠습니까?
			if (!gfn_confirm("ftp.confirm.before.copy")) return false;
		} else {
			if ( fv_poProposalNum == "" ) 
			{	 
				if (!gfn_confirm("confirm.before.save")) return false;
			} 
			else
			{
				// 품의번호[ $1 ]에 대하여 저장 하시겠습니까?
				if (!gfn_confirm("ftp.err.validator.proposal.save",edt_poProposalNum.value)) return false;
			}
		}
	}

	ds_search.setColumn(0, "flag", fv_flag); 
	ds_search.setColumn(0, "temp", gfn_nvl(temp,""));

    var strSvcID    = "save";
    var strURL      = "ft/ftp/saveProposalDtl.xdo";
    var strInDs     = "ds_search=ds_search ds_proposalInfo=ds_proposalInfo:U ds_itemList=ds_itemList:U ds_payList=ds_payList:U ds_blckMarkList=ds_blckMarkList:U ds_file=ds_file:A ds_file2=ds_file2:A";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow1(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_itemList.insertRow(ds_itemList.getRowCount()+1);
	if ( edt_poProposalNum.value != "" ) {	 
		ds_itemList.setColumn(insRow, "poProposalNum", edt_poProposalNum.value  );
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow(obj:Button,  e:ClickEventInfo)
{
	var bSucc = ds_itemList.deleteRow(ds_itemList.rowposition);
}

function grd_itemList_oncellclick(obj:Grid, e:GridClickEventInfo)
{
/*
	var colName = eval(obj.binddataset).getColID(e.col);
*/
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지물조건 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow2(obj:Button,  e:ClickEventInfo)
{
	var insRow = ds_payList.insertRow(ds_payList.getRowCount()+1)
	ds_payList.setColumn(insRow, "payCondClass", "B");
	if ( edt_poProposalNum.value != "" ) {	 
		ds_payList.setColumn(insRow, "poProposalNum", edt_poProposalNum.value  );
		ds_payList.setColumn(insRow, "payExpectAmt", ds_itemList.getSum("wonwtrAmt")  );
		if ( fv_poType == '20' )	//내수
		{
			ds_payList.setColumn(insRow, "payCondCd", "3AB"  );	  //내수:내수송금 세팅
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :패널티 행추가
 *---------------------------------------------------------------------------------------------*/
function fn_addRow3(obj:Button,  e:ClickEventInfo)
{
	if ( ds_blckMarkList.getRowCount() >= 1 )
	{
		gfn_alert("1건만 등록 가능합니다.");
		return;
	}
	var insRow = ds_blckMarkList.insertRow(ds_blckMarkList.getRowCount()+1)
	if ( edt_poProposalNum.value != "" ) {	 
		ds_blckMarkList.setColumn(insRow, "poProposalNum", edt_poProposalNum.value  );
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지불조건 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow2(obj:Button,  e:ClickEventInfo)
{
	var bSucc = ds_payList.deleteRow(ds_payList.rowposition);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 패널티 행삭제
 *---------------------------------------------------------------------------------------------*/
function fn_deleteRow3(obj:Button,  e:ClickEventInfo)
{
	var bSucc = ds_blckMarkList.deleteRow(ds_blckMarkList.rowposition);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 그리드 품목 팝업 expand시
 *---------------------------------------------------------------------------------------------*/
function grd_itemList_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row <= -1) return;
    var sColumn = gfn_getCellColId(obj, e.col);

	//Expand 클릭시
	if (sColumn == "itemCd")
	{
		if ( fv_poType == '10' )	//수입
		{
			var arrParam = new Array();
			arrParam[0] = "";	// 전송할 파라미터 1 
			arrParam[1] = gfn_trim(gfn_nvl(ds_itemList.getColumn(e.row, "itemNm"), ""));	// 전송할 파라미터 2
			var  arrRtn = gfn_dialog("TermbyGvrntaxRatePop"				// dialogId
							   , "X_FSI::TermbyGvrntaxRatePop.xfdl"			// 품목찾기 팝업 호출 
							   , {fv_Contents:arrParam}			// 배열
							   , null, null, null, null, null, false, true, -1);
			if ( arrRtn instanceof Object )
			{
				ds_itemList.setColumn(e.row, "itemCd", arrRtn["itemCd"]  );
				ds_itemList.setColumn(e.row, "itemNm", arrRtn["itemNm"]+" "+arrRtn["itemSize"]  );	
				ds_itemList.setColumn(e.row, "brand", arrRtn["maker"]  );	
				ds_itemList.setColumn(e.row, "gradeStand", arrRtn["itemSize"]  );	
				ds_itemList.setColumn(e.row, "origin", arrRtn["originType"]  );	
				ds_itemList.setColumn(e.row, "hsCd", arrRtn["hsCd"]  );	
				//alert(arrRtn["kgConvertRate"]);
				ds_itemList.setColumn(e.row, "kgConvertRate", arrRtn["kgConvertRate"]  );	//구매단위당 kg 환산 비율	
				ds_itemList.setColumn(e.row, "gvrntaxRate", (toNumber(arrRtn["gvrntaxRate"]) )  );	//추가 관세율
				ds_itemList.setColumn(e.row, "taxYn", arrRtn["taxCode"]  );		//과세구분
			}
		}
		else
		{
			var arrParam = new Array();
			arrParam[0] = gfn_nvl(ds_itemList.getColumn(e.row, "itemCd"), "");	// 전송할 파라미터 1
			var  arrRtn = gfn_dialog("ItemSearchPop"				// dialogId
							   , "X_FSI::ItemSearchPop.xfdl"			// 품목찾기 팝업 호출
							   , {fv_Contents:arrParam}			// 배열
							   , null, null, null, null, null, false, true, -1);
			if ( arrRtn instanceof Object )
			{
				ds_itemList.setColumn(e.row, "itemCd", arrRtn["itemCode"]  );
				ds_itemList.setColumn(e.row, "itemNm", arrRtn["itemName"]+" "+arrRtn["itemSize"]  );	
				ds_itemList.setColumn(e.row, "brand", arrRtn["maker"]  );	
				ds_itemList.setColumn(e.row, "gradeStand", arrRtn["itemSize"]  );	
				ds_itemList.setColumn(e.row, "origin", arrRtn["originType"]  );	
				ds_itemList.setColumn(e.row, "hsCd", arrRtn["hsCd"]  );	
				ds_itemList.setColumn(e.row, "kgConvertRate", arrRtn["kgConvertRate"]  );	//구매단위당 kg 환산 비율	
				ds_itemList.setColumn(e.row, "taxYn", arrRtn["taxCode"]  );		//과세구분
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목 그리드 값 변경시
 *---------------------------------------------------------------------------------------------*/
function ds_itemList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 조회시 품목항목 재 계산 비 활성화
	if (fv_isItemListChange == false) return;

	var quantity = gfn_nvl(ds_itemList.getColumn(e.row, "quantity"));
	var uprice = gfn_nvl(ds_itemList.getColumn(e.row, "uprice"));
	var wgt = gfn_nvl(ds_itemList.getColumn(e.row, "wgt"));

	//ds_itemList.setColumn(e.row, "wonwtrAmt", quantity * uprice);
	
	if(e.columnid == "quantity" ) 
	{
		fv_currRow = e.row;
		if (e.columnid == "unit") fn_getUnitInfo( gfn_nvl(ds_itemList.getColumn(e.row, "unit")) );
		var kgConvertRate = gfn_nvl(ds_itemList.getColumn(e.row, "kgConvertRate"));
		var unit = gfn_nvl(ds_itemList.getColumn(e.row, "unit"));
		//alert(ds_itemList.getColumn(e.row, "set1") +"//"+kgConvertRate+"//"+quantity+"//"+(kgConvertRate * quantity));
		if ( ds_itemList.getColumn(e.row, "set1") == "KG" )
		{	
			//ds_itemList.setColumn(e.row, "wgt", kgConvertRate * quantity );
		} 
		else
		{
			if ( unit == 'BOX')
			{
				//alert(kgConvertRate +"//"+ quantity);
				ds_itemList.setColumn(e.row, "wgt", kgConvertRate * quantity );
			}
		}
		fn_calSale(e.row, 'CHANGE', "1", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}
	 
	else if( e.columnid == "wgt" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "1", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}	
	else if( e.columnid == "uprice" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "1", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}		
	else if( e.columnid == "taxYn" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "1", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}		
	else if( e.columnid == "unit" ) 
	{
		fv_currRow = e.row;
		fn_getUnitInfo( gfn_nvl(ds_itemList.getColumn(e.row, "unit")) );
		fn_calSale(e.row, 'CHANGE', "1", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}	
	else if( e.columnid == "wonwtrAmt" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "2", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}		
	else if( e.columnid == "gvrntaxRate" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "1", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}		
	else if( e.columnid == "offer" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "2", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}	
	else if( e.columnid == "buyPrice" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "2", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}	
	
	else if( e.columnid == "wholeSale" ) 
	{
		fv_currRow = e.row;
		fn_calSale(e.row, 'CHANGE', "2", e.columnid);	  //판매 및 이익계획 자동계산식 적용
	}	
	else if( e.columnid == "salsUprice" ) 
	{
		fv_currRow = e.row; 
		fn_calSale(e.row, 'CHANGE', "2", e.columnid);	  //판매 및 이익계획 자동계산식 적용 
	}	
	
	// 원물금액이 변경되면 지불조건탭의 지급금액에 합계를 넣어준다.
	var nWonwtrAmt = 0;
	// 품목탭의 원물금액을 합산한다.
	for (var i = 0; i < ds_itemList.getRowCount(); i++) {
		nWonwtrAmt += Number(gfn_nvl(ds_itemList.getColumn(i, "wonwtrAmt"))); 
	}
	// 지불조건택의 지급금액에 합계를 넣는다.
	for (var i = 0; i < ds_payList.getRowCount(); i++) {
		ds_payList.setColumn(i, "payExpectAmt", nWonwtrAmt); 
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :단위변경시 단위에 해당하는 실단위 가져오기
 *---------------------------------------------------------------------------------------------*/
function fn_getUnitInfo(unit)
{
	ds_search.setColumn(0, "unit", unit);
	
    var strSvcID    = "getUnitInfo";
    var strURL      = "ft/ftp/getUnitInfo.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 상단 항목들(proposalInfo)이 변경되면 재 계산할지 여부 출력
 *---------------------------------------------------------------------------------------------*/
function fn_reCalcurateChk(eventNm)
{
	var retVal = "change";
	
	// 상단 항목(proposalInfo)의 값이 수정될 경우
	// 확인창을 띄운다.
	// Client도 모르게 재 계산되는 부분 때문에 추가 - 2015.12.18
	if (eventNm == 'whChargAmt' ||
	    eventNm == 'ioutAmt' ||
	    eventNm == 'proposalExchangeRate' ||
	    eventNm == 'comm' ||
	    eventNm == 'deliverSchdDate' ||
	    eventNm == 'proposalSaleEdate' ||
	    eventNm == 'intRate' ||
	    eventNm == 'attachDept' ||
	    eventNm == 'addGvrntaxRate'
	   ) {
		var tmpMsg = "";
		switch(eventNm) {
			case "whChargAmt":
				tmpMsg = "창고보관료 항목이 변경 되었습니다.";
				break;
			case "ioutAmt":
				tmpMsg = "창고 입출고액 항목이 변경 되었습니다.";
				break;
		    // 품의환율은 직접 입력도하고 조회시 환율을 가져오기때문에
		    // 동일 날짜 비교하면 안된다.
			case "proposalExchangeRate":
				tmpMsg = "품의환율 항목을 재조회 하였습니다.";
				break;
			case "comm":
				tmpMsg = "수수료 항목이 변경 되었습니다.";
				break;
			case "deliverSchdDate":
				tmpMsg = "입고예정일 항목이 변경 되었습니다.";
				break;
			case "proposalSaleEdate":
				tmpMsg = "판매종료일 항목이 변경 되었습니다.";
				break;
			case "intRate":
				tmpMsg = "금리 항목이 변경 되었습니다.";
				break;
			case "addGvrntaxRate":
				tmpMsg = "추가관세율 항목이 변경 되었습니다.";
				break;
		}
		var retValue = gfn_confirm(tmpMsg + " \n품목탭의 값들을 재 계산 하시겠습니까?");
		if (retValue == false) retVal = "noChange";
	}
	
	return retVal;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 판매 및 이익계획 자동계산식 적용
 *---------------------------------------------------------------------------------------------*/
function fn_calSale(row, flag, calGubun, eventNm)
{
	// 조회시에는 품목항목 재 계산 비 활성화
	if (fv_isItemListChange == false) return;
	
	var base;
	//계산 기준 : KG이면 중량 단위가 BOX나 BDL이면 수량	
	if ( ds_itemList.getColumn(row, "set1") == "KG" )
	{
		base = ds_itemList.getColumn(row, "wgt");
	} 
	else
	{
		base = ds_itemList.getColumn(row, "quantity");
	}
	//alert(base);
	//매입원가 자동 계산 = 단가* 환률 *관세율 
	
	var buyPrice;
	if ( eventNm == "buyPrice" )
	{
		buyPrice = ds_itemList.getColumn(row, "buyPrice");
	}
	else
	{
		if ( ds_proposalInfo.getColumn(0, "poType") == '10' ) 	//수입
		{
			//alert(toNumber(ds_itemList.getColumn(row, "gvrntaxRate")));
			//alert(ds_proposalInfo.getColumn(0, "proposalExchangeRate") +"//"+toNumber(ds_itemList.getColumn(row, "gvrntaxRate")) +"//"+toNumber(ds_proposalInfo.getColumn(0, "addGvrntaxRate")) );
			var calGvrntaxRate = 1+ (toNumber(ds_itemList.getColumn(row, "gvrntaxRate")) + toNumber(ds_proposalInfo.getColumn(0, "addGvrntaxRate")))/100 ;
			//trace("1+("+ toNumber(ds_itemList.getColumn(row, "gvrntaxRate")) +"+"+ toNumber(ds_proposalInfo.getColumn(0, "addGvrntaxRate"))+"/100"+"="+calGvrntaxRate);
			buyPrice = ds_itemList.getColumn(row, "uprice") * ds_proposalInfo.getColumn(0, "proposalExchangeRate") * calGvrntaxRate ;
			//alert("buyPrice :"+ds_itemList.getColumn(row, "uprice") +"*"+ ds_proposalInfo.getColumn(0, "proposalExchangeRate") +"*"+ calGvrntaxRate );
		}
		else	//내수는 환율, 관세율 고려않는다. - 확인필요
		{
			buyPrice = ds_itemList.getColumn(row, "uprice");
		}	
	}

	//alert(ds_itemList.getColumn(row, "uprice") +"*"+ds_proposalInfo.getColumn(0, "proposalExchangeRate") +"*"+ calGvrntaxRate +"="+buyPrice);
	var wonwtrAmt = 0;
// 	if (calGubun == undefined || calGubun == "1") {
// 	} else {
// 		wonwtrAmt = Math.round(ds_itemList.getColumn(row, "wonwtrAmt"),2);
// 	}
	//trace("calGubun ==> " + calGubun + " , wonwtrAmt ==> " + wonwtrAmt);

	if ( eventNm == "wonwtrAmt" )
	{
 		wonwtrAmt = Math.round(ds_itemList.getColumn(row, "wonwtrAmt"),2);
	} 
	else
	{
		if ( eventNm == "unit" || eventNm == "uprice" || eventNm == "quantity" || eventNm == "wgt")
		{
			wonwtrAmt = ds_itemList.getColumn(row, "uprice") * base;	//단가 * 중량(수량)
			//매입금액 = 매입가 * 축산(중량) 수산(수량) 
			if ( isNaN(wonwtrAmt) ) wonwtrAmt = 0;
			ds_itemList.setColumn(row, "wonwtrAmt",  Math.round( wonwtrAmt,2 ) );		//wonwtrAmt,buyAmt 
		}
	}
 	
	//var wonwtrAmt = ds_itemList.getColumn(row, "uprice") * base;	//단가 * 중량(수량)
	//if ( isNaN(wonwtrAmt) ) wonwtrAmt = 0;
	//ds_itemList.setColumn(row, "wonwtrAmt",  Math.round( wonwtrAmt ) );		//wonwtrAmt,buyAmt 
	//alert(ds_itemList.getColumn(row, "uprice") +"//"+ base+"//"+wonwtrAmt);
	//alert(buyPrice +"//"+ base);
	if ( eventNm != "offer" && eventNm != "wholeSale" ) 
	{	
		var buyAmt = buyPrice * base;
		
		//alert("buyAmt = "+buyPrice +"*"+ base+"="+buyAmt);
		if ( isNaN(buyPrice) ) buyPrice = 0;
		//매입원가 =  단가* 관세율 * 환률
		ds_itemList.setColumn(row, "buyPrice",  Math.round( buyPrice ) );			
		//매입금액 = 매입가 * 축산(중량) 수산(수량) 
		ds_itemList.setColumn(row, "buyAmt",  Math.round( buyAmt ) );	
		//수수료 = 원가금액 /(1-수수료) -원가금액
		var comm = buyAmt / ( 1- ds_proposalInfo.getColumn(0, "comm") / 100 ) - buyAmt;
		
		//alert(buyAmt +"/+(1-" + ds_proposalInfo.getColumn(0, "comm") +"/100" +")-"+  buyAmt +"="+comm );
		
		if ( isNaN(comm) ) comm = 0;
		ds_itemList.setColumn(row, "comm",  Math.round( comm ) );	
	 
		var taxYn = ds_itemList.getColumn(row, "taxYn");
		var biyul = 1;
		if ( taxYn == "N" )
		{
			biyul = 1.1;
		}
	 
		//창고료 = 판매중량 * 0.7(창고료) * 일수() +  판매중량 *7(입출고료)
		var days = gfn_getDiffDay( ds_proposalInfo.getColumn(0,"deliverSchdDate") , ds_proposalInfo.getColumn(0,"proposalSaleEdate") );
		//alert(ds_proposalInfo.getColumn(0,"deliverSchdDate") +"/"+ ds_proposalInfo.getColumn(0,"proposalSaleEdate")  +"="+days);
		if ( isNaN(days) ) days = 0;
		var whCost = base * (ds_proposalInfo.getColumn(0, "whChargAmt") * biyul) * days + base * ds_proposalInfo.getColumn(0,"ioutAmt");
		//alert( base +"*"+ "("+ds_proposalInfo.getColumn(0, "whChargAmt") + "*"+ biyul+") *"+ days  + "+"+  base  + "*"+  ds_proposalInfo.getColumn(0,"ioutAmt") +"="+whCost);
		if ( isNaN(whCost) ) whCost = 0;
		ds_itemList.setColumn(row, "whCost",  Math.round( whCost ) );	
		//금리 = 원가금액 * 일수 * 7%/365
		var days2 = gfn_getDiffDay( ds_proposalInfo.getColumn(0,"settleSchdDate") , ds_proposalInfo.getColumn(0,"proposalSaleEdate") );
		var intRate = buyAmt * days2 * ds_proposalInfo.getColumn(0,"intRate") / 100 /365;
		//trace(buyAmt +"*"+ days2 +"*"+ ds_proposalInfo.getColumn(0,"intRate") +"/ 100 /365"+"="+intRate);
		if ( isNaN(intRate) ) intRate = 0;
		ds_itemList.setColumn(row, "intRate",  Math.round( intRate ) );	
		
		// 판매단가가 변경 되었으면 이후필드 재 계산
		//trace("calGubun ==> " + calGubun);
		// 매출단가를 기준으로 이전 필드가 변경되면 전체 재 계산.
		// 매출단가 포함, 이후 필드가 변경되면 기 등록되어 있는 매출단가를 가져와서 이후 필드를 재 계산한다.
		//alert("calGubun :"+calGubun);
	// 	if (calGubun == undefined || calGubun == "1") {
	// 	} else {
	// 		salsUprice = Math.round(ds_itemList.getColumn(row, "salsUprice"));
	// 	}
	}
	var salsUprice = 0;

	if ( eventNm == "salsUprice" )
	{
 		salsUprice = Math.round(ds_itemList.getColumn(row, "salsUprice"));	 
	} 
	else
	{
		if ( eventNm != "offer" && eventNm != "wholeSale" ) 
		{
			// 판매가 = 원가금액 + 수수료 + 창고료 + 금리 + 기타비용
			salsUprice = ( buyAmt + comm + whCost + intRate ) / base;
			//alert(" dd :"+buyAmt +"+"+ comm +"+"+ whCost +"+"+ intRate +"/"+base);
			if ( isNaN(salsUprice) ) salsUprice = 0;
			ds_itemList.setColumn(row, "salsUprice",  Math.round( salsUprice ) );	
		}
	}
	if ( eventNm != "offer" && eventNm != "wholeSale" ) 
	{
		//alert("salsUprice :"+salsUprice);
		//판매금액 = 판매중량 * 판매가 
		var salsAmt = base * salsUprice;
		//alert("salsAmt :"+ base+"*"+ salsUprice);
		if ( isNaN(salsAmt) ) salsAmt = 0;
		ds_itemList.setColumn(row, "salsAmt",  Math.round( salsAmt ) );	
		//매출이익액 = 판매금액 - 원가금액 
		//alert(salsAmt +""+buyAmt);
		var salsGainAmt = salsAmt - buyAmt;
		if ( isNaN(salsGainAmt) ) salsGainAmt = 0;
		ds_itemList.setColumn(row, "salsGainAmt",  Math.round( salsGainAmt ) );	
		//매출이익율  = 매출이익 /판매금액 
		var salsGainRat = salsGainAmt / salsAmt;
		if ( isNaN(salsGainRat) ) salsGainRat = 0;
		ds_itemList.setColumn(row, "salsGainRat",  Math.round(salsGainRat*100,1) );	
		//직접이익 = 매출이익 - ( 창고료 + 금리 + 기타비용)
		var drctGainAmt = salsGainAmt - ( whCost  + intRate );
		if ( isNaN(drctGainAmt) ) drctGainAmt = 0;
		ds_itemList.setColumn(row, "drctGainAmt", Math.round(drctGainAmt) );	
		//직접이익률 = 직접이익 / 판매금액
		var drctGainRat = drctGainAmt / salsAmt;
		if ( isNaN(drctGainRat) ) drctGainRat = 0;
		ds_itemList.setColumn(row, "drctGainRat", Math.round(drctGainRat*100,1));	
	}

	//BL 대금 및 부대비용 생성
	ds_blOtherCost.addRow();
	var totWonwtrAmt = 0;
	for ( var i=0; i<ds_itemList.getRowCount(); i++ ) 
	{
		totWonwtrAmt = totWonwtrAmt + toNumber(ds_itemList.getColumn(i, "buyAmt"));
		if ( i  == 0 ) 
		{
			ds_blOtherCost.setColumn(0, "itemCd",  ds_itemList.getColumn(i, "itemCd"));	
			ds_blOtherCost.setColumn(0, "itemNm",  ds_itemList.getColumn(i, "itemNm") );	
			ds_blOtherCost.setColumn(0, "brand",  ds_itemList.getColumn(i, "brand") );	
			ds_blOtherCost.setColumn(0, "gradeStand",  ds_itemList.getColumn(i, "gradeStand") );	
			ds_blOtherCost.setColumn(0, "gvrntaxRate",  ds_itemList.getColumn(i, "gvrntaxRate") );	
		}
	}

	//bl대금 = 매입가 * 예환율 * 중량(수량)
	//alert(ds_itemList.getColumn(row, "wonwtrAmt") +"*"+ base); 
	var expectBlPaym =  ds_itemList.getColumn(row, "wonwtrAmt") * ds_proposalInfo.getColumn(0, "proposalExchangeRate"); 
	//alert(ds_itemList.getColumn(row, "wonwtrAmt") +"*"+ ds_proposalInfo.getColumn(0, "proposalExchangeRate") +"="+expectBlPaym); 
	//alert(ds_itemList.getColumn(row, "uprice") +"*"+ ds_proposalInfo.getColumn(0, "proposalExchangeRate")+"*"+base+"="+expectBlPaym);
	if ( isNaN(expectBlPaym) ) expectBlPaym = 0;
	ds_itemList.setColumn(row, "expectBlPaym", Math.round( expectBlPaym ));	

	var entryOtherAmt = buyAmt - expectBlPaym;
	if ( isNaN(entryOtherAmt) ) entryOtherAmt = 0;
	//alert(buyAmt +"-"+ expectBlPaym+"="+entryOtherAmt);
	
	var expectBlPaym = ds_itemList.getColumn(row, "expectBlPaym") 
	
	var entryOtherAmt = expectBlPaym * (toNumber(ds_itemList.getColumn(row, "gvrntaxRate")) + toNumber(ds_proposalInfo.getColumn(0, "addGvrntaxRate")))/100 ;
	//trace(expectBlPaym +"*"+ (toNumber(ds_itemList.getColumn(row, "gvrntaxRate")) +"+"+ toNumber(ds_proposalInfo.getColumn(0, "addGvrntaxRate")))+"/100=" +entryOtherAmt); 
	
	//통관 및 부대비용
	ds_itemList.setColumn(row, "entryOtherAmt", Math.ceil( entryOtherAmt ));	

	//RISK관리방안
	if ( flag == 'CHANGE' ) 
	{
		//if ( ds_itemList.getColumn(row, "offer") > 0 ) {
			if ( eventNm == "offer" || eventNm == "buyPrice" || eventNm == "proposalExchangeRate")
			{
				//var offer = Math.round( ds_itemList.getColumn(row, "offer") - buyPrice )
				//var offer2 = Math.abs( ds_itemList.getColumn(row, "offer") - buyPrice )
				
				//offer2 = 매입단가 - offer : 단가->매입단가로 변경 20150827
				offer2 =  Math.round((Number(gfn_nvl(ds_itemList.getColumn(row, "buyPrice"), "0")) - Number(gfn_nvl(ds_itemList.getColumn(row, "offer"), "0"))),2);
				//alert(gfn_nvl(ds_itemList.getColumn(row, "buyPrice"), "0") +"//"+  Number(gfn_nvl(ds_itemList.getColumn(row, "offer"), "0")) +"="+offer2);
				
				// - ->△ + -> + 				
				if ( offer2 < 0 )
				{
					offer2 ="△"+gfn_numFormat(Math.abs(offer2));
				} 
				else 
				{
					offer2 ="+"+gfn_numFormat(Math.abs(offer2));
				}
				//alert("offer2 :"+offer2);
				ds_itemList.setColumn(row, "offer2",  offer2 );	
			}
			// wholeSale2 = buyPrice(매입가) - wholeSale(도매價)
			if ( eventNm == "wholeSale" || eventNm == "buyPrice" || eventNm == "proposalExchangeRate")
			{
				buyPrice = Number(gfn_nvl(ds_itemList.getColumn(row, "buyPrice"), "0"));
				var wholeSale = Number(gfn_nvl(ds_itemList.getColumn(row, "wholeSale"), "0"));
				var wholeSale2 = Math.round(buyPrice - wholeSale);
				
				//alert(buyPrice +"-"+ wholeSale+" = "+wholeSale2); 
				if ( !isNaN(wholeSale2) )
				{
					if ( wholeSale2 < 0 )
					{
						wholeSale2 ="△"+gfn_numFormat(Math.abs(wholeSale2));
					} 
					else
					{
						wholeSale2 ="+"+gfn_numFormat(Math.abs(wholeSale2));
					}
					ds_itemList.setColumn(row, "wholeSale2",  wholeSale2 );	
				}
			}
		//}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지불조건 그리드 값 변경시
 *---------------------------------------------------------------------------------------------*/
function ds_payList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if( e.columnid == "payCondClass" || e.columnid == "payExpectAmt" )
	{
		ds_payList.setColumn(e.row, "orgPayCondClass", ds_payList.getOrgColumn(e.row, "payCondClass"));
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도착지 항구 선택시
 *---------------------------------------------------------------------------------------------*/
function fn_arrivportPort_OnClick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "arrivNationCd"), "");	// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "arrivNationNm"), "");	// 전송할 파라미터 2
	var  arrRtn = gfn_dialog("PortAirPop"				// dialogId
					   , "X_FSI::PortAirPop.xfdl"		// 국가/공항 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{
		edt_arrivportPortNm.value    = arrRtn["portNmHangul"];

		ds_proposalInfo.setColumn(0, "arrivportPortNm", arrRtn["portNmHangul"]  );
		ds_proposalInfo.setColumn(0, "arrivportPortCd", arrRtn["portCd"]  );	
		ds_proposalInfo.setColumn(0, "arrivNationCd", arrRtn["nationCd"]  );	
		ds_proposalInfo.setColumn(0, "arrivNationNm", arrRtn["nationHangul"]  );	
	}

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 창고버튼 선택시
 *---------------------------------------------------------------------------------------------*/
function btn_deliverWhNm_OnClick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "deliverWhCd"), "");		// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "deliverWhNm"), "");		// 전송할 파라미터 2
	arrParam[2] = "50";	// 창고
	var  arrRtn = gfn_dialog("ContrtPop"				// dialogId
					   , "X_FSI::ContrtPop.xfdl"		// 매출처 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	if ( arrRtn instanceof Object )
	{
		ds_proposalInfo.setColumn(0, "deliverWhCd", arrRtn["vdCd"]  );
		ds_proposalInfo.setColumn(0, "deliverWhNm", arrRtn["vdNmLoc"]  );	
	}		
}

function fn_calendarCallBack() {
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 파일 추가
 *---------------------------------------------------------------------------------------------*/
function btn_fileAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	ObjAtchFile.btn_addFile.click();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 파일 삭제
 *---------------------------------------------------------------------------------------------*/
function btn_fileDel_onclick(obj:Button,  e:ClickEventInfo)
{
	ObjAtchFile.fn_delFileRow(0);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 파일 보기
 *---------------------------------------------------------------------------------------------*/
function btn_fileView_onclick(obj:Button,  e:ClickEventInfo)
{
	ObjAtchFile.fn_fileView(0);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 파일 다운로드
 *---------------------------------------------------------------------------------------------*/
function btn_fileDown_onclick(obj:Button,  e:ClickEventInfo)
{	
	ObjAtchFile.fn_fileDownload(0);
}

/*----------------------------------------------------------------------------------------------
 * 설명      :창고보관금액 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_whChargAmt_canchange(obj:MaskEdit,  e:ChangeEventInfo)
{
	var retVal = fn_reCalcurateChk("whChargAmt");
	if (retVal == "change") {
		for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
		{
			ds_proposalInfo.setColumn(0, "whChargAmt", edt_whChargAmt.value  );
			fn_calSale(row, 'NOCHANGE', '4', "whChargAmt");	  //판매 및 이익계획 자동계산식 적용	
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :창고입출고금액 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_ioutAmt_canchange(obj:MaskEdit,  e:ChangeEventInfo)
{
	var retVal = fn_reCalcurateChk("ioutAmt");
	if (retVal == "change") {
		for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
		{
			ds_proposalInfo.setColumn(0, "ioutAmt", edt_ioutAmt.value  );
			fn_calSale(row, 'NOCHANGE', '4', "ioutAmt");	  //판매 및 이익계획 자동계산식 적용	
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :환율 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_proposalExchangeRate_canchange(obj:MaskEdit,  e:ChangeEventInfo)
{
	ds_proposalInfo.setColumn(0, "proposalExchangeRate", edt_proposalExchangeRate.value  );
	var retVal = fn_reCalcurateChk("proposalExchangeRate");
	if (retVal == "change") {
		for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
		{
			// 2015.12.17 김은영DR 확인 - 매입단가가 변경되므로 단위당 Offer, 단위당 도매가 같이 변경되어야 한다.
			fn_calSale(row, 'CHANGE', '1', "proposalExchangeRate");	  //판매 및 이익계획 자동계산식 적용	  
		}	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :수수료 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_comm_canchange(obj:MaskEdit,  e:ChangeEventInfo)
{
	var retVal = fn_reCalcurateChk("comm");
	if (retVal == "change") {
		for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
		{
			ds_proposalInfo.setColumn(0, "comm", edt_comm.value  );
			fn_calSale(row, 'NOCHANGE', '1', "comm");	  //수수료
		}	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :입고예정일 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function fn_deliverSchdDateCallBack()
{
	if (fv_isItemListChange == false) return;
	//alert(ds_proposalInfo.getOrgColumn(0,"deliverSchdDate") +"//"+ds_proposalInfo.getColumn(0,"deliverSchdDate"));
	if ( ds_proposalInfo.getOrgColumn(0,"deliverSchdDate") != ds_proposalInfo.getColumn(0,"deliverSchdDate") )
	{
		var retVal = fn_reCalcurateChk("deliverSchdDate");
		if (retVal == "change") {
			for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
			{
				fn_calSale(row, 'NOCHANGE', '4', "deliverSchdDate");	  //판매 및 이익계획 자동계산식 적용	
			}	
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :판매종료일자 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function fn_proposalSaleEdateCallBack()
{
	if (fv_isItemListChange == false) return;
	if ( ds_proposalInfo.getOrgColumn(0,"proposalSaleEdate") != ds_proposalInfo.getColumn(0,"proposalSaleEdate") )
	{
		var retVal = fn_reCalcurateChk("proposalSaleEdate");
		if (retVal == "change") {
			for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
			{
				fn_calSale(row, 'NOCHANGE', '1', 'proposalSaleEdate');	  //판매 및 이익계획 자동계산식 적용	
			}
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :금리 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_intRate_canchange(obj:MaskEdit,  e:ChangeEventInfo)
{
	var retVal = fn_reCalcurateChk("intRate");
	if (retVal == "change") {
		for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
		{
			ds_proposalInfo.setColumn(0, "intRate", edt_intRate.value  );
			fn_calSale(row, 'NOCHANGE', '4', 'intRate');	  //수수료
		}	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :추가관세율 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_addGvrntaxRate_canchange(obj:MaskEdit,  e:ChangeEventInfo)
{
	var retVal = fn_reCalcurateChk("addGvrntaxRate");
	if (retVal == "change") {
		for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
		{
			ds_proposalInfo.setColumn(0, "addGvrntaxRate", edt_addGvrntaxRate.value  );
			fn_calSale(row, 'NOCHANGE', '4', 'addGvrntaxRate');	  //수수료
		}		
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :구매형태 변경시  offeer,도매 사이즈 세팅
 *---------------------------------------------------------------------------------------------*/
function cbo_poType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_setSize(obj.value);
	
	fn_setCbo_proposalAmountUnit(obj.value);	//환율 단위 세팅
	
	// 수입
	var bEnable = true;
	if (obj.value == '10') {
		bEnable = true;
		if ( fv_poProposalNum == "" ) 
		{
			ds_proposalInfo.setColumn(0, "addGvrntaxRate", 1);	//추가관세율 디폴트 1
		}
		else
		{
			ds_proposalInfo.setColumn(0, "addGvrntaxRate", 0);	//추가관세율 디폴트 1
		}
	} else {
		bEnable = false;
		ds_proposalInfo.setColumn(0, "addGvrntaxRate", 0);	//추가관세율 디폴트 1
	}
	fv_poType = obj.value;
	fn_setPoTypeEnable(bEnable);
}

/*----------------------------------------------------------------------------------------------
 * 설명      :환율 단위 세팅
 *---------------------------------------------------------------------------------------------*/
function fn_setCbo_proposalAmountUnit ( value ) 
{
	if ( value  == '20' ) 	//내수 USD세팅후 disabled
	{
		ds_amountUnit.filter("");
		cbo_proposalAmountUnit.value = "KRW";	
		cbo_proposalAmountUnit.readonly = true;
	} 
	else 
	{
		cbo_proposalAmountUnit.value = "USD";	
		cbo_proposalAmountUnit.readonly = false;
		ds_amountUnit.filter("code!='KRW'");
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :구매형태 변경시  offeer,도매 사이즈 세팅
 *---------------------------------------------------------------------------------------------*/
function fn_setSize(val) 
{
	if ( val == '10' ) 	//수입
	{
		Tab00.tabpage1.grd_itemList.setFormatColProperty(Tab00.tabpage1.grd_itemList.getBindCellIndex("Body", "gvrntaxRate"),"size",70);	//관세율
		Tab00.tabpage1.grd_itemList.setFormatColProperty(Tab00.tabpage1.grd_itemList.getBindCellIndex("Body", "expectBlPaym"),"size",90);	//BL대금
		Tab00.tabpage1.grd_itemList.setFormatColProperty(Tab00.tabpage1.grd_itemList.getBindCellIndex("Body", "entryOtherAmt"),"size",140);	//통관및 부대비용
	} else {
		Tab00.tabpage1.grd_itemList.setFormatColProperty(Tab00.tabpage1.grd_itemList.getBindCellIndex("Body", "gvrntaxRate"),"size",0);
		Tab00.tabpage1.grd_itemList.setFormatColProperty(Tab00.tabpage1.grd_itemList.getBindCellIndex("Body", "expectBlPaym"),"size",0);
		Tab00.tabpage1.grd_itemList.setFormatColProperty(Tab00.tabpage1.grd_itemList.getBindCellIndex("Body", "entryOtherAmt"),"size",0);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :매출처 팝업 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_salsplceNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "salsplceCd"), "");	// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "salsplceNm"), "");	// 전송할 파라미터 2
	arrParam[2] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "attachDept"), "");	// 전송할 파라미터 2

	if ( arrParam[2]  == '' ) 
	{
		gfn_alert("귀속부서를 선택하세요.");	// 변경된 내역이 없습니다.
		return;
	}
	
	var  arrRtn = gfn_dialog("SalesCustPop"				// dialogId
					   , "X_FSI::SalesCustPop.xfdl"		// 매출처 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	if ( arrRtn instanceof Object )
	{
		ds_proposalInfo.setColumn(0, "salsplceCd", arrRtn["salsplceCd"]  );
		ds_proposalInfo.setColumn(0, "salsplceNm", arrRtn["salsplceNm"]  );	
		edt_salsplceNm.enable = false;
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :매입처 팝업 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_splrNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "splrCd"), "");		// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "splrNm"), "");		// 전송할 파라미터 2
	
	arrParam[2] = "10";	// 국내거래처
	var  arrRtn = gfn_dialog("ContrtPop"				// dialogId 
					   , "X_FSI::ContrtPop.xfdl"		// 매출처 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	if ( arrRtn instanceof Object )
	{
		ds_proposalInfo.setColumn(0, "splrCd", arrRtn["vdCd"]  );
		ds_proposalInfo.setColumn(0, "splrNm", arrRtn["vdNmLoc"]  );	
		edt_splrNm.enable = false;
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :관세사 팝업 클릭시
 *---------------------------------------------------------------------------------------------*/
function btn_tariffHouseCd_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "tariffHouseCd"), "");		// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "tariffHouseNm"), "");		// 전송할 파라미터 2
	arrParam[2] = "30";	// 관세사
	var  arrRtn = gfn_dialog("ContrtPop"				// dialogId
					   , "X_FSI::ContrtPop.xfdl"		// 매출처 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);
	if ( arrRtn instanceof Object )
	{
		ds_proposalInfo.setColumn(0, "tariffHouseCd", arrRtn["vdCd"]  );
		ds_proposalInfo.setColumn(0, "tariffHouseNm", arrRtn["vdNmLoc"]  );	
		
	}		
}

/*----------------------------------------------------------------------------------------------
 * 설명      :품의환율일자 선택시 환율조회
 *---------------------------------------------------------------------------------------------*/
function fn_proposalExchangeRateDateCallBack()
{
	// 조회시에는 임의로 넣은 환율을 보여주기 위해 계산하지 않는다.
	if (fv_isSearch) {
		fv_isSearch = false;
		return;
	}
	if ( gfn_nvl(ds_proposalInfo.getColumn(ds_proposalInfo.rowposition, "proposalExchangeRateDate"),"") =="" || gfn_nvl(ds_proposalInfo.getColumn(ds_proposalInfo.rowposition, "proposalAmountUnit"),"") =="" ) 
	{
		return;
	}
	// 일자가 동일하면 재조회를 하지 않는다.
// 	if (gfn_nvl(ds_proposalInfo.getColumn(ds_proposalInfo.rowposition, "proposalExchangeRateDate"),"") == gfn_nvl(ds_proposalInfo.getOrgColumn(ds_proposalInfo.rowposition, "proposalExchangeRateDate"),"")) {
// 		return;
// 	}
	
	ds_search.setColumn(0, "exchangeRateDate", ds_proposalInfo.getColumn(ds_proposalInfo.rowposition, "proposalExchangeRateDate"));
	ds_search.setColumn(0, "amountUnit", ds_proposalInfo.getColumn(ds_proposalInfo.rowposition, "proposalAmountUnit"));
    var strSvcID    = "getExchangeRate";
    var strURL      = "ft/ftp/getExchangeRate.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :품의 화폐단위 변경시 환율조회
 *---------------------------------------------------------------------------------------------*/


/*
 ******************************************************************************************
 * 함  수  명   : fn_Close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function fn_close()
{
	if ( fv_focFlag == "NEW" ) 
	{
		this.parent.opener.fv_popIProcessCnt  = fv_iProcessCnt;
		this.parent.close();
	}
	else
	{
		this.parent.opener.fv_popIProcessCnt  = fv_iProcessCnt;
		this.parent.close();
	}
	return;
}

/*----------------------------------------------------------------------------------------------
 * 설명      :기안자 식재도매 사용자만 세팅
 *---------------------------------------------------------------------------------------------*/
function fn_defValue(p, dataset)
{
// 	edt_drafterNm.qoMuCd = dataset.getColumn(0, "set1");
// 	edt_drafterNm.qoTmCd = dataset.getColumn(0, "set2");
// 	edt_drafterNm.qoTmNm = dataset.getColumn(0, "set3");
	edt_drafterNm.qoMuCd = dataset.getColumn(0, "set1");
	edt_drafterNm.setCcCode(dataset.getColumn(0, "set2"));
	edt_drafterNm.setCcName(dataset.getColumn(0, "set3")); 
}

/*----------------------------------------------------------------------------------------------
 * 설명      :임시저장 버튼 클릭시
 *---------------------------------------------------------------------------------------------*/
function fn_temSave(obj:Button,  e:ClickEventInfo)
{
	fn_save("TEMP");
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 거래개요 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_dealOtln_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_dealOtln);
}

function fn_showTstContent(content)
{
	var strId       = "TstContent";
	var strURL      = "X_FSI::ExpandContentPop.xfdl";
	var objArgument = {
		P_TST_CONTENT : content.value
	};
	var nWidth      = 790;
	var nHeight     = 440;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	
	var tstContent = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
	if (tstContent != undefined) content.value= tstContent;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 거래개요 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_dealCondRemark_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_dealCondRemark);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 거래규모 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_dealScaleRemark_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(edt_dealScaleRemark);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 가격 관리 방안 크게 보기
 *---------------------------------------------------------------------------------------------*/
// function btn_priceMgmtSchm_onclick(obj:Button,  e:ClickEventInfo)
// {
// 	fn_showTstContent(txt_priceMgmtSchm);
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 품질 관리 방안 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_qualityMgmtSchm_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_qualityMgmtSchm);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 판매 이익 계획 비고 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_salGainPlanRemark_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_salGainPlanRemark);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 가격 관리 비고 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_priceMgmtRemark_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_priceMgmtRemark);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 창고보관금액 산출기준
 *---------------------------------------------------------------------------------------------*/
// function btn_whChargAmtAalBasis_onclick(obj:Button,  e:ClickEventInfo)
// {
// 	fn_showTstContent(txt_whChargAmtAalBasis);
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 입출고금액 산출기준 크게 보기
 *---------------------------------------------------------------------------------------------*/
// function btn_ioutAmtCalBasis_onclick(obj:Button,  e:ClickEventInfo)
// {
// 	fn_showTstContent(txt_ioutAmtCalBasis);
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 채권처리방안 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_arMgmtSchm_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_arMgmtSchm);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : REMARK 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_remark_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_remark);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매입처거래조건 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_splrPayCond_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_splrPayCond);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 매출처거래조건 크게 보기
 *---------------------------------------------------------------------------------------------*/
function btn_salsplcePayCond_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_showTstContent(txt_salsplcePayCond);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 선적지 팝업
 *---------------------------------------------------------------------------------------------*/
function btn_lshipNationNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "lshipNationCd"), "");	// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "lshipNationNm"), "");	// 전송할 파라미터 2
	var  arrRtn = gfn_dialog("PortAirPop"				// dialogId
					   , "X_FSI::PortAirPop.xfdl"		// 국가/공항 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{	//portCd
// 		edt_lshipNationNm.value    = arrRtn["portNmHangul"];
// 		ds_proposalInfo.setColumn(0, "lshipNationNm", arrRtn["portNmHangul"]  );
		edt_lshipNationNm.value    = arrRtn["portNmEnglish"];
		ds_proposalInfo.setColumn(0, "lshipNationNm", arrRtn["portNmEnglish"]  );
		ds_proposalInfo.setColumn(0, "lshipNationCd", arrRtn["portCd"]  );	
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도착지 팝업
 *---------------------------------------------------------------------------------------------*/
function btn_arrivNationNm_onclick(obj:Button,  e:ClickEventInfo)
{
	var arrParam = new Array();
	arrParam[0] = "ARRIV";	// 전송할 파라미터 1
	arrParam[1] = gfn_nvl(ds_proposalInfo.getColumn(e.row, "arrivNationNm"), "");	// 전송할 파라미터 2 
	
	var  arrRtn = gfn_dialog("PortAirPop"				// dialogId
					   , "X_FSI::PortAirPop.xfdl"		// 국가/공항 팝업 호출
					   , {fv_Contents:arrParam}			// 배열
					   , null, null, null, null, null, false, true, -1);

	if ( arrRtn instanceof Object )
	{
		//edt_arrivNationNm.value    = arrRtn["portNmHangul"];
		//ds_proposalInfo.setColumn(0, "arrivNationNm", arrRtn["portNmHangul"]  );
		edt_arrivNationNm.value    = arrRtn["portNmEnglish"];
		ds_proposalInfo.setColumn(0, "arrivNationNm", arrRtn["portNmEnglish"]  );
		ds_proposalInfo.setColumn(0, "arrivNationCd", arrRtn["nationCd"]  );	 
		
		ds_proposalInfo.setColumn(0, "arrivportPortCd", arrRtn["portCd"]  );	

	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품의구분 변경 시
 *---------------------------------------------------------------------------------------------*/
function cbo_proposalClass_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	setGroupInfo(obj.value);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품의구분에 따른 구룹웨어 정보 활성화 세팅
 *---------------------------------------------------------------------------------------------*/
function setGroupInfo(value)
{
	if (value == "A") {
		ds_proposalInfo.setColumn(0,"proposalUpnewDate", "");
		ds_proposalInfo.setColumn(0,"proposalApprvDate", "");
		edt_groupPoProposalNum.value = "";
		edt_poProposalStatus.value = "";

		edt_groupPoProposalNum.readonly = true;;
		edt_poProposalStatus.readonly = true;;
		cal_proposalUpnewDate.enable = false;
		cal_proposalApprvDate.enable = false;;

		edt_groupPoProposalNum.style.backgroundColor = "#ececec";
		edt_poProposalStatus.style.backgroundColor = "#ececec";
		cal_proposalUpnewDate.style.backgroundColor = "#ececec";
		cal_proposalApprvDate.style.backgroundColor = "#ececec";

		

	} else if (value == "B") {
		edt_groupPoProposalNum.readonly = false;
		edt_poProposalStatus.readonly = false;
		cal_proposalUpnewDate.enable = true;
		cal_proposalApprvDate.enable = true;
		
		edt_groupPoProposalNum.value = ds_proposalInfo.getOrgColumn(0, "groupProposalNum")
		cal_proposalUpnewDate.value = ds_proposalInfo.getOrgColumn(0, "proposalUpnewDate")
		cal_proposalApprvDate.value = ds_proposalInfo.getOrgColumn(0, "proposalApprvDate")
		edt_poProposalStatus.value = "승인완료";
		
		edt_groupPoProposalNum.style.backgroundColor = "#ffffff";
		edt_poProposalStatus.style.backgroundColor = "#ececec";
		cal_proposalUpnewDate.style.backgroundColor = "#ffffff";
		cal_proposalApprvDate.style.backgroundColor = "#ffffff";		
	}
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 수입/내부 구분에 따른 Component Setting
 *---------------------------------------------------------------------------------------------*/
function fn_setPoTypeEnable(bEnable)
{
	cal_lcIssuingSchdDate.enable = bEnable;
	cal_lshipSchdDate.enable = bEnable;
	cal_entrySchdDate.enable = bEnable;
	cal_arrivSchdDate.enable = bEnable;
	//cal_deliverSchdDate.enable = bEnable;
	cal_proposalExchangeRateDate.enable = bEnable;
	
	cbo_incomeType.readonly = (bEnable==true?false:true);
	//edt_payCond.readonly = (bEnable==true?false:true);
	cbo_tariffHouseNm.readonly = (bEnable==true?false:true);
	edt_lshipNationNm.readonly = (bEnable==true?false:true);
	edt_arrivNationNm.readonly = (bEnable==true?false:true);
	cbo_incoterms.readonly = (bEnable==true?false:true);
	edt_addGvrntaxRate.readonly = (bEnable==true?false:true);
	edt_proposalExchangeRate.readonly = (bEnable==true?false:true);
	
	btn_tariffHouseCd.enable = bEnable;
	btn_lshipNationNm.enable = bEnable;
	btn_arrivNationNm.enable = bEnable; 
	
	// readonly에 맞게 색상 변경
	fn_setBackgroundColor(bEnable);

	if ( !bEnable )	//내수는 오퍼가 도매가 비교하는 항목도 없습니다
	{
		Tab00.tabpage1.grd_itemList.setFormatColProperty(4,"size",0);	//HS코드

	} 
	else
	{
		Tab00.tabpage1.grd_itemList.setFormatColProperty(4,"size",156);	//HS코드
	}
	Tab00.tabpage1.grd_itemList.setFormatColProperty(24,"size",110);
	Tab00.tabpage1.grd_itemList.setFormatColProperty(25,"size",120);
	Tab00.tabpage1.grd_itemList.setFormatColProperty(26,"size",110);
	Tab00.tabpage1.grd_itemList.setFormatColProperty(27,"size",110);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 전체 component를 읽어서 readonly의 색상을 변경 한다.
 *---------------------------------------------------------------------------------------------*/
function fn_setBackgroundColor(bEnable)
{
	var strType = "";
	var strname = "";

	for (var i = 0, iLen = this.components.length; i < iLen; i++)
	{
		strType = this.components[i].toString().toUpperCase();
		strName = this.components[i].name;
		//trace("setComponentAuth : strType : " + strType + " / strName : " + strName);
		
		if ("cbo_incomeType" == strName ||
			//"edt_payCond" == strName ||
			//"cbo_tariffHouseNm" == strName ||
			//"edt_lshipNationNm" == strName ||
//			"edt_arrivNationNm" == strName ||
			"cbo_incoterms" == strName  )
		{
			if (this.components[i].class == "cmb_WF_Essential") {
				this.components[i].style.backgroundColor = (bEnable==false?"#ececec":"#fff6e9");
			} else {
				this.components[i].style.backgroundColor = (bEnable==false?"#ececec":"#ffffff");
			}
			//trace("strName >>> " + strName + " , " + bEnable);
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      :품의 화폐단위 변경시 환율조회
 *---------------------------------------------------------------------------------------------*/
function cbo_proposalAmountUnit_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_proposalExchangeRateDateCallBack();	
}

/*----------------------------------------------------------------------------------------------
 * 설명      :환율 변경시 품목 재계산
 *---------------------------------------------------------------------------------------------*/
function edt_proposalExchangeRate_ontextchanged(obj:MaskEdit,  e:TextChangedEventInfo)
{
	ds_proposalInfo.setColumn(0, "proposalExchangeRate", edt_proposalExchangeRate.value  );
	for ( var row=0; row<ds_itemList.getRowCount(); row++ ) 
	{
		// 2015.12.17 김은영DR 확인 - 매입단가가 변경되므로 단위당 Offer, 단위당 도매가 같이 변경되어야 한다.
		fn_calSale(row, 'CHANGE', '1', "proposalExchangeRate");	  //판매 및 이익계획 자동계산식 적용	  
	}	
}

function edt_proposalTitle_ontextchanged(obj:Edit,  e:TextChangedEventInfo)
{
	if(gfn_pos(e.posttext, "'") > 0)
	{
		alert("제목에 외따옴표(')를 넣을 수 없습니다. 외따옴표(')를 자동으로 제거 합니다.");
		obj.value = gfn_replace(e.posttext, "'", "");
		return;
	}	
}


function cbo_attachDept_canitemchange(obj:Combo, e:ItemChangeEventInfo)
{
	switch ( e.postvalue ) {
		case "15" :	// 축산도매(순액)
		case "25" :	// 수산도매(순액)
		case "35" :	// 농산도매(순액)
			switch ( cbo_saleType.value ) {
				case undefined   :
				case ""   :
				case "40" :	// 수수료
				case "60" :	// 구매대행
				case "70" :	// 즉시판매
					return true;
					break;
					
				default :
					gfn_alert("선택된 판매유형은 순액법 대상 귀속부서가 아닙니다.");
					return false;
					break;
			}
			break;
			
		default :
			switch ( cbo_saleType.value ) {
				case "60" :
				case "70" :
					gfn_alert("선택된 판매유형은 순액법 대상 귀속부서가 아닙니다.");
					return false;
					break;
				default :
					return true;
					break;
			}
			return true;
			break;
	}
}

function cbo_attachDept_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if ( e.postvalue == "40" ) {	// 가공식품팀
		//cbo_saleType.enable = false;
		cbo_saleType.value = 50;		// 부서이관
	} else {
		//cbo_saleType.enable = true;
	}
}

function cbo_saleType_canitemchange(obj:Combo, e:ItemChangeEventInfo)
{
	switch ( e.postvalue ) {
		case "40" :	// 수수료
			return true;
			break;
			
		case "" :
		case "60" :
		case "70" :
			switch ( cbo_attachDept.value ) {
				case ""   :
				case "15" :		// 축산도매(순액)
				case "25" :       // 수산도매(순액)
				case "35" :       // 농산도매(순액)
					return true;
				    break;
				    
				default :
					gfn_alert("선택된 귀속부서가 순액법 대상 판매유형이 아닙니다.");
					return false;
					break;
			}
			break;
			
		default :
			switch ( cbo_attachDept.value ) {

				case "15" :		// 축산도매(순액)
				case "25" :       // 수산도매(순액)
				case "35" :       // 농산도매(순액)
					gfn_alert("선택된 귀속부서가 순액법 대상 판매유형이 아닙니다.");
					return false;
				    break;
				    
				default :
					return true;
					break;
			}
			return true;
			break;
		
	}
}]]></Script>
  </Form>
</FDL>
