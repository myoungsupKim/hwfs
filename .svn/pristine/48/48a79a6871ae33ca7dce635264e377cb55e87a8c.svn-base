<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="CmmnFrameRightMenu" classname="frameLogin" left="0" top="0" width="330" height="923" titletext="사이드메뉴" scrollbars="autovert" onload="CmmnFrameRightMenu_onload" oninit="CmmnFrameRightMenu_oninit">
    <Layouts>
      <Layout>
        <Static id="staFormSize" taborder="15" cssclass="sta_POP_Bg" left="0%" top="0" right="0%" height="923"/>
        <Static id="Static03" taborder="12" left="0" top="156" width="85" cssclass="sta_RF_BtnBg" bottom="0"/>
        <Static id="Static04" taborder="13" cssclass="sta_RF_BtnBg2" left="85" top="156" bottom="0" right="0"/>
        <Button id="btnRMenu01" taborder="0" left="0" top="156" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Static id="Static00" taborder="1" left="0" top="0" height="156" cssclass="sta_RF_WelcomeBg" right="0"/>
        <Button id="btnClose" taborder="2" top="0" width="55" height="55" cssclass="btn_RF_Xbtn" right="0" onclick="btnClose_onclick"/>
        <Static id="staDept" taborder="3" text="한촌-강남점 사업장" left="89" top="68" height="33" cssclass="sta_RF_WelcomeArea" right="0" onclick="staDept_onclick"/>
        <Static id="staName" taborder="4" text="홍길동님" cssclass="sta_RF_WelcomeName" left="89" top="98" height="33" right="0"/>
        <Button id="btnRMenu02" taborder="5" left="0" top="227" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Button id="btnRMenu04" taborder="6" left="0" top="369" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Button id="btnRMenu03" taborder="7" left="0" top="298" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Button id="btnRMenu08" taborder="8" left="0" top="653" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Button id="btnRMenu07" taborder="9" left="0" top="582" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Button id="btnRMenu06" taborder="10" left="0" top="511" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Button id="btnRMenu05" taborder="11" left="0" top="440" height="71" right="0" onclick="btnRMenu_onclick" visible="false"/>
        <Button id="btnSetting" taborder="14" cssclass="btn_RF_Setting" width="74" height="74" right="20" bottom="20" onclick="btnSetting_onclick"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_radio_N" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <ConstColumn id="ConstColumn0" type="STRING" size="30" value=""/>
          <ConstColumn id="ConstColumn1" type="STRING" size="30" value=""/>
          <Column id="code" type="STRING" size="256"/>
          <Column id="name" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">0</Col>
            <Col id="name">동의합니다.</Col>
          </Row>
          <Row>
            <Col id="code">1</Col>
            <Col id="name">동의하지 않습니다.</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_list" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true">
        <ColumnInfo>
          <Column id="SINGLE_ID" size="20" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true">
        <ColumnInfo>
          <Column id="SINGLE_ID" size="255" type="STRING"/>
          <Column id="PWD" size="255" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rMenu" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="sysId" type="STRING" size="256"/>
          <Column id="sysName" type="STRING" size="256"/>
          <Column id="menuId" type="STRING" size="256"/>
          <Column id="menuName" type="STRING" size="256"/>
          <Column id="parentMenuId" type="STRING" size="256"/>
          <Column id="prgId" type="STRING" size="256"/>
          <Column id="prgName" type="STRING" size="256"/>
          <Column id="prgPath" type="STRING" size="256"/>
          <Column id="menuType" type="STRING" size="256"/>
          <Column id="levels" type="STRING" size="256"/>
          <Column id="sortSeq" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="prgType" type="STRING" size="256"/>
          <Column id="leaderMenu" type="STRING" size="256"/>
          <Column id="isLeaf" type="INT" size="256"/>
          <Column id="callParam" type="STRING" size="256"/>
          <Column id="ALL" type="STRING" size="256"/>
          <Column id="IFIS" type="STRING" size="256"/>
          <Column id="FICS" type="STRING" size="256"/>
          <Column id="isRMenu" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript5.0"><![CDATA[//########################################################
// [프로젝트]		FC종합전산 모바일시스템 구축
// [시스템명]		공통 
// [부시스템명]	공통 - 오른쪽 메뉴
// [프로그램]		CmmnFrameRightMenu.xfdl
// [설명]
// 		프로젝트 실행 메인 화면
// [작성자명] 		투비소프트
// [작성일자]		2015.01.12
// -----------------[수정이력]--------------------------
// 수정일자 : 수정자 : 수정내용
// 2015.01.12 : 김광호 : 신규생성.
//########################################################

/*================================================================================
 * 1. 변수 선언
 *===============================================================================*/


/*================================================================================
 * 2. Form관련 Script
 *===============================================================================*/
this.CmmnFrameRightMenu_oninit = function(obj:Form, e:nexacro.InitEventInfo)
{
//	this.fn_init();	// cssclass 셋팅이 oninit에서만 되어서 oninit을 추가함
}

this.CmmnFrameRightMenu_onload = function(obj:Form, e:nexacro.LoadEventInfo)
{
	//application.goMain.gfn_POP_resize(this);
	//this.fn_init();
}

// 초기 셋팅
this.fn_init = function ()
{
	// 로그인 정보 셋팅
	this.staDept.set_text(application.g_UpjangNm);
	this.staName.set_text(application.g_Name+"님");
	
	// 메뉴 dataset 복사
	this.ds_rMenu.clearData();
	this.ds_rMenu.copyData(application.gds_menu, true);
	this.ds_rMenu.filter("levels == '1' && callParam == 'Y'");
	//trace("ds_rMenu >>>> " +this.ds_rMenu.saveXML("ds_rMenu", "V"));
//	trace(this.ds_rMenu.saveXML("ds_rMenu", "V"));
	this.fn_RMenuSetting();
}

// Right 메뉴 셋팅
this.fn_RMenuSetting = function ()
{
	// 필요한 갯수만큼 보이기
	var objBtn;
	var nRow = this.ds_rMenu.rowcount;
	var ii;
	var i;
	
	//리셋
	for (ii = 0; ii < 8; ii++)
	{		
		objBtn = this.components["btnRMenu"+application.goMain.gfn_LPad((ii+1).toString(), "0", 2)];
		objBtn.set_visible(false);
	}	
	
	//사이드메뉴 셋팅
	for (i = 0; i < nRow; i++)
	{
		objBtn = this.components["btnRMenu"+application.goMain.gfn_LPad((i+1).toString(), "0", 2)];
		objBtn.set_visible(true);
		// 버튼의 cssclass 셋팅
		
		switch (this.ds_rMenu.getColumn(i, "menuId"))
		{
			// 추가발주, 재고등록, 클레임신청, 게시판, E-FOODIST, 상품발주, 발주내역조회, 클레임신청현황
			case "1787" :	// 추가발주
				objBtn.set_cssclass("btn_RF_Menu01");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
			case "1796" :	// 구매신청현황
				objBtn.set_cssclass("btn_RF_Menu02");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
			case "1814" :	//  클레임신청
				objBtn.set_cssclass("btn_RF_Menu03");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
			case "1819" :	// 게시판
			case "3244" :	// 게시판
				objBtn.set_cssclass("btn_RF_Menu04");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
			case "1803" : // E-FOODIST
				objBtn.set_cssclass("btn_RF_Menu05");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
			case "1797" :	// 상품발주
				objBtn.set_cssclass("btn_RF_Menu06");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
			case "1798" :	// 발주내역조회
				objBtn.set_cssclass("btn_RF_Menu07");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
			case "1815" :	// 클레임신청현황
				objBtn.set_cssclass("btn_RF_Menu08");
				objBtn.set_text(this.ds_rMenu.getColumn(i, "menuName"));
				break;
		}
	}
}

this.btnClose_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	application.goMain.gfn_POP_close(this, "CLOSEONLY");
}

// Right 메뉴 버튼 클릭 이벤트
this.btnRMenu_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = parseInt(application.goMain.gfn_Right(obj.id, 2))-1;
	
	// action 실행
	application.gv_menuId = this.ds_rMenu.getColumn(nRow, "menuId");
	application.gv_formUrl = this.ds_rMenu.getColumn(nRow, "prgPath");
	application.gv_menuName = this.ds_rMenu.getColumn(nRow, "menuName");
	application.gv_progrmId = this.ds_rMenu.getColumn(nRow, "prgId");

	application.goMain.gfn_POP_close(this , "");
}

// Setting 버튼 클릭 이벤트
this.btnSetting_onclick = function(obj:Button,  e:nexacro.ClickEventInfo)
{
	var nRow = parseInt(application.goMain.gfn_Right(obj.id, 2))-1;
	
	// action 실행
	application.gv_menuId = this.ds_rMenu.getColumn(nRow, "menuId");
	application.gv_formUrl = this.ds_rMenu.getColumn(nRow, "prgPath");
	application.gv_menuName = this.ds_rMenu.getColumn(nRow, "menuName");

	application.goMain.gfn_POP_close(this , "Setting");
}



this.staDept_onclick = function(obj:Static,  e:nexacro.ClickEventInfo) {
	if ( application.g_userId == "Z1855902" ) {
		if( !this.btnRMenu01.cssclass || this.btnRMenu01.cssclass == null ) {
			this.btnRMenu01.set_cssclass("btn_RF_Menu01");
		} else {
			this.btnRMenu01.set_cssclass("");
		}
	}
}
]]></Script>
  </Form>
</FDL>
