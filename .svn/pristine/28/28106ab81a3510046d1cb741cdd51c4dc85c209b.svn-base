<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="COMP_GUIDE_13" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="사고업장관리(AccdUpjangMngt)" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 97" anchor="left top right"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="27" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static37" text="사고 업장목록" class="sta_WF_Title01" position="absolute 0 100 450 118" anchor="left top"/>
        <Static id="Static39" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 113 450 118" anchor="left top"/>
        <Static id="Static02" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 451 40 481 61" anchor="left top"/>
        <Static id="Static12" text="영업사원" class="sta_WFSA_label" position="absolute 482 40 544 61" anchor="left top"/>
        <Static id="Static14" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 689 40 719 61" anchor="left top"/>
        <Static id="Static01" text="사고기간" class="sta_WFSA_label" position="absolute 719 40 781 61" anchor="left top"/>
        <Static id="Static03" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 539 40 549 61" anchor="left top"/>
        <Static id="Static52" text="~" class="sta_WFDA_Description" position="absolute 886 40 898 61" anchor="left top" style="color:black;"/>
        <Grid id="grd_list" taborder="5" binddataset="ds_list" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 0 118 1237 524" autofittype="col" anchor="all">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="22"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="91"/>
                <Column size="180"/>
                <Column size="0"/>
                <Column size="100"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="0"/>
                <Column size="180"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" text="사업부"/>
                <Cell col="2" text="팀"/>
                <Cell col="3" text="거래처코드"/>
                <Cell col="4" text="거래처명"/>
                <Cell col="5" text="업장명"/>
                <Cell col="6" text="영업담당자" taborder="undefined"/>
                <Cell col="7" text="사업자번호"/>
                <Cell col="8" text="대표자"/>
                <Cell col="9" text="사고금액"/>
                <Cell col="10" text="회수금액"/>
                <Cell col="11" displaytype="normal" text="채권잔액"/>
                <Cell col="12" text="거래종료일"/>
                <Cell col="13" text="접수일"/>
                <Cell col="14" text="채권번호"/>
                <Cell col="15" text="비고"/>
              </Band>
              <Band id="body">
                <Cell displaytype="normal" text="bind:seq"/>
                <Cell col="1" displaytype="normal" style="align:left;" text="bind:muNm"/>
                <Cell col="2" displaytype="normal" style="align:left;" text="bind:tmNm"/>
                <Cell col="3" displaytype="text" style="align:right;" text="bind:custCd"/>
                <Cell col="4" displaytype="normal" style="align:left;" text="bind:custNm"/>
                <Cell col="5" style="align:left;" text="bind:upjangNm"/>
                <Cell col="6" displaytype="normal" style="align:center;" text="bind:salesSabunNm"/>
                <Cell col="7" displaytype="normal" style="align:center;" text="bind:bizNo" mask="###-##-#####"/>
                <Cell col="8" displaytype="normal" style="align:center;" text="bind:ceoNm"/>
                <Cell col="9" displaytype="number" style="align:right;" text="bind:accdAmt"/>
                <Cell col="10" displaytype="number" style="align:right;" text="bind:withdrawAmt"/>
                <Cell col="11" displaytype="number" style="align:right;" text="bind:arBalAmt"/>
                <Cell col="12" displaytype="date" style="align:center;" text="bind:dealEdate"/>
                <Cell col="13" displaytype="date" style="align:center;" text="bind:acceptdd"/>
                <Cell col="14" displaytype="number" style="align:RIGHT;" text="bind:accdArNum" combodisplaynulltype="none"/>
                <Cell col="15" displaytype="text" style="align:center;" text="bind:remark"/>
              </Band>
            </Format>
            <Format id="2004">
              <Columns>
                <Column size="22"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="91"/>
                <Column size="180"/>
                <Column size="108"/>
                <Column size="180"/>
                <Column size="0"/>
                <Column size="100"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="0"/>
                <Column size="180"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" text="사업부"/>
                <Cell col="2" text="팀"/>
                <Cell col="3" text="본사코드"/>
                <Cell col="4" text="본사명"/>
                <Cell col="5" text="사업장코드"/>
                <Cell col="6" text="사업장명"/>
                <Cell col="7" text="업장명"/>
                <Cell col="8" text="영업담당자" taborder="undefined"/>
                <Cell col="9" text="사업자번호"/>
                <Cell col="10" text="대표자"/>
                <Cell col="11" text="사고금액"/>
                <Cell col="12" text="회수금액"/>
                <Cell col="13" displaytype="normal" text="채권잔액"/>
                <Cell col="14" text="사고일"/>
                <Cell col="15" text="접수일"/>
                <Cell col="16" text="채권번호"/>
                <Cell col="17" text="비고"/>
              </Band>
              <Band id="body">
                <Cell displaytype="normal" text="bind:seq"/>
                <Cell col="1" displaytype="normal" style="align:left;" text="bind:muNm"/>
                <Cell col="2" displaytype="normal" style="align:left;" text="bind:tmNm"/>
                <Cell col="3" displaytype="text" style="align:right;" text="bind:upjangCd"/>
                <Cell col="4" displaytype="normal" style="align:left;" text="bind:upjangNm"/>
                <Cell col="5" displaytype="text" style="align:right;" text="bind:custCd"/>
                <Cell col="6" displaytype="normal" style="align:left;" text="bind:custNm"/>
                <Cell col="7" style="align:left;" text="bind:upjangNm"/>
                <Cell col="8" displaytype="normal" style="align:center;" text="bind:salesSabunNm"/>
                <Cell col="9" displaytype="normal" style="align:center;" text="bind:bizNo" mask="###-##-#####"/>
                <Cell col="10" displaytype="normal" style="align:center;" text="bind:ceoNm"/>
                <Cell col="11" displaytype="number" style="align:right;" text="bind:accdAmt"/>
                <Cell col="12" displaytype="number" style="align:right;" text="bind:withdrawAmt"/>
                <Cell col="13" displaytype="number" style="align:right;" text="bind:arBalAmt"/>
                <Cell col="14" displaytype="date" style="align:center;" text="bind:accdDays"/>
                <Cell col="15" displaytype="date" style="align:center;" text="bind:acceptdd"/>
                <Cell col="16" displaytype="number" style="align:RIGHT;" text="bind:accdArNum" combodisplaynulltype="none"/>
                <Cell col="17" displaytype="text" style="align:center;" text="bind:remark"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static10" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 524 450 537" anchor="left bottom"/>
        <Static id="Static13" text="사고 업장 등록" class="sta_WF_Title01" position="absolute 0 537 450 555" anchor="left bottom"/>
        <Static id="Static15" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 550 450 555" anchor="left bottom"/>
        <Static id="Static16" class="sta_WFDA_Labelbg" position="absolute 85 555 1237 582" anchor="left right bottom"/>
        <Static id="Static17" class="sta_WFDA_Labelbg" position="absolute 85 581 1237 632" anchor="left right bottom"/>
        <Static id="Static18" class="sta_WFDA_Labelbg" position="absolute 85 631 1237 659" anchor="left right bottom"/>
        <Static id="Static19" class="sta_WFDA_Labelbg" position="absolute 85 657 1237 684" anchor="left right bottom"/>
        <Static id="Static20" class="sta_WFDA_Labelbg" position="absolute 0 683 1237 684" anchor="left right bottom"/>
        <Static id="sta_detail24" text="거래처명" class="sta_WFDA_Label01" position="absolute 435 555 505 582" anchor="left bottom"/>
        <Static id="sta_detail26" text="주소" class="sta_WFDA_Label01" position="absolute 0 581 86 632" anchor="left bottom"/>
        <Static id="sta_detail28" text="영업담당자" class="sta_WFDA_Label01" position="absolute 711 657 802 684" anchor="left bottom"/>
        <Static id="sta_detail32" text="사업자등록No" class="sta_WFDA_Label01" position="absolute 711 555 802 582" anchor="left bottom"/>
        <Static id="sta_detail31" text="대표자명" class="sta_WFDA_Label01" position="absolute 895 555 962 582" anchor="left bottom"/>
        <Static id="sta_detail37" text="대표자생년월일" class="sta_WFDA_Label01" position="absolute 1043 555 1139 582" anchor="left bottom"/>
        <Edit id="edt_ceoNm" taborder="12" position="absolute 964 558 1041 579" class="edt_WF_Essential" anchor="left bottom"/>
        <Static id="sta_detail00" text="사고금액" class="sta_WFDA_Label01" position="absolute 349 631 442 658" anchor="left bottom"/>
        <Static id="sta_detail01" text="회수 금액" class="sta_WFDA_Label01" position="absolute 711 631 802 658" anchor="left bottom"/>
        <Static id="sta_detail02" text="채권 잔액" class="sta_WFDA_Label01" position="absolute 982 633 1078 658" anchor="left bottom"/>
        <Static id="sta_detail03" text="사고인지일" class="sta_WFDA_Label01" position="absolute 349 657 442 684" anchor="left bottom"/>
        <Static id="sta_detail04" text="접수일" class="sta_WFDA_Label01" position="absolute 543 657 607 684" anchor="left bottom"/>
        <Static id="sta_detail05" text="비고" class="sta_WFDA_Label01" position="absolute 711 581 802 632" anchor="left bottom"/>
        <Edit id="edt_remark" taborder="21" position="absolute 804 585 1234 629" anchor="left bottom"/>
        <Static id="sta_detail06" text="최종수정일" class="sta_WFDA_Label01" position="absolute 890 657 962 684" anchor="left bottom"/>
        <Static id="sta_detail07" text="최종수정자" class="sta_WFDA_Label01" position="absolute 1062 657 1142 684" anchor="left bottom"/>
        <Edit id="edt_uuser" taborder="25" position="absolute 1144 660 1234 681" enable="false" anchor="left bottom"/>
        <MaskEdit id="msk_accdAmt" taborder="16" position="absolute 445 635 684 654" mask="@@@,@@@" style="align:right;" onchar="amount_onchar" anchor="left bottom" onkillfocus="msk_accdAmt_onkillfocus"/>
        <Calendar id="cal_udate" taborder="24" dateformat="yyyy-MM-dd" position="absolute 964 660 1060 681" value="null" enable="false" anchor="left bottom"/>
        <Static id="Static26" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1159 524 1237 530" anchor="left bottom"/>
        <Static id="Static25" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1159 550 1237 555" anchor="left bottom"/>
        <Static id="Static21" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1159 71 1237 77" anchor="top right"/>
        <Static id="Static22" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1159 97 1237 102" anchor="top right"/>
        <Static id="sta_detail08" text="거래시작일" class="sta_WFDA_Label01" position="absolute 0 657 86 684" anchor="left bottom"/>
        <Static id="sta_detail09" text="거래종료일" class="sta_WFDA_Label01" position="absolute 176 657 259 684" anchor="left bottom"/>
        <Static id="Static09" text="원" class="sta_WFDA_Description" position="absolute 1215 634 1230 655" anchor="left bottom" style="color:black;"/>
        <Static id="Static29" text="원" class="sta_WFDA_Description" position="absolute 960 636 975 657" anchor="left bottom" style="color:black;"/>
        <Static id="Static30" text="원" class="sta_WFDA_Description" position="absolute 696 634 711 655" anchor="left bottom" style="color:black;"/>
        <Static id="Static27" text="사업부" class="sta_WFSA_label" position="absolute 20 40 82 61" anchor="left top"/>
        <Static id="Static07" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 65 40 75 61" anchor="left top"/>
        <Static id="Static31" text="팀" class="sta_WFSA_label" position="absolute 265 40 327 61" anchor="left top"/>
        <Static id="Static32" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 284 40 294 61" anchor="left top"/>
        <TmSearchComponent id="edt_tmNm" taborder="1" position="absolute 294 40 451 62" bindDataset="ds_search" bindTmCdColumn="tmCd" bindTmNmColumn="tmNm" qoBuCd="" qoMuCd="" qoUseYn="Y" eventAfterTrigger="fn_tmChangedEvent" eventBeforeTrigger=""/>
        <PersonalSearchComponent id="edt_empNm" taborder="2" position="absolute 549 40 689 61" bindDataset="ds_search" bindSabunColumn="empNo" bindNmKorColumn="empNm" qoMuCd="" qoTmCd="" qoTmNm="" eventAfterTrigger="" eventBeforeTrigger=""/>
        <PersonalSearchComponent id="edt_accdInchargeNm" taborder="10" position="absolute 804 660 888 681" bindDataset="ds_list" bindSabunColumn="salesSabun" bindNmKorColumn="salesSabunNm" qoMuCd="" qoTmCd="" qoTmNm="" eventAfterTrigger="" eventBeforeTrigger="" class="edt_WF_Essential" anchor="left bottom"/>
        <Static id="sta_detail10" text="시스템구분" class="sta_WFDA_Label01" position="absolute 0 555 86 582" anchor="left bottom"/>
        <Combo id="cbo_sysGb" taborder="6" class="cmb_WF_Essential" position="absolute 88 558 173 579" anchor="left bottom" onitemchanged="cbo_sysGb_onitemchanged"/>
        <MaskEdit id="msk_bizNo" taborder="11" mask="###-##-#####" onchar="amount_onchar" class="msk_WF_Essential" position="absolute 804 558 893 579" type="string" style="align:left middle;" onkillfocus="msk_bizNo_onkillfocus" anchor="left bottom"/>
        <MaskEdit id="msk_withdrawAmt" taborder="17" mask="@@@,@@@" onchar="amount_onchar" class="msk_WF_Essetial" position="absolute 804 635 955 654" anchor="left bottom" style="align:right;" onkillfocus="msk_withdrawAmt_onkillfocus"/>
        <MaskEdit id="msk_arBalAmt" taborder="18" mask="@@@,@@@" onchar="amount_onchar" position="absolute 1080 635 1209 654" anchor="left bottom" style="align:right;"/>
        <CustSearchComponent id="edt_custNm" anchor="left bottom" taborder="7" position="absolute 508 558 709 579" bindDataset="ds_list" eventBeforeTrigger="fn_custPopup" eventAfterTrigger="fn_custChangedEvent" bindCustCodeColumn="custCd" bindCustNameColumn="custNm" visible="true" enable="false" class="edt_WF_Essential"/>
        <MuSearchComponent id="edt_muNm" taborder="0" class="cmb_WF_Essential" position="absolute 75 40 235 61" bindDataset="ds_search" bindMuCdColumn="muCd" appendText="NOT" onItemChangedEvent="fn_muItemChangedEvent"/>
        <ObjCalendar id="cal_toDay" titletext="캘린더" taborder="28" scrollbars="none" position="absolute 897 40 994 61"/>
        <ObjCalendar id="cal_fromDay" titletext="캘린더" taborder="29" scrollbars="none" position="absolute 786 40 883 61"/>
        <Static id="Static23" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 776 40 786 61" anchor="left top"/>
        <ObjCalendar id="cal_accdDays" titletext="캘린더" taborder="30" scrollbars="none" position="absolute 443 660 540 681" anchor="left bottom"/>
        <ObjCalendar id="cal_acceptdd" titletext="캘린더" taborder="31" scrollbars="none" position="absolute 609 659 709 680" anchor="left bottom"/>
        <ObjCalendar id="cal_dealSdate" titletext="캘린더" taborder="32" scrollbars="none" position="absolute 88 660 175 681" anchor="left bottom"/>
        <ObjCalendar id="cal_dealEdate" titletext="캘린더" taborder="33" scrollbars="none" position="absolute 261 660 348 681" anchor="left bottom" onkillfocus="cal_dealEdate_onkillfocus"/>
        <ObjCalendar id="cal_ceoBrthDateEnc" titletext="캘린더" taborder="34" scrollbars="none" position="absolute 1142 558 1234 579" anchor="left bottom"/>
        <AddrSearchComponent id="AddrSearchComponent01" titletext="주소검색 Component" taborder="35" text="AddrSearchComponent01" position="absolute 88 585 709 630" bindDataset="ds_list" isAutoDatasetRowChangedEvent="true" bindAddrColumn="addrInfo" eventBeforeTrigger="" eventAfterTrigger="" bindAddrKeyColumn="addrKey" isReadOnly="false" anchor="left bottom" onclick="AddrSearchComponent01_onclick"/>
        <Edit id="edt_custName" taborder="9" position="absolute 65 742 266 763" anchor="left bottom" enable="false" visible="false"/>
        <Static id="sta_detail11" text="사업장" class="sta_WFDA_Label01" position="absolute 175 555 240 582" anchor="left bottom"/>
        <UpjangSearchComponent id="edt_upjangNm" anchor="left bottom" titletext="업장 검색용 Component" taborder="36" visible="true" position="absolute 242 558 433 579" bindDataset="ds_list" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId="" enable="false" class="edt_WF_Essential"/>
        <UpjangSearchComponent id="edt_upjangNm1" titletext="업장 검색용 Component" taborder="38" text="UpjangSearchComponent00" position="absolute 508 558 709 579" bindDataset="ds_list" bindUpjangCodeColumn="custCd" bindUpjangNameColumn="custNm" eventBeforeTrigger="fn_fmsUpjangBeforeEvent" eventAfterTrigger="fn_saupNo" roleSetId="FmsUpjang" visible="false" enable="false" anchor="left bottom"/>
        <UpjangSearchComponent id="edt_mainUpjang" titletext="업장 검색용 Component" taborder="39" onkeydown="comp_mainUpjang_onkeydown" text="UpjangSearchComponent00" enable="false" position="absolute 242 558 433 579" bindDataset="ds_list" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="" roleSetId="" anchor="left bottom" class="edt_WF_Essential"/>
        <Static id="sta_detail12" text="대손처리여부" class="sta_WFDA_Label01" position="absolute 0 631 86 658" anchor="left bottom"/>
        <Combo id="cbo_badDebt" taborder="40" position="absolute 88 634 174 654" anchor="left bottom" index="-1" innerdataset="ds_badDebtYn" codecolumn="CODE" datacolumn="CODENAME"/>
        <Static id="sta_detail13" text="추심유무" class="sta_WFDA_Label01" position="absolute 176 631 259 658" anchor="left bottom"/>
        <Combo id="cbo_collection" taborder="41" position="absolute 261 634 347 654" anchor="left bottom" innerdataset="@ds_collectionYn" codecolumn="CODE" datacolumn="CODENAME"/>
        <Static id="Static24" text="대손처리여부" class="sta_WFSA_label" position="absolute 20 64 106 85" anchor="left top"/>
        <Static id="Static44" text="W10" visible="false" position="absolute 14 86 277 96" style="background:#ff000055;align:center middle;"/>
        <Combo id="cbo_searchBadDebt" taborder="42" innerdataset="@ds_badDebtYnSub" codecolumn="CODE" datacolumn="CODENAME" position="absolute 120 65 206 86" anchor="default" index="-1" displayrowcount="-1"/>
        <Static id="Static05" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 110 65 120 86" anchor="left top"/>
        <Static id="Static45" text="W15" visible="false" position="absolute -1 30 14 97" style="background:#ff000055;align:center middle;"/>
        <Static id="Static43" text="W10" visible="false" position="absolute 14 30 277 40" style="background:#ff000055;align:center middle;"/>
        <Static id="Static51" text="W05." visible="false" position="absolute 14 61 247 66" style="background:#ff000055;align:center middle;"/>
        <Static id="Static35" text="W30" visible="false" position="absolute 235 40 265 87" style="background:#ff000055;align:center middle;"/>
        <Static id="Static00" text="추심유무" class="sta_WFSA_label" position="absolute 265 64 351 85" anchor="left top"/>
        <Combo id="cbo_searchCollection" taborder="43" innerdataset="@ds_collectionYnSub" codecolumn="CODE" datacolumn="CODENAME" position="absolute 333 65 419 86" anchor="default"/>
        <Static id="Static04" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 323 65 333 86" anchor="left top"/>
        <Static id="Static11" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 419 64 449 85" anchor="left top"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item24" compid="sta_detail24" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item26" compid="sta_detail26" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item28" compid="sta_detail28" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item32" compid="sta_detail32" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item31" compid="sta_detail31" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item37" compid="sta_detail37" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item0" compid="sta_detail00" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item1" compid="sta_detail01" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item2" compid="sta_detail02" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item3" compid="sta_detail03" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item4" compid="sta_detail04" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item5" compid="sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item6" compid="sta_detail06" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item7" compid="sta_detail07" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item8" compid="sta_detail08" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item9" compid="sta_detail09" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item15" compid="sta_detail10" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item16" compid="cbo_sysGb" propid="value" datasetid="ds_list" columnid="sysGb"/>
      <BindItem id="item18" compid="edt_ceoNm" propid="value" datasetid="ds_list" columnid="ceoNm"/>
      <BindItem id="item20" compid="msk_accdAmt" propid="value" datasetid="ds_list" columnid="accdAmt"/>
      <BindItem id="item23" compid="edt_remark" propid="value" datasetid="ds_list" columnid="remark"/>
      <BindItem id="item29" compid="cal_udate" propid="value" datasetid="ds_list" columnid="udate"/>
      <BindItem id="item30" compid="edt_uuser" propid="value" datasetid="ds_list" columnid="uuserNm"/>
      <BindItem id="item33" compid="msk_bizNo" propid="value" datasetid="ds_list" columnid="bizNo"/>
      <BindItem id="item17" compid="msk_withdrawAmt" propid="value" datasetid="ds_list" columnid="withdrawAmt"/>
      <BindItem id="item34" compid="msk_arBalAmt" propid="value" datasetid="ds_list" columnid="arBalAmt"/>
      <BindItem id="item35" compid="edt_custName" propid="value" datasetid="ds_list" columnid="custNm"/>
      <BindItem id="item10" compid="sta_detail11" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item14" compid="edt_upjangNm" propid="visible" datasetid=" " columnid=""/>
      <BindItem id="item11" compid="sta_detail12" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item12" compid="sta_detail13" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item13" compid="cbo_badDebt" propid="value" datasetid="ds_list" columnid="badDebtYn"/>
      <BindItem id="item19" compid="cbo_collection" propid="value" datasetid="ds_list" columnid="collectionYn"/>
      <BindItem id="item21" compid="cbo_searchBadDebt" propid="value" datasetid="ds_search" columnid="badDebtYn"/>
      <BindItem id="item22" compid="cbo_searchCollection" propid="value" datasetid="ds_search" columnid="collectionYn"/>
    </Bind>
    <Objects>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="tmNm" type="STRING" size="256"/>
          <Column id="empNo" type="STRING" size="256"/>
          <Column id="empNm" type="STRING" size="256"/>
          <Column id="accdSdate" type="STRING" size="256"/>
          <Column id="accdEdate" type="STRING" size="256"/>
          <Column id="loginPersMask" type="STRING" size="256"/>
          <Column id="badDebtYn" type="STRING" size="256"/>
          <Column id="collectionYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
      <Dataset id="ds_list" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged">
        <ColumnInfo>
          <Column id="muCd" type="string" size="255"/>
          <Column id="muNm" type="string" size="255"/>
          <Column id="tmCd" type="string" size="255"/>
          <Column id="tmNm" type="string" size="255"/>
          <Column id="upjangCd" type="string" size="255"/>
          <Column id="upjangNm" type="string" size="255"/>
          <Column id="custCd" type="bigdecimal" size="255"/>
          <Column id="custNm" type="string" size="255"/>
          <Column id="seq" type="bigdecimal" size="255"/>
          <Column id="sysGb" type="string" size="255"/>
          <Column id="bizNo" type="string" size="255"/>
          <Column id="ceoNm" type="string" size="255"/>
          <Column id="ceoBrthDateEnc" type="string" size="255"/>
          <Column id="accdIncharge" type="string" size="255"/>
          <Column id="accdInchargeNm" type="string" size="255"/>
          <Column id="zipCode" type="string" size="255"/>
          <Column id="addr" type="string" size="255"/>
          <Column id="addrEnc" type="string" size="255"/>
          <Column id="accdDays" type="string" size="255"/>
          <Column id="acceptdd" type="string" size="255"/>
          <Column id="dealSdate" type="string" size="255"/>
          <Column id="dealEdate" type="string" size="255"/>
          <Column id="accdAmt" type="STRING" size="255"/>
          <Column id="withdrawAmt" type="string" size="255"/>
          <Column id="arBalAmt" type="string" size="255"/>
          <Column id="remark" type="string" size="255"/>
          <Column id="uuser" type="string" size="255"/>
          <Column id="uuserNm" type="string" size="255"/>
          <Column id="udate" type="string" size="255"/>
          <Column id="addrInfo" type="STRING" size="256"/>
          <Column id="addrKey" type="STRING" size="256"/>
          <Column id="mgmtKey" type="BIGDECIMAL" size="255"/>
          <Column id="userName" type="STRING" size="255"/>
          <Column id="mainUpjangCd" type="STRING" size="256"/>
          <Column id="mainUpjangNm" type="STRING" size="256"/>
          <Column id="accdArNum" type="STRING" size="256"/>
          <Column id="salesSabun" type="STRING" size="256"/>
          <Column id="salesSabunNm" type="STRING" size="256"/>
          <Column id="badDebtYn" type="STRING" size="256"/>
          <Column id="collectionYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="tmNm" type="STRING" size="256"/>
          <Column id="empNo" type="STRING" size="256"/>
          <Column id="empNm" type="STRING" size="256"/>
          <Column id="accdSdate" type="STRING" size="256"/>
          <Column id="accdEdate" type="STRING" size="256"/>
          <Column id="maskAuth" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="muCd">title:사업부</Col>
            <Col id="tmNm"/>
            <Col id="tmCd"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">1</Col>
            <Col id="insYn">1</Col>
            <Col id="delYn">1</Col>
            <Col id="savYn">1</Col>
            <Col id="prtYn">0</Col>
            <Col id="exlYn">1</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_grdListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged">
        <ColumnInfo>
          <Column id="muCd" type="string" size="255"/>
          <Column id="muNm" type="string" size="255"/>
          <Column id="tmCd" type="string" size="255"/>
          <Column id="tmNm" type="string" size="255"/>
          <Column id="upjangCd" type="string" size="255"/>
          <Column id="upjangNm" type="string" size="255"/>
          <Column id="custCd" type="bigdecimal" size="255"/>
          <Column id="custNm" type="string" size="255"/>
          <Column id="seq" type="bigdecimal" size="255"/>
          <Column id="sysGb" type="string" size="255"/>
          <Column id="bizNo" type="string" size="255"/>
          <Column id="ceoNm" type="string" size="255"/>
          <Column id="ceoBrthDateEnc" type="string" size="255"/>
          <Column id="accdIncharge" type="string" size="255"/>
          <Column id="accdInchargeNm" type="string" size="255"/>
          <Column id="zipCode" type="string" size="255"/>
          <Column id="addr" type="string" size="255"/>
          <Column id="addrEnc" type="string" size="255"/>
          <Column id="accdDays" type="string" size="255"/>
          <Column id="acceptdd" type="string" size="255"/>
          <Column id="dealSdate" type="string" size="255"/>
          <Column id="dealEdate" type="string" size="255"/>
          <Column id="accdAmt" type="STRING" size="255"/>
          <Column id="withdrawAmt" type="string" size="255"/>
          <Column id="arBalAmt" type="string" size="255"/>
          <Column id="remark" type="string" size="255"/>
          <Column id="uuser" type="string" size="255"/>
          <Column id="uuserNm" type="string" size="255"/>
          <Column id="udate" type="string" size="255"/>
          <Column id="addrInfo" type="STRING" size="256"/>
          <Column id="addrKey" type="STRING" size="256"/>
          <Column id="mgmtKey" type="BIGDECIMAL" size="255"/>
          <Column id="userName" type="STRING" size="255"/>
          <Column id="salesSabunNm" type="STRING" size="256"/>
          <Column id="salesSabun" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="custCd">title:거래처,required:true</Col>
            <Col id="custNm">title:거래처,required:true</Col>
            <Col id="bizNo">title:사업자등록번호,required:true</Col>
            <Col id="ceoNm">title:대표자명,required:true</Col>
            <Col id="accdIncharge"/>
            <Col id="accdInchargeNm"/>
            <Col id="sysGb">title:시스템구분,required:true</Col>
            <Col id="salesSabunNm">title:영업 담당자,required:true</Col>
            <Col id="salesSabun">title:영업 담당자,required:true</Col>
            <Col id="upjangCd">title:사업장,required:true</Col>
            <Col id="upjangNm">title:사업장,required:true</Col>
            <Col id="dealEdate">title:거래종료일,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_searchDetail" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_searchDetailOut" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_saupNo" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="saupno" type="STRING" size="256"/>
          <Column id="drname1" type="STRING" size="256"/>
          <Column id="addrKey" type="STRING" size="256"/>
          <Column id="custcd" type="STRING" size="256"/>
          <Column id="custnm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upjang" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="upjangCd" type="string" size="256"/>
          <Column id="upjangNm" type="string" size="256"/>
          <Column id="bizNo" type="string" size="255"/>
          <Column id="ceoNm" type="string" size="256"/>
          <Column id="zipCode" type="string" size="256"/>
          <Column id="addr" type="string" size="256"/>
          <Column id="addrEnc" type="string" size="256"/>
          <Column id="upjang" type="string" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_badDebtYn" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODENAME" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">Y</Col>
            <Col id="CODENAME">예</Col>
          </Row>
          <Row>
            <Col id="CODE">N</Col>
            <Col id="CODENAME">아니오</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_collectionYn" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODENAME" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">Y</Col>
            <Col id="CODENAME">예</Col>
          </Row>
          <Row>
            <Col id="CODE">N</Col>
            <Col id="CODENAME">아니오</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_collectionYnSub" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODENAME" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODENAME">전체</Col>
          </Row>
          <Row>
            <Col id="CODE">Y</Col>
            <Col id="CODENAME">예</Col>
          </Row>
          <Row>
            <Col id="CODE">N</Col>
            <Col id="CODENAME">아니오</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_badDebtYnSub" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODENAME" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODENAME">전체</Col>
          </Row>
          <Row>
            <Col id="CODE">Y</Col>
            <Col id="CODENAME">예</Col>
          </Row>
          <Row>
            <Col id="CODE">N</Col>
            <Col id="CODENAME">아니오</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_grdListValidFms" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged">
        <ColumnInfo>
          <Column id="muCd" type="string" size="255"/>
          <Column id="muNm" type="string" size="255"/>
          <Column id="tmCd" type="string" size="255"/>
          <Column id="tmNm" type="string" size="255"/>
          <Column id="custCd" type="bigdecimal" size="255"/>
          <Column id="custNm" type="string" size="255"/>
          <Column id="seq" type="bigdecimal" size="255"/>
          <Column id="sysGb" type="string" size="255"/>
          <Column id="bizNo" type="string" size="255"/>
          <Column id="ceoNm" type="string" size="255"/>
          <Column id="ceoBrthDateEnc" type="string" size="255"/>
          <Column id="accdIncharge" type="string" size="255"/>
          <Column id="accdInchargeNm" type="string" size="255"/>
          <Column id="zipCode" type="string" size="255"/>
          <Column id="addr" type="string" size="255"/>
          <Column id="addrEnc" type="string" size="255"/>
          <Column id="accdDays" type="string" size="255"/>
          <Column id="acceptdd" type="string" size="255"/>
          <Column id="dealSdate" type="string" size="255"/>
          <Column id="dealEdate" type="string" size="255"/>
          <Column id="accdAmt" type="STRING" size="255"/>
          <Column id="withdrawAmt" type="string" size="255"/>
          <Column id="arBalAmt" type="string" size="255"/>
          <Column id="remark" type="string" size="255"/>
          <Column id="uuser" type="string" size="255"/>
          <Column id="uuserNm" type="string" size="255"/>
          <Column id="udate" type="string" size="255"/>
          <Column id="addrInfo" type="STRING" size="256"/>
          <Column id="addrKey" type="STRING" size="256"/>
          <Column id="mgmtKey" type="BIGDECIMAL" size="255"/>
          <Column id="userName" type="STRING" size="255"/>
          <Column id="salesSabunNm" type="STRING" size="256"/>
          <Column id="salesSabun" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="custCd"/>
            <Col id="custNm"/>
            <Col id="bizNo">title:사업자등록번호,required:true</Col>
            <Col id="ceoNm">title:대표자명,required:true</Col>
            <Col id="accdIncharge"/>
            <Col id="accdInchargeNm"/>
            <Col id="sysGb">title:시스템구분,required:true</Col>
            <Col id="salesSabunNm">title:영업 담당자,required:true</Col>
            <Col id="salesSabun">title:영업 담당자,required:true</Col>
            <Col id="dealEdate">title:거래종료일,required:true</Col>
            <Col id="upjangCd"/>
            <Col id="upjangNm"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="dealEdate" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="mainUpjangNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_custInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="upjang" type="STRING" size="256"/>
          <Column id="custcd" type="STRING" size="256"/>
          <Column id="totAmt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : 사고거래처관리
  파 일 명 : AccdUpjangMngt.xfdl
  기    능 : 사고거래처관리

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.11.01   김윤기   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";


/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{
    // Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
    gfn_formOnLoad(this);

    // 초기값 셋팅
    fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{	
    ds_search.setColumn(0, "muCd", g_Mu_Cd);            //사업부
    ds_search.setColumn(0, "muNm", g_Mu_Nm);
    ds_search.setColumn(0, "tmCd", g_Tm_Cd);            //팀
    ds_search.setColumn(0, "tmNm", g_Tm_Nm);
 //   ds_search.setColumn(0, "maskAuth", SCAuth.getMaskAuth(this));
    ds_search.setColumn(0, "loginPersMask", g_PersInfoMask);
    
    
    
	// 팀
    edt_tmNm.applyAuthLevel(edt_muNm);
    //	거래처
    edt_upjangNm.applyAuthLevel(edt_tmNm);
    // 본사
    edt_mainUpjang.applyAuthLevel(edt_tmNm);
	edt_mainUpjang.setMainUpjang(true);
    //edt_mainUpjang.applyMainUpjang(null);
    //edt_mainUpjang.setAlwaysFmsUpjang(true);
    
    // 본사소속 업장
    //edt_upjangNm1.applyAuthLevel(edt_tmNm);
    edt_upjangNm1.applyMainUpjang(edt_mainUpjang);
    

//     //조회 조건 날짜 초기값
// 	var strFirstDate = gfn_getFirstDate();
// 	var strLastDate = gfn_getLastDate();
// 	trace("AccdUpjangMngt 화면 >> fn_init :  fv_sToday=[" + fv_sToday + "], strFirstDate=[" + strFirstDate + "], strLastDate=[" + strLastDate + "]");

    cal_fromDay.fn_initMonthCal(this, gfn_getFirstDate(), "", ds_search, "accdSdate", "Y");
    cal_toDay.fn_initMonthCal(this, fv_sToday, "", ds_search, "accdEdate", "Y");
    
    //cal_ceoBrthDateEnc.fn_initMonthCal(this, fv_sToday, "", ds_list, "ceoBrthDateEnc", "");
    cal_ceoBrthDateEnc.fn_initMonthCal(this, fv_sToday, "", ds_list, "ceoBrthDateEnc", "");
    cal_accdDays.fn_initMonthCal(this, fv_sToday, "", ds_list, "accdDays", "");
    cal_acceptdd.fn_initMonthCal(this, fv_sToday, "", ds_list, "acceptdd", "");
    cal_dealSdate.fn_initMonthCal(this, fv_sToday, "", ds_list, "dealSdate", "");
    cal_dealEdate.fn_initMonthCal(this, fv_sToday, "", ds_list, "dealEdate", "Y");
    

    SCCombo.bind(this, "ComCode", "cbo_sysGb", null, {groupCode:"MA0001", defVal:"001"});  //2. 시스템구분 (TABLE : SCC_COMMON_CODE)
    // 사업부별 그리드 텍스트 설정
    
     // 사업부변경시 컴포넌트 변경
    if(g_Mu_Cd == "2004"){
		edt_upjangNm.visible = false;
		edt_custNm.visible = false;
		edt_mainUpjang.visible = true;
		edt_upjangNm1.visible = true;
		grd_list.setFormat("2004");
		sta_detail11.text = "본사";
		sta_detail24.text = "사업장";
    }else{
		edt_upjangNm.visible = true;
		edt_custNm.visible = true;
		edt_mainUpjang.visible = false;
		edt_upjangNm1.visible = false;
		grd_list.setFormat("default");
		sta_detail11.text = "사업장";
		sta_detail24.text = "거래처";
    }
    
   // editGridText();
   

    fn_search();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_close()
{
    // v_ds_check 미사용시 변경사항 체크
    if (gfn_dsIsUpdated(ds_list) == true) {
        // 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
        if (!gfn_confirm("confirm.before.movepage")) return false;
    }

    // 조회프로그램에도 Return true; 기술해 주세요!
    return true;
}


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
    // v_ds_check 미사용시 변경사항 체크
    if (gfn_dsIsUpdated(ds_list) == true) {
        var retValue = gfn_confirm("confirm.before.search");    // 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
        if (retValue == false) return;
    }
    
    // 조회시 거래처명 enable처리
    edt_custNm.enable = false;
    edt_upjangNm.enable = false;
    edt_mainUpjang.enable = false;
		edt_upjangNm1.enable = false;

//  // v_ds_check 사용시 공통버튼에서 변경사항 체크함
//  // 변경사항 체크
//  if (gfn_isDataChange() == true) {
//      var retValue = gfn_confirm("confirm.before.search");    // 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
//      if (retValue == false) return;
//  }

    // ds_listValid Dataset에 Validation할 칼럼별로 구성
    // 항목 추가시에는 ","로 구분
    // 예)title:금액1,required:false,minlength:2,digits:true

    // Alert시 칼럼 표시 명칭               - title:아이디(메시지의 치환할 명칭)
    // 필수체크                              - required:true(체크여부 true/false)
    // size 크기                              - length:7(size 숫자)
    // 최대 size 크기                        - maxlength:7(size 숫자)
    // 최소 size 크기                        - minlength:7(size 숫자)
    // 최대 size 크기(Byte)                  - maxlengthB:7(size 숫자)
    // 최소 size 크기(Byte)                  - minlengthB:7(size 숫자)
    // 숫자 여부                             - digits:true(체크여부 true/false)
    // 해당 숫자 이하                       - min:7(size 숫자)
    // 해당 숫자 이상                       - max:7(size 숫자)
    // 소숫점 자리수 비교                   - declimit:3(size 숫자)
    // 날짜 년월일 체크                     - date:true(체크여부 true/false)
    // 날짜 년월 체크                       - dateym:true(체크여부 true/false)
    // 타 칼럼값보다 큰지 비교             - comparemax:Column4(Dataset 칼럼ID):시작일(비교대상의 메시지 치환할 명칭)
    // 타 칼럼값보다 작은지 비교           - comparemin:Column6(Dataset 칼럼ID):종료일(비교대상의 메시지 치환할 명칭)
    // 타 칼럼값과 같은 값인지 비교        - equalto:Column5(Dataset 칼럼ID):금액1(비교대상의 메시지 치환할 명칭)
    // 사이의 값인지 비교                   - range:40(from 숫자):100(to 숫자)
    // 코드값이 목록내의 값인지 비교       - code:1(목록 숫자):2(목록 숫자):3(목록 숫자)
    // 이메일 여부 체크(함수 체크시 예제)  - isEmail:true(체크여부 true/false)

    // 오류시 focus 지정                      - focus:cal_toDate(Componet ID로 form에서부터의 경로)

    // 조회시 Validation Check
    if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;


	//사고기간 시작일이 종료일보다 늦어지는 것 체크
	if (fn_dateChkDiff() == false) return;
	

    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_list);
	
    var strSvcID    = "search";
    var strURL      = "sm/saa/accdUpjangMngt/selectList.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_list=dsSearchOutput";
    var strArg      = "maskAuth="+SCAuth.getMaskAuth(this);
    var strCallback = "fn_callBack";
    var bAsync      = false;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{
//      if( fn_updateCheck('ds_list') == false){
//          return ;
//      }

		 if(!gfn_isNull(edt_muNm.getMuCode())) {
				if(edt_muNm.getMuCode() == "2001" || edt_muNm.getMuCode() == "2005"){ 
					gfn_alert("해당사업부는 입력 권한이 없습니다.");
					return false;
				}
			}

		// 조회시 거래처명 enable처리
		if(edt_tmNm.getTmName() == ""){
			gfn_alert("팀은 필수 입력사항 입니다.");
			return;
		}
		
		var nRow = ds_list.addRow();
		
		if(edt_muNm.getMuCode() == "2002") {         // 급식 2002
				cbo_sysGb.value =  "001";
			} else if(edt_muNm.getMuCode() == "2004") {  // 식재
				cbo_sysGb.value =  "004";
			} else if(edt_muNm.getMuCode() == "2003") {  // 외식
				cbo_sysGb.value = "002";
			}
        //ds_list.setColumn(nRow, "sysGb", "001");
        ds_list.setColumn(nRow, "accdDays", fv_sToday);
        ds_list.setColumn(nRow, "acceptdd", fv_sToday);
        ds_list.setColumn(nRow, "dealSdate", fv_sToday);
        //ds_list.setColumn(nRow, "dealEdate", fv_sToday);
        ds_list.setColumn(nRow, "muCd", edt_muNm.getMuCode() );
        ds_list.setColumn(nRow, "tmCd", edt_tmNm.getTmCode() );
        ds_list.setColumn(nRow, "addrInfo", AddrSearchComponent01.newData());
        
        edt_custNm.enable = true;
		edt_upjangNm.enable = true;
		edt_mainUpjang.enable = true;
		edt_upjangNm1.enable = true;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{
	// 삭제전 사고채권발생보고, 미발생보고에 데이터가 있는지 확인
	//if(!before_deleteCheck()) return;
	
	ds_searchDetail.clear();
	
	ds_searchDetail.addColumn("custCd", "BIGDECIMAL", 255);
	
	ds_searchDetail.addRow();
	
	ds_searchDetail.setColumn(0, "custCd", ds_list.getColumn(ds_list.rowposition, "custCd"));
	
	
	var strSvcID    = "searchDetail";
    var strURL      = "sm/saa/accdUpjangMngt/selectAccdList.xdo";
    var strInDs     = "ds_searchDetail=ds_searchDetail:A";
    var strOutDs    = "ds_searchDetailOut=ds_searchDetailOut";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);

}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
    // v_ds_check 미사용시 변경사항 체크
    if (gfn_dsIsUpdated(ds_list) == false) {
        gfn_alert("msg.save.nochange"); // 변경된 내역이 없습니다.
        return;
    }
    
    // 저장시 Valid 체크
    if(edt_muNm.getMuCode() == "2004"){
		if (gfn_validCheck(ds_list, ds_grdListValidFms, true) == false) return;
    }else{
		if (gfn_validCheck(ds_list, ds_grdListValid, true) == false) return;
    }
    
    // 식재일때 사업장 미 입력시 메인업장과 같은 코드 입력
    if(gfn_isNull(ds_list.getColumn(ds_list.rowposition, "custCd")) ){
		ds_list.setColumn(ds_list.rowposition, "custCd", ds_list.getColumn(ds_list.rowposition, "upjangCd"));
    }	
	//trace(ds_list.saveXML());
    // ds_listValid Dataset에 Validation할 칼럼별로 구성
    // 항목 추가시에는 ","로 구분
    // 예)title:금액1,required:false,minlength:2,digits:true

    // Alert시 칼럼 표시 명칭               - title:아이디(메시지의 치환할 명칭)
    // 필수체크                              - required:true(체크여부 true/false)
    // size 크기                              - length:7(size 숫자)
    // 최대 size 크기                        - maxlength:7(size 숫자)
    // 최소 size 크기                        - minlength:7(size 숫자)
    // 최대 size 크기(Byte)                  - maxlengthB:7(size 숫자)
    // 최소 size 크기(Byte)                  - minlengthB:7(size 숫자)
    // 숫자 여부                             - digits:true(체크여부 true/false)
    // 해당 숫자 이하                       - min:7(size 숫자)
    // 해당 숫자 이상                       - max:7(size 숫자)
    // 소숫점 자리수 비교                   - declimit:3(size 숫자)
    // 날짜 년월일 체크                     - date:true(체크여부 true/false)
    // 날짜 년월 체크                       - dateym:true(체크여부 true/false)
    // 타 칼럼값보다 큰지 비교             - comparemax:Column4(Dataset 칼럼ID):시작일(비교대상의 메시지 치환할 명칭)
    // 타 칼럼값보다 작은지 비교           - comparemin:Column6(Dataset 칼럼ID):종료일(비교대상의 메시지 치환할 명칭)
    // 타 칼럼값과 같은 값인지 비교        - equalto:Column5(Dataset 칼럼ID):금액1(비교대상의 메시지 치환할 명칭)
    // 사이의 값인지 비교                   - range:40(from 숫자):100(to 숫자)
    // 코드값이 목록내의 값인지 비교       - code:1(목록 숫자):2(목록 숫자):3(목록 숫자)
    // 이메일 여부 체크(함수 체크시 예제)  - isEmail:true(체크여부 true/false)

    // 오류시 focus 지정                      - focus:cal_toDate(Componet ID로 form에서부터의 경로)

    // 저장시 Validation Check
    //if (gfn_validCheck(grd_list, ds_listValid) == false)  return;

    var strSvcID    = "save";
    var strURL      = "sm/saa/accdUpjangMngt/saveList.xdo";
    var strInDs     = "ds_list=ds_list:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
    // 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.

    
    if (nErrorCode < 0) {
        return;
    }

    switch(strSvcID)
    {
        // 코드분류 조회

        case "searchSaupno" :
			if(ds_saupNo.rowcount > 0 ){
				ds_list.setColumn(ds_list.rowposition, "bizNo", ds_saupNo.getColumn(0, "saupno"));
				ds_list.setColumn(ds_list.rowposition, "ceoNm", ds_saupNo.getColumn(0, "drname1"));
			}
            break;   

		case "search" :
            //trace(ds_list.saveXML());
            break;
        case "searchInfo" :
            //trace(ds_list.saveXML());
            break;
            
        case "searchCustInfo" :
				if(ds_custInfo.getRowCount() > 0) {
					ds_list.setColumn(ds_list.rowposition, "accdAmt", ds_custInfo.getColumn(0, "totAmt"));
				}           
				break;
				    
        // 저장
        case "save" :
            gfn_alert("msg.save.success");  // 저장 되었습니다.
            fn_search();

            break;
         case "searchDetail" :
            if(ds_searchDetailOut.getColumn(0, "accdCnt") != 0 && ds_searchDetailOut.getColumn(0, "nonOccurCnt") != 0){
				gfn_alert("사고채권 발생보고등록과 매출 미발생 사유보고서에 데이터가 존재하여 삭제 하실 수 없습니다.");
            }else if (ds_searchDetailOut.getColumn(0, "accdCnt") != 0){
				gfn_alert("사고채권 발생보고등록에 데이터가 존재하여 삭제 하실 수 없습니다.");
            }else if (ds_searchDetailOut.getColumn(0, "nonOccurCnt") != 0){
				gfn_alert("매출 미발생 사유보고서에 데이터가 존재하여 삭제 하실 수 없습니다.");
            }else{
				fn_delete_act();
            }
            break;
    }
}

/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/

/*----------------------------------------------------------------------------------------------
 * 설명      : 본사 선택 후 팀 사업장 호출 시 인자값 전달
 * o : object, c : name(comp id) 값(1개의 form에 upjangsearch 가 여러개일 경우 사용)
 *---------------------------------------------------------------------------------------------*/
function fn_fmsUpjangBeforeEvent(o, c)
{
	var v_mainUpjang = "";
	v_mainUpjang = gfn_transNullToEmpty(ds_list.getColumn(ds_list.rowposition, "upjangCd"));		// 본사코드
	c.setMainUpjang(v_mainUpjang);
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 팝업 검색 후 호출 메소드( 팀 데이터에 값 세팅)
 *---------------------------------------------------------------------------------------------*/

//MU가 변경될 때에 대한 이벤트
function fn_muItemChangedEvent(obj, evt)
{
    edt_tmNm.setTmCode("");
    edt_upjangNm.setUpjangCode("");
    ds_list.clearData();
    
    // 사업부변경시 컴포넌트 변경
    if(edt_muNm.getMuCode() == "2004"){
		edt_upjangNm.visible = false;
		edt_custNm.visible = false;
		edt_mainUpjang.visible = true;
		edt_upjangNm1.visible = true;
		grd_list.setFormat("2004");
		sta_detail11.text = "본사";
		sta_detail24.text = "사업장";
    }else{
		edt_upjangNm.visible = true;
		edt_custNm.visible = true;
		edt_mainUpjang.visible = false;
		edt_upjangNm1.visible = false;
		grd_list.setFormat("default");
		sta_detail11.text = "사업장";
		sta_detail24.text = "거래처";
    }
    
    // 사업부 변경시 그리드 텍스트 변경
    editGridText();
}

function editGridText(){
	
    // 사업부변경시 그리드 텍스트 변경
//     if(edt_muNm.getMuCode() == "2004"){
// 		grd_list.setCellProperty("head",3, "text", "본사코드");
// 		grd_list.setCellProperty("head",4, "text", "사업장명");
//     }else{
// 		grd_list.setCellProperty("head",3, "text", "거래처코드");
// 		grd_list.setCellProperty("head",4, "text", "거래처명");
//     }
}

//TM이 변경될 때에 대한 이벤트
function fn_tmChangedEvent(obj, data)
{
    edt_upjangNm.setUpjangCode("");
    
    // 팀 변경시 작성중인 데이터 리셋
    ds_list.clearData();
	
}

//component 사용하지 않음
//cust가 변경될 때에 대한 이벤트
function fn_custChangedEvent(obj, data) {
    ds_list.setColumn(ds_list.rowposition, "custCd", data.custcd);
    ds_list.setColumn(ds_list.rowposition, "custNm", data.custnm);
    ds_list.setColumn(ds_list.rowposition, "bizNo", data.saupno);
    ds_list.setColumn(ds_list.rowposition, "ceoNm", data.drname1);
    //ds_list.setColumn(ds_list.rowposition, "zipCode", data.postNo);
    //ds_list.setColumn(ds_list.rowposition, "addr", data.addr);
    //ds_list.setColumn(ds_list.rowposition, "addrEnc", data.detailAddrEnc);
}

function fn_saupNo()
{
	ds_upjang.clearData();
	ds_upjang.addRow();
	ds_upjang.setColumn(0, "upjang",edt_upjangNm1.getUpjangCode() );
		
	var strSvcID    = "searchSaupno";
    var strURL      = "sm/saa/accdArOccurRept/selectSaupNoList.xdo";
    var strInDs     = "ds_upjang=ds_upjang:A";
    var strOutDs    = "ds_saupNo=dsSaupNo";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*
//upjang이 변경될 때에 대한 이벤트
function fn_upjangChangedEvent(obj, data) {
    ds_list.setColumn(ds_list.rowposition, "custCd", data.custcd);
    ds_list.setColumn(ds_list.rowposition, "custNm", data.custnm);
    ds_list.setColumn(ds_list.rowposition, "bizNo", data.saupno);
    ds_list.setColumn(ds_list.rowposition, "ceoNm", data.drname1);
    ds_list.setColumn(ds_list.rowposition, "zipCode", data.postNo);
    ds_list.setColumn(ds_list.rowposition, "addr", data.addr);
    ds_list.setColumn(ds_list.rowposition, "addrEnc", data.detailAddrEnc);
}
*/

function fn_custPopup(p){
	p.setQid("ScoUpjangCust");//거래처팝업에 반드시 필요
	p.setUpjang(edt_upjangNm.getUpjangCode() );
	return true;
}

/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/

// 입력제한 금액(12자리)
function amount_onchar(obj:MaskEdit,  e:CharEventInfo)
{
    if(e.posttext.length == 13){
        return false;
    }
}

//팝업 변경
/*function cbo_sysGb_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
    if(e.postvalue == "004") {
        edt_upjangNm.visible = true;
        edt_custNm.visible   = false;
    } else {
        edt_upjangNm.visible = false;
        edt_custNm.visible   = true;
    }
    
}*/

//사업자번호 확인
function msk_bizNo_onkillfocus(obj:MaskEdit, e:KillFocusEventInfo)
{
    if(!gfn_isCompRegNo(obj.value)) {
        gfn_alert("사업자등록번호 형식이 올바르지 않습니다.");
        obj.value = "";

        return;
    }
}

//사고기간 시작일이 종료일보다 늦어지는 것 체크
function fn_dateChkDiff() {
    var strFromDay = cal_fromDay.fn_getValue();
    var strToDay   = cal_toDay.fn_getValue();
    var strDiff    = cal_toDay.fn_getValue() - cal_fromDay.fn_getValue();
    //trace("AccdUpjangMngt 화면 >> fn_dateChkDiff : strFromDay=[" + strFromDay+ "], strToDay=[" + strToDay+ "], strDiff=[" + strDiff + "]");
	
	if (cal_toDay.fn_getValue() - cal_fromDay.fn_getValue() < 0) {  // 거래처, 업장
		//trace("AccdUpjangMngt 화면 >> fn_codeChkEvent : 사고기간 시작일이 종료일보다 늦음.. 사고기간 수정");
		gfn_alert("사고기간 시작일이 종료일보다 늦습니다. 다시 입력해 주세요.");
		cal_fromDay.setFocus;
		return false;
	} else {
		//trace("AccdUpjangMngt 화면 >> fn_codeChkEvent : 사고기간 시작일이 종료일보다 빠름.. ok");
		return true;
	}
}
function Static28_onclick(obj:Static,  e:ClickEventInfo)
{
	
}

function AddrSearchComponent01_onclick(obj:AddrSearchComponent,  e:ClickEventInfo)
{
	
}

function fn_delete_act()
{
    var nRow = ds_list.rowposition;

    if(nRow == -1) {
        gfn_alert("msg.err.grid.noselect", "삭제할 row");   // 선택된 항목이 없습니다.
        return;
    }else{
		if(gfn_confirm("confirm.before.delete")){                 // 선택된 자료를 삭제하시겠습니까 ?
			ds_list.deleteRow(nRow);
		}else{
			return;
		}
    }
}
function msk_withdrawAmt_onkillfocus(obj:MaskEdit, e:KillFocusEventInfo)
{
	if(msk_accdAmt.value - msk_withdrawAmt.value < 0 ){
		gfn_alert("사고금액보다 회수금액이 더 큽니다.");
		msk_withdrawAmt.value = "";
		msk_arBalAmt.value = "";
		return false;
	}else{
		msk_arBalAmt.value = msk_accdAmt.value - msk_withdrawAmt.value;
	}	
}

function msk_accdAmt_onkillfocus(obj:MaskEdit, e:KillFocusEventInfo)
{
	if(msk_accdAmt.value - msk_withdrawAmt.value < 0 ){
		gfn_alert("사고금액보다 회수금액이 더 큽니다.");
		msk_withdrawAmt.value = "";
		msk_arBalAmt.value = "";
		return false;
	}else{
		msk_arBalAmt.value = msk_accdAmt.value - msk_withdrawAmt.value;
	}
}
function ds_list_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
 	if(e.columnid == "dealEdate"){
 		if(obj.getColumn(obj.rowposition, "dealSdate") > obj.getColumn(obj.rowposition, "dealEdate")){
 		gfn_alert("거래시작일이 거래종료일보다 큽니다");
 		cal_dealEdate.fn_setValue(fv_sToday);
 		return false;
 	}
 	// 거래처 선택후 최초 채권 금액 가져오기
 	ds_cond.clearData();
 	ds_cond.addRow();
 	
 	ds_cond.setColumn(0, "muCd", edt_muNm.getMuCode() );
 	ds_cond.setColumn(0, "tmCd", edt_tmNm.getTmCode() );
 	ds_cond.setColumn(0, "dealEdate", cal_dealEdate.fn_getValue() );
	
	if(edt_muNm.getMuCode() == "2004"){ // 식재일때
		ds_cond.setColumn(0, "mainUpjangNm", edt_mainUpjang.getUpjangName() );
		ds_cond.setColumn(0, "upjangNm", edt_upjangNm1.getUpjangName() );
	}else{ // 식재가 아닐때
		ds_cond.setColumn(0, "upjangCd", edt_upjangNm.getUpjangCode() );
		ds_cond.setColumn(0, "custCd", edt_custNm.getCustCode() );
	}
	
	// 거래종료일이 없을때는 조회하지 않고 리턴
	if(gfn_isNull(ds_cond.getColumn(0, "dealEdate"))) return;
	
	var strSvcID    = "searchCustInfo";
    var strURL      = "sm/saa/accdArOccurRept/selectCustInfo.xdo";
    var strInDs     = "ds_cond=ds_cond:A";
    var strOutDs    = "ds_custInfo=rsCust";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
	
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
	
	}
}
]]></Script>
  </Form>
</FDL>
