<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="StandardRecipeDetailedMgnt" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="표준 레시피 상세 관리" onload="form_onload" onsize="StandardRecipeDetailedMgnt_onsize">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="9" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static22" text="레시피 목록" class="sta_WF_Title01" position="absolute 0 116 467 134" anchor="left top"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 103 410 116" anchor="left top"/>
        <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 129 491 134" anchor="left top"/>
        <Grid id="grd_list" taborder="8" binddataset="ds_list" autoenter="select" useinputpanel="false" cellsizingtype="col" position="absolute 0 134 343 710" anchor="left top bottom" formats="&lt;Formats&gt;&#10;  &lt;Format id=&quot;default&quot;&gt;&#10;    &lt;Columns&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;    &lt;/Columns&gt;&#10;    &lt;Rows&gt;&#10;      &lt;Row band=&quot;head&quot; size=&quot;24&quot;/&gt;&#10;      &lt;Row band=&quot;body&quot; size=&quot;24&quot;/&gt;&#10;    &lt;/Rows&gt;&#10;    &lt;Band id=&quot;head&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;recipeCd&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;recipeNm&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;stand&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;중분류&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;소분류&quot;/&gt;&#10;    &lt;/Band&gt;&#10;    &lt;Band id=&quot;body&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;bind:recipeCd&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;bind:recipeNm&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;bind:stand&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;bind:중분류&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;bind:소분류&quot;/&gt;&#10;    &lt;/Band&gt;&#10;  &lt;/Format&gt;&#10;&lt;/Formats&gt;&#10;">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="70"/>
                <Column size="150"/>
                <Column size="80"/>
                <Column size="88"/>
                <Column size="85"/>
                <Column size="94"/>
                <Column size="85"/>
                <Column size="70"/>
                <Column size="40"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="No"/>
                <Cell col="1" text="레시피코드"/>
                <Cell col="2" text="레시피"/>
                <Cell col="3" text="레시피단계"/>
                <Cell col="4" text="중분류"/>
                <Cell col="5" text="소분류"/>
                <Cell col="6" text="반찬세트"/>
                <Cell col="7" text="예상판매단가"/>
                <Cell col="8" text="원가율(%)"/>
                <Cell col="9" text="상세수"/>
                <Cell col="10" text="조리법유무"/>
              </Band>
              <Band id="body">
                <Cell expr="currow+1"/>
                <Cell col="1" style="align:center;" text="bind:stdRecipeCd" expandshow="hide" expandsize="13"/>
                <Cell col="2" style="align:left;" text="bind:recipeNm" expandshow="hide" expandsize="13"/>
                <Cell col="3" style="align:left;" text="bind:standNm"/>
                <Cell col="4" displaytype="combo" text="bind:mcalssCd" combodataset="ds_mcalssCd" combocodecol="code" combodatacol="codeName"/>
                <Cell col="5" displaytype="combo" text="bind:sclassCd" combodataset="ds_sclassCd" combocodecol="code" combodatacol="codeName"/>
                <Cell col="6" displaytype="combo" edittype="combo" text="bind:setRecipeCd" combodataset="ds_setRecipe" combocodecol="stdRecipeCd" combodatacol="recipeNm"/>
                <Cell col="7" displaytype="number" edittype="normal" text="bind:salePrice" mask="###,##0"/>
                <Cell col="8" displaytype="number" text="bind:goalCstrat"/>
                <Cell col="9" displaytype="number" edittype="none" text="bind:subCount" mask="###,##0"/>
                <Cell col="10" displaytype="normal" edittype="none" text="bind:cusineCnt"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 103" anchor="left top right"/>
        <Static id="Static28" text="사 업 부" class="sta_WFSA_label" position="absolute 15 40 77 61" anchor="left top"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 93 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 93 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 71 40 81 61" anchor="left top"/>
        <Static id="Static09" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 241 40 271 61" anchor="left top"/>
        <Static id="Static00" text="업장유형" class="sta_WFSA_label" position="absolute 271 40 336 61" anchor="left top"/>
        <Static id="Static01" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 329 40 339 61" anchor="left top"/>
        <Static id="Static02" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 241 71 271 92" anchor="left top"/>
        <Static id="Static03" text="레시피명" class="sta_WFSA_label" position="absolute 529 40 589 61" anchor="left top"/>
        <Static id="Static10" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 593 40 603 61" anchor="left top"/>
        <Edit id="edt_schRecipeNm" taborder="6" position="absolute 603 40 763 61" anchor="left top" onkeydown="edt_schRecipeNm_onkeydown" imemode="hangul"/>
        <Static id="Static12" text="중 분 류" class="sta_WFSA_label" position="absolute 15 71 77 92" anchor="left top"/>
        <Static id="Static13" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 329 71 339 92" anchor="left top"/>
        <Combo id="cbo_schMcalssCd" taborder="4" innerdataset="@ds_mcalssCd" codecolumn="mcalssCd" datacolumn="mcalssCdNm" position="absolute 81 71 241 92" anchor="left top"/>
        <Static id="Static14" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 763 40 793 61" anchor="left top"/>
        <Combo id="cbo_schMuCd" taborder="0" value="01" text="외식사업부" innerdataset="@ds_muCd" codecolumn="muCd" datacolumn="muNm" index="0" class="cmb_WF_Essential" position="absolute 81 40 241 61" anchor="left top" visible="true" readonly="true"/>
        <Combo id="cbo_schUpjangType" taborder="1" innerdataset="@ds_upjangType" codecolumn="code" datacolumn="codeName" position="absolute 339 40 499 61" anchor="left top"/>
        <Static id="Static17" text="기준일자" class="sta_WFSA_label" position="absolute 793 40 855 61" anchor="left top"/>
        <Static id="Static21" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 499 40 529 61" anchor="left top"/>
        <Static id="Static18" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 853 40 863 61" anchor="left top"/>
        <Static id="Static23" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 71 71 81 92" anchor="left top"/>
        <Static id="Static24" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 499 71 529 92" anchor="left top"/>
        <Static id="Static25" text="소 분 류" class="sta_WFSA_label" position="absolute 271 71 333 92" anchor="left top"/>
        <Combo id="cbo_schClassCd" taborder="5" innerdataset="@ds_sclassCd" codecolumn="sclassCd" datacolumn="sclassCdNm" position="absolute 339 71 499 92" anchor="left top"/>
        <Static id="Static19" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 71 15 92" anchor="left top"/>
        <Static id="Static27" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 92 93 102" anchor="left top"/>
        <Static id="Static29" text="레시피 상세" class="sta_WF_Title01" position="absolute 605 116 1072 134" anchor="left top"/>
        <Static id="Static30" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 605 103 1055 116" anchor="left top"/>
        <Static id="Static31" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 621 129 1152 134" anchor="left top"/>
        <Grid id="grd_dtlList" taborder="7" binddataset="ds_dtlList" autoenter="select" useinputpanel="false" cellsizingtype="col" treeusecheckbox="false" treeuseimage="false" treeinitstatus="expand,all" position="absolute 361 134 1237 419" anchor="all" formats="&lt;Formats&gt;&#10;  &lt;Format id=&quot;default&quot;&gt;&#10;    &lt;Columns&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;      &lt;Col size=&quot;80&quot;/&gt;&#10;    &lt;/Columns&gt;&#10;    &lt;Rows&gt;&#10;      &lt;Row band=&quot;head&quot; size=&quot;24&quot;/&gt;&#10;      &lt;Row band=&quot;body&quot; size=&quot;24&quot;/&gt;&#10;    &lt;/Rows&gt;&#10;    &lt;Band id=&quot;head&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;레시피코드&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;레시피명&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;재료구분&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;투입재료&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;재료단위&quot;/&gt;&#10;      &lt;Cell col=&quot;5&quot; disptype=&quot;normal&quot; text=&quot;소요량&quot;/&gt;&#10;      &lt;Cell col=&quot;6&quot; disptype=&quot;normal&quot; text=&quot;단가&quot;/&gt;&#10;      &lt;Cell col=&quot;7&quot; disptype=&quot;normal&quot; text=&quot;투입재료비&quot;/&gt;&#10;      &lt;Cell col=&quot;8&quot; disptype=&quot;normal&quot; text=&quot;treeLevel&quot;/&gt;&#10;    &lt;/Band&gt;&#10;    &lt;Band id=&quot;body&quot;&gt;&#10;      &lt;Cell col=&quot;0&quot; disptype=&quot;normal&quot; text=&quot;bind:레시피코드&quot;/&gt;&#10;      &lt;Cell col=&quot;1&quot; disptype=&quot;normal&quot; text=&quot;bind:레시피명&quot;/&gt;&#10;      &lt;Cell col=&quot;2&quot; disptype=&quot;normal&quot; text=&quot;bind:재료구분&quot;/&gt;&#10;      &lt;Cell col=&quot;3&quot; disptype=&quot;normal&quot; text=&quot;bind:투입재료&quot;/&gt;&#10;      &lt;Cell col=&quot;4&quot; disptype=&quot;normal&quot; text=&quot;bind:재료단위&quot;/&gt;&#10;      &lt;Cell col=&quot;5&quot; disptype=&quot;normal&quot; text=&quot;bind:소요량&quot;/&gt;&#10;      &lt;Cell col=&quot;6&quot; disptype=&quot;normal&quot; text=&quot;bind:단가&quot;/&gt;&#10;      &lt;Cell col=&quot;7&quot; disptype=&quot;normal&quot; text=&quot;bind:투입재료비&quot;/&gt;&#10;      &lt;Cell col=&quot;8&quot; disptype=&quot;normal&quot; text=&quot;bind:treeLevel&quot;/&gt;&#10;    &lt;/Band&gt;&#10;  &lt;/Format&gt;&#10;&lt;/Formats&gt;&#10;" oncelldblclick="grd_dtlList_oncelldblclick" onexpandup="grd_dtlList_onexpandup" onsize="grd_dtlList_onsize">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="60"/>
                <Column size="180"/>
                <Column size="79"/>
                <Column size="80"/>
                <Column size="120"/>
                <Column size="60"/>
                <Column size="85"/>
                <Column size="77"/>
                <Column size="85"/>
                <Column size="85"/>
                <Column size="80"/>
                <Column size="150"/>
                <Column size="75"/>
                <Column size="75"/>
                <Column size="78"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox" edittype="checkbox"/>
                <Cell col="1" text="코드"/>
                <Cell col="2" text="투입재료"/>
                <Cell col="3" text="구분"/>
                <Cell col="4" text="제조사"/>
                <Cell col="5" text="규격"/>
                <Cell col="6" text="원산지"/>
                <Cell col="7" text="투입재료량"/>
                <Cell col="8" text="G당 단가"/>
                <Cell col="9" text="사용률(%)"/>
                <Cell col="10" text="실제사용량"/>
                <Cell col="11" text="투입재료비"/>
                <Cell col="12" text="비고"/>
                <Cell col="13" text="시작일"/>
                <Cell col="14" text="종료일"/>
                <Cell col="15" text="최종수정일"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:chk"/>
                <Cell col="1" style="align:center;" text="bind:materialCd"/>
                <Cell col="2" displaytype="normal" edittype="expand" style="align:left;" text="bind:materialCdNm" editautoselect="true" expandshow="show" expandsize="15"/>
                <Cell col="3" text="expr:semiGoodsYn == 'Y' ? '레시피' : '식자재'"/>
                <Cell col="4" text="bind:maker"/>
                <Cell col="5" style="align:left;" text="bind:itemSize"/>
                <Cell col="6" text="bind:originType"/>
                <Cell col="7" displaytype="number" text="expr:gfn_round(needQty,2)" mask="#,##0.#0"/>
                <Cell col="8" displaytype="number" edittype="none" text="bind:gramPrice" mask="#,##0.#0"/>
                <Cell col="9" style="align:right;" text="bind:lossRate"/>
                <Cell col="10" displaytype="number" style="align:right;" text="expr:gfn_round(sumNeedQty,0)"/>
                <Cell col="11" displaytype="number" text="expr:gfn_round(investAmt,0)"/>
                <Cell col="12" style="align:left;" text="bind:remark"/>
                <Cell col="13" displaytype="date" text="bind:sdate"/>
                <Cell col="14" displaytype="date" text="bind:edate"/>
                <Cell col="15" displaytype="date" text="bind:udate"/>
              </Band>
              <Band id="summary">
                <Cell/>
                <Cell col="1"/>
                <Cell col="2" style="align:right;"/>
                <Cell col="3"/>
                <Cell col="4"/>
                <Cell col="5"/>
                <Cell col="6" edittype="none"/>
                <Cell col="7" celltype="summary" displaytype="number" style="align:right;" text="expr:gfn_round(getCaseSum(&quot;useYn &gt; 0&quot;,&quot;needQty&quot;),0)"/>
                <Cell col="8" celltype="summary" displaytype="number" edittype="text"/>
                <Cell col="9" celltype="summary" style="align:center;"/>
                <Cell col="10" celltype="summary" displaytype="number" style="align:right;" text="expr:gfn_round(getCaseSum(&quot;useYn &gt; 0&quot;,&quot;sumNeedQty&quot;),0)"/>
                <Cell col="11" celltype="summary" displaytype="number" text="expr:gfn_round(getCaseSum(&quot;useYn &gt; 0&quot;,&quot;investAmt&quot;),0)"/>
                <Cell col="12" displaytype="number" text="expr: gfn_floor(getCaseSum(&quot;useYn &gt; 0&quot;,&quot;investAmt&quot;) /  getCaseSum(&quot;useYn &gt; 0&quot;,&quot;sumNeedQty&quot;),2)"/>
                <Cell col="13" celltype="summary" style="align:center;"/>
                <Cell col="14"/>
                <Cell col="15"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_addDtl" taborder="10" text="추가" class="btn_WF_Function" position="absolute 1258 108 1315 133" anchor="top right" onclick="btn_addDtl_onclick" visible="false"/>
        <ObjCalendar id="cal_stdDate" titletext="캘린더" taborder="2" text="ObjCalendar00" scrollbars="none" position="absolute 863 40 963 61" class="cal_WF_Essential"/>
        <Div id="div_img" taborder="11" text="Div00" position="absolute 791 218 1189 492" visible="false" style="border:2 solid #808080ff ;">
          <Layouts>
            <Layout>
              <ImageViewer id="imgViewer" taborder="0" position="absolute -1 -1 394 270" stretch="fit" anchor="default"/>
              <Button id="btn_imgClose" taborder="1" text="X" position="absolute 371 0 394 20" class="btn_WF_CRUD" onclick="div_img_btn_imgClose_onclick" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Combo id="cbo_schPriceSet" taborder="3" innerdataset="ds_priceSet" codecolumn="code" datacolumn="codeName" class="cmb_WF_Essential" position="absolute 1062 40 1172 61" anchor="left top" index="0" value="1" text="현구매단가"/>
        <Static id="Static20" text="단가설정" class="sta_WFSA_label" position="absolute 993 40 1053 61" anchor="left top"/>
        <Static id="Static26" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 963 40 993 61" anchor="left top"/>
        <Static id="Static32" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 1053 40 1063 61" anchor="left top"/>
        <Splitter id="sp_line" position="absolute 344 134 353 663" anchor="left top bottom" class="spt_WF_2">
          <Formats>
            <Format id="default">
              <SplitterItems id="items">
                <SplitterItem id="item00" bindtype="resize" position="leftortop" offset="5" componentid="grd_list"/>
                <SplitterItem id="item01" bindtype="resize" position="rightorbottom" offset="5" componentid="grd_dtlList"/>
                <SplitterItem id="item02" bindtype="move" position="rightorbottom" offset="5" componentid="Div00"/>
              </SplitterItems>
            </Format>
          </Formats>
        </Splitter>
        <Div id="Div00" taborder="13" text="Div00" position="absolute 360 419 1365 710" anchor="left bottom" style="background:transparent;">
          <Layouts>
            <Layout width="695" height="380">
              <Static id="sta_detail25" class="sta_WFDA_Labelbg" position="absolute 623 31 995 265" anchor="default"/>
              <Static id="sta_detail26" class="sta_WFDA_Labelbg" position="absolute 685 264 995 291" anchor="default"/>
              <Static id="Static22" text="레시피 상세" class="sta_WF_Title01" position="absolute 0 13 334 31" anchor="left top" onclick="Div00_Static22_onclick"/>
              <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 0 450 13" anchor="left top"/>
              <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 26 450 31" anchor="left top"/>
              <Static id="sta_detail03" class="sta_WFDA_Labelbg" position="absolute 93 31 624 58" anchor="default"/>
              <Static id="sta_detail02" text="사업부" onclick="sta_detail02_onclick" class="sta_WFDA_Label01" position="absolute 0 31 94 58" anchor="default"/>
              <Static id="Static37" text="27" class="Guide05_SizeBlack" visible="false" position="absolute 195 39 210 58" anchor="default"/>
              <Static id="sta_detail08" text="업장유형" class="sta_WFDA_Label01" position="absolute 327 31 421 58" anchor="default"/>
              <Static id="sta_detail00" class="sta_WFDA_Labelbg" position="absolute 93 109 624 136" anchor="default"/>
              <Static id="sta_detail01" text="품목 코드" class="sta_WFDA_Label01" position="absolute 0 109 94 136" anchor="default"/>
              <Static id="sta_detail04" text="단가" class="sta_WFDA_Label01" position="absolute 327 109 421 136" anchor="default"/>
              <Static id="sta_detail09" class="sta_WFDA_Labelbg" position="absolute 93 135 624 162" anchor="default"/>
              <Static id="sta_detail11" text="투입품목단위" class="sta_WFDA_Label01" position="absolute 0 135 94 162" anchor="default"/>
              <Static id="sta_detail12" text="투입품목규격" class="sta_WFDA_Label01" position="absolute 327 135 421 162" anchor="default"/>
              <Static id="sta_detail14" class="sta_WFDA_Labelbg" position="absolute 93 186 624 213" anchor="default"/>
              <Static id="sta_detail15" text="사용률(%)" class="sta_WFDA_Label01" position="absolute 327 186 421 213" anchor="default"/>
              <Static id="sta_detail27" class="sta_WFDA_Labelbg" position="absolute 93 57 624 84" anchor="default"/>
              <Static id="sta_detail28" text="레시피코드/명" class="sta_WFDA_Label01" position="absolute 0 57 94 84" anchor="default"/>
              <Static id="Static23" text="27" class="Guide05_SizeBlack" visible="false" position="absolute 195 64 210 83" anchor="default"/>
              <Static id="sta_detail18" class="sta_WFDA_Labelbg" position="absolute 93 83 624 110" anchor="default"/>
              <Static id="sta_detail30" text="조리단위" class="sta_WFDA_Label01" position="absolute 0 83 94 110" anchor="default"/>
              <Static id="sta_detail31" text="레시피단계" class="sta_WFDA_Label01" position="absolute 327 83 421 110" anchor="default"/>
              <Static id="sta_detail16" text="투입재료량" class="sta_WFDA_Label01" position="absolute 0 186 94 213" anchor="default"/>
              <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 93 212 624 239" anchor="default"/>
              <Static id="sta_detail13" text="사용일자" class="sta_WFDA_Label01" position="absolute 0 212 94 239" anchor="default"/>
              <Static id="sta_detail21" class="sta_WFDA_Labelbg" position="absolute 93 238 624 265" anchor="default"/>
              <Static id="sta_detail23" text="변경사유" class="sta_WFDA_Label01" position="absolute 0 238 94 265" anchor="default"/>
              <Edit id="edt_chgReason" taborder="1" position="absolute 96 241 621 262" anchor="default"/>
              <Button id="btn_pumPop" taborder="2" onclick="btn_pumPop_onclick" class="btn_WF_popSearch" position="absolute 222 111 242 132" anchor="left top"/>
              <Edit id="edt_materialCdNm" taborder="3" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" position="absolute 241 111 325 132" anchor="default"/>
              <Edit id="edt_materialCd" taborder="4" readonly="true" class="edt_WF_Essential" position="absolute 165 111 222 132" anchor="default"/>
              <Edit id="edt_itemSize" taborder="5" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" enable="false" position="absolute 423 138 621 159" anchor="default"/>
              <Edit id="edt_stdRecipeCd" taborder="6" enable="false" position="absolute 96 60 162 81" anchor="default"/>
              <Static id="sta_detail07" text="별명" class="sta_WFDA_Label01" position="absolute 327 57 421 84" anchor="default"/>
              <MaskEdit id="msk_needQty" taborder="7" mask="###,##0.00" class="msk_WF_Essential" position="absolute 96 189 187 210" anchor="default"/>
              <Static id="Static06" text="~" position="absolute 201 214 211 239" anchor="default"/>
              <MaskEdit id="msk_investAmt" taborder="9" readonly="true" mask="###,#0.##" enable="false" position="absolute 275 189 325 210" anchor="default"/>
              <MaskEdit id="msk_marginPrice" taborder="10" readonly="true" mask="@@@,@@@" enable="false" position="absolute 423 111 621 132" anchor="default"/>
              <Edit id="edt_recipeNmBynm" taborder="11" enable="false" position="absolute 423 60 621 81" anchor="default"/>
              <Edit id="edt_stand" taborder="12" enable="false" position="absolute 423 86 621 107" anchor="default"/>
              <Edit id="edt_recipeNm" taborder="13" enable="false" position="absolute 162 60 325 81" anchor="default"/>
              <MaskEdit id="msk_cookUnit" taborder="14" readonly="true" mask="@@@,@@@" enable="false" position="absolute 96 86 325 107" anchor="default"/>
              <Edit id="edit_poUnit" taborder="15" enable="false" position="absolute 96 138 325 159" anchor="default"/>
              <Edit id="edt_muCdNm" taborder="16" enable="false" position="absolute 96 34 325 55" anchor="default"/>
              <Combo id="edt_semiGoodsYn" taborder="17" value="Y" innerdataset="ds_pumGb" codecolumn="code" datacolumn="codeName" onitemchanged="edt_semiGoodsYn_onitemchanged" position="absolute 96 111 164 132" anchor="default"/>
              <Edit id="edt_upjangTypeNm" taborder="18" enable="false" position="absolute 423 34 621 55" anchor="default"/>
              <ObjCalendar id="cal_sdate" titletext="캘린더" taborder="19" text="ObjCalendar00" scrollbars="none" position="absolute 96 215 196 236" anchor="default"/>
              <ObjCalendar id="cal_edate" titletext="캘린더" taborder="20" text="ObjCalendar00" scrollbars="none" enable="true" position="absolute 216 215 316 236" anchor="default"/>
              <Button id="btn_recipePop" taborder="21" class="btn_WF_popSearch" position="absolute 222 111 242 132" anchor="left top"/>
              <Static id="sta_detail06" text="정렬순서" class="sta_WFDA_Label01" position="absolute 327 212 421 239" anchor="default"/>
              <MaskEdit id="msk_sortOrder" taborder="22" mask="#" oneditclick="MaskEdit02_oneditclick" position="absolute 423 215 479 236" anchor="default"/>
              <Static id="sta_detail10" class="sta_WFDA_Labelbg" position="absolute 93 161 624 187" anchor="default"/>
              <Static id="sta_detail17" text="조리단위" class="sta_WFDA_Label01" position="absolute 0 161 94 187" anchor="default"/>
              <Static id="sta_detail19" text="투입단위" class="sta_WFDA_Label01" position="absolute 327 161 421 187" anchor="default"/>
              <Edit id="edt_offerUnit" taborder="23" readonly="true" autoselect="true" onkeydown="fn_edBtn_OnKeyDown" enable="false" position="absolute 423 164 621 184" anchor="default"/>
              <Edit id="edt_cookUnit" taborder="24" enable="false" position="absolute 96 164 325 184" anchor="default"/>
              <Static id="sta_detail20" class="sta_WFDA_Labelbg" position="absolute 93 264 624 291" anchor="default"/>
              <Edit id="edt_remark" taborder="25" position="absolute 96 267 621 288" anchor="default"/>
              <Static id="sta_detail22" text="비고" class="sta_WFDA_Label01" position="absolute 0 264 94 291" anchor="default"/>
              <Static id="sta_detail24" text="투입재료비" class="sta_WFDA_Label01" position="absolute 189 186 273 213" anchor="default"/>
              <Static id="Static33" text="이미지" onclick="Static27_onclick" class="sta_WFDA_Label01" position="absolute 623 31 696 265" anchor="left bottom"/>
              <Static id="Static46" text="파일첨부" class="sta_WFDA_Label01" position="absolute 623 264 696 291" anchor="left bottom"/>
              <Edit id="edt_itemImg" taborder="26" position="absolute 698 267 925 288" anchor="left bottom"/>
              <Button id="btn_addFile" taborder="27" text="사진첨부" onclick="btn_addFile_onclick" class="btn_WF_Function" position="absolute 927 267 992 287" anchor="left bottom"/>
              <ImageViewer id="img_viewer" taborder="28" stretch="fit" position="absolute 698 34 992 262" anchor="left bottom" style="border:1 solid #808080ff ;" moveX="0" moveY="0" resizeX="100" resizeY="100"/>
              <Button id="btn_recipeCuisine" taborder="29" text="조  리  법" onclick="btn_recipeCuisine_onclick" class="btn_POP_Default" position="absolute 916 6 993 27" anchor="top right"/>
              <Edit id="edt_lossRate" taborder="30" position="absolute 423 189 479 210" class="edt_WF_Essential" maxlength="3" inputtype="number" style="align:right middle;" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <ObjAtchFile id="ObjAtchFile" titletext="Attach File Object" taborder="14" text="ObjAtchFile00" scrollbars="none" visible="false" position="absolute 373 200 784 343" onclick="ObjAtchFile_onclick"/>
        <Radio id="rdo_stdRecipeApplyBasis" taborder="15" columncount="2" rowcount="0" innerdataset="ds_stdRecipeApplyBasis" codecolumn="code" datacolumn="codeName" class="rdo_WF_Essential" visible="false" position="absolute 432 107 562 127"/>
        <Static id="Static33" text="사용여부" class="sta_WFSA_label" position="absolute 529 71 589 92" anchor="left top"/>
        <Combo id="cbo_schUseYn" taborder="16" position="absolute 603 71 686 92"/>
        <Static id="Static34" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 593 71 603 92" anchor="left top"/>
        <Button id="btn_recipe" taborder="17" text="레시피 가져오기" position="absolute 1137 108 1237 129" class="btn_WF_Function" onclick="fn_RecipePop" anchor="top right"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item1" compid="cbo_schMuCd" propid="value" datasetid="ds_search" columnid="muCd"/>
      <BindItem id="item2" compid="cbo_schUpjangType" propid="value" datasetid="ds_search" columnid="upjangType"/>
      <BindItem id="item3" compid="edt_schRecipeNm" propid="value" datasetid="ds_search" columnid="recipeNm"/>
      <BindItem id="item4" compid="cbo_schMcalssCd" propid="value" datasetid="ds_search" columnid="mcalssCd"/>
      <BindItem id="item5" compid="cbo_schClassCd" propid="value" datasetid="ds_search" columnid="sclassCd"/>
      <BindItem id="item0" compid="cbo_schPriceSet" propid="value" datasetid="ds_searchDtl" columnid="priceSet"/>
      <BindItem id="item14" compid="Div00.edt_chgReason" propid="value" datasetid="ds_dtlList" columnid="chgReason"/>
      <BindItem id="item8" compid="Div00.edt_materialCdNm" propid="value" datasetid="ds_dtlList" columnid="materialCdNm"/>
      <BindItem id="item6" compid="Div00.edt_materialCd" propid="value" datasetid="ds_dtlList" columnid="materialCd"/>
      <BindItem id="item9" compid="Div00.edt_itemSize" propid="value" datasetid="ds_dtlList" columnid="itemSize"/>
      <BindItem id="item7" compid="Div00.edt_stdRecipeCd" propid="value" datasetid="ds_dtlList" columnid="stdRecipeCd"/>
      <BindItem id="item10" compid="Div00.msk_needQty" propid="value" datasetid="ds_dtlList" columnid="needQty"/>
      <BindItem id="item17" compid="Div00.msk_investAmt" propid="value" datasetid="ds_dtlList" columnid="investAmt"/>
      <BindItem id="item11" compid="Div00.msk_marginPrice" propid="value" datasetid="ds_dtlList" columnid="cstAmt"/>
      <BindItem id="item13" compid="Div00.edt_recipeNmBynm" propid="value" datasetid="ds_dtlList" columnid="recipeNmBynm"/>
      <BindItem id="item16" compid="Div00.edt_stand" propid="value" datasetid="ds_dtlList" columnid="standNm"/>
      <BindItem id="item15" compid="Div00.edt_recipeNm" propid="value" datasetid="ds_dtlList" columnid="recipeNm"/>
      <BindItem id="item18" compid="Div00.msk_cookUnit" propid="value" datasetid="ds_dtlList" columnid="cookUnit"/>
      <BindItem id="item19" compid="Div00.edit_poUnit" propid="value" datasetid="ds_dtlList" columnid="poUnit"/>
      <BindItem id="item20" compid="Div00.edt_muCdNm" propid="value" datasetid="ds_dtlList" columnid="muNm"/>
      <BindItem id="item21" compid="Div00.edt_semiGoodsYn" propid="value" datasetid="ds_dtlList" columnid="semiGoodsYn"/>
      <BindItem id="item22" compid="Div00.edt_upjangTypeNm" propid="value" datasetid="ds_dtlList" columnid="upjangTypeNm"/>
      <BindItem id="item23" compid="Div00.msk_sortOrder" propid="value" datasetid="ds_dtlList" columnid="sortOrder"/>
      <BindItem id="item24" compid="Div00.edt_offerUnit" propid="value" datasetid="ds_dtlList" columnid="offerUnitNm"/>
      <BindItem id="item25" compid="Div00.edt_cookUnit" propid="value" datasetid="ds_dtlList" columnid="cookUnitItem"/>
      <BindItem id="item26" compid="Div00.edt_remark" propid="value" datasetid="ds_dtlList" columnid="remark"/>
      <BindItem id="item27" compid="Div00.edt_itemImg" propid="value" datasetid="ds_list" columnid="orgnlFileNm"/>
      <BindItem id="item28" compid="rdo_stdRecipeApplyBasis" propid="value" datasetid="ds_list" columnid="stdRecipeApplyBasis"/>
      <BindItem id="item29" compid="cbo_schUseYn" propid="value" datasetid="ds_search" columnid="useYn"/>
      <BindItem id="item30" compid="Div00.edt_lossRate" propid="value" datasetid="ds_dtlList" columnid="lossRate"/>
    </Bind>
    <Objects>
      <Dataset id="ds_list" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_list_onrowposchanged" oncolumnchanged="ds_list_oncolumnchanged">
        <ColumnInfo>
          <Column id="upjangType" type="STRING" size="256"/>
          <Column id="upjangTypeNm" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="recipeNm" type="STRING" size="256"/>
          <Column id="recipeNmEnglish" type="STRING" size="256"/>
          <Column id="recipeNmBynm" type="STRING" size="256"/>
          <Column id="stand" type="STRING" size="256"/>
          <Column id="standNm" type="STRING" size="256"/>
          <Column id="origin" type="STRING" size="256"/>
          <Column id="unitCd" type="STRING" size="256"/>
          <Column id="offerUnit" type="STRING" size="256"/>
          <Column id="offerUnitNm" type="STRING" size="256"/>
          <Column id="cookUnit" type="STRING" size="256"/>
          <Column id="goalCstrat" type="STRING" size="256"/>
          <Column id="cstratDrctInputYn" type="STRING" size="256"/>
          <Column id="drctInputCstRate" type="STRING" size="256"/>
          <Column id="stdRecipeApplyBasis" type="STRING" size="256"/>
          <Column id="sclassCd" type="STRING" size="256"/>
          <Column id="mcalssCd" type="STRING" size="256"/>
          <Column id="mgrpCd" type="STRING" size="256"/>
          <Column id="salePrice" type="STRING" size="256"/>
          <Column id="recipeDvlpBy" type="STRING" size="256"/>
          <Column id="itemImge" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="regDate" type="STRING" size="256"/>
          <Column id="refSeq" type="BIGDECIMAL" size="256"/>
          <Column id="appendSeq" type="BIGDECIMAL" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="upjangModifyAllowYn" type="STRING" size="256"/>
          <Column id="recipeStatus" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="cuser" type="STRING" size="256"/>
          <Column id="cdate" type="DATE" size="256"/>
          <Column id="uuser" type="STRING" size="256"/>
          <Column id="udate" type="DATE" size="256"/>
          <Column id="subCount" type="INT" size="256"/>
          <Column id="setRecipeCd" type="STRING" size="256"/>
          <Column id="oldSetRecipeCd" type="STRING" size="256"/>
          <Column id="cusineCnt" type="STRING" size="256"/>
          <Column id="investAmt" type="BIGDECIMAL" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dtlList" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_dtlList_onrowposchanged" oncolumnchanged="ds_dtlList_oncolumnchanged">
        <ColumnInfo>
          <Column id="chk" type="STRING" size="3"/>
          <Column id="muCd" type="STRING" size="18"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="upjangType" type="STRING" size="50"/>
          <Column id="upjangTypeNm" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="10"/>
          <Column id="recipeNm" type="STRING" size="256"/>
          <Column id="materialCd" type="STRING" size="18"/>
          <Column id="materialCdNm" type="STRING" size="256"/>
          <Column id="sdate" type="STRING" size="8"/>
          <Column id="edate" type="STRING" size="8"/>
          <Column id="needQty" type="BIGDECIMAL" size="22"/>
          <Column id="cstAmt" type="BIGDECIMAL" size="22"/>
          <Column id="basisUnitCd" type="STRING" size="50"/>
          <Column id="poUnit" type="STRING" size="18"/>
          <Column id="recipeApplyUnit" type="STRING" size="50"/>
          <Column id="lossRate" type="BIGDECIMAL" size="22"/>
          <Column id="yield" type="BIGDECIMAL" size="22"/>
          <Column id="semiGoodsYn" type="STRING" size="1"/>
          <Column id="prvsMaterialCd" type="STRING" size="256"/>
          <Column id="sortOrder" type="BIGDECIMAL" size="22"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="cuser" type="STRING" size="20"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="20"/>
          <Column id="udate" type="DATETIME" size="7"/>
          <Column id="cookUnit" type="STRING" size="256"/>
          <Column id="cookUnitItem" type="STRING" size="256"/>
          <Column id="recipeNmBynm" type="STRING" size="256"/>
          <Column id="stand" type="STRING" size="256"/>
          <Column id="standNm" type="STRING" size="256"/>
          <Column id="gramPrice" type="FLOAT" size="256"/>
          <Column id="investAmt" type="FLOAT" size="256"/>
          <Column id="upjangModifyAllowYn" type="STRING" size="256"/>
          <Column id="offerUnitNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="itemSize" type="STRING" size="256"/>
          <Column id="maker" type="STRING" size="256"/>
          <Column id="originType" type="STRING" size="256"/>
          <Column id="offerUnitItem" type="STRING" size="256"/>
          <Column id="chgReason" type="STRING" size="256"/>
          <Column id="orgSdate" type="STRING" size="256"/>
          <Column id="itemUpjang" type="STRING" size="256"/>
          <Column id="priceSet" type="STRING" size="256"/>
          <Column id="stdSeq" type="STRING" size="256"/>
          <Column id="sumNeedQty" type="BIGDECIMAL" size="256"/>
          <Column id="gubun" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sclassCd" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mcalssCd" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_mgrpCd" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_mgrpCd_onrowposchanged">
        <ColumnInfo>
          <Column id="mgrpCd" type="STRING" size="256"/>
          <Column id="mgrpCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_muCd" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upjangType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="upjangType" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="256"/>
          <Column id="mgrpCd" type="STRING" size="256"/>
          <Column id="mcalssCd" type="STRING" size="256"/>
          <Column id="sclassCd" type="STRING" size="256"/>
          <Column id="recipeNm" type="STRING" size="256"/>
          <Column id="codeGb" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="stdDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sclassCds" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="sclassCd" type="STRING" size="256"/>
          <Column id="sclassCdNm" type="STRING" size="256"/>
          <Column id="mcalssCd" type="STRING" size="256"/>
          <Column id="mcalssCdNm" type="STRING" size="256"/>
          <Column id="mgrpCd" type="STRING" size="256"/>
          <Column id="mgrpCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_dtlList00" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="레시피코드" type="STRING" size="256"/>
          <Column id="레시피명" type="STRING" size="256"/>
          <Column id="재료구분" type="STRING" size="256"/>
          <Column id="투입재료" type="STRING" size="256"/>
          <Column id="재료단위" type="STRING" size="256"/>
          <Column id="소요량" type="STRING" size="256"/>
          <Column id="단가" type="STRING" size="256"/>
          <Column id="투입재료비" type="STRING" size="256"/>
          <Column id="treeLevel" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="레시피코드">100004</Col>
            <Col id="레시피명">오징어라이스통통</Col>
            <Col id="재료구분">Recipe</Col>
            <Col id="소요량"/>
            <Col id="단가"/>
            <Col id="투입재료비">15205</Col>
            <Col id="treeLevel">0</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">손질오징어몸통</Col>
            <Col id="투입재료">1010101042</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">920</Col>
            <Col id="단가">1</Col>
            <Col id="투입재료비">920</Col>
            <Col id="treeLevel">1</Col>
            <Col id="재료구분">Ingredients</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">오징어통통밥</Col>
            <Col id="투입재료">1010101043</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">1.298667</Col>
            <Col id="단가">300</Col>
            <Col id="투입재료비">390</Col>
            <Col id="treeLevel">1</Col>
            <Col id="재료구분">Recipe</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">밥(베이스)</Col>
            <Col id="투입재료비">12000</Col>
            <Col id="treeLevel">2</Col>
            <Col id="투입재료"/>
            <Col id="재료구분">Recipe</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">쌀(멥쌀)</Col>
            <Col id="투입재료">1010101046</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">2.1</Col>
            <Col id="단가">5000</Col>
            <Col id="투입재료비">10500</Col>
            <Col id="treeLevel">3</Col>
            <Col id="재료구분">Ingredients</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">찹쌀</Col>
            <Col id="투입재료">1010101047</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">3</Col>
            <Col id="단가">500</Col>
            <Col id="투입재료비">1500</Col>
            <Col id="treeLevel">3</Col>
            <Col id="재료구분">Ingredients</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">물</Col>
            <Col id="투입재료">1010101048</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">0</Col>
            <Col id="단가">5000</Col>
            <Col id="투입재료비">0</Col>
            <Col id="treeLevel">3</Col>
            <Col id="재료구분">Ingredients</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">해물야채소스</Col>
            <Col id="재료구분">Recipe</Col>
            <Col id="투입재료"/>
            <Col id="재료단위"/>
            <Col id="소요량"/>
            <Col id="단가"/>
            <Col id="투입재료비">30939</Col>
            <Col id="treeLevel">2</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">굴소스(이금기)</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101051</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">5</Col>
            <Col id="단가">1500</Col>
            <Col id="투입재료비">7500</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">데리야끼(두원)</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101052</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">2.8</Col>
            <Col id="단가">2000</Col>
            <Col id="투입재료비">5600</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">쌍노두유</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101053</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">11</Col>
            <Col id="단가">200</Col>
            <Col id="투입재료비">2200</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">카라멜</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101054</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">2</Col>
            <Col id="단가">70</Col>
            <Col id="투입재료비">140</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">고추기름</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101055</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">1.6</Col>
            <Col id="단가">200</Col>
            <Col id="투입재료비">320</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">다진마늘</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101056</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">5.5</Col>
            <Col id="단가">100</Col>
            <Col id="투입재료비">550</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">다진대파</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101057</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">2</Col>
            <Col id="단가">500</Col>
            <Col id="투입재료비">1000</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">다진양파</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101058</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">1.4</Col>
            <Col id="단가">3000</Col>
            <Col id="투입재료비">4200</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">다진당근</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101059</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">0.9</Col>
            <Col id="단가">1500</Col>
            <Col id="투입재료비">1350</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">오징어다리챂</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101060</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">0</Col>
            <Col id="단가">6000</Col>
            <Col id="투입재료비">0</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">알새우(100-200)</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101061</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">8</Col>
            <Col id="단가">1000.35</Col>
            <Col id="투입재료비">8003</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">꽃소금</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101062</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">0.389333333</Col>
            <Col id="단가">30</Col>
            <Col id="투입재료비">12</Col>
            <Col id="treeLevel">3</Col>
          </Row>
          <Row>
            <Col id="레시피코드">0100004</Col>
            <Col id="레시피명">통후추분말</Col>
            <Col id="재료구분">Ingredients</Col>
            <Col id="투입재료">1010101063</Col>
            <Col id="재료단위">G</Col>
            <Col id="소요량">12.97777778</Col>
            <Col id="단가">5</Col>
            <Col id="투입재료비">65</Col>
            <Col id="treeLevel">3</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_searchDtl" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="upjangType" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="256"/>
          <Column id="mgrpCd" type="STRING" size="256"/>
          <Column id="mcalssCd" type="STRING" size="256"/>
          <Column id="sclassCd" type="STRING" size="256"/>
          <Column id="recipeNm" type="STRING" size="256"/>
          <Column id="codeGb" type="STRING" size="256"/>
          <Column id="stdDate" type="STRING" size="256"/>
          <Column id="priceSet" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">1</Col>
            <Col id="insYn">1</Col>
            <Col id="delYn">1</Col>
            <Col id="savYn">1</Col>
            <Col id="prtYn">1</Col>
            <Col id="exlYn">0</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_priceSet" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">1</Col>
            <Col id="codeName">현구매단가</Col>
          </Row>
          <Row>
            <Col id="code">2</Col>
            <Col id="codeName">레시피단가</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_pumGb" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">Y</Col>
            <Col id="codeName">레시피</Col>
          </Row>
          <Row>
            <Col id="codeName">식자재</Col>
            <Col id="code">N</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_dtlListValid" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onrowposchanged="ds_dtlList_onrowposchanged">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="18"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="upjangType" type="STRING" size="50"/>
          <Column id="upjangTypeNm" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="10"/>
          <Column id="recipeNm" type="STRING" size="256"/>
          <Column id="materialCd" type="STRING" size="18"/>
          <Column id="materialCdNm" type="STRING" size="256"/>
          <Column id="sdate" type="STRING" size="8"/>
          <Column id="edate" type="STRING" size="8"/>
          <Column id="needQty" type="BIGDECIMAL" size="22"/>
          <Column id="cstAmt" type="BIGDECIMAL" size="22"/>
          <Column id="basisUnitCd" type="STRING" size="50"/>
          <Column id="poUnit" type="STRING" size="18"/>
          <Column id="recipeApplyUnit" type="STRING" size="50"/>
          <Column id="lossRate" type="BIGDECIMAL" size="22"/>
          <Column id="yield" type="BIGDECIMAL" size="22"/>
          <Column id="semiGoodsYn" type="STRING" size="1"/>
          <Column id="prvsMaterialCd" type="STRING" size="256"/>
          <Column id="sortOrder" type="BIGDECIMAL" size="22"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="cuser" type="STRING" size="20"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="20"/>
          <Column id="udate" type="DATETIME" size="7"/>
          <Column id="cookUnit" type="STRING" size="256"/>
          <Column id="cookUnitItem" type="STRING" size="256"/>
          <Column id="recipeNmBynm" type="STRING" size="256"/>
          <Column id="stand" type="STRING" size="256"/>
          <Column id="standNm" type="STRING" size="256"/>
          <Column id="gramPrice" type="FLOAT" size="256"/>
          <Column id="investAmt" type="FLOAT" size="256"/>
          <Column id="upjangModifyAllowYn" type="STRING" size="256"/>
          <Column id="offerUnitNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="itemSize" type="STRING" size="256"/>
          <Column id="maker" type="STRING" size="256"/>
          <Column id="originType" type="STRING" size="256"/>
          <Column id="offerUnitItem" type="STRING" size="256"/>
          <Column id="chgReason" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="materialCd">title:품목코드,required:true</Col>
            <Col id="needQty">title:소요량,required:true</Col>
            <Col id="lossRate">title:Loss Factor,required:ture</Col>
            <Col id="sdate">title:사용시작일자,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_file" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="refSeq" type="STRING" size="256"/>
          <Column id="appendSeq" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="fileSize" type="STRING" size="256"/>
          <Column id="fileExt" type="STRING" size="256"/>
          <Column id="encYn" type="STRING" size="256"/>
          <Column id="fileDesc" type="STRING" size="256"/>
          <Column id="fileUploadNm" type="STRING" size="256"/>
          <Column id="chk" type="INT" size="1"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upjangModifyAllowYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchDtl00" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="upjangType" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="256"/>
          <Column id="stdDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_stdRecipeApplyBasis" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_setRecipe" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="stdRecipeCd" type="STRING" size="256"/>
          <Column id="recipeNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listSave" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="false" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="upjangType" type="STRING" size="256"/>
          <Column id="upjangTypeNm" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="recipeNm" type="STRING" size="256"/>
          <Column id="recipeNmEnglish" type="STRING" size="256"/>
          <Column id="recipeNmBynm" type="STRING" size="256"/>
          <Column id="stand" type="STRING" size="256"/>
          <Column id="standNm" type="STRING" size="256"/>
          <Column id="origin" type="STRING" size="256"/>
          <Column id="unitCd" type="STRING" size="256"/>
          <Column id="offerUnit" type="STRING" size="256"/>
          <Column id="offerUnitNm" type="STRING" size="256"/>
          <Column id="cookUnit" type="STRING" size="256"/>
          <Column id="goalCstrat" type="STRING" size="256"/>
          <Column id="cstratDrctInputYn" type="STRING" size="256"/>
          <Column id="drctInputCstRate" type="STRING" size="256"/>
          <Column id="stdRecipeApplyBasis" type="STRING" size="256"/>
          <Column id="sclassCd" type="STRING" size="256"/>
          <Column id="mcalssCd" type="STRING" size="256"/>
          <Column id="mgrpCd" type="STRING" size="256"/>
          <Column id="salePrice" type="STRING" size="256"/>
          <Column id="recipeDvlpBy" type="STRING" size="256"/>
          <Column id="itemImge" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="regDate" type="STRING" size="256"/>
          <Column id="refSeq" type="BIGDECIMAL" size="256"/>
          <Column id="appendSeq" type="BIGDECIMAL" size="256"/>
          <Column id="relPath" type="STRING" size="256"/>
          <Column id="orgnlPath" type="STRING" size="256"/>
          <Column id="saveFileNm" type="STRING" size="256"/>
          <Column id="orgnlFileNm" type="STRING" size="256"/>
          <Column id="upjangModifyAllowYn" type="STRING" size="256"/>
          <Column id="recipeStatus" type="STRING" size="256"/>
          <Column id="useYn" type="STRING" size="256"/>
          <Column id="cuser" type="STRING" size="256"/>
          <Column id="cdate" type="DATE" size="256"/>
          <Column id="uuser" type="STRING" size="256"/>
          <Column id="udate" type="DATE" size="256"/>
          <Column id="subCount" type="INT" size="256"/>
          <Column id="setRecipeCd" type="STRING" size="256"/>
          <Column id="oldSetRecipeCd" type="STRING" size="256"/>
          <Column id="cusineCnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_temp" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_copy" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="upjangType" type="STRING" size="256"/>
          <Column id="stdRecipeCd" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="orgUpjangType" type="STRING" size="256"/>
          <Column id="orgStdRecipeCd" type="STRING" size="256"/>
          <Column id="orgUpjangCd" type="STRING" size="256"/>
          <Column id="cuisineYn" type="STRING" size="256"/>
          <Column id="copyType" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : 표준 레시피 상세 관리
  파 일 명 : StandardRecipEdetailedMgnt.xfdl
  기    능 : Design 및 Script Template 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.11.01   김윤기   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";


/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_sToday = gfn_today();
var fv_RefSeq;

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 초기값 셋팅
	fn_init();
	//trace(gfn_floor(555.5555555, 2));
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	// 업데이트여부를 체크할 DataSet, 여러개 있을 경우 ;로 구분
	v_ds_check = "";
	
	//검색조건을 초기화 한다.
	var nRow = ds_search.addRow();
	//ds_search.setColumn(nRow, "muCd", g_Mu_Cd);
	ds_search.setColumn(nRow, "upjangType", "");
	ds_search.setColumn(nRow, "recipeNm", "");
	
	nRow = ds_searchDtl.addRow();
	ds_searchDtl.setColumn(nRow, "muCd", g_Mu_Cd);
	ds_searchDtl.setColumn(nRow, "upjangType", "");
	ds_searchDtl.setColumn(nRow, "recipeNm", "");
	ds_searchDtl.setColumn(nRow, "priceSet", "2");	//단가설정
	
	//Calendar
	Div00.cal_sdate.fn_initMonthCal(this, fv_sToday, "", ds_dtlList, "sdate", "Y");
	Div00.cal_edate.fn_initMonthCal(this, "", "", ds_dtlList, "edate", "Y");
	
	//Combo
	SCCombo.bind(this, "ComCode", "cbo_schUpjangType", ds_upjangType, {groupCode:"UPJANG_TYPE", useYn:"Y"}, SCCombo.ALL);	//업장유형(검색조건)
	SCCombo.bind(this, "ComCode", "cbo_schMcalssCd", ds_mcalssCd, {groupCode:"MCALSS_CD", useYn:"Y"}, SCCombo.ALL);	//중분류코드(검색조건)
	SCCombo.bind(this, "ComCode", "cbo_schClassCd", ds_sclassCd, {groupCode:"SCLASS_CD", useYn:"Y"}, SCCombo.ALL);	//소분류코드(검색조건)
	SCCombo.bind(this, "ComCode", "cbo_schUseYn", null, {groupCode:"USE_YN", useYn:"Y", defVal:"Y"}, SCCombo.ALL);			//사용여부(검색조건)
	
	//Dataset
	SCDataset.bind(this, "ComCode", "ds_muCd", {groupCode:"DATA_SET", code:"DEF_MU_CODE", useYn:"Y"}, "fn_triggerDatasetEvent");
	
// 	//레시피 대분류코드 검색
// 	ds_search.setColumn(nRow, "codeGb", "G");
// 	fn_classCdSearchAll();
// 	//레시피 중분류코드 검색
// 	ds_search.setColumn(nRow, "codeGb", "M");
// 	fn_classCdSearchAll();
// 	//레시피 소분류코드 검색
// 	ds_search.setColumn(nRow, "codeGb", "S");
// 	fn_classCdSearchAll();
	
	//Calendar(검색조건 바인드)
	cal_stdDate.fn_initMonthCal(this, fv_sToday, "", ds_searchDtl, "stdDate", "Y");
	
	//Popup
	SCPopup.bind(this, "Recipe", "Div00.edt_materialCdNm", "Div00.btn_recipePop", null, {muCd:"", upjangType:""}, {before:"fn_recipeBeforeEvent", after:"fn_recipeAfterEvent"});
	
	//레시피 목록 조회
	//fn_search();
	ObjAtchFile.setDataset("ds_file");	//DataSet연결
	ObjAtchFile.setExtention("JPG,JPEG,GIF,BMP");

	Div00.btn_recipePop.enable = false;
	Div00.btn_pumPop.enable = false;

	fn_searchRsr();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 사업부Combo 조회 후처리 함수
 *---------------------------------------------------------------------------------------------*/
function fn_triggerDatasetEvent(p, ds){
	if (p.oid == "ds_muCd"){
		SCCombo.bind(this, "MU", "cbo_schMuCd",	null, {defVal:"2003"}); //입력:사업부
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 팝업 before 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_recipeBeforeEvent(p){
	p.option.muCd = ds_dtlList.getColumn(0, "muCd");
	p.option.upjangType = ds_dtlList.getColumn(0, "upjangType");
	p.option.recipeGbn = "STD";
	p.option.smlUpjang = "";
  
	return true;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 팝업 after 이벤트
 *---------------------------------------------------------------------------------------------*/
function fn_recipeAfterEvent(p, data){

	var rowIdx = ds_dtlList.rowposition;
	
	ds_dtlList.setColumn(rowIdx, "materialCd", data.code);
	ds_dtlList.setColumn(rowIdx, "poUnit", "");
	ds_dtlList.setColumn(rowIdx, "itemSize", "");
	ds_dtlList.setColumn(rowIdx, "cstAmt", data.cstAmt);
	ds_dtlList.setColumn(rowIdx, "cookUnitItem", data.cookUnit);
	ds_dtlList.setColumn(rowIdx, "offerUnitItem", data.offerUnit);
	ds_dtlList.setColumn(rowIdx, "offerUnitNm", data.offerUnitNm);

	//투입재료비 계산
	var investAmt = fn_calInvestAmtRecipe(ds_dtlList.getColumn(rowIdx, "needQty"),  ds_dtlList.getColumn(rowIdx, "lossRate"), data.cookUnit, data.cstAmt);
	ds_dtlList.setColumn(rowIdx, "investAmt", investAmt);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_close()
{	
//	// v_ds_check 미사용시 변경사항 체크(입력 프로그램일때 변경되는 Dataset 전체 기술)
// 	if (gfn_dsIsUpdated(ds_list) == true) 
// 	{
// 		// 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
//         if (!gfn_confirm("confirm.before.movepage")) return false;
//     }
//     
//	// 조회프로그램에도 Return true; 기술해 주세요!
// 	return true;

	// v_ds_check 사용시 변경사항 체크
	if(gfn_length(v_ds_check) != 0)
	{	
		// v_ds_check 설정기준 변경사항 체크
		if (gfn_isDataChange() == true) 
		{		
			// 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
			if (!gfn_confirm("confirm.before.movepage")) return false;
		}
	}
    
	// 조회프로그램에도 Return true; 기술해 주세요!
	return true;
}


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
// 	// v_ds_check 미사용시 변경사항 체크
// 	if (gfn_dsIsUpdated(ds_list) == true) 
// 	{
// 		var retValue = gfn_confirm("confirm.before.search");	// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
// 		if (retValue == false) return;
// 	}

// 	// v_ds_check 사용시 공통버튼에서 변경사항 체크함
// 	// 변경사항 체크
// 	if (gfn_isDataChange() == true) 
// 	{		
// 		var retValue = gfn_confirm("confirm.before.search");	// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
// 		if (retValue == false) return;
// 	}
	
	// ds_listValid Dataset에 Validation할 칼럼별로 구성
	// 항목 추가시에는 ','로 구분
	// 예)title:금액1,required:false,minlength:2,digits:true
	
	// Alert시 칼럼 표시 명칭               - title:아이디(메시지의 치환할 명칭) 
	// 필수체크                              - required:true(체크여부 true/false)
	// size 크기                              - length:7(size 숫자)
	// 최대 size 크기                        - maxlength:7(size 숫자)
	// 최소 size 크기                        - minlength:7(size 숫자)
	// 최대 size 크기(Byte)                  - maxlengthB:7(size 숫자)
	// 최소 size 크기(Byte)                  - minlengthB:7(size 숫자)
	// 숫자 여부                             - digits:true(체크여부 true/false)
	// 해당 숫자 이하                       - min:7(size 숫자)
	// 해당 숫자 이상                       - max:7(size 숫자)
	// 소숫점 자리수 비교                   - declimit:3(size 숫자)
	// 날짜 년월일 체크                     - date:true(체크여부 true/false)
	// 날짜 년월 체크                       - dateym:true(체크여부 true/false)
	// 타 칼럼값보다 큰지 비교             - comparemax:Column4(Dataset 칼럼ID):시작일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값보다 작은지 비교           - comparemin:Column6(Dataset 칼럼ID):종료일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값과 같은 값인지 비교        - equalto:Column5(Dataset 칼럼ID):금액1(비교대상의 메시지 치환할 명칭)
	// 사이의 값인지 비교                   - range:40(from 숫자):100(to 숫자)
	// 코드값이 목록내의 값인지 비교       - code:1(목록 숫자):2(목록 숫자):3(목록 숫자)
	// 이메일 여부 체크(함수 체크시 예제)  - isEmail:true(체크여부 true/false)
	
	// 오류시 focus 지정                      - focus:cal_toDate(Componet ID로 form에서부터의 경로)
	
	// 조회시 Validation Check
	//if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;

    // Grid sort 표시 초기화(필수)
    //gfn_clearSortMark(grd_list);

	// 기준일자
	ds_search.setColumn(0, "stdDate", cal_stdDate.fn_getValue());

    var strSvcID    = "search";
    var strURL      = "rc/rrm/standardRecipeDetailedMgnt/selectList.xdo";
    var strInDs     = "ds_search=ds_search:A";
    var strOutDs    = "ds_list=ds_list";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{	
	if(!(ds_list.rowcount > 0)){
		gfn_alert("msg.search.before");
		return;
	}
	
	//상세 리스트 row 추가 및 key value 세팅
	var nRow = ds_dtlList.addRow();
	ds_dtlList.setColumn(nRow, "muCd", ds_list.getColumn(ds_list.rowposition, "muCd"));
	ds_dtlList.setColumn(nRow, "muNm", ds_list.getColumn(ds_list.rowposition, "muNm"));
	ds_dtlList.setColumn(nRow, "upjangType", ds_list.getColumn(ds_list.rowposition, "upjangType"));
	ds_dtlList.setColumn(nRow, "upjangTypeNm", ds_list.getColumn(ds_list.rowposition, "upjangTypeNm"));
	ds_dtlList.setColumn(nRow, "stdRecipeCd", ds_list.getColumn(ds_list.rowposition, "stdRecipeCd"));
	ds_dtlList.setColumn(nRow, "recipeNm", ds_list.getColumn(ds_list.rowposition, "recipeNm"));
	ds_dtlList.setColumn(nRow, "cookUnit", ds_list.getColumn(ds_list.rowposition, "cookUnit"));
	ds_dtlList.setColumn(nRow, "recipeNmBynm", ds_list.getColumn(ds_list.rowposition, "recipeNmBynm"));
	ds_dtlList.setColumn(nRow, "standNm", ds_list.getColumn(ds_list.rowposition, "standNm"));
	ds_dtlList.setColumn(nRow, "upjangModifyAllowYn", ds_list.getColumn(ds_list.rowposition, "upjangModifyAllowYn"));
	ds_dtlList.setColumn(nRow, "sdate", fv_sToday);
	ds_dtlList.setColumn(nRow, "edate", "29991231");
	ds_dtlList.setColumn(nRow, "semiGoodsYn", "Y");
	ds_dtlList.setColumn(nRow, "recipeApplyUnit", "G");		//레시피적용단위(Def:G)
	ds_dtlList.setColumn(nRow, "basisUnitCd", "G");			//기준단위(Def:G)
	ds_dtlList.setColumn(nRow, "lossRate", "100");
	ds_dtlList.setColumn(nRow, "semiGoodsYn", "N");			//품목구분(Default 식자재)
	ds_dtlList.setColumn(nRow, "priceSet", "2");				//단가설정(레시피 단가
	
	fn_changePumPop();
	
	// Grid 입력 cell 지정
	grd_dtlList.setFocus();
	grd_dtlList.setCellPos(1);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_delete()
{
	var nRow = ds_dtlList.rowposition;
	
	if(ds_dtlList.rowposition == -1 || ds_dtlList.findRow("chk", "1") == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "삭제할 row");	// 선택된 항목이 없습니다.
		return;
	}

	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) 
	{	
		for( var i = ds_dtlList.rowcount; i >= 0; i-- )
		{
			if( ds_dtlList.getColumn(i, "chk") == "1" )
				ds_dtlList.deleteRow(i);
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
	//선택된 자재를 이전자재코드로 가지고 있는 자재가 있을경우 저장안됨
// 	if(ds_detail.getColumn(0, "prvsCnt") > 0){
// 		alert("사용일자가 종료된 자재이기 때문에 수정할 수 없습니다.");
// 		return;
// 	}

	// 저장시 Validation Check	
	if (gfn_validCheck(ds_dtlList, ds_dtlListValid) == false)	return;

// 	// v_ds_check 미사용시 변경사항 체크
	if (gfn_dsIsUpdated(ds_dtlList) == false && gfn_dsIsUpdated(ds_list) == false) 
	{
		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
		return;
	}
		
	for(var i=0; i<ds_dtlList.rowcount; i++){
				
		//수정일때만 품목 코드가 변경되었는지 체크
		if(ds_dtlList.getRowType(i) == 4){
		
			if(ds_dtlList.getOrgColumn(i,"sdate") > ds_dtlList.getColumn(i, "edate")){
				gfn_alert(" 사용일자가 종료된 자재이기 때문에 수정할 수 없습니다.");
				ds_dtlList.rowposition = i;
				return;
			}
			
			if(ds_dtlList.getOrgColumn(ds_dtlList.rowposition, "materialCd") != ds_dtlList.getColumn(ds_dtlList.rowposition, "materialCd")){
				ds_dtlList.setColumn(ds_dtlList.rowposition, "orgMaterialCd", ds_dtlList.getOrgColumn(ds_dtlList.rowposition, "materialCd"));
			}
			
			if(ds_dtlList.getOrgColumn(ds_dtlList.rowposition, "sdate") != ds_dtlList.getColumn(ds_dtlList.rowposition, "sdate")){
				ds_dtlList.setColumn(ds_dtlList.rowposition, "orgSdate", ds_dtlList.getOrgColumn(ds_dtlList.rowposition, "sdate"));
			}
		}
	}

// 	// v_ds_check 사용시 변경사항 체크
// 	if (gfn_isDataChange() == true) 
// 	{		
// 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
// 		return;
// 	}
	
	
	// ds_listValid Dataset에 Validation할 칼럼별로 구성
	// 항목 추가시에는 ','로 구분
	// 예)title:금액1,required:false,minlength:2,digits:true
	
	// Alert시 칼럼 표시 명칭               - title:아이디(메시지의 치환할 명칭) 
	// 필수체크                              - required:true(체크여부 true/false)
	// size 크기                              - length:7(size 숫자)
	// 최대 size 크기                        - maxlength:7(size 숫자)
	// 최소 size 크기                        - minlength:7(size 숫자)
	// 최대 size 크기(Byte)                  - maxlengthB:7(size 숫자)
	// 최소 size 크기(Byte)                  - minlengthB:7(size 숫자)
	// 숫자 여부                             - digits:true(체크여부 true/false)
	// 해당 숫자 이하                       - min:7(size 숫자)
	// 해당 숫자 이상                       - max:7(size 숫자)
	// 소숫점 자리수 비교                   - declimit:3(size 숫자)
	// 날짜 년월일 체크                     - date:true(체크여부 true/false)
	// 날짜 년월 체크                       - dateym:true(체크여부 true/false)
	// 타 칼럼값보다 큰지 비교             - comparemax:Column4(Dataset 칼럼ID):시작일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값보다 작은지 비교           - comparemin:Column6(Dataset 칼럼ID):종료일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값과 같은 값인지 비교        - equalto:Column5(Dataset 칼럼ID):금액1(비교대상의 메시지 치환할 명칭)
	// 사이의 값인지 비교                   - range:40(from 숫자):100(to 숫자)
	// 코드값이 목록내의 값인지 비교       - code:1(목록 숫자):2(목록 숫자):3(목록 숫자)
	// 이메일 여부 체크(함수 체크시 예제)  - isEmail:true(체크여부 true/false)
	
	// 오류시 focus 지정                      - focus:cal_toDate(Componet ID로 form에서부터의 경로)

/* [2016.01.26] 레시피 목록의 반찬세트 한번에 저장되도록 수정. 이다미 사원 요청
	ds_listSave.clearData();
	ds_listSave.addRow(0);
	ds_listSave.copyRow(0, ds_list, ds_list.rowposition);
	ds_listSave.setRowType(0, 4);
*/

	var strSvcID    = "save";
    var strURL      = "rc/rrm/standardRecipeDetailedMgnt/saveList.xdo";
    var strInDs     = "ds_list=ds_list:U ds_dtlList=ds_dtlList:U ds_copy=ds_copy";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
	if(ds_list.rowcount == 0){
		alert("조회된 레시피가 없습니다.");
		return;
	}

	//레포트에 전달할 파라메터 생성
	var arrParams	= SCReport.newParams ();
	SCReport.setParams(arrParams, "upjangType", ds_list.getColumn(ds_list.rowposition, "upjangType"));
	SCReport.setParams(arrParams, "stdRecipeCd", ds_list.getColumn(ds_list.rowposition, "stdRecipeCd"));
	//SCReport.setParams(arrParams, "stdDate", fv_sToday);
	//화면의 기준이자로 변경 10/30 이다미 요청 김호석 수정
	var cal_dt = cal_stdDate.fn_getValue();
	var cal_dt2 = "";
	
	
    if (cal_dt.length == 8) {
		cal_dt2 = cal_dt.substr(0,4) + "."+ cal_dt.substr(4,2) + "."+ cal_dt.substr(6,2);	
	}
	
	SCReport.setParams(arrParams, "stdDate", cal_dt);   // 조회용 기준일자
	SCReport.setParams(arrParams, "stdDate2", cal_dt2); // 화면용 기준일자
	
	
	
	//방법1)서버에서 Query에 의해 처리하는 경우 예
	//(필수) 레포트명
	SCReport.setParams (arrParams, SCReport.RPT_NAME, "/hwfs/rc/rrm/StdRecipe.ozr");

	//출력 옵션 설정
	//-창 타이틀 (디폴트는 "ReportViewer")
	SCReport.setParams (arrParams, SCReport.RPT_TITLE, "StdRecipe");

	//-Zoom (디폴트는 100)
	//SCReport.setParams (arrParams, SCReport.RPT_ZOOM, "120");

	//레포트에 맞게 전달되는 개발자 정의 파라미터
	//SCReport.setParams (arrParams, "id", JSESSIONID);

	//Report 호출
	//trace(SCReport.getReportUrl(arrParams));
	SCReport.viewReport(this, arrParams);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
	
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}

    switch(strSvcID)
    {
		// 표준레시피 마스터 검색
        case "search" :
            if( ds_list.rowcount == 0 )
            {
				ds_dtlList.clearData();
            }
            else
            {
/*
            	for( var i = 0; i < ds_list.rowcount; i++ )
				{
					var salePrice = ds_list.getColumn(i, "salePrice");
					var investAmt = ds_list.getColumn(i, "investAmt");
					var cstrat = 0;

					if( salePrice == null || salePrice == "" || salePrice == 0 )
						cstrat = 0;
					else
						cstrat = Math.round(Number(investAmt) / (Number(salePrice) / 1.1) * 100, 1);

					ds_list.setColumn(i, "goalCstrat", cstrat);
				}
*/
            }
            break;
        
        // 표준레시피 상세 검색
        case "searchDtl" :
			fn_calCstrat();
			break;
			
        // 저장
        case "save" :
			gfn_alert("msg.save.success");	// 저장 되었습니다.
			fn_search();
            break;    
        case "searchRsr" :
			//trace(ds_setRecipe.saveXML());
			ds_setRecipe.insertRow(0);
			ds_setRecipe.setColumn(0,"stdRecipeCd","");
			ds_setRecipe.setColumn(0,"recipeNm","");
			break;
		// 레시피 가져오기
        case "recipeCopy" :
			for( var i = 0; i < ds_temp.rowcount; i++ )
			{	
				//alert(ds_temp.getColumn(i,"needQty"));
				if (ds_temp.getColumn(i,"needQty") != 0) {
					var nRow = ds_dtlList.addRow();
					ds_dtlList.copyRow(nRow, ds_temp, i);
				}
			}
			break;
    }

    div_img.visible = false;
}

/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/


/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : form에서 Key Down시 단축키들 지정(공통에서 자동생성, 화면에 스크립트 작성시 화면 스크립트만 실행됨)
 *---------------------------------------------------------------------------------------------*/
// function form_onkeydown(obj:Form, e:KeyEventInfo)
// {
// 	gfn_formKeyDown(obj, e);
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : Grid Header Click시 정렬(공통에서 자동생성, 화면에 스크립트 작성시 화면 스크립트만 실행됨)
 *---------------------------------------------------------------------------------------------*/
// function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
// {
// 	gfn_gridSort(obj, e);
// }

// function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
// {
// 		if(obj.treeinitstatus == "expand,all")
// 	{
// 		obj.treeinitstatus = "collapse,all";
// 	} 
// 	else {
// 		obj.treeinitstatus = "expand,all";		
// 	}
// }

// function grd_list_oncellclick(obj:Grid, e:GridClickEventInfo)
// {
// 	//	if(e.clickitem == "image" || e.clickitem == "treebutton") return;
// 
//     var nRow = obj.getTreeRow(e.row);    
//     if (obj.getTreeStatus(nRow) == 0 ) 
//     {
//         // 설정하고자 하는 TreeStatus.
//         //  false : 해당 Row의 TreeStatus를 Collapse로 설정
//         //  true  : 해당 Row의 TreeStatus를 Expand로 설정                
//         obj.setTreeStatus(nRow, true);
//     } else if (obj.getTreeStatus(nRow) == 1 ) {
//         obj.setTreeStatus(nRow, false);
//     }
// }

/*----------------------------------------------------------------------------------------------
 * 설명      : 표준레시피 상세 목록을 조회
 *---------------------------------------------------------------------------------------------*/
function fn_searchDtail(){
	
	var strSvcID    = "searchDtl";
    var strURL      = "rc/rrm/standardRecipeDetailedMgnt/selectDtlList.xdo";
    var strInDs     = "ds_search=ds_searchDtl:A";
    var strOutDs    = "ds_dtlList=ds_list";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 대분류 검색조건 onitemchanged 이벤트
 *---------------------------------------------------------------------------------------------*/
function cbo_schMgrpCd_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	var mgrpCd = obj.value;
	ds_mcalssCd.filter("mgrpCd=='"+mgrpCd+"' || mcalssCd==''");
	ds_search.setColumn(0, "mcalssCd", "");
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 중분류 검색조건 onitemchanged 이벤트
 *---------------------------------------------------------------------------------------------*/
function cbo_schMcalssCd_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	var mcalssCd = obj.value;
	ds_sclassCd.filter("mcalssCd=='"+mcalssCd+"' || sclassCd==''");
	ds_search.setColumn(0, "sclassCd", "");
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 분류코드 단계별 모든 목록 검색 함수
 *---------------------------------------------------------------------------------------------*/
function fn_classCdSearchAll(){
	
	var codeGb = ds_search.getColumn(0, "codeGb");
	
	var strSvcID    = "searchG";
    var strURL      = "rc/rrm/recipeClassCodeMgnt/selectListAll.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_mgrpCd=ds_list";
    var strArg      = "codeGb="+codeGb;
    var strCallback = "fn_callBackRecipeClassCode";
    var bAsync      = true;
    
    if(codeGb == "M"){
		strSvcID    = "searchM";
		strOutDs    = "ds_mcalssCd=ds_list";
    }else if(codeGb == "S"){
		strSvcID    = "searchS";
		strOutDs    = "ds_sclassCd=ds_list";
    }
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 분류 코드 검색 콜백 함수
 *---------------------------------------------------------------------------------------------*/
function fn_callBackRecipeClassCode(strSvcID, nErrorCode, strErrorMsg){
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
	if(strSvcID == "searchG"){
		ds_mgrpCd.insertRow(0);
		ds_mgrpCd.setColumn(0, "mgrpCd", "");
		ds_mgrpCd.setColumn(0, "mgrpCdNm", "전체");
		ds_search.setColumn(0, "mgrpCd", "");
	}else if(strSvcID == "searchM"){
		ds_mcalssCd.insertRow(0);
		ds_mcalssCd.setColumn(0, "mcalssCd", "");
		ds_mcalssCd.setColumn(0, "mcalssCdNm", "전체");
		ds_search.setColumn(0, "mcalssCd", "");
	}else{
		ds_sclassCds.copyData(ds_sclassCd);
		
		ds_sclassCd.insertRow(0);
		ds_sclassCd.setColumn(0, "sclassCd", "");
		ds_sclassCd.setColumn(0, "sclassCdNm", "전체");
		ds_search.setColumn(0, "sclassCd", "");
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 추가 버튼 클릭이벤트
 *---------------------------------------------------------------------------------------------*/
function btn_addDtl_onclick(obj:Button,  e:ClickEventInfo)
{
	//반영원가율 직접입력시 식자재 등록 불가
// 	if(ds_list.getColumn(ds_list.rowposition, "cstratDrctInputYn") == "Y"){
// 		var recipeNm = ds_list.getColumn(ds_list.rowposition, "recipeNm");
// 		alert("'" + recipeNm + "'은(는) 반영원가율 직접 입력으로 재료를 추가 할 수 없습니다.");
// 		return;
// 	}

	if(ds_list == null || ds_list.rowcount == 0){
		alert("레시피 목록을 조회하신 후 추가가 가능합니다.");
		return;
	}
	
	//상세 리스트 row 추가 및 key value 세팅
	var nRow = ds_dtlList.addRow();
	ds_dtlList.setColumn(nRow, "muCd", ds_list.getColumn(ds_list.rowposition, "muCd"));
	ds_dtlList.setColumn(nRow, "muNm", ds_list.getColumn(ds_list.rowposition, "muNm"));
	ds_dtlList.setColumn(nRow, "upjangType", ds_list.getColumn(ds_list.rowposition, "upjangType"));
	ds_dtlList.setColumn(nRow, "upjangTypeNm", ds_list.getColumn(ds_list.rowposition, "upjangTypeNm"));
	ds_dtlList.setColumn(nRow, "stdRecipeCd", ds_list.getColumn(ds_list.rowposition, "stdRecipeCd"));
	ds_dtlList.setColumn(nRow, "recipeNm", ds_list.getColumn(ds_list.rowposition, "recipeNm"));
	ds_dtlList.setColumn(nRow, "cookUnit", ds_list.getColumn(ds_list.rowposition, "cookUnit"));
	ds_dtlList.setColumn(nRow, "recipeNmBynm", ds_list.getColumn(ds_list.rowposition, "recipeNmBynm"));
	ds_dtlList.setColumn(nRow, "standNm", ds_list.getColumn(ds_list.rowposition, "standNm"));
	ds_dtlList.setColumn(nRow, "upjangModifyAllowYn", ds_list.getColumn(ds_list.rowposition, "upjangModifyAllowYn"));
	
	//팝업호출
	fn_callRegistPopup("I");
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 상세 등록(수정) 팝업 호출
 *---------------------------------------------------------------------------------------------*/
function fn_callRegistPopup(saveGb){
	var arrArg = new Array();

	
	arrArg[0] = ds_dtlList.getColumn(ds_dtlList.rowposition, "muCd");			//사업부
	arrArg[1] = ds_dtlList.getColumn(ds_dtlList.rowposition, "muNm");			//사업부명
	arrArg[2] = ds_dtlList.getColumn(ds_dtlList.rowposition, "upjangType");		//업장유형
	arrArg[3] = ds_dtlList.getColumn(ds_dtlList.rowposition, "upjangTypeNm");	//업장유형명
	arrArg[4] = ds_dtlList.getColumn(ds_dtlList.rowposition, "stdRecipeCd");	//표준레시피코드
	arrArg[5] = ds_dtlList.getColumn(ds_dtlList.rowposition, "recipeNm");		//표준레시피명
	arrArg[6] = ds_dtlList.getColumn(ds_dtlList.rowposition, "cookUnit");		//조리단위
	arrArg[7] = ds_dtlList.getColumn(ds_dtlList.rowposition, "recipeNmBynm");	//표준레시피별명
	arrArg[8] = ds_dtlList.getColumn(ds_dtlList.rowposition, "standNm");		//레시피단계
	arrArg[9] = ds_dtlList.getColumn(ds_dtlList.rowposition, "materialCd");		//자재(또는 레시피)코드
	arrArg[10] = ds_dtlList.getColumn(ds_dtlList.rowposition, "sdate");			//시작일
	arrArg[11] = ds_dtlList.getColumn(ds_dtlList.rowposition, "edate");			//종료일
	arrArg[12] = ds_dtlList.getColumn(ds_dtlList.rowposition, "upjangModifyAllowYn");	//업장수정허용여부
	
	
	var strId       = "StandardRecipeDetailedMgntPop";
	var strURL      = "X_RRM::StandardRecipeDetailedMgntPop.xfdl";
	var objArgument = {arrArg:arrArg, saveGb:saveGb};
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign, bResizable);
			
	//fn_searchDtail();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : ds_list(레시피목록) onrowposchanged 이벤트
 *---------------------------------------------------------------------------------------------*/
function ds_list_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	ds_copy.clearData();

	ds_searchDtl.setColumn(0, "muCd", obj.getColumn(obj.rowposition, "muCd"));
	ds_searchDtl.setColumn(0, "upjangType", obj.getColumn(obj.rowposition, "upjangType"));
	ds_searchDtl.setColumn(0, "stdRecipeCd", obj.getColumn(obj.rowposition, "stdRecipeCd"));
	
	//레시피 상세목록 검색
	fn_searchDtail();
	
	var rowType = obj.getRowType(obj.rowposition);
	
	if(rowType == 1 || rowType == 4){
		if(obj.getColumn(obj.rowposition, "relPath") != null && obj.getColumn(obj.rowposition, "relPath") != ""){
			Div00.img_viewer.image = gv_webImgRoot + obj.getColumn(obj.rowposition, "relPath") + "/" + obj.getColumn(obj.rowposition, "saveFileNm");
		}else{
			Div00.img_viewer.image = "";
		}
		
	}else{
		if(obj.getColumn(obj.rowposition, "relPath") != null && obj.getColumn(obj.rowposition, "relPath") != undefined){
			Div00.img_viewer.image = obj.getColumn(obj.rowposition, "relPath");
		}else{
			Div00.img_viewer.image = "";
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 상세목록 그리드 더블클릭
 *---------------------------------------------------------------------------------------------*/
function grd_dtlList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	//fn_callRegistPopup("U");
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 상세목록 그리드 확장버튼 클릭 이벤트
 *---------------------------------------------------------------------------------------------*/
function grd_dtlList_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
	if(ds_dtlList.getColumn(ds_dtlList.rowposition, "semiGoodsYn") == "Y"){
		if(ds_dtlList.getColumn(ds_dtlList.rowposition, "relPath") != null && ds_dtlList.getColumn(ds_dtlList.rowposition, "relPath") != ""){
			div_img.imgViewer.image = gv_webImgRoot + ds_dtlList.getColumn(ds_dtlList.rowposition, "relPath") + "/" + ds_dtlList.getColumn(ds_dtlList.rowposition, "saveFileNm");
			div_img.visible = true;
		}else{
			alert("레시피 이미지가 없습니다.");
		}
	}else{
		div_img.visible = false;
		//식자재 호출(팝업)
		var itemCode = ds_dtlList.getColumn(ds_dtlList.rowposition, "materialCd");
		fn_callItemInfoPop(itemCode);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 이미지 닫기 버튼 클릭 이벤트
 *---------------------------------------------------------------------------------------------*/
function div_img_btn_imgClose_onclick(obj:Button,  e:ClickEventInfo)
{
	div_img.visible = false;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 식재정보 팝업 호출 함수
 *---------------------------------------------------------------------------------------------*/
function fn_callItemInfoPop(itemCode){
// 	var strId       = "ItemInfoPop";
// 	var strURL      = "X_RRM::ItemInfoPop.xfdl";
// 	var objArgument = {pItemCode:itemCode};
// 	var nWidth      = -1;
// 	var nHeight     = -1;
// 	var strStyle    = "";	
// 	var nLeft       = -1;
// 	var nTop        = -1;
// 	var isModeless  = true;
// 	var bShowTitle  = true;
// 	var strAlign    = "-1";
// 	var bResizable  = false;
// 
// 	gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign, bResizable);	

	//자재상세팝업 호출 : 두번쨰 파라미터는 아이템코드
	SCSysIf.eprocPopup (SCSysIf.EPROC_ITEM_POPUP, itemCode);
}

/*----------------------------------------------------------------------------------------------
 * 조리법 팝업 호출
 *---------------------------------------------------------------------------------------------*/
function btn_recipeCuisine_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_list.rowcount == 0){
		alert("조회된 레시피가 없습니다.");
		return;
	}

	var arrArg = new Array();
	arrArg[0] = ds_list.getColumn(ds_list.rowposition, "muCd");			//사업부코드
	arrArg[1] = cbo_schMuCd.text;										//사업부명
	arrArg[2] = ds_list.getColumn(ds_list.rowposition, "upjangType");	//업장유형
	arrArg[3] = ds_list.getColumn(ds_list.rowposition, "upjangTypeNm");	//업장유형명
	arrArg[4] = ds_list.getColumn(ds_list.rowposition, "stdRecipeCd");	//표준레시피코드
	arrArg[5] = ds_list.getColumn(ds_list.rowposition, "recipeNm");		//레시피명
	arrArg[6] = ds_list.getColumn(ds_list.rowposition, "upjangModifyAllowYn");	//업장수정허용여부
	arrArg[7] = "N"	// 표준레시피 상세관리에서는 조회만 가능하게 수정 : 2015.11.02
	
	var strId       = "StandardRecipeMasterMgntPop";
	var strURL      = "X_RRM::StandardRecipeMasterMgntPop.xfdl";
	var objArgument = {arrArg:arrArg};
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign, bResizable);
			
}

/*----------------------------------------------------------------------------------------------
 * 원가율 계산
 *---------------------------------------------------------------------------------------------*/
function fn_calCstrat(){
	var salePrice = ds_list.getColumn(ds_list.rowposition, "salePrice");
	var investAmt = ds_dtlList.getSum("investAmt");
	var cstrat = 0;
	
	if(salePrice == null || salePrice == "" || salePrice == 0){
		cstrat = 0;
	}else{
		cstrat = Math.round(Number(investAmt) / (Number(salePrice) / 1.1) * 100, 2);
	}
	ds_list.setColumn(ds_list.rowposition, "goalCstrat", cstrat);
}

function ds_list_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid == "salePrice"){
		fn_calCstrat();
	}
}

function edt_schRecipeNm_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if(e.keycode == 13){
		obj.updateToDataset();
		fn_search();
	}
}
// 화면 사이즈 변경시 스플리터 최대값 최소값 변경
function StandardRecipeDetailedMgnt_onsize(obj:Form, e:SizeEventInfo)
{

	var nSpt  = sp_line.position.y;
	var nForm = this.position.bottom;
	
	if(nForm -35 <  nSpt && nSpt > 153)
	{
		sp_line.position.y = nForm -35;
	}
	sp_line.max = this.position.bottom - 35;
	sp_line.min = 133;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목종류 onitemchanged 이벤트 - 팝업호출 변경
 *---------------------------------------------------------------------------------------------*/
function edt_semiGoodsYn_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_changePumPop();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 품목종류(레시피 OR 식자재)에 따른 버튼 활성 비활성
 *---------------------------------------------------------------------------------------------*/
function fn_changePumPop()
{
 	if( ds_dtlList.getRowType(ds_dtlList.rowposition) != 2 )
	{
			Div00.btn_recipePop.enable = false;
			Div00.btn_recipePop.visible = true;
			Div00.btn_pumPop.visible = false;
			Div00.btn_pumPop.enable = false;
	}
	else
	{
		if( ds_dtlList.getColumn(ds_dtlList.rowposition, "semiGoodsYn") == "Y" )
		{
			Div00.btn_recipePop.enable = true;
			Div00.btn_recipePop.visible = true;

			Div00.btn_pumPop.visible = false;
			Div00.btn_pumPop.enable = false;
			
		}
		else
		{
			Div00.btn_recipePop.enable = false;
			Div00.btn_recipePop.visible = false;

			Div00.btn_pumPop.visible = true;
			Div00.btn_pumPop.enable = true;
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 폼목코드 검색 버튼 이벤트( 팝업 호출)
 *---------------------------------------------------------------------------------------------*/
function btn_pumPop_onclick(obj:Button,  e:ClickEventInfo)
{
	//식자재 검색팝업
	fn_callItemPop();
	
	Div00.msk_needQty.setFocus();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 식자재 검색 팝업 호출
 *---------------------------------------------------------------------------------------------*/
function fn_callItemPop(){
	var arrArg = new Array();
	
	arrArg[0] = ds_searchDtl.getColumn(ds_searchDtl.rowposition,"stdDate");
	
	var strId       = "StandardRecipeDetailedItemPop";
	var strURL      = "X_RRM::StandardRecipeDetailedItemPop.xfdl";
	var objArgument = {arrArg:arrArg};
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign, bResizable);
	
	if ( arrRtn instanceof Object )
	{
		var rowIdx = ds_dtlList.rowposition;
		ds_dtlList.setColumn(rowIdx, "materialCd", arrRtn.code);
		ds_dtlList.setColumn(rowIdx, "materialCdNm", arrRtn.codeName);
		ds_dtlList.setColumn(rowIdx, "poUnit", arrRtn.poUnit);
		ds_dtlList.setColumn(rowIdx, "cstAmt", arrRtn.cstAmt);
		ds_dtlList.setColumn(rowIdx, "gramPrice", arrRtn.gramPrice);
		ds_dtlList.setColumn(rowIdx, "itemSize", arrRtn.itemSize);
//		ds_dtlList.setColumn(rowIdx, "sdate", arrRtn.sdate);
//		ds_dtlList.setColumn(rowIdx, "edate", arrRtn.edate);
		ds_dtlList.setColumn(rowIdx, "itemUpjang", fn_upjangTypeDrUpjang());
		
		//ds_detail.setColumn(0, "itemUpjang", arrRtn.itemUpjang);
		
		//레시피내용 삭제
		Div00.edt_cookUnit.value = "";
		Div00.edt_offerUnit.value = "";
		
		//투입재료비 계산
		Div00.msk_investAmt.value = fn_calInvestAmt(ds_dtlList.getColumn(rowIdx, "needQty"), ds_dtlList.getColumn(rowIdx, "lossRate"), ds_dtlList.getColumn(rowIdx, "gramPrice"));
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 투입재료비 계산(레시피)
 *---------------------------------------------------------------------------------------------*/
function fn_calInvestAmtRecipe(needQty, lossRate, cookUnit, cstAmt)
{
	if( Number(lossRate) > 100 )
		return Math.round((Number(needQty) / (Number(lossRate) / 100)) / Number(cookUnit) * Number(cstAmt));
	else
		return Math.round((Number(needQty) * (Number(lossRate) / 100)) / Number(cookUnit) * Number(cstAmt));
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 투입재료비 계산(식자재)
 *---------------------------------------------------------------------------------------------*/
function fn_calInvestAmt(needQty, lossRate, gramPrice)
{
	if( Number(lossRate) > 100 )
		return Math.round((Number(needQty) / (Number(lossRate) / 100)) * Number(gramPrice));
	else
		return Math.round((Number(needQty) * (Number(lossRate) / 100)) * Number(gramPrice));
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 실제사용량 계산
 *---------------------------------------------------------------------------------------------*/
function fn_calSumNeedQty(needQty, lossRate)
{
	if( Number(lossRate) > 100 )
		return Math.round(Number(needQty) / (Number(lossRate) / 100), 3);
	else
		return Math.round(Number(needQty) * (Number(lossRate) / 100), 3);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 그리드 행 변경 이벤트 - 팝업호출 변경
 *---------------------------------------------------------------------------------------------*/
function ds_dtlList_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	fn_changePumPop();
	if(obj.getRowType(e.newrow) == Dataset.ROWTYPE_INSERT){
		Div00.edt_semiGoodsYn.enable = true;
		Div00.edt_materialCd.enable = true;
		Div00.btn_recipePop.enable = true;
		Div00.edt_materialCdNm.enable = true;
	}else{
		Div00.edt_semiGoodsYn.enable = false;
		Div00.edt_materialCd.enable = false;
		Div00.btn_recipePop.enable = false;
		Div00.edt_materialCdNm.enable = false;
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 업장유형별 대표업장 설정
 *---------------------------------------------------------------------------------------------*/
function fn_upjangTypeDrUpjang(){
	var upjangType = ds_dtlList.getColumn(ds_dtlList.rowposition, "upjangType");
	var upjangCd = "";
	
	//연회,웨딩
	if(upjangType == "11"){
		upjangCd = "123252";		//프레스센터프레스클럽점
	//케이터링
	}else if(upjangType == "12"){
		upjangCd = "114351";		//케터링점
	//클럽하우스
	}else if(upjangType == "13"){
		upjangCd = "114359";		//남촌CC클럽하우스점
	//푸드코트
	}else if(upjangType == "21"){
		upjangCd = "101265";		//푸드코트한화역사서울역점
	//HMR(Home meal replacement)
	}else if(upjangType == "22"){
		upjangCd = "108628";		//델리카갤러리아타임월드점
	//F.F(Fast Food)
	}else if(upjangType == "23"){
		upjangCd = "152818";		//롯데월드바덴바덴점
	//컨세션-부페
	}else if(upjangType == "24"){
		upjangCd = "140063";		//롯데월드아이언불점
	//중식당
	}else if(upjangType == "31"){
		upjangCd = "114356";		//티원서울역점
	//한식당
	}else if(upjangType == "41"){
		upjangCd = "127750";		//국립중앙박물관점 '마루'
	//일식당
	}else if(upjangType == "51"){
		upjangCd = "122710";		//샤브샤브63점
	//양식당
	}else if(upjangType == "61"){
		upjangCd = "";				//오레노이태원점
	//기타(99)
	}else{
		upjangCd = "";				//
	}
	
	return upjangCd;
}
function grd_dtlList_onsize(obj:Grid, e:SizeEventInfo)
{
	
	Static29.position.left = obj.position.left+5;
}
	
/*----------------------------------------------------------------------------------------------
 * 설명      : 사진추가 버튼 클릭 이벤트
 *---------------------------------------------------------------------------------------------*/
function btn_addFile_onclick(obj:Button,  e:ClickEventInfo)
{

	if(ds_list.rowcount == 0){
		alert("행을 추가 후 사진을 첨부하시기 바랍니다.");
		return;
	}
	
	ObjAtchFile.fn_setClear();
	ObjAtchFile.btn_addFile.click();
	if(!ObjAtchFile.isAtchFile()) return;
	
	ObjAtchFile.setWebRepoYn(true);				//첨부파일 경로는 Webroot로 지정
	var rtn = ObjAtchFile.fn_uploadFile();		//첨부파일 서버저장
	if (rtn < 0){
		return;
	}else{
		//파일 DB저장
		var path = ds_file.getColumn(0, "orgnlPath");
		var orgNm = ds_file.getColumn(0, "orgnlFileNm");
		fn_saveRecipeFile();	//비동기(파일저장된 시퀀스 정보를 받기 위해)
		
		ds_list.setColumn(ds_list.rowposition, "refSeq", fv_RefSeq);
		ds_list.setColumn(ds_list.rowposition, "appendSeq", ds_file.getColumn(0, "appendSeq"));
		
		//화면에 이미지 표시
		ds_list.setColumn(ds_list.rowposition, "relPath", path);
		ds_list.setColumn(ds_list.rowposition, "orgnlFileNm", orgNm);
		
		Div00.img_viewer.image = path;
		
		//ds_list.setColumn(ds_list.rowposition, "imgModifyYn", "Y");
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 첨부파일 DB저장
 *---------------------------------------------------------------------------------------------*/
function fn_saveRecipeFile(){
	var strSvcID    = "fileSave";
    var strURL      = "rc/rrm/standardRecipeMasterMgnt/saveRecipeFile.xdo";
    var strInDs     = "ds_file=ds_file:A";
    var strOutDs    = "fv_RefSeq=fv_RefSeq ds_file=ds_file";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_searchRsr(){
    
    var strSvcID    = "searchRsr";
    var strURL      = "rc/rrm/standardRecipeMasterMgnt/selectRsr.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "ds_setRecipe=ds_setRecipe";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}


function ds_dtlList_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var semiGoodsYn		= obj.getColumn(e.row, "semiGoodsYn");
	var needQty			= obj.getColumn(e.row, "needQty");
	var lossRate		= obj.getColumn(e.row, "lossRate");
	var cookUnitItem	= obj.getColumn(e.row, "cookUnitItem");
	var cstAmt			= obj.getColumn(e.row, "cstAmt");
	var gramPrice		= obj.getColumn(e.row, "gramPrice");

	// 투입재료량
	if( e.columnid == "needQty" )
	{
		if( semiGoodsYn == "Y")
			Div00.msk_investAmt.value = fn_calInvestAmtRecipe(e.newvalue, lossRate, cookUnitItem, cstAmt);
		else
			Div00.msk_investAmt.value = fn_calInvestAmt(e.newvalue, lossRate, gramPrice);

		var sumNeedQty = fn_calSumNeedQty(needQty, lossRate);
		obj.setColumn(e.row, "sumNeedQty", sumNeedQty);
	}

	// 사용률(%)
	if( e.columnid == "lossRate" )
	{
		if( semiGoodsYn == "Y")
			Div00.msk_investAmt.value = fn_calInvestAmtRecipe(needQty, e.newvalue, cookUnitItem, cstAmt);
		else
			Div00.msk_investAmt.value = fn_calInvestAmt(needQty, e.newvalue, gramPrice);

		var sumNeedQty = fn_calSumNeedQty(needQty, e.newvalue);
		obj.setColumn(e.row, "sumNeedQty", sumNeedQty);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 가져오기 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_RecipePop(obj:Button,  e:ClickEventInfo)
{
	if( ds_list.rowcount == 0 || ds_list.rowposition == -1 )
	{
		gfn_alert("레시피 목록에서 레시피를 선택하세요.");
		return;
	}

	var arrArg = new Array();
		arrArg[0] = ds_list.getColumn(ds_list.rowposition, "upjangType");
		arrArg[1] = ds_list.getColumn(ds_list.rowposition, "stdRecipeCd");
		arrArg[2] = "STD";
		arrArg[3] = "";
	var strId       = "RecipeSearchPop";
	var strURL      = "X_RRM::RecipeSearchPop.xfdl";
	var objArgument = {arrArg:arrArg};
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign, bResizable);

	if( arrRtn instanceof Object )
	{
		var gubun = arrRtn["gubun"];
		var recipeCd = arrRtn["recipeCd"];
		var upjangCd = arrRtn["upjangCd"];
		var upjangType = arrRtn["upjangType"];
		var cuisineYn = arrRtn["cuisineYn"];
		var copyType = arrRtn["copyType"];

		ds_copy.clearData();
		ds_copy.addRow();

		ds_copy.setColumn(0, "upjangType", ds_list.getColumn(ds_list.rowposition, "upjangType"));
		ds_copy.setColumn(0, "stdRecipeCd", ds_list.getColumn(ds_list.rowposition, "stdRecipeCd"));
		ds_copy.setColumn(0, "muCd", ds_list.getColumn(ds_list.rowposition, "muCd"));
		ds_copy.setColumn(0, "orgUpjangType", upjangType);
		ds_copy.setColumn(0, "orgStdRecipeCd", recipeCd);
		ds_copy.setColumn(0, "orgUpjangCd", upjangCd);
		ds_copy.setColumn(0, "cuisineYn", cuisineYn);
		ds_copy.setColumn(0, "copyType", copyType);

		fn_recipeCopy(gubun, recipeCd, upjangCd, upjangType);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 레시피 복사
 *---------------------------------------------------------------------------------------------*/
function fn_recipeCopy(sGubun, sRecipeCd, sUpjangCd, sUpjangType)
{
    var strSvcID    = "recipeCopy";
    var strURL      = "rc/rrm/recipeList/selectRecipeDetail.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_temp=ds_list";
    var strArg      = "gubun=" + wrapQuote(sGubun);
        strArg     += " orgUpjangType=" + wrapQuote(ds_list.getColumn(ds_list.rowposition, "upjangType"));
        strArg     += " orgStdRecipeCd=" + wrapQuote(ds_list.getColumn(ds_list.rowposition, "stdRecipeCd"));
		strArg     += " upjangType=" + wrapQuote(sUpjangType);
		strArg     += " stdRecipeCd=" + wrapQuote(sRecipeCd);
		strArg     += " upjangCd=" + wrapQuote(sUpjangCd);
		strArg     += " stdDate=" + wrapQuote(cal_stdDate.fn_getValue());
    var strCallback = "fn_callBack";
    var bAsync      = true;

	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}]]></Script>
  </Form>
</FDL>
