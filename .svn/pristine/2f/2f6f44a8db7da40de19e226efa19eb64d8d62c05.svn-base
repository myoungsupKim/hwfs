<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FSM90030E" classname="SAMPLE01" inheritanceid="" position="absolute 0 0 1252 725" titletext="식단등록(행사식)" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="6" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 1237 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 1237 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 71 813 84"/>
        <Static id="Static03" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 258 40 268 61" anchor="left top"/>
        <Static id="Static37" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1179 71 1237 77" anchor="top right"/>
        <Static id="Static10" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 514 40 544 61" anchor="left top"/>
        <Static id="Static23" text="제공일" class="sta_WFSA_label" position="absolute 544 41 604 62" anchor="left top"/>
        <Static id="Static24" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 589 40 599 61" anchor="left top"/>
        <ObjCalendar id="cal_menuDate" anchor="left top" titletext="캘린더" taborder="2" scrollbars="none" position="absolute 599 40 702 61"/>
        <Static id="Static01" text="사업장" class="sta_WFSA_label" position="absolute 213 41 273 62" anchor="left top"/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="1" text="UpjangSearchComponent00" position="absolute 268 40 514 61" bindDataset="ds_cond" bindUpjangCodeColumn="UPJANG" bindUpjangNameColumn="UPJANGNM" eventBeforeTrigger="" eventAfterTrigger="fn_changeUpjang" roleSetId=""/>
        <Static id="Static13" text="팀" class="sta_WFSA_label" position="absolute 15 41 75 62" anchor="left top"/>
        <TmSearchComponent id="edt_tm" titletext="팀 검색용 Component" taborder="0" text="TmSearchComponent00" position="absolute 44 40 183 61" bindDataset="" bindTmCdColumn="" bindTmNmColumn="" qoBuCd="" qoMuCd="" qoUseYn="" eventAfterTrigger="fn_tmChange" eventBeforeTrigger=""/>
        <Static id="Static16" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 183 40 213 61" anchor="left top"/>
        <Static id="Static17" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 34 40 44 61" anchor="left top"/>
        <MuSearchComponent id="cbo_mu" titletext="사업부 선택 Component" taborder="22" text="MuSearchComponent00" position="absolute 999 40 1144 61" bindDataset="" bindMuCdColumn="" appendText="" onItemChangedEvent="" visible="false"/>
        <Grid id="grd_menuList" class="grd_WF_LineNone" taborder="3" tabstop="false" binddataset="ds_master" wheelscrollrow="5" autoenter="select" useinputpanel="false" cellsizingtype="both" cellmovingtype="col" autofittype="col" position="absolute 0 102 737 267" anchor="left top right" userdata="행사식 목록" onkillfocus="cbo_menu_OnKillFocus">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="27"/>
                <Column size="177"/>
                <Column size="110"/>
                <Column size="110"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="120"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" class="grd_WF_Essential" text="행사명" wordwrap="word"/>
                <Cell col="2" displaytype="text" class="grd_WF_Essential" text="식당명"/>
                <Cell col="3" displaytype="text" class="grd_WF_Essential" text="입고처" wordwrap="word"/>
                <Cell col="4" displaytype="text" class="grd_WF_Essential" text="식단가" wordwrap="word"/>
                <Cell col="5" displaytype="text" class="grd_WF_Essential" text="식수" wordwrap="word"/>
                <Cell col="6" displaytype="text" class="grd_WF_Essential" text="목표식재료율(%)"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="text" edittype="normal" style="align:left;" text="bind:MENU_FEATURE" editimemode="hangul" editautoselect="true"/>
                <Cell col="2" displaytype="combo" edittype="expr:setEditExpr(decode(expr_GetRowType(currow), 'insert', 'combo', 'none'))" editfilter="expr:setfilterExpr(decode(expr_GetRowType(currow), 'insert', 'combo', 'none'))" style="align:left;" text="bind:HALL_CD" combodataset="ds_hallList" combocodecol="HALL_CD" combodatacol="HALL_NAME"/>
                <Cell col="3" displaytype="combo" edittype="combo" style="align:left;" text="bind:SUBINV_CODE" combodataset="ds_SubinvCode" combocodecol="SUBINV_CODE" combodatacol="SUBINV_NAME"/>
                <Cell col="4" displaytype="number" edittype="masknumber" style="align:right;" text="bind:SALE_PRICE" mask="#,##0" editautoselect="true" editautoskip="false"/>
                <Cell col="5" displaytype="number" edittype="masknumber" style="align:right;" text="bind:EXPECT_MEAL_QTY" mask="#,##0" editautoselect="true"/>
                <Cell col="6" displaytype="number" edittype="masknumber" style="align:right;" text="bind:GOAL_COST_RATE" mask="#,##0.0" editlimit="3" editautoselect="true"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static22" text="행사식 목록" class="sta_WF_Title01" position="absolute 0 84 184 102" anchor="left top"/>
        <Static id="Static00" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 97 242 102" anchor="left top"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 267 636 280" anchor="left top"/>
        <Tab id="Tab00" taborder="5" tabindex="0" scrollbars="autoboth" position="absolute 746 76 1237 710" anchor="top right bottom">
          <Tabpages>
            <Tabpage id="tabpage1" text="표준식단검색">
              <Layouts>
                <Layout>
                  <Static id="Static34" class="sta_WFSA_Labelbg" position="absolute 10 9 479 77"/>
                  <Static id="Static35" text="W10" visible="false" position="absolute 25 9 479 19" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static36" text="W10" visible="false" position="absolute 25 66 478 76" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static37" text="W15" visible="false" position="absolute 10 9 25 76" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static38" text="W15" visible="false" position="absolute 464 9 479 76" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static39" text="W05." visible="false" position="absolute 25 40 465 45" style="background:#ff000055;align:center middle;"/>
                  <Combo id="cbo_stdMenuClass" taborder="4" imemode="hangul" innerdataset="@ds_cboStdMenuClass" codecolumn="CODE" datacolumn="CODE_NAME" type="filter" displayrowcount="15" ontextchanged="cbo_recipeNm_ontextchanged" position="absolute 120 19 249 40" userchange="0" onitemchanged="Tab00_tabpage1_cbo_stdMenuClass_onitemchanged"/>
                  <MaskEdit id="edt_stdCostFrom" taborder="10" position="absolute 335 45 383 66"/>
                  <MaskEdit id="edt_stdCostTo" taborder="11" position="absolute 416 45 464 66"/>
                  <Static id="Static40" text="~" position="absolute 388 47 412 66" style="align:center middle;"/>
                  <Static id="Static42" text="원가" class="sta_WFSA_label" position="absolute 279 46 331 67" anchor="left top"/>
                  <Static id="Static01" text="개별식단분류" class="sta_WFSA_label" position="absolute 25 20 117 41" anchor="left top"/>
                  <Static id="Static17" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 110 19 120 66" anchor="left top"/>
                  <Static id="Static00" text="식단명" class="sta_WFSA_label" position="absolute 279 20 339 41" anchor="left top"/>
                  <Static id="Static02" text="레시피명" class="sta_WFSA_label" position="absolute 25 46 109 67" anchor="left top"/>
                  <Static id="Static16" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 249 19 279 66" anchor="left top"/>
                  <Combo id="cbo_stdMenuName" taborder="13" imemode="hangul" innerdataset="@ds_cboStdMenuList" codecolumn="MENU_CD" datacolumn="MENU_NAME" type="filter" displayrowcount="15" position="absolute 335 19 464 40" userchange="0"/>
                  <Static id="Static03" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 325 19 335 66" anchor="left top"/>
                  <Grid id="Grid01" taborder="14" useinputpanel="false" autofittype="none" position="absolute 10 307 479 596" anchor="all" binddataset="ds_stdRecipeList" class="grd_WF_LineNone">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="90"/>
                          <Column size="182"/>
                          <Column size="70"/>
                          <Column size="90"/>
                          <Column size="80"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="1" text="코드"/>
                          <Cell col="2" text="레시피명"/>
                          <Cell col="3" text="원가"/>
                          <Cell col="4" text="레시피분류"/>
                          <Cell col="5" text="레시피유형"/>
                          <Cell col="6" text="조리법유형"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                          <Cell col="1" text="bind:RECIPE_CD"/>
                          <Cell col="2" displaytype="text" text="bind:RECIPE_NAME"/>
                          <Cell col="3" displaytype="number" text="bind:MENU_COST" mask="#,##0"/>
                          <Cell col="4" displaytype="combo" text="bind:RECIPE_CLASS" combodataset="ds_grdRecipeClass" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="5" displaytype="combo" text="bind:RECIPE_TYPE" combodataset="ds_cboRecipeType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="6" displaytype="combo" text="bind:CUISINE_TYPE" combodataset="ds_cboCuisineType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static09" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 302 479 307" anchor="left top"/>
                  <Static id="Static04" text="레시피 목록" class="sta_WF_Title01" position="absolute 10 289 194 307" anchor="left top"/>
                  <Grid id="grd_stdMenuList" taborder="15" useinputpanel="false" autofittype="col" position="absolute 10 107 479 276" binddataset="ds_stdMenuList" class="grd_WF_LineNone" oncelldblclick="Tab00_tabpage1_grd_stdMenuList_oncelldblclick" onexpandup="Tab00_tabpage1_grd_stdMenuList_onexpandup" autoenter="select">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="141"/>
                          <Column size="75"/>
                          <Column size="302"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="식단명"/>
                          <Cell col="2" text="표준원가"/>
                          <Cell col="3" text="구성"/>
                        </Band>
                        <Band id="body">
                          <Cell text="expr:currow + 1"/>
                          <Cell col="1" displaytype="text" edittype="expand" text="bind:MENU_NAME" expandshow="show" expandsize="22"/>
                          <Cell col="2" displaytype="number" text="bind:MENU_COST" mask="#,###"/>
                          <Cell col="3" displaytype="text" text="bind:RECIPE_INFO" tooltiptype="fit"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static05" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 102 396 107" anchor="left top"/>
                  <Static id="Static06" text="식단 목록" class="sta_WF_Title01" position="absolute 10 89 194 107" anchor="left top"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 276 479 289" anchor="left top"/>
                  <Static id="Static07" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 76 479 89" anchor="left top"/>
                  <Combo id="cbo_recipeNm" taborder="17" imemode="hangul" innerdataset="ds_cboRecipeNm" codecolumn="NM" datacolumn="NM" type="filter" displayrowcount="15" ontextchanged="cbo_recipeNm_ontextchanged" onitemchanged="cbo_recipeNm_onitemchanged" onkillfocus="cbo_recipeNm_onkillfocus" onkeydown="cbo_recipeNm_onkeydown" position="absolute 120 45 249 66" userchange="0"/>
                  <Button id="btn_stdInsertRecipe" taborder="18" text="레시피등록" class="btn_WF_Function" position="absolute 402 282 479 302" anchor="top right" onclick="Tab00_tabpage1_btn_stdInsertRecipe_onclick"/>
                  <Radio id="rdo_recipeType" taborder="19" columncount="0" rowcount="0" position="absolute 111 288 301 306" codecolumn="codecolumn" datacolumn="datacolumn" direction="vertical" index="0" value="1">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">1</Col>
                          <Col id="datacolumn">레시피 포함</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">2</Col>
                          <Col id="datacolumn">레시피 미포함</Col>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Radio>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage2" text="업장식단검색">
              <Layouts>
                <Layout>
                  <Grid id="grd_upjangMenuList" taborder="7" useinputpanel="false" autofittype="col" position="absolute 10 133 479 277" binddataset="ds_upjangMenuList" class="grd_WF_LineNone" oncelldblclick="Tab00_tabpage2_grd_upjangMenuList_oncelldblclick" onexpandup="Tab00_tabpage2_grd_upjangMenuList_onexpandup" autoenter="select">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="87"/>
                          <Column size="140"/>
                          <Column size="70"/>
                          <Column size="70"/>
                          <Column size="70"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="제공일"/>
                          <Cell col="2" text="식단"/>
                          <Cell col="3" text="식단가"/>
                          <Cell col="4" text="제공원가"/>
                          <Cell col="5" text="원가율"/>
                        </Band>
                        <Band id="body">
                          <Cell text="expr:currow + 1"/>
                          <Cell col="1" displaytype="date" text="bind:MENU_DATE"/>
                          <Cell col="2" displaytype="text" edittype="expand" text="bind:MENU_FEATURE" expandshow="show" expandsize="22"/>
                          <Cell col="3" displaytype="number" text="bind:SALE_PRICE" mask="#,##0"/>
                          <Cell col="4" displaytype="number" text="bind:CUR_PRICE" mask="#,##0"/>
                          <Cell col="5" displaytype="number" text="bind:COST_RATE2" mask="#,###.0"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static05" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 128 396 133" anchor="left top"/>
                  <Static id="Static06" text="식단 목록" class="sta_WF_Title01" position="absolute 10 115 194 133" anchor="left top"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 277 479 290" anchor="left top"/>
                  <Static id="Static34" class="sta_WFSA_Labelbg" position="absolute 10 9 479 102"/>
                  <Static id="Static35" text="W10" visible="false" position="absolute 25 9 479 19" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static36" text="W10" visible="false" position="absolute 25 92 478 102" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static37" text="W15" visible="false" position="absolute 10 9 25 102" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static38" text="W15" visible="false" position="absolute 464 9 479 101" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static39" text="W05." visible="false" position="absolute 25 40 465 45" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static42" text="레시피명" class="sta_WFSA_label" position="absolute 255 46 315 67" anchor="left top"/>
                  <Static id="Static01" text="업장명" class="sta_WFSA_label" position="absolute 25 20 117 41" anchor="left top"/>
                  <Static id="Static17" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 69 19 79 92" anchor="left top"/>
                  <Static id="Static00" text="식단특성" class="sta_WFSA_label" position="absolute 255 20 315 41" anchor="left top"/>
                  <Static id="Static02" text="식당명" class="sta_WFSA_label" position="absolute 25 46 109 67" anchor="left top"/>
                  <Static id="Static16" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 225 19 255 66" anchor="left top"/>
                  <Combo id="cbo_upjangMenuFeature" taborder="11" imemode="hangul" innerdataset="@ds_menuList" codecolumn="MENU_CD" datacolumn="MENU_FEATURE" type="filter" displayrowcount="15" position="absolute 322 19 464 40" userchange="0"/>
                  <Static id="Static03" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 312 19 322 66" anchor="left top"/>
                  <Static id="Static07" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 102 479 115" anchor="left top"/>
                  <Combo id="cbo_recipeNm" taborder="13" imemode="hangul" innerdataset="ds_cboRecipeNm" codecolumn="NM" datacolumn="NM" type="filter" displayrowcount="15" ontextchanged="cbo_recipeNm_ontextchanged" onitemchanged="cbo_recipeNm_onitemchanged" onkillfocus="cbo_recipeNm_onkillfocus" onkeydown="cbo_recipeNm_onkeydown" position="absolute 322 45 464 66" userchange="0"/>
                  <Static id="Static08" text="W05." visible="false" position="absolute 25 66 465 71" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static10" text="제공일" class="sta_WFSA_label" position="absolute 25 71 77 92" anchor="left top"/>
                  <ObjCalendar id="cal_fromDate" anchor="left top" titletext="캘린더" taborder="14" scrollbars="none" position="absolute 79 71 182 92"/>
                  <ObjCalendar id="cal_toDate" anchor="left top" titletext="캘린더" taborder="15" scrollbars="none" position="absolute 207 71 310 92"/>
                  <Static id="Static40" text="~" position="absolute 184 73 208 92" style="align:center middle;"/>
                  <Edit id="ed_upjangNm" taborder="16" readonly="true" onkeydown="ed_upjangNm_OnKeyDown" ontextchanged="ed_upjangNm_OnChanged" class="edt_WF_Essential" position="absolute 79 19 221 40"/>
                  <Button id="btn_upjangCd" taborder="17" tabstop="false" onclick="btn_upjangCd_OnClick" class="btn_WF_popSearch" position="absolute 220 19 241 40"/>
                  <Combo id="cbo_hallCd" taborder="18" innerdataset="@ds_sHallList" codecolumn="HALL_CD" datacolumn="HALL_NAME" type="filter" onitemchanged="cbo_hallCd_OnChanged" position="absolute 79 45 241 66" class="cmb_WF_Essential"/>
                  <Grid id="grd_upjangRecipeList" class="grd_WF_LineNone" taborder="19" binddataset="ds_upjangRecipeList" useinputpanel="false" position="absolute 10 307 479 596" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="90"/>
                          <Column size="182"/>
                          <Column size="70"/>
                          <Column size="90"/>
                          <Column size="80"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="checkbox" edittype="checkbox"/>
                          <Cell col="1" text="코드"/>
                          <Cell col="2" text="레시피명"/>
                          <Cell col="3" text="원가"/>
                          <Cell col="4" text="레시피분류"/>
                          <Cell col="5" text="레시피유형"/>
                          <Cell col="6" text="조리법유형"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                          <Cell col="1" text="bind:RECIPE_CD"/>
                          <Cell col="2" displaytype="text" text="bind:RECIPE_NAME"/>
                          <Cell col="3" displaytype="number" text="bind:MENU_COST" mask="#,##0"/>
                          <Cell col="4" displaytype="combo" text="bind:RECIPE_CLASS" combodataset="ds_grdRecipeClass" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="5" displaytype="combo" text="bind:RECIPE_TYPE" combodataset="ds_cboRecipeType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="6" displaytype="combo" text="bind:CUISINE_TYPE" combodataset="ds_cboCuisineType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static09" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 302 479 307" anchor="left top"/>
                  <Static id="Static04" text="레시피 목록" class="sta_WF_Title01" position="absolute 10 289 194 307" anchor="left top"/>
                  <Button id="btn_upjangInsertRecipe" taborder="20" text="레시피등록" class="btn_WF_Function" position="absolute 402 282 479 302" anchor="top right" onclick="Tab00_tabpage2_btn_upjangInsertRecipe_onclick"/>
                  <Radio id="rdo_recipeType" taborder="21" columncount="0" rowcount="0" index="0" codecolumn="codecolumn" datacolumn="datacolumn" value="1" direction="vertical" position="absolute 111 288 301 306">
                    <Dataset id="innerdataset">
                      <ColumnInfo>
                        <Column id="codecolumn" size="256"/>
                        <Column id="datacolumn" size="256"/>
                      </ColumnInfo>
                      <Rows>
                        <Row>
                          <Col id="codecolumn">1</Col>
                          <Col id="datacolumn">레시피 포함</Col>
                        </Row>
                        <Row>
                          <Col id="codecolumn">2</Col>
                          <Col id="datacolumn">레시피 미포함</Col>
                        </Row>
                      </Rows>
                    </Dataset>
                  </Radio>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tabpage3" text="레시피검색">
              <Layouts>
                <Layout>
                  <Static id="Static34" class="sta_WFSA_Labelbg" position="absolute 10 9 480 102"/>
                  <CheckBox id="chk_stdRecipe" taborder="9" text="표준레시피" value="0" truevalue="1" falsevalue="0" onclick="chk_recipe_onclick" position="absolute 268 71 354 91"/>
                  <CheckBox id="chk_upjangRecipe" taborder="10" text="업장표준레시피" value="0" truevalue="1" falsevalue="0" onclick="chk_recipe_onclick" position="absolute 359 71 469 91"/>
                  <Static id="Static35" text="W10" visible="false" position="absolute 25 9 464 19" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static36" text="W10" visible="false" position="absolute 25 92 464 102" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static37" text="W15" visible="false" position="absolute 10 9 25 102" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static38" text="W15" visible="false" position="absolute 464 9 479 102" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static39" text="W05." visible="false" position="absolute 25 40 464 45" style="background:#ff000055;align:center middle;"/>
                  <Combo id="cbo_recipeNm" taborder="0" imemode="hangul" innerdataset="ds_cboRecipeNm" codecolumn="NM" datacolumn="NM" type="filter" displayrowcount="15" ontextchanged="cbo_recipeNm_ontextchanged" onitemchanged="cbo_recipeNm_onitemchanged" onkillfocus="cbo_recipeNm_onkillfocus" onkeydown="cbo_recipeNm_onkeydown" position="absolute 25 19 162 40" userchange="0"/>
                  <Combo id="cbo_recipeClass" taborder="2" innerdataset="ds_cboRecipeClass" codecolumn="CD" datacolumn="NM" position="absolute 176 19 313 40"/>
                  <Combo id="cbo_recipeType" taborder="3" innerdataset="ds_cboRecipeType" codecolumn="CODE" datacolumn="CODE_NAME" onitemchanged="cbo_recipeType_onitemchanged" position="absolute 327 19 464 40"/>
                  <Combo id="cbo_material" taborder="5" innerdataset="ds_cboMaterial" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 176 45 313 66"/>
                  <Combo id="cbo_element" taborder="6" innerdataset="ds_cboElement" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 327 45 464 66"/>
                  <Combo id="cbo_cuisineType" taborder="4" innerdataset="ds_cboCuisineType" codecolumn="CODE" datacolumn="CODE_NAME" position="absolute 25 45 162 66"/>
                  <MaskEdit id="MaskEdit00" taborder="7" position="absolute 70 71 142 92"/>
                  <MaskEdit id="MaskEdit01" taborder="8" position="absolute 167 71 239 92"/>
                  <Static id="Static40" text="~" position="absolute 143 73 167 92" style="align:center middle;"/>
                  <Grid id="grd_recipeList" taborder="1" binddataset="ds_sRecipeList" autoenter="select" useinputpanel="false" position="absolute 10 133 480 596" style="background:white;" anchor="all">
                    <Formats>
                      <Format id="default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="54"/>
                          <Column size="80"/>
                          <Column size="148"/>
                          <Column size="66"/>
                          <Column size="84"/>
                          <Column size="110"/>
                          <Column size="110"/>
                          <Column size="80"/>
                        </Columns>
                        <Rows>
                          <Row size="24" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="구분"/>
                          <Cell col="2" text="코드"/>
                          <Cell col="3" text="레시피명"/>
                          <Cell col="4" text="원가"/>
                          <Cell col="5" text="레시피분류"/>
                          <Cell col="6" text="레시피유형"/>
                          <Cell col="7" text="조리법유형"/>
                          <Cell col="8" text="선호도"/>
                        </Band>
                        <Band id="body">
                          <Cell style="background:white;background2:white;" expr="expr:currow + 1"/>
                          <Cell col="1" style="background:white;background2:white;" text="bind:GUBUN"/>
                          <Cell col="2" style="padding: ;background:white;background2:white;backgroundimage:EXPR(DI_MON == 1 ? 'theme://images/new/grd_WF_N.png' : '');" text="bind:RECIPE_CD"/>
                          <Cell col="3" displaytype="text" edittype="expand" style="background:white;background2:white;backgroundimage: ;" text="bind:RECIPE_NAME" expandshow="show" expandsize="20" expandimage="URL('theme://images/new/grd_WF_Expand.png')"/>
                          <Cell col="4" displaytype="number" style="background:white;background2:white;" text="bind:RECIPE_COST"/>
                          <Cell col="5" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:RECIPE_CLASS" combodataset="ds_grdRecipeClass" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="6" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:RECIPE_TYPE" combodataset="ds_cboRecipeType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="7" displaytype="combo" style="align:left;background:white;background2:white;" text="bind:CUISINE_TYPE" combodataset="ds_cboCuisineType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="8" style="background:white;background2:white;"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static41" text="W05." visible="false" position="absolute 25 66 464 71" style="background:#ff000055;align:center middle;"/>
                  <Static id="Static42" text="원가" class="sta_WFSA_label" position="absolute 25 72 77 93" anchor="left top"/>
                  <Button id="btn_insertRecipe" taborder="11" text="레시피등록" class="btn_WF_Function" position="absolute 402 108 479 128" anchor="top right" onclick="Tab00_tabpage3_btn_insertRecipe_onclick"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 102 479 115" anchor="left top"/>
                  <Static id="Static09" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 128 479 133" anchor="left top"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Static id="Static50" text="w05" class="Guide01_AreaRed" visible="false" position="absolute 736 84 746 710" anchor="left top"/>
        <Grid id="grd_recipeList" taborder="4" useinputpanel="false" position="absolute 0 298 736 678" autofittype="col" anchor="all" binddataset="ds_recipeList" class="grd_WF_LineNone" autoenter="select" oncellclick="grd_recipeList_oncellclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="35"/>
                <Column size="40"/>
                <Column size="40"/>
                <Column size="27"/>
                <Column size="80"/>
                <Column size="200"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="90"/>
                <Column size="90"/>
                <Column size="90"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" class="grd_WF_Essential" text="순서"/>
                <Cell col="2" class="grd_WF_Essential" text="구축"/>
                <Cell col="3" colspan="2" text="코드" taborder="undefined"/>
                <Cell col="5" text="레시피명"/>
                <Cell col="6" text="원가"/>
                <Cell col="7" class="grd_WF_Essential" text="식수"/>
                <Cell col="8" text="레시피분류"/>
                <Cell col="9" text="레시피유형"/>
                <Cell col="10" text="조리법유형"/>
              </Band>
              <Band id="body">
                <Cell expr="expr:currow + 1"/>
                <Cell col="1" displaytype="number" edittype="masknumber" style="align:center;" text="bind:RECIPE_SEQ" editautoselect="true"/>
                <Cell col="2" displaytype="checkbox" edittype="checkbox" text="bind:CHK"/>
                <Cell col="3" displaytype="image" text="theme://images/new/grd_WF_ExpandImageX.png"/>
                <Cell col="4" text="bind:RECIPE_CD"/>
                <Cell col="5" displaytype="text" edittype="none" text="bind:RECIPE_NAME" expandshow="hide" expandsize="22"/>
                <Cell col="6" displaytype="number" text="bind:RECIPE_COST"/>
                <Cell col="7" displaytype="number" edittype="masknumber" text="bind:EXPECT_SALE_QTY" editautoselect="true"/>
                <Cell col="8" displaytype="combo" text="bind:RECIPE_CLASS" combodataset="ds_grdRecipeClass" combocodecol="CODE" combodatacol="CODE_NAME"/>
                <Cell col="9" displaytype="combo" text="bind:RECIPE_TYPE" combodataset="ds_cboRecipeType" combocodecol="CODE" combodatacol="CODE_NAME"/>
                <Cell col="10" displaytype="combo" text="bind:CUISINE_TYPE" combodataset="ds_cboCuisineType" combocodecol="CODE" combodatacol="CODE_NAME"/>
              </Band>
              <Band id="summary">
                <Cell colspan="6" style="align:center;" text="합계" taborder="undefined"/>
                <Cell col="6" displaytype="number" text="expr:getSum('RECIPE_COST')"/>
                <Cell col="7"/>
                <Cell col="8"/>
                <Cell col="9"/>
                <Cell col="10"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static14" text="레시피 목록" class="sta_WF_Title01" position="absolute 0 280 184 298" anchor="left top"/>
        <Static id="Static18" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 293 636 298" anchor="left top"/>
        <Static id="Static20" visible="false" position="absolute 747 112 757 710" style="background:#ff000033;font:Dotum,8;"/>
        <Static id="Static21" visible="false" position="absolute 747 699 1236 709" style="background:#ff000033;font:Dotum,8;"/>
        <Static id="Static25" visible="false" position="absolute 1226 112 1236 710" style="background:#ff000033;font:Dotum,8;"/>
        <Static id="Static26" visible="false" position="absolute 747 102 1236 112" style="background:#ff000033;font:Dotum,8;"/>
        <Button id="btn_searchRecipe" taborder="32" text="조회" onclick="btn_searchRecipe_onclick" class="btn_WF_Function" position="absolute 1184 77 1237 97" anchor="top right"/>
        <Button id="btn_modifyRecipe" taborder="34" text="레시피수정" class="btn_WF_Function" position="absolute 663 273 736 293" anchor="top right" onclick="btn_modifyRecipe_onclick"/>
        <Static id="Static12" text="계획 식재료율 (%)" class="sta_WFDA_Label01" position="absolute 0 683 120 710" anchor="left bottom" style="background:lavender;font:Gulim,9;"/>
        <Static id="Static09" text="실적 식재료율 (%)" class="sta_WFDA_Label01" position="absolute 210 683 330 710" anchor="left bottom" style="background:lavender;font:Gulim,9;"/>
        <Static id="Static11" text="초과율 (%P)" class="sta_WFDA_Label01" position="absolute 420 683 532 710" anchor="left bottom" style="background:lavender;font:Gulim,9;"/>
        <Edit id="edt_rate03" taborder="35" readonly="true" enable="false" position="absolute 531 683 644 710" anchor="left bottom" style=":disabled {align:center middle;font:Gulim,9,bold;}"/>
        <Edit id="edt_rate02" taborder="36" readonly="true" enable="false" position="absolute 329 683 421 710" anchor="left bottom" style=":disabled {align:center middle;font:Gulim,9,bold;}"/>
        <Edit id="edt_rate01" taborder="37" readonly="true" enable="false" position="absolute 119 683 211 710" anchor="left bottom" style=":disabled {align:center middle;font:Gulim,9,bold;}"/>
        <Static id="Static27" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 678 636 683" anchor="left top"/>
        <Button id="btn_allDelete" taborder="38" text="일괄삭제" onclick="btn_allDelete_onclick" class="btn_WF_Function" position="absolute 596 273 661 293" anchor="top right"/>
        <Button id="btn_next" taborder="39" onclick="btn_next_onclick" class="btn_WF_rightMove" position="absolute 730 40 750 61" anchor="default"/>
        <Button id="btn_prev" taborder="40" onclick="btn_prev_onclick" class="btn_WF_leftMove" position="absolute 707 40 727 61" anchor="default"/>
        <Button id="btn_upjangRecipe" taborder="41" text=" 업장레시피구축" class="btn_WF_Function" position="absolute 497 273 594 293" anchor="top right" onclick="btn_upjangRecipe_onclick"/>
        <Button id="btn_searchRate" taborder="42" text="식재료율조회" onclick="btn_searchRate_onclick" class="btn_WF_Function" position="absolute 647 686 736 706" anchor="left bottom"/>
        <Button id="btn_costReflash" taborder="43" text="원가갱신" class="btn_WF_Function" position="absolute 430 273 495 293" anchor="top right" onclick="btn_costReflash_onclick"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" onvaluechanged="ds_cond_onvaluechanged">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="UPJANGNM" type="STRING" size="256"/>
          <Column id="MENU_DATE" type="STRING" size="256"/>
          <Column id="MENU_CD" type="STRING" size="256"/>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="GOAL_COST_RATE" type="STRING" size="256"/>
          <Column id="EXPECT_SALE_QTY" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="MENU_CLASS" type="STRING" size="256"/>
          <Column id="SINGLE_MENU_CD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_master" onrowposchanged="ds_master_onrowposchanged">
        <ColumnInfo>
          <Column id="MENU_FEATURE" type="STRING" size="256"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
          <Column id="SUBINV_NAME" size="256" type="STRING"/>
          <Column id="EXPECT_MEAL_QTY" size="256" type="STRING"/>
          <Column id="GOAL_COST_RATE" size="256" type="STRING"/>
          <Column id="SALE_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_CD" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upjangRecipe">
        <ColumnInfo>
          <Column id="RECIPE_CLASS" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_hallList">
        <ColumnInfo>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="HALL_NAME" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SubinvCode"/>
      <Dataset id="ds_recipeList">
        <ColumnInfo>
          <Column id="CLASS_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="EXPECT_SALE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="TYPE_NAME" size="100" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_PRICE" size="256" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="BIGDECIMAL"/>
          <Column id="CHK" size="256" type="STRING"/>
          <Column id="ORDER_YN" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboRecipeNm"/>
      <Dataset id="ds_cboRecipeClass">
        <ColumnInfo>
          <Column id="CD" type="STRING" size="256"/>
          <Column id="NM" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboRecipeType">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboCuisineType">
        <ColumnInfo>
          <Column id="CODE" size="255" type="STRING"/>
          <Column id="CODE_NAME" size="255" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboMaterial">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboElement">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recipeCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="STD_CHK" type="STRING" size="256"/>
          <Column id="UPJANG_CHK" type="STRING" size="256"/>
          <Column id="ENF_CHK" type="STRING" size="256"/>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="MENU_DATE" type="STRING" size="256"/>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="RECIPE_NAME1" type="STRING" size="256"/>
          <Column id="RECIPE_NAME2" type="STRING" size="256"/>
          <Column id="RECIPE_NAME3" type="STRING" size="256"/>
          <Column id="RECIPE_NAME4" type="STRING" size="256"/>
          <Column id="RECIPE_NAME5" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE" type="STRING" size="256"/>
          <Column id="MAIN_ITEM_CODE1" type="STRING" size="256"/>
          <Column id="RESP_NUT1" type="STRING" size="256"/>
          <Column id="START_COST" type="STRING" size="256"/>
          <Column id="END_COST" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_grdRecipeClass">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sRecipeList">
        <ColumnInfo>
          <Column id="CLASS_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="EXPECT_SALE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="TYPE_NAME" size="100" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_PRICE" size="256" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="BIGDECIMAL"/>
          <Column id="CHK" size="256" type="STRING"/>
          <Column id="ORDER_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboStdMenuClass">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboStdMenuList">
        <ColumnInfo>
          <Column id="MENU_CD" size="256" type="STRING"/>
          <Column id="MENU_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_stdMenuCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="MENU_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="MENU_CD" type="STRING" size="256"/>
          <Column id="RECIPE_SEQ" type="STRING" size="256"/>
          <Column id="SINGLE_MENU_CD" type="STRING" size="256"/>
          <Column id="MENU_NAME" type="STRING" size="256"/>
          <Column id="FROM_COST" type="STRING" size="256"/>
          <Column id="TO_COST" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upjangMenuCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_upjangMenuCond_oncolumnchanged">
        <ColumnInfo>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="MENU_CD" type="STRING" size="256"/>
          <Column id="RECIPE_SEQ" type="STRING" size="256"/>
          <Column id="SINGLE_MENU_CD" type="STRING" size="256"/>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="UPJANGNM" type="STRING" size="256"/>
          <Column id="HALL_CD" type="STRING" size="256"/>
          <Column id="UPJANG_NM" type="STRING" size="256"/>
          <Column id="FROM_DATE" type="STRING" size="256"/>
          <Column id="TO_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="MENU_DATE" type="STRING" size="256"/>
          <Column id="MENU_FEATURE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_stdMenuList" onrowposchanged="ds_list_OnRowPosChanged">
        <ColumnInfo>
          <Column id="MENU_COST" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_NAME" size="50" type="STRING"/>
          <Column id="PHOTO_PATH_1" size="200" type="STRING"/>
          <Column id="PHOTO_PATH_2" size="200" type="STRING"/>
          <Column id="PHOTO_TITLE_1" size="200" type="STRING"/>
          <Column id="PHOTO_TITLE_2" size="200" type="STRING"/>
          <Column id="RECIPE_INFO" size="4000" type="STRING"/>
          <Column id="SINGLE_MENU_CD" size="20" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_stdRecipeList">
        <ColumnInfo>
          <Column id="CLASS_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="EXPECT_SALE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="TYPE_NAME" size="100" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_PRICE" size="256" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="BIGDECIMAL"/>
          <Column id="CHK" size="256" type="STRING"/>
          <Column id="ORDER_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_copyCond">
        <ColumnInfo>
          <Column id="UPJANG" size="6" type="INT"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="MENU_CD" size="256" type="STRING"/>
          <Column id="SINGLE_MENU_CD" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
          <Column id="EXPECT_SALE_QTY" size="256" type="STRING"/>
          <Column id="SRC_UPJANG" type="STRING" size="256"/>
          <Column id="SRC_MENU_CD" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upjangRecipeList">
        <ColumnInfo>
          <Column id="CLASS_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="EXPECT_SALE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="TYPE_NAME" size="100" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_PRICE" size="256" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="BIGDECIMAL"/>
          <Column id="CHK" size="256" type="STRING"/>
          <Column id="ORDER_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_masterValid" oncolumnchanged="ds_master_OnColumnChanged">
        <ColumnInfo>
          <Column id="MENU_FEATURE" type="STRING" size="256"/>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
          <Column id="SUBINV_NAME" size="256" type="STRING"/>
          <Column id="EXPECT_MEAL_QTY" size="256" type="STRING"/>
          <Column id="GOAL_COST_RATE" size="256" type="STRING"/>
          <Column id="SALE_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_CD" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="EXPECT_MEAL_QTY">title:식수,required:true,min:0</Col>
            <Col id="GOAL_COST_RATE">title:목표식재료율,required:true,min:0</Col>
            <Col id="SALE_PRICE">title:식단가,required:true,min:0</Col>
            <Col id="HALL_CD">title:식당명,required:true</Col>
            <Col id="SUBINV_CODE">title:입고처,required:true</Col>
            <Col id="MENU_FEATURE">title:행사명,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_menuList">
        <ColumnInfo>
          <Column id="MENU_CD" size="256" type="STRING"/>
          <Column id="MENU_NAME" size="256" type="STRING"/>
          <Column id="MENU_FEATURE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_upjangMenuList" onrowposchanged="ds_list_OnRowPosChanged">
        <ColumnInfo>
          <Column id="COST_RATE1" size="22" type="BIGDECIMAL"/>
          <Column id="COST_RATE2" size="22" type="BIGDECIMAL"/>
          <Column id="CUR_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="HALL_CD" size="20" type="STRING"/>
          <Column id="HALL_NAME" size="50" type="STRING"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="MENU_DATE" size="8" type="STRING"/>
          <Column id="MENU_FEATURE" size="200" type="STRING"/>
          <Column id="PAST_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_INFO" size="4000" type="STRING"/>
          <Column id="SALE_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sHallList">
        <ColumnInfo>
          <Column id="HALL_CD" size="256" type="STRING"/>
          <Column id="HALL_NAME" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_rateMonth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="PLAN_RATE" type="STRING" size="256"/>
          <Column id="RESULT_RATE" type="STRING" size="256"/>
          <Column id="DIFF_RATE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recipeListCopy">
        <ColumnInfo>
          <Column id="CLASS_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_NAME" size="100" type="STRING"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="EXPECT_SALE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="TYPE_NAME" size="100" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_PRICE" size="256" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="BIGDECIMAL"/>
          <Column id="CHK" size="256" type="STRING"/>
          <Column id="ORDER_YN" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_input">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="SDATE" size="256" type="STRING"/>
          <Column id="O_RTN" size="256" type="STRING"/>
          <Column id="O_RTNMSG" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_return">
        <ColumnInfo>
          <Column id="RTN" size="256" type="STRING"/>
          <Column id="RTNMSG" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="RTN"/>
            <Col id="RTNMSG"/>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item7" compid="Tab00.tabpage3.chk_stdRecipe" propid="value" datasetid="ds_recipeCond" columnid="STD_CHK"/>
      <BindItem id="item8" compid="Tab00.tabpage3.chk_upjangRecipe" propid="value" datasetid="ds_recipeCond" columnid="UPJANG_CHK"/>
      <BindItem id="item0" compid="Tab00.tabpage3.cbo_recipeClass" propid="value" datasetid="ds_recipeCond" columnid="RECIPE_CLASS"/>
      <BindItem id="item4" compid="Tab00.tabpage3.cbo_recipeType" propid="value" datasetid="ds_recipeCond" columnid="RECIPE_TYPE"/>
      <BindItem id="item5" compid="Tab00.tabpage3.cbo_material" propid="value" datasetid="ds_recipeCond" columnid="MAIN_ITEM_CODE1"/>
      <BindItem id="item6" compid="Tab00.tabpage3.cbo_element" propid="value" datasetid="ds_recipeCond" columnid="RESP_NUT1"/>
      <BindItem id="item10" compid="Tab00.tabpage3.cbo_cuisineType" propid="value" datasetid="ds_recipeCond" columnid="CUISINE_TYPE"/>
      <BindItem id="item11" compid="Tab00.tabpage3.MaskEdit00" propid="value" datasetid="ds_recipeCond" columnid="START_COST"/>
      <BindItem id="item12" compid="Tab00.tabpage3.MaskEdit01" propid="value" datasetid="ds_recipeCond" columnid="END_COST"/>
      <BindItem id="item21" compid="Tab00.tabpage1.edt_stdCostFrom" propid="value" datasetid="ds_stdMenuCond" columnid="FROM_COST"/>
      <BindItem id="item22" compid="Tab00.tabpage1.edt_stdCostTo" propid="value" datasetid="ds_stdMenuCond" columnid="TO_COST"/>
      <BindItem id="item13" compid="cal_menuDate" propid="text" datasetid="ds_cond" columnid="MENU_DATE"/>
      <BindItem id="item14" compid="Tab00.tabpage1.cbo_stdMenuClass" propid="value" datasetid="ds_stdMenuCond" columnid="MENU_CLASS"/>
      <BindItem id="item15" compid="Tab00.tabpage1.cbo_stdMenuName" propid="value" datasetid="ds_stdMenuCond" columnid="MENU_CD"/>
      <BindItem id="item16" compid="Tab00.tabpage1.cbo_recipeNm" propid="value" datasetid="ds_stdMenuCond" columnid="RECIPE_NAME"/>
      <BindItem id="item9" compid="Tab00.tabpage2.cbo_upjangMenuFeature" propid="value" datasetid="ds_upjangMenuCond" columnid="MENU_CD"/>
      <BindItem id="item17" compid="Tab00.tabpage2.cbo_recipeNm" propid="value" datasetid="ds_upjangMenuCond" columnid="RECIPE_NAME"/>
      <BindItem id="item1" compid="Tab00.tabpage2.cal_fromDate" propid="text" datasetid="ds_upjangMenuCond" columnid="FROM_DATE"/>
      <BindItem id="item2" compid="Tab00.tabpage2.cal_toDate" propid="text" datasetid="ds_upjangMenuCond" columnid="TO_DATE"/>
      <BindItem id="ed_upjangNm_value" compid="Tab00.tabpage2.ed_upjangNm" propid="value" datasetid="ds_upjangMenuCond" columnid="UPJANGNM"/>
      <BindItem id="cbo_hallCd_value" compid="Tab00.tabpage2.cbo_hallCd" propid="value" datasetid="ds_upjangMenuCond" columnid="HALL_CD"/>
      <BindItem id="item3" compid="edt_rate03" propid="value" datasetid="ds_rateMonth" columnid="DIFF_RATE"/>
      <BindItem id="item18" compid="edt_rate02" propid="value" datasetid="ds_rateMonth" columnid="RESULT_RATE"/>
      <BindItem id="item19" compid="edt_rate01" propid="value" datasetid="ds_rateMonth" columnid="PLAN_RATE"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";

/******************************************************************************************
 * 시스템구분 : 메뉴관리/식단관리
 * 프로그램명 : FSM90080E.XML
 * 기ㅡㅡㅡ능 : 식단등록(행사식)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-09-15
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************/

//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
var v_SearchYN = "N";

//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(this);

	// X-Framework : Action 정보 생성
	fsp_init(this);
	
	// 초기화
	fn_init();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_init()
 * 기ㅡㅡㅡ능 : 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-09-14
 ******************************************************************************************/
function fn_init()
{
	// 조회조건 초기화
	ds_cond.clearData();
	ds_cond.addRow();

	// 표준식단 조회조건 초기화
	ds_stdMenuCond.clearData();
	ds_stdMenuCond.addRow();

	// 업장식단 조회조건 초기화
	ds_upjangMenuCond.clearData();
	ds_upjangMenuCond.addRow();

	// 레시피 조회조건 초기화
	ds_recipeCond.clearData();
	ds_recipeCond.addRow();

	// 권한처리
	edt_tm.applyAuthLevel(cbo_mu);
	edt_upjang.applyAuthLevel(edt_tm);
	
	// 일자 초기화
	cal_menuDate.fn_initMonthCal(this, gfn_today(), "", ds_cond, "MENU_DATE", "Y");
	Tab00.tabpage2.cal_fromDate.fn_initMonthCal(this, gfn_left(gfn_today(),6) + "01", "", ds_upjangMenuCond, "FROM_DATE", "Y");
	Tab00.tabpage2.cal_toDate.fn_initMonthCal(this, gfn_today(), "", ds_upjangMenuCond, "TO_DATE", "Y");
	
	// 레시피검색 표준/업장레시피 체크박스 체크
	Tab00.tabpage3.chk_stdRecipe.value = 1;
	Tab00.tabpage3.chk_upjangRecipe.value = 1;
	
	// 업장별 사용레시피분류
	fsp_clear(this);
	ds_cboRecipeClass.clearData();
	fsp_addSearch(this, "fs/fsm:FSM00060E_S010");
	fsp_callService(this, "", "", "ds_RecipeClass=ds_cond", "ds_cboRecipeClass=ds_RecipeClass", "", "fn_callbackRecipeClass", "", false);
	
	// 업장메뉴 검색탭 업장정보 세팅
	ds_upjangMenuCond.setColumn(0, "UPJANG", ds_cond.getColumn(0, "UPJANG"));
	ds_upjangMenuCond.setColumn(0, "UPJANGNM", ds_cond.getColumn(0, "UPJANGNM"));
	
	// 공통코드 조회
	var v_ds;
	var v_fil_cond;
	
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsr:FSR90010E_S001");	// 레시피명
	fsp_callService(this, "", "", "", "ds_cboRecipeNm=ds_RecipeNM", "", "fn_callbackRecipeNm");
	
	v_ds = fn_common_code("'FS0001','FS0002','FS0003','FS0004','FS0006','FS0028'","","","non","Y");

	// 레시피분류(GROUP_CODE : 'FS0001')
	v_fil_cond = "GROUP_CODE=='FS0001'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_grdRecipeClass, v_ds.name);
		
	// 레시피유형(GROUP_CODE : 'FS0002')
	v_fil_cond = "GROUP_CODE=='FS0002'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboRecipeType, v_ds.name);
	ds_cboRecipeType.insertRow(0);
	ds_cboRecipeType.setColumn(0, "CODE", "");
	ds_cboRecipeType.setColumn(0, "CODE_NAME", "== 레시피유형 ==");
	Tab00.tabpage3.cbo_recipeType.value = "";
	
	// 조리법유형(GROUP_CODE : 'FS0003')
	v_fil_cond = "GROUP_CODE=='FS0003'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboCuisineType, v_ds.name);
	ds_cboCuisineType.insertRow(0);
	ds_cboCuisineType.setColumn(0, "CODE", "");
	ds_cboCuisineType.setColumn(0, "CODE_NAME", "== 조리법유형 ==");
	Tab00.tabpage3.cbo_cuisineType.value = "";

	// 주재료군(GROUP_CODE : 'FS0006')
	v_fil_cond = "GROUP_CODE=='FS0006'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboMaterial, v_ds.name);
	ds_cboMaterial.insertRow(0);
	ds_cboMaterial.setColumn(0, "CODE", "");
	ds_cboMaterial.setColumn(0, "CODE_NAME", "== 주재료군 ==");
	Tab00.tabpage3.cbo_material.value = "";
	
	// 대표영양성분(GROUP_CODE : 'FS0004')
	v_fil_cond = "GROUP_CODE=='FS0004'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboElement, v_ds.name);
	ds_cboElement.insertRow(0);
	ds_cboElement.setColumn(0, "CODE", "");
	ds_cboElement.setColumn(0, "CODE_NAME", "== 대표영양성분 ==");
	Tab00.tabpage3.cbo_element.value = "";
	
	// 개별식단 복사 :'FS0028'
	v_fil_cond = "GROUP_CODE == 'FS0028'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboStdMenuClass, v_ds);
	ds_cboStdMenuClass.filter("CODE>'0'");
	Tab00.tabpage1.cbo_stdMenuClass.index = 0;
	fn_stdMenuSearch();
}

function fn_callbackRecipeNm(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	ds_cboRecipeNm.setColumn(0, "NM", "");
	Tab00.tabpage3.cbo_recipeNm.index = 0;
}

function fn_callbackRecipeClass(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	ds_cboRecipeClass.insertRow(0);
	ds_cboRecipeClass.setColumn(0, "CD", "");
	ds_cboRecipeClass.setColumn(0, "NM", "== 레시피분류 ==");
	Tab00.tabpage3.cbo_recipeClass.index = 0;
}

function fn_callback(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_initData()
 * 기ㅡㅡㅡ능 : 화면 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-09-15
 ******************************************************************************************/
function fn_initData() {
    ds_cond.setColumn(0, "MENU_CD", "");
	ds_recipeList.clearData();
	ds_stdMenuList.clearData();
	ds_upjangMenuList.clearData();
	ds_sRecipeList.clearData();
	ds_stdRecipeList.clearData();
	ds_upjangRecipeList.clearData();
}

//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,출력)
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_search()
 * 기ㅡㅡㅡ능 : 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-09-15
 ******************************************************************************************/
function fn_search()
{
	// 업장 체크
	if(gfn_isNull(ds_cond.getColumn(0, "UPJANG")))
	{
		g_Message("EE",	"업장을 입력해주세요.");
		return;
	}
	
	// 데이터 초기화
	fn_initData();
	
	fsp_clear(this);
    fsp_addSearch(this, "fs/fsm:FSM00200E_S007");  // 업장에 해당하는 recipe 클래스 가져오기
    fsp_addSearch(this, "fs/fsm:FSM00200E_S002");  // 사업장의 식당명 조회
    fsp_addSearch(this, "fs/fsm:FSM00200E_S014");  // 사업장의 입고처 조회
	fsp_addSearch(this, "fs/fsm:FSM00200E_S003");  // 사업장 식단 조회
	fsp_callService(this, "", "", "ds_cond=ds_cond ds_in=ds_cond", "ds_upjangRecipe=ds_upjangRecipe ds_hallList=ds_hallList ds_SubinvCode=ds_SubinvCode ds_master=ds_list", "", "fn_callbackSearch");
}

function fn_callbackSearch(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	v_SearchYN = "Y";
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_searchRateMonth
 * 기ㅡㅡㅡ능 : 하단 식재료율 표시방법 처리 (추후 색상변경이 필요할 경우 사용하세요.)
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_searchRateMonth() 
{
	// 계획식재료율
	if(Number(edt_rate01.value) > 0) edt_rate01.style.color = "black";
	else if(Number(edt_rate01.value) < 0) edt_rate01.style.color = "black";
	else edt_rate01.style.color = "black";
	
	// 실적식재료율
	if(Number(edt_rate02.value) > 0) edt_rate02.style.color = "black";
	else if(Number(edt_rate02.value) < 0) edt_rate02.style.color = "black";
	else edt_rate02.style.color = "black";

	// 달성율
	if(Number(edt_rate03.value) > 0) 
	{
		edt_rate03.style.color = "blue";
	}
	else if(Number(edt_rate03.value) < 0) 
	{
		edt_rate03.style.color = "red";
	}
	else 
	{
		edt_rate03.style.color = "black";
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_insert()
 * 기ㅡㅡㅡ능 : 입력
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-09-15
 ******************************************************************************************/
function fn_insert()
{
	if(v_SearchYN == "Y") 
	{
		var iCnt = 0;
		for(var i=ds_master.getRowCount(); i>=0; i--)
		{
			if(gfn_isNull(ds_master.getColumn(i, "MENU_CD")))
			{
				iCnt++;
			}
		}
		
		if(iCnt > 1)
		{
			g_Message("EE", "입력중인 식단이 존재합니다. 저장 후 입력해주세요.");
			return;
		}
	
		if( gfn_length(ds_cond.getColumn(0, "UPJANG"))== 0 ) {
			gfn_alert(gfn_msg(SCCW00006));
			return;
		}
		
		ds_master.enableevent = false;
		var nRow = ds_master.addRow();
		ds_master.setColumn(nRow, "UPJANG", ds_cond.getColumn(0, "UPJANG"));
		ds_master.setColumn(nRow, "MENU_DATE", ds_cond.getColumn(0, "MENU_DATE"));
		ds_master.enableevent = true;
	}
	else
	{
		g_Message("EE", "조회 후 입력이 가능합니다.");
		return;
	}		
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_save()
 * 기ㅡㅡㅡ능 : 저장
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-09-15
 ******************************************************************************************/
function fn_save()
{
	// 변경 데이터 체크
	if(!gfn_dsIsUpdated(ds_master) && !gfn_dsIsUpdated(ds_recipeList))
	{
		g_Message("EE", "변경된 데이터가 없습니다.");
		return false;
	}
	
	if(gfn_dsIsUpdated(ds_master))
	{
		// 유효성 체크
		if (gfn_validCheck(ds_master, ds_masterValid, true) == false) return;
		
		// 식단 저장
		jsp_transaction(this, "FSM00200E_T001","U_svc::fs/fsm/FSM00200E_T001.jsp", "ds_master=ds_master:U ds_cond=ds_cond", "", "", "fn_callbackMenuSave", false, false, false);
	}
	else
	{
		fn_callbackMenuSave(0, '');
	}
	
}

function fn_callbackMenuSave(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	if(gfn_dsIsUpdated(ds_recipeList))
	{
		fsp_clear(this);
		fsp_addSave(this, "", "fs/fsm:FSM00200E_U002", "", "", "", "", "");
		fsp_callService(this, "", "", "ds_cond=ds_cond ds_list=ds_recipeList:U", "", "", "fn_callbackRecipeSave");
	}
	else
	{
		g_Message("02", "저장되었습니다.");
		fn_search();
	}
}

function fn_callbackRecipeSave(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}

	g_Message("02", "저장되었습니다.");
	fn_search();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_delete()
 * 기ㅡㅡㅡ능 : 삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-09-15
 ******************************************************************************************/
function fn_delete()
{
	if(!g_Confirm("01", "[" + ds_master.getColumn(ds_master.rowposition, "MENU_FEATURE") + "] 식단을 삭제하시겠습니까?")) 
	{
		return;
	}

	var args = "UPJANG=" + ds_cond.getColumn(0, "UPJANG");
	args    += " MENU_CD=" + ds_master.getColumn(ds_master.rowposition, "MENU_CD");
	
	fsp_clear(this);
	fsp_addSingle(this, "fs/fsm:FSM00200E_D001");  // 레시피 전체 삭제 
	fsp_addSingle(this, "fs/fsm:FSM00200E_D002");  // 레시피 품목 삭제 
	fsp_addSingle(this, "fs/fsm:FSM00200E_D003");  // 레시피 조리법 삭제 
	fsp_addSingle(this, "fs/fsm:FSM00200E_D004");  // 메뉴 삭제 
	fsp_callService(this, "", "", "", "", args, "fn_callbackMenuDelete", true);
}

function fn_callbackMenuDelete(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	g_Message("02", "삭제되었습니다.");
	fn_search();
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_changeUpjang()
 * 기ㅡㅡㅡ능 : 사업장 변경시 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function fn_changeUpjang()
{
	// 업장별 사용레시피분류
	fsp_clear(this);
	ds_cboRecipeClass.clearData();
	fsp_addSearch(this,"fs/fsm:FSM00060E_S010");
	fsp_callService(this, "", "", "ds_RecipeClass=ds_cond", "ds_cboRecipeClass=ds_RecipeClass", "", "fn_callbackRecipeClass", "", true);

	v_SearchYN = "N";
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_tmChange(obj, data)
 * 기ㅡㅡㅡ능 : 운영부서 변경시 사업장 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function fn_tmChange(obj, data)
{
	if(gfn_isNull(edt_tm.getTmCode()))
	{
		cbo_mu.setMuCode("");
	}
	edt_upjang.setUpjangCode("");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_menuList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 메뉴 더블클릭시 레시피 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function grd_menuList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{

}

function fn_searchRecipe()
{
	ds_recipeList.clearData();
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00200E_S008");  // 사업장 식단 조회
	fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_recipeList=ds_list", "", "fn_callbackSearch");
}

function btn_searchRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
	// 표준식단 검색
	if(Tab00.tabindex == 0)
	{
		ds_stdMenuList.clearData();
	
		fsp_clear(this); 
		fsp_addSearch(this, "fs/fsm:FSM00200E_S005");												
		fsp_callService(this, "", "", "ds_cond=ds_stdMenuCond", "ds_stdMenuList=ds_list", "", "fn_callback", true);
	}
	// 업장식단 검색
	else if(Tab00.tabindex == 1)
	{
		// 필수입력체크 : 사업장
		if(gfn_isNull(ds_upjangMenuCond.getColumn(0, "UPJANG")))
		{
			return;
		}
		
		// 필수입력체크 : 사업장
		if(gfn_isNull(ds_upjangMenuCond.getColumn(0, "HALL_CD")))
		{
			return;
		}

		ds_upjangMenuCond.setColumn(0,"MENU_FEATURE", gfn_trim(Tab00.tabpage2.cbo_upjangMenuFeature.text));
		
		// 정보 초기화 
		ds_upjangMenuList.clearData();
		
		fsp_clear(this); 
		fsp_addSearch(this, "fs/fsm:FSM00200E_S010");												
		fsp_callService(this, "", "", "ds_cond=ds_upjangMenuCond", "ds_upjangMenuList=ds_list", "", "fn_callback", true);
	}
	// 레시피 검색
	else if(Tab00.tabindex == 2)
	{
		// 제공일 세팅
		ds_recipeCond.setColumn(0, "MENU_DATE", cal_menuDate.fn_getValue());
		
		// 레시피명 세팅
		var sRecipeName = gfn_replace(Tab00.tabpage3.cbo_recipeNm.value, "== 레시피명 ==", "");
		ds_recipeCond.setColumn(0,"RECIPE_NAME", sRecipeName);

		ds_recipeCond.setColumn(0, "UPJANG"     , ds_cond.getColumn(0, "UPJANG"));       // 사업장코드
		ds_recipeCond.setColumn(0, "HALL_CD"    , ds_cond.getColumn(0, "HALL_CD"));      // 식당코드
		ds_recipeCond.setColumn(0, "SUBINV_CODE", ds_cond.getColumn(0, "SUBINV_CODE"));  // 창고코드

		ds_sRecipeList.clearData();
		fsp_clear(this);
		fsp_addSearch(this,"fs/fsm:FSM90060E_S005");
		fsp_callService(this, "", "", "ds_recipeCond=ds_recipeCond", "ds_sRecipeList=ds_List", "", "fn_callback", "", false);
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_recipeNm_onitemchanged(obj:Combo, e:TextChangedEventInfo)
 * 기ㅡㅡㅡ능 : 레시피명 컴포넌트 이벤트 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function cbo_recipeNm_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if ( obj.userchange == "2" ) {
		obj.userchange = "0";
		obj.userdata   = e.posttext;
		
		btn_search.setFocus();
		btn_searchRecipe.click();	
		obj.setFocus();
	} else {
		obj.userchange = "1";
		obj.userdata = e.posttext;
	}	
}

function cbo_recipeNm_onkeydown(obj:Combo, e:KeyEventInfo)
{
	if (e.keycode == 13 && obj.userchange == "1") {
		var strValue, nFRow, objDs, strDataColumn;
		
		strValue 		= obj.userdata;
		objDs           = ds_cboRecipeNm;
		strDataColumn	= obj.datacolumn;
		
		if (gfn_length(strValue)>0) {
			nFRow = objDs.findRow(strDataColumn,strValue);
			
			if (nFRow == -1)
			{
				var nRow = objDs.addRow();
				objDs.setColumn(nRow,strDataColumn,strValue);
				obj.index = nRow;
			} else {
				obj.index = nFRow;
			}
		}
		
		btn_searchRecipe.setFocus();
		btn_searchRecipe.click();
		obj.setFocus();
		
	} else if (e.keycode == 38 || e.keycode == 40) {
		if ( obj.isDropdown() ) {
			obj.userchange = "2";
		} else {
			obj.userchange = "1";
		}
	}	
}

function cbo_recipeNm_onkillfocus(obj:Combo, e:KillFocusEventInfo)
{
    var strValue,nFRow,objDs,strDataColumn;
	
	objDs           = ds_cboRecipeNm;
	strValue 		= obj.userdata;
	strDataColumn	= obj.datacolumn;
	
	if (gfn_length(strValue) > 0) {
		nFRow = objDs.findRow(strDataColumn,strValue);
		
		if (nFRow == -1)
		{
			var nRow = objDs.addRow();
			objDs.setColumn(nRow,strDataColumn,strValue);
			obj.value = strValue;
		} else {
			obj.value = strValue;
		}
	} else {
		obj.index = 0;
	}		
}

function cbo_recipeNm_ontextchanged(obj:Combo, e:TextChangedEventInfo)
{
	obj.userdata   = e.posttext;
	obj.userchange = "1";	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_addRecipe_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 표준/업장 레시피 체크박스 클릭시 두개중에 한개는 반드시 선택되도록 처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function chk_recipe_onclick(obj:CheckBox,  e:ClickEventInfo)
{
	switch(obj.name)
	{
		case "chk_stdRecipe":
			if(obj.isChecked() != 1)
			{
				Tab00.tabpage3.chk_upjangRecipe.value = 1;
			}
			break;
		case "chk_upjangRecipe":
			if(obj.isChecked() != 1)
			{
				Tab00.tabpage3.chk_stdRecipe.value = 1;
			}		
			break;
	}
}

function btn_allDelete_onclick(obj:Button,  e:ClickEventInfo)
{
	// 삭제 가능여부 체크 ( 1. 예상식수 등록여부, 2. 주문 여부 )
	var vCond = "ORDER_YN=='Y'";
	var nRow = ds_recipeList.findRowExpr(vCond);
	
	if (ds_recipeList.getColumn(nRow, "ORDER_YN") == "Y") 
	{
		g_Message("EE",	"식자재가 발주되었습니다.\n\n메뉴를 삭제할수 없습니다.");
		return;
	}

	// 확인메시지
	var sMenuCd = ds_recipeList.getColumn(0, "MENU_CD");
	var msg = "메뉴를 일괄 삭제하시겠습니까?\n\n[ " + sMenuCd + " ]";
	
	if (g_Confirm("04",	msg) == true) {
		// 삭제처리
		var otherArg = "UPJANG=" + wrapQuote(ds_cond.getColumn(0, "UPJANG")) + " MENU_CD=" + wrapQuote(sMenuCd);
		
		fsp_clear(this); 
		fsp_addSearch(this, "fs/fsm:FSM00052E_D001");
		fsp_callService(this, "", "", "", "", otherArg, "fn_callbackDelete", false);
	}		
}

function fn_callbackDelete(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	fn_searchRecipe();	
}

function fn_callbackInsertRecipe(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	fn_searchRecipe();	
}

function Tab00_tabpage1_cbo_stdMenuClass_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
    if(gfn_length(e.postvalue) == 0) 
    {
		// 데이터 초기화
    } 
    else 
    {
		fn_stdMenuSearch();
    }		
}

function fn_stdMenuSearch()
{
	ds_cond.setColumn(0, "MENU_CLASS", Tab00.tabpage1.cbo_stdMenuClass.value);
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsm:FSM00200E_S001");
	fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_cboStdMenuList=ds_menuList", "", "fn_callbackStdMenuSearch", true, false);
}

function fn_callbackStdMenuSearch(errCode, errMsg)
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
    ds_cboStdMenuList.insertRow(0);
    ds_cboStdMenuList.setColumn(0, "MENU_CD", "");
    ds_cboStdMenuList.setColumn(0, "MENU_NAME", "");
}

function Tab00_tabpage1_grd_stdMenuList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	if ( e.row < 0 ) {
        ds_stdRecipeList.clearData();
        return;
	}
	
	ds_cond.setColumn(0, "SINGLE_MENU_CD", ds_stdMenuList.getColumn(e.row, "SINGLE_MENU_CD"));

	fsp_clear(this);
    fsp_addSearch(this, "fs/fsm:FSM00200E_S006");
    fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_stdRecipeList=ds_recipeList", "", "", true);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage1_btn_stdInsertRecipe_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 표준레시피 등록
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage1_btn_stdInsertRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
	if(gfn_isNull(ds_cond.getColumn(0, "MENU_CD")))
	{
        gfn_alert("식단을 선택 또는 생성해주세요.");
        return;
	}

    var fRow = ds_stdRecipeList.findRow("CHK", "1");
    if(fRow == -1) 
    {
        gfn_alert("복사할 레시피를 먼저 선택하여 주세요.");
        return;
    }
    
    ds_copyCond.clearData();
    
    // 복사할 레시피 정보 생성 
    for(var i=0; i < ds_stdRecipeList.getRowCount(); i++) {
        if(ds_stdRecipeList.getColumn(i, "CHK") == "1") 
        {
            var row = ds_copyCond.addRow();
            ds_copyCond.setColumn(row, "RECIPE_CD", ds_stdRecipeList.getColumn(i, "RECIPE_CD"));
                
            if (ds_copyCond.getRowCount() == 1) 
            {
                ds_copyCond.setColumn(0, "UPJANG", ds_cond.getColumn(0, "UPJANG"));
                ds_copyCond.setColumn(0, "MENU_DATE", ds_cond.getColumn(0, "MENU_DATE"));
                ds_copyCond.setColumn(0, "HALL_CD", ds_cond.getColumn(0, "HALL_CD"));
                ds_copyCond.setColumn(0, "MENU_CD", ds_cond.getColumn(0, "MENU_CD"));
                ds_copyCond.setColumn(0, "SINGLE_MENU_CD", ds_cond.getColumn(0, "SINGLE_MENU_CD"));
                ds_copyCond.setColumn(0, "SUBINV_CODE", ds_cond.getColumn(0, "SUBINV_CODE"));
                ds_copyCond.setColumn(0, "EXPECT_SALE_QTY", ds_cond.getColumn(0, "EXPECT_SALE_QTY"));
            }
        }
    }    
    
    fsp_clear(this);
    
    // 레시피 포함 
    if (Tab00.tabpage1.rdo_recipeType.value == "1")
    {
        fsp_addSingle(this, "fs/fsm:FSM00200E_I003"); //레시피 자재 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I004"); //레시피 조리법 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I002"); //레시피 복사 
    } 
    // 레시피 미 포함
    else 
    {
        fsp_addSingle(this, "fs/fsm:FSM00200E_I007"); //업장 표준 레시피 자재복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I008"); //표준 레시피 자재 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I009"); //업장 표준 레시피 조리법복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I010"); //표준 레시피 조리법 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I005"); //업장 표준 레시피 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I006"); //표준 레시피 복사 
    }
    
    fsp_callService(this, "", "", "ds_list=ds_copyCond", "", "", "fn_callbackInsertRecipe", true);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : Tab00_tabpage3_btn_insertRecipe_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피 등록
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-01
 ******************************************************************************************/
function Tab00_tabpage3_btn_insertRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
	if(gfn_isNull(ds_cond.getColumn(0, "MENU_CD")))
	{
        gfn_alert("식단을 선택 또는 생성해주세요.");
        return;
	}

	if(ds_sRecipeList.rowposition < 0 ) {
		return;
	}
	
	var nRow = ds_sRecipeList.rowposition;
	
	// 레시피 유형 체크
	var fRow = ds_cboRecipeClass.findRow("CD", ds_sRecipeList.getColumn(nRow, "RECIPE_CLASS"));
    if ( fRow == -1 )
    {
        gfn_alert("선택한 레시피의 레시피유형이 \n업장의 레시피 유형으로 등록되어 있지 않습니다.");
        return;
    }
    
    // 등록여부 체크
    fRow = ds_recipeList.findRow("RECIPE_CD", ds_sRecipeList.getColumn(nRow, "RECIPE_CD"));
    if( fRow != -1 )
    {
        gfn_alert("선택한 레시피가 이미 식단 레시피로 등록되어 있습니다.");
        return;
    }   
	
	fsp_clear(this);
	
	ds_copyCond.clearData();
	ds_copyCond.addRow();
    ds_copyCond.setColumn(0, "UPJANG", ds_cond.getColumn(0, "UPJANG"));
    ds_copyCond.setColumn(0, "MENU_CD", ds_cond.getColumn(0, "MENU_CD"));
    ds_copyCond.setColumn(0, "NEED_DATE", ds_cond.getColumn(0, "MENU_DATE"));
    ds_copyCond.setColumn(0, "HALL_CD", ds_cond.getColumn(0, "HALL_CD"));
    ds_copyCond.setColumn(0, "HALL_CLASS", ds_cond.getColumn(0, "HALL_CLASS"));
    ds_copyCond.setColumn(0, "RECIPE_CD", ds_sRecipeList.getColumn(ds_sRecipeList.rowposition, "RECIPE_CD"));
    ds_copyCond.setColumn(0, "EXPECT_SALE_QTY", ds_cond.getColumn(0, "EXPECT_SALE_QTY"));
    ds_copyCond.setColumn(0, "SUBINV_CODE", ds_cond.getColumn(0, "SUBINV_CODE"));	
	
    // 업장표준레시피
    if(ds_sRecipeList.getColumn(ds_sRecipeList.rowposition, "GUBUN")=="업장") 
    {	
        fsp_addSingle(this, "fs/fsm:FSM00060E_I008"); //레시피 복사 
        fsp_addSingle(this, "fs/fsm:FSM00060E_I009"); //레시피 자재 복사 
        fsp_addSingle(this, "fs/fsm:FSM00060E_I010"); //레시피 조리법복사 
    } 
    // 표준레시피
    else 
    {
        fsp_addSingle(this, "fs/fsm:FSM00060E_I005"); //레시피 
        fsp_addSingle(this, "fs/fsm:FSM00060E_I006"); //레시피 자재 복사 
        fsp_addSingle(this, "fs/fsm:FSM00060E_I007"); //레시피 조리법 복사 
    }
	
	fsp_callService(this, "", "", "ds_in=ds_copyCond", "", "", "fn_callbackInsertRecipe", true);	
}

function ds_master_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	var nRow = e.newrow;
	
	if(GetRowType(ds_master, e.oldrow)== "insert") {
		g_Message("EE", "입력중인 식단이 존재합니다. 저장 후 입력해주세요.");
		ds_master.rowposition = e.oldrow;
		return;
	}
	
    // 조회 key 값 
    ds_cond.setColumn(0, "MENU_CD", ds_master.getColumn(nRow, "MENU_CD"));
    if(gfn_length(ds_cond.getColumn(0, "MENU_CD")) == 0)
    {
        return;
    }
    
    // 하위에서 복사할 때 사용할 HALL_CD 저장 
    ds_cond.setColumn(0, "HALL_CD", ds_master.getColumn(nRow, "HALL_CD"));
    ds_cond.setColumn(0, "HALL_CLASS", ds_master.getColumn(nRow, "HALL_CLASS"));
    ds_cond.setColumn(0, "GOAL_COST_RATE", ds_master.getColumn(nRow, "GOAL_COST_RATE"));
    ds_cond.setColumn(0, "EXPECT_SALE_QTY", ds_master.getColumn(nRow, "EXPECT_MEAL_QTY"));
    ds_cond.setColumn(0, "SUBINV_CODE", ds_master.getColumn(nRow, "SUBINV_CODE"));
	
	fn_searchRecipe();
}

function btn_upjangCd_OnClick(obj:Button, e:ClickEventInfo)
{
    // 2008.06.24 김동표 복수업장 관리 및 업장 그룹 적용 
	var strSQL;
	strSQL =  "SELECT A.UPJANG, ";
    strSQL += "   A.UPJANGNM ";
    strSQL += "  FROM SCO_UPJANG_MST_V A ";
    strSQL += " WHERE (1 = 1) ";
    strSQL += "   AND (FICS_YN = 'N' ) ";
    strSQL += "   AND (A.UPJANG = '" + g_Upjang + "'  ";
    strSQL += "    OR A.UPJANG IN ";
    strSQL += "       ( ";
    strSQL += "       SELECT UPJANG ";
    strSQL += "         FROM FSA_UPJANG_GRP A ";
    strSQL += "        WHERE EXISTS ";
    strSQL += "              ( ";
    strSQL += "              SELECT 1 ";
    strSQL += "                FROM FSA_UPJANG_GRP X ";
    strSQL += "               WHERE X.GRP_SEQ = A.GRP_SEQ ";
    strSQL += "                 AND X.UPJANG = '" + g_Upjang + "'  ";
    strSQL += "              ) ";
    strSQL += "       ) ";
    strSQL += "    OR A.UPJANG IN ";
    strSQL += "       ( ";
    strSQL += "       SELECT UPJANG ";
    strSQL += "         FROM MAS_DUALUPJANG_MGMT ";
    strSQL += "        WHERE SABUN = '" + g_EmpNo + "'  ";
    strSQL += "       ) ";
    strSQL += "  ) ";
    
	// 2008.06.24 복수업장 관리 및 업장 그룹 적용
    fn_sql_common_setup(strSQL, 
						strMAQuery_UpjangKeyField, 
						strMAQuery_UpjangValueField, 
						strMAQuery_UpjangKeyFieldNM, 
						strMAQuery_UpjangValueFieldNM, 
						"", 
						"",
						"",   
						strMAQuery_UpjangCaption);
    
    if (gds_sql_common.getColumn(0, "ret_code") != "")
    {
		ds_upjangMenuCond.setColumn(0, "UPJANG", gds_sql_common.getColumn(0, "ret_code"));
		ds_upjangMenuCond.setColumn(0, "UPJANGNM", gds_sql_common.getColumn(0, "ret_name"));
    }
}

function ds_upjangMenuCond_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid == "UPJANG")
	{
		fsp_clear(this);
		fsp_addSearch(this, "fs/fsm:FSM00200E_S015");
		fsp_callService(this, "", "", "", "ds_sHallList=ds_hallList", "UPJANG=" + e.newvalue, "fn_callbackSearchHall", true, true);
	}
	else if(e.columnid == "HALL_CD")
	{
		fsp_clear(this);
		fsp_addSearch(this, "fs/fsm:FSM00200E_S009");
		fsp_callService(this, "", "", "", "ds_menuList=ds_menuList", "UPJANG=" + ds_upjangMenuCond.getColumn(0, "UPJANG") + " HALL_CD=" + wrapQuote(e.newvalue), "fn_callbackSearchMenu", true, true);
	}
}

function fn_callbackSearchHall(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	var nRow = ds_sHallList.findRow("HALL_CLASS", "010");	// 행사식당 기본 세팅
	Tab00.tabpage2.cbo_hallCd.index = nRow;
}

function fn_callbackSearchMenu(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
    ds_menuList.insertRow(0);
    ds_menuList.setColumn(0, "MENU_CD", "");
    ds_menuList.setColumn(0, "MENU_FEATURE", " ");
    
    //ds_cond.setColumn(0, "MENU_CD", "");
}

function Tab00_tabpage2_grd_upjangMenuList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	if ( e.row < 0 ) {
        ds_upjangRecipeList.clearData();
        return;
	}
	
	ds_cond.setColumn(0, "SINGLE_MENU_CD", ds_upjangMenuList.getColumn(e.row, "MENU_CD"));

	fsp_clear(this);
    fsp_addSearch(this, "fs/fsm:FSM00200E_S011");
    fsp_callService(this, "", "", "ds_cond=ds_cond", "ds_upjangRecipeList=ds_recipeList", "", "", true);	
}

function Tab00_tabpage2_btn_upjangInsertRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
	if(gfn_isNull(ds_cond.getColumn(0, "MENU_CD")))
	{
        gfn_alert("식단을 선택 또는 생성해주세요.");
        return;
	}

    var fRow = ds_upjangRecipeList.findRow("CHK", "1");
    if(fRow == -1) 
    {
        gfn_alert("복사할 레시피를 먼저 선택하여 주세요.");
        return;
    }
    
    ds_copyCond.clearData();
    
    // 복사할 레시피 정보 생성 
    for(var i=0; i < ds_upjangRecipeList.getRowCount(); i++) {
        if(ds_upjangRecipeList.getColumn(i, "CHK") == "1") 
        {
            var row = ds_copyCond.addRow();
            ds_copyCond.setColumn(row, "RECIPE_CD", ds_upjangRecipeList.getColumn(i, "RECIPE_CD"));
                
            if (ds_copyCond.getRowCount() == 1) 
            {
                ds_copyCond.setColumn(0, "UPJANG", ds_cond.getColumn(0, "UPJANG"));
                ds_copyCond.setColumn(0, "MENU_DATE", ds_cond.getColumn(0, "MENU_DATE"));
                ds_copyCond.setColumn(0, "HALL_CD", ds_cond.getColumn(0, "HALL_CD"));
                ds_copyCond.setColumn(0, "MENU_CD", ds_cond.getColumn(0, "MENU_CD"));
                ds_copyCond.setColumn(0, "EXPECT_SALE_QTY", ds_cond.getColumn(0, "EXPECT_SALE_QTY"));
                
                // 복사 원본 
                ds_copyCond.setColumn(0, "SRC_UPJANG", ds_cond.getColumn(0, "UPJANG"));
                ds_copyCond.setColumn(0, "SRC_MENU_CD", ds_cond.getColumn(0, "SINGLE_MENU_CD"));
            }
        }
    }    
    
    fsp_clear(this);
    
    // 레시피 포함 
    //trace(Tab00.tabpage2.rdo_recipeType.value);
    if (Tab00.tabpage2.rdo_recipeType.value == "1")
    {
        fsp_addSingle(this, "fs/fsm:FSM00200E_I015"); //레시피 자재 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I016"); //레시피 조리법 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I014"); //레시피 복사 
    } 
    // 레시피 미 포함
    else 
    {
        fsp_addSingle(this, "fs/fsm:FSM00200E_I019"); //업장 표준 레시피 자재복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I020"); //표준 레시피 자재 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I021"); //업장 표준 레시피 조리법복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I022"); //표준 레시피 조리법 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I017"); //업장 표준 레시피 복사 
        fsp_addSingle(this, "fs/fsm:FSM00200E_I018"); //표준 레시피 복사 
    }
    
    fsp_callService(this, "", "", "ds_list=ds_copyCond", "", "", "fn_callbackInsertRecipe", true);	
}

function Tab00_tabpage1_grd_stdMenuList_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
    var nRow = e.row;
	var arg = {
	           fa_menuCd:ds_stdMenuList.getColumn(nRow, "SINGLE_MENU_CD")
	         , fa_menuNm:ds_stdMenuList.getColumn(nRow, "MENU_NAME")
	         , fa_gubun:"S"
	         , fa_mainupjang:ds_cond.getColumn(0, "UPJANG")
	         , fa_upjang:""
	         , fa_menu_date:ds_cond.getColumn(0, "MENU_DATE")
	         , fa_subinv:ds_cond.getColumn(0, "SUBINV_CODE")
	};
	
	gfn_dialog("", "U_FSM::FSM00204P.xfdl", arg, "", "", "", "", "", "", "", "", true);		
}

function Tab00_tabpage2_grd_upjangMenuList_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
    var nRow = e.row;
	var arg = {
	           fa_menuCd:ds_upjangMenuList.getColumn(nRow, "MENU_CD")
	         , fa_menuNm:ds_upjangMenuList.getColumn(nRow, "MENU_FEATURE")
	         , fa_menu_date:ds_cond.getColumn(0, "MENU_DATE")
	         , fa_mainupjang:ds_cond.getColumn(0, "UPJANG")
	         , fa_upjang:ds_upjangMenuList.getColumn(nRow, "UPJANG")
	         , fa_subinv:ds_cond.getColumn(0, "SUBINV_CODE")
	         , fa_gubun:"U"
	};
	
	gfn_dialog("", "U_FSM::FSM00204P.xfdl", arg, "", "", "", "", "", "", "", "", true);		
}

function btn_modifyRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
	if(gfn_dsIsUpdated(ds_recipeList) == true)
	{
		g_Message("EE","변경된 데이타가 있습니다.\n\n저장하신후 작업하세요.");
		return;
	}
	
	if(ds_recipeList.getRowCount()==0)
	{
		return;
	}

	var arg = {
	           fa_UPJANG:ds_cond.getColumn(0, "UPJANG")
	         , fa_HALL_CD:ds_cond.getColumn(0, "HALL_CD")
	         , fa_SUBINV_CODE:ds_cond.getColumn(0, "SUBINV_CODE")
	         , fa_MENU_CD:ds_cond.getColumn(0, "MENU_CD")
	         , fa_MENU_DATE:ds_cond.getColumn(0, "MENU_DATE")
	};

    gfn_dialog("", "U_FSM::FSM90205P.xfdl", arg, "", "", "", "", "", "", "", "", true);
    
    fn_searchRecipe();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_prev_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 전주
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function btn_prev_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_cond.setColumn(0, "MENU_DATE", gfn_addDate(ds_cond.getColumn(0, "MENU_DATE"), -1));
	fn_search();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_next_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 차주
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function btn_next_onclick(obj:Button,  e:ClickEventInfo)
{
	ds_cond.setColumn(0, "MENU_DATE", gfn_addDate(ds_cond.getColumn(0, "MENU_DATE"), 1));
	fn_search();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_upjangRecipe_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 업장레시피 구축
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-03-27
 ******************************************************************************************/
function btn_upjangRecipe_onclick(obj:Button,  e:ClickEventInfo)
{
    // 구축을 선택한 자료만 
    ds_recipeListCopy.clearData();
    for ( var i = 0; i < ds_recipeList.getRowCount(); i++ ) {
        if ( ds_recipeList.getColumn(i, "CHK") == "1" ) {
            var row = ds_recipeListCopy.addRow();
            ds_recipeListCopy.copyRow(row, ds_recipeList, i);
            ds_recipeListCopy.setColumn(row, "UPJANG", ds_cond.getColumn(0, "UPJANG"));
        }
    }
    
    if(ds_recipeListCopy.getRowCount() == 0)
    {
		g_Message("EE", "구축하실 레시피를 선택해주세요.");
		return;
    }
    
    fsp_clear(this);
    fsp_addSingle(this, "fs/fsm:FSM00200E_D007");  // 레시피 조리법 삭제
    fsp_addSingle(this, "fs/fsm:FSM00200E_D006");  // 레시피 자재 삭제 
    fsp_addSingle(this, "fs/fsm:FSM00200E_D005");  // 레시피 마스터 삭제  
    
    fsp_addMulti(this, "fs/fsm:FSM00200E_I013");  // 레시피 조리법 복사 
    fsp_addMulti(this, "fs/fsm:FSM00200E_I012");  // 레시피 자재 복사 
    fsp_addMulti(this, "fs/fsm:FSM00200E_I011");  // 레시피 마스터 복사 
    
    fsp_callService(this, "", "", "ds_cond=ds_cond ds_listCopy=ds_recipeListCopy:A", "", "", "fn_callbackUpjangRecipe");		// 서비스 호출 	
}

function fn_callbackUpjangRecipe(errCode, errMsg)
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	g_Message("02", "업장레시피로 구축 되었습니다.");
	fn_searchRecipe();
}

function btn_searchRate_onclick(obj:Button,  e:ClickEventInfo)
{
	// 식재료율 조회
	fn_getRateMonth();		
}

function fn_getRateMonth()
{
	// 식재료율 조회
	var ActionVal	= "";
	ActionVal += "UPJANG="		+ wrapQuote(ds_cond.getColumn(0, "UPJANG"));
	ActionVal += " START_DATE="	+ wrapQuote(gfn_getFirstDate(ds_cond.getColumn(0, "MENU_DATE")));
	ActionVal += " END_DATE="	+ wrapQuote(gfn_getLastDate(ds_cond.getColumn(0, "MENU_DATE")));
	
	Transaction("FSM90900E_S001","U_svc::" + "fs/fsm/FSM90900E_S001.jsp", "", "ds_rateMonth=ds_rateMonth", ActionVal, "fn_searchRateMonth");
}

// 원가갱신
function btn_costReflash_onclick(obj:Button,  e:ClickEventInfo)
{
	var sCostReflashDate = cal_menuDate.fn_getValue();
	if (sCostReflashDate < gfn_addDate(gfn_today(), 1)){
		g_Message("EE",	"갱신일 지정 오류!!\n\n당일 또는 과거 날짜는 갱신 할 수 없습니다.");
		return;
	}	  

	if (gfn_length(ds_cond.getColumn(0, "UPJANG"))== 0) {
		g_Message("EE",	"업장정보 오류!!\n\n 업장정보를 입력하세요.");
		return;
	}	  
	
	if (gfn_length(sCostReflashDate)== 0) {
		g_Message("EE",	"갱신일 오류!!\n\n갱신일을 입력하세요.");
		return;
	}
	
	if (!g_Confirm("02","원가 갱신 작업을 하시겠습니까?\n\n제공일 ~ 제공일 + 6일")) return;
	
	// 데이타체크
	ds_input.clearData();
	ds_input.addRow();
	ds_input.setColumn(0,"SDATE", sCostReflashDate);
	ds_input.setColumn(0,"UPJANG", ds_cond.getColumn(0, "UPJANG"));
	  	  
    http.Sync = true;
	var t_timeout = application.httptimeout;
	application.httptimeout = 2000; //1800초

	fsp_clear(this);	
	fsp_addSingle(this, "fs/fsm:FSM00052E_I001");
	fsp_callService(this, "", "", "ds_input2=ds_input:A", "ds_return=ds_return",  "", "fn_callbackCostReflash");

	application.httptimeout = t_timeout; //60초
	http.Sync = false;	
}

function fn_callbackCostReflash(errCode, errMsg) 
{
	if(errCode != 0)
	{
		g_Message("EE","서비스 에러");
	}
	else
	{
		if ((ds_return.getColumn(0, "O_RTN")) == 'TRUE'){	
			g_Message("04", ds_return.getColumn(0,"O_RTNMSG"));
			fn_searchRecipe();
		}
		else
		{
			g_Message("EE","갱신 도중 오류가 발생 하였습니다. \n\n " + ds_return.getColumn(0, "O_RTNMSG"));
		}
	}
}

function grd_recipeList_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	// 레시피 삭제버튼
	if(e.col == 3)
	{
		// 발주자재의 경우 삭제 불가
		if(ds_recipeList.findRowExpr("RECIPE_CD==" + wrapQuote(ds_recipeList.getColumn(e.row, "RECIPE_CD")) + " && ORDER_YN=='Y'") != -1)
		{
			g_Message("EE", "발주된 자재가 있습니다.\n\n삭제할 수 없습니다.");
			return;
		}
		
		if(!g_Confirm("01", "[ " + ds_recipeList.getColumn(e.row, "RECIPE_NAME") + " ] 레시피를 삭제하시겠습니까?")) return;
		
		ds_recipeList.deleteRow(e.row);
		
		// DB 삭제처리
		fn_deleteRecipe();
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_deleteRecipe()
 * 기ㅡㅡㅡ능 : 레시피삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_deleteRecipe()
{
	fsp_clear(this);
	fsp_addSave(this, "", "", "fs/fsm:FSM00060E_D001","", "", "", "");
	fsp_addSave(this, "", "", "fs/fsm:FSM90060E_D002","", "", "", "");
	fsp_addSave(this, "", "", "fs/fsm:FSM00060E_D003","", "", "", "");
	fsp_callService(this, "", "", "ds_Menu=ds_recipeList:U", "", "", "fn_callbackRecipeDelete");
}

function fn_callbackRecipeDelete(errCode, errMsg) 
{
	if(errCode!=0)
	{
		g_Message("EE", "서비스 오류:시스템 관리자에게 문의하십시오!");
		return;
	}
	
	//g_Message("02", "삭제되었습니다.");
}]]></Script>
  </Form>
</FDL>
