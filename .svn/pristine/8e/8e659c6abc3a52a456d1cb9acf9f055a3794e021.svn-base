ODI    OZ Document File<?xml version="1.0" encoding="UTF-8"?>

<OZDATAINFO>
  <OZDATAMODULE NAME="[OZ DATA Tree]" INCLUDE="" VERSION="1.0" PARAMETERFLAG="#" IGNORENULLDATA="true" SCRIPTBCE="false">
    <OZPARAMETERSTORE NAME="paramstore">
      <OZPARAMETERSET NAME="OZParam" INCLUDE="" MASTERSET="" HIDDEN="false" LOADSFIELDINFODYNAMICALLY="false" SDMTYPE="0" SIGN="false" HIDEDESIGNTIME="false">
	<PARAMFIELD NAME="PARAM1" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="사업장" VALUE="106246" />
	<PARAMFIELD NAME="PARAM2" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="시작일자" VALUE="20080101" />
	<PARAMFIELD NAME="PARAM3" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="종료일자" VALUE="20080307" />
	<PARAMFIELD NAME="PARAM4" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="공급업체" VALUE="0000" />
	<PARAMFIELD NAME="PARAM5" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="조회구분" VALUE="001" />
	<PARAMFIELD NAME="PARAM6" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="창고" VALUE="" />
	<PARAMFIELD NAME="PARAM7" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="식당명" VALUE="올아바웃 본사" />
	<PARAMFIELD NAME="PARAM8" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="공급업체명" VALUE="한화리조트" />
	<PARAMFIELD NAME="PARAM9" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="사업장명" VALUE="올어바웃푸드" />
	<PARAMFIELD NAME="PARAM10" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="시작일자표시용" VALUE="2007-12-01" />
	<PARAMFIELD NAME="PARAM11" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="종료일자표시용" VALUE="2007-12-10" />
      </OZPARAMETERSET>
    </OZPARAMETERSTORE>
    <OZFILESTORE NAME="FILESTORE" INCLUDE="" />
    <OZHTTPSTORE NAME="HTTPSTORE" INCLUDE="" />
    <OZORACLE NAME="hldc" INCLUDE="" VENDOR="Oracle" SERVERNAME="0" DBNAME="0" DATASOURCENAME="" USERNAME="fstest" PASSWORD="" DBSERVERIP="0" DBSERVERPORT="0" ENCODECHARSET="KSC5601" DECODECHARSET="KSC5601" TIMEFORMAT="hh:mm:ss" DATEFORMAT="yyyy-MM-dd" TIMESTAMPFORMAT="yyyy-MM-dd hh:mm:ss:SSS" AUTOCOMMIT="true" POOLALIAS="oracle_fsdb" ALIASFILENAME="C:\Program Files\FORCS\OZ Product\ReportDesigner\properties\db.properties" USEALIAS="true" USEIJAVA="false" SUBPROTOCOL="">
      <OZQUERY NAME="입고내역서" INCLUDE="" MASTERSET="" DBINFOID="hldc" SCRIPT="false" MAXROW="0" HIDDEN="false" LOADSFIELDINFODYNAMICALLY="false" SDMTYPE="0" SIGN="false" HIDEDESIGNTIME="false" INSERT_ROW_QUERY="" DELETE_ROW_QUERY="" UPDATE_ROW_QUERY="" PREPARED="false">SELECT A.OTCUSTCD, A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE -- 규격
     , A.TAX_CODE
     , A.PO_UOM -- 단위 
     , A.STATUS_CODE  -- 입고구분코드
     , A.STATUS -- 입고구분명
     , A.OP_PRICE -- 단가
     , SUM(A.PR_QTY) AS PR_QTY -- 발주량
     , SUM(A.RTN_QTY) AS RTN_QTY -- 반품량
     , SUM(A.IN_QTY) AS IN_QTY  -- 입고량
     , SUM(A.OP_AMOUNT) AS OP_AMOUNT -- 공급가
     , SUM(A.OP_VAT) AS OP_VAT -- 부가세
     , SUM(A.OP_TOT) AS OP_TOT -- 합계
     , DECODE(A.TAX_CODE,'100',SUM(A.PR_QTY),0) 과세발주
     , DECODE(A.TAX_CODE,'100',SUM(A.RTN_QTY),0) 과세반품
     , DECODE(A.TAX_CODE,'100',SUM(A.IN_QTY),0)  과세입고
     , DECODE(A.TAX_CODE,'100',1,0)*SUM(A.OP_AMOUNT) 과세공급가
     , DECODE(A.TAX_CODE,'100',1,0)*SUM(A.OP_VAT) 과세부가세
     , DECODE(A.TAX_CODE,'100',1,0)*SUM(A.OP_TOT) 과세합계
     , DECODE(A.TAX_CODE,'100',0,SUM(A.PR_QTY)) 면세발주
     , DECODE(A.TAX_CODE,'100',0,SUM(A.RTN_QTY)) 면세반품
     , DECODE(A.TAX_CODE,'100',0,SUM(A.IN_QTY))  면세입고
     , DECODE(A.TAX_CODE,'100',0,1)*SUM(A.OP_AMOUNT) 면세공급가
     , DECODE(A.TAX_CODE,'100',0,1)*SUM(A.OP_VAT) 면세부가세
     , DECODE(A.TAX_CODE,'100',0,1)*SUM(A.OP_TOT) 면세합계
     , B.SIGN1, B.SIGN2, B.SIGN3, B.SIGN4
  FROM
(
SELECT A.RC_UPJANG AS UPJANG, '0000' AS OTCUSTCD
     , A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE, A.PO_UOM,A.TAX_CODE
     , B.CODE AS STATUS_CODE, B.CODE_NAME AS STATUS
     , SUM(A.ADJUST_QTY + A.PO_QTY) AS PR_QTY
     , SUM(A.ADJUST_QTY + A.CENTER_UNDELI_QTY + A.UNDELIVERED_QTY + A.RETURNED_QTY) AS RTN_QTY
     , SUM(A.DELIVERED_QTY) AS IN_QTY
     , A.SALE_PRICE
     , DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE) AS OP_PRICE
     , SUM(ROUND(A.DELIVERED_QTY * DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE))) AS OP_AMOUNT
     , SUM(ROUND(DECODE(A.TAX_CODE,'100',0.1,0) * ROUND(A.DELIVERED_QTY * DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE)))) AS OP_VAT
     , SUM(ROUND(DECODE(A.TAX_CODE,'100',1.1,1) * ROUND(A.DELIVERED_QTY * DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE)))) AS OP_TOT
  FROM HLDC_PO_PO A
     ,(SELECT CODE, CODE_NAME FROM HLDC_PO_CODE WHERE GROUP_CODE = '007') B
     , FMU_OP_RATE C
 WHERE A.LINE_STATUS = B.CODE
   AND A.RC_UPJANG = C.UPJANG(+)
   AND A.NEED_DATE BETWEEN C.SDATE(+) AND C.EDATE(+)
   AND DECODE(FMS_OPRATEINFO_FUN(A.RC_UPJANG, A.NEED_DATE), 'C', SUBSTR(A.ITEM_CODE,1,8), A.ITEM_CODE) = C.ITEM_CODE(+)
   AND C.USE_YN(+) = 'Y'
   AND A.RC_UPJANG = #OZParam.PARAM1#
   AND A.SUBINV_CODE LIKE '#OZParam.PARAM6#'||'%'
   AND A.NEED_DATE BETWEEN '#OZParam.PARAM2#' AND '#OZParam.PARAM3#'
   AND '0000' LIKE '#OZParam.PARAM4#'||'%'
   AND '003' != '#OZParam.PARAM5#'
   AND A.DELIVERED_QTY &gt; 0
 GROUP BY A.RC_UPJANG, A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE, A.PO_UOM, B.CODE, B.CODE_NAME, A.SALE_PRICE, C.OP_PRICE, C.OP_RATE,A.TAX_CODE
 UNION ALL
SELECT A.UPJANG, A.OTCUSTCD
     , A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE, A.PO_UOM,A.TAX_CODE
     , A.OTCUSTCD AS STATUS_CODE, B.OTCUSTNM AS STATUS
     , SUM(A.PR_QTY) AS PR_QTY
     , 0 AS RTN_QTY
     , SUM(A.PR_QTY) AS IN_QTY
     , A.SALE_PRICE
     , DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE) AS OP_PRICE
     , SUM(ROUND(A.PR_QTY * DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE))) AS OP_AMOUNT
     , SUM(ROUND(DECODE(A.TAX_CODE,'100',0.1,0) * ROUND(A.PR_QTY * DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE)))) AS OP_VAT
     , SUM(ROUND(DECODE(A.TAX_CODE,'100',1.1,1) * ROUND(A.PR_QTY * DECODE(NVL(C.OP_PRICE, 0), 0, SCC_CEIL(A.SALE_PRICE + (A.SALE_PRICE * NVL(C.OP_RATE,0) / 100),C.CEIL_VAL), C.OP_PRICE)))) AS OP_TOT
  FROM (SELECT A.*, B.ITEM_CLASS4 FROM FMP_OTCUST_PR A, FMP_OTCUST_ITEM B WHERE A.ITEM_CODE = B.ITEM_CODE) A
     , FMP_OTHER_CUST B, FMU_OP_RATE C
 WHERE A.OTCUSTCD = B.OTCUSTCD
   AND A.UPJANG = C.UPJANG(+)
   AND A.NEED_DATE BETWEEN C.SDATE(+) AND C.EDATE(+)
   AND DECODE(FMS_OPRATEINFO_FUN(A.UPJANG, A.NEED_DATE), 'C', A.ITEM_CLASS4, A.ITEM_CODE) = C.ITEM_CODE(+)
   AND C.USE_YN(+) = 'Y'
   AND A.UPJANG = #OZParam.PARAM1#
   AND A.SUBINV_CODE LIKE '#OZParam.PARAM6#'||'%'
   AND A.NEED_DATE BETWEEN '#OZParam.PARAM2#' AND '#OZParam.PARAM3#'
   AND A.OTCUSTCD LIKE '#OZParam.PARAM4#'||'%'
   AND A.LINE_STATUS NOT IN ('003','005')     --090204 김진희씨요청 신청취소,반려 항목 조회에서 제외
   AND '003' != '#OZParam.PARAM5#'
 GROUP BY A.UPJANG, A.OTCUSTCD, A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE, A.PO_UOM, B.OTCUSTNM, A.SALE_PRICE, C.OP_PRICE, C.OP_RATE,A.TAX_CODE
 UNION ALL
SELECT A.UPJANG, 'ZZZZ' AS OTCUSTCD
     , A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE, A.UOM_CODE AS PO_UOM, B.TAX_CODE
     , 'ZZZZ' AS STATUS_CODE, '현지구매' AS STATUS
     , SUM(A.QTY) AS PR_QTY
     , 0 AS RTN_QTY
     , SUM(A.QTY) AS IN_QTY
     , A.PRICE AS SALE_PRICE
     , A.PRICE AS OP_PRICE
     , SUM(A.SUPPLYAMT) AS OP_AMOUNT
     , SUM(A.VAT) AS OP_VAT
     , SUM(A.AMOUNT) AS OP_TOT
  FROM FMP_LOCALPO A,
           FMS_ITEM_V B
 WHERE A.UPJANG = #OZParam.PARAM1#
   AND A.ITEM_CODE = B.ITEM_CODE(+)
   AND A.SUBINV_CODE LIKE '#OZParam.PARAM6#'||'%'
   AND A.NEED_DATE BETWEEN '#OZParam.PARAM2#' AND '#OZParam.PARAM3#'
   AND '001' != '#OZParam.PARAM5#'
 GROUP BY A.UPJANG, A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE, A.UOM_CODE, A.PRICE,B.TAX_CODE
) A, FMS_UPJANG B
 WHERE A.UPJANG = B.UPJANG
 GROUP BY A.OTCUSTCD, A.ITEM_CODE, A.ITEM_NAME, A.ITEM_SIZE, A.PO_UOM, A.STATUS_CODE, A.STATUS, A.OP_PRICE,A.TAX_CODE
        , B.SIGN1, B.SIGN2, B.SIGN3, B.SIGN4
	<DATAFIELD NAME="OTCUSTCD" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="ITEM_CODE" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="ITEM_NAME" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="ITEM_SIZE" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="TAX_CODE" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="PO_UOM" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="STATUS_CODE" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="STATUS" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="OP_PRICE" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="PR_QTY" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="RTN_QTY" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="IN_QTY" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="OP_AMOUNT" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="OP_VAT" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="OP_TOT" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="과세발주" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="과세반품" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="과세입고" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="과세공급가" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="과세부가세" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="과세합계" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="면세발주" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="면세반품" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="면세입고" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="면세공급가" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="면세부가세" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="면세합계" INCLUDE="" TYPE="2" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="SIGN1" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="SIGN2" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="SIGN3" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
	<DATAFIELD NAME="SIGN4" INCLUDE="" TYPE="12" EDITFIELDTYPE="false" DESCRIPTION="" UPDATE_FIELD_QUERY="" />
      </OZQUERY>
    </OZORACLE>
    <OZINCLUDESTORE NAME="includestore">
      <OZINCLUDESET NAME="includeSet" INCLUDE="" />
    </OZINCLUDESTORE>
    <OZQUERYDESIGNERINFO>
      <OZQUERYINFO STORENAME="hldc" SETNAME="입고내역서">
	<OZQUERYELEMENTINFO CLASSID="1006" MODE="FALSE" WHERESTRING="" HAVINGSTRING="" DELETEDTABLES="" />
      </OZQUERYINFO>
    </OZQUERYDESIGNERINFO>
  </OZDATAMODULE>
</OZDATAINFO>
