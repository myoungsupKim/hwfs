<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="FSI90010E" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" scrollbars="autoboth" onload="form_onload" style="font:arial,11;" titletext="업장표준레시피자재일괄수정">
    <Layouts>
      <Layout>
        <Static id="Static69" class="sta_WFDA_Labelbg" position="absolute 115 56 1237 83" anchor="left top right"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="21" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30"/>
        <Static id="Static18" text="변경 전" class="sta_WF_Title01" position="absolute 0 96 82 114" anchor="left top"/>
        <Static id="Static19" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 83 500 96"/>
        <Static id="Static20" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 109 916 114" anchor="left top"/>
        <Static id="Static49" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1074 83 1237 89" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Static id="Static25" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1078 109 1237 114" anchor="top right"/>
        <Grid id="grd_bItemList" taborder="93" binddataset="ds_bItemList" useinputpanel="false" autofittype="col" position="absolute 0 186 682 422" anchor="left top right" oncelldblclick="grd_bItemList_oncelldblclick" onmousemove="grd_bItemList_onmousemove" class="grd_WF_LineNone">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="32"/>
                <Column size="70"/>
                <Column size="200"/>
                <Column size="100"/>
                <Column size="44"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" colspan="2" text="자재코드" taborder="undefined"/>
                <Cell col="3" text="자재명"/>
                <Cell col="4" text="규격"/>
                <Cell col="5" text="단위"/>
                <Cell col="6" text="자재특성"/>
                <Cell col="7" text="단가"/>
                <Cell col="8" text="g단가"/>
                <Cell col="9" text="폐기율"/>
              </Band>
              <Band id="body">
                <Cell displaytype="normal" edittype="none" style="background2: ;" text="expr:rowidx + 1"/>
                <Cell col="1" displaytype="image" style="background2: ;" text="expr:LOW_PRICE_YN == 'Y' ? 'theme://Images/new/grd_WF_Money2.png' : ''"/>
                <Cell col="2" displaytype="normal" style="background:EXPR(fn_bcolor(currow));background2:EXPR(fn_bcolor(currow));selectbackground:EXPR(fn_bcolor(currow));" text="bind:ITEM_CODE"/>
                <Cell col="3" displaytype="text" edittype="none" style="background:EXPR(fn_bcolor(currow));background2:EXPR(fn_bcolor(currow));selectbackground:EXPR(fn_bcolor(currow));" text="bind:ITEM_NAME" expandshow="hide" expandsize="15"/>
                <Cell col="4" displaytype="text" style="align:left;background2: ;" text="bind:ITEM_SIZE"/>
                <Cell col="5" displaytype="normal" style="background2: ;" text="bind:PO_UOM"/>
                <Cell col="6" displaytype="image" style="align:center;" text="bind:FEATURE_ICON"/>
                <Cell col="7" displaytype="number" style="background2: ;" text="bind:ITEM_PRICE"/>
                <Cell col="8" displaytype="number" style="background2: ;" text="bind:G_ITEM_PRICE"/>
                <Cell col="9" displaytype="number" style="background2: ;" text="bind:DISUSE_RATE"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static21" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 682 83 692 710"/>
        <Button id="btn_itemChange" taborder="112" text="자재일괄변경" class="btn_WF_Function" position="absolute 1057 89 1146 109" anchor="top right" onclick="btn_itemChange_onclick"/>
        <Button id="btn_changeHist" taborder="113" text="자재변경이력" class="btn_WF_Function" position="absolute 1148 89 1237 109" anchor="top right" onclick="btn_changeHist_onclick"/>
        <Static id="Static13" text="w02" class="Guide01_AreaRed" visible="false" position="absolute 1146 89 1148 109" anchor="top right"/>
        <Static id="Static03" class="sta_WFSA_Labelbg" position="absolute 0 114 682 181" anchor="left top right"/>
        <Static id="Static10" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 181 682 186" anchor="left top"/>
        <Static id="Static00" text="변경 후" class="sta_WF_Title01" position="absolute 0 435 450 453" anchor="left top"/>
        <Static id="Static01" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 422 682 435"/>
        <Static id="Static02" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 448 682 453" anchor="left top"/>
        <Static id="Static11" class="sta_WFSA_Labelbg" position="absolute 0 453 682 520" anchor="left top right"/>
        <Static id="Static12" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 520 682 525" anchor="left top"/>
        <Grid id="grd_recipeList" taborder="115" binddataset="ds_recipeList" useinputpanel="false" autofittype="col" position="absolute 691 434 1237 710" anchor="top right bottom" class="grd_WF_LineNone" oncelldblclick="grd_recipeList_oncelldblclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="30"/>
                <Column size="65"/>
                <Column size="65"/>
                <Column size="180"/>
                <Column size="80"/>
                <Column size="80"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="checkbox" edittype="checkbox"/>
                <Cell col="1" text="식당군"/>
                <Cell col="2" text="코드"/>
                <Cell col="3" text="레시피명"/>
                <Cell col="4" text="레시피분류"/>
                <Cell col="5" text="레시피유형"/>
                <Cell col="6" text="조리법유형"/>
              </Band>
              <Band id="body">
                <Cell displaytype="checkbox" edittype="checkbox" text="bind:CHK_YN"/>
                <Cell col="1" displaytype="combo" text="bind:HALL_CLASS" combodataset="ds_cboHallClass" combocodecol="HALL_CLASS" combodatacol="HALL_CLASS_NAME"/>
                <Cell col="2" displaytype="normal" text="bind:RECIPE_CD"/>
                <Cell col="3" displaytype="text" text="bind:RECIPE_NAME"/>
                <Cell col="4" displaytype="normal" style="align:center;" text="bind:RECIPE_CLASS_NAME"/>
                <Cell col="5" displaytype="normal" text="bind:RECIPE_TYPE_NAME" combodataset="Dataset04" combocodecol="코드" combodatacol="값"/>
                <Cell col="6" text="bind:CUISINE_TYPE_NAME"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static15" text="변경 전 자재" class="sta_WF_Title01" position="absolute 692 96 798 114" anchor="top right" onclick="Static15_onclick" style="color:red;"/>
        <Static id="Static14" class="sta_WFSA_Labelbg" position="absolute 692 362 1237 429" anchor="top right"/>
        <Static id="Static43" text="W10" visible="false" position="absolute 1 114 682 124" style="background:#ff000055;align:center middle;"/>
        <Static id="Static24" text="W15" visible="false" position="absolute 1 124 16 171" style="background:#ff000055;align:center middle;"/>
        <Static id="Static44" text="W10" visible="false" position="absolute 1 171 682 181" style="background:#ff000055;align:center middle;"/>
        <Static id="Static51" text="W05." visible="false" position="absolute 16 145 667 150" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static46" text="자재명" class="sta_WFSA_label" position="absolute 15 125 66 146" anchor="left top"/>
        <Static id="Static34" text="W10" visible="false" position="absolute 59 124 69 145" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static16" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 262 124 292 145" anchor="left top"/>
        <Static id="Static17" text="대분류" class="sta_WFSA_label" position="absolute 15 151 66 172" anchor="left top"/>
        <Static id="Static22" text="W10" visible="false" position="absolute 59 150 69 171" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static23" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 207 150 237 171" anchor="left top"/>
        <Combo id="cbo_bItemClass2" taborder="116" position="absolute 69 150 207 171" index="-1" innerdataset="@ds_bCboItemClass2" codecolumn="CLASS_CODE" datacolumn="CLASS_NAME" onitemchanged="cbo_bItemClass2_onitemchanged"/>
        <Static id="Static26" text="중분류" class="sta_WFSA_label" position="absolute 237 151 288 172" anchor="left top"/>
        <Combo id="cbo_bItemClass3" taborder="117" position="absolute 291 150 429 171" innerdataset="@ds_bCboItemClass3" codecolumn="CLASS_CODE" datacolumn="CLASS_NAME" onitemchanged="cbo_bItemClass3_onitemchanged"/>
        <Static id="Static27" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 429 150 459 171" anchor="left top"/>
        <Static id="Static28" text="소분류" class="sta_WFSA_label" position="absolute 459 151 510 172" anchor="left top"/>
        <Combo id="cbo_bItemClass4" taborder="118" position="absolute 513 150 667 171" datacolumn="CLASS_NAME" codecolumn="CLASS_CODE" innerdataset="@ds_bCboItemClass4"/>
        <Static id="Static30" text="W10" visible="false" position="absolute 281 150 291 171" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static31" text="W10" visible="false" position="absolute 503 150 513 171" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Edit id="edt_bItemNm" taborder="0" position="absolute 69 124 262 146" onkeydown="edt_bItemNm_onkeydown" imemode="hangul"/>
        <CheckBox id="chk_bZeroPrice" taborder="120" text="불용자재 조회" position="absolute 292 124 408 144" falsevalue="0" truevalue="1"/>
        <Button id="btn_bSearch" taborder="1" text="조회" class="btn_WF_Custom" position="absolute 614 124 667 145" onclick="btn_bSearch_onclick"/>
        <Static id="Static29" text="W15" visible="false" position="absolute 667 124 682 171" style="background:#ff000055;align:center middle;"/>
        <Static id="Static32" class="sta_WFSA_Labelbg" position="absolute 0 453 682 520" anchor="left top right"/>
        <Static id="Static33" text="W10" visible="false" position="absolute 1 453 682 463" style="background:#ff000055;align:center middle;"/>
        <Static id="Static36" text="W10" visible="false" position="absolute 1 510 682 520" style="background:#ff000055;align:center middle;"/>
        <Static id="Static54" text="W15" visible="false" position="absolute 667 463 682 510" style="background:#ff000055;align:center middle;"/>
        <Static id="Static04" text="사업장" class="sta_WFDA_Label01" position="absolute 0 30 116 57" anchor="left top" style="background:#dcf7f9ff;"/>
        <Static id="Static05" class="sta_WFDA_Labelbg" position="absolute 115 30 1237 57" anchor="left top right"/>
        <Static id="Static07" text="W15" visible="false" position="absolute 1 463 16 510" style="background:#ff000055;align:center middle;"/>
        <Static id="Static08" text="W05." visible="false" position="absolute 16 484 667 489" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static09" text="자재명" class="sta_WFSA_label" position="absolute 15 464 66 485" anchor="left top"/>
        <Static id="Static35" text="W10" visible="false" position="absolute 59 463 69 484" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static37" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 207 463 237 484" anchor="left top"/>
        <Static id="Static38" text="대분류" class="sta_WFSA_label" position="absolute 15 490 66 511" anchor="left top"/>
        <Static id="Static39" text="W10" visible="false" position="absolute 59 489 69 510" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static40" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 207 489 237 510" anchor="left top"/>
        <Combo id="cbo_aItemClass2" taborder="131" position="absolute 69 489 207 510" innerdataset="@ds_aCboItemClass2" codecolumn="CLASS_CODE" datacolumn="CLASS_NAME" onitemchanged="cbo_aItemClass2_onitemchanged"/>
        <Static id="Static41" text="중분류" class="sta_WFSA_label" position="absolute 237 490 288 511" anchor="left top"/>
        <Combo id="cbo_aItemClass3" taborder="132" position="absolute 291 489 429 510" innerdataset="@ds_aCboItemClass3" codecolumn="CLASS_CODE" datacolumn="CLASS_NAME" onitemchanged="cbo_aItemClass3_onitemchanged"/>
        <Static id="Static42" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 429 463 459 510" anchor="left top"/>
        <Static id="Static45" text="소분류" class="sta_WFSA_label" position="absolute 459 490 510 511" anchor="left top"/>
        <Combo id="cbo_aItemClass4" taborder="133" position="absolute 513 489 667 510" codecolumn="CLASS_CODE" datacolumn="CLASS_NAME" innerdataset="@ds_aCboItemClass4"/>
        <Static id="Static47" text="W10" visible="false" position="absolute 281 463 291 510" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static48" text="W10" visible="false" position="absolute 503 489 513 510" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Edit id="edt_aItemNm" taborder="2" position="absolute 69 463 207 485" onkeydown="edt_aItemNm_onkeydown" imemode="hangul"/>
        <Button id="btn_aSearch" taborder="3" text="조회" class="btn_WF_Custom" position="absolute 614 463 667 484" onclick="btn_aSearch_onclick"/>
        <Static id="Static50" text="W10" visible="false" position="absolute 692 362 1237 372" style="background:#ff000055;align:center middle;" anchor="top right"/>
        <Static id="Static52" text="W15" visible="false" position="absolute 692 372 707 419" style="background:#ff000055;align:center middle;" anchor="top right"/>
        <Static id="Static53" text="W10" visible="false" position="absolute 692 419 1237 429" style="background:#ff000055;align:center middle;" anchor="top right"/>
        <Static id="Static56" text="레시피유형" class="sta_WFSA_label" position="absolute 707 399 782 420" anchor="top right"/>
        <Static id="Static57" text="조리법유형" class="sta_WFSA_label" position="absolute 942 399 1017 420" anchor="top right"/>
        <Static id="Static58" text="W10" visible="false" position="absolute 777 398 787 419" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Static id="Static59" text="W10" visible="false" position="absolute 1012 398 1022 419" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Combo id="cbo_recipeType" taborder="140" position="absolute 787 398 912 419" index="-1" innerdataset="@ds_cboRecipeType" codecolumn="CODE" datacolumn="CODE_NAME" anchor="top right" onitemchanged="cbo_recipeType_onitemchanged"/>
        <Combo id="cbo_cuisineType" taborder="141" position="absolute 1022 398 1147 419" innerdataset="@ds_cboCuisineType" codecolumn="CODE" datacolumn="CODE_NAME" anchor="top right"/>
        <Static id="Static60" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 692 429 1237 434" anchor="top right"/>
        <Static id="Static55" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 912 398 942 419" anchor="top right"/>
        <Static id="Static61" text="변경대상 레시피" class="sta_WF_Title01" position="absolute 692 344 822 362" anchor="top right" style="color:red;"/>
        <Static id="Static62" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 692 357 1237 362" anchor="top right"/>
        <Grid id="grd_sourceItemList" taborder="142" binddataset="ds_sourceItemList" useinputpanel="false" autofittype="col" position="absolute 690 114 1237 237" anchor="top right" oncelldblclick="grd_sourceItemList_oncelldblclick" class="grd_WF_LineNone">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="70"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="70"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="자재코드" taborder="undefined"/>
                <Cell col="1" text="자재명"/>
                <Cell col="2" text="규격"/>
                <Cell col="3" text="단가"/>
                <Cell col="4" text="g단가"/>
              </Band>
              <Band id="body">
                <Cell displaytype="normal" text="bind:ITEM_CODE"/>
                <Cell col="1" displaytype="text" edittype="none" text="bind:ITEM_NAME" expandshow="hide" expandsize="15"/>
                <Cell col="2" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="3" displaytype="number" text="bind:ITEM_PRICE"/>
                <Cell col="4" displaytype="number" text="bind:G_ITEM_PRICE"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static63" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 692 339 1237 344" anchor="left top"/>
        <Static id="Static64" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 692 255 851 260" anchor="top right"/>
        <Static id="Static65" text="변경 후 자재" class="sta_WF_Title01" position="absolute 692 242 798 260" anchor="top right" style="color:red;"/>
        <Grid id="grd_targetItemList" taborder="143" binddataset="ds_targetItemList" useinputpanel="false" autofittype="col" position="absolute 690 260 1237 339" anchor="top right" oncelldblclick="grd_targetItemList_oncelldblclick" class="grd_WF_LineNone">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="70"/>
                <Column size="150"/>
                <Column size="150"/>
                <Column size="70"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="자재코드" taborder="undefined"/>
                <Cell col="1" text="자재명"/>
                <Cell col="2" text="규격"/>
                <Cell col="3" text="단가"/>
                <Cell col="4" text="g단가"/>
              </Band>
              <Band id="body">
                <Cell displaytype="normal" text="bind:ITEM_CODE"/>
                <Cell col="1" displaytype="text" edittype="none" text="bind:ITEM_NAME" expandshow="hide" expandsize="15"/>
                <Cell col="2" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="3" displaytype="number" text="bind:ITEM_PRICE"/>
                <Cell col="4" displaytype="number" text="bind:G_ITEM_PRICE"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static66" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 692 237 1237 242" anchor="left top"/>
        <Button id="btn_recipeSearch" taborder="144" text="조회" class="btn_WF_Custom" position="absolute 1169 372 1222 393" onclick="btn_recipeSearch_onclick" anchor="top right"/>
        <Static id="Static67" text="W15" visible="false" position="absolute 1222 372 1237 393" style="background:#ff000055;align:center middle;" anchor="top right"/>
        <Grid id="grd_aItemList" taborder="145" binddataset="ds_aItemList" useinputpanel="false" autofittype="col" oncelldblclick="grd_aItemList_oncelldblclick" position="absolute 0 525 682 710" anchor="all" onmousemove="grd_aItemList_onmousemove" class="grd_WF_LineNone">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="40"/>
                <Column size="32"/>
                <Column size="70"/>
                <Column size="200"/>
                <Column size="100"/>
                <Column size="44"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" colspan="2" text="자재코드" taborder="undefined"/>
                <Cell col="3" text="자재명"/>
                <Cell col="4" text="규격"/>
                <Cell col="5" text="단위"/>
                <Cell col="6" text="자재특성"/>
                <Cell col="7" text="단가"/>
                <Cell col="8" text="g단가"/>
                <Cell col="9" text="폐기율"/>
              </Band>
              <Band id="body">
                <Cell displaytype="normal" edittype="none" style="background2: ;" text="expr:rowidx + 1"/>
                <Cell col="1" displaytype="image" style="background2: ;" text="expr:LOW_PRICE_YN == 'Y' ? 'theme://Images/new/grd_WF_Money2.png' : ''"/>
                <Cell col="2" displaytype="normal" style="background:EXPR(fn_acolor(currow));background2:EXPR(fn_acolor(currow));selectbackground:EXPR(fn_acolor(currow));" text="bind:ITEM_CODE"/>
                <Cell col="3" displaytype="text" edittype="none" style="background:EXPR(fn_acolor(currow));background2:EXPR(fn_acolor(currow));selectbackground:EXPR(fn_acolor(currow));" text="bind:ITEM_NAME" expandshow="hide" expandsize="15"/>
                <Cell col="4" displaytype="text" style="align:left;background2: ;" text="bind:ITEM_SIZE"/>
                <Cell col="5" displaytype="normal" style="background2: ;" text="bind:PO_UOM"/>
                <Cell col="6" displaytype="image" style="align:center;" text="bind:FEATURE_ICON"/>
                <Cell col="7" displaytype="number" style="background2: ;" text="bind:ITEM_PRICE"/>
                <Cell col="8" displaytype="number" style="background2: ;" text="bind:G_ITEM_PRICE"/>
                <Cell col="9" displaytype="number" style="background2: ;" text="bind:DISUSE_RATE"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static68" text="레시피분류" class="sta_WFDA_Label01" position="absolute 0 56 116 83" anchor="left top" style="background:#dcf7f9ff;"/>
        <Button id="btn_chkAll00" taborder="147" text="전체" onclick="btn_chkAll_onclick" class="btn_WF_Custom" position="absolute 118 59 171 80"/>
        <Static id="Static70" text="식당군" class="sta_WFDA_Label01" position="absolute 368 30 484 57" anchor="left top" style="background:#dcf7f9ff;"/>
        <Combo id="cbo_hallClass" taborder="150" innerdataset="@ds_cboHallClass" codecolumn="HALL_CLASS" datacolumn="HALL_CLASS_NAME" displayrowcount="10" position="absolute 486 33 644 54"/>
        <MaskEdit id="me_Date" taborder="151" type="string" mask="####-##-##" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" oneditclick="g_Date_OnFocus" class="msk_WF_Cal" position="absolute 291 463 409 484" userdata="btn_FROM_MENU_DATE"/>
        <Button id="btn_Date" taborder="152" onclick="g_CalButton_OnClick" class="btn_WF_cal" position="absolute 408 463 429 484" userdata="me_Date"/>
        <Static id="Static72" text="기준일" class="sta_WFSA_label" position="absolute 237 464 288 485" anchor="left top"/>
        <Static id="Static73" text="W05." visible="false" position="absolute 693 393 1236 398" anchor="left top" style="background:#ff000055;align:center middle;"/>
        <Static id="Static74" text="식당군" class="sta_WFSA_label" position="absolute 707 373 782 394" anchor="top right"/>
        <Static id="Static75" text="W10" visible="false" position="absolute 777 372 787 393" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Combo id="cbo_recipeType00" taborder="153" innerdataset="@ds_cboHallClass" codecolumn="HALL_CLASS" datacolumn="HALL_CLASS_NAME" position="absolute 787 372 912 393" anchor="top right"/>
        <Static id="Static76" text="자재일괄수정 시 이미 등록된 식단에는 적용되지 않습니다. 구축된 업장표준레시피에만 적용됩니다." class="sta_WF_DiscInfo" position="absolute 70 434 681 449"/>
        <Static id="Static77" text="레시피를 선택하여 변경할 경우 조회하세요." class="sta_WF_DiscInfo" position="absolute 821 344 1236 359" anchor="top right"/>
        <Static id="Static78" text="자재 더블클릭 시 변경전/후 자재로 추가, 삭제가 가능합니다." class="sta_WF_DiscInfo" position="absolute 70 95 459 110" anchor="default"/>
        <UpjangSearchComponent id="edt_upjang" titletext="업장 검색용 Component" taborder="154" text="UpjangSearchComponent00" position="absolute 118 33 366 54" bindDataset="" bindUpjangCodeColumn="" bindUpjangNameColumn="" eventBeforeTrigger="" eventAfterTrigger="fn_searchRecipeClass" roleSetId="ScoAuthLevel01" class="edt_WF_Essential"/>
        <Static id="Static79" position="absolute 527 94 542 109" style="background:#ffaa9cff;"/>
        <Static id="Static2" text="불용자재" position="absolute 545 92 618 113"/>
        <Static id="Static1" position="absolute 614 94 629 109" style="background:#ffe49cff;"/>
        <Static id="Static80" text="금지자재" position="absolute 633 92 682 113"/>
        <CheckBox id="chk_aZeroPrice" taborder="155" text="불용자재 제외" value="0" truevalue="1" falsevalue="0" position="absolute 459 463 575 483" visible="false"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item0" compid="edt_bItemNm" propid="value" datasetid="ds_bCond" columnid="ITEM_NAME"/>
      <BindItem id="item1" compid="chk_bZeroPrice" propid="value" datasetid="ds_bCond" columnid="ZERO_PRICE"/>
      <BindItem id="item3" compid="cbo_bItemClass2" propid="value" datasetid="ds_bCond" columnid="ITEM_CLASS2"/>
      <BindItem id="item4" compid="cbo_bItemClass3" propid="value" datasetid="ds_bCond" columnid="ITEM_CLASS3"/>
      <BindItem id="item5" compid="cbo_bItemClass4" propid="value" datasetid="ds_bCond" columnid="ITEM_CLASS4"/>
      <BindItem id="item6" compid="edt_aItemNm" propid="value" datasetid="ds_aCond" columnid="ITEM_NAME"/>
      <BindItem id="item7" compid="cbo_aItemClass2" propid="value" datasetid="ds_aCond" columnid="ITEM_CLASS2"/>
      <BindItem id="item8" compid="cbo_aItemClass3" propid="value" datasetid="ds_aCond" columnid="ITEM_CLASS3"/>
      <BindItem id="item9" compid="cbo_aItemClass4" propid="value" datasetid="ds_aCond" columnid="ITEM_CLASS4"/>
      <BindItem id="item12" compid="cbo_recipeType" propid="value" datasetid="ds_recipeCond" columnid="RECIPE_TYPE"/>
      <BindItem id="item13" compid="cbo_cuisineType" propid="value" datasetid="ds_recipeCond" columnid="CUISINE_TYPE"/>
      <BindItem id="item11" compid="cbo_recipeType00" propid="value" datasetid="ds_recipeCond" columnid="HALL_CLASS"/>
      <BindItem id="item14" compid="me_Date" propid="value" datasetid="ds_aCond" columnid="SDATE"/>
      <BindItem id="item10" compid="chk_aZeroPrice" propid="value" datasetid="ds_aCond" columnid="ZERO_PRICE"/>
    </Bind>
    <Objects>
      <Dataset id="ds_bCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_CLASS2" type="STRING" size="256"/>
          <Column id="ITEM_CLASS3" type="STRING" size="256"/>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
          <Column id="SDATE" type="STRING" size="256"/>
          <Column id="ZERO_PRICE" type="STRING" size="256"/>
          <Column id="LOW_PRICE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_aCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_CLASS2" type="STRING" size="256"/>
          <Column id="ITEM_CLASS3" type="STRING" size="256"/>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
          <Column id="SDATE" type="STRING" size="256"/>
          <Column id="ZERO_PRICE" type="STRING" size="256"/>
          <Column id="LOW_PRICE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_aCboItemClass2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CLASS_CODE" type="STRING" size="256"/>
          <Column id="CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_aCboItemClass3" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CLASS_CODE" type="STRING" size="256"/>
          <Column id="CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_aCboItemClass4" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CLASS_CODE" type="STRING" size="256"/>
          <Column id="CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bCboItemClass2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CLASS_CODE" type="STRING" size="256"/>
          <Column id="CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bCboItemClass3" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CLASS_CODE" type="STRING" size="256"/>
          <Column id="CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bCboItemClass4" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CLASS_CODE" type="STRING" size="256"/>
          <Column id="CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_bItemList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_bItemList_oncolumnchanged">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_SIZE" type="STRING" size="256"/>
          <Column id="PO_UOM" type="STRING" size="256"/>
          <Column id="ITEM_INFO" type="STRING" size="256"/>
          <Column id="ITEM_PRICE" type="STRING" size="256"/>
          <Column id="KG_CONVERT_RATE" type="STRING" size="256"/>
          <Column id="G_ITEM_PRICE" type="STRING" size="256"/>
          <Column id="DISUSE_RATE" type="STRING" size="256"/>
          <Column id="RESTRICT_YN" type="STRING" size="256"/>
          <Column id="RESTRICT_START" type="STRING" size="256"/>
          <Column id="RESTRICT_END" type="STRING" size="256"/>
          <Column id="RESTRICT_REASON" type="STRING" size="256"/>
          <Column id="LOW_PRICE_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_aItemList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_SIZE" type="STRING" size="256"/>
          <Column id="PO_UOM" type="STRING" size="256"/>
          <Column id="ITEM_INFO" type="STRING" size="256"/>
          <Column id="ITEM_PRICE" type="STRING" size="256"/>
          <Column id="KG_CONVERT_RATE" type="STRING" size="256"/>
          <Column id="G_ITEM_PRICE" type="STRING" size="256"/>
          <Column id="DISUSE_RATE" type="STRING" size="256"/>
          <Column id="RESTRICT_YN" type="STRING" size="256"/>
          <Column id="RESTRICT_START" type="STRING" size="256"/>
          <Column id="RESTRICT_END" type="STRING" size="256"/>
          <Column id="RESTRICT_REASON" type="STRING" size="256"/>
          <Column id="LOW_PRICE_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="UPJANGNM" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_CLASS2" type="STRING" size="256"/>
          <Column id="ITEM_CLASS3" type="STRING" size="256"/>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
          <Column id="ZERO_PRICE" type="STRING" size="256"/>
          <Column id="LOW_PRICE" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="SDATE" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recipeList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
          <Column id="RECIPE_NAME" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS_NAME" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE_NAME" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE_NAME" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="CHK_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sourceItemList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_SIZE" type="STRING" size="256"/>
          <Column id="PO_UOM" type="STRING" size="256"/>
          <Column id="ITEM_INFO" type="STRING" size="256"/>
          <Column id="ITEM_PRICE" type="STRING" size="256"/>
          <Column id="KG_CONVERT_RATE" type="STRING" size="256"/>
          <Column id="G_ITEM_PRICE" type="STRING" size="256"/>
          <Column id="DISUSE_RATE" type="STRING" size="256"/>
          <Column id="RESTRICT_YN" type="STRING" size="256"/>
          <Column id="RESTRICT_START" type="STRING" size="256"/>
          <Column id="RESTRICT_END" type="STRING" size="256"/>
          <Column id="RESTRICT_REASON" type="STRING" size="256"/>
          <Column id="LOW_PRICE_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_targetItemList" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="CHK" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="ITEM_NAME" type="STRING" size="256"/>
          <Column id="ITEM_SIZE" type="STRING" size="256"/>
          <Column id="PO_UOM" type="STRING" size="256"/>
          <Column id="ITEM_INFO" type="STRING" size="256"/>
          <Column id="ITEM_PRICE" type="STRING" size="256"/>
          <Column id="KG_CONVERT_RATE" type="STRING" size="256"/>
          <Column id="G_ITEM_PRICE" type="STRING" size="256"/>
          <Column id="DISUSE_RATE" type="STRING" size="256"/>
          <Column id="RESTRICT_YN" type="STRING" size="256"/>
          <Column id="RESTRICT_START" type="STRING" size="256"/>
          <Column id="RESTRICT_END" type="STRING" size="256"/>
          <Column id="RESTRICT_REASON" type="STRING" size="256"/>
          <Column id="LOW_PRICE_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboRecipeType">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboCuisineType">
        <ColumnInfo>
          <Column id="CODE" type="STRING" size="256"/>
          <Column id="CODE_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recipeCond" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="ITEM_CODE" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_TYPE" type="STRING" size="256"/>
          <Column id="CUISINE_TYPE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cboHallClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="HALL_CLASS" type="STRING" size="256"/>
          <Column id="HALL_CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_chkRecipeClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="RECIPE_CLASS" type="STRING" size="256"/>
          <Column id="RECIPE_CLASS_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <InitValue/>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";

/******************************************************************************************
 * 시스템구분 : 메뉴관리/레시피관리
 * 프로그램명 : FSI90010E.XML
 * 기ㅡㅡㅡ능 : 표준레시피일괄수정
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 * ----------------------------------------------------------------------------------------
 * HISTORY : 2015-04-17 고도화 재개발
 ******************************************************************************************/
 
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================

//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(this);

	// X-Framework : Action 정보 생성
	fsp_init(this);

	// 초기화
	fn_init();
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_init()
 * 기ㅡㅡㅡ능 : 초기화
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function fn_init() 
{
	ds_cond.clearData();
	ds_cond.addRow();

	// 조회조건 DataSet 초기화
	ds_bCond.clearData();
	ds_bCond.addRow();
	ds_aCond.clearData();
	ds_aCond.addRow();
	ds_recipeCond.clearData();
	ds_recipeCond.addRow();

	fsp_clear(this);
	var sUpjang = "";
	var sDataSet = "";
	if(gfn_length(edt_upjang.getUpjangCode())!= 0)
	{
		sUpjang = "UPJANG=" + wrapQuote(edt_upjang.getUpjangCode());
		sDataSet = "ds_cboHallClass=ds_UP_HALL_CLASS ds_chkRecipeClass=ds_out ";
		fsp_addSearch(this, "fs/fsc:FSC_UPJANG_HALL_CLASS_S001");	// 업장별 식당군 가져오기 
		fsp_addSearch(this, "fs/fsc:FSC_UPJANG_RECIPE_S001");		// 업장별 레시피분류 가져오기 
    }

	// 자재 분류코드 조회
	fsp_addSearch(this, "fs/fsi:FSI90010E_S002");	// 자재 대분류	
	fsp_addSearch(this, "fs/fsi:FSI90010E_S003");	// 자재 중분류
	fsp_addSearch(this, "fs/fsi:FSI90010E_S004");	// 자재 소분류
	fsp_callService(this, "", "", "", sDataSet + "ds_bCboItemClass2=ds_cboItemClass2 ds_bCboItemClass3=ds_cboItemClass3 ds_bCboItemClass4=ds_cboItemClass4", "BLANK=Y " + sUpjang, "fn_callbackInit");

	// 공통코드 조회
	v_ds = fn_common_code("'FS0002','FS0003'","","","blk","Y");

	//FS0002 : RECIPE_TYPE
	v_fil_cond = "GROUP_CODE == 'FS0002'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboRecipeType, v_ds.name);	

	//FS0003 : CUISINE_TYPE
	v_fil_cond = "GROUP_CODE == 'FS0003'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_cboCuisineType, v_ds.name);	

	ds_aCond.setColumn(0, "ZERO_PRICE", 1);
	me_Date.value = fn_CurrDateWeek();
}

function fn_makeChkRecipeClass()
{
	var iWidth = 171;
	var iUnit = 110;
	var sCode = "";
	var sName = "";
	for(var i=0; i < ds_chkRecipeClass.getRowCount(); i++)
	{
		sCode = ds_chkRecipeClass.getColumn(i, "RECIPE_CLASS");
		sName = ds_chkRecipeClass.getColumn(i, "RECIPE_CLASS_NAME");
		
		if(gfn_isNull(sCode)) continue;
		
		var chkObj = new CheckBox("chk_recipeClass" + i, iWidth + 2, 60, iWidth + iUnit, 80);
		chkObj.text = sName;
		chkObj.userdata = sCode;
		this.addChild("chk_recipeClass" + i, chkObj);
		chkObj.onclick.setHandler(fn_chkClick);
		chkObj.style.padding.left = 5;
		chkObj.style.background.color = "#EEEEEE";
		chkObj.show();
		iWidth = iWidth + iUnit;
	}
}

function fn_initForm() 
{
	// 조회조건 DataSet 초기화
	ds_aCond.clearData();
	ds_aCond.addRow();
	ds_bCond.clearData();
	ds_bCond.addRow();

	// 데이터 초기화
	ds_bItemList.clearData();
	ds_aItemList.clearData();
	ds_sourceItemList.clearData();
	ds_targetItemList.clearData();
	ds_recipeList.clearData();
	
	// 분류코드 필터링 초기화
	ds_bCboItemClass3.filter("");
	ds_bCboItemClass4.filter("");
	ds_aCboItemClass3.filter("");
	ds_aCboItemClass4.filter("");
	
	me_Date.value = fn_CurrDateWeek();
}

function fn_chkClick(obj)
{
	if(obj.value) 
	{
		obj.style.background.color = "pink";
		obj.style.font = "Gulim,9,bold";
		obj.style.color = "#555555";
	}
	else
	{
		obj.style.background.color = "#EEEEEE";
		obj.style.font = "Gulim,9";
		obj.style.color = "";
	}
}

function fn_callbackInit(errCode, errMsg)
{
	if( errCode != 0 ) {
		g_Message("EE", errMsg);
		return;
	}
	else
	{
		// 변경후 대,중,소 분류로 분류코드 복사
		Copy(ds_aCboItemClass2, "ds_bCboItemClass2");
		Copy(ds_aCboItemClass3, "ds_bCboItemClass3");
		Copy(ds_aCboItemClass4, "ds_bCboItemClass4");
		
		// 레시피분류 체크박스 생성
		fn_makeChkRecipeClass();
		
		edt_bItemNm.setFocus();
	}
}

//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,출력)
//
//=========================================================================================

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_setRecipeClass(dsObj, sRecipeClass)
 * 기ㅡㅡㅡ능 : 레시피분류 체크박스의 값을 조회 ds에 세팅한다.
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function fn_searchRecipeClass()
{
	// 레시피분류 체크박스 초기화
	for(var i=0; i < ds_chkRecipeClass.getRowCount(); i++)
	{
		this.removeChild("chk_recipeClass" + i);
	}
	
	var sUpjang = "UPJANG=" + wrapQuote(edt_upjang.getUpjangCode());
	var sDataSet = "ds_cboHallClass=ds_UP_HALL_CLASS ds_chkRecipeClass=ds_out ";
	fsp_clear(this);
	fsp_addSearch(this, "fs/fsc:FSC_UPJANG_HALL_CLASS_S001");	// 업장별 식당군 가져오기 
	fsp_addSearch(this, "fs/fsc:FSC_UPJANG_RECIPE_S001");		// 업장별 레시피분류 가져오기 
	fsp_callService(this, "", "", "", sDataSet, "BLANK='Y' USE_YN='Y' "+ sUpjang , "fn_callbackUpjang");
}
 
function fn_setRecipeClass(dsObj, sRecipeClass)
{
	var arrRecipeClass = sRecipeClass.split(",");
	for(var i=0; i<arrRecipeClass.length ; i++)
	{
		dsObj.setColumn(i, "RECIPE_CLASS", arrRecipeClass[i]);
		dsObj.addRow();
	}
}

function fn_getRecipeClass()
{
	var sRecipeClass = "";

	var sCode = "";
	var sName = "";
	var chkObj;
	for(var i=0; i < ds_chkRecipeClass.getRowCount(); i++)
	{
		sCode = ds_chkRecipeClass.getColumn(i, "RECIPE_CLASS");
		sName = ds_chkRecipeClass.getColumn(i, "RECIPE_CLASS_NAME");
		
		if(gfn_isNull(sCode)) continue;

		chkObj = eval("chk_recipeClass" + i);
		if(chkObj.value == 1)
		{
			sRecipeClass = sRecipeClass + chkObj.userdata + ',';
		}
	}
	return sRecipeClass;
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
function fn_callbackUpjang(errCode, errMsg)
{
	if( errCode != 0 ) {
		g_Message("EE", errMsg);
		return;
	}
	else
	{
		// 폼 초기화
		fn_initForm();
		
		// 레시피분류 체크박스 생성
		fn_makeChkRecipeClass();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_bItemClass2_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 변경전 대분류 변경
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function cbo_bItemClass2_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_bCboItemClass3.filter("gfn_left(CLASS_CODE,3)=="+wrapQuote(gfn_left(e.postvalue,3))+"||gfn_length(CLASS_CODE)==0");
	ds_bCboItemClass4.filter("gfn_left(CLASS_CODE,5)=="+wrapQuote(gfn_left(e.postvalue,5))+"||gfn_length(CLASS_CODE)==0");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_bItemClass3_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 변경전 중분류 변경
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function cbo_bItemClass3_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_bCboItemClass4.filter("gfn_left(CLASS_CODE,5)=="+wrapQuote(gfn_left(e.postvalue,5))+"||gfn_length(CLASS_CODE)==0");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_aItemClass2_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 변경후 대분류 변경
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function cbo_aItemClass2_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_aCboItemClass3.filter("gfn_left(CLASS_CODE,3)=="+wrapQuote(gfn_left(e.postvalue,3))+"||gfn_length(CLASS_CODE)==0");
	ds_aCboItemClass4.filter("gfn_left(CLASS_CODE,5)=="+wrapQuote(gfn_left(e.postvalue,5))+"||gfn_length(CLASS_CODE)==0");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_aItemClass3_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 변경후 중분류 변경
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function cbo_aItemClass3_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	ds_aCboItemClass4.filter("gfn_left(CLASS_CODE,5)=="+wrapQuote(gfn_left(e.postvalue,5))+"||gfn_length(CLASS_CODE)==0");
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_bSearch_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 변경전 자재조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function btn_bSearch_onclick(obj:Button,  e:ClickEventInfo)
{
	// 레시피 분류선택 체크
	var sRecipeClass = fn_getRecipeClass();
	
	if(gfn_isNull(sRecipeClass))
	{
		g_Message("EE", "변경하시려는 레시피 분류를 선택하시거나 레시피를 선택해 주십시요.");
		return false;
	}
	
    // 조회조건 미입력 체크
//     if ((gfn_isNull(ds_bCond.getColumn(0, "ITEM_NAME"))&&
//        gfn_isNull(ds_bCond.getColumn(0, "ITEM_CLASS2"))&&
//        gfn_isNull(ds_bCond.getColumn(0, "ITEM_CLASS3"))&&
//        gfn_isNull(ds_bCond.getColumn(0, "ITEM_CLASS4")))){
// 		g_Message("EE","자재명을 입력하시거나 또는 자재분류를 선택하여 조회하여 주십시요."); 
// 		edt_bItemNm.setFocus();
// 		return false;
// 	}
		
	ds_cond.clearData();
	Copy(ds_cond, "ds_bCond");
	ds_cond.setColumn(0, "UPJANG", edt_upjang.getUpjangCode());		// 업장코드
	ds_cond.setColumn(0, "HALL_CLASS", cbo_hallClass.value);	// 식당군
	
	// 레시피 분류
	var arrRecipeClass = sRecipeClass.split(",");
	for(var i=0; i<arrRecipeClass.length ; i++)
	{
		ds_cond.setColumn(i, "RECIPE_CLASS", arrRecipeClass[i]);
		ds_cond.addRow();
	}

	fsp_clear(this);
	fsp_addSearch(this,"fs/fsi:FSI90020E_S001");
	fsp_callService(this,"","","ds_cond=ds_cond","ds_bItemList=ds_itemList","","fn_bCallbackSearch");	
}

function fn_bCallbackSearch(errCode, errMsg)
{
	if(errCode != 0)
	{
		g_Message("EE", errMsg);
		return;
	}
	else
	{
		edt_bItemNm.setFocus();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_aSearch_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 변경후 자재조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function btn_aSearch_onclick(obj:Button,  e:ClickEventInfo)
{
	// 레시피 분류선택 체크
	var sRecipeClass = fn_getRecipeClass();
	
	if(gfn_isNull(sRecipeClass))
	{
		g_Message("EE", "변경하시려는 레시피 분류를 선택하시거나 레시피를 선택해 주십시요.");
		return false;
	}
	
    // 조회조건 미입력 체크
//     if ((gfn_isNull(ds_aCond.getColumn(0, "ITEM_NAME"))&&
//        gfn_isNull(ds_aCond.getColumn(0, "ITEM_CLASS2"))&&
//        gfn_isNull(ds_aCond.getColumn(0, "ITEM_CLASS3"))&&
//        gfn_isNull(ds_aCond.getColumn(0, "ITEM_CLASS4")))){
// 		g_Message("EE","자재명을 입력하시거나 또는 자재분류를 선택하여 조회하여 주십시요."); 
// 		edt_bItemNm.setFocus();
// 		return false;
// 	}
		
	ds_cond.clearData();
	Copy(ds_cond, "ds_aCond");
	ds_cond.setColumn(0, "UPJANG", edt_upjang.getUpjangCode());		// 업장코드
	ds_cond.setColumn(0, "HALL_CLASS", cbo_hallClass.value);	// 식당군
	
	// 레시피 분류
	var arrRecipeClass = sRecipeClass.split(",");
	for(var i=0; i<arrRecipeClass.length ; i++)
	{
		ds_cond.setColumn(i, "RECIPE_CLASS", arrRecipeClass[i]);
		ds_cond.addRow();
	}

	fsp_clear(this);
	fsp_addSearch(this,"fs/fsi:FSI90020E_S002");
	fsp_callService(this,"","","ds_cond=ds_cond","ds_aItemList=ds_itemList","","fn_aCallbackSearch");
}

function fn_aCallbackSearch(errCode, errMsg)
{
	if(errCode != 0)
	{
		g_Message("EE", errMsg);
		return;
	}
	else
	{
		edt_aItemNm.setFocus();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : edt_bItemNm_onkeydown(obj:Edit, e:KeyEventInfo)
 * 기ㅡㅡㅡ능 : 변경전 자재명 엔터처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function edt_bItemNm_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13) 
	{
		btn_bSearch.setFocus();
		btn_bSearch.click();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : edt_aItemNm_onkeyup(obj:Edit, e:KeyEventInfo)
 * 기ㅡㅡㅡ능 : 변경후 자재명 엔터처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function edt_aItemNm_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if (e.keycode == 13) 
	{
		btn_aSearch.setFocus();
		btn_aSearch.click();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_bItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 변경전 자재 더블클릭시 해당 자재가 포함된 레시피 조회
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function grd_bItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	// 변경전 자재 중복체크
	var sItemCode = ds_bItemList.getColumn(e.row, "ITEM_CODE");
	var sCheckDup = ds_sourceItemList.findRow("ITEM_CODE", sItemCode);
	if(sCheckDup > -1)
	{
		g_Message("EE", "변경 전 자재로 등록되어 있는 자재입니다.");
		ds_sourceItemList.rowposition = sCheckDup;
		return false;
	}
	
	// 변경후 자재 중복체크
	sCheckDup = ds_targetItemList.findRow("ITEM_CODE", sItemCode);
	if(sCheckDup > -1)
	{
		g_Message("EE", "변경 후 자재로 등록되어 있는 자재입니다.");
		ds_targetItemList.rowposition = sCheckDup;
		return false;
	}
	
	var nRow = ds_sourceItemList.addRow();
	ds_sourceItemList.copyRow(nRow, ds_bItemList, e.row);

	// 변경전 자재가 두건 이상일 경우는 레시피 조회를 통한 일괄변경 기능을 비활성화 처리한다.
	if(ds_sourceItemList.rowcount > 1)
	{
		if(ds_recipeList.rowcount > 0)
		{
			ds_recipeList.clearData();
		}
	}
	else
	{
		// 아이템코드
		ds_recipeCond.setColumn(0, "ITEM_CODE", sItemCode);
		
		// 레시피 목록 조회
		btn_recipeSearch.click();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_aItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 변경후 자재 더블클릭시
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function grd_aItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	// 변경전 자재 중복체크
	var sItemCode = ds_aItemList.getColumn(e.row, "ITEM_CODE");
	var sCheckDup = ds_sourceItemList.findRow("ITEM_CODE", sItemCode);
	if(sCheckDup > -1)
	{
		g_Message("EE", "변경 전 자재로 등록되어 있는 자재입니다.");
		ds_sourceItemList.rowposition = sCheckDup;
		return false;
	}
		
	ds_targetItemList.clearData();
	var nRow = ds_targetItemList.addRow();
	ds_targetItemList.copyRow(nRow, ds_aItemList, e.row);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_sourceItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 변경전 자재 더블클릭시 해당자재 삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function grd_sourceItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	ds_sourceItemList.deleteRow(e.row);

	if(ds_sourceItemList.getRowCount() == 1)
	{
		// 아이템코드
		ds_recipeCond.setColumn(0, "ITEM_CODE", ds_sourceItemList.getColumn(0, "ITEM_CODE"));
		
		// 레시피 목록 조회
		btn_recipeSearch.click();	
	}
	else if(ds_sourceItemList.getRowCount() == 0)
	{
		ds_recipeList.clearData();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_sourceItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
 * 기ㅡㅡㅡ능 : 변경후 자재 더블클릭시 해당자재 삭제
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function grd_targetItemList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	ds_targetItemList.deleteRow(e.row);
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_chkAll_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피 분류 체크박스 전체선택
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function btn_chkAll_onclick(obj:Button,  e:ClickEventInfo)
{
	var sCode = "";
	for(var i=0; i < ds_chkRecipeClass.getRowCount(); i++)
	{
		sCode = ds_chkRecipeClass.getColumn(i, "RECIPE_CLASS");
		if(gfn_isNull(sCode)) continue;
		var obj = eval("chk_recipeClass" + i);
		if(obj.value == 1)
		{
			obj.value = 0;
			obj.style.background.color = "#EEEEEE";
			obj.style.font = "Gulim,9";
			obj.style.color = "";
		} 
		else 
		{
			obj.value = 1;
			obj.style.background.color = "pink";
			obj.style.font = "Gulim,9,bold";
			obj.style.color = "#555555";
		}
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_recipeSearch_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 레시피 조회 버튼 클릭
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function btn_recipeSearch_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_sourceItemList.rowcount != 1)
	{
		return false;
	}

	ds_cond.clearData();
	Copy(ds_cond, "ds_recipeCond");
	ds_cond.setColumn(0, "UPJANG", edt_upjang.getUpjangCode());		// 업장코드
	ds_cond.setColumn(0, "HALL_CLASS", cbo_hallClass.value);	// 식당군

	// 레시피 분류선택 체크 세팅
	var sRecipeClass = fn_getRecipeClass();
	fn_setRecipeClass(ds_cond, sRecipeClass);

	// 레시피 목록 초기화
	ds_recipeList.clearData();

	fsp_clear(this);
	fsp_addSearch(this,"fs/fsi:FSI90020E_S003");
	fsp_callService(this,"","","ds_cond=ds_cond","ds_recipeList=ds_recipeList","","fn_callbackSearch");
}

function fn_callbackSearch(errCode, errMsg)
{
	if(errCode != 0)
	{
		g_Message("EE", errMsg);
		return;
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_bItemList_onmousemove(obj:Grid, e:GridMouseEventInfo)
 * 기ㅡㅡㅡ능 : 변경전 자재목록에서 금지자재 툴팁처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function grd_bItemList_onmousemove(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row >= 0)
	{
		if(ds_bItemList.getColumn(e.row, "RESTRICT_YN") == "Y")
		{
			obj.tooltiptext = "금지기간:" + ds_bItemList.getColumn(e.row,"RESTRICT_START")+"~"+ds_bItemList.getColumn(e.row,"RESTRICT_END")+"\n"+ "금지사유:" + ds_bItemList.getColumn(e.row,"RESTRICT_REASON");
		}
		else
		{
			obj.tooltiptext = "";
		}
	}
	else
	{
		obj.tooltiptext = "";
	}	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : grd_aItemList_onmousemove(obj:Grid, e:GridMouseEventInfo)
 * 기ㅡㅡㅡ능 : 변경후 자재목록에서 금지자재 툴팁처리
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function grd_aItemList_onmousemove(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row >= 0)
	{
		if(ds_aItemList.getColumn(e.row, "RESTRICT_YN") == "Y")
		{
			obj.tooltiptext = "금지기간:" + ds_aItemList.getColumn(e.row,"RESTRICT_START")+"~"+ds_aItemList.getColumn(e.row,"RESTRICT_END")+"\n"+ "금지사유:" + ds_aItemList.getColumn(e.row,"RESTRICT_REASON");
		}
		else
		{
			obj.tooltiptext = "";
		}
	}
	else
	{
		obj.tooltiptext = "";
	}		
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_changeHist_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 자재변경 이력조회 팝업
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function btn_changeHist_onclick(obj:Button,  e:ClickEventInfo)
{
 	var arg1 = gfn_trim(edt_upjang.getUpjangCode());
 	var arg2 = gfn_trim(edt_upjang.value);
	var v_result = gfn_dialog("", "U_FSI::FSI00057V.xfdl", {pUPJANG:arg1,pUPJANGNM:arg2}); 
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : btn_itemChange_onclick(obj:Button,  e:ClickEventInfo)
 * 기ㅡㅡㅡ능 : 자재일괄변경
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function btn_itemChange_onclick(obj:Button,  e:ClickEventInfo)
{
	// 사업장 체크
	if(gfn_isNull(edt_upjang.getUpjangCode()))
	{
		g_Message("EE", "사업장을 선택해주세요.");
		return false;
	}
	
	// 변경 전 자재 체크
	if(ds_sourceItemList.getRowCount() == 0)
	{
		g_Message("EE", "[변경전] 자재를 선택해주세요.");
		return false;
	}
	
	// 변경 후 자재 체크
	if(ds_targetItemList.getRowCount() == 0)
	{
		g_Message("EE", "[변경후] 자재를 선택해주세요.");
		return false;
	}

	// 변경 전 자재가 1건일 경우 레시피 선택이 되었는지 체크
	if(ds_sourceItemList.getRowCount() == 1 && !gfn_dsIsUpdated(ds_recipeList))
	{
		g_Message("EE", "변경대상 레시피를 선택해주세요.");
		return false;
	}

	// 변경 후 자재 단가가 0일 경우 체크
	if((ds_targetItemList.getColumn(ds_targetItemList.rowposition, "ITEM_PRICE"))==0)
	{
		g_Message("EE","[변경후] 자재의 단가가 0 원 입니다.\n선택하신 자재를 확인 하여 주십시요.");
		return false;
	}

	// 최종 확인
	if(!g_Confirm("04", "자재 변경 적용을 하시겠습니까?"))
	{
		return false;
	}

	// 공통정보 세팅
	trace(edt_upjang.getUpjangCode());
	ds_cond.clearData();
	ds_cond.addRow();
	ds_cond.setColumn(0, "UPJANG", edt_upjang.getUpjangCode());		// 업장코드
	
	/*************************************************************************
	 * 1. 업장표준레시피 자재수정
	 * 2. FSR_UPJANG_RECIPE_ITEM_AU Trigger에 의해 자재변경로그 입력
	 * 3. 자재변경로그 수정
	 *************************************************************************/
	// 경로 설정
	strSvcID = "FSI90020E_T001";
	strURL   = "U_svc::" + "fs/fsi/FSI90020E_T001.jsp";
	
	// 데이터셋 설정
	strInDatasets = "ds_cond=ds_cond ds_sourceItemList=ds_sourceItemList:A ds_targetItemList=ds_targetItemList:A ds_recipeList=ds_recipeList:U";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "";
	
	// 콜백함수 지정
	strCallbackFunc = "fn_callbackChange";
	jsp_transaction(this, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, false, false, false);	 
}

function fn_callbackChange(errCode, errMsg)
{
	if(errCode != 0)
	{
		g_Message("EE", errMsg);
		return;
	}
	else
	{
		g_Message("01","자재변경이 완료되었습니다.");

		// 폼 초기화
		fn_initForm();
	}
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : cbo_recipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
 * 기ㅡㅡㅡ능 : 레시피유형 변경시 조리법유형 필터링
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-07
 ******************************************************************************************/
function cbo_recipeType_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(e.postindex==0)
	{
		ds_cboCuisineType.filter("");
	}
	else
	{
		ds_cboCuisineType.filter("gfn_length(SET1)==0 || SET1=='"+e.postvalue+"'");
	}
	cbo_cuisineType.index = 0;	
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_bcolor(nRow)
 * 기ㅡㅡㅡ능 : 변경전 자재명에 칼라 적용
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_bcolor(nRow)
{
	// 불용자재
	if(ds_bItemList.getColumn(nRow, "MTG_UNS") == 'UK' || ds_bItemList.getColumn(nRow, "MTG_STP") == 'TK')
	{
		return "#FFAA9C";
	}

	// 금지 자재
	var sMenuDate = gfn_trim(ds_bItemList.getColumn(nRow, "TODAY"));
	if( sMenuDate >= ds_bItemList.getColumn(nRow,"RESTRICT_START") &&
		sMenuDate <= ds_bItemList.getColumn(nRow,"RESTRICT_END") )
	{
		if(sMenuDate >= ds_bItemList.getColumn(nRow,"CNL_START") &&
		   sMenuDate <= ds_bItemList.getColumn(nRow,"CNL_END") )
		{
			return "default";
		}
		else
		{
			return "khaki";
		}
	}
	return "default";
}

/******************************************************************************************
 * 함ㅡ수ㅡ명 : fn_acolor(nRow)
 * 기ㅡㅡㅡ능 : 변경후 자재명에 칼라 적용
 * 작ㅡ성ㅡ자 : 김민수
 * 작성ㅡ일자 : 2015-04-29
 ******************************************************************************************/
function fn_acolor(nRow)
{
	// 불용자재
	if(ds_aItemList.getColumn(nRow, "MTG_UNS") == 'UK' || ds_aItemList.getColumn(nRow, "MTG_STP") == 'TK')
	{
		return "#FFAA9C";
	}

	// 금지 자재
	var sMenuDate = gfn_trim(ds_aItemList.getColumn(nRow, "TODAY"));
	if( sMenuDate >= ds_aItemList.getColumn(nRow,"RESTRICT_START") &&
		sMenuDate <= ds_aItemList.getColumn(nRow,"RESTRICT_END") )
	{
		if(sMenuDate >= ds_aItemList.getColumn(nRow,"CNL_START") &&
		   sMenuDate <= ds_aItemList.getColumn(nRow,"CNL_END") )
		{
			return "default";
		}
		else
		{
			return "khaki";
		}
	}
	return "default";
}

function grd_recipeList_oncelldblclick(obj:Grid, e:GridClickEventInfo)
{
	var arg = {
	             strRecipeCd:ds_recipeList.getColumn(e.row, "RECIPE_CD")
	           , strRecipeName:ds_recipeList.getColumn(e.row, "RECIPE_NAME")
	           , strRecipeType:"UPJANG"
	           , strHallClass:ds_recipeList.getColumn(e.row, "HALL_CLASS")
	           , strUpjang:ds_recipeList.getColumn(e.row, "UPJANG")
	          };
	          
	var v_result = gfn_dialog("", "U_FSI::FSI00061V.xfdl", arg, 896, 580);	
}
]]></Script>
  </Form>
</FDL>
