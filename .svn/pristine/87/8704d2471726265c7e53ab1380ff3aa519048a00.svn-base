<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="form" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1296 524" titletext="Batch Job 실행 결과 상세" scrollbars="autoboth" onload="form_onload">
    <Layouts>
      <Layout>
        <Static id="Static15" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 915 10"/>
        <Static id="Static01" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 570"/>
        <Static id="Static02" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1281 0 1296 584"/>
        <Static id="Static03" text="h15" class="Guide01_AreaRed" visible="false" position="absolute -57 509 843 524"/>
        <Static id="Static00" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 15 10 215 16"/>
        <Static id="Static05" text="아이콘기준 h08" class="Guide01_AreaRed" visible="false" position="absolute 15 32 215 40"/>
        <Button id="btn_restart" taborder="18" text="재처리" onclick="fn_restart" class="btn_WF_CRUD" position="absolute 1119 10 1173 35" anchor="top right"/>
        <Static id="Static26" text="Job이름" class="sta_WFDA_Label01" position="absolute 15 40 122 67" anchor="left top"/>
        <Static id="Static49" class="sta_WFDA_Labelbg" position="absolute 120 40 469 67" anchor="default"/>
        <Edit id="edt_jobName" taborder="19" position="absolute 124 43 465 64" anchor="default" enable="false"/>
        <Static id="Static07" text="Job 실행 ID" class="sta_WFDA_Label01" position="absolute 15 66 122 93" anchor="left top"/>
        <Static id="Static08" class="sta_WFDA_Labelbg" position="absolute 120 66 469 93" anchor="default"/>
        <Button id="btn_close" taborder="22" text="닫기" onclick="fn_close" class="btn_WF_CRUD" position="absolute 1236 10 1281 35" anchor="top right"/>
        <Static id="Static20" text="W102" visible="false" position="absolute 1234 10 1236 35" anchor="top right" positionstep="0" style="background:#ff000055;align:center middle;"/>
        <Static id="sta_WF_TitleLev01" text="배치 Job 실행 결과" class="sta_WF_Title01" position="absolute 15 19 154 37"/>
        <Button id="btna_search" taborder="23" text="조회" onclick="fn_search" class="btn_WF_searchCm" position="absolute 1175 10 1234 35" anchor="top right"/>
        <Static id="Static09" text="W102" visible="false" position="absolute 1173 12 1175 37" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Static id="Static10" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 739 35 986 40"/>
        <Static id="Static11" text="실행결과메시지" class="sta_WFDA_Label01" position="absolute 468 40 1281 67" anchor="left top right"/>
        <Static id="Static12" class="sta_WFDA_Labelbg" position="absolute 468 65 1281 327" anchor="left top right"/>
        <Edit id="edt_jobExecutionId" taborder="24" enable="false" position="absolute 124 69 465 90" anchor="default"/>
        <Static id="Static04" text="Job 인스턴스 ID" class="sta_WFDA_Label01" position="absolute 15 92 122 119" anchor="left top"/>
        <Static id="Static06" class="sta_WFDA_Labelbg" position="absolute 120 92 469 119" anchor="default" onclick="Static06_onclick"/>
        <Edit id="edt_jobInstanceId" taborder="25" enable="false" position="absolute 124 95 465 116" anchor="default"/>
        <Static id="Static13" text="버전" class="sta_WFDA_Label01" position="absolute 15 118 122 145" anchor="left top"/>
        <Static id="Static14" class="sta_WFDA_Labelbg" position="absolute 120 118 469 145" anchor="default"/>
        <Edit id="edt_version" taborder="26" enable="false" position="absolute 124 121 465 142" anchor="default"/>
        <Static id="Static16" text="실행일시" class="sta_WFDA_Label01" position="absolute 15 144 122 171" anchor="left top"/>
        <Static id="Static17" class="sta_WFDA_Labelbg" position="absolute 120 144 469 171" anchor="default"/>
        <Edit id="edt_startTime" taborder="27" enable="false" position="absolute 124 147 465 168" anchor="default"/>
        <Static id="Static18" text="종료일시" class="sta_WFDA_Label01" position="absolute 15 170 122 197" anchor="left top"/>
        <Static id="Static19" class="sta_WFDA_Labelbg" position="absolute 120 170 469 197" anchor="default"/>
        <Edit id="edt_endTime" taborder="28" enable="false" position="absolute 124 173 465 194" anchor="default"/>
        <Static id="Static21" text="실행소요시간" class="sta_WFDA_Label01" position="absolute 15 196 122 223" anchor="left top"/>
        <Static id="Static22" class="sta_WFDA_Labelbg" position="absolute 120 196 469 223" anchor="default"/>
        <Edit id="edt_elapsedTime" taborder="29" enable="false" position="absolute 124 199 465 220" anchor="default"/>
        <Static id="Static23" text="상태" class="sta_WFDA_Label01" position="absolute 15 222 122 249" anchor="left top"/>
        <Static id="Static24" class="sta_WFDA_Labelbg" position="absolute 120 222 469 249" anchor="default"/>
        <Edit id="edt_status" taborder="30" enable="false" position="absolute 124 225 465 246" anchor="default"/>
        <Static id="Static25" text="실행결과코드" class="sta_WFDA_Label01" position="absolute 15 248 122 275" anchor="left top"/>
        <Static id="Static27" class="sta_WFDA_Labelbg" position="absolute 120 248 469 275" anchor="default"/>
        <Edit id="edt_exitCode" taborder="31" enable="false" position="absolute 124 251 465 272" anchor="default"/>
        <Static id="Static28" text="실행자 ID" class="sta_WFDA_Label01" position="absolute 15 274 122 301" anchor="left top"/>
        <Static id="Static29" class="sta_WFDA_Labelbg" position="absolute 120 274 469 301" anchor="default"/>
        <Edit id="edt_executionUserId" taborder="32" enable="false" position="absolute 124 277 465 298" anchor="default"/>
        <Static id="Static30" text="실행방식" class="sta_WFDA_Label01" position="absolute 15 300 122 327" anchor="left top"/>
        <Static id="Static31" class="sta_WFDA_Labelbg" position="absolute 120 300 469 327" anchor="default"/>
        <Edit id="edt_sync" taborder="33" enable="false" position="absolute 178 303 465 324" anchor="default"/>
        <Edit id="edt_syncYn" taborder="34" enable="false" position="absolute 124 303 175 324" anchor="default"/>
        <Static id="Static60" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 327 465 340" anchor="left top"/>
        <Static id="Static58" text="배치 Job Step 실행 결과" class="sta_WF_Title01" position="absolute 15 340 465 358" anchor="left top"/>
        <Static id="Static59" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 15 353 465 358" anchor="left top"/>
        <Grid id="grd_list" taborder="37" binddataset="ds_list" autoenter="select" useinputpanel="false" cellsizingtype="col" cellmovingtype="col" position2="absolute l:15 r:15 t:358 b:14" positiontype="position2" onexpanddown="grd_list_onexpanddown">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="41" band="left"/>
                <Column size="86" band="left"/>
                <Column size="39" band="left"/>
                <Column size="176" band="left"/>
                <Column size="92"/>
                <Column size="86"/>
                <Column size="90"/>
                <Column size="54"/>
                <Column size="56"/>
                <Column size="50"/>
                <Column size="55"/>
                <Column size="58"/>
                <Column size="54"/>
                <Column size="49"/>
                <Column size="57"/>
                <Column size="59"/>
                <Column size="86"/>
                <Column size="46"/>
                <Column size="30"/>
              </Columns>
              <Rows>
                <Row size="38" band="head"/>
                <Row size="30"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="normal" text="No"/>
                <Cell col="1" text="Step&#13;&#10;실행 ID"/>
                <Cell col="2" text="버전"/>
                <Cell col="3" text="Step명"/>
                <Cell col="4" text="실행일시"/>
                <Cell col="5" text="종료일시"/>
                <Cell col="6" text="상태"/>
                <Cell col="7" text="Read&#13;&#10;Count" wordwrap="both"/>
                <Cell col="8" text="Filter&#13;&#10;Count" wordwrap="both"/>
                <Cell col="9" text="Write&#13;&#10;Count" wordwrap="both"/>
                <Cell col="10" text="Read&#13;&#10;Skip" wordwrap="both"/>
                <Cell col="11" text="Process&#13;&#10;Skip" wordwrap="both"/>
                <Cell col="12" text="Write&#13;&#10;Skip" wordwrap="both"/>
                <Cell col="13" text="Total&#13;&#10;Skip" wordwrap="both"/>
                <Cell col="14" text="Commit&#13;&#10;Count" wordwrap="both"/>
                <Cell col="15" text="Rollback&#13;&#10;Count" wordwrap="both"/>
                <Cell col="16" text="결과코드" wordwrap="both"/>
                <Cell col="17" text="결과&#13;&#10;메시지" wordwrap="both"/>
                <Cell col="18" text="Step&#13;&#10;로그"/>
              </Band>
              <Band id="body">
                <Cell celltype="none" displaytype="normal" expr="currow+1"/>
                <Cell col="1" text="bind:stepExecutionId"/>
                <Cell col="2" displaytype="normal" edittype="none" style="align:center;" text="bind:version"/>
                <Cell col="3" style="align:left;" text="bind:stepName"/>
                <Cell col="4" text="bind:startTime" wordwrap="both"/>
                <Cell col="5" text="bind:endTime" wordwrap="both"/>
                <Cell col="6" text="bind:status"/>
                <Cell col="7" text="bind:readCount"/>
                <Cell col="8" text="bind:filterCount"/>
                <Cell col="9" text="bind:writeCount"/>
                <Cell col="10" text="bind:readSkipCount"/>
                <Cell col="11" text="bind:processSkipCount"/>
                <Cell col="12" text="bind:writeSkipCount"/>
                <Cell col="13" text="bind:totalSkipCount"/>
                <Cell col="14" text="bind:commitCount"/>
                <Cell col="15" text="bind:rollbackCount"/>
                <Cell col="16" text="bind:exitCode"/>
                <Cell col="17" displaytype="normal" edittype="expand" style="align:center;padding:1 1 1 1;" text="..." expandshow="show" expandsize="25"/>
                <Cell col="18" edittype="expand" expandshow="show" expandsize="25"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <TextArea id="txt_exitMessage" taborder="38" wordwrap="none" readonly="true" enable="false" position="absolute 472 69 1276 324" anchor="left top right"/>
        <PopupDiv id="div_popupMsg" text="PopupDiv00" position2="absolute l:517 w:413 t:43 h:316" positiontype="position2" style="background:ivory;" visible="false" class="pdiv_WF_Pop" onpopup="div_popupMsg_onpopup">
          <Layouts>
            <Layout>
              <TextArea id="txt_exitMessage" taborder="1" readonly="true" position2="absolute l:5 r:5 t:24 b:5" positiontype="position2"/>
              <Static id="inquaryTerms00" text="Step 실행 결과 메시지" class="STA_WF_TITLEV1" position2="absolute l:5 w:200 t:5 h:12" positiontype="position2"/>
            </Layout>
          </Layouts>
        </PopupDiv>
        <PopupDiv id="div_popupStepLog" text="PopupDiv00" position2="absolute l:194 w:711 t:417 h:316" positiontype="position2" style="background:ivory;" class="pdiv_WF_Pop" visible="false" onpopup="div_popupStepLog_onpopup">
          <Layouts>
            <Layout>
              <Static id="inquaryTerms00" text="Step 실행 로그" class="STA_WF_TITLEV1" position2="absolute l:5 w:200 t:5 h:12" positiontype="position2"/>
              <Grid id="grd_list" taborder="1" binddataset="ds_listStepLog" autoenter="select" useinputpanel="false" cellsizingtype="both" cellmovingtype="col" onexpanddown="grd_list_onexpanddown" position2="absolute l:3 r:3 t:21 b:3" positiontype="position2" cellsizebandtype="allband">
                <Formats>
                  <Format id="default">
                    <Columns>
                      <Column size="41" band="left"/>
                      <Column size="86"/>
                      <Column size="42"/>
                      <Column size="123"/>
                      <Column size="69"/>
                      <Column size="251"/>
                      <Column size="87"/>
                    </Columns>
                    <Rows>
                      <Row size="38" band="head"/>
                      <Row size="30"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="normal" text="No"/>
                      <Cell col="1" text="Step&#13;&#10;실행 ID"/>
                      <Cell col="2" text="Step&#13;&#10;SEQ"/>
                      <Cell col="3" text="Step명"/>
                      <Cell col="4" text="결과코드" wordwrap="both"/>
                      <Cell col="5" text="결과&#13;&#10;메시지" wordwrap="both"/>
                      <Cell col="6" text="생성일시"/>
                    </Band>
                    <Band id="body">
                      <Cell celltype="none" displaytype="normal" expr="currow+1"/>
                      <Cell col="1" text="bind:stepExecutionId"/>
                      <Cell col="2" displaytype="normal" edittype="none" style="align:center;" text="bind:spSeq"/>
                      <Cell col="3" style="align:left;" text="bind:spName"/>
                      <Cell col="4" text="bind:exitCode"/>
                      <Cell col="5" displaytype="normal" edittype="normal" style="align:left top;padding:1 1 1 1;" text="bind:exitMessage" wordwrap="both" expandshow="hide" expandsize="25"/>
                      <Cell col="6" style="align:center;" text="bind:cdate" wordwrap="both"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
            </Layout>
          </Layouts>
        </PopupDiv>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item8" compid="txt_exitMessage" propid="value" datasetid="ds_job" columnid="exitMessage"/>
      <BindItem id="item0" compid="edt_jobName" propid="value" datasetid="ds_job" columnid="jobName"/>
      <BindItem id="item1" compid="edt_jobExecutionId" propid="value" datasetid="ds_job" columnid="jobExecutionId"/>
      <BindItem id="item2" compid="edt_jobInstanceId" propid="value" datasetid="ds_job" columnid="jobInstanceId"/>
      <BindItem id="item3" compid="edt_version" propid="value" datasetid="ds_job" columnid="version"/>
      <BindItem id="item4" compid="edt_startTime" propid="value" datasetid="ds_job" columnid="startTime"/>
      <BindItem id="item5" compid="edt_endTime" propid="value" datasetid="ds_job" columnid="endTime"/>
      <BindItem id="item6" compid="edt_elapsedTime" propid="value" datasetid="ds_job" columnid="elapsedTime"/>
      <BindItem id="item7" compid="edt_status" propid="value" datasetid="ds_job" columnid="status"/>
      <BindItem id="item9" compid="edt_exitCode" propid="value" datasetid="ds_job" columnid="exitCode"/>
      <BindItem id="item10" compid="edt_executionUserId" propid="value" datasetid="ds_job" columnid="executionUserId"/>
      <BindItem id="item11" compid="edt_syncYn" propid="value" datasetid="ds_job" columnid="syncYn"/>
      <BindItem id="item12" compid="edt_sync" propid="value" datasetid="ds_job" columnid="sync"/>
      <BindItem id="item13" compid="div_popupMsg.txt_exitMessage" propid="value" datasetid="ds_list" columnid="exitMessage"/>
    </Bind>
    <Objects>
      <Dataset id="ds_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="stepExecutionId" type="STRING" size="256"/>
          <Column id="version" type="STRING" size="256"/>
          <Column id="stepName" type="STRING" size="256"/>
          <Column id="startTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
          <Column id="status" type="STRING" size="256"/>
          <Column id="readCount" type="STRING" size="256"/>
          <Column id="filterCount" type="STRING" size="256"/>
          <Column id="writeCount" type="STRING" size="256"/>
          <Column id="readSkipCount" type="STRING" size="256"/>
          <Column id="writeSkipCount" type="STRING" size="256"/>
          <Column id="processSkipCount" type="STRING" size="256"/>
          <Column id="totalSkipCount" type="STRING" size="256"/>
          <Column id="commitCount" type="STRING" size="256"/>
          <Column id="rollbackCount" type="STRING" size="256"/>
          <Column id="exitCode" type="STRING" size="256"/>
          <Column id="exitMessage" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_job" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="jobName" type="STRING" size="256"/>
          <Column id="jobExecutionId" type="STRING" size="256"/>
          <Column id="jobInstanceId" type="STRING" size="256"/>
          <Column id="version" type="STRING" size="256"/>
          <Column id="startTime" type="STRING" size="256"/>
          <Column id="endTime" type="STRING" size="256"/>
          <Column id="elapsedTime" type="STRING" size="256"/>
          <Column id="status" type="STRING" size="256"/>
          <Column id="exitCode" type="STRING" size="256"/>
          <Column id="exitMessage" type="STRING" size="256"/>
          <Column id="executionUserId" type="STRING" size="256"/>
          <Column id="syncYn" type="STRING" size="256"/>
          <Column id="sync" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listStepLog" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="stepExecutionId" type="STRING" size="256"/>
          <Column id="spSeq" type="STRING" size="256"/>
          <Column id="spName" type="STRING" size="256"/>
          <Column id="exitCode" type="STRING" size="256"/>
          <Column id="exitMessage" type="STRING" size="256"/>
          <Column id="cdate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : BatchExecRsltDetailPop
  파 일 명 : BatchExecRsltDetailPop.xfdl
  기    능 : Job 실행 상세 결과를 보여주는 팝업 화면 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.12.26   kksoo     최초 생성
  2015.04.10   kksoo     로직 구현
*/
 
/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "lib::lib_com.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_jobExecutionId;	//호출 파라미터

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 초기값 셋팅
	fn_init();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init()
{
	//파라미터 값으로 초기 설정
	btn_restart.visible = false;
	fv_jobExecutionId = jobExecutionId;
	
	//결과조회
	fn_search ();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기
 *---------------------------------------------------------------------------------------------*/
function fn_close(obj:Button,  e:ClickEventInfo)
{
	this.close();
}

/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(grd_list);

    var strSvcID    = "search";
    var strURL      = "sc/scb/batchExecRsltMngt/selectJobResultDetailList.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_job=ds_job ds_list=ds_list";
    var strArg      = "jobExecutionId=" + wrapQuote(fv_jobExecutionId);;
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : div_popupStepLog_onpopup 이벤트에서 호출
 *---------------------------------------------------------------------------------------------*/
function fn_searchStepLog(stepExecutionId)
{
    // Grid sort 표시 초기화(필수)
    gfn_clearSortMark(div_popupStepLog.grd_list);

    var strSvcID    = "searchStepLog";
    var strURL      = "sc/scb/batchExecRsltMngt/selectJobResultStepLogList.xdo";
    var strInDs     = "";
    var strOutDs    = "ds_listStepLog=ds_list";
    var strArg      = "stepExecutionId=" + wrapQuote(stepExecutionId);
    var strCallback = "fn_callBack";
    var bAsync      = true;

    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Job재처리 버튼 클릭 시
 *---------------------------------------------------------------------------------------------*/
function fn_restart(obj:Button,  e:ClickEventInfo)
{
	//실행 여부 확인
	if (!gfn_confirm("confirm.batch.execute")) return;
 
	//중지시킨 Job을 재실행시킨다.
    var strSvcID    = "restart";
    var strURL      = "sc/scb/batchJobMngt/restartBatchJob.xdo";
    var strInDs     = "ds_job=ds_job";	//모두 전송하기 위해 u 옵션 제거
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		return;
	}
	
    switch(strSvcID)
    {
		//조회
		case "search" :
			//재처리 버튼 표시
			if (edt_status.text == "FAILED" || 
			    edt_status.text == "STOPPED" ||
			    edt_status.text == "STOPPING")
				btn_restart.visible = true;
			else
				btn_restart.visible = false;
				
			//실행방식 표시
			if (edt_syncYn.value == "1")
				edt_sync.value = "동기";
			else if (edt_syncYn.value == "0")
				edt_sync.value = "비동기";
			else
				edt_sync.value = "";
			
			txt_exitMessage.value = gfn_getMessage("msg.no.result.message"); //결과 메시지가 없습니다.
			break;

		//Step 처리로그 조회
		case "searchStepLog" :
			break;

		// Job재처리
        case "restart" :
			gfn_alert ("msg.batch.execute.success");
			//화면을 닫는다.
			this.close();
            break;
    }
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 그리드 셀 expand down 이벤트 처리에서 메시지 divPopup을 표시한다.
 *---------------------------------------------------------------------------------------------*/
function grd_list_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
	if (e.col == 17) {	//결과 메시지 div
		var arrCellRect = obj.getCellRect(e.row,e.cell);
		var nDivX = system.clientToScreenX(obj,arrCellRect.left-div_popupMsg.position.width);
		var nDivY = system.clientToScreenY(obj,arrCellRect.bottom-div_popupMsg.position.height);
		
		div_popupMsg.trackPopup(nDivX,nDivY);
	} else {			//SP 로그 div
		var arrCellRect = obj.getCellRect(e.row,e.cell);
		var nDivX = system.clientToScreenX(obj,arrCellRect.left-div_popupStepLog.position.width);
		var nDivY = system.clientToScreenY(obj,arrCellRect.bottom-div_popupStepLog.position.height);
		
		div_popupStepLog.trackPopup(nDivX,nDivY);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : popupdiv가 popup되는 이벤트 처리로 결과메시지를 표시한다.
 *---------------------------------------------------------------------------------------------*/
function div_popupMsg_onpopup(obj:PopupDiv, e:EventInfo)
{
	if (div_popupMsg.txt_exitMessage.text == "") {
		div_popupMsg.txt_exitMessage.value = gfn_getMessage("msg.no.result.message"); //결과 메시지가 없습니다.
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : popupdiv가 popup되는 이벤트 처리로 Step 처리 로그를 표시한다.
 *---------------------------------------------------------------------------------------------*/
function div_popupStepLog_onpopup(obj:PopupDiv, e:EventInfo)
{
	var stepExecutionId = ds_list.getColumn (ds_list.rowposition, "stepExecutionId");
	fn_searchStepLog (stepExecutionId);
}
]]></Script>
  </Form>
</FDL>
