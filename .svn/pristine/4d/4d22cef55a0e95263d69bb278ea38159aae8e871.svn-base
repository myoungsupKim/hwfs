<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FMM00013E" onload="form_onload" titletext="레시피관리" position="absolute 0 0 1216 792" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="Static01" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1206 2 1216 653"/>
        <Static id="Static15" class="sta_WFDA_Labelbg" position="absolute 285 78 1206 105" anchor="left top right"/>
        <Static id="Static12" class="sta_WFDA_Labelbg" position="absolute 285 26 1206 53" anchor="left top right"/>
        <Static id="Static02" class="sta_WFDA_Labelbg" position="absolute 285 52 1206 79" anchor="left top right"/>
        <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 285 104 1206 131" anchor="left top right"/>
        <Static id="Static14" class="sta_WFDA_Labelbg" position="absolute 285 0 1206 27" anchor="left top right"/>
        <CheckBox id="chk_All" onclick="chk_All_OnClick" taborder="57" text="추천계절" value="false" position="absolute 913 81 982 102" style="buttonalign:right;"/>
        <ImageViewer stretch="fit" id="Image0" image="URL('theme://convertImages/img_NoImageBig.png')" onclick="Image0_OnClick" onloaderror="Image0_OnLoadError" onmouseleave="Image0_OnMouseOut" transparenthittest="false" taborder="1" position="absolute 0 0 141 105"/>
        <Div id="div_Material" scrollbars="autoboth" taborder="2" text="Div0" url="U_FMM::FMM00014E.xfdl" position="absolute 0 459 1206 792" anchor="left top right" asyncmode="false"/>
        <Button id="btn_RecipeElement" onclick="btn_RecipeElement_OnClick" taborder="21" position="absolute 0 438 112 459" class="btn_WF_Custom" image="" text="레시피영양성분"/>
        <Button id="btn_ratio" onclick="btn_ratio_OnClick" taborder="22" position="absolute 113 438 248 459" class="btn_WF_Custom" image="" text="레시피비율일괄반영"/>
        <Radio codecolumn="CD" columncount="3" datacolumn="NM" id="rdo_Detail" index="0" innerdataset="ds_SubRadio" onitemchanged="rdo_Detail_OnChanged" taborder="24" position="absolute 122 137 332 158"/>
        <Edit id="ed_ratio" maxlength="3" inputtype="number" taborder="30" visible="false" position="absolute 249 439 320 460" style="align:right;"/>
        <MPFileDialog Filter="Image Files(*.jpg,*.gif,*.bmp)|*.jpg;*.gif;*.bmp|" id="FileDialog" taborder="69" position="absolute 1268 35 1292 59"/>
        <MPFileDialog id="FileDialogSave" taborder="69" Type="Save" position="absolute 1292 35 1316 59"/>
        <MPFile id="file" taborder="70" position="absolute 1292 59 1316 83"/>
        <Static id="Static04" text="레시피코드/명" position="absolute 190 0 286 27" class="sta_WFDA_Label01"/>
        <Static id="Static06" text="레 시 피 분 류" position="absolute 190 26 286 53" class="sta_WFDA_Label01"/>
        <Static id="Static6" text="주   재  료  군" position="absolute 190 52 286 79" class="sta_WFDA_Label01"/>
        <Edit enable="false" id="ed_RecipeCD" taborder="31" position="absolute 288 3 358 24" class="edt_WF_Essential"/>
        <Edit id="ed_RecipeNM" taborder="28" position="absolute 361 3 522 24" class="edt_WF_Essential"/>
        <Button id="btn_RecipePop" onclick="btn_RecipePop_OnClick" taborder="4" visible="false" position="absolute 521 3 542 24" class="btn_WF_popSearchEssential" text="" image=""/>
        <Static id="Static11" text="레시피유형" position="absolute 415 26 503 53" class="sta_WFDA_Label01"/>
        <Static id="Static17" text="대표영양성분" position="absolute 415 52 503 79" class="sta_WFDA_Label01"/>
        <Static id="Static35" text="조리법유형" position="absolute 654 26 739 53" class="sta_WFDA_Label01" style="align:center middle;"/>
        <Combo codecolumn="CD" datacolumn="NM" id="cbo_RecipeClass" imemode="none" innerdataset="ds_RecipeClass" onitemchanged="common_OnChanged" taborder="5" position="absolute 288 29 413 50" class="cmb_WF_Essential" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="cbo_RecipeType" innerdataset="ds_RecipeType" onitemchanged="common_OnChanged" taborder="6" position="absolute 505 29 651 50" class="cmb_WF_Essential" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo2" innerdataset="ds_CClass" onitemchanged="common_OnChanged" taborder="8" position="absolute 741 29 911 50" class="cmb_WF_Essential" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo5" innerdataset="ds_Material" onitemchanged="common_OnChanged" taborder="27" position="absolute 288 55 413 76" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo1" innerdataset="ds_Element" onitemchanged="common_OnChanged" taborder="7" position="absolute 505 55 651 76" displayrowcount="15"/>
        <Static id="Static36" text="개&#10;발&#10;정&#10;보" position="absolute 913 0 957 79" class="sta_WFDA_Label03" style="padding:0 0 0 0;align:center middle;"/>
        <Static id="Static37" text="개  발  자" position="absolute 956 0 1050 27" class="sta_WFDA_Label01"/>
        <Static id="Static39" text="최초개발일" position="absolute 956 26 1050 53" class="sta_WFDA_Label01"/>
        <Static id="Static40" text="최종수정일" position="absolute 956 52 1050 79" class="sta_WFDA_Label01"/>
        <Edit enable="false" id="Edit0" readonly="true" taborder="29" position="absolute 1053 3 1183 24"/>
        <MaskEdit enable="false" id="me_Cdate" mask="@@@@-@@-@@" readonly="true" taborder="26" type="string" position="absolute 1053 29 1203 50" style=":disabled {align:center middle;}"/>
        <MaskEdit enable="false" id="MaskEdit00" mask="@@@@-@@-@@" readonly="true" taborder="25" type="string" position="absolute 1053 55 1203 76" style=":disabled {align:center middle;}"/>
        <Static id="Static42" text="모    양" position="absolute 190 78 286 105" class="sta_WFDA_Label01"/>
        <Static id="Static44" text="질    감" position="absolute 190 104 286 131" class="sta_WFDA_Label01"/>
        <Static id="Static8" text="맛" position="absolute 415 78 503 105" class="sta_WFDA_Label01"/>
        <Static id="Static45" text="색" position="absolute 415 104 503 131" class="sta_WFDA_Label01"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo9" innerdataset="ds_FS0008" taborder="13" position="absolute 288 81 413 102" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo3" innerdataset="ds_FS0009" taborder="11" position="absolute 505 81 651 102" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo4" innerdataset="ds_FS0010" taborder="10" position="absolute 288 107 413 128" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo7" innerdataset="ds_FS0007" taborder="12" position="absolute 505 107 651 128" displayrowcount="15"/>
        <Static id="Static48" text="제 공 온 도" position="absolute 699 78 787 105" class="sta_WFDA_Label01"/>
        <Static id="Static49" text="중심온도체크" position="absolute 699 104 787 131" class="sta_WFDA_Label01"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo10" innerdataset="ds_FS0011" taborder="14" position="absolute 789 81 911 102" displayrowcount="15"/>
        <Combo codecolumn="CD" datacolumn="NM" id="cbo_RecipeNM" innerdataset="ds_yn" type="filter" taborder="15" position="absolute 789 107 911 128" displayrowcount="15"/>
        <Static id="st_Phf" position="absolute 964 107 1019 128"/>
        <Combo codecolumn="CD" datacolumn="NM" id="Combo12" innerdataset="ds_FS0013" taborder="19" position="absolute 1102 107 1203 128" displayrowcount="15"/>
        <CheckBox falsevalue="N" id="Checkbox2" taborder="18" text="겨울" truevalue="Y" position="absolute 1143 81 1185 102" value="true"/>
        <CheckBox falsevalue="N" id="Checkbox1" taborder="17" text="가을" truevalue="Y" position="absolute 1091 81 1132 102" value="true"/>
        <CheckBox falsevalue="N" id="Checkbox0" taborder="16" text="여름" truevalue="Y" position="absolute 1038 81 1080 102" value="true"/>
        <Static id="Static51" text="PHF" position="absolute 914 104 957 131" class="sta_WFDA_Label01"/>
        <Static id="Static52" text="찬  기" position="absolute 1049 104 1100 131" class="sta_WFDA_Label01"/>
        <Static id="Static3" text="1인원가" position="absolute 1063 138 1122 156" class="sta_WFDA_Label03" anchor="top right"/>
        <Static id="Static4" position="absolute 6 99 57 123"/>
        <Static id="Static5" position="absolute 66 101 118 125"/>
        <Button id="btn_ImgDelete" onclick="btn_ImgDelete_OnClick" taborder="3" text="삭제" position="absolute 19 109 71 131" class="btn_WF_Delete" image=""/>
        <Static id="Static7" text="하단 데이터 추가 입력 Enter키" position="absolute 411 137 641 159"/>
        <Static id="st_Percent" text="%" visible="false" position="absolute 320 439 335 460"/>
        <CheckBox falsevalue="N" id="chk_Dtlyn" taborder="58" text="봄" truevalue="Y" position="absolute 997 81 1027 102" value="true"/>
        <Button id="btn_CopyMake" onclick="btn_CopyMake_OnClick" taborder="59" text="레시피신규복사" userdata="0" position="absolute 544 3 652 24" class="btn_WF_Copy" image=""/>
        <PopupDiv id="pdiv_imgZoom" taborder="66" tabstop="false" position="absolute 1241 89 1620 354" scrollbars="none">
          <Layouts>
            <Layout>
              <ImageViewer stretch="fit" id="Image0" onclick="pdiv_imgZoom_Image0_OnClick" transparenthittest="false" taborder="1" position="absolute 3 3 372 258" anchor="default"/>
            </Layout>
          </Layouts>
        </PopupDiv>
        <Button id="btn_add" onclick="btn_add_OnClick" taborder="67" text="상품추가" position="absolute 1131 438 1206 459" class="btn_WF_Custom" image="" anchor="top right"/>
        <Static id="Static0" text="재료구성" position="absolute 0 141 109 159" class="sta_WF_Title01"/>
        <Grid autoenter="select" binddataset="ds_ItemList" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="grd_jajea" useinputpanel="false" oncellclick="grd_jajea_OnCellClick" oncelldblclick="grd_jajea_OnCellDblClick" onheadclick="grd_jajea_OnHeadClick" onkeydown="grd_jajea_OnKeyDown" onmousemove="grd_jajea_OnMouseOver" taborder="70" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 0 159 1206 433" selecttype="row" autofittype="col" anchor="left top right" summarytype="default">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30"/>
                <Column size="25"/>
                <Column size="24"/>
                <Column size="80"/>
                <Column size="26"/>
                <Column size="280"/>
                <Column size="171"/>
                <Column size="0"/>
                <Column size="40"/>
                <Column size="0"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="60"/>
                <Column size="159"/>
                <Column size="26"/>
                <Column size="60"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell rowspan="2" displaytype="text" class="head_Excel"/>
                <Cell col="1" rowspan="2" displaytype="text" text="상&#10;태" wordwrap="word"/>
                <Cell col="2" rowspan="2" colspan="3" displaytype="text" text="상품코드"/>
                <Cell col="5" rowspan="2" displaytype="text" text="상품명"/>
                <Cell col="6" rowspan="2" displaytype="text" text="규격"/>
                <Cell col="7" rowspan="2" displaytype="text" text="원산지"/>
                <Cell col="8" rowspan="2" displaytype="text" text="단위" taborder="undefined"/>
                <Cell col="9" rowspan="2" displaytype="text" text="상품&#10;정보"/>
                <Cell col="10" rowspan="2" displaytype="text" text="1인소요량&#10;(g)"/>
                <Cell col="11" rowspan="2" displaytype="text" text="가식부량&#10;(g)"/>
                <Cell col="12" rowspan="2" displaytype="text" text="1인원가&#10;(원)"/>
                <Cell col="13" rowspan="2" colspan="2" displaytype="text" text="커팅규격"/>
                <Cell col="15" rowspan="2" displaytype="text" text="에너지&#10;(Kcal)"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:right;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="image" style="selectbackground: ;" text="expr:iif(ITEM_CODE!=&quot;010708010198&quot;, iif(RESTRICT_YN==&quot;Y&quot;, &quot;URL('theme://convertImages/img_RC.png')&quot;, &quot;&quot;))"/>
                <Cell col="2" displaytype="image" edittype="none" style="align: ;" text="URL('theme://images/new/grd_WF_ExpandImageX.png')"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:ITEM_CODE"/>
                <Cell col="4" displaytype="image" style="align: ;" text="expr:getRowType(currow)==2?&quot;URL('theme://Images/new/grd_WF_ExpandImage.png')&quot;:&quot;&quot;"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:ITEM_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:ORIGIN_TYPE"/>
                <Cell col="8" displaytype="text" style="align:left;" text="bind:PO_UOM"/>
                <Cell col="9" displaytype="text" style="align:left;" text="bind:FEATURE_NAME" mask="\\"/>
                <Cell col="10" displaytype="number" edittype="expr:setEditExpr(iif(expr_GetRowType(rowposition)=='insert','number',iif(isAlpha(gfn_subStr(RECIPE_CD,0,1)),'none','number')))" editfilter="expr:setfilterExpr(iif(expr_GetRowType(rowposition)=='insert','number',iif(isAlpha(gfn_subStr(RECIPE_CD,0,1)),'none','number')))" style="align:right;" text="bind:NEED_QTY" mask="#,##0.00"/>
                <Cell col="11" displaytype="number" style="align:right;" text="bind:EDIBLE_QTY"/>
                <Cell col="12" displaytype="number" style="align:right;" text="bind:PERSON_PRICE"/>
                <Cell col="13" displaytype="combo" edittype="expr:setEditExpr(iif(expr_GetRowType(rowposition)=='insert','combo',iif(isAlpha(gfn_subStr(RECIPE_CD,0,1)),'none','combo')))" editfilter="expr:setfilterExpr(iif(expr_GetRowType(rowposition)=='insert','combo',iif(isAlpha(gfn_subStr(RECIPE_CD,0,1)),'none','combo')))" style="align:left;" text="bind:CUT_SPEC" combodataset="ds_CutList" combocodecol="DETAIL_CODE" combodatacol="DETAIL_NAME"/>
                <Cell col="14" displaytype="image" style="align:center;cursor:hand;" text="URL('theme://Images/new/grd_WF_ExpandImage.png')"/>
                <Cell col="15" displaytype="number" style="align:right;" text="bind:CAL_CALC"/>
              </Band>
              <Band id="summary">
                <Cell colspan="9" displaytype="text" style="align:center;" text="합계" taborder="undefined"/>
                <Cell col="9" displaytype="text" style="align:center;" text="합계"/>
                <Cell col="10" displaytype="number" style="align:right;" expr="expr:getSum('NEED_QTY')"/>
                <Cell col="11" displaytype="number" style="align:right;" expr="expr:getSum('EDIBLE_QTY')"/>
                <Cell col="12" displaytype="number" style="align:right;" expr="expr:getSum('PERSON_PRICE')"/>
                <Cell col="13" displaytype="normal" style="align:right;"/>
                <Cell col="14" displaytype="normal" style="align:right;"/>
                <Cell col="15" displaytype="number" style="align:right;" expr="expr:getSum('CAL_CALC')"/>
                <Cell col="16" displaytype="text" style="align:left;"/>
                <Cell col="17" displaytype="number" style="align:right;" expr="expr:getSum('CAL_CALC')"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_ImgInsert" onclick="btn_ImgInsert_OnClick" taborder="73" text="첨부" position="absolute 72 109 124 131" class="btn_WF_Append" image=""/>
        <MaskEdit enable="false" id="ed_wonga" taborder="74" value="MaskEdit0" position="absolute 1121 138 1206 156" anchor="top right" mask="#,###"/>
        <Static id="Static03" text="기&#13;&#10;본&#13;&#10;정&#13;&#10;보" class="sta_WFDA_Label03" position="absolute 145 0 191 79" style="padding:0 0 0 0;align:center middle;"/>
        <Static id="Static41" text="품질 정보" wordwrap="word" class="sta_WFDA_Label03" position="absolute 145 78 191 131"/>
        <Static id="Static46" text="제공 정보" class="sta_WFDA_Label03" position="absolute 654 78 700 131"/>
        <Static id="Static00" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 0 433 957 438"/>
        <Static id="Static10" text="h5" class="Guide01_AreaRed" visible="false" position="absolute 0 154 1221 159"/>
        <Static id="Static13" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 131 1221 141"/>
        <Button id="btn_CustPop" onclick="btn_CustPop_OnClick" taborder="9" visible="true" position="absolute 1182 3 1203 24" class="btn_WF_popSearch" text="" image="" enable="false"/>
        <Static id="Static16" text="연관어" class="sta_WFDA_Label01" position="absolute 654 0 739 27" style="align:center middle;"/>
        <Edit id="ed_SameWord" taborder="75" position="absolute 741 3 911 24" enable="false"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_SubRadio">
        <ColumnInfo>
          <Column id="CD" size="256" type="STRING"/>
          <Column id="NM" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">0</Col>
            <Col id="NM">조리법</Col>
          </Row>
          <Row>
            <Col id="CD">1</Col>
            <Col id="NM">PHF관리</Col>
          </Row>
          <Row>
            <Col id="CD">2</Col>
            <Col id="NM">조리공정</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_tempRecipe"/>
      <Dataset id="ds_tempItem"/>
      <Dataset id="ds_tempCook"/>
      <Dataset id="ds_phf" cancolumnchange="ds_phf_CanColumnChange" oncolumnchanged="ds_phf_OnColumnChanged"/>
      <Dataset id="ds_Valid"/>
      <Dataset id="ds_Recipe" cancolumnchange="ds_Recipe_CanColumnChange" oncolumnchanged="ds_Recipe_OnColumnChanged" onload="ds_Recipe_OnLoadCompleted">
        <ColumnInfo>
          <Column id="ATTR01" size="200" type="STRING"/>
          <Column id="ATTR02" size="200" type="STRING"/>
          <Column id="ATTR03" size="200" type="STRING"/>
          <Column id="ATTR04" size="200" type="STRING"/>
          <Column id="ATTR05" size="200" type="STRING"/>
          <Column id="ATTR06" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR07" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR08" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR09" size="22" type="BIGDECIMAL"/>
          <Column id="ATTR10" size="22" type="BIGDECIMAL"/>
          <Column id="AUTUMN_YN" size="1" type="STRING"/>
          <Column id="CDATE" size="7" type="DATE"/>
          <Column id="COOK_OPRN" size="100" type="STRING"/>
          <Column id="COOK_TOOL1" size="20" type="STRING"/>
          <Column id="COOK_TOOL2" size="20" type="STRING"/>
          <Column id="CORE_TEMPER_YN" size="1" type="STRING"/>
          <Column id="COST_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="CUISINE_TYPE" size="20" type="STRING"/>
          <Column id="CUSER" size="9" type="STRING"/>
          <Column id="DISPLAY_METHOD" size="20" type="STRING"/>
          <Column id="GOODS_FEATURE" size="200" type="STRING"/>
          <Column id="MAIN_ITEM_CODE1" size="12" type="STRING"/>
          <Column id="MAIN_ITEM_CODE2" size="12" type="STRING"/>
          <Column id="NM_KOR" size="20" type="STRING"/>
          <Column id="PHF_MGMT1" size="1" type="STRING"/>
          <Column id="PHF_MGMT2" size="1" type="STRING"/>
          <Column id="PHF_MGMT3" size="1" type="STRING"/>
          <Column id="PHF_MGMT4" size="1" type="STRING"/>
          <Column id="PHF_MGMT5" size="1" type="STRING"/>
          <Column id="PHF_MGMT_YN" size="1" type="STRING"/>
          <Column id="PHOTO_PATH" size="200" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_CLASS" size="20" type="STRING"/>
          <Column id="RECIPE_COLOR" size="20" type="STRING"/>
          <Column id="RECIPE_FEEL" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RECIPE_SHAPE" size="20" type="STRING"/>
          <Column id="RECIPE_TASTE" size="20" type="STRING"/>
          <Column id="RECIPE_TEMPER" size="20" type="STRING"/>
          <Column id="RECIPE_TYPE" size="20" type="STRING"/>
          <Column id="RESP_NUT1" size="20" type="STRING"/>
          <Column id="RESP_NUT2" size="20" type="STRING"/>
          <Column id="SABUN" size="9" type="STRING"/>
          <Column id="SALE_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_UOM" size="20" type="STRING"/>
          <Column id="SPRING_YN" size="1" type="STRING"/>
          <Column id="SUMMER_YN" size="1" type="STRING"/>
          <Column id="UDATE" size="7" type="DATE"/>
          <Column id="USE_TOOL" size="20" type="STRING"/>
          <Column id="USE_YN" size="1" type="STRING"/>
          <Column id="UUSER" size="9" type="STRING"/>
          <Column id="VALID_TIME" size="4" type="STRING"/>
          <Column id="WINTER_YN" size="1" type="STRING"/>
          <Column id="PHF" size="256" type="STRING"/>
          <Column id="RTN_REASON" size="256" type="STRING"/>
          <Column id="SAME_WORD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_ItemList" cancolumnchange="ds_ItemList_CanColumnChange" oncolumnchanged="ds_ItemList_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="CAL" size="22" type="BIGDECIMAL"/>
          <Column id="CAL_CALC" size="22" type="BIGDECIMAL"/>
          <Column id="CUT_SPEC" size="20" type="STRING"/>
          <Column id="CUT_SPEC_NAME" size="100" type="STRING"/>
          <Column id="DISUSE_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="EDIBLE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="GRAM_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="FEATURE_NAME" size="0" type="STRING"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PERSON_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RESTRICT_YN" size="1" type="STRING"/>
          <Column id="ITEM_SEQ" size="256" type="BIGDECIMAL"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="256"/>
          <Column id="ITEM_CLASS2" type="STRING" size="256"/>
          <Column id="ITEM_CLASS3" type="STRING" size="256"/>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Rowcnt"/>
      <Dataset id="ds_CheckCnt"/>
      <Dataset id="ds_RecipeSeq"/>
      <Dataset id="ds_RecipeCD"/>
      <Dataset id="ds_UpdateImg"/>
      <Dataset id="ds_Valid2"/>
      <Dataset id="ds_ChangeItem">
        <ColumnInfo>
          <Column id="ITEM_CODE" size="256" prop="default" type="STRING"/>
          <Column id="ITEM_NAME" size="256" prop="default" type="STRING"/>
          <Column id="ITEM_SIZE" size="256" prop="default" type="STRING"/>
          <Column id="PO_UOM" size="256" prop="default" type="STRING"/>
          <Column id="CUT_SPEC" size="256" prop="default" type="STRING"/>
          <Column id="GRAM_PRICE" size="256" prop="default" type="STRING"/>
          <Column id="NEED_QTY" size="256" prop="default" type="STRING"/>
          <Column id="EDIBLE_QTY" size="256" prop="default" type="STRING"/>
          <Column id="PERSON_PRICE" size="256" prop="default" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Cond1">
        <ColumnInfo>
          <Column id="UPJANG" size="256" prop="default" type="STRING"/>
          <Column id="RECIPE_CD" size="256" prop="default" type="STRING"/>
          <Column id="ITEM_CODE" size="256" prop="default" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CookMethod" cancolumnchange="ds_CookMethod_CanColumnChange">
        <ColumnInfo>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="CUISINE_DESC" size="200" type="STRING"/>
          <Column id="CUISINE_SEQ" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_CD" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="ed_RecipeCD_value" compid="ed_RecipeCD" propid="value" datasetid="ds_Recipe" columnid="RECIPE_CD"/>
      <BindItem id="ed_RecipeNM_value" compid="ed_RecipeNM" propid="value" datasetid="ds_Recipe" columnid="RECIPE_NAME"/>
      <BindItem id="cbo_RecipeClass_value" compid="cbo_RecipeClass" propid="value" datasetid="ds_Recipe" columnid="RECIPE_CLASS"/>
      <BindItem id="cbo_RecipeType_value" compid="cbo_RecipeType" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TYPE"/>
      <BindItem id="Combo2_value" compid="Combo2" propid="value" datasetid="ds_Recipe" columnid="CUISINE_TYPE"/>
      <BindItem id="Combo5_value" compid="Combo5" propid="value" datasetid="ds_Recipe" columnid="MAIN_ITEM_CODE1"/>
      <BindItem id="Combo1_value" compid="Combo1" propid="value" datasetid="ds_Recipe" columnid="RESP_NUT1"/>
      <BindItem id="Edit0_value" compid="Edit0" propid="value" datasetid="ds_Recipe" columnid="NM_KOR"/>
      <BindItem id="me_Cdate_value" compid="me_Cdate" propid="value" datasetid="ds_Recipe" columnid="CDATE"/>
      <BindItem id="MaskEdit00_value" compid="MaskEdit00" propid="value" datasetid="ds_Recipe" columnid="UDATE"/>
      <BindItem id="Combo9_value" compid="Combo9" propid="value" datasetid="ds_Recipe" columnid="RECIPE_SHAPE"/>
      <BindItem id="Combo3_value" compid="Combo3" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TASTE"/>
      <BindItem id="Combo4_value" compid="Combo4" propid="value" datasetid="ds_Recipe" columnid="RECIPE_FEEL"/>
      <BindItem id="Combo7_value" compid="Combo7" propid="value" datasetid="ds_Recipe" columnid="RECIPE_COLOR"/>
      <BindItem id="Combo10_value" compid="Combo10" propid="value" datasetid="ds_Recipe" columnid="RECIPE_TEMPER"/>
      <BindItem id="cbo_RecipeNM_value" compid="cbo_RecipeNM" propid="value" datasetid="ds_Recipe" columnid="CORE_TEMPER_YN"/>
      <BindItem id="st_Phf_value" compid="st_Phf" propid="value" datasetid="ds_Recipe" columnid="PHF"/>
      <BindItem id="Combo12_value" compid="Combo12" propid="value" datasetid="ds_Recipe" columnid="USE_TOOL"/>
      <BindItem id="Checkbox2_value" compid="Checkbox2" propid="value" datasetid="ds_Recipe" columnid="WINTER_YN"/>
      <BindItem id="Checkbox1_value" compid="Checkbox1" propid="value" datasetid="ds_Recipe" columnid="AUTUMN_YN"/>
      <BindItem id="Checkbox0_value" compid="Checkbox0" propid="value" datasetid="ds_Recipe" columnid="SUMMER_YN"/>
      <BindItem id="chk_Dtlyn_value" compid="chk_Dtlyn" propid="value" datasetid="ds_Recipe" columnid="SPRING_YN"/>
      <BindItem id="item0" compid="st_Phf" propid="text" datasetid="ds_Recipe" columnid="PHF"/>
      <BindItem id="item1" compid="ed_SameWord" propid="value" datasetid="ds_Recipe" columnid="SAME_WORD"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";

//@@컨버터에서 주석처리 #include "lib::sc_comon.js"
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js"		//JAVA 코딩시
//@@컨버터에서 주석처리 #include "lib::tit_comm_0001.js"
var v_gbn;
var v_RECIPE;
var v_ImgNM="";
// 화면및 콤보 구성 데이타셋 로드
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);

	fsp_init(this);
	Image0.text="이미지가 없습니다.";
/*	http.Sync=true;
	tit_ClearActionInfo(this);
	// 오늘 날짜
	ds_GetDate.ClearData();
	tit_addSearchActionInfo(this,"sc/scc:SCC_TODAY");
	tit_CallService(this,"","","","ds_GetDate=ds_GetDate","","fn_call_back");
	http.Sync=false;
	
	tit_ClearActionInfo(this);
	// 레시피명
	ds_RecipeNM.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S001");
	tit_CallService(this,"","","","ds_RecipeNM=ds_RecipeNM","","fn_call_back");

	tit_ClearActionInfo(this);
	// 레시피분류
	ds_RecipeClass.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S002");
	tit_CallService(this,"","","","ds_RecipeClass=ds_RecipeClass","","fn_call_back");

	tit_ClearActionInfo(this);
	// 레시피유형
	ds_RecipeType.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S003");
	tit_CallService(this,"","","","ds_RecipeType=ds_RecipeType","","fn_call_back");

	tit_ClearActionInfo(this);  
	// 조리법유형
	ds_CookClass.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S004");
	tit_CallService(this,"","","","ds_CookClass=ds_CookClass","","fn_call_back");
	
	tit_ClearActionInfo(this);
	// 주재료군
	ds_Material.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S005");
	tit_CallService(this,"","","","ds_Material=ds_Material","","fn_call_back");	
	

	tit_ClearActionInfo(this);
	// 대표영양성분
	ds_Element.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S006");
	tit_CallService(this,"","","","ds_Element=ds_Element","","fn_call_back");

	tit_ClearActionInfo(this);
	// 커팅규격
	ds_CutList.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S022");
	tit_CallService(this,"","","","ds_CutList=ds_CuttingList","","fn_call_back");
	
	http.Sync=true;		
	// 레시피공통코드
	ds_common.ClearData();
	tit_addSearchActionInfo(this,"fs/fsr:FSR00010E_S008");
	tit_CallService(this,"","","","ds_common=ds_common","","fn_call_back");
	http.Sync=false;
//	--FS0009 맛  FS0007 색 FS0008 모양  FS0010 질감 FS0011 제공온도 FS0013 찬기
	ds_common.Filter("GROUP_CODE='FS0007'");
	ds_FS0007.CopyF("ds_common");
	ds_FS0007.InsertRow(0);
	ds_common.Filter("GROUP_CODE='FS0008'");
	ds_FS0008.CopyF("ds_common");
	ds_FS0008.InsertRow(0);
	ds_common.Filter("GROUP_CODE='FS0009'");
	ds_FS0009.CopyF("ds_common");
	ds_FS0009.InsertRow(0);
	ds_common.Filter("GROUP_CODE='FS0010'");
	ds_FS0010.CopyF("ds_common");
	ds_FS0010.InsertRow(0);
	ds_common.Filter("GROUP_CODE='FS0011'");
	ds_FS0011.CopyF("ds_common");
	ds_FS0011.InsertRow(0);
	ds_common.Filter("GROUP_CODE='FS0013'");
	ds_FS0013.CopyF("ds_common");
	ds_FS0013.InsertRow(0);
*/	

//	테스트용..본화면을 합할때 주석으로 뺄것
	// fn_T0_Search(0,"A0100002");
}
//콜백 프로세스 처리
function fn_call_back(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
	}	
}
function fn_call_back_img(cd,errmsg)
{
	if(cd!=0) 
	{
		return;
	}
	else
	{
		fn_T0_Clear();
	}	
}
//	레시피갖고오기 콜백
function fn_call_back_T0_search(cd,errmsg)
{
	var v_fRow="";
	if(cd!=0) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==3)
		{

			Copy(ds_tempRecipe,"ds_Recipe");
			ds_Recipe.clearData();
			ds_Recipe.addRow();
			ds_Recipe.copyRow(0,ds_tempRecipe,0);
			Image0.image="URL('theme://convertImages/img_NoImageBig.png')";
			Image0.text="이미지가 없습니다.";
			ds_Recipe.setColumn(0,"PHOTO_PATH","");
			ds_Recipe.setColumn(0,"SPHOTO_PATH","");
			ds_Recipe.setColumn(0,"CDATE","");
			ds_Recipe.setColumn(0,"UDATE","");
			ds_Recipe.setColumn(0,"SABUN","");
			ds_Recipe.setColumn(0,"NM_KOR",g_Name);
			
			v_fRow=ds_CookClass.findRow("CD",ds_Recipe.getColumn(0,"CUISINE_TYPE"));
			ds_Recipe.setColumn(0,"PHF_MGMT_YN",ds_CookClass.getColumn(v_fRow,"PHF_DEFAULT_YN"));
			
			ed_RecipeNM.enable=true;
			cbo_RecipeClass.enable=true;
		}
		else
		{

			var v_path="";
			ed_RecipeNM.enable=false;
			cbo_RecipeClass.enable=false;			
			if(v_gbn==0)	// 한화
			{
				v_path="FMR_STD_RECIPE_MST";
			}
			else			// 본사
			{
				v_path="FMM_STD_RECIPE_MST";
			}
			if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))==0 || gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH"))==null )
			{
				Image0.image="URL('theme://convertImages/img_NoImageBig.png')";
				Image0.text="이미지가 없습니다.";
			}
			else
			{
				if(gfn_length(gfn_trim(fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH"))))==0 ||
				    gfn_trim(fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH")))==null )
				{
					Image0.image="URL('theme://convertImages/img_NoImageBig.png')";
					Image0.text="이미지가 없습니다.";
					
				}
				else
				{
					Image0.text="";
					Image0.image=fsp_getServerDir(v_path,ds_Recipe.getColumn(0,"SPHOTO_PATH"));
				}
			}
			
		}
		if(rdo_Detail.index==2)
		{
			if(ds_Recipe.getRowCount()>0 && Combo2.index>0  )
			{
				var sFileName = Combo2.value;
				div_Material.fn_Get_Recipe_Cuisine_Orpn_Image(sFileName);
			}
		}		
		// 자재 갖고 오기
		fn_Jajea();
	}	
}
function fn_T0_Copy()
{
	if(ds_Recipe.getRowCount()==0)
	{
		//alert(fn_AlertMsg("046"));		
		g_Message("EE", fn_AlertMsg("046"));
		return;
	} 
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))==0 )
	{
		//alert(fn_AlertMsg("046"));		
		g_Message("EE", fn_AlertMsg("046"));
		return;		
	}
	if(GetRowType(ds_Recipe,0)=="update" 	||
		gfn_dsIsUpdated(ds_ItemList)==true		||
		gfn_dsIsUpdated(ds_CookMethod)==true		)
	{
		//alert(fn_AlertMsg("047"));		
		g_Message("EE", fn_AlertMsg("047"));
		return;		
	}
	var v_Pgbn=v_gbn;
	if(v_Pgbn==0){	v_gbn=1; }	
	var v_Idx	=cbo_RecipeClass.index;
	var v_str = {RECIPE_NAME:ed_RecipeNM.value
	           , RECIPE_CD:ed_RecipeCD.value
	           , UPJANG:ds_MainRecipeList.getColumn(0,"UPJANG")
	           , RECIPE_CLASS:cbo_RecipeClass.value
			   , OBJ_RECIPE:ds_Recipe
			   , OBJ_ITEMLIST:ds_ItemList
			   , OBJ_COOKMETHOD:ds_CookMethod     
	           };
	
	gfn_dialog("", "U_FMM::FMM00017P.xfdl",v_str);	
	cbo_RecipeClass.index=v_Idx;
	ds_Recipe.applyChange();
	ds_Recipe.reset();
	if(v_Pgbn==0){	v_gbn=0; }	
}
function fn_T0_Confirm()
{
	return;
	if(grd_List.formatid=="StdRecipe")
	{
		//alert(fn_AlertMsg("022"));
		g_Message("EE", fn_AlertMsg("022"));
		return;
	}
	if(ds_Recipe.getRowCount()==0)
	{
		//alert(fn_AlertMsg("023"));		
		g_Message("EE", fn_AlertMsg("023"));
		return;
	}
	if(GetRowType(ds_Recipe,0)=="insert")
	{
		//alert(fn_AlertMsg("025"));		
		g_Message("EE", fn_AlertMsg("025"));
		return;		
	}
	if(GetRowType(ds_Recipe,0)=="update" 	||
		gfn_dsIsUpdated(ds_ItemList)==true		||
		gfn_dsIsUpdated(ds_CookMethod)==true		)
	{
		//alert(fn_AlertMsg("026"));		
		g_Message("EE", fn_AlertMsg("026"));
		return;		
	}
	if(v_gbn==1)	// 신규 입력이면 확정하지 않고 리턴
	{
		return;
	}
	if(gfn_length(gfn_trim(ed_RecipeNM.value))==0 || gfn_trim(ed_RecipeNM.value)==null )
	{
		//alert(fn_AlertMsg("009"));
		g_Message("EE", fn_AlertMsg("009"));
		return;
	}
	//if(confirm(fn_AlertMsg("048"))==false)
	if( !g_Confirm("04", fn_AlertMsg("048")) )
	{
		return;
	}
	ds_input.clear();
	ds_input.addColumn("RECIPE_NAME","STRING");
	ds_input.addColumn("RECIPE_CLASS","STRING");
	ds_input.addRow();
	ds_input.setColumn(0,"RECIPE_NAME",gfn_trim(ed_RecipeNM.value));
	ds_input.setColumn(0,"RECIPE_CLASS",gfn_trim(cbo_RecipeClass.value));
	http.Sync=true;
	fsp_clear(this);
	ds_Valid.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S016");
	fsp_callService(this,"","","ds_input=ds_input","ds_Valid=ds_Valid","","fn_call_back","",true);
	http.Sync=false;
	http.Sync=true;
	fsp_clear(this);
	ds_Valid2.clearData();
	fsp_addSearch(this,"fs/fsr:FSR00010E_S035");
	fsp_callService(this,"","","ds_input=ds_input","ds_Valid2=ds_Valid2","","fn_call_back","",true);
	http.Sync=false;		
	if(ds_Valid.getRowCount()>0)
	{
		//alert(fn_AlertMsg("010"));
		g_Message("EE", fn_AlertMsg("010"));
//		ed_RecipeNM.value="";
		return;
	}
	else
	{
			if(fn_ValidCheck_Conf()==false)
			{
				return false;
			}
			http.Sync=true;
			fsp_clear(this);
			var actionName, cmdName, inData, outData, otherArg, callBackFnc;
			var searchsql,insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;
		// 표준레시피 전환로직
			ds_RecipeCD.clearData();
			otherArg	= "IN_RECIPE_CLASS="+wrapQuote(gfn_trim(cbo_RecipeClass.value));
			otherArg	+=" IN_RECIPE_NAME="+ wrapQuote(gfn_trim(ed_RecipeNM.value));
			inData		= "ds_Recipe=ds_Recipe ds_ItemList=ds_ItemList ds_CookMethod=ds_CookMethod";
			outData		= "ds_RecipeCD=ds_RecipeCD";
			callBackFnc	= "";
			searchsql	= "fs/fsr:FSR00010E_S033";
			if(ds_Valid2.getRowCount()==0)
			{
				insertSql 	= "fs/fsr:FSR00010E_I012";
			}
			insertSql1 	= "fs/fsr:FSR00010E_I009";
			insertSql2 	= "fs/fsr:FSR00010E_I010";
			insertSql3 	= "fs/fsr:FSR00010E_I011";
			updateSql	= "fs/fsr:FSR00010E_U008";		
			deleteSql	= "";
			keyIncrement= -1;
			callbackSql	= "";
			fsp_addSearch(this,searchsql,true);
			if(ds_Valid2.getRowCount()==0)
			{			
				fsp_addMulti(this, insertSql);
			}
			fsp_addMulti(this, insertSql1);
			fsp_addMulti(this, insertSql2);
			fsp_addMulti(this, insertSql3);
			fsp_addMulti(this, updateSql);
			fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc,"",true);			

			http.Sync=false;
		// 표준레시피 전환이 완료되면 이미지 표준레시피이미지폴더로 복사이동 ..
		//fsp_fileRead 다운로드
		//fsp_fileRead(httpFile, "SCC", ed_serverFileName.value
		//	, saveDialog.FilePath, saveDialog.FileName);
		
	
		/******************************************************
		 *  현재 서버에 이름이 변경되어 저장된 파일명을 원래의 파일명으로 
		  변환 
		 * @param  serverFileName  서버에서 저장되어 있는 파일 이름  
		 * @return  로컬에 저장해야 하는 이름 
		******************************************************/			
		if(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH"))==null || gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))==0)
		{
			//alert(fn_AlertMsg("028"));
			g_Message("EE", fn_AlertMsg("028"));
			ds_MainRecipeList.deleteRow(ds_MainRecipeList.rowposition);
			fn_T0_Clear();
			return;
		}
		var v_imgfile="";

		// v_imgfile= tit_getLocalFileName(ds_Recipe.GetColumn(0,"SPHOTO_PATH"));
		// trace("-------->"+v_imgfile);
		// return;
		v_imgfile=ds_Recipe.getColumn(0,"SPHOTO_PATH");
		/******************************************************
		 *  서버로 파일 다운로드 처리 
		 * @param  httpfileObj  http file 처리 객체  
		 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
		 * @param  serverFileName  서버에서 전송 받아야 하는 이름  
		 * @param  localFilePath 로컬 경로 
		 * @param  localFileName 로컬 파일명 
		 * @return  서버에 저장된 파일 정보 Array 
					0 - 성공 : S / 실패 : E 
					1 - 서버에 실패한 메시지 
		******************************************************/
		var v_arr;
		var arr;
		var v_TempLocalPath="%UserApp%TobeSoft\\HWFS\\component";// 다운로드 권한 문제로 마이플랫폼 경로폴더 이용
		var v_path="FSR_NEW_RECIPE_MST";
		FileDialogSave.FileName=v_imgfile;
		FileDialogSave.FilePath= AliasToRealPath(v_TempLocalPath);

		http.Sync=true;	
		v_arr=fsp_fileRead(httpFile, v_path, v_imgfile, FileDialogSave.FilePath, FileDialogSave.FileName);
		http.Sync=false;
		//trace("v_arr="+v_arr);//<====fsp_fileRead 성공리턴값에 오류 있음..버그 피해서그냥 사용함..
		// if(v_arr[0]=="S")
		// {
			if(gfn_length(gfn_trim(v_imgfile))==0 || gfn_trim(v_imgfile)==null)
			{
				//trace("v_imgfile=0");
				return;
			}

			// 파일 서버로 전송 
			/******************************************************
			 *  서버로 파일 전송 처리 
			 * @param  httpfileObj  http file 처리 객체  
			 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
			 * @param  localFilePath 로컬 경로 
			 * @param  localFileName 로컬 파일명 
			 * @param  sendFileName  서버에 전송하고 싶은 이름 
			 * @param  fileProcType  서버에서 기존 파일을 처리하는 타입 정의  
					   D - deleteFileName에 기술된 파일명이 존재할 경우만 파일 삭제 ( 기본 값 )
					   A - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
						   ( 파일명은 서버에 정의된 되로 타임을 추가해야 할 경우 추가한다. )
						   또한, deleteFileName이 존재할 경우 함께 삭제한다. 
					   U - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
						   ( 파일명은 무조건 Client를 기준으로 저장한다. )
						   또한, deleteFileName이 존재할 경우 함께 삭제한다. 
					   N - 전송하는 파일명으로 해당 파일이 존재할 경우 저장하지 않는다. 
						   ( 파일명은 무조건 Client를 기준으로 저장한다. )
						   또한, deleteFileName이 존재할 경우 함께 삭제한다. 
			 * @param  deleteFileName 서버에서 삭제해야 하는 파일 명
					   isDelete가 true이면서 해당 파일명이 기술되어 있지 않을 경우 
					   기존 파일을 삭제한다. 
			 * @return  서버에 저장된 파일 정보 Array 
						0 - 성공 : S / 실패 : E 
						1 - 서버에 저장된 실제 경로 
						2 - 서버에 저장된 실제 파일명 
						3 - 서버에 저장된 파일 사이즈 
			******************************************************/
			
			var v_point_index=gfn_indexOf(v_imgfile,".");
			var v_ext=gfn_subStr(v_imgfile,v_point_index);

			v_path="FMR_STD_RECIPE_MST";
			v_savenm=ds_RecipeCD.getColumn(0,"RECIPE_CD")+v_ext;
			//trace("v_savenm="+v_savenm);
			FileDialog.FilePath=AliasToRealPath(v_TempLocalPath);
			FileDialog.FileName=v_imgfile;
			arr = fsp_fileWrite(HttpFile, v_path, FileDialog.FilePath, FileDialog.FileName,v_savenm,"U"); 
			// "027"
			//trace("arr="+arr);
			if( arr[0] == "E" ) {
				//alert(fn_AlertMsg("027"));
				g_Message("EE", fn_AlertMsg("027"));
				return;
			}
			else
			{
				if(file.Delete(AliasToRealPath(v_TempLocalPath)+"\\"+v_imgfile))
				{
					trace("로컬삭제 성공");
				}
				else
				{
					trace("로컬삭제 실패");
				}
				ds_UpdateImg.clear();
				ds_UpdateImg.addColumn("SPHOTO_PATH","STRING");
				ds_UpdateImg.addColumn("RECIPE_CD","STRING");
				ds_UpdateImg.addRow();
				ds_UpdateImg.setColumn(0,"SPHOTO_PATH",v_savenm);
				ds_UpdateImg.setColumn(0,"RECIPE_CD",ds_RecipeCD.getColumn(0,"RECIPE_CD"));
				fsp_clear(this);

				fsp_addMulti(this,"fs/fsr:FSR00010E_U009");
				fsp_callService(this,"","","ds_UpdateImg=ds_UpdateImg","","","fn_call_back_img","",true);
			}
			
			
		// }
		// else
		// {
			// trace("실패");
			//alert(v_arr[1]);
			// return;
		// }
		ds_MainRecipeList.deleteRow(ds_MainRecipeList.rowposition);
		fn_T0_Clear();
		return;
	}	
	
}
function fn_T0_Delete()
{
	var otherArg="";
	if(ds_Recipe.getRowCount()==0 || v_gbn==0)
	{
		return;
	}
	else
	{
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))==0)
		{
			fn_T0_Clear();
			return;
		}
		if(g_Confirm("01",fn_AlertMsg("029"))==false)
		{
			return;
		}
	}

	otherArg="UPJANG="+gfn_trim(ds_MainRecipeList.getColumn(0,"UPJANG"));

	ds_CheckCnt.clear();
	ds_CheckCnt.addColumn("RECIPE_CD","STRING");
	ds_CheckCnt.addRow();
	ds_CheckCnt.setColumn(0,"RECIPE_CD",ds_Recipe.getColumn(0,"RECIPE_CD"));
	http.Sync=true;
	fsp_clear(this);
	ds_Rowcnt.clearData();
	fsp_addSearch(this,"fm/fmm:FMM00010E_S028");
	fsp_callService(this,"","","ds_CheckCnt=ds_CheckCnt","ds_Rowcnt=ds_Rowcnt",otherArg,"fn_call_back","",true);
	http.Sync=false;
	if(ds_Rowcnt.getRowCount()>0)
	{
		//alert(fn_AlertMsg("019"));
		g_Message("EE", fn_AlertMsg("019"));
		return;
	}
	ds_Recipe.deleteRow(0);
	ds_ItemList.deleteAll();
	ds_CookMethod.deleteAll();
	ds_phf.clearData();
	fn_T0_Save();
	//TRACE("DEL ROWCOUNT="+ds_Recipe.GetDelRowCount());
	
}
function fn_T0_Save()
{
	var v_CurDate = gfn_today();	
	var sUpjang;
	if(ds_Recipe.getRowCount()==0 && ds_Recipe.getDeletedRowCount()==0)
	{
		return;
	}
	if(v_gbn==0 && gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))>0 )	// 한화 레시피 리턴( 한화데이타는 변경및 삭제 금지)
	{
		return;
	}
	if(GetRowType(ds_Recipe,0)=="insert")
	{
		if(fn_ValidCheck()==false)
		{
			return;		
		}
	}
	if(GetRowType(ds_Recipe,0)=="update")
	{
		//if(fn_ValidCheck()==false)
		if(fn_ValidCheck_Conf()==false)
		{
			return;		
		}
	}	
    fsp_clear(this);
    // 서비스셋팅
    var actionName, cmdName, inData, outData, otherArg, callBackFnc;
    var searchsql,insertSql, updateSql, deleteSql,saveFlagColumn, keySqlName, keyIncrement, callbackSql;
	
	if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
	{
		return;
	}
	if(ds_MainRecipeList.getRowCount()>0)
	{
		otherArg="UPJANG="+gfn_trim(ds_MainRecipeList.getColumn(0,"UPJANG"));
		sUpjang = gfn_trim(ds_MainRecipeList.getColumn(0,"UPJANG"));
	}
	else
	{
		otherArg="UPJANG="+gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value);
		sUpjang = gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value);
	}
	
	//TRACE("v_gbn="+v_gbn);
	if(v_gbn==1 && gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))>0 || ds_Recipe.getDeletedRowCount()>0 ) // 본사
	{			
		if(ds_Recipe.getDeletedRowCount()==0)
		{
			if(ds_ItemList.getRowCount()==0)
			{
				//alert(fn_AlertMsg("013"));
				g_Message("EE", fn_AlertMsg("013"));
				return;
			}
			if(ds_ItemList.getRowCount()==0)
			{
				//alert(fn_AlertMsg("014"));
				g_Message("EE", fn_AlertMsg("014"));
				return;
			}			
			if(ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0 || gfn_trim(ITEM_CODE)==null")!=-1)
			{
				//alert(fn_AlertMsg("015"));
				g_Message("EE", fn_AlertMsg("015"));
				return;
			}
			if(ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0 || gfn_trim(CUISINE_DESC)==null")!=-1)
			{
				//alert(fn_AlertMsg("016"));
				g_Message("EE", fn_AlertMsg("016"));
				return;
			}						
			for(i=0;i<ds_ItemList.getRowCount();i++)
			{
				ds_ItemList.setColumn(i,"ITEM_SEQ",i+1);
			}
			var v_max=ds_CookMethod.getMax("CUISINE_SEQ");
			if( gfn_trim(v_max)==null || gfn_length(gfn_trim(v_max))==0 )
			{
				v_max=0;
			}
			for(i=0;i<ds_CookMethod.getRowCount();i++)
			{
				if(gfn_length(gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ")))==0
						|| gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ"))==null )
				{
					v_max=v_max+1;
					ds_CookMethod.setColumn(i,"CUISINE_SEQ",v_max);
				}
				
				if ( gfn_isNull(ds_CookMethod.getColumn(i,"UPJANG"))) {
					ds_CookMethod.setColumn(i,"UPJANG",sUpjang);
				}
			}
			ds_Recipe.setColumn(0,"UDATE",gfn_subStr(v_CurDate,0,8));
			//입력및 업데이트 저장
			inData		= "ds_Recipe=ds_Recipe:U ds_ItemList=ds_ItemList:U ds_CookMethod=ds_CookMethod:U";
			outData		= "";
			callBackFnc	= "fn_Call_ShowMsg";
			insertSql1 	= "";
			insertSql2 	= "fm/fmm:FMM00010E_I002";
			insertSql3 	= "fm/fmm:FMM00010E_I003";
			updateSql1	= "fm/fmm:FMM00010E_U001";
			updateSql2	= "fm/fmm:FMM00010E_U002";
			updateSql3	= "fm/fmm:FMM00010E_U003";			
			deleteSql1	= "";
			deleteSql2	= "fm/fmm:FMM00010E_D002";
			deleteSql3	= "fm/fmm:FMM00010E_D003";
			keyIncrement= -1;
			callbackSql	= "";
			
			fsp_addSave(this, insertSql1, updateSql1, deleteSql1,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
			fsp_addSave(this, insertSql2, updateSql2, deleteSql2,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
			fsp_addSave(this, insertSql3, updateSql3, deleteSql3,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
			http.Sync=true;
			fsp_callService(this, "", "", inData, outData, otherArg, callBackFnc);	
			http.Sync=false;
			ds_phf.applyChange();				
		}
		if (ds_Recipe.getDeletedRowCount()>0)
		{
			ds_MainRecipeList.deleteRow(ds_MainRecipeList.rowposition);
			v_ImgNM=ds_Recipe.getDeletedColumn(0,"SPHOTO_PATH");//=================
			// 사용유무 확인로직
			// 로우 카운트 1이상 이면 삭제 취소
			//  출력 메시지:: 이미 사용중인 레시피입니다. 삭제 할 수 없습니다.
			//TRACE("삭제 TR");
			inData		= "ds_Recipe=ds_Recipe:U";
			outData		= "";
			callBackFnc	= "fn_call_back_imgDel";
			insertSql 	= "";
			updateSql	= "";
			deleteSql1	= "fm/fmm:FMM00010E_D004";
			deleteSql2	= "fm/fmm:FMM00010E_D005";
			deleteSql3	= "fm/fmm:FMM00010E_D006";
			//deleteSql4	= "fm/fmm:FMM00010E_D007";
			keyIncrement= -1;
			callbackSql	= "";
			
			fsp_addSave(this, insertSql, updateSql, deleteSql1,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
			fsp_addSave(this, insertSql, updateSql, deleteSql2,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
			fsp_addSave(this, insertSql, updateSql, deleteSql3,saveFlagColumn, keySqlName, keyIncrement, callbackSql);
			
			fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);
		}
	}
	else		// 3 본사 신규 레시피 생성 저장
	{
	//trace("3 본사 신규 레시피 생성 저장");
		for(i=0;i<ds_ItemList.getRowCount();i++)
		{
			ds_ItemList.setColumn(i,"ITEM_SEQ",i+1);
		}
		var v_max=ds_CookMethod.getMax("CUISINE_SEQ");
		if( gfn_trim(v_max)==null || gfn_length(gfn_trim(v_max))==0 )
		{
			v_max=0;
		}
		for(i=0;i<ds_CookMethod.getRowCount();i++)
		{
			if(gfn_length(gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ")))==0
					|| gfn_trim(ds_CookMethod.getColumn(i,"CUISINE_SEQ"))==null )
			{
				v_max=v_max+1;
				ds_CookMethod.setColumn(i,"CUISINE_SEQ",v_max);
			}
			
			if ( gfn_isNull(ds_CookMethod.getColumn(i,"UPJANG"))) {
				ds_CookMethod.setColumn(i,"UPJANG",sUpjang);
			}
			
		}					
		ds_RecipeSeq.clearData();
		inData		= "ds_Recipe=ds_Recipe ds_ItemList=ds_ItemList ds_CookMethod=ds_CookMethod";
		outData		= "ds_RecipeSeq=ds_RecipeSeq";
		callBackFnc	= "fn_Call_ShowMsg";
		searchsql	= "fm/fmm:FMM00010E_S029";
		insertSql1 	= "fm/fmm:FMM00010E_I009";
		insertSql2 	= "fm/fmm:FMM00010E_I010";
		insertSql3 	= "fm/fmm:FMM00010E_I011";
		// if(ds_CookMethod.RowCount()>0)
		// {
			// trace("조리법 저장");
			// insertSql3 	= "fm/fmm:FMM00010E_I011";
		// }
		updateSql	= "";		
		deleteSql	= "";
		keyIncrement= -1;
		callbackSql	= "";
		fsp_addSearch(this,searchsql,true);
		fsp_addMulti(this, insertSql1);
		fsp_addMulti(this, insertSql2);
		if(ds_CookMethod.getRowCount()>0)
		{
			fsp_addMulti(this, insertSql3);
		}
		
		http.Sync=true;
		fsp_callService(this, actionName, cmdName, inData, outData, otherArg, callBackFnc);	
		http.Sync=false;
		ds_phf.applyChange();
		// fn_T0_Clear();
		// g_debug("ds_RecipeSeq");
	}
}
function fn_T0_New_Search(gbn,RECIPE)
{
	if(rdo_Detail.index==2)
	{
		div_Material.img_JoryMethod.image="";
		div_Material.Div0.visible=false;
	}
	// gbn 0 한화 1 본사 구분값입니다.
    if( gfn_length(gfn_trim(RECIPE))==0 || gfn_trim(RECIPE)==null )
    {
		// 이루틴은 무조건 레시피 명이 들어와야 합니다.
		return;
    }
	v_ImgNM="";

	v_gbn=gbn;
	v_RECIPE=RECIPE;
	ds_cond.clearData();
	ds_cond.addRow();
	ds_cond.setColumn(0,"RECIPE_NAME"	, RECIPE);
	ds_cond.setColumn(0,"RECIPE_CD"		, ds_RecipeSeq.getColumn(0,"NEW_RECIPE_SEQ"));
	ds_cond.setColumn(0,"UPJANG"		, gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value));
	fsp_clear(this);
	ds_Recipe.clearData();
	if(gbn==0)
	{
		fsp_addSearch(this,"fm/fmr:FMR00010E_S014");
	}
	else
	{
		fsp_addSearch(this,"fm/fmm:FMM00010E_S014");
	}
	chk_All.value=0;
	fsp_callService(this,"","","ds_cond=ds_cond","ds_Recipe=ds_Recipe","","fn_call_back_T0_search","",true);
}
function fn_Call_ShowMsg(cd,errmsg)
{
	if(cd!=0)
	{
		g_Message("EE","시스템 오류!\n\n전산 담당자에게 문의하세요.");
		return;
	}
	else
	{
		g_Message("02");
		if(gfn_length(gfn_trim(ed_RecipeCD.value))==0)
		{
			fn_T0_New_Search(1,gfn_trim(ed_RecipeNM.value));
		}
		return;
	}
}
function fn_T0_Reset()
{
	if(div_Detail.fn_Update_Chk())
	{
		return;
	}
	v_gbn=1;//0 ->한화 조회 1-> 본사 조회 3-> 본사 입력 상태로 변경
	if(ds_MainRecipeList.getRowCount()==0)
	{
		if(gfn_length(gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value))==0)
		{
			g_Message("EE",fn_AlertMsg("051"));
			return;
		}
	}
	fn_T0_Clear();
	ds_Recipe.clearData();
	ds_Recipe.addRow();
	ds_Recipe.setColumn(0,"PHF_MGMT_YN","N");
	ds_Recipe.setColumn(0,"PHF","N");
	ds_CookMethod.clearData();
	ed_RecipeNM.enable=true;
	cbo_RecipeClass.enable=true;
	ed_SameWord.enable=true;
		
	ds_ItemList.clearData();
	if(ds_phf.getRowCount()==0)
	{
		http.Sync=true;
		fn_Phf();
		http.Sync=false;
	}
	for(i=0;i<ds_phf.getRowCount();i++)
	{
		ds_phf.setColumn(i,"PHF","N");
	}
	Image0.image="";
	Image0.text="이미지가 없습니다.";
	ed_wonga.value=0;	
	//v_gbn=1;
}
function fn_call_back_imgDel(cd,errmsg)
{
	if(cd!=0)
	{
		v_ImgNM="";
	}
	else
	{
		ds_ItemList.applyChange();
		ds_CookMethod.applyChange();
		ds_ItemList.reset();
		ds_CookMethod.reset();
		g_Message("02");		
		var v_path="";
		if(v_gbn==0)
		{
			return;
		}
		else
		{
			v_path="FMM_STD_RECIPE_MST";
		}
		if(gfn_length(gfn_trim(v_ImgNM))>0)
		{
			var v_rtn=fsp_fileDelete(v_path, v_ImgNM,true);
			if(v_rtn==false)
			{
				//alert(fn_AlertMsg("017"));			
				g_Message("EE", fn_AlertMsg("017"));
				return;
			}
			else
			{
				Image0.image="";
				Image0.text="이미지가 없습니다.";
			}
		}
		
	}
}
// 자재갖고오기 콜백x-frame
function fn_call_back_T0_jajea(cd,errmsg)
{
	if(cd==-1) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==3)
		{
			Copy(ds_tempItem,"ds_ItemList");
			ds_ItemList.clearData();

			for(i=0;i<ds_tempItem.getRowCount();i++)
			{
				ds_ItemList.addRow();
				ds_ItemList.copyRow(i,ds_tempItem,i);
				ds_ItemList.setColumn(i,"RECIPE_CD","");
				ds_ItemList.setColumn(i,"UPJANG",gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value));
			}			
		}
		//ds_ItemList.AddRow();
		ed_wonga.value=ds_ItemList.getSum("PERSON_PRICE");
		//조리법갖고오기
		fn_Jory();
		
		grd_jajea.setFocus();
	}	
}
// 자재갖고오기 콜백jsp
function fn_call_back_T0_jajea_jsp(svcid,cd,errmsg)
{
	//releaseCapture();
	if(cd==-1) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==3)
		{
			Copy(ds_tempItem,"ds_ItemList");
			ds_ItemList.clearData();

			for(i=0;i<ds_tempItem.getRowCount();i++)
			{
				ds_ItemList.addRow();
				ds_ItemList.copyRow(i,ds_tempItem,i);
				ds_ItemList.setColumn(i,"RECIPE_CD","");
				ds_ItemList.setColumn(i,"UPJANG",gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value));
			}			
		}
		//ds_ItemList.AddRow();
		ed_wonga.value=ds_ItemList.getSum("PERSON_PRICE");
		//조리법갖고오기
		fn_Jory();
		//PHF 조회
		fn_Phf();
	}	
}

// 조리법갖고오기 콜백
function fn_call_back_T0_jory(cd,errmsg)
{
	if(cd==-1) 
	{
		return;
	}
	else
	{
		// //신규추가 일경우 인서트 시켜준다 아니면 들어온 데이타 그대로 보여준다
		if(v_gbn==3)
		{
			Copy(ds_tempCook,"ds_CookMethod");
			ds_CookMethod.clearData();
			
			for(i=0;i<ds_tempCook.getRowCount();i++)
			{
				ds_CookMethod.addRow();
				ds_CookMethod.copyRow(i,ds_tempCook,i);
			}
			ds_Recipe.setColumn(0,"RECIPE_CD","");//가장 마지막 조리법 처리후 레시피코드 리셋
		}
	}	
}
// phf가져오기 콜백
function fn_call_back_T0_phf(cd,errmsg)
{
	if(cd==-1) 
	{
		return;
	}
	else
	{
	}	
}
// 레시피코드로 참조자료 조회
function fn_T0_Search(gbn,RECIPE)
{
	if(rdo_Detail.index==2)
	{
		div_Material.img_JoryMethod.image="";
		div_Material.Div0.visible=false;
	}	
	// gbn 0 한화 1 본사 구분값입니다.
    if( gfn_length(gfn_trim(RECIPE))==0 || gfn_trim(RECIPE)==null )
    {
		// 이루틴은 무조건 레시피 명이 들어와야 합니다.
		return;
    }
	v_ImgNM="";

	v_gbn=gbn;
	v_RECIPE=RECIPE;
	ds_cond.clearData();
	ds_Recipe.clearData();
	//ds_ItemList.clearData();
	ds_cond.addRow();
	ds_cond.setColumn(0,"RECIPE_NAME"	, RECIPE);
	ds_cond.setColumn(0,"RECIPE_CD"		, ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"RECIPE_CD"));
	ds_cond.setColumn(0,"UPJANG"		, ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"UPJANG"));
	fsp_clear(this);
	
	if(gbn==0)
	{
		fsp_addSearch(this,"fm/fmr:FMR00010E_S014");
		ed_SameWord.enable = false;
	}
	else
	{
		fsp_addSearch(this,"fm/fmm:FMM00010E_S014");
		ed_SameWord.enable = true;
	}
	chk_All.value=0;
	//http.Sync = true;
	fsp_callService(this,"","","ds_cond=ds_cond","ds_Recipe=ds_Recipe","","fn_call_back_T0_search","",true);
	//http.Sync = false;
}
//	레시피자재참조자료 조회
function fn_Jajea()
{
	var arg="";
	arg	="RECIPE_NAME="	+	wrapQuote(ds_cond.getColumn(0,"RECIPE_NAME"))
		+" RECIPE_CD="	+	wrapQuote(ds_cond.getColumn(0,"RECIPE_CD"))	
		+" UPJANG="		+	wrapQuote(ds_cond.getColumn(0,"UPJANG"));
	
	ds_ItemList.clearData();
	ds_CookMethod.clearData();
	
	//trace(ds_cond.savexml());
/*	
	tit_ClearActionInfo(this);
	ds_ItemList.ClearData();
	if(v_gbn==0)
	{
		tit_addSearchActionInfo(this,"fm/fmm:FMM00010E_S031");
	}
	else
	{
		tit_addSearchActionInfo(this,"fm/fmm:FMM00010E_S010");
	}
	tit_CallService(this,"","","ds_cond=ds_cond","ds_ItemList=ds_ItemList","","fn_call_back_T0_jajea","",true);	
*/

	var OutDS="ds_ItemList=ds_ItemList";
	
	if(v_gbn==0)
	{
		jsp_transaction(
			  this
			, "ds_ItemList"
			, "U_svc::" + "fm/fmm/FMM00010E_S031.jsp"
			, ""
			, OutDS
			, arg
			, "fn_call_back_T0_jajea_jsp"
			, ""
			, "");
		//transaction("ds_ItemList","S_FMM::FMM00010E_S031.jsp","",OutDS,arg,"fn_call_back_T0_jajea_jsp");	
	}
	else
	{
		jsp_transaction(
			  this
			, "ds_ItemList"
			, "U_svc::" + "fm/fmm/FMM00010E_S010.jsp"
			, ""
			, OutDS
			, arg
			, "fn_call_back_T0_jajea_jsp"
			, ""
			, "");
		//transaction("ds_ItemList","S_FMM::FMM00010E_S010.jsp","",OutDS,arg,"fn_call_back_T0_jajea_jsp");
	}
}
//	레시피조리법 참조자료조회
function fn_Jory()
{
	//trace("jory");
	ds_CookMethod.clearData();

	fsp_clear(this);
	if(v_gbn==0)
	{	
		fsp_addSearch(this,"fm/fmr:FMR00010E_S011");
	}
	else
	{
		fsp_addSearch(this,"fm/fmm:FMM00010E_S011");
	}
	//http.Sync = true;
	fsp_callService(this,"","","ds_cond=ds_cond","ds_CookMethod=ds_CookMethod","","fn_call_back_T0_jory","",true);	
	//http.Sync = false;

	//fn_Phf();
}
function fn_Phf()
{
	//trace("PHF");
	fsp_clear(this);
	ds_phf.clearData();
	if(v_gbn==0)
	{	
		fsp_addSearch(this,"fm/fmr:FMR00010E_S015");
	}
	else
	{
		fsp_addSearch(this,"fm/fmm:FMM00010E_S015");
	}
	//http.Sync = true;
	fsp_callService(this,"","","ds_cond=ds_cond","ds_phf=ds_phf","","fn_call_back_T0_phf","",true);
	//http.Sync = false;
}
function rdo_Detail_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	switch(e.postindex)
	{
		case 0:
			div_Material.url="U_FMM::FMM00014E.xfdl";
			div_Material.position.height = 333;
			this.parent.div_Detail.resetScroll();
			break;
		case 1:
			div_Material.url="U_FMM::FMM00015E.xfdl";
			div_Material.position.height = 333;
			this.parent.div_Detail.resetScroll();
			// if(v_gbn==0)
			// {
				// div_Material.Grid0.Enable=false;
			// }
			// else
			// {
				// div_Material.Grid0.Enable=true;
			// }			
			break;
		case 2:
			div_Material.url="U_FMM::FMM00016E.xfdl";
			div_Material.position.height = 800;
			this.parent.div_Detail.resetScroll();
			
			var sFileName = Combo2.value;
			div_Material.fn_Get_Recipe_Cuisine_Orpn_Image(sFileName);
			break;
        default :
            break;
	}	
}

function btn_ratio_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(v_gbn==0)	// 한화 레시피 조회만
	{
		return;
	}
	var v_NQ=0;
	if(ed_ratio.visible==true)
	{
		//화면에서 가리고 반영하기
		ed_ratio.visible=false;
		st_Percent.visible=false;
		if(gfn_length(gfn_trim(ed_ratio.value))==0 || gfn_trim(ed_ratio.value)==null )
		{
			return;
		}
		for(i=0;i<ds_ItemList.getRowCount();i++)
		{
			v_NQ=Math.round((toNumber(ds_ItemList.getColumn(i,"NEED_QTY"))*toNumber(ed_ratio.value))/100,2);
			ds_ItemList.setColumn(i,"NEED_QTY",v_NQ);
		}
		ed_ratio.value="";
	}
	else
	{
		ed_ratio.visible=true;
		st_Percent.visible=true;
	}
}
// PHF관리 ds_recipe에 반영하기
function ds_phf_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	switch(e.row)
	{
		case 0:
			if(e.columnid=="PHF")
			{
				ds_Recipe.setColumn(0,"PHF_MGMT1",e.newvalue);
			}
			break;
		case 1:
			if(e.columnid=="PHF")
			{
				ds_Recipe.setColumn(0,"PHF_MGMT2",e.newvalue);
			}
			break;
		case 2:
			if(e.columnid=="PHF")
			{			
				ds_Recipe.setColumn(0,"PHF_MGMT3",e.newvalue);
			}
			break;
		case 3:
			if(e.columnid=="PHF")
			{			
				ds_Recipe.setColumn(0,"PHF_MGMT4",e.newvalue);
			}
			break;
		case 4:
			if(e.columnid=="PHF")
			{		
				ds_Recipe.setColumn(0,"PHF_MGMT5",e.newvalue);
			}
			break;
        default :
            break;
	}
	var v_1=ds_Recipe.getColumn(0,"PHF_MGMT1");
	var v_2=ds_Recipe.getColumn(0,"PHF_MGMT2");
	var v_3=ds_Recipe.getColumn(0,"PHF_MGMT3");
	var v_4=ds_Recipe.getColumn(0,"PHF_MGMT4");
	var v_5=ds_Recipe.getColumn(0,"PHF_MGMT5");
	
	if( v_1=='Y' && v_2=='N')
	{
		ds_Recipe.setColumn(0,"PHF","Y");
	}
	else
	{
		if(v_1=='Y' || v_2=='N')
		{
			if(v_3=='Y' || v_4=='Y' || v_5=='Y')
			{
				ds_Recipe.setColumn(0,"PHF","Y");
			}
			else
			{
				ds_Recipe.setColumn(0,"PHF","N");
			}
		}
		else
		{
			ds_Recipe.setColumn(0,"PHF","N");
		}
	}
	
}

function btn_RecipePop_OnClick(obj:Button, e:ClickEventInfo)
{
	return;
 // 신규추가만 확인 FMR_STD_RECIPE_MST에 존재하는지만 확인하고 신규추가 입력은 막지 않습니다.
 // 단 표준레시피로 확정 이동시 표준레시피에 존해하면 이동확정불가
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	//trace("초기화 v_gbn="+v_gbn);
	if(v_gbn==0)
	{
		return;
	}
	if(cbo_RecipeClass.index<1)
	{
		//alert(fn_AlertMsg("044"));
		g_Message("EE", fn_AlertMsg("044"));
		return;
	}
	if(gfn_length(gfn_trim(ed_RecipeNM.value))==0 || gfn_trim(ed_RecipeNM.value)==null )
	{
		//alert(fn_AlertMsg("009"));
		g_Message("EE", fn_AlertMsg("009"));
		return;
	}
	ds_input.clear();
	ds_input.addColumn("RECIPE_NAME","STRING");
	ds_input.addColumn("RECIPE_CLASS","STRING");
	ds_input.addRow();
	ds_input.setColumn(0,"RECIPE_NAME",gfn_trim(ed_RecipeNM.value));
	ds_input.setColumn(0,"RECIPE_CLASS",gfn_trim(cbo_RecipeClass.value));
	http.Sync=true;
	fsp_clear(this);
	ds_Valid.clearData();
	fsp_addSearch(this,"fm/fmr:FMR00010E_S016");
	fsp_callService(this,"","","ds_input=ds_input","ds_Valid=ds_Valid","","fn_call_back","",true);
	http.Sync=false;
		
	if(ds_Valid.getRowCount()>0)
	{
		//alert(fn_AlertMsg("010"));
		g_Message("EE", fn_AlertMsg("010"));
		ed_RecipeNM.value="";
		return;
	}
	else
	{
		//alert(fn_AlertMsg("011"));
		g_Message("EE", fn_AlertMsg("011"));
		return;
	}
} 
function ds_ItemList_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var v_EQ=0;	// EDIBLE_QTY		가식부량 1인소요량*폐기율==>NEED_QTY*(100-disuse_rate)
	var v_PP=0; // PERSON_PRICE 	인원가	자재g당단가*1인소요량==>GRAM_PRICE*NEED_QTY
	var v_CC=0; // CAL_CALC			에너지    100g:기본에너지=가식부량:계산할에너지==>CAL_CALC=(CAL*EDIBLE_QTY)/100

	switch(e.columnid)
	{
		// case "PERSON_PRICE":	
			// ed_wonga.value=ds_ItemList.Sum("PERSON_PRICE");
			// break;
		// case "EDIBLE_QTY":
			// v_CC=round((ds_ItemList.GetColumn(ds_ItemList.row,"CAL")*ds_ItemList.GetColumn(ds_ItemList.row,"NEED_QTY")*((100-ds_ItemList.GetColumn(ds_ItemList.row,"disuse_rate"))/100))/100,2);
			// ds_ItemList.SetColumn(ds_ItemList.row,"CAL_CALC",v_CC);			
			// break;
		// case "NEED_QTY":	// 1인소요량
			// v_PP=round(ds_ItemList.GetColumn(ds_ItemList.row,"GRAM_PRICE")*ds_ItemList.GetColumn(ds_ItemList.row,"NEED_QTY"),2);
			// ds_ItemList.SetColumn(ds_ItemList.row,"PERSON_PRICE",v_PP);
			// v_EQ=round(ds_ItemList.GetColumn(ds_ItemList.row,"NEED_QTY")*((100-ds_ItemList.GetColumn(ds_ItemList.row,"disuse_rate"))/100),2);
			// ds_ItemList.SetColumn(ds_ItemList.row,"EDIBLE_QTY",v_EQ);			
			// break;
		case "PERSON_PRICE":	
			ed_wonga.value=ds_ItemList.getSum("PERSON_PRICE");
			break;
		case "EDIBLE_QTY":
			v_CC=Math.round((ds_ItemList.getColumn(e.row,"CAL")*ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"DISUSE_RATE"))/100))/100,2);
			ds_ItemList.setColumn(e.row,"CAL_CALC",v_CC);			
			break;
		case "NEED_QTY":	// 1인소요량
			v_PP=Math.round(ds_ItemList.getColumn(e.row,"GRAM_PRICE")*ds_ItemList.getColumn(e.row,"NEED_QTY"),0);
			ds_ItemList.setColumn(e.row,"PERSON_PRICE",v_PP);
			//같이 실행
			ed_wonga.value=ds_ItemList.getSum("PERSON_PRICE");
			
			v_EQ=Math.round(ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"DISUSE_RATE"))/100),2);
			ds_ItemList.setColumn(e.row,"EDIBLE_QTY",v_EQ);
			//같이 실행
			v_CC=Math.round((ds_ItemList.getColumn(e.row,"CAL")*ds_ItemList.getColumn(e.row,"NEED_QTY")*((100-ds_ItemList.getColumn(e.row,"DISUSE_RATE"))/100))/100,2);
			ds_ItemList.setColumn(e.row,"CAL_CALC",v_CC);			
			break;			
        default :
            break;			
	}
}

function btn_CustPop_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
// 사원조회
	var v_rtn=gfn_dialog("", "U_SCC::SCC00043P.xfdl","");
	var v_result=gfn_split(v_rtn,";");// 0 사번 1 성명 2 영문명 3 주민번호
	
	if( gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
	{
		return;
	}
	
	ds_Recipe.setColumn(0,"SABUN",v_result[0]);
	ds_Recipe.setColumn(0,"NM_KOR",v_result[1]);	
}

function grd_jajea_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	fn_grd_jajea_OnCellClick(obj,e.row,e.cell);
}

function fn_grd_jajea_OnCellClick(obj,nRow,nCell)
{
	var ActionVal="";
	var v_rtn="";
	var v_result="";
	ds_ItemList.rowposition=nRow;
	if(v_gbn==0)
	{
		switch(nCell)
		{
			case 2:	// 삭제
				g_Message("EE","한화 표준레시피는 조회만 가능합니다.");
				break;
			case 4:	// 자제조회팝업
				g_Message("EE","한화 표준레시피는 조회만 가능합니다.");	
				break;
			case 10:	// 1인소요량
				g_Message("EE","한화 표준레시피는 조회만 가능합니다.");
				break;
			case 13:	// 커팅규격
				g_Message("EE","한화 표준레시피는 조회만 가능합니다.");
				break;
			case 14:	// 커팅규격팝업
				g_Message("EE","한화 표준레시피는 조회만 가능합니다.");
				break;
			default :
				break;
				
		}
		return;
	}	
	switch(nCell)
	{
		case 2:
			if (! g_Confirm("01", '선택하신 데이터를 삭제하시겠습니까?!')) return;
			ds_ItemList.deleteRow(ds_ItemList.rowposition);
			break;
		case 4:
			var arg = new Array();
			if(GetRowType(ds_ItemList,nRow)!="insert")
			{
				return;
			}
			if(ds_MainRecipeList.getRowCount()==0)
			{
				if(gfn_length(gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value))==0)
				{
					g_Message("EE",fn_AlertMsg("051"));
					return;
				}
				else
				{
					arg = {IN_GUBUN:'FMM00010E'
						 , IN_UPJANG:gfn_trim(gfn_nvl(this.parent.div_NoReci.ed_UpjangCD.value))
						 , OBJ_DS_ITEMLIST:ds_ItemList
						 , OBJ_DS_MAINRECIPELIST:ds_MainRecipeList
						 , OBJ_DS_RECIPE:ds_Recipe
						 };
				}
			}
			else
			{
				arg = {IN_GUBUN:'FMM00010E'
				     , IN_UPJANG:ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"UPJANG")
				     , OBJ_DS_ITEMLIST:ds_ItemList
				     , OBJ_DS_MAINRECIPELIST:ds_MainRecipeList
				     , OBJ_DS_RECIPE:ds_Recipe
				     };
			}
			v_rtn=gfn_dialog("", "U_FMM::FMM00014P.xfdl",arg); 
		
			break;
		case 14:
			v_rtn=gfn_dialog("", "U_FMM::FMM00015P.xfdl","");
			if(gfn_length(gfn_trim(v_rtn))==0 || gfn_trim(v_rtn)==null )
			{
				return;
			}			
			v_result=gfn_split(v_rtn,";");	// 0 그룹코드 1 그룹명 2 상세코드 3 상세코드명
			ds_ItemList.setColumn(nRow,"CUT_SPEC",v_result[2]);
			//ds_ItemList.setColumn(nRow,"CUT_SPEC_NAME",v_result[3]);	
			break;
        default :
            break;
			
	}	
}

function grd_jajea_OnKeyDown(obj:Grid, e:KeyEventInfo)
{
	if(e.keycode==13 && grd_jajea.getCellPos()!=9)
	{
		fn_additem();
	}
	else if(e.keycode==13 && grd_jajea.getCellPos()==9)
	{
		grd_jajea.moveToNextCell();
	}
}
function fn_additem()
{
		if(ds_Recipe.getRowCount()==0)
		{
			return;
		}
		if(v_gbn==0)
		{
			return;
		}
		if(ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0 || gfn_trim(ITEM_CODE)==null")!=-1)
		{
			return;
		}

		if(ds_MainRecipeList.getRowCount()>0)
		{
			ds_ItemList.addRow();
			ds_ItemList.setColumn(ds_ItemList.rowposition,"UPJANG",ds_MainRecipeList.getColumn(0,"UPJANG") );
			ds_ItemList.setColumn(ds_ItemList.rowposition,"NEED_QTY",1);// 이베트 처리 문제로 1세팅
		}
		else
		{
			if(gfn_length(gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value))==0)
			{
				g_Message("EE",fn_AlertMsg("051"));
				return;
			}
			ds_ItemList.addRow();
			ds_ItemList.setColumn(ds_ItemList.rowposition,"UPJANG",gfn_trim(this.parent.div_NoReci.ed_UpjangCD.value));
			ds_ItemList.setColumn(ds_ItemList.rowposition,"NEED_QTY",1);// 이베트 처리 문제로 1세팅
		}
		// 자재추가시 자동적으로 자재추가 팝업 띄우기 - 2008.05.22 - 이혜은대리 요청
		ds_ItemList.setColumn(ds_ItemList.rowposition,"RECIPE_CD",ds_Recipe.getColumn(0,"RECIPE_CD"));
		fn_grd_jajea_OnCellClick(grd_jajea, ds_ItemList.rowposition, 4);
		// ds_ItemList.SetColumn(ds_ItemList.row,"PHOTO_PATH",ds_Recipe.GetColumn(0,"PHOTO_PATH"));
		// ds_ItemList.SetColumn(ds_ItemList.row,"SPHOTO_PATH",ds_Recipe.GetColumn(0,"SPHOTO_PATH"));

}
function btn_RecipeElement_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	
	//trace(ds_MainRecipeList.saveXML());
	var v_Gubun = ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition , "GBN");
		
	var v_arg={IN_RECIPE_CD:ds_Recipe.getColumn(0,"RECIPE_CD")
	          ,IN_UPJANG:ds_ItemList.getColumn(0,"UPJANG")
	          ,IN_SUBINV_CLASS:""
	          ,v_gbn:v_Gubun};
	gfn_dialog("", "U_FMM::FMM00012P.xfdl",v_arg);
}

function ds_Recipe_OnLoadCompleted(obj:Dataset, e:DSLoadEventInfo)
{
	if(v_gbn==3)// 0 한화 일대 1 본사 일때 3 신규
	{
		ds_phf.setColumn(0,"PHF_MGMT1", ds_Recipe.getColumn(0,"PHF_MGMT1"));
		ds_phf.setColumn(0,"PHF_MGMT2", ds_Recipe.getColumn(0,"PHF_MGMT2"));
		ds_phf.setColumn(0,"PHF_MGMT3", ds_Recipe.getColumn(0,"PHF_MGMT3"));
		ds_phf.setColumn(0,"PHF_MGMT4", ds_Recipe.getColumn(0,"PHF_MGMT4"));
		ds_phf.setColumn(0,"PHF_MGMT5", ds_Recipe.getColumn(0,"PHF_MGMT5"));
		ds_phf.applyChange();
		ds_phf.reset();
	}
}


function common_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(e.postindex==0)
	{
		if(obj.name!="Combo5" && obj.name!="Combo1")
		{
			obj.index=e.preindex;
		}
	}
	if(obj.name=="cbo_RecipeType")
	{
		if(e.postindex==0)
		{
			ds_CClass.filter(""); // ds_RecipeType.UnFilter();
		}
		else
		{
			ds_CClass.filter("gfn_length(SET1)==0 || SET1=='"+e.postvalue+"'");
		}
	}
}
/******************************************************
 *  서버로 파일 삭제 처리 
 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
 * @param  serverFileName 서버의 파일명 
 * @param  isNeedRtn 처리 결과 (TRUE : 삭제 결과 확인시  FALSE:확인불필요
 * @return  필요시 처리 성공 여부 : true / 그외 false 
 ******************************************************/
function btn_ImgDelete_OnClick(obj:Button, e:ClickEventInfo)
{
	var v_path="";
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(v_gbn==0)	// 한화
	{
		return;
	}
	if(gfn_dsIsUpdated(ds_Recipe)==true || gfn_dsIsUpdated(ds_ItemList)==true || gfn_dsIsUpdated(ds_CookMethod)==true)
	{
		g_Message("02",fn_AlertMsg("047"));
		return;
	}	
	v_path="FMM_STD_RECIPE_MST";
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CD")))>0)
	{
		if(g_Confirm("01",fn_AlertMsg("050"))==false)
		{
			return;
		}
		//trace(ds_Recipe.GetColumn(0,"SPHOTO_PATH"));
		if(fsp_fileDelete(v_path, ds_Recipe.getColumn(0,"SPHOTO_PATH"),true))
		{
			ds_Recipe.setColumn(0,"SPHOTO_PATH","");
			ds_Recipe.setColumn(0,"PHOTO_PATH","");
			Image0.image="";
			Image0.text="이미지가 없습니다.";
			fn_T0_Save();
		}
		else
		{
			if(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH"))==null || gfn_length(gfn_trim(ds_Recipe.getColumn(0,"SPHOTO_PATH")))==0)
			{
				return;
			}
			else
			{
				//alert(fn_AlertMsg("017"));			
				g_Message("EE", fn_AlertMsg("017"));
			}
			return;
		}
	}

}
/******************************************************
 *  서버로 파일 전송 처리 
 * @param  httpfileObj  http file 처리 객체  
 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
 * @param  localFilePath 로컬 경로 
 * @param  localFileName 로컬 파일명 
 * @param  sendFileName  서버에 전송하고 싶은 이름 
 * @param  fileProcType  서버에서 기존 파일을 처리하는 타입 정의  
           D - deleteFileName에 기술된 파일명이 존재할 경우만 파일 삭제 ( 기본 값 )
           A - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
               ( 파일명은 서버에 정의된 되로 타임을 추가해야 할 경우 추가한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
           U - 전송하는 파일명으로 해당 파일이 존재할 경우 삭제 후 저장 
               ( 파일명은 무조건 Client를 기준으로 저장한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
           N - 전송하는 파일명으로 해당 파일이 존재할 경우 저장하지 않는다. 
               ( 파일명은 무조건 Client를 기준으로 저장한다. )
               또한, deleteFileName이 존재할 경우 함께 삭제한다. 
 * @param  deleteFileName 서버에서 삭제해야 하는 파일 명
           isDelete가 true이면서 해당 파일명이 기술되어 있지 않을 경우 
           기존 파일을 삭제한다. 
 * @return  서버에 저장된 파일 정보 Array 
            0 - 성공 : S / 실패 : E 
            1 - 서버에 저장된 실제 경로 
            2 - 서버에 저장된 실제 파일명 
            3 - 서버에 저장된 파일 사이즈 
******************************************************/
function btn_ImgInsert_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_Recipe.getRowCount()==0)
	{
		return;
	}
	if(v_gbn==0)			//한화
	{
		return;
	}	
	if(gfn_dsIsUpdated(ds_Recipe)==true || gfn_dsIsUpdated(ds_ItemList)==true || gfn_dsIsUpdated(ds_CookMethod)==true)
	{
		g_Message("02",fn_AlertMsg("047"));
		return;
	}	
	if(FileDialog.Open()==false)
	{
		return;
	}
	var v_filename=FileDialog.FileName;
	var v_filepath=FileDialog.FilePath;
	if(gfn_length(gfn_trim(v_filename))==0 || gfn_trim(v_filename)==null)
	{
		return;
	}
	//trace(v_filename);
	//trace(indexOf(v_filename,"."));
	var v_point_index=gfn_indexOf(v_filename,".");
	var v_ext=gfn_subStr(v_filename,v_point_index);
	//trace(v_ext);
	var v_path="";
	var v_savenm="";
	
	v_path="FMM_STD_RECIPE_MST";
	v_savenm=ds_Recipe.getColumn(0,"RECIPE_CD")+v_ext;
	
	// 파일 서버로 전송 
	var arr = fsp_fileWrite(HttpFile, v_path, v_filepath, v_filename,v_savenm,"U");  
//	var arr = fsp_fileWrite(HttpFile, "FSR_STD_RECIPE_MST", v_filepath, v_filename,"A0100001"+v_ext,"U");  
//	alert(arr );
	// 처리 결과 확인하기 
    if( arr[0] == "E" ) {
		//alert(fn_AlertMsg("018"));
		g_Message("EE", fn_AlertMsg("018"));
		return;
    }
	else
	{
		ds_Recipe.setColumn(0,"PHOTO_PATH",v_filename);
		ds_Recipe.setColumn(0,"SPHOTO_PATH",arr[2]);
		fn_T0_Save();
		/******************************************************
		 *  서버에서 실제 이미지 경로 가져오기 
		 * @param  serverSaveDir  서버에 저장할 디렉토리 별명 
		 * @param  fileName  보여줄 파일명 ( 옵션 )
		 * @return  서버 전제 url 경로
		 ******************************************************/
		 Image0.text="";
		 Image0.image=fsp_getServerDir(v_path,arr[2]);
	}
}
// 표준및 미확정 레세피 라디오 변경시 데이타셋 클리어
function fn_T0_Clear()
{
	ds_Recipe.clearData();
	ds_ItemList.clearData();
	ds_CookMethod.clearData();
	Image0.image="";
	Image0.text="이미지가 없습니다.";
	ed_wonga.value="";	
}
/* 지원하지 않는 이벤트입니다.*/
function Image0_OnLoadError(obj,nErrorCode,strErrorMsg)
{
	Image0.text="이미지 로드에\n\n실패했습니다.";
}
function fn_ValidCheck()
{
	//trace("저장루틴1");
	if(grd_List.formatid=="StdRecipe" && GetRowType(ds_Recipe,0)!="insert")
	{
		//		// 표준레시피 저장시 데이터 체크 
		// if(ds_Recipe.GetColumn(0,"RECIPE_CD").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"RECIPE_CD").trim()==null)
		// {
					//alert(fn_AlertMsg("031"));
			// g_Message("EE", fn_AlertMsg("031"));
			// return false;
		// }
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			//alert(fn_AlertMsg("030"));
			g_Message("EE", fn_AlertMsg("030"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
		{
			//alert(fn_AlertMsg("032"));
			g_Message("EE", fn_AlertMsg("032"));
			return false;
		}		
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE"))==null)
		{
			//alert(fn_AlertMsg("033"));
			g_Message("EE", fn_AlertMsg("033"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE"))==null)
		{
			//alert(fn_AlertMsg("034"));
			g_Message("EE", fn_AlertMsg("034"));
			return false;
		}
/*		if(ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim().length()==0 || 
					ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim()==null)
		{
			//	//alert(fn_AlertMsg("035"));
			g_Message("EE", fn_AlertMsg("035"));
			return false;
		}
		if(ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim().length()==0 || 
					ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim()==null)
		{
			//	//alert(fn_AlertMsg("036"));
			g_Message("EE", fn_AlertMsg("036"));
			return false;
		}
		if(ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim().length()==0 || 
					ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim()==null)
		{
			//alert(fn_AlertMsg("037"));
			g_Message("EE", fn_AlertMsg("037"));
			return false;
		}
		if(ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim().length()==0 || 
					ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim()==null)
		{
			//alert(fn_AlertMsg("038"));
			g_Message("EE", fn_AlertMsg("038"));
			return false;
		}
		// if(ds_Recipe.GetColumn(0,"RECIPE_TEMPER").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"RECIPE_TEMPER").trim()==null)
		// {
			////alert(fn_AlertMsg("039"));
			// g_Message("EE", fn_AlertMsg("039"));
			// return false;
		// }
		// if(ds_Recipe.GetColumn(0,"CORE_TEMPER_YN").trim().length()==0 || 
					// ds_Recipe.GetColumn(0,"CORE_TEMPER_YN").trim()==null)
		// {
			////alert(fn_AlertMsg("040"));
			// g_Message("EE", fn_AlertMsg("040"));
			// return false;
		// }
		if(ds_Recipe.GetColumn(0,"PHF_MGMT_YN").trim().length()==0 || 
					ds_Recipe.GetColumn(0,"PHF_MGMT_YN").trim()==null)
		{
			//alert(fn_AlertMsg("041"));
			g_Message("EE", fn_AlertMsg("041"));
			return false;
		}
*/		
		if(ds_ItemList.getRowCount()==0)
		{
			//alert(fn_AlertMsg("042"));
			g_Message("EE", fn_AlertMsg("042"));
			return false;
		}
		if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
		{
			//alert(fn_AlertMsg("043"));
			g_Message("EE", fn_AlertMsg("043"));
			return false;
		}		
		
		if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
		{
			//alert(fn_AlertMsg("014"));
			g_Message("EE", fn_AlertMsg("014"));
			return false;
		}		
	}
	else
	{
		//trace("저장루틴2");
		// 미확정레시피 저장시 데이터 체크 
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
		{
			//alert(fn_AlertMsg("031"));
			g_Message("EE", fn_AlertMsg("030"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
		{
			//alert(fn_AlertMsg("032"));
			g_Message("EE", fn_AlertMsg("032"));
			return false;
		}		
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE"))==null)
		{
			//alert(fn_AlertMsg("033"));
			g_Message("EE", fn_AlertMsg("033"));
			return false;
		}
		if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE")))==0 || 
					gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE"))==null)
		{
			//alert(fn_AlertMsg("034"));
			g_Message("EE", fn_AlertMsg("034"));
			return false;
		}		
		if(ds_ItemList.getRowCount()==0)
		{
			//alert(fn_AlertMsg("042"));
			g_Message("EE", fn_AlertMsg("042"));
			return false;
		}
		if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
		{
			//alert(fn_AlertMsg("043"));
			g_Message("EE", fn_AlertMsg("043"));
			return false;
		}		
		
		if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
		{
			//alert(fn_AlertMsg("014"));
			g_Message("EE", fn_AlertMsg("014"));
			return false;
		}
	}
	return true;
}
function fn_ValidCheck_Conf()
{
	//trace("저장루틴3");
	// 미확정레시피 표준레시피로 확정시 데이터 체크 
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_NAME"))==null)
	{
		//alert(fn_AlertMsg("031"));
		g_Message("EE", fn_AlertMsg("031"));
		return false;
	}
	// if(ds_Recipe.GetColumn(0,"RECIPE_NAME").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_NAME").trim()==null)
	// {
		//	//alert(fn_AlertMsg("030"));
		// g_Message("EE", fn_AlertMsg("030"));
		// return false;
	// }
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_CLASS"))==null)
	{
		//alert(fn_AlertMsg("032"));
		g_Message("EE", fn_AlertMsg("032"));
		return false;
	}		
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"RECIPE_TYPE"))==null)
	{
		//alert(fn_AlertMsg("033"));
		g_Message("EE", fn_AlertMsg("033"));
		return false;
	}
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"CUISINE_TYPE"))==null)
	{
		//alert(fn_AlertMsg("034"));
		g_Message("EE", fn_AlertMsg("034"));
		return false;
	}
	// if(ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"MAIN_ITEM_CODE1").trim()==null)
	// {
		//// //alert(fn_AlertMsg("035"));
		// g_Message("EE", fn_AlertMsg("035"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_SHAPE").trim()==null)
	// {
		//// //alert(fn_AlertMsg("036"));
		// g_Message("EE", fn_AlertMsg("036"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_TASTE").trim()==null)
	// {
		//// //alert(fn_AlertMsg("037"));
		// g_Message("EE", fn_AlertMsg("037"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_COLOR").trim()==null)
	// {
		//// //alert(fn_AlertMsg("038"));
		// g_Message("EE", fn_AlertMsg("038"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"RECIPE_TEMPER").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"RECIPE_TEMPER").trim()==null)
	// {
		// //alert(fn_AlertMsg("039"));
		// g_Message("EE", fn_AlertMsg("039"));
		// return false;
	// }
	// if(ds_Recipe.GetColumn(0,"CORE_TEMPER_YN").trim().length()==0 || 
				// ds_Recipe.GetColumn(0,"CORE_TEMPER_YN").trim()==null)
	// {
		// //alert(fn_AlertMsg("040"));
		// g_Message("EE", fn_AlertMsg("040"));
		// return false;
	// }
	if(gfn_length(gfn_trim(ds_Recipe.getColumn(0,"PHF_MGMT_YN")))==0 || 
				gfn_trim(ds_Recipe.getColumn(0,"PHF_MGMT_YN"))==null)
	{
		//alert(fn_AlertMsg("041"));
		g_Message("EE", fn_AlertMsg("041"));
		return false;
	}
	
	if(ds_ItemList.getRowCount()==0)
	{
		//alert(fn_AlertMsg("042"));
		g_Message("EE", fn_AlertMsg("042"));
		return false;
	}
	if( ds_ItemList.findRowExpr("gfn_length(gfn_trim(ITEM_CODE))==0")!=-1 )
	{
		//alert(fn_AlertMsg("043"));
		g_Message("EE", fn_AlertMsg("043"));
		return false;
	}		
	
	if(ds_CookMethod.getRowCount()>0 && ds_CookMethod.findRowExpr("gfn_length(gfn_trim(CUISINE_DESC))==0")!=-1 )
	{
		//alert(fn_AlertMsg("014"));
		g_Message("EE", fn_AlertMsg("014"));
		return false;
	}
	return true;
}
function grd_jajea_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	switch(e.cell)
	{
		case 0:
			//	g_Message("04",fn_AlertMsg("052"));
			if( isAlpha(gfn_subStr(ds_Recipe.getColumn(0,"RECIPE_CD"),0,1)))
			{
				g_Message("04",fn_AlertMsg("052"));
				return;
			}
			gfn_exportExcel(grd_jajea, "sheet1");
			break;
		default:
			gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
			break;
	}
}

function chk_All_OnClick(obj:CheckBox, e:ClickEventInfo)
{
	if(v_gbn==0)
	{
		return;
	}
	if(obj.isChecked()==1)
	{
		ds_Recipe.setColumn(0,"SPRING_YN",1);
		ds_Recipe.setColumn(0,"SUMMER_YN",1);
		ds_Recipe.setColumn(0,"AUTUMN_YN",1);
		ds_Recipe.setColumn(0,"WINTER_YN",1);
	}
	else
	{
		ds_Recipe.setColumn(0,"SPRING_YN",0);
		ds_Recipe.setColumn(0,"SUMMER_YN",0);
		ds_Recipe.setColumn(0,"AUTUMN_YN",0);
		ds_Recipe.setColumn(0,"WINTER_YN",0);	
	}
}

function ds_Recipe_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(v_gbn==0)
	{
		g_Message("EE",fn_AlertMsg("053"));
		return false;
	}
}

function ds_ItemList_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(v_gbn==0)
	{
		g_Message("EE",fn_AlertMsg("053"));
		return false;
	}
	if(e.columnid=="NEED_QTY")
	{
		if(toNumber(e.newvalue) <= 0 )
		{
			g_Message("EE","0보다 큰값을 입력하세요.");
			return false;
		}
	}	
}

function ds_phf_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(v_gbn==0)
	{
		g_Message("EE",fn_AlertMsg("053"));
		return false;
	}
}

function ds_CookMethod_CanColumnChange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(v_gbn==0)
	{
		g_Message("EE",fn_AlertMsg("053"));
		return false;
	}
}
//	조회된 레시피 복사 신규생성
function btn_CopyMake_OnClick(obj:Button, e:ClickEventInfo)
{
	if(ds_MainRecipeList.getRowCount()==0)
	{
		return;
	}
	if(gfn_dsIsUpdated(ds_Recipe)==true ||
		gfn_dsIsUpdated(ds_ItemList)==true || 
		gfn_dsIsUpdated(ds_phf)==true  )
	{
		g_Message("EE",fn_AlertMsg("047"));
		return;		
	}
	if(ds_Recipe.getRowCount()!=1)
	{
		g_Message("EE",fn_AlertMsg("046"));
		return;	
	}
	//var v_O_gbn=v_gbn;
	v_gbn=1;
	ds_Recipe.setColumn(0,"ORI_RECIPE_CD",ds_Recipe.getColumn(0,"RECIPE_CD"));
	ds_Recipe.setColumn(0,"RECIPE_CD","");
	Image0.image="";
	Image0.text="이미지가 없습니다.";
	ds_Recipe.setColumn(0,"PHOTO_PATH","");
	ds_Recipe.setColumn(0,"SPHOTO_PATH","");
	ds_Recipe.setColumn(0,"CDATE","");
	ds_Recipe.setColumn(0,"UDATE","");
	ds_Recipe.setColumn(0,"NM_KOR",g_Name);
	
	v_fRow=ds_CookClass.findRow("CD",ds_Recipe.getColumn(0,"CUISINE_TYPE"));
	ds_Recipe.setColumn(0,"PHF_MGMT_YN",ds_CookClass.getColumn(v_fRow,"PHF_DEFAULT_YN"));
	
	ed_RecipeNM.enable=true;
	cbo_RecipeClass.enable=true;
	ed_SameWord.enable=true;
	
	ds_ItemList.enableevent = false;
	for(i=0;i<ds_ItemList.getRowCount();i++)
	{
		ds_ItemList.setColumn(i,"RECIPE_CD","");
	}
	ds_ItemList.enableevent = true;
	
	ds_CookMethod.enableevent = false;
	for(i=0;i<ds_CookMethod.getRowCount();i++)
	{
		ds_CookMethod.setColumn(i,"RECIPE_CD","");
	}
	ds_CookMethod.enableevent = true;
//	v_gbn=v_O_gbn;
}

function ds_Recipe_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid=="PHF_MGMT_YN")
	{
		if(e.newvalue=="N")
		{
			for(i=0;i<5;i++)
			{
				ds_phf.setColumn(i,"PHF","N");
			}
		}
	}
}
function fn_Update_Chk()
{
	if(gfn_dsIsUpdated(ds_Recipe)==true ||
		gfn_dsIsUpdated(ds_ItemList)==true ||
		gfn_dsIsUpdated(ds_CookMethod)==true ||
		gfn_dsIsUpdated(ds_phf)==true	)
	{
		if(g_Confirm("02","변경된 데이타가 있습니다.\n\n저장하시겠습니까?"))
		{
			//TRACE(ds_Recipe.GetUpdate()+"/"+ds_ItemList.GetUpdate()+"/"+ds_CookMethod.GetUpdate()+"/"+ds_phf.GetUpdate());
			fn_T0_Save();  
			return true;
		}
		else
		{
			return false;
		}
	}
	else
	{
		return false;
	}
}
function Image0_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	pdiv_imgZoom.Image0.image=Image0.image;
	var nX = system.clientToScreenX(Image0,Image0.position.width); // Popup Button의 화면상의 X좌표 얻어오기
	var nY = system.clientToScreenY(Image0,50);	// Popup Button의 화면상의 Y좌표 얻어오기	
	
	pdiv_imgZoom.trackPopup(nX, nY+3);
}

function pdiv_imgZoom_Image0_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	pdiv_imgZoom.closePopup();
}

function Image0_OnMouseOut(obj:ImageViewer, e:MouseEventInfo)
{
	pdiv_imgZoom.closePopup();	
}

function btn_add_OnClick(obj:Button, e:ClickEventInfo)
{
	fn_additem();
}



function grd_jajea_OnMouseOver(obj:Grid, e:GridMouseEventInfo)
{
	if(e.row>=0)
	{
		switch(e.cell)
		{
			case 1:
				if(ds_ItemList.getColumn(e.row,"RESTRICT_YN")=="Y")
				{
					grd_jajea.tooltiptext="발주 제한 품목입니다.";
				}
				else
				{
					grd_jajea.tooltiptext="";
				}
				break;
			case 2:
				grd_jajea.tooltiptext="삭제";
				break;
			default:
				grd_jajea.tooltiptext="";
				break;
		}
	}
}


//더블클릭시 상품교체 - 상품교체시 키값을 제어하기 때문에 삭제후 삽입으로 처리(업데이트문 불가)
function grd_jajea_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{
	var nChkRow = e.row;

	var gbn = ds_MainRecipeList.getColumn(ds_MainRecipeList.rowposition,"GBN");
	
	if(gbn == '0')
	{
		gfn_alert("한화 레시피는 변경 불가능합니다.");
		return;
	}

	if(e.cell == '5')	//상품명 더블클릭시상품대제
	{
	
		//gfn_alert(ds_MainRecipeList.getColumn(ds_MainRecipeList.rowpositon,"GBN"));
	
		var arg= new Array();
			arg = {GUBUN:"MOD2"
			      ,UPJANG:ds_ItemList.getColumn(nChkRow,"UPJANG")
			      ,MENU_CD:""
			      //,MENU_CD:ds_ItemList.getColumn(nChkRow,"MENU_CD")
			      ,RECIPE_CD:ds_ItemList.getColumn(nChkRow,"RECIPE_CD")
			      ,ITEM_CODE:ds_ItemList.getColumn(nChkRow,"ITEM_CODE")
			      ,ITEM_NAME:ds_ItemList.getColumn(nChkRow,"ITEM_NAME")
			      ,NEED_DATE:""
			      ,ITEM_CLASS2:ds_ItemList.getColumn(nChkRow,"ITEM_CLASS2")
			      ,ITEM_CLASS3:ds_ItemList.getColumn(nChkRow,"ITEM_CLASS3")
			      ,ITEM_CLASS4:ds_ItemList.getColumn(nChkRow,"ITEM_CLASS4")
			      //,NEED_DATE:ds_ItemList.getColumn(nChkRow,"NEED_DATE")
			      };
				//+" RECIPE_CD= " +quote(ed_RecipeCD.value);
				//trace(arg);
				
		var rtn = gfn_dialog("", "U_FMM::FMM00011P.xfdl",arg);
		//trace("리턴값 : " + rtn);
		
		if(gfn_length(rtn) > 0)
		{
			//라인삭제
			ds_ItemList.deleteRow(nChkRow);
			
			//라인추가
			var nInsRow = -1;
			if ( nChkRow == ds_ItemList.rowcount ) {
				nInsRow = ds_ItemList.addRow();
			} else {
				nInsRow = ds_ItemList.insertRow(nChkRow);
			}
	
			if ( nInsRow > -1 ) {
				//대체상품 셋팅
				ds_ItemList.setColumn(nInsRow,"ITEM_CODE",rtn[0]);
				ds_ItemList.setColumn(nInsRow,"ITEM_NAME",rtn[1]);
				ds_ItemList.setColumn(nInsRow,"ITEM_SIZE",rtn[2]);
				ds_ItemList.setColumn(nInsRow,"PO_UOM",rtn[3]);
				//커팅규격은 상품조회시 컬럼이 없으므로 blank로 입력처리함
				ds_ItemList.setColumn(nInsRow,"CUT_SPEC","");
				ds_ItemList.setColumn(nInsRow,"GRAM_PRICE",rtn[7]);
				//소요량, 가식부량, 인인원가는 UI에서 입력&산출하지만
				//상품만 바꾸고 바로 저장하는 사용자 실수를 막기 위해 '0'으로 셋팅해줌.
				ds_ItemList.setColumn(nInsRow,"NEED_QTY",ds_ChangeItem.getColumn('0',"NEED_QTY"));	
				ds_ItemList.setColumn(nInsRow,"EDIBLE_QTY",ds_ChangeItem.getColumn('0',"EDIBLE_QTY"));
				ds_ItemList.setColumn(nInsRow,"PERSON_PRICE",ds_ChangeItem.getColumn('0',"PERSON_PRICE"));
				ds_ItemList.setColumn(nInsRow,"UPJANG", rtn[11]);
				ds_ItemList.setColumn(nInsRow,"RECIPE_CD", rtn[10]);
			}
// 			//대체상품 조회
// 			getChangeItem(rtn[11], rtn[10], rtn[0]);
// 			//trace(SaveXML(ds_ChangeItem,null));
// 			//대체상품 셋팅
// 			ds_ItemList.setColumn(nInsRow,"ITEM_CODE",ds_ChangeItem.getColumn('0',"ITEM_CODE"));
// 			ds_ItemList.setColumn(nInsRow,"ITEM_NAME",ds_ChangeItem.getColumn('0',"ITEM_NAME"));
// 			ds_ItemList.setColumn(nInsRow,"ITEM_SIZE",ds_ChangeItem.getColumn('0',"ITEM_SIZE"));
// 			ds_ItemList.setColumn(nInsRow,"PO_UOM",ds_ChangeItem.getColumn('0',"PO_UOM"));
// 			ds_ItemList.setColumn(nInsRow,"CUT_SPEC",ds_ChangeItem.getColumn('0',"CUT_SPEC"));
// 			ds_ItemList.setColumn(nInsRow,"GRAM_PRICE",ds_ChangeItem.getColumn('0',"GRAM_PRICE"));
// 			//소요량, 가식부량, 인인원가는 UI에서 입력&산출하지만
// 			//상품만 바꾸고 바로 저장하는 사용자 실수를 막기 위해 '0'으로 셋팅해줌.
// 			ds_ItemList.setColumn(nInsRow,"NEED_QTY",ds_ChangeItem.getColumn('0',"NEED_QTY"));	
// 			ds_ItemList.setColumn(nInsRow,"EDIBLE_QTY",ds_ChangeItem.getColumn('0',"EDIBLE_QTY"));
// 			ds_ItemList.setColumn(nInsRow,"PERSON_PRICE",ds_ChangeItem.getColumn('0',"PERSON_PRICE"));
// 			ds_ItemList.setColumn(nInsRow,"UPJANG", rtn[11]);
// 			ds_ItemList.setColumn(nInsRow,"RECIPE_CD", rtn[10]);
			
			//ds_ItemList_OnColumnChanged();
		}else{
			return;
		}
	}
}


//대체상품 조회
function getChangeItem(upjang, recipeCd, itemCode)
{
	ds_Cond1.clearData();
	ds_Cond1.addRow();
	ds_Cond1.setColumn(0,"UPJANG",upjang);
	ds_Cond1.setColumn(0,"RECIPE_CD",recipeCd);
	ds_Cond1.setColumn(0,"ITEM_CODE",itemCode);
	//trace(SaveXML(ds_Cond1,null));
		
	//Transaction 설정
	var formObj			= this;
	var strSvcID		= "FMM00011P_S001";
	var strURL			= "U_svc::" + "fm/fmm/FMM00011P_S001.jsp";
	var strInDatasets	= "inDs_Cond=ds_Cond1";
	var strOutDatasets	= "ds_ChangeItem=outDs_List";
	var strArgument;	//= "name1=park name2=yongdae";
	var strCallbackFunc	= "";
	var isErrorNotCall	= false;
	var isNotShow		= false;	//false 메세지 보여줌 --> sync일때 표현 안됨.
	var isSync			= true;		//true 다실행하고 실행됨.(async)

	//서버호출
	jsp_transaction(formObj, strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc, isErrorNotCall, isNotShow, isSync);	
	
	//trace(ds_ChangeItem.saveXML());
}]]></Script>
  </Form>
</FDL>
