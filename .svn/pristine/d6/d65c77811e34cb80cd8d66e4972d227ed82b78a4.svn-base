<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FMO00300E" onkeydown="fn_FormKeyDown" onload="form_onload" titletext="운영일지 등록 및 출력" position="absolute 0 0 1252 725" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Tab id="Tab_Detail" canchange="Tab_Detail_OnChanging" taborder="24" position="absolute 0 324 1237 710" showextrabutton="false" anchor="all">
          <Tabpages>
            <Tabpage id="tab1" taborder="1" text="식당운영" position="absolute 2 24 970 313" scrollbars="none">
              <Layouts>
                <Layout>
                  <Static id="Static09" class="sta_WFDA_Labelbg" position="absolute 150 56 288 80"/>
                  <Static id="Static10" class="sta_WFDA_Labelbg" position="absolute 287 56 428 80"/>
                  <Static id="Static11" class="sta_WFDA_Labelbg" position="absolute 427 56 567 80"/>
                  <Static id="Static21" class="sta_WFDA_Labelbg" position="absolute 10 56 151 80"/>
                  <Static id="Static05" class="sta_WFDA_Labelbg" position="absolute 577 95 1225 348" anchor="all"/>
                  <Static id="Static49" class="sta_WFDA_Labelbg" position="absolute 10 95 567 348" anchor="left top bottom"/>
                  <Static id="Static53" text="잔반량(kg)" position="absolute 10 31 151 57" class="sta_WFDA_Label01"/>
                  <Static id="Static0" text="잔식량(kg)" position="absolute 150 31 288 57" class="sta_WFDA_Label01"/>
                  <Static id="Static1" text="합 계(kg)" position="absolute 287 31 428 57" class="sta_WFDA_Label01"/>
                  <Static id="Static2" text="월 누계(kg)" position="absolute 427 31 567 57" class="sta_WFDA_Label01"/>
                  <Static id="Static3" position="absolute 577 31 1225 80" class="sta_WFDA_Labelbg" anchor="left top right"/>
                  <Static id="Static4" text="특이사항" position="absolute 577 31 672 80" class="sta_WFDA_Label01"/>
                  <Static id="Static6" text="고객사 동향" position="absolute 10 95 567 130" class="sta_WFDA_Label01"/>
                  <Static id="Static7" text="보고 및 조치사항" position="absolute 577 95 1225 130" class="sta_WFDA_Label01" anchor="left top right"/>
                  <MaskEdit id="ed_Leaving" mask="###,##0" taborder="1" position="absolute 13 59 148 77" autoselect="true"/>
                  <MaskEdit id="ed_OverQty" mask="###,##0" taborder="2" position="absolute 153 59 285 77" autoselect="true"/>
                  <MaskEdit enable="false" id="ed_sum" taborder="3" position="absolute 290 59 425 77" mask="###,##0"/>
                  <MaskEdit enable="false" id="ed_MmTot" taborder="4" position="absolute 430 59 564 77" mask="###,##0"/>
                  <TextArea lengthunit="asciii" id="ed_Special" imemode="native" maxlength="150" taborder="5" position="absolute 674 34 1222 77" anchor="left top right"/>
                  <TextArea lengthunit="asciii" id="ed_Partners" imemode="native" maxlength="150" taborder="6" position="absolute 13 132 564 345" anchor="left top bottom"/>
                  <TextArea lengthunit="asciii" id="ed_Report" imemode="native" maxlength="150" taborder="7" position="absolute 580 132 1222 345" anchor="all"/>
                  <Static id="Static8" text="기본정보" position="absolute 10 13 85 31" class="sta_WF_Title01"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Static id="Static58" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 1 10 358"/>
                  <Static id="Static59" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 10 348 1225 358"/>
                  <Static id="Static61" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1225 1 1235 358"/>
                  <Static id="Static12" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 567 28 577 529"/>
                  <Static id="Static37" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 80 1237 95"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab2" taborder="5" text="수불/매출/입금" position="absolute 2 24 970 313" scrollbars="none">
              <Layouts>
                <Layout>
                  <Static id="Static9" position="absolute 128 251 264 278" class="sta_WFDA_Labelbg"/>
                  <Static id="Static42" class="sta_WFDA_Labelbg" position="absolute 665 251 800 278"/>
                  <Static id="Static43" class="sta_WFDA_Labelbg" position="absolute 263 251 398 278"/>
                  <Static id="Static44" class="sta_WFDA_Labelbg" position="absolute 397 251 532 278"/>
                  <Static id="Static45" class="sta_WFDA_Labelbg" position="absolute 531 251 666 278"/>
                  <Static id="Static46" class="sta_WFDA_Labelbg" position="absolute 799 251 1225 278" anchor="left top right"/>
                  <Static id="Static38" class="sta_WFDA_Labelbg" position="absolute 287 167 447 194"/>
                  <Static id="Static39" class="sta_WFDA_Labelbg" position="absolute 446 167 622 194"/>
                  <Static id="Static40" class="sta_WFDA_Labelbg" position="absolute 621 167 800 194"/>
                  <Static id="Static41" class="sta_WFDA_Labelbg" position="absolute 799 167 1225 194" anchor="left top right"/>
                  <Static id="Static21" position="absolute 128 57 264 84" class="sta_WFDA_Labelbg"/>
                  <Static id="Static33" class="sta_WFDA_Labelbg" position="absolute 263 57 398 84"/>
                  <Static id="Static34" class="sta_WFDA_Labelbg" position="absolute 397 57 532 84"/>
                  <Static id="Static35" class="sta_WFDA_Labelbg" position="absolute 531 57 666 84"/>
                  <Static id="Static36" class="sta_WFDA_Labelbg" position="absolute 665 57 800 84"/>
                  <Static id="Static37" class="sta_WFDA_Labelbg" position="absolute 799 57 1225 84" anchor="left top right"/>
                  <Static id="Static53" text="전일 재고" position="absolute 128 31 264 58" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static0" text="당일입고" position="absolute 263 31 398 58" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static1" text="당일사용(식재료비)" position="absolute 397 31 532 58" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static2" text="현 재고" position="absolute 531 31 666 58" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static14" text="식재료비" position="absolute 10 31 129 84" class="sta_WFDA_Label03"/>
                  <Static id="Static15" text="1인 식재료비" position="absolute 799 31 1225 58" class="sta_WFDA_Labelcenter" anchor="left top right"/>
                  <Static id="Static16" text="재료비율(%)" position="absolute 665 31 800 58" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static3" position="absolute 128 167 288 194" class="sta_WFDA_Labelbg"/>
                  <Static id="Static4" text="일 매출액" position="absolute 128 141 288 168" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static5" text="매출 누계(월)" position="absolute 287 141 447 168" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static8" text="일 매출" position="absolute 10 115 129 194" class="sta_WFDA_Label03"/>
                  <Static id="Static19" text="월 운영계획" position="absolute 128 115 447 142" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static22" text="월 운영실적" position="absolute 446 115 800 142" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static6" text="일 매출액" position="absolute 446 141 622 168" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static7" text="매출 누계(월)" position="absolute 621 141 800 168" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static17" text="달성율(%)" position="absolute 799 115 1225 168" class="sta_WFDA_Labelcenter" anchor="left top right"/>
                  <Static id="Static10" text="전일 미입금액" position="absolute 128 225 264 252" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static11" text="당일 수금액" position="absolute 263 225 398 252" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static12" text="당일 입금액" position="absolute 397 225 532 252" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static13" text="현 미입금액" position="absolute 531 225 666 252" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static18" text="수금/입금" position="absolute 10 225 129 278" class="sta_WFDA_Label03"/>
                  <Static id="Static20" text="전도금 잔액" position="absolute 799 225 1225 252" class="sta_WFDA_Labelcenter" anchor="left top right"/>
                  <Static id="Static23" text="전도금 사용액" position="absolute 665 225 800 252" class="sta_WFDA_Labelcenter"/>
                  <MaskEdit id="ed_PreStock" mask="###,##0" taborder="1" position="absolute 131 60 261 81" autoselect="true"/>
                  <MaskEdit id="ed_DdDeliver" mask="###,##0" taborder="2" position="absolute 266 60 395 81" autoselect="true"/>
                  <MaskEdit id="ed_DdUse" mask="###,##0" taborder="3" position="absolute 400 60 529 81" autoselect="true"/>
                  <MaskEdit id="ed_DdStock" mask="###,##0" taborder="4" position="absolute 534 60 663 81" autoselect="true"/>
                  <MaskEdit id="ed_RawAmt" mask="###,##0" taborder="5" position="absolute 668 60 797 81" autoselect="true"/>
                  <MaskEdit id="ed_ManAvg" mask="###,##0" taborder="6" position="absolute 802 60 1222 81" anchor="left top right" autoselect="true"/>
                  <MaskEdit id="ed_SalePlan" mask="###,##0" taborder="7" position="absolute 131 170 285 191" autoselect="true"/>
                  <MaskEdit id="ed_SaleTotPlan" mask="###,##0" taborder="8" position="absolute 290 170 444 191" autoselect="true"/>
                  <MaskEdit id="ed_SaleAct" mask="###,##0" taborder="9" position="absolute 449 170 619 191" autoselect="true"/>
                  <MaskEdit id="ed_SaleTotM" mask="###,##0" taborder="10" position="absolute 624 170 797 191" autoselect="true"/>
                  <MaskEdit enable="false" id="ed_GoalRate" taborder="11" position="absolute 799 170 1222 191" anchor="left top right" mask="###,##0"/>
                  <MaskEdit id="ed_PreRcvNo" mask="###,##0" taborder="12" position="absolute 131 254 261 275" autoselect="true"/>
                  <MaskEdit id="ed_RcvAmt" mask="###,##0" taborder="13" position="absolute 266 254 395 275" autoselect="true"/>
                  <MaskEdit id="ed_RcvIn" mask="###,##0" taborder="14" position="absolute 400 254 529 275" autoselect="true"/>
                  <MaskEdit id="ed_NoRcv" mask="###,##0" taborder="15" position="absolute 534 254 663 275" autoselect="true"/>
                  <MaskEdit id="ed_PrepayAmt" mask="###,##0" taborder="16" position="absolute 668 254 797 275" autoselect="true"/>
                  <MaskEdit id="ed_PrepayBalance" mask="###,##0" taborder="17" position="absolute 802 254 1222 275" anchor="left top right" autoselect="true"/>
                  <Static id="Static24" text="수불" position="absolute 10 13 72 31" class="sta_WF_Title01"/>
                  <Static id="Static25" text="매출" position="absolute 10 97 72 115" class="sta_WF_Title01"/>
                  <Static id="Static26" text="입금" position="absolute 10 207 72 225" class="sta_WF_Title01"/>
                  <Static id="Static58" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 1 10 358"/>
                  <Static id="Static27" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 460 13" anchor="left top"/>
                  <Static id="Static28" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 460 31" anchor="left top"/>
                  <Static id="Static59" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 10 348 1225 358"/>
                  <Static id="Static61" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1225 1 1235 358"/>
                  <Static id="Static29" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 11 84 461 97" anchor="left top"/>
                  <Static id="Static30" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 6 110 456 115" anchor="left top"/>
                  <Static id="Static31" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 11 194 461 207" anchor="left top"/>
                  <Static id="Static32" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 11 220 461 225" anchor="left top"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab3" taborder="16" text="모니터링" position="absolute 2 24 970 313" scrollbars="none">
              <Layouts>
                <Layout>
                  <Static id="Static49" class="sta_WFDA_Labelbg" position="absolute 10 212 474 348" anchor="left top bottom"/>
                  <Static id="Static01" class="sta_WFDA_Labelbg" position="absolute 484 212 1225 348" anchor="all"/>
                  <Grid selecttype="row" autoenter="select" binddataset="ds_List3" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="gd_list2" useinputpanel="false" onenterdown="Tab_Detail_tab3_gd_list2_OnEnterDown" onheadclick="gd_list_OnHeadClick" taborder="2" tabstop="true" usecontextmenu="true" useselcolor="false" visible="true" wheelscrollrow="1" position="absolute 10 31 1225 171" autofittype="col" anchor="left top right">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="32"/>
                          <Column size="90"/>
                          <Column size="90"/>
                          <Column size="90"/>
                          <Column size="437"/>
                          <Column size="454"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="50"/>
                        </Rows>
                        <Band id="head">
                          <Cell class="head_Excel"/>
                          <Cell col="1" text="끼니"/>
                          <Cell col="2" text="구분"/>
                          <Cell col="3" text="분류"/>
                          <Cell col="4" text="모니터링 내용"/>
                          <Cell col="5" text="조치 사항"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="number" style="align:left;" text="bind:SEQ" expr="expr:currow + 1"/>
                          <Cell col="1" displaytype="combo" edittype="combo" style="align:left;" text="bind:MEAL" combodataset="ds_Combo" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="2" displaytype="combo" edittype="combo" style="align:left;" text="bind:GUBUN" combodataset="ds_Combo1" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="align:left;" text="bind:CLASS" combodataset="ds_Combo2" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="4" displaytype="text" style="align:left;" text="bind:CONTENTS" wordwrap="word" editimemode="native" editscrollbar="both"/>
                          <Cell col="5" displaytype="text" style="align:left;" text="bind:MGMT_DISC" wordwrap="exchar" editimemode="native" editscrollbar="both"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Button id="btn_Add" onclick="Tab_Detail_tab3_btn_Add_OnClick" taborder="3" tabstop="false" position="absolute 1187 6 1205 26" class="btn_WF_GrdPlus" image="" style="align:left;" anchor="top right"/>
                  <TextArea lengthunit="asciii" id="ed_Contents" imemode="native" maxlength="150" taborder="5" position="absolute 13 215 471 345" anchor="left top bottom"/>
                  <TextArea lengthunit="asciii" id="ed_Mgmt" imemode="native" maxlength="150" taborder="6" position="absolute 487 215 1222 345" anchor="all"/>
                  <Static id="Static6" text="모니터링 내용" position="absolute 10 186 474 213" class="sta_WFDA_Labelcenter"/>
                  <Static id="Static0" text="조치 사항" position="absolute 484 186 1225 213" class="sta_WFDA_Labelcenter" anchor="left top right"/>
                  <Button id="btn_Del" onclick="Tab_Detail_tab3_btn_Del_OnClick" taborder="4" tabstop="false" position="absolute 1207 6 1225 26" class="btn_WF_GrdMinus" image="" style="align:left;" anchor="top right"/>
                  <Static id="Static8" text="추가입력 " position="absolute 10 13 92 31" class="sta_WF_Title01"/>
                  <Static id="Static58" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 1 10 358"/>
                  <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 0 1220 13" anchor="left top"/>
                  <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 10 26 1220 31" anchor="left top"/>
                  <Static id="Static59" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 10 348 1225 358"/>
                  <Static id="Static61" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1225 1 1235 358"/>
                  <Static id="Static37" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 171 1237 186"/>
                  <Static id="Static12" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 474 184 484 345"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Div id="div_cmnBtn" taborder="4" text="Div0" url="cmn::CmnBtn.xfdl" position="absolute 0 0 1237 30" anchor="left top right" scrollbars="none"/>
        <Static id="st_Upjang" text="사업장" userdata="strQuery_FMUpjang" position="absolute 15 40 69 61" class="sta_WFSA_label"/>
        <Edit autoselect="true" id="ed_Upjang" imemode="none" onkeydown="fn_edBtn_OnKeyDown" readonly="true" taborder="1" position="absolute 71 40 211 61"/>
        <Button id="btn_Upjang" onclick="fn_edBtn_OnClick" taborder="2" tabstop="false" text="" position="absolute 210 40 231 61" class="btn_WF_popSearch" image=""/>
        <Grid autoenter="select" binddataset="ds_List" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="gd_list" useinputpanel="false" selecttype="row" onheadclick="gd_list_OnHeadClick" taborder="5" tabstop="true" usecontextmenu="true" useselcolor="false" visible="true" wheelscrollrow="1" position="absolute 0 102 1237 309" autofittype="col" anchor="left top right">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="27"/>
                <Column size="260"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="390"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" text="식당"/>
                <Cell col="2" text="끼니"/>
                <Cell col="3" text="코너"/>
                <Cell col="4" text="제공메뉴"/>
                <Cell col="5" text="예상식수"/>
                <Cell col="6" text="실식수"/>
                <Cell col="7" text="오차율(%)"/>
                <Cell col="8" text="끼니총계"/>
              </Band>
              <Band id="body">
                <Cell celltype="head" displaytype="text" style="align:right;" expr="expr:currow + 1"/>
                <Cell col="1" displaytype="text" style="align:left;" text="bind:SUBINV_NAME_DISP" suppress="1"/>
                <Cell col="2" displaytype="text" style="align:left;" text="bind:MEAL_NAME" suppress="2"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:CORNER_NAME"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:OFFER_MENU"/>
                <Cell col="5" displaytype="number" style="align:right;" text="bind:EXPECT_MEAL_QTY"/>
                <Cell col="6" displaytype="number" edittype="text" editfilter="number" style="align:right;" text="bind:REAL_MEAL_QTY"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:GOAL_COST_RATE" mask="#,##0.0"/>
                <Cell col="8" displaytype="number" style="align:right;" text="bind:MEAL_TOT" suppress="3"/>
              </Band>
              <Band id="summary">
                <Cell colspan="5" style="align:center;" text="합계"/>
                <Cell col="5" displaytype="number" style="align:right;" expr="expr:getSum('EXPECT_MEAL_QTY')"/>
                <Cell col="6" displaytype="number" style="align:right;" expr="expr:getSum('REAL_MEAL_QTY')"/>
                <Cell col="7" displaytype="number" style="align:right;" expr="expr:iif(getSum('EXPECT_MEAL_QTY')==0, 0, Math.round(((getSum('REAL_MEAL_QTY') - getSum('EXPECT_MEAL_QTY')) / getSum('EXPECT_MEAL_QTY')) * 100, 1))" mask="#,##0.0"/>
                <Cell col="8" displaytype="number" style="align:right;" expr="expr:getSum('REAL_MEAL_QTY')"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static3" text="운영일자" position="absolute 261 40 322 61" class="sta_WFSA_label"/>
        <Button id="btn_Sdate" onclick="g_CalButton_OnClick" taborder="4" tabstop="false" userdata="me_Sdate" position="absolute 409 40 430 61" class="btn_WF_cal" text="" image=""/>
        <Static id="Static0" text="날씨 : " position="absolute 459 40 499 61"/>
        <Static id="sta_Weather" text="날씨정보" position="absolute 534 40 841 63"/>
        <ImageViewer id="Image0" taborder="6" tabstop="false" position="absolute 498 40 525 65"/>
        <CheckBox id="chk_num1" taborder="7" tabstop="false" text="식단제공 결과" position="absolute 877 82 972 98" value="true" anchor="top right"/>
        <CheckBox id="chk_num2" taborder="8" tabstop="false" text="식당운영" position="absolute 979 82 1046 98" value="true" anchor="top right"/>
        <CheckBox id="chk_num3" taborder="9" tabstop="false" text="수불/매출/입금" position="absolute 1056 82 1168 98" value="true" anchor="top right"/>
        <CheckBox id="chk_num4" taborder="9" tabstop="false" text="모니터링" position="absolute 1170 82 1250 98" value="true" anchor="top right"/>
        <TextArea id="ta_Sql" readonly="true" taborder="10" tabstop="false" position="absolute 497 0 611 40"/>
        <MaskEdit id="me_Sdate" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="3" type="string" position="absolute 330 40 410 61" class="msk_WF_Cal"/>
        <Static id="st_UStat" text="[운영일지 상태]" position="absolute 1125 45 1229 65" anchor="top right"/>
        <Static id="Static8" text="식단 제공 결과" position="absolute 0 84 115 102" class="sta_WF_Title01"/>
        <Static id="Static05" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 2 97 692 102"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 2 71 692 84"/>
        <Static id="Static11" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 61 40 71 61"/>
        <Static id="Static09" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 231 40 261 61"/>
        <Static id="Static01" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 320 39 330 60"/>
        <Static id="Static02" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 430 39 460 60"/>
        <Static id="Static60" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 309 450 324" anchor="left top"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_Cond">
        <ColumnInfo>
          <Column id="UPJANG" size="24" type="STRING"/>
          <Column id="SDATE" size="24" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_List" oncolumnchanged="ds_List_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="22" type="STRING"/>
          <Column id="MEAL" size="22" type="BIGDECIMAL"/>
          <Column id="MEAL_NAME" size="200" type="STRING"/>
          <Column id="CORNER" size="22" type="BIGDECIMAL"/>
          <Column id="CORNER_NAME" size="200" type="STRING"/>
          <Column id="OFFER_MENU" size="256" type="STRING"/>
          <Column id="EXPECT_MEAL_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="REAL_MEAL_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="GOAL_COST_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="MEAL_TOT" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="50" type="STRING"/>
          <Column id="SUBINV_NAME_DISP" size="256" type="STRING"/>
          <Column id="OP_DATE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_List1" oncolumnchanged="ds_List1_OnColumnChanged">
        <ColumnInfo>
          <Column id="USTAT" size="100" type="STRING"/>
          <Column id="UPJANG" size="22" type="STRING"/>
          <Column id="LEAVING_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="OVER_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="LEAVING_SUM" size="22" type="BIGDECIMAL"/>
          <Column id="LEAVING_MM_TOT" size="22" type="BIGDECIMAL"/>
          <Column id="SPECIAL_DESC" size="256" type="STRING"/>
          <Column id="PARTNERS_DISC" size="256" type="STRING"/>
          <Column id="REQUEST_DISC" size="256" type="STRING"/>
          <Column id="OP_DATE" size="256" type="STRING"/>
          <Column id="LEAVING_MM_TOT_ORG" size="256" type="STRING"/>
          <Column id="PRE_STOCK" size="22" type="BIGDECIMAL"/>
          <Column id="DD_DELIVER" size="22" type="BIGDECIMAL"/>
          <Column id="DD_USE" size="22" type="BIGDECIMAL"/>
          <Column id="RAW_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="DD_STOCK" size="22" type="BIGDECIMAL"/>
          <Column id="MAN_AVG_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_PLAN_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_TOT_PLAN_M" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_ACT_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="SALE_TOT_ACT_M" size="22" type="BIGDECIMAL"/>
          <Column id="GOAL_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="PRE_NO_RCV_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="RCV_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="RCV_IN_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="NO_RCV_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="PREPAY_AMT" size="22" type="BIGDECIMAL"/>
          <Column id="PREPAY_BALANCE" size="22" type="BIGDECIMAL"/>
          <Column id="DD_STOCK_2" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_List3" oncolumnchanged="ds_list_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="22" type="STRING"/>
          <Column id="MEAL" size="22" type="STRING"/>
          <Column id="GUBUN" size="22" type="STRING"/>
          <Column id="CLASS" size="22" type="STRING"/>
          <Column id="CONTENTS" size="256" type="STRING"/>
          <Column id="MGMT_DISC" size="256" type="STRING"/>
          <Column id="OP_DATE" size="256" type="STRING"/>
          <Column id="SEQ" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Combo">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Combo1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Combo2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Wlist" oncolumnchanged="ds_list_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="22" type="STRING"/>
          <Column id="WEATHER" size="256" type="STRING"/>
          <Column id="WEATHER_IMG" size="256" type="STRING"/>
          <Column id="OP_DATE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256" sumtext="조회"/>
          <Column id="insYn" type="STRING" size="256" sumtext="추가"/>
          <Column id="delYn" type="STRING" size="256" sumtext="삭제"/>
          <Column id="savYn" type="STRING" size="256" sumtext="저장"/>
          <Column id="prtYn" type="STRING" size="256" sumtext="출력"/>
          <Column id="exlYn" type="STRING" size="256" sumtext="엑셀"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">1</Col>
            <Col id="insYn">0</Col>
            <Col id="delYn">0</Col>
            <Col id="savYn">1</Col>
            <Col id="prtYn">1</Col>
            <Col id="exlYn">0</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="Tab_Detail_tab1_ed_Leaving_value" compid="Tab_Detail.tab1.ed_Leaving" propid="value" datasetid="ds_List1" columnid="LEAVING_QTY"/>
      <BindItem id="Tab_Detail_tab1_ed_OverQty_value" compid="Tab_Detail.tab1.ed_OverQty" propid="value" datasetid="ds_List1" columnid="OVER_QTY"/>
      <BindItem id="Tab_Detail_tab1_ed_sum_value" compid="Tab_Detail.tab1.ed_sum" propid="value" datasetid="ds_List1" columnid="LEAVING_SUM"/>
      <BindItem id="Tab_Detail_tab1_ed_MmTot_value" compid="Tab_Detail.tab1.ed_MmTot" propid="value" datasetid="ds_List1" columnid="LEAVING_MM_TOT"/>
      <BindItem id="Tab_Detail_tab1_ed_Special_value" compid="Tab_Detail.tab1.ed_Special" propid="value" datasetid="ds_List1" columnid="SPECIAL_DESC"/>
      <BindItem id="Tab_Detail_tab1_ed_Partners_value" compid="Tab_Detail.tab1.ed_Partners" propid="value" datasetid="ds_List1" columnid="PARTNERS_DISC"/>
      <BindItem id="Tab_Detail_tab1_ed_Report_value" compid="Tab_Detail.tab1.ed_Report" propid="value" datasetid="ds_List1" columnid="REQUEST_DISC"/>
      <BindItem id="Tab_Detail_tab2_ed_PreStock_value" compid="Tab_Detail.tab2.ed_PreStock" propid="value" datasetid="ds_List1" columnid="DD_STOCK_2"/>
      <BindItem id="Tab_Detail_tab2_ed_DdDeliver_value" compid="Tab_Detail.tab2.ed_DdDeliver" propid="value" datasetid="ds_List1" columnid="DD_DELIVER"/>
      <BindItem id="Tab_Detail_tab2_ed_DdUse_value" compid="Tab_Detail.tab2.ed_DdUse" propid="value" datasetid="ds_List1" columnid="DD_USE"/>
      <BindItem id="Tab_Detail_tab2_ed_DdStock_value" compid="Tab_Detail.tab2.ed_DdStock" propid="value" datasetid="ds_List1" columnid="DD_STOCK"/>
      <BindItem id="Tab_Detail_tab2_ed_RawAmt_value" compid="Tab_Detail.tab2.ed_RawAmt" propid="value" datasetid="ds_List1" columnid="RAW_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_ManAvg_value" compid="Tab_Detail.tab2.ed_ManAvg" propid="value" datasetid="ds_List1" columnid="MAN_AVG_QTY"/>
      <BindItem id="Tab_Detail_tab2_ed_SalePlan_value" compid="Tab_Detail.tab2.ed_SalePlan" propid="value" datasetid="ds_List1" columnid="SALE_PLAN_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_SaleTotPlan_value" compid="Tab_Detail.tab2.ed_SaleTotPlan" propid="value" datasetid="ds_List1" columnid="SALE_TOT_PLAN_M"/>
      <BindItem id="Tab_Detail_tab2_ed_SaleAct_value" compid="Tab_Detail.tab2.ed_SaleAct" propid="value" datasetid="ds_List1" columnid="SALE_ACT_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_SaleTotM_value" compid="Tab_Detail.tab2.ed_SaleTotM" propid="value" datasetid="ds_List1" columnid="SALE_TOT_ACT_M"/>
      <BindItem id="Tab_Detail_tab2_ed_GoalRate_value" compid="Tab_Detail.tab2.ed_GoalRate" propid="value" datasetid="ds_List1" columnid="GOAL_RATE"/>
      <BindItem id="Tab_Detail_tab2_ed_PreRcvNo_value" compid="Tab_Detail.tab2.ed_PreRcvNo" propid="value" datasetid="ds_List1" columnid="PRE_NO_RCV_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_RcvAmt_value" compid="Tab_Detail.tab2.ed_RcvAmt" propid="value" datasetid="ds_List1" columnid="RCV_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_RcvIn_value" compid="Tab_Detail.tab2.ed_RcvIn" propid="value" datasetid="ds_List1" columnid="RCV_IN_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_NoRcv_value" compid="Tab_Detail.tab2.ed_NoRcv" propid="value" datasetid="ds_List1" columnid="NO_RCV_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_PrepayAmt_value" compid="Tab_Detail.tab2.ed_PrepayAmt" propid="value" datasetid="ds_List1" columnid="PREPAY_AMT"/>
      <BindItem id="Tab_Detail_tab2_ed_PrepayBalance_value" compid="Tab_Detail.tab2.ed_PrepayBalance" propid="value" datasetid="ds_List1" columnid="PREPAY_BALANCE"/>
      <BindItem id="Tab_Detail_tab3_ed_Contents_value" compid="Tab_Detail.tab3.ed_Contents" propid="value" datasetid="ds_List3" columnid="CONTENTS"/>
      <BindItem id="Tab_Detail_tab3_ed_Mgmt_value" compid="Tab_Detail.tab3.ed_Mgmt" propid="value" datasetid="ds_List3" columnid="MGMT_DISC"/>
      <BindItem id="sta_Weather_value" compid="sta_Weather" propid="value" datasetid="ds_Wlist" columnid="WEATHER"/>
      <BindItem id="st_UStat_value" compid="st_UStat" propid="value" datasetid="ds_List1" columnid="USTAT"/>
      <BindItem id="item0" compid="st_UStat" propid="text" datasetid="ds_List1" columnid="USTAT"/>
      <BindItem id="item1" compid="sta_Weather" propid="text" datasetid="ds_Wlist" columnid="WEATHER"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************    
 * 시스템구분   : 운영관리/급식운영관리/운영일지 등록 및 출력.
 * 프로그램명   : FMO00300E.XML
 * 기      능   : 운영일지 등록 및 출력
 * 작  성  자   : 노규완
 * 작성  일자   : 2008-02-26
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "lib::sc_comon.js"				// 시스템 공통
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js"		//JAVA 코딩시
//@@컨버터에서 주석처리 #include "LIB::tit_comm_0001.js"		// X-Framework Lib
//@@컨버터에서 주석처리 #include "lib::sc_sql_common.js"		// 공통팝업
//@@컨버터에서 주석처리 #include "lib::fm_common.js"			// FM공통
//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
var fa_Sql;
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================

function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);

	//초기화
	fsp_init(this);
	v_ds_check = "ds_List";
   	ta_Sql.visible = (application.g_EmpNo == gfmsAdmin);
	
	//본부직원은 모든 본사 가능
	ed_Upjang.userdata     = application.g_Upjang;
	ed_Upjang.value         = application.g_UpjangNm;

	me_Sdate.value = fn_CurrDateWeek();
	
	//초기설정
	fn_InitPage();
	//자동조회
	fn_search();
	
	Tab_Detail.tabindex = 0;
	if (ed_Upjang.enable) ed_Upjang.setFocus();
	else me_Sdate.setFocus();
}

//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*------------------------------------------------------------(60)
	1. Function ID : fn_Search()
	2. 개       요 : 업무프로세스에 따른 조회작업
	3. 기       능 : 검색조건에 해당하는 정보를 조회
	4. 인 수 설 명 : 
*/
function fn_search()
{
	//필수항목 
	if (fn_ChkManNull()) return;
	// 초기화
	ds_Cond.clearData();
	fn_ResetData();
	ds_Cond.addRow();
	ds_Cond.setColumn(0, "UPJANG",        ed_Upjang.userdata);
	ds_Cond.setColumn(0, "SDATE",         me_Sdate.value);	
	// 조회
	var strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc;
	// 경로 설정
	strSvcID = "FMO00300E_T001";
	strURL   = "U_svc::" + "fm/fmo/FMO00300E_T001.jsp";
	// 데이터셋 설정
	strInDatasets  = "ds_Cond=ds_Cond";
	strOutDatasets = "ds_Wlist=ds_Wlist ds_List=ds_List ds_List1=ds_List1 ds_List3=ds_List3";
	// 파라메터 설정
	strArgument  = "g_Upjang=" + wrapQuote(g_Upjang);
	strArgument += " g_EmpNo=" + wrapQuote(g_EmpNo);
	// 콜백함수 지정
	strCallbackFunc = "fn_CallBack_Search";
	// 서버 호출 
	Transaction(strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc);
}
/*------------------------------------------------------------
	1. Function ID : fn_Insert()
	2. 개       요 : 업무프로세스에 따른 입력작업
	3. 기       능 : 입력버튼 입력 시 처리되는 작업
	4. 인 수 설 명 : 
*/
function fn_insert()
{
}

/*------------------------------------------------------------
	1. Function ID : fn_Delete()
	2. 개       요 : 업무프로세스에 따른 입력작업
	3. 기       능 : 입력버튼 입력 시 처리되는 작업
	4. 인 수 설 명 : 
*/
function fn_delete()
{
}

/*------------------------------------------------------------
	1. Function ID : fn_Save()
	2. 개       요 : 업무프로세스에 따른 입력작업
	3. 기       능 : 입력버튼 입력 시 처리되는 작업
	4. 인 수 설 명 : 
-------------------------------------------------------------*/
function fn_save()
{
	//필수항목 
	if (fn_ChkManNull()) return;
	// 데이타체크
	var sRtn = fn_ChkData();
	if (sRtn != null)
	{
		g_Message("EE", sRtn);
		return;
	}
	if (! g_Confirm("02", '운영일지를 저장하시겠습니까?!')) return;

	// 초기화
	ds_Cond.clearData();
	ds_Cond.addRow();
	ds_Cond.setColumn(0, "UPJANG",        ed_Upjang.userdata);
	ds_Cond.setColumn(0, "SDATE",         me_Sdate.value);	
	var strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc;
	// 경로 설정
	strSvcID = "FMO00300E_T002";
	strURL   = "U_svc::" + "fm/fmo/FMO00300E_T002.jsp";
	// 데이터셋 설정U
	strInDatasets  = "ds_Cond=ds_Cond ds_List=ds_List:A ds_List1=ds_List1:A ds_List3=ds_List3:A";
	strOutDatasets = "";
	// 파라메터 설정
	strArgument  = "g_Upjang=" + wrapQuote(g_Upjang);
	strArgument += " g_EmpNo=" + wrapQuote(g_EmpNo);
	// 콜백함수 지정
	strCallbackFunc = "fn_CallBack_Save";
	// 서버 호출 
	Transaction(strSvcID, strURL, strInDatasets, strOutDatasets, strArgument, strCallbackFunc);
}

/*------------------------------------------------------------
	1. Function ID : fn_Print()
	2. 개       요 : 업무프로세스에 따른 입력작업
	3. 기       능 : 입력버튼 입력 시 처리되는 작업
	4. 인 수 설 명 : 
*/
function fn_print()
{

	//레포트에 전달할 파라메터 생성
	var arrParams	= SCReport.newParams ();
	
	//--------------------------------------------------
	//방법1)서버에서 Query에 의해 처리하는 경우 예
	//(필수) 레포트명
	SCReport.setParams (arrParams, SCReport.RPT_NAME, "/FICS/FMO00300V_R01.ozr");

	//출력 옵션 설정
	//-창 타이틀 (디폴트는 "ReportViewer")
	SCReport.setParams (arrParams, SCReport.RPT_TITLE, "운영일지");

	//-Zoom (디폴트는 100)
	//SCReport.setParams (arrParams, SCReport.RPT_ZOOM, "120");

	//레포트에 맞게 전달되는 개발자 정의 파라미터
	SCReport.setParams (arrParams, "PARAM1", decode(chk_num1.value,'0','Y','N'));
	SCReport.setParams (arrParams, "PARAM2", decode(chk_num2.value,'0','Y','N'));
	SCReport.setParams (arrParams, "PARAM3", decode(chk_num3.value,'0','Y','N'));
	SCReport.setParams (arrParams, "PARAM4", decode(chk_num4.value,'0','Y','N'));
	SCReport.setParams (arrParams, "PARAM5", ed_Upjang.userdata);
	SCReport.setParams (arrParams, "PARAM6", me_Sdate.value);
	SCReport.setParams (arrParams, "PARAM7", ed_Upjang.value);
	SCReport.setParams (arrParams, "PARAM8", sta_Weather.text);
		
	SCReport.setParams (arrParams, "zoom", 150);
	//--------------------------------------------------
	SCReport.viewReport (this, arrParams);
	
// 	var strParam="";
// 	strParam = "FICS/oz.asp?title=운영일지";             	    //페이지 상단 타이틀
// 
// 	strParam += "&url=FICS/FMO00300V_운영일지.ozr";            	//OZ출력물 파일명
// 
// 	strParam += "&cnt=8";                             	//파라메터 갯수 
// 	strParam += "&p1=" 		+ decode(chk_num1.value,'0','Y','N'); //선택1
// 	strParam += "&p2=" 		+ decode(chk_num2.value,'0','Y','N'); //선택2
// 	strParam += "&p3=" 		+ decode(chk_num3.value,'0','Y','N'); //선택3
// 	strParam += "&p4=" 		+ decode(chk_num4.value,'0','Y','N'); //선택4
// 	strParam += "&p5=" 		+ ed_Upjang.userdata; 	  // 업장
// 	strParam += "&p6=" 		+ me_Sdate.value;    //운영일지 작성일
// 	strParam += "&p7=" 		+ ed_Upjang.value;    //업장명
// 	strParam += "&p8=" 		+ sta_Weather.text;    //날씨 정보	
// 	strParam += "&zoom=150";                          	//화면 출력 크기    	
// 	
// 	var arg = {fstrParam:strParam};
// 	gfn_dialog("", "U_SCC::SCCOZREPORT1.xfdl",arg);


}


/*------------------------------------------------------------
	1. Function ID : fn_Close()
	2. 개       요 : 업무프로세스에 따른 입력작업
	3. 기       능 : 입력버튼 입력 시 처리되는 작업
	4. 인 수 설 명 : 
*/
function fn_Close()
{
	This.close();
}

/*------------------------------------------------------------
	1. Function ID : fn_Help()
	2. 개       요 : 업무프로세스에 따른 입력작업
	3. 기       능 : 입력버튼 입력 시 처리되는 작업
	4. 인 수 설 명 : 
*/
function fn_help()
{
}

//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*------------------------------------------------------------
	1. Function ID : fn_AlertMsg(cd)
	2. 개       요 : 메세지 처리
	3. 기       능 : 화면에 나타나는 메시지 코드및 텍스트 리턴
	4. 인 수 설 명 : cd : 원하는 메시지 코드
*/
function fn_AlertMsg(cd)
{
	var v_Msg="";
	switch(cd)
	{
		case "000":
			v_Msg= "이(가) 저장되었습니다.";
			break;
		case "001":
			v_Msg= "버튼이 정의 되어 있지않습니다.";
			break;
		case "002":
			v_Msg="서비스 오류:시스템 관리자에게 문의하십시오";
			break;
		case "003":
			v_Msg="필수항목은 반드시 선택하시기 바랍니다.";
			break;	
		case "004":
			v_Msg="작업대상 본사를 선택하세요.";
			break;
		case "005":
			v_Msg="을(를) 입력하세요";
			break;
		case "006":
			v_Msg="삭제할 데이터가 없습니다.";
			break;
		case "007":
			v_Msg="변경된 데이터가 없습니다.";
			break;
		case "008":
			v_Msg="시스템ID가 없습니다.";
			break;			
		default:
			break;			
	}
	return v_Msg;
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
//콜백
function fn_CallBack_Search(SvcID, errCode, errMsg)
{
ta_Sql.value = fa_Sql;
	if (errCode == 0){				
		var sWEATHER_IMG = String(ds_Wlist.getColumn(0,"WEATHER_IMG")).toLowerCase();

		if(!gfn_isNull(sWEATHER_IMG)){
			//DB컨버젼
			//Image0.style.background.image = sWEATHER_IMG;		
			Image0.style.background.image = "theme://convertImages/" + sWEATHER_IMG + ".png";		
		}
		st_UStat.style.color = iif(ds_List1.getColumn(0,"USTAT") == "[운영일지 저장]", "default", "red");
	}else{
		g_Message("EE",fn_AlertMsg("002"));
	}
}

function fn_CallBack_Save(SvcID, errCode, errMsg)
{
ta_Sql.value = fa_Sql;
	if (errCode == 0)
	{
		g_Message("02","운영일지" + fn_AlertMsg("000"));
		fn_search();
	}
	else
		g_Message("EE",fn_AlertMsg("002"));
}

function fn_ChkManNull()
{
	if (ffn_ChkNull(ed_Upjang.userdata))
	{
		g_Message("EE", "사업장" + fn_AlertMsg("005"));
		if (ed_Upjang.enable) ed_Upjang.setFocus();
		return true;
	}
	if ( ffn_ChkNull(me_Sdate.value) || (gfn_length(me_Sdate.value)< 8) )
	{
		g_Message("EE", "운영일자를 정확하게 입력하세요.");
		me_Sdate.setFocus();
		return true;
	}
	//
	return false;
}

function fn_ChkData()
{
/*
	//변경여부 확인
	if ( (! ds_List.GetUpdate()) )
	{
		return fn_AlertMsg("007");
	}
*/
	if (ds_List1.rowcount < 1) return "운영일지 등록내용이 없습니다.";
	
	for (var i=0; i<ds_List3.rowcount; i++)
	{
		if (ffn_ChkNull(ds_List3.getColumn(i,"MEAL")))
		{
			Tab_Detail.tabindex = 2;
			Tab_Detail.tab3.gd_list2.setFocus();
			Tab_Detail.tab3.gd_list2.setCellPos(1);
			return "끼니(모니터링)를 선택하세요.";
		}
		if (ffn_ChkNull(ds_List3.getColumn(i,"GUBUN")))
		{
			Tab_Detail.tabindex = 2;
			Tab_Detail.tab3.gd_list2.setFocus();
			Tab_Detail.tab3.gd_list2.setCellPos(2);
			return "구분(모니터링)를 선택하세요.";
		}
		if (ffn_ChkNull(ds_List3.getColumn(i,"CLASS")))
		{
			Tab_Detail.tabindex = 2;
			Tab_Detail.tab3.gd_list2.setFocus();
			Tab_Detail.tab3.gd_list2.setCellPos(3);
			return "분류(모니터링)를 선택하세요.";
		}
	}
}

function fn_InitPage(sOP)
{
	//모니터링 텝 끼니 세팅
	var sWhereM = " AND EXISTS(SELECT 1 FROM FMS_MEAL_CORNER Z, FMS_SUBINVENTORY Y WHERE Z.SUBINV_CODE = Y.SUBINV_CODE AND Z.MEAL = A.CODE AND Y.UPJANG = " + ed_Upjang.userdata + ")";
	fn_sql_common("C", strFMQuery_CommCode," AND A.GROUP_CODE = 'FS0023' AND A.USE_YN = 'Y' " + sWhereM," ORDER BY A.SORT_SEQ","",Tab_Detail.tab3.gd_list2,1,ds_Combo);
	if (ffn_ChkNull(sOP))
	{
		//모니터링 텝 구분
		fn_sql_common("C", strFMQuery_CommCode," AND A.GROUP_CODE = 'FM0012' AND A.USE_YN = 'Y' "," ORDER BY A.SORT_SEQ","",Tab_Detail.tab3.gd_list2,2,ds_Combo1);
		//모니터링 텝 분류
		fn_sql_common("C", strFMQuery_CommCode," AND A.GROUP_CODE = 'FM0013' AND A.USE_YN = 'Y' "," ORDER BY A.SORT_SEQ","",Tab_Detail.tab3.gd_list2,3,ds_Combo2);
	}
}

function fn_edBtn_OnClick(obj:Button, e:ClickEventInfo)
{
	var sAddWhere = "";
	
	switch(obj.name)
	{
		case "btn_Upjang":
			sAddWhere = " AND A.USE_YN = 'Y'";
			//본사인 경우 해당 사업장 조회
			if (application.g_UserKind == '본사')
				sAddWhere += " AND A.MAIN_UPJANG = " + application.g_Main_Upjang;
			//사업장인 경우 관리업장만 조회
			else if (application.g_UserKind == '사업장')
				sAddWhere += " AND ( A.UPJANG = " + application.g_Upjang + " OR EXISTS (SELECT 1 FROM FMS_USER_UPJANG B WHERE B.USE_YN = 'Y' AND B.UPJANG = A.UPJANG AND B.SABUN = '" + application.g_EmpNo + "') )";

			break;

		default:
			break;
	}
	//fm공통 팝업클릭 호출
	if (ffn_btn_OnClick(obj, sAddWhere)) fn_Trigger_edBtn(eval("ed_" + gfn_subStr(obj.name, 4)));
}

function fn_edBtn_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	if (ffn_ed_OnKeyDown(obj,e.keycode)) fn_Trigger_edBtn(eval("ed_" + gfn_subStr(obj.name, 3)));
}

function fn_Trigger_edBtn(obj)
{
	switch(obj)
	{
		case ed_Upjang:
			//초기화
			fn_ResetData();
			if (! ffn_ChkNull(ed_Upjang.userdata)) fn_InitPage("UPJANG");
		default:

			break;
	}
}

function fn_ResetData()
{
	ds_List.clearData();
	ds_List1.clearData();
	ds_List3.clearData();
}

function fn_FormKeyDown(obj:Form, e:KeyEventInfo)
{
	gfn_formKeyDown(obj, e); //(obj,e.fromreferenceobject,e.keycode,e.shiftKey,e.ctrlKey,e.altKey,-1,-1);
	if ( (e.keycode == 13) && (e.fromreferenceobject == me_Sdate) ) fn_search();
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
function gd_list_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}

function Tab_Detail_tab3_btn_Add_OnClick(obj:Button, e:ClickEventInfo)
{    
	ds_List3.addRow();
	ds_List3.setColumn(ds_List3.rowposition, "UPJANG", ed_Upjang.userdata);
	
	Tab_Detail.tab3.gd_list2.setFocus();
	Tab_Detail.tab3.gd_list2.setCellPos(1);	
}

function ds_List_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	var v_sum = 0;
	
	switch(e.columnid)
	{
		case "REAL_MEAL_QTY":
					
			for( i = 0 ; i < ds_List.rowcount ; i++ )
			{
				if(ds_List.getColumn(e.row,"MEAL") == ds_List.getColumn(i,"MEAL") && 
					ds_List.getColumn(e.row,"SUBINV_CODE") == ds_List.getColumn(i,"SUBINV_CODE"))
					v_sum = v_sum + toNumber(ds_List.getColumn(i,e.columnid));
			}

			for( i = 0 ; i < ds_List.rowcount ; i++ )
			{
				if(ds_List.getColumn(e.row,"MEAL") == ds_List.getColumn(i,"MEAL") && 
					ds_List.getColumn(e.row,"SUBINV_CODE") == ds_List.getColumn(i,"SUBINV_CODE"))
					ds_List.setColumn(i,"MEAL_TOT", v_sum);
			}				

			//오차율
			ds_List.setColumn(e.row,"GOAL_COST_RATE", Math.round((toNumber(ds_List.getColumn(e.row,e.columnid)) - toNumber(ds_List.getColumn(e.row,"EXPECT_MEAL_QTY"))) / toNumber(ds_List.getColumn(e.row,"EXPECT_MEAL_QTY")) * 100, 1));
			//1인 식재료비
			if (numFormat(ds_List.getSum(e.columnid))== "0")
				//ds_List1.SetColumn(0,"MAN_AVG_QTY",0);
				ds_List1.setColumn(0,"MAN_AVG_QTY",ds_List1.getColumn(0,"DD_USE"));
			else
				ds_List1.setColumn(0,"MAN_AVG_QTY",Math.round(toNumber(ds_List1.getColumn(0,"DD_USE")) / toNumber(ds_List.getSum(e.columnid))));
				
			break;	
	}
}

function ds_List1_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	switch(e.columnid)
	{	
		case "LEAVING_QTY":    //  월 누계 = 잔반량 + 잔식량 
	       	   ds_List1.setColumn(0,"LEAVING_SUM",toNumber(ds_List1.getColumn(0,"LEAVING_QTY")) + toNumber(ds_List1.getColumn(0,"OVER_QTY")));		       	   
	       	   ds_List1.setColumn(0,"LEAVING_MM_TOT", toNumber(ds_List1.getColumn(0,"LEAVING_MM_TOT_ORG")) + toNumber(ds_List1.getColumn(0,"LEAVING_QTY")) + toNumber(ds_List1.getColumn(0,"OVER_QTY")));
		       	   
	       	   break;

		case "OVER_QTY":
	       	   ds_List1.setColumn(0,"LEAVING_SUM", toNumber(ds_List1.getColumn(0,"LEAVING_QTY")) + toNumber(ds_List1.getColumn(0,"OVER_QTY")));		       	   
	       	   ds_List1.setColumn(0,"LEAVING_MM_TOT", toNumber(ds_List1.getColumn(0,"LEAVING_MM_TOT_ORG")) + toNumber(ds_List1.getColumn(0,"OVER_QTY")) + toNumber(ds_List1.getColumn(0,"LEAVING_QTY")));
		       	   
	       	   break;

		case "SALE_ACT_AMT":
			//재료비율
			if (numFormat(ds_List1.getColumn(0,"SALE_ACT_AMT"))== "0")
				ds_List1.setColumn(0,"RAW_AMT",0);
			else
				ds_List1.setColumn(0,"RAW_AMT",Math.round(100 * toNumber(ds_List1.getColumn(0,"DD_USE")) / toNumber(ds_List1.getColumn(0,"SALE_ACT_AMT"))));
		       	   
	       	   break;

		case "SALE_TOT_PLAN_M":
			if (numFormat(ds_List1.getColumn(0,"SALE_TOT_PLAN_M"))== "0")
				ds_List1.setColumn(0,"GOAL_RATE", 0);
			else
				ds_List1.setColumn(0,"GOAL_RATE", Math.round(100 * toNumber(ds_List1.getColumn(0,"SALE_TOT_ACT_M")) / toNumber(ds_List1.getColumn(0,"SALE_TOT_PLAN_M"))));
		       	   
	       	   break;

		case "SALE_TOT_ACT_M":
			if (numFormat(ds_List1.getColumn(0,"SALE_TOT_PLAN_M"))== "0")
				ds_List1.setColumn(0,"GOAL_RATE", 0);
			else
				ds_List1.setColumn(0,"GOAL_RATE", Math.round(100 * toNumber(ds_List1.getColumn(0,"SALE_TOT_ACT_M")) / toNumber(ds_List1.getColumn(0,"SALE_TOT_PLAN_M"))));

			break;

		case "PRE_STOCK":
			ds_List1.setColumn(0,"DD_STOCK", toNumber(ds_List1.getColumn(0,"PRE_STOCK"))
			                               + toNumber(ds_List1.getColumn(0,"DD_DELIVER"))
			                               - toNumber(ds_List1.getColumn(0,"DD_USE")));

			break;

		case "DD_DELIVER":
			ds_List1.setColumn(0,"DD_STOCK", toNumber(ds_List1.getColumn(0,"PRE_STOCK"))
			                               + toNumber(ds_List1.getColumn(0,"DD_DELIVER"))
			                               - toNumber(ds_List1.getColumn(0,"DD_USE")));

			break;

		case "DD_USE":
			ds_List1.setColumn(0,"DD_STOCK", toNumber(ds_List1.getColumn(0,"PRE_STOCK"))
			                               + toNumber(ds_List1.getColumn(0,"DD_DELIVER"))
			                               - toNumber(ds_List1.getColumn(0,"DD_USE")));
			//재료비율
			if (numFormat(ds_List1.getColumn(0,"SALE_ACT_AMT")) == "0") {
				ds_List1.setColumn(0,"RAW_AMT",0);
			}
			else {
				ds_List1.setColumn(0,"RAW_AMT",Math.round((toNumber(ds_List1.getColumn(0,"DD_USE")) / toNumber(ds_List1.getColumn(0,"SALE_ACT_AMT")) *100) ));
			}	
			//1인 식재료비
			if (numFormat(ds_List.getSum("REAL_MEAL_QTY"))== "0")
				ds_List1.setColumn(0,"MAN_AVG_QTY",ds_List1.getColumn(0,"DD_USE"));
			else
				ds_List1.setColumn(0,"MAN_AVG_QTY",Math.round(toNumber(ds_List1.getColumn(0,"DD_USE")) / toNumber(ds_List.getSum("REAL_MEAL_QTY"))));

			break;

		case "DD_STOCK":
			ds_List1.setColumn(0,"DD_USE", toNumber(ds_List1.getColumn(0,"PRE_STOCK"))
			                             + toNumber(ds_List1.getColumn(0,"DD_DELIVER"))
			                             - toNumber(ds_List1.getColumn(0,"DD_STOCK")));

			break;

	}
}

function Tab_Detail_OnChanging(obj:Tab, e:TabIndexChangeEventInfo)
{
	switch(e.postindex)
	{
		case "0":
			Tab_Detail.tab1.ed_Leaving.setFocus();
			break;		       
		case "1":
			Tab_Detail.tab2.ed_PreStock.setFocus();
			break;
		case "2":
			Tab_Detail.tab3.gd_list2.setFocus();					
			break;		       
	}	
}

function Tab_Detail_tab3_gd_list2_OnEnterDown(obj:Grid, e:GridEditEventInfo)
{
	if (e.cell == 1)
		Tab_Detail.tab3.gd_list2.setCellPos(2);
	else if (e.cell == 2)
		Tab_Detail.tab3.gd_list2.setCellPos(3);
	else if (e.cell == 3)
		Tab_Detail.tab3.ed_Contents.setFocus();
	else
		gd_list.moveToNextCell();		
}

function Tab_Detail_tab3_btn_Del_OnClick(obj:Button, e:ClickEventInfo)
{	
	if(ds_List3.getRowCount()==0)
	{
		g_Message("EE", "삭제할 데이터가 없습니다.");		
		return;
	}	
	ds_List3.deleteRow(ds_List3.rowposition);		
}]]></Script>
  </Form>
</FDL>
