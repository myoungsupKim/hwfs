<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FMS00111E" onload="form_onload" titletext="사업장 정보관리(본사)-기본관리" position="absolute 0 0 631 581" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="sta_detail13" class="sta_WFDA_Labelbg" position="absolute 84 489 384 516"/>
        <Static id="sta_detail12" class="sta_WFDA_Labelbg" position="absolute 84 463 384 490"/>
        <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 129 23 621 50" anchor="default"/>
        <Static id="sta_detail00" class="sta_WFDA_Labelbg" position="absolute 129 49 621 76" anchor="default"/>
        <Static id="sta_detail01" class="sta_WFDA_Labelbg" position="absolute 129 75 621 102" anchor="default"/>
        <Static id="sta_detail02" class="sta_WFDA_Labelbg" position="absolute 129 101 621 150" anchor="default"/>
        <Static id="sta_detail03" class="sta_WFDA_Labelbg" position="absolute 129 149 621 198" anchor="default"/>
        <Static id="sta_detail04" class="sta_WFDA_Labelbg" position="absolute 129 197 621 224" anchor="default"/>
        <Static id="sta_detail09" class="sta_WFDA_Labelbg" position="absolute 129 361 621 388" anchor="default"/>
        <Static id="sta_detail10" class="sta_WFDA_Labelbg" position="absolute 129 387 621 414" anchor="default"/>
        <Static id="sta_detail11" class="sta_WFDA_Labelbg" position="absolute 129 413 621 440" anchor="default"/>
        <Static id="Static8" text="/" position="absolute 252 200 260 221"/>
        <Static id="Static01" text="사업장코드" position="absolute 10 23 130 50" class="sta_WFDA_Label01"/>
        <Static id="Static54" text="사업장명(고객용)" position="absolute 10 75 130 102" class="sta_WFDA_Label01"/>
        <Static id="Static55" text="소   재   지" position="absolute 10 101 130 150" class="sta_WFDA_Label01"/>
        <Static id="Static56" text="현   주   소" position="absolute 10 149 130 198" class="sta_WFDA_Label01"/>
        <Static id="Static57" text="업종 / 업태" position="absolute 10 197 130 224" class="sta_WFDA_Label01"/>
        <Static id="Static61" text="영업&#13;&#10;정보" position="absolute 10 361 40 414" class="sta_WFDA_Label01" style="linespace:3;padding:0 0 0 2;" wordwrap="none"/>
        <Static id="Static63" text="영 업 사 원" position="absolute 39 361 130 388" class="sta_WFDA_Label01"/>
        <Static id="Static64" text="C/S 사 원" position="absolute 39 387 130 414" class="sta_WFDA_Label01"/>
        <Static id="Static65" text="사업장명" position="absolute 309 23 400 50" class="sta_WFDA_Label01"/>
        <Static id="Static67" text="본 사 그 룹" position="absolute 10 49 130 76" class="sta_WFDA_Label01"/>
        <Static id="Static73" text="사업자번호" position="absolute 309 75 400 102" class="sta_WFDA_Label01"/>
        <Static id="Static84" text="연   락   처" position="absolute 309 361 400 388" class="sta_WFDA_Label01"/>
        <Static id="Static85" text="연   락   처" position="absolute 309 387 400 414" class="sta_WFDA_Label01"/>
        <Edit id="ed_UPJANGNM_DISP" taborder="5" position="absolute 132 79 307 100"/>
        <Edit id="ed_UPJANG" readonly="true" taborder="1" position="absolute 132 26 307 47" class="edt_WF_Essential"/>
        <Edit id="ed_CUST_NAME" readonly="true" taborder="2" position="absolute 402 26 618 47" class="edt_WF_Essential"/>
        <Edit id="ed_MAIN_UPJANG" readonly="true" taborder="3" position="absolute 132 52 307 73" class="edt_WF_Essential"/>
        <Edit id="ed_MAIN_UPJANG_NM" readonly="true" taborder="4" position="absolute 309 52 618 73"/>
        <Edit enable="false" id="ed_BIZ_TYPE" readonly="true" taborder="11" position="absolute 132 200 247 221"/>
        <Edit enable="false" id="ed_BIZ_CAT" readonly="true" taborder="12" position="absolute 263 200 378 221"/>
        <Edit id="ed_PART_SALES_SABUN_NM" readonly="true" taborder="18" position="absolute 132 364 307 385" class="edt_WF_Essential"/>
        <Edit id="ed_CS_SABUN_NM" readonly="true" taborder="20" position="absolute 132 390 307 411" class="edt_WF_Essential"/>
        <Edit id="ed_CS_TEL_NO" readonly="true" taborder="21" position="absolute 401 390 618 411" class="edt_WF_Essential"/>
        <Edit id="ed_PART_SALES_TEL_NO" readonly="true" taborder="19" position="absolute 401 364 618 385" class="edt_WF_Essential"/>
        <MaskEdit id="med_BIZ_NUM" readonly="true" taborder="6" type="string" position="absolute 401 79 618 100" class="msk_WF_Essential" style="align:left middle;"/>
        <Static id="Static03" text="사 용 여 부" position="absolute 10 463 85 490" class="sta_WFDA_Label01"/>
        <Static id="Static5" text="비밀번호 주기" visible="false" position="absolute 189 463 279 490" class="sta_WFDA_Label01"/>
        <Combo codecolumn="CODE" datacolumn="code_name" id="cbo_USE_YN" index="0" innerdataset="ds_useyn" taborder="22" position="absolute 87 466 176 487" class="cmb_WF_Essential" readonly="true"/>
        <Combo codecolumn="CODE" datacolumn="code_name" id="cbo_PWD_CHG_YN" index="0" innerdataset="ds_PWD_CHG" taborder="23" visible="false" position="absolute 281 466 372 487"/>
        <Static id="Static1" text="계 약 기 간" position="absolute 10 489 85 516" class="sta_WFDA_Label01"/>
        <Static id="Static34" text="계약종료일" position="absolute 189 489 279 516" class="sta_WFDA_Label01"/>
        <Button id="btn_CONTRACT_EDATE" onclick="g_CalButton_OnClick" taborder="77" userdata="cal_CONTRACT_EDATE" position="absolute 360 492 381 513" class="btn_WF_cal" text="" image=""/>
        <MaskEdit id="cal_CONTRACT_EDATE" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkeydown="ed_pop_OnKeyDown" onkillfocus="g_Date_OnKillFocus" taborder="76" type="string" userdata="div_mainupjang.btn_CONTRACT_EDATE" position="absolute 281 492 361 513"/>
        <MaskEdit id="ed_CONTRACT_TERM" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkeydown="ed_pop_OnKeyDown" onkillfocus="g_Date_OnKillFocus" taborder="80" type="string" userdata="btn_CONTRACT_TERM" position="absolute 87 492 167 513"/>
        <Button id="btn_CONTRACT_TERM" onclick="g_CalButton_OnClick" taborder="81" userdata="ed_CONTRACT_TERM" position="absolute 166 492 187 513" class="btn_WF_cal" text="" image=""/>
        <Static id="st_bk1" visible="false" position="absolute 393 463 621 516" class="sta_WFDA_Label01" onclick="st_bk1_onclick"/>
        <ImageViewer stretch="fit" id="img_photo" onclick="common_imgphoto_OnClick" transparenthittest="false" taborder="85" visible="false" position="absolute 398 469 498 499"/>
        <Static id="Static7" visible="false" text="* 이미지 사이즈 : 100 * 30 " position="absolute 398 502 550 515" style="font:Gulim,8;"/>
        <Static id="Static9" text="배송 특이사항" position="absolute 10 413 130 440" class="sta_WFDA_Label01"/>
        <Edit id="ed_DELIVERY_DETAIL" taborder="89" position="absolute 132 416 618 437" readonly="true"/>
        <Button defaultbutton="false" id="btn_UploadImg" onclick="btn_UploadImg_OnClick" taborder="91" text="첨부" visible="false" position="absolute 505 470 546 491" class="btn_WF_P" image=""/>
        <Button id="btn_DeleteImg" onclick="btn_DeleteImg_OnClick" taborder="92" text="삭제" visible="false" position="absolute 550 470 591 491" class="btn_WF_P" image=""/>
        <Static id="Static11" text="기본정보" position="absolute 10 5 100 23" class="sta_WF_Title01"/>
        <Static id="Static12" text="기본설정" position="absolute 10 445 93 463" class="sta_WF_Title01"/>
        <Static id="Static38" text="5" class="Guide01_AreaRed" visible="false" position="absolute 0 0 575 5" anchor="left top"/>
        <Static id="Static07" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 32 10 482"/>
        <Static id="Static41" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 17 18 467 23" anchor="left top"/>
        <Static id="Static39" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 10 570 585 580" anchor="left top"/>
        <Static id="Static40" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 621 2 631 482"/>
        <Static id="Static04" text="5" class="Guide01_AreaRed" visible="false" position="absolute 3 440 413 445" anchor="left top"/>
        <Static id="Static06" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 20 458 305 463" anchor="left top"/>
        <Static id="Static00" text="5" class="Guide01_AreaRed" visible="false" position="absolute 11 516 361 521" anchor="left top"/>
        <Static id="Static20" text="고객정보" class="sta_WF_Title01" position="absolute 10 237 100 255"/>
        <Button id="btn_CustAdd" taborder="98" onclick="btn_CustAdd_OnClick" class="btn_WF_GrdPlus" position="absolute 578 231 596 251" anchor="default"/>
        <Button id="btn_CustDelete" taborder="99" onclick="btn_CustDelete_OnClick" class="btn_WF_GrdMinus" position="absolute 598 231 616 251" anchor="default"/>
        <Grid id="grd_cust" taborder="100" binddataset="ds_cust" autoenter="select" useinputpanel="false" autofittype="col" position="absolute 10 255 621 348" anchor="default">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="160"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell text="담당자/영양사"/>
                <Cell col="1" text="전화번호"/>
                <Cell col="2" text="핸드폰"/>
                <Cell col="3" text="FAX"/>
                <Cell col="4" text="이메일"/>
              </Band>
              <Band id="body">
                <Cell edittype="text" editfilter="char" text="bind:PART_NAME" editimemode="hangul"/>
                <Cell col="1" displaytype="normal" edittype="normal" editfilter="number" text="bind:CUST_TEL_NO" editlimit="20"/>
                <Cell col="2" edittype="normal" editfilter="number" text="bind:CUST_HP_NO" editlimit="50"/>
                <Cell col="3" edittype="normal" editfilter="number" text="bind:CUST_FAX_NO" editlimit="20"/>
                <Cell col="4" edittype="normal" text="bind:CUST_EMAIL"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static22" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 8 224 550 237" anchor="left top"/>
        <Static id="Static02" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 10 348 552 361" anchor="left top"/>
        <MPFileDialog id="fileDialog" taborder="194" visible="false" position="absolute 592 -4 616 20" FileName="" FileNameList="" FilePath="" UserData="" MultiSelect="false" Filter="ALL File(*.*)|*.*" FilterIndex="0" AppendExtDefault="false" Type="Open" FileSize=""/>
        <Div id="div_mainupjang" anchor="left top right" taborder="196" text="Div0" scrollbars="none" position="absolute 10 499 622 564">
          <Layouts>
            <Layout width="612" height="91">
              <Static id="Static0" class="sta_WFDA_Labelbg" position="absolute 0 39 611 65" anchor="default"/>
              <Static id="Static13" text="추가정보" class="sta_WF_Title01" position="absolute 0 22 73 40" anchor="default"/>
              <Static id="Static02" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 3 34 453 39" anchor="left top"/>
              <Static id="Static1" text="최초등록일" class="sta_WFDA_Label01" position="absolute 0 39 92 65" anchor="default" onclick="div_mainupjang_Static1_onclick"/>
              <MaskEdit id="med_FST_REG_DATE" taborder="1" type="string" mask="@@@@.@@.@@" class="msk_WF_Cal" enable="false" position="absolute 94 42 181 63" anchor="default"/>
              <MaskEdit id="med_LST_DEAL_DATE" taborder="2" type="string" mask="@@@@.@@.@@" class="msk_WF_Cal" enable="false" visible="false" position="absolute 277 42 363 63" anchor="default"/>
              <Static id="Static7" text="최종거래일" class="sta_WFDA_Label01" visible="false" position="absolute 183 39 275 65" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <AddrSearchComponent id="comp_addr" titletext="주소검색 Component" taborder="200" text="AddrSearchComponent00" position="absolute 132 152 618 195" bindDataset="ds_main" isAutoDatasetRowChangedEvent="true" bindAddrColumn="ADDR_INFO" eventBeforeTrigger="" eventAfterTrigger="" bindAddrKeyColumn="ADDR_KEY" isReadOnly="false" onclick="comp_addr_onclick"/>
        <AddrSearchComponent id="cust_comp_addr" titletext="주소검색 Component" taborder="201" onclick="comp_addr_onclick" text="AddrSearchComponent00" position="absolute 132 104 618 147" bindDataset="ds_main" isAutoDatasetRowChangedEvent="true" bindAddrColumn="CUST_ADDR_INFO" eventBeforeTrigger="" eventAfterTrigger="" bindAddrKeyColumn="CUST_ADDR_KEY" isReadOnly="true"/>
        <Div id="div_upjang" anchor="left top right" taborder="202" text="Div0" scrollbars="none" visible="false" position="absolute 44 584 656 675">
          <Layouts>
            <Layout width="612" height="91">
              <Static id="Static43" position="absolute 38 50 58 62" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_ADDR">
        <ColumnInfo>
          <Column id="CD" size="256" prop="default" type="STRING"/>
          <Column id="CDNM" size="256" prop="default" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CD">P</Col>
            <Col id="CDNM">지번주소</Col>
          </Row>
          <Row>
            <Col id="CD">N</Col>
            <Col id="CDNM">도로명주소</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">Y</Col>
            <Col id="insYn">Y</Col>
            <Col id="delYn">N</Col>
            <Col id="savYn">N</Col>
            <Col id="prtYn">N</Col>
            <Col id="exlYn">N</Col>
          </Row>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="div_upjang_Static43_value" compid="div_upjang.Static43" propid="value" datasetid="ds_main" columnid="TOT_CNT"/>
      <BindItem id="div_mainupjang_med_LST_DEAL_DATE_value" compid="div_mainupjang.med_LST_DEAL_DATE" propid="value" datasetid="ds_main" columnid="LST_DEAL_DATE"/>
      <BindItem id="div_mainupjang_med_FST_REG_DATE_value" compid="div_mainupjang.med_FST_REG_DATE" propid="value" datasetid="ds_main" columnid="FST_REG_DATE"/>
      <BindItem id="ed_UPJANGNM_DISP_value" compid="ed_UPJANGNM_DISP" propid="value" datasetid="ds_main" columnid="UPJANGNM_DISP2"/>
      <BindItem id="ed_UPJANG_value" compid="ed_UPJANG" propid="value" datasetid="ds_main" columnid="UPJANG"/>
      <BindItem id="ed_CUST_NAME_value" compid="ed_CUST_NAME" propid="value" datasetid="ds_main" columnid="UPJANGNM_DISP"/>
      <BindItem id="ed_MAIN_UPJANG_value" compid="ed_MAIN_UPJANG" propid="value" datasetid="ds_main" columnid="MAIN_UPJANG"/>
      <BindItem id="ed_MAIN_UPJANG_NM_value" compid="ed_MAIN_UPJANG_NM" propid="value" datasetid="ds_main" columnid="MAIN_UPJANG_NM"/>
      <BindItem id="ed_BIZ_TYPE_value" compid="ed_BIZ_TYPE" propid="value" datasetid="ds_main" columnid="BIZ_TYPE"/>
      <BindItem id="ed_BIZ_CAT_value" compid="ed_BIZ_CAT" propid="value" datasetid="ds_main" columnid="BIZ_CAT"/>
      <BindItem id="ed_PART_SALES_SABUN_NM_value" compid="ed_PART_SALES_SABUN_NM" propid="value" datasetid="ds_main" columnid="PART_SALES_SABUN_NM"/>
      <BindItem id="ed_CS_SABUN_NM_value" compid="ed_CS_SABUN_NM" propid="value" datasetid="ds_main" columnid="CS_SABUN_NM"/>
      <BindItem id="ed_CS_TEL_NO_value" compid="ed_CS_TEL_NO" propid="value" datasetid="ds_main" columnid="CS_TEL_NO"/>
      <BindItem id="ed_PART_SALES_TEL_NO_value" compid="ed_PART_SALES_TEL_NO" propid="value" datasetid="ds_main" columnid="PART_SALES_TEL_NO"/>
      <BindItem id="med_BIZ_NUM_value" compid="med_BIZ_NUM" propid="value" datasetid="ds_main" columnid="BIZ_NUM"/>
      <BindItem id="cbo_USE_YN_value" compid="cbo_USE_YN" propid="value" datasetid="ds_main" columnid="USE_YN"/>
      <BindItem id="cbo_PWD_CHG_YN_value" compid="cbo_PWD_CHG_YN" propid="value" datasetid="ds_main" columnid="PWD_CHG_CYCLE"/>
      <BindItem id="cal_CONTRACT_EDATE_value" compid="cal_CONTRACT_EDATE" propid="value" datasetid="ds_main" columnid="CONTRACT_EDATE"/>
      <BindItem id="ed_CONTRACT_TERM_value" compid="ed_CONTRACT_TERM" propid="value" datasetid="ds_main" columnid="CONTRACT_TERM"/>
      <BindItem id="img_photo_image" compid="img_photo" propid="image" datasetid="ds_main" columnid="IMG_URL"/>
      <BindItem id="ed_DELIVERY_DETAIL_value" compid="ed_DELIVERY_DETAIL" propid="value" datasetid="ds_main" columnid="DELIVERY_DETAIL"/>
      <BindItem id="item5" compid="sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item0" compid="sta_detail00" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item1" compid="sta_detail01" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item2" compid="sta_detail02" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item3" compid="sta_detail03" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item4" compid="sta_detail04" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item9" compid="sta_detail09" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item10" compid="sta_detail10" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item11" compid="sta_detail11" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item12" compid="sta_detail12" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item13" compid="sta_detail13" propid="text" datasetid="ds_view" columnid="D_1"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[include "U_lib::lib_conversionCom.xjs";
/*
 ******************************************************************************************
 * 시스템구분   : 기준정보/사업장관리/사업장 정보관리(본사)-기본관리
 * 프로그램명   : FMS00111E.XML
 * 기      능   : 사업장 정보관리(본사)
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-11-26
 * 비      고   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
  * 수 정 일 자  : 2015-05-07.
				   [고도화]_고객정보 마스킹 처리 및 쿼리 수정_김태윤.
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
//@@컨버터에서 주석처리 #include "lib::sc_comon.js"				// 시스템 공통
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);

	// X-Framework : Action 정보 생성 
	fsp_init(this);
}
//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_SaveFile()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 파일정보저장
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-04-10 
 ******************************************************************************************
 */
function fn_SaveFile()
{
    // 서비스셋팅
    fsp_clear(this);
    fsp_addSave(this, "", "fm/fms:FMS00100E_U001", "");
    fsp_callService(this, "", "", "ds_main=ds_main:U", "", "", "");		// 서비스 호출 
}
//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 업장엔터시팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
/*
 ******************************************************************************************
 * 함  수  명   : ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 업장엔터시팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-18  
 ******************************************************************************************
 */
function ed_pop_OnKeyDown(obj:MaskEdit, e:KeyEventInfo)
{	
	/*if (e.keycode == 13)
	{
		var objme = eval(obj.userdata);
		objme.click();
	}*/
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_UploadImg_OnClick(obj)
 * 기      능   : 파일추가
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-04-10  
 ******************************************************************************************
 */
function btn_UploadImg_OnClick(obj:Button, e:ClickEventInfo)
{
	// 변경여부 확인
	///*
	if(gfn_dsIsUpdated(ds_main)==true)
	{
		g_Message("EE", "변경된 데이터가 있습니다.\n저장 후 작업해주세요.");
		return;
	}
	//*/
	if (gfn_length(ds_main.getColumn(ds_main.rowposition,"MAIN_UPJANG_IMG"))> 0)
	{
		g_Message("EE", "등록된 사진정보가 있습니다.\n삭제하신 후 첨부해 주십시오.");
		return;
	}
	
	// 서버로 전송 할 파일 선택하기
	var btp = fileDialog.Open();
	
	if (btp)
	{
		// 파일 서버로 전송 
		//var arr = tit_fileWrite(httpFile, serverSaveDir, fileDialog.FilePath, fileDialog.FileName);	//As-Is
		var arr = fsp_fileWrite(httpFile, serverSaveDir, fileDialog.FilePath, fileDialog.FileName);  
		//trace(arr[0]);
		// 처리 결과 확인하기 
		if( arr[0] == "S" ) 	// 성공 
		{
			//trace(ds_main.saveXML());
			ds_main.setColumn(ds_main.rowposition,"IMG_URL",serverSaveUrl + "/" + arr[2]);
			ds_main.setColumn(ds_main.rowposition,"MAIN_UPJANG_IMG",arr[2]);
			img_photo.image = serverSaveUrl + "/" + arr[2];
		}
		else
		{
			g_Message("EE", "파일첨부를 실패하였습니다.");
			return;
		}
		
		//fn_SaveFile();
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_DeleteImg_OnClick(obj)
 * 기      능   : 파일삭제
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-04-10 
 ******************************************************************************************
 */
function btn_DeleteImg_OnClick(obj:Button, e:ClickEventInfo)
{
	// 변경여부 확인
	if(gfn_dsIsUpdated(ds_main)==true)
	{
		g_Message("EE", "변경된 데이터가 있습니다.\n저장 후 작업해주세요.");
		return;
	}
	
	// 삭제확인
	if(!g_Confirm("01","이미지를 삭제하시겠습니까?"))
	{
		return;
	}
	
	//var btp = tit_fileDelete(serverSaveDir, ds_main.getColumn(ds_main.rowposition,"MAIN_UPJANG_IMG"),true);	//As-is
	var btp = fsp_fileDelete(serverSaveDir, ds_main.getColumn(ds_main.rowposition,"MAIN_UPJANG_IMG"),true);		//To-Be
	
	if (btp)
	{
		img_photo.image = "";
		ds_main.setColumn(ds_main.rowposition,"IMG_URL","");
		ds_main.setColumn(ds_main.rowposition,"MAIN_UPJANG_IMG","");
	}
	else
	{
		g_Message("EE", "식단사진 삭제를 실패하였습니다.");
		return;
	}
	
	//fn_SaveFile();
}

/*
 ******************************************************************************************
 * 함  수  명   : common_imgphoto_OnClick(obj,nX,nY)
 * 기      능   : 이미지클릭
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-04-04
 ******************************************************************************************
 */
function common_imgphoto_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	if (gfn_length(obj.image)> 0)
	{
		gfn_dialog("", "U_SCC::SCC91000P.xfdl",{fa_Image:obj.image});
		//ExecBrowser(obj.ImageID);
	}
}



/*
 ******************************************************************************************
 * 함  수  명   : fn_insertUpjangCust(GUBUN)
 * 입      력   : GUBUN : 1(고객정보), 0(영업정보)
 * 반      환   : 없음
 * 기      능   : 고객정보/영업정보 행 추가
 * 작  성  자   : 김태윤
 * 작성  일자   : 2015-05-06 
 ******************************************************************************************
 */
function fn_insertUpjangCust(GUBUN)
{
	var nRow;

	nRow = ds_cust.addRow();
	
	// Grid 입력 cell 지정
	tab_list.tab1.grd_cust.setFocus();
	tab_list.tab1.grd_cust.setCellPos(0);
	
	//ds_cust.setColumn(ds_cust.rowposition, 'UPJANG', vUPJANG);
	ds_cust.setColumn(ds_cust.rowposition, 'UPJANG', ds_main.getColumn(ds_main.rowposition,"UPJANG"));
	ds_cust.setColumn(ds_cust.rowposition, 'GUBUN', GUBUN);
}


/*
 ******************************************************************************************
 * 함  수  명   : fn_deleteUpjangCust(GUBUN)
 * 입      력   : GUBUN : 1(고객정보), 0(영업정보)
 * 반      환   : 없음
 * 기      능   : 고객정보/영업정보 행 삭제
 * 작  성  자   : 김태윤
 * 작성  일자   : 2015-05-06 
 ******************************************************************************************
 */
function fn_deleteUpjangCust(GUBUN)
{
	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	
	if(rtVal == true)
	{
		ds_cust.deleteRow(ds_cust.rowposition);
	}	
}

 /******************************************************************************************
 * 함  수  명   : btn_CustAdd_OnClick(obj)
 * 기      능   : 고객정보 행 추가 함수 호출
 * 작  성  자   : 김태윤
 * 작성  일자   : 2015-05-06 
 ******************************************************************************************
 */
function btn_CustAdd_OnClick(obj:Button,  e:ClickEventInfo)
{
	fn_insertUpjangCust(1);
}

 /******************************************************************************************
 * 함  수  명   : btn_CustDelete_OnClick(obj)
 * 기      능   : 영업정보 행 삭제 함수 호출
 * 작  성  자   : 김태윤
 * 작성  일자   : 2015-05-06 
 ******************************************************************************************
 */
function btn_CustDelete_OnClick(obj:Button,  e:ClickEventInfo)
{
	fn_deleteUpjangCust(1);
}

/*
 ******************************************************************************************
 * 함  수  명   : common_imgphoto_OnClick(obj,nX,nY)
 * 기      능   : 이미지클릭
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-04-04
 ******************************************************************************************
 */
function common_imgphoto_OnClick(obj:ImageViewer, e:ClickEventInfo)
{
	if (gfn_length(obj.image)> 0)
	{
		gfn_dialog("", "U_SCC::SCC91000P.xfdl",{fa_Image:obj.image});
		//ExecBrowser(obj.ImageID);
	}
}
]]></Script>
  </Form>
</FDL>
