<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FSP00032E" onkeydown="FSP00032E_OnKeyDown" onload="form_onload" titletext="구매신청(식단)" position="absolute 0 0 1252 700" scrollbars="none" onsize="FSP00032E_onsize">
    <Layouts>
      <Layout>
        <Grid autoenter="select" binddataset="ds_pr_item" cellsizingtype="col" id="grd_PrItem" oncelldblclick="grd_PrItem_OnCellDblClick" onmousemove="grd_PrItem_OnMouseOver" taborder="13" useselcolor="true" position="absolute 15 112 1237 492" autofittype="col" hideendline="col" anchor="left top right" class="grd_WF_LineNone" tabstop="false" selecttype="row" onexpandup="grd_PrItem_onexpandup">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="22" band="left"/>
                <Column size="22"/>
                <Column size="55"/>
                <Column size="24"/>
                <Column size="24"/>
                <Column size="24"/>
                <Column size="25"/>
                <Column size="150"/>
                <Column size="70"/>
                <Column size="120"/>
                <Column size="43"/>
                <Column size="60"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="70"/>
                <Column size="90"/>
                <Column size="60"/>
                <Column size="67"/>
                <Column size="130"/>
                <Column size="50"/>
                <Column size="40"/>
                <Column size="0"/>
                <Column size="57"/>
              </Columns>
              <Rows>
                <Row size="40" band="head"/>
                <Row size="23"/>
                <Row size="24" band="summ"/>
                <Row size="2" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" style="align:center;" class="head_Excel"/>
                <Cell col="1" colspan="5" displaytype="text" text="자재코드" taborder="undefined"/>
                <Cell col="6" style="linetype:onlyhorz;"/>
                <Cell col="7" displaytype="text" text="자재명" taborder="undefined"/>
                <Cell col="8" text="특성"/>
                <Cell col="9" displaytype="text" text="규격"/>
                <Cell col="10" displaytype="text" text="단위"/>
                <Cell col="11" displaytype="text" text="원산지"/>
                <Cell col="12" displaytype="text" text="단가"/>
                <Cell col="13" text="평균&#13;&#10;신청량"/>
                <Cell col="14" displaytype="text" text="소요량"/>
                <Cell col="15" displaytype="text" text="재고량"/>
                <Cell col="16" displaytype="text" class="grd_WF_Essential" text="신청량"/>
                <Cell col="17" displaytype="text" text="총금액"/>
                <Cell col="18" text="마감"/>
                <Cell col="19" text="담당MD"/>
                <Cell col="20" displaytype="text" class="grd_WF_Essential" text="비고"/>
                <Cell col="21" displaytype="text" text="과면세"/>
                <Cell col="22" displaytype="text" text="경유&#13;&#10;구분" wordwrap="exchar"/>
                <Cell col="23" text="중복&#13;&#10;여부"/>
                <Cell col="24" text="진행상태"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" expr="expr:currow+1"/>
                <Cell col="1" displaytype="button" style="padding:5 5 5 5;linetype:onlyhorz;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );controlbackground:EXPR( PR_YN!='Y' ? 'gray' : '#7bd7a3ff');controlborder:1 none #808080ff ;controlbordertype:round 10 10 ;"/>
                <Cell col="2" displaytype="text" style="align:center;linetype:onlyhorz;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ITEM_CODE"/>
                <Cell col="3" displaytype="normal" edittype="expr:gfn_isNull(IMG_PATH) ? 'none' : 'expand'" style="align:left;linetype:onlyhorz;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" expandshow="expr:gfn_isNull(IMG_PATH) ? 'hide' : 'show'" expandsize="24" expandimage="URL('theme://Images/new/grd_WF_Camerabtn.png')" tooltiptype="top,left" tooltiptext="expr:gfn_isNull(IMG_PATH) ? '' : '이미지팝업'"/>
                <Cell col="4" edittype="expand" style="linetype:onlyhorz;background:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : IS_REC == '1' ? 'deepskyblue' : 'default');background2:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : IS_REC == '1' ? 'deepskyblue' : 'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" expandshow="show" expandsize="23" expandimage="URL('theme://Images\new\grd_WF_ExpandImage.png')" tooltiptype="top,left" tooltiptext="자재상세팝업"/>
                <Cell col="5" displaytype="normal" edittype="expr:IS_ENF &lt; 1 ? 'expand' : 'none'" style="align:left;linetype:nocross;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" expandshow="expr:IS_ENF &lt; 1 ? 'show' : 'hide'" expandsize="23" expandimage="URL('theme://Images/new/grd_WF_Expand.png')" tooltiptype="top,left" tooltiptext="expr:IS_ENF &lt; 1 ? '동일자재대체' : ''"/>
                <Cell col="6" edittype="expr:IS_ENF &gt; 0 ? 'none' : 'expand'" style="background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');" expandshow="expr:IS_ENF &gt;0 ? 'hide' : 'show'" expandsize="23" expandimage="URL('theme://images/new/grd_WF_ExpandImageX.png')" tooltiptype="top,left" tooltiptext="expr:expr:IS_ENF &gt; 0 ? '' : '자재삭제'"/>
                <Cell col="7" displaytype="text" edittype="none" style="align:left;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ITEM_NAME" expandsize="23" expandimage="URL('theme://Images/new/grd_WF_Money2.png')"/>
                <Cell col="8" displaytype="image" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:FEATURE_NAME"/>
                <Cell col="9" displaytype="text" edittype="none" style="align:left;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ITEM_SIZE"/>
                <Cell col="10" displaytype="text" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:PO_UOM"/>
                <Cell col="11" displaytype="text" style="align:center;padding:0 0 0 5;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ORIGIN_TYPE"/>
                <Cell col="12" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:MARGIN_PRICE"/>
                <Cell col="13" displaytype="number" style="background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:AGG_QTY"/>
                <Cell col="14" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:KG_QTY"/>
                <Cell col="15" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ONHAND_QTY"/>
                <Cell col="16" displaytype="number" edittype="expr:PR_YN=='Y' ? (LINE_STATUS == 'DL' ? 'none' : 'masknumber') : 'none'" style="align:right;padding:1 1 1 1;background:EXPR(PR_YN=='Y' ? '#ffdad7ff' :  '#a9a9a932');background2:EXPR(PR_YN=='Y' ? '#ffdad7ff' :  '#a9a9a932');color:EXPR(PR_YN=='N' ? 'gray' : LINE_STATUS == 'DL' ? 'gray' :  'black');color2:EXPR(PR_YN=='N' ? 'gray' : LINE_STATUS == 'DL' ? 'gray' :  'black');selectbackground:EXPR(PR_YN=='Y' ? '#ffdad7ff' : LINE_STATUS == 'DL' ? '#ff63471e' :  'default');selectcolor:EXPR(PR_YN=='Y' ? 'gray' : LINE_STATUS == 'DL' ? 'gray' :  'default');" text="bind:PR_QTY" mask="#,##0.0##" editclipmode="includespace" editimemode="none" editautoselect="true" editdisplay="edit" editlimitbymask="none"/>
                <Cell col="17" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:TOT_AMT"/>
                <Cell col="18" displaytype="text" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:D_DAY_TXT"/>
                <Cell col="19" text="bind:MD_NAME"/>
                <Cell col="20" displaytype="text" edittype="expr:PR_YN=='Y' ? 'text' : 'none'" editfilter="expr:setfilterExpr(iif(CONTRACT_YN=='N'||PR_YN=='N'||USE_YN=='N'||gfn_length(RESTRICT_PERIOD)&gt;0||(DUTY_QTY&gt;0&amp;&amp;DUTY_QTY&lt;=REAL_USE_QTY)||D_DAY_YN=='N','none','normal'))" style="align:left;padding:0 0 0 5;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'red' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'red');" text="bind:PR_REMARK" editlimit="200" edittrimtype="Both" editimemode="native"/>
                <Cell col="21" displaytype="combo" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:TAX_CODE" combodataset="ds_tax" combocodecol="code" combodatacol="code_name"/>
                <Cell col="22" displaytype="text" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:CENTER_FLAG"/>
                <Cell col="23" text="bind:DUP_YN"/>
                <Cell col="24" displaytype="combo" style="background:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');background2:EXPR(PR_YN == 'Y' ? 'default' : LINE_STATUS == 'DL' ? '#a9a9a932' :  'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:LINE_STATUS" combodataset="ds_line_status" combocodecol="CODE" combodatacol="CODE_NAME"/>
              </Band>
              <Band id="summary">
                <Cell style="linetype:onlyhorz;" taborder="undefined"/>
                <Cell col="1" style="linetype:onlyhorz;" taborder="undefined"/>
                <Cell col="2" style="linetype:onlyhorz;" taborder="undefined"/>
                <Cell col="3" style="linetype:onlyhorz;" taborder="undefined"/>
                <Cell col="4"/>
                <Cell col="5" style="linetype:onlyhorz;" taborder="undefined"/>
                <Cell col="6"/>
                <Cell col="7" style="linetype:onlyhorz;"/>
                <Cell col="8"/>
                <Cell col="9" colspan="4" style="align:right;padding:0 20 0 0;" text="합계" taborder="undefined"/>
                <Cell col="13" displaytype="number" expr="getSum('AGG_QTY')"/>
                <Cell col="14" displaytype="number" text="expr:getSum('KG_QTY')"/>
                <Cell col="15" displaytype="number" text="expr:getSum('ONHAND_QTY')"/>
                <Cell col="16" displaytype="number" text="expr:getSum(&quot;PR_QTY&quot;)" mask="#,##0.0#"/>
                <Cell col="17" displaytype="number" text="expr:getSum('TOT_AMT')"/>
                <Cell col="18"/>
                <Cell col="19"/>
                <Cell col="20"/>
                <Cell col="21"/>
                <Cell col="22"/>
                <Cell col="23"/>
                <Cell col="24"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Button id="btn_Zero" onclick="btn_Zero_OnClick" taborder="7" tabstop="false" text="양념/미곡 일괄삭제" userdata="1" position="absolute 1120 86 1237 107" class="btn_WF_Custom" image="" anchor="top right"/>
        <Button id="btn_AddItem" onclick="btn_AddItem_OnClick" taborder="6" text="양념/미곡 추가" position="absolute 1021 86 1119 107" class="btn_WF_Custom" image="" anchor="top right"/>
        <PopupDiv id="pdiv_Menu" taborder="23" tabstop="false" position="absolute 135 265 1102 425" scrollbars="none" class="pdiv_WF_Pop">
          <Layouts>
            <Layout>
              <Grid id="grd_MenuItem" taborder="0" binddataset="ds_menu_item" wheelscrollrow="1" readonly="true" autoenter="select" useinputpanel="false" cellsizingtype="both" autofittype="col" useselcolor="false" onheadclick="grd_OnHeadClick" position="absolute 15 40 947 140" style="align:center middle;" anchor="default" class="grd_WF_LineNone">
                <Formats>
                  <Format id="Default">
                    <Columns>
                      <Column size="30"/>
                      <Column size="100"/>
                      <Column size="174"/>
                      <Column size="100"/>
                      <Column size="120"/>
                      <Column size="70"/>
                      <Column size="50"/>
                      <Column size="150"/>
                      <Column size="60"/>
                      <Column size="80"/>
                    </Columns>
                    <Rows>
                      <Row size="26" band="head"/>
                      <Row size="24"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="text" style="align:center;" class="head_Excel"/>
                      <Cell col="1" displaytype="text" text="자재코드"/>
                      <Cell col="2" displaytype="text" text="자재명"/>
                      <Cell col="3" displaytype="text" text="제공일"/>
                      <Cell col="4" displaytype="text" text="식당"/>
                      <Cell col="5" displaytype="text" text="끼니"/>
                      <Cell col="6" displaytype="text" text="코너"/>
                      <Cell col="7" displaytype="text" text="레시피명"/>
                      <Cell col="8" displaytype="text" text="소요량"/>
                      <Cell col="9" displaytype="text" text="소요량합계"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="text" style="align:center;padding:0 5 0 5;background2: ;" expr="expr:currow+1"/>
                      <Cell col="1" displaytype="text" style="align:center;padding:0 5 0 5;background2: ;" text="bind:ITEM_CODE" suppress="1" suppressalign="middle"/>
                      <Cell col="2" displaytype="text" style="align:left;padding:0 5 0 5;background2: ;" text="bind:ITEM_NAME" suppress="2" suppressalign="middle"/>
                      <Cell col="3" displaytype="date" style="align:left;padding:0 5 0 5;background2: ;" text="bind:MENU_DATE" calendardisplaynulltype="none"/>
                      <Cell col="4" displaytype="text" style="align:left;padding:0 5 0 5;background2: ;" text="bind:HALL_NAME"/>
                      <Cell col="5" displaytype="text" style="align:left;padding:0 5 0 5;background2: ;" text="bind:MEAL_NAME"/>
                      <Cell col="6" displaytype="text" style="align:left;padding:0 5 0 5;background2: ;" text="bind:CORNER_NAME"/>
                      <Cell col="7" displaytype="text" style="align:left;padding:0 5 0 5;background2: ;" text="bind:RECIPE_NAME"/>
                      <Cell col="8" displaytype="number" style="align:right;padding:0 5 0 5;background2: ;" text="bind:NEED_QTY"/>
                      <Cell col="9" displaytype="number" style="align:right;padding:0 5 0 5;background2: ;" expr="getSum('NEED_QTY')" suppress="9" suppressalign="middle"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="MenuID" text="자재 상세 내역(식단)" class="sta_WF_Title" position="absolute 15 16 215 40" anchor="default"/>
            </Layout>
          </Layouts>
        </PopupDiv>
        <Static id="Static15" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 875 10"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 645"/>
        <Static id="Static03" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 661"/>
        <Static id="Static07" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 15 685 963 700"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 15 40 1237 81" anchor="left top right"/>
        <Static id="st_ContractStart" text="신청일" class="sta_WFSA_label" position="absolute 30 50 85 71"/>
        <Static id="Static12" text="W10" visible="false" position="absolute 74 50 84 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static13" text="W30" visible="false" position="absolute 178 50 208 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static21" text="W10" visible="false" position="absolute 30 40 907 50" style="background:#ff000055;align:center middle;"/>
        <Static id="Static23" text="W10" visible="false" position="absolute 30 71 686 81" style="background:#ff000055;align:center middle;"/>
        <Static id="Static24" text="W15" visible="false" position="absolute 15 50 30 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static00" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 15 10 215 16"/>
        <Static id="Static05" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 220 35 723 40"/>
        <Button id="btn_Search" taborder="3" text="조회" onclick="Common_Btn_common_OnClick" class="btn_WF_searchCm" position="absolute 1084 10 1143 35" anchor="top right"/>
        <Static id="Static09" text="아이콘기준 h08" class="Guide01_AreaRed" visible="false" position="absolute 15 32 215 40"/>
        <Static id="Static18" text="W102" visible="false" position="absolute 343 10 345 35" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Static id="Static19" text="W102" visible="false" position="absolute 879 10 881 35" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Static id="Static20" text="W102" visible="false" position="absolute 926 10 928 35" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Static id="Static22" text="W102" visible="false" position="absolute 952 10 954 35" anchor="top right" style="background:#ff000055;align:center middle;"/>
        <Button id="btn_Close" taborder="5" text="닫기" onclick="Common_Btn_common_OnClick" class="btn_WF_CRUD" position="absolute 1192 10 1237 35" anchor="top right"/>
        <Static id="sta_list_title" text="신청리스트" class="sta_WF_Title01" position="absolute 15 94 689 112" anchor="left top"/>
        <Static id="Static14" text="W30" visible="false" position="absolute 355 50 385 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static25" text="W10" visible="false" position="absolute 251 50 261 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static26" text="W30" visible="false" position="absolute 655 50 685 71" style="background:#ff000055;align:center middle;"/>
        <Static id="Static27" text="W10" visible="false" position="absolute 417 50 427 71" style="background:#ff000055;align:center middle;"/>
        <Static id="st_ContractStart00" text="입고일" class="sta_WFSA_label" position="absolute 207 50 262 71"/>
        <MaskEdit enable="false" id="msk_pr_date" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="0" type="string" position="absolute 84 50 158 71" class="msk_WF_Cal" visible="true"/>
        <Button enable="false" id="btn_PrDate" onclick="g_CalButton_OnClick" taborder="10" tabstop="false" userdata="me_PrDate" position="absolute 157 50 178 71" class="btn_WF_cal" text="" image=""/>
        <MaskEdit enable="false" id="msk_need_date" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="1" type="string" position="absolute 261 50 335 71" class="msk_WF_Cal"/>
        <Button enable="false" id="btn_NeedDate" onclick="g_CalButton_OnClick" taborder="11" tabstop="false" userdata="me_NeedDate" position="absolute 334 50 355 71" class="btn_WF_cal" text="" image=""/>
        <Combo codecolumn="SUBINV_CODE" datacolumn="SUBINV_NAME" id="cbo_subInv" imemode="native" index="0" innerdataset="ds_subinv" type="dropdown" taborder="2" position="absolute 427 50 735 71" onkeydown="cbo_subInv_onkeydown"/>
        <Button id="btn_Save" taborder="4" text="확정" onclick="Common_Btn_common_OnClick" class="btn_WF_CRUD" position="absolute 1145 10 1190 35" anchor="top right"/>
        <Static id="st_ContractStart01" text="창고" class="sta_WFSA_label" position="absolute 385 50 440 71"/>
        <Static id="Static01" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 16 107 970 112" anchor="left top"/>
        <Static id="Static04" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 15 81 337 94" onclick="Static04_onclick"/>
        <Splitter id="sp_line" min="112" max="663" type="vertical" class="spt_WF_2" position="absolute 15 497 1237 507" anchor="left top right">
          <Formats>
            <Format id="default">
              <SplitterItems id="items">
                <SplitterItem id="item00" bindtype="resize" position="leftortop" offset="5" componentid="grd_PrItem"/>
                <SplitterItem id="item01" bindtype="resize" position="rightorbottom" offset="5" componentid="div_bottom"/>
              </SplitterItems>
            </Format>
          </Formats>
        </Splitter>
        <Div id="div_bottom" taborder="35" text="Div00" position="absolute 15 510 1237 686" style="background:transparent;" scrollbars="none" anchor="all">
          <Layouts>
            <Layout>
              <Grid id="grd_DelItem" taborder="0" binddataset="ds_del_item" wheelscrollrow="1" autoenter="select" useinputpanel="false" cellsizingtype="col" autofittype="col" onmousemove="grd_DelItem_OnMouseOver" onheadclick="grd_OnHeadClick" position="absolute 0 18 1222 174" anchor="all" hideendline="col" class="grd_WF_LineNone" onexpandup="div_bottom_grd_DelItem_onexpandup" oncellclick="div_bottom_grd_DelItem_oncellclick">
                <Formats>
                  <Format id="Default">
                    <Columns>
                      <Column size="30" band="left"/>
                      <Column size="24" band="left"/>
                      <Column size="23" band="left"/>
                      <Column size="55" band="left"/>
                      <Column size="24" band="left"/>
                      <Column size="150"/>
                      <Column size="70"/>
                      <Column size="120"/>
                      <Column size="50"/>
                      <Column size="80"/>
                      <Column size="80"/>
                      <Column size="60"/>
                      <Column size="60"/>
                      <Column size="60"/>
                      <Column size="80"/>
                      <Column size="60"/>
                      <Column size="60"/>
                      <Column size="70"/>
                      <Column size="150"/>
                    </Columns>
                    <Rows>
                      <Row size="26" band="head"/>
                      <Row size="23"/>
                    </Rows>
                    <Band id="head">
                      <Cell displaytype="text" style="align:center;" class="head_Excel"/>
                      <Cell col="1" colspan="4" displaytype="text" text="자재코드" taborder="undefined"/>
                      <Cell col="5" displaytype="text" text="자재명"/>
                      <Cell col="6" text="특성"/>
                      <Cell col="7" displaytype="text" text="규격"/>
                      <Cell col="8" displaytype="text" text="단위"/>
                      <Cell col="9" displaytype="text" text="원산지"/>
                      <Cell col="10" displaytype="text" text="단가"/>
                      <Cell col="11" displaytype="text" text="소요량"/>
                      <Cell col="12" displaytype="text" text="재고량"/>
                      <Cell col="13" displaytype="text" text="신청량"/>
                      <Cell col="14" displaytype="text" text="총금액"/>
                      <Cell col="15" displaytype="text" text="과면세"/>
                      <Cell col="16" displaytype="text" text="센터경유" wordwrap="exchar"/>
                      <Cell col="17" text="담당MD"/>
                      <Cell col="18" displaytype="text" class="grd_WF_Essential" text="비고"/>
                    </Band>
                    <Band id="body">
                      <Cell displaytype="text" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" expr="expr:currow+1"/>
                      <Cell col="1" displaytype="image" edittype="expand" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" expandshow="show" expandsize="20" expandimage="URL('theme://Images\new\spn_WF_UpbtnN.png')"/>
                      <Cell col="2" displaytype="button" style="padding:5 5 5 5;linetype:onlyhorz;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );controlbackground:EXPR( PR_YN!='Y' ? 'gray' : '#7bd7a3ff');controlborder:1 none #808080ff ;controlbordertype:round 10 10 ;"/>
                      <Cell col="3" displaytype="text" style="align:center;linetype:onlyhorz;background:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : 'default');background2:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : 'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ITEM_CODE"/>
                      <Cell col="4" edittype="expr:gfn_isNull(IMG_PATH) ? 'none' : 'expand'" style="align:left;background:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : 'default');background2:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : 'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" expandshow="expr:gfn_isNull(IMG_PATH) ? 'hide' : 'show'" expandsize="24" expandimage="URL('theme://Images/new/grd_WF_Camerabtn.png')"/>
                      <Cell col="5" displaytype="text" style="align:left;background:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : 'default');background2:EXPR(PR_YN == 'A' ? '#a9a9a932' :PR_YN == 'B' ? '#ffaa9cff' : PR_YN == 'C' ? 'khaki' : 'default');color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );backgroundimage: ;" text="bind:ITEM_NAME"/>
                      <Cell col="6" displaytype="image" style="background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:FEATURE_NAME"/>
                      <Cell col="7" displaytype="text" style="align:left;padding:0 0 0 5;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ITEM_SIZE"/>
                      <Cell col="8" displaytype="text" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:PO_UOM"/>
                      <Cell col="9" displaytype="text" style="align:center;padding:0 0 0 5;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ORIGIN_TYPE"/>
                      <Cell col="10" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:MARGIN_PRICE"/>
                      <Cell col="11" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:KG_QTY"/>
                      <Cell col="12" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:ONHAND_QTY"/>
                      <Cell col="13" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:PR_QTY" mask="#,##0.0#"/>
                      <Cell col="14" displaytype="number" style="align:right;padding:0 5 0 0;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:TOT_AMT"/>
                      <Cell col="15" displaytype="combo" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:TAX_CODE" combodataset="ds_tax" combocodecol="code" combodatacol="code_name"/>
                      <Cell col="16" displaytype="text" style="align:center;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:CENTER_FLAG"/>
                      <Cell col="17" text="bind:MD_NAME"/>
                      <Cell col="18" displaytype="text" edittype="normal" style="align:left;padding:0 0 0 5;background:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );background2:EXPR(PR_YN == 'Y' ? 'default' : '#a9a9a932' );color:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );color2:EXPR(PR_YN == 'Y' ? 'default' : 'gray' );" text="bind:PR_REMARK"/>
                    </Band>
                  </Format>
                </Formats>
              </Grid>
              <Static id="Static28" text="삭제된 자재리스트" class="sta_WF_Title01" position="absolute 0 0 450 18" anchor="left top"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static02" position="absolute 683 92 698 107" style="background:khaki;" anchor="top right"/>
        <Static id="Static10" text="금지자재" position="absolute 703 90 776 111" anchor="top right"/>
        <Static id="Static68" text="경유구분 ( TC : 업체재고, DC : 센터재고, VC : 직송 )" class="sta_WF_DiscInfo" position="absolute 872 54 1230 69" anchor="top right"/>
        <Static id="Static3" text="불용자재" position="absolute 622 90 695 111" anchor="top right"/>
        <Static id="Static1" position="absolute 603 92 618 107" anchor="top right" style="background:#ffaa9cff;"/>
        <CheckBox id="chk_cheap_yn" taborder="36" text="저렴자재체크" position="absolute 766 89 876 109" onchanged="chk_cheap_yn_onchanged" anchor="top right"/>
        <Button id="btn_dupItem" taborder="37" text="중복자재" class="btn_WF_Function" position="absolute 894 86 959 107" visible="false" onclick="btn_dupItem_onclick"/>
        <Static id="Static11" text="대표자재" position="absolute 542 90 615 111" anchor="top right"/>
        <Static id="Static16" position="absolute 523 92 538 107" anchor="top right" style="background:deepskyblue;"/>
        <Button id="btn_ZeroAll" taborder="38" tabstop="false" text="일괄삭제" onclick="btn_ZeroAll_OnClick" class="btn_WF_Custom" position="absolute 960 86 1020 107" anchor="top right" userdata="1"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_condi" useclientlayout="true">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="TYPE" type="STRING" size="256"/>
          <Column id="PR_SABUN" type="STRING" size="256"/>
          <Column id="PR_DEPT_ID" type="STRING" size="256"/>
          <Column id="PO_TYPE" type="STRING" size="256"/>
          <Column id="PO_TYPE_NM" type="STRING" size="256"/>
          <Column id="PR_UPJANG" type="STRING" size="256"/>
          <Column id="PR_UPJANG_NM" type="STRING" size="256"/>
          <Column id="RC_UPJANG" type="STRING" size="256"/>
          <Column id="RC_UPJANG_NM" type="STRING" size="256"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="128"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="128"/>
          <Column id="PR_NUM" type="STRING" size="256"/>
          <Column id="APPROVE_NUM" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="SORT_TYPE" type="STRING" size="256"/>
          <Column id="STATUS" type="STRING" size="256"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_potype">
        <ColumnInfo>
          <Column id="PO_TYPE" size="8" type="STRING"/>
          <Column id="TYPE_NAME" size="50" type="STRING"/>
          <Column id="D_DAYS" size="256" type="STRING"/>
          <Column id="D_TIMES" size="256" type="STRING"/>
          <Column id="PR_FLAG" size="256" type="STRING"/>
          <Column id="PR_APPROVE_FLAG" size="256" type="STRING"/>
          <Column id="PO_FLAG" size="256" type="STRING"/>
          <Column id="PO_APPROVE_FLAG" size="256" type="STRING"/>
          <Column id="PO_CLOSING_FLAG" size="256" type="STRING"/>
          <Column id="ORD_FLAG" size="256" type="STRING"/>
          <Column id="RC_FLAG" size="256" type="STRING"/>
          <Column id="RC_APPROVE_FLAG" size="256" type="STRING"/>
          <Column id="AP_FLAG" size="256" type="STRING"/>
          <Column id="AP_APPROVE_FLAG" size="256" type="STRING"/>
          <Column id="PAST_FLAG" size="256" type="STRING"/>
          <Column id="CONTRACT_FLAG" size="256" type="STRING"/>
          <Column id="SUBINV_FLAG" size="256" type="STRING"/>
          <Column id="BUDGET_FLAG" size="256" type="STRING"/>
          <Column id="CONTRACT_TABLE" size="256" type="STRING"/>
          <Column id="PR_FORM" size="256" type="STRING"/>
          <Column id="BUDCLS_FLAG" size="256" type="STRING"/>
          <Column id="MINUS_FLAG" size="256" type="STRING"/>
          <Column id="PREORDER_FLAG" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_subinv">
        <ColumnInfo>
          <Column id="SUBINV_CODE" size="20" type="STRING"/>
          <Column id="SUBINV_NAME" size="100" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_menu_item">
        <ColumnInfo>
          <Column id="CORNER_NAME" size="100" type="STRING"/>
          <Column id="HALL_NAME" size="50" type="STRING"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="MEAL_NAME" size="100" type="STRING"/>
          <Column id="MENU_DATE" size="8" type="STRING"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="TOT_NEED_QTY" size="22" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tax">
        <ColumnInfo>
          <Column id="code" size="256" type="STRING"/>
          <Column id="code_name" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="code">100</Col>
            <Col id="code_name">과세</Col>
          </Row>
          <Row>
            <Col id="code">210</Col>
            <Col id="code_name">면세</Col>
          </Row>
          <Row>
            <Col id="code">220</Col>
            <Col id="code_name">영세</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_pr_item" oncolumnchanged="ds_pr_item_OnColumnChanged" updatecontrol="true">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="STRING" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
          <Column id="DUP_YN" type="STRING" size="256"/>
          <Column id="D_DAY_TXT" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
          <Column id="MD_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_del_item">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
          <Column id="MD_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_InsItem">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_add_itam">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pr_itemTmp" oncolumnchanged="ds_pr_item_OnColumnChanged">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
          <Column id="DUP_YN" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condi_popup" useclientlayout="true">
        <ColumnInfo>
          <Column id="ITEM_CLASS4" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="UPJANG" type="STRING" size="256"/>
          <Column id="AP_UNITPRICE_UPJANG" type="STRING" size="256"/>
          <Column id="CENTER_CODE" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_save_out" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_dup_item" oncolumnchanged="ds_pr_item_OnColumnChanged" updatecontrol="true">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="STRING" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_recUpjang" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false"/>
      <Dataset id="ds_line_status" firefirstcount="0" firenextcount="0" useclientlayout="true" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="GROUP_NAME" type="STRING" size="100"/>
          <Column id="GROUP_CODE" type="STRING" size="50"/>
          <Column id="CODE" type="STRING" size="50"/>
          <Column id="CODE_NAME" type="STRING" size="500"/>
          <Column id="CONTENTS" type="STRING" size="300"/>
          <Column id="SORT_SEQ" type="BIGDECIMAL" size="39"/>
          <Column id="SYSTEM_YN" type="STRING" size="1"/>
          <Column id="SET1" type="STRING" size="100"/>
          <Column id="SET2" type="STRING" size="100"/>
          <Column id="SET3" type="STRING" size="100"/>
          <Column id="SET4" type="STRING" size="100"/>
          <Column id="SET5" type="STRING" size="100"/>
          <Column id="REMARK" type="STRING" size="300"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="ATTR01" type="STRING" size="300"/>
          <Column id="ATTR02" type="STRING" size="300"/>
          <Column id="ATTR03" type="STRING" size="300"/>
          <Column id="ATTR04" type="STRING" size="300"/>
          <Column id="ATTR05" type="STRING" size="300"/>
          <Column id="ATTR06" type="STRING" size="300"/>
          <Column id="ATTR07" type="STRING" size="300"/>
          <Column id="ATTR08" type="STRING" size="300"/>
          <Column id="ATTR09" type="STRING" size="300"/>
          <Column id="ATTR10" type="STRING" size="300"/>
          <Column id="CUSER" type="STRING" size="20"/>
          <Column id="CDATE" type="DATETIME" size="7"/>
          <Column id="UUSER" type="STRING" size="20"/>
          <Column id="UDATE" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pr_item2" oncolumnchanged="ds_pr_item_OnColumnChanged" updatecontrol="true">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="STRING" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
          <Column id="DUP_YN" type="STRING" size="256"/>
          <Column id="D_DAY_TXT" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
          <Column id="MD_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_del_item2">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
          <Column id="MD_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condi2" useclientlayout="true">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="TYPE" type="STRING" size="256"/>
          <Column id="PR_SABUN" type="STRING" size="256"/>
          <Column id="PR_DEPT_ID" type="STRING" size="256"/>
          <Column id="PO_TYPE" type="STRING" size="256"/>
          <Column id="PO_TYPE_NM" type="STRING" size="256"/>
          <Column id="PR_UPJANG" type="STRING" size="256"/>
          <Column id="PR_UPJANG_NM" type="STRING" size="256"/>
          <Column id="RC_UPJANG" type="STRING" size="256"/>
          <Column id="RC_UPJANG_NM" type="STRING" size="256"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="128"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="128"/>
          <Column id="PR_NUM" type="STRING" size="256"/>
          <Column id="APPROVE_NUM" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="SORT_TYPE" type="STRING" size="256"/>
          <Column id="STATUS" type="STRING" size="256"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_pr_item3" oncolumnchanged="ds_pr_item_OnColumnChanged" updatecontrol="true">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="STRING" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
          <Column id="DUP_YN" type="STRING" size="256"/>
          <Column id="D_DAY_TXT" type="STRING" size="256"/>
          <Column id="LINE_STATUS" type="STRING" size="256"/>
          <Column id="MD_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_condi3" useclientlayout="true">
        <ColumnInfo>
          <Column id="EXPT_UPJANG_YN" type="STRING" size="256"/>
          <Column id="APPROV_YN" type="STRING" size="256"/>
          <Column id="TYPE" type="STRING" size="256"/>
          <Column id="PR_SABUN" type="STRING" size="256"/>
          <Column id="PR_DEPT_ID" type="STRING" size="256"/>
          <Column id="PO_TYPE" type="STRING" size="256"/>
          <Column id="PO_TYPE_NM" type="STRING" size="256"/>
          <Column id="PR_UPJANG" type="STRING" size="256"/>
          <Column id="PR_UPJANG_NM" type="STRING" size="256"/>
          <Column id="RC_UPJANG" type="STRING" size="256"/>
          <Column id="RC_UPJANG_NM" type="STRING" size="256"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="128"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="128"/>
          <Column id="PR_NUM" type="STRING" size="256"/>
          <Column id="APPROVE_NUM" type="STRING" size="256"/>
          <Column id="PR_DATE" type="STRING" size="256"/>
          <Column id="NEED_DATE" type="STRING" size="256"/>
          <Column id="SUBINV_CODE" type="STRING" size="256"/>
          <Column id="SORT_TYPE" type="STRING" size="256"/>
          <Column id="STATUS" type="STRING" size="256"/>
          <Column id="REASON_CD" type="STRING" size="256"/>
          <Column id="PR_REASON" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_del_item3">
        <ColumnInfo>
          <Column id="PR_NUM" type="STRING" size="255"/>
          <Column id="PR_ID" type="STRING" size="255"/>
          <Column id="ITEM_CODE" type="STRING" size="18"/>
          <Column id="ITEM_NAME" type="STRING" size="601"/>
          <Column id="ITEM_CLASS3" type="STRING" size="18"/>
          <Column id="ITEM_CLASS4" type="STRING" size="18"/>
          <Column id="FEATURE_NAME" type="STRING" size="4000"/>
          <Column id="ITEM_SIZE" type="STRING" size="1000"/>
          <Column id="PO_UOM" type="STRING" size="18"/>
          <Column id="KG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="ONHAND_QTY" type="BIGDECIMAL" size="22"/>
          <Column id="CANCEL_PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="TOT_AMT" type="BIGDECIMAL" size="39"/>
          <Column id="G_ITEM_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="TAX_CODE" type="STRING" size="3"/>
          <Column id="CENTER_FLAG" type="STRING" size="1"/>
          <Column id="PR_REMARK" type="STRING" size="255"/>
          <Column id="REMARK" type="STRING" size="256"/>
          <Column id="POINT_FLAG" type="STRING" size="1"/>
          <Column id="SUBINV_CODE" type="STRING" size="8"/>
          <Column id="NEED_DATE" type="STRING" size="8"/>
          <Column id="UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="DEPT_ID" type="STRING" size="6"/>
          <Column id="ACCTCD" type="STRING" size="18"/>
          <Column id="BUD_CLS" type="STRING" size="30"/>
          <Column id="MU_CD" type="STRING" size="4"/>
          <Column id="INVAT_FLAG" type="STRING" size="1"/>
          <Column id="OUTVAT_FLAG" type="STRING" size="1"/>
          <Column id="MIN_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="MAX_ORD_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="CENTER_CODE" type="STRING" size="18"/>
          <Column id="STOCK_FLAG" type="STRING" size="1"/>
          <Column id="BARCODE" type="STRING" size="60"/>
          <Column id="MULTIPLIER_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="BUDDEPT_ID" type="STRING" size="30"/>
          <Column id="USE_YN" type="STRING" size="1"/>
          <Column id="CONTRACT_YN" type="STRING" size="1"/>
          <Column id="MARGIN_PRICE" type="STRING" size="40"/>
          <Column id="UNIT_PRICE" type="BIGDECIMAL" size="39"/>
          <Column id="CUSTCD" type="BIGDECIMAL" size="39"/>
          <Column id="CHEAP_YN" type="STRING" size="1"/>
          <Column id="KG_CONVERT_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="MARGIN_RATE" type="BIGDECIMAL" size="39"/>
          <Column id="AP_UNITPRICE_UPJANG" type="BIGDECIMAL" size="39"/>
          <Column id="RESTRICT_PERIOD" type="STRING" size="21"/>
          <Column id="RESTRICT_REASON" type="STRING" size="200"/>
          <Column id="DUTY_END_DATE" type="STRING" size="255"/>
          <Column id="MIN_DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="DUTY_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="REAL_USE_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="PR_YN" type="STRING" size="255"/>
          <Column id="SHP_MAP" type="STRING" size="1"/>
          <Column id="MTG_UNS" type="STRING" size="1"/>
          <Column id="MTG_STP" type="STRING" size="1"/>
          <Column id="REQ_WKD" type="STRING" size="1"/>
          <Column id="SCH" type="STRING" size="1"/>
          <Column id="D_DAY" type="BIGDECIMAL" size="39"/>
          <Column id="D_DAYS" type="BIGDECIMAL" size="39"/>
          <Column id="D_TIMES" type="BIGDECIMAL" size="39"/>
          <Column id="SPICE_YN" type="STRING" size="1"/>
          <Column id="CORN_YN" type="STRING" size="1"/>
          <Column id="IMG_PATH" type="STRING" size="756"/>
          <Column id="ORIGIN_NAT" type="STRING" size="60"/>
          <Column id="ORIGIN_TYPE" type="STRING" size="60"/>
          <Column id="VD_SN" type="STRING" size="18"/>
          <Column id="APPLY_SD" type="STRING" size="8"/>
          <Column id="MOBILE_GUBUN" type="STRING" size="1"/>
          <Column id="AGG_QTY" type="BIGDECIMAL" size="39"/>
          <Column id="UPJANG_GRP" type="STRING" size="256"/>
          <Column id="IS_ENF" type="BIGDECIMAL" size="256"/>
          <Column id="SCH_INFO" type="STRING" size="256"/>
          <Column id="MD_NAME" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="msk_pr_date" propid="value" datasetid="ds_condi" columnid="PR_DATE"/>
      <BindItem id="item1" compid="msk_need_date" propid="value" datasetid="ds_condi" columnid="NEED_DATE"/>
      <BindItem id="item2" compid="cbo_subInv" propid="value" datasetid="ds_condi" columnid="SUBINV_CODE"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 ******************************************************************************************
 * 시스템구분   : 구매관리 / 신청관리 / 구매신청(자동 식단)
 * 프로그램명   : FSP00032E
 * 기      능   : 구매신청(자동 식단)
 * 작  성  자   : 정영철
 * 작성  일자   : 2015-06-04
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "U_lib::lib_conversionCom.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_PoItemName = "";     // 오류 자재명
var fv_closeRamak = "";		//

var curRw = 0;
var curCell = 0;

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 로드시 이벤트
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{
    gfn_formOnLoad(this);

    fsp_init(this);

    fn_PoCommon();

    // 부모창 데이터셋 복사
    ds_condi.copyData(opener.ds_condi);

	// 권장식단대상업장 조회
	fn_getRecUpjang();

    // 창고조회
    fn_search_subinv();

    // 화면 초기화
    fn_init();
    
    // 공통코드
	v_ds = fn_common_code("'FM0037'","","","non", "Y");

	//진행상태
	v_fil_cond = "GROUP_CODE == 'FM0037' && (SET1 == 'FS' || CODE_NAME == '전체')";	
	v_ds.filter(v_fil_cond);
	CopyF(ds_line_status,v_ds.name);
	//alert(ds_condi.getColumn(0,"TYPE"));
}

function fn_init()
{
    cbo_subInv.setFocus();
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 해당업장 창고조회
 *---------------------------------------------------------------------------------------------*/
function fn_search_subinv()
{
    var sSvcID;         // 서비스 ID
    var sUrl;           // jsp 경로
    var sInDs;          // 입력 데이터셋
    var sOutDs;         // 출력 데이터셋
    var sArg;           // 추가 파라미터
    var sCallFunc;      // 콜백함수명


    sSvcID    = "SEARCH_SUBINV";
    sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T001.jsp";
    sInDs     = "ds_condi=ds_condi";
    sOutDs    = "ds_subinv=ds_out";
    sCallFunc = "fn_transation_callback";

    // 트랜잭션
    jsp_transaction(this, sSvcID, sUrl, sInDs, sOutDs, sArg, sCallFunc, false, false, false);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 조회
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
    if (ds_condi.getColumn(0,"TYPE") <> "NEW")
        if (! g_Confirm("04","재조회 시 신청되지 않은 자재를 식단자료에서 다시 불러옵니다.\n이미 구매신청된 자재는 조회되지 않습니다.\n계속하시겠습니까?")) return;

    ds_pr_itemTmp.clearData();

    var sSvcID;         // 서비스 ID
    var sUrl;           // jsp 경로
    var sInDs;          // 입력 데이터셋
    var sOutDs;         // 출력 데이터셋
    var sArg;           // 추가 파라미터
    var sCallFunc;      // 콜백함수명

    sSvcID    = "SEARCH";
    sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T002.jsp";
    sInDs     = "ds_condi=ds_condi";
    sOutDs    = "ds_pr_itemTmp=ds_pr_itemTmp ds_dup_item=ds_dup_item";
    sCallFunc = "fn_transation_callback";

    // 트랜잭션
    jsp_transaction(this, sSvcID, sUrl, sInDs, sOutDs, sArg, sCallFunc, false, false, false);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신청서 재작성&수정시 기존 내역 조회
 *---------------------------------------------------------------------------------------------*/
function fn_search_prlist()
{
    if(!fn_CheckCloseYN()) return;

    ds_pr_item.clearData();
    ds_del_item.clearData();

    var sSvcID;         // 서비스 ID
    var sUrl;           // jsp 경로
    var sInDs;          // 입력 데이터셋
    var sOutDs;         // 출력 데이터셋
    var sArg;           // 추가 파라미터
    var sCallFunc;      // 콜백함수명

    sSvcID    = "PR_SEARCH";
    sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T009.jsp";
    sInDs     = "ds_condi=ds_condi";
    sOutDs    = "ds_pr_item=ds_pr_item ds_del_item=ds_del_item";
    sCallFunc = "fn_transation_callback";

    // 트랜잭션
    jsp_transaction(this, sSvcID, sUrl, sInDs, sOutDs, sArg, sCallFunc, false, false, false);
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_save
 * 기      능   : 구매신청 확정
*----------------------------------------------------------------------------------------------*/
function fn_save()
{	
    // 신규가 아닐경우 변경 데이터에 대해 체크
	if(!gfn_dsIsUpdated(ds_pr_item) && ds_condi.getColumn(0,"TYPE") <> "NEW") 
	{	
		//취소재작성인 경우 변경된 내역이 없어도 그대로 확정처리 가능하도록 수정 2018.02.02 김호석(이혜은과장요청)
		if (!ds_condi.getColumn(0, "TYPE") == "CANCEL_UPDATE") {
			g_Message("EE", "변경된 데이터가 없습니다.");
			return false;	
		}
	}

    if(!g_Confirm("02", "신청자료를 확정하시겠습니까?")) return;

    //신청서 수정 중 결의 작업이 진행되었는지 확인87 
    if(ds_condi.getColumn(0,"TYPE") <> "NEW") {
        if(!fn_CheckPoYN(ds_condi.getColumn(0,"PR_NUM"))){
            return;
        }        
		
		//배송중 여부 점검 2017.11.27 김호석 추가(신청서수정 중 배송중처리 되는 경우 체크)
		if(!fn_CheckDLYN()){				
			ds_pr_item.filter("");
			fn_search_prlist();
			return false;
		}
		
		//발주취소 및 취소 여부 점검 2018.03.13 김호석 추가
		if(!fn_CheckPDYN()){				
			ds_pr_item.filter("");
			fn_search_prlist();
			return false;
		}
        
    }
	
	//수량 0인건은 삭제상태로 변경 20171201 김호석 추가 오류수정 선조치
	/*
    for(var i=0; i < ds_pr_item.rowcount; i++){
		
		if(ds_pr_item.getColumn(i, "PR_QTY") == "0"){
			//alert(ds_pr_item.getColumn(i, "ITEM_NAME"))
			var nAddRow = 0;
			nAddRow = ds_del_item.addRow();
			ds_del_item.copyRow(nAddRow, ds_pr_item, i);
			ds_del_item.setColumn(nAddRow, "REMARK", "수량 0 삭제");
			ds_pr_item.deleteRow(i);
			
		}
	}
	*/

    var sSvcID;         // 서비스 ID
    var sUrl;           // jsp 경로
    var sInDs;          // 입력 데이터셋
    var sOutDs;         // 출력 데이터셋
    var sArg;           // 추가 파라미터
    var sCallFunc;      // 콜백함수명

    sSvcID    = "SAVE";

    sOutDs    = "ds_save_out=ds_save_out";
    sCallFunc = "fn_transation_callback";

	trace('TYPE = ' + ds_condi.getColumn(0,"TYPE"));
    if(ds_condi.getColumn(0,"TYPE") <> "UPDATE") {
        sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T007.jsp";
        sInDs     = "ds_pr_item=ds_pr_item:A ds_del_item=ds_del_item ds_condi=ds_condi";
    }else{
        sUrl      = "U_svc::" + "fs/fsp/FSP00032E_T012.jsp";
        sInDs     = "ds_pr_item=ds_pr_item:A ds_del_item=ds_del_item ds_condi=ds_condi";
    }

    if(!fn_transation_validation(sSvcID)) return;

    ds_condi.setColumn(0, "STATUS", "002");
    sArg = "p_mobile_gubun="+ wrapQuote("P");

    // 트랜잭션
    jsp_transaction(this, sSvcID, sUrl, sInDs, sOutDs, sArg, sCallFunc, false, false, false);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 콜백함수
 *---------------------------------------------------------------------------------------------*/
function fn_transation_callback(nErrorCode, sErrorMag, sSvcID)
{
    var sResult = "";
    var sMsg    = "";
    //if(nErrorCode != 0) {return ;}

    switch(sSvcID)
    {
        case "SEARCH_SUBINV" :


            var sType  = ds_condi.getColumn(0, "TYPE");
            var sPrNum = ds_condi.getColumn(0, "PR_NUM");


            if(ds_subinv.rowcount < 1)
             {
                var nRow = ds_subinv.addRow();
                ds_subinv.setColumn(nRow, "SUBINV_NAME" , "※ 등록된 창고가 없습니다.");
                ds_subinv.setColumn(nRow, "SUBINV_CODE" , "NULL");
                btn_Search.enable    = false;
                btn_Save.enable      = false;
                btn_AddItem.enable   = false;
                btn_Zero.enable      = false;
                //btn_DelItem.enable   = false;
                //btn_CheapItem.enable = false;
                cbo_subInv.index     = 0;
                return false;
             }
             cbo_subInv.index     = 0;
            //식단 신청 수정일 경우
            if(sType <> "NEW")
            {
                //구매신청 번호 황목 추가로 보여줄 것
                sta_list_title.text = "구매신청번호 : " + sPrNum;
                cbo_subInv.enable = false;
                
                //신규가 아닌경우 창고코드를 기존의 pr창고로 셋팅 - 최학진
                cbo_subInv.value = opener.ds_condi.getColumn(0,'SUBINV_CODE');

                fn_search_prlist();
            }
            break;

        case "SEARCH" :

            // 중복자재가 존재할 경우 중복자재 버튼 활성화
            //trace(ds_dup_item.rowcount);
            //trace(ds_pr_itemTmp.saveXML());
            if(ds_dup_item.rowcount > 0)
            {
				btn_dupItem.visible = true;
            }
            else
            {
				btn_dupItem.visible = false;
            }
            
            if(ds_pr_itemTmp.rowcount < 1)
            {
                g_Message("EE",'조회된 자료가 없습니다.');
                return;
            }

            // 재작성일경우 조회된 추가자재를 추가
            if (ds_condi.getColumn(0,"TYPE") <> "NEW")
            {

                var nAddRow= 0;
                for(var i=0; i < ds_pr_itemTmp.rowcount; i++)
                {
                    nAddRow = ds_pr_item.addRow();
                    ds_pr_item.copyRow(nAddRow, ds_pr_itemTmp, i);
                }
            }
            else
            {
                ds_pr_item.copyData(ds_pr_itemTmp);
            }

			for(var i=0;i<ds_pr_item.rowcount; i++)
			{
				ds_pr_item.setColumn(i, "D_DAY_TXT", 'D-' + ds_pr_item.getColumn(i, 'D_DAY') + ' ' + (ds_pr_item.getColumn(i, 'D_TIMES') <10 ? 0 :'') + ds_pr_item.getColumn(i, 'D_TIMES') + '시');
			}

            //식단 불러온 후 창고 수정 불가 및 재조회 불가
            cbo_subInv.enable = false;
            btn_Search.enable = false;
            break;

        case "PR_SEARCH" :
            if(nErrorCode != 0)
            {
                g_Message("EE", sErrorMag);
                return;
            }

            if ((ds_pr_item.rowcount + ds_del_item.rowcount) < 1)
            {
                g_Message("EE",'조회된 자료가 없습니다.');
                return;
            }

            //신청서 불러온 후 창고 수정 불가
            cbo_subInv.enable = false;

			ds_pr_item.updatecontrol = false;
			for(var i=0;i<ds_pr_item.rowcount; i++)
			{
				ds_pr_item.setColumn(i, "D_DAY_TXT", 'D-' + ds_pr_item.getColumn(i, 'D_DAY') + ' ' + (ds_pr_item.getColumn(i, 'D_TIMES') <10 ? 0 :'') + ds_pr_item.getColumn(i, 'D_TIMES') + '시');
			}
			ds_pr_item.updatecontrol = true;

            break;

        case "SAVE" :
            if(toNumber(nErrorCode) == 0){
                if(gfn_length(gfn_trim(fv_PoItemName))!= 0){
                    var strMsg = "";
                    strMsg = " ※ 수정 불가!! 수정 중 일부 자재 구매 결의됨\n";
                    strMsg+= "    결의된 자재명 : " + fv_PoItemName;
                    g_Message("EE",strMsg);
                    return;
                }else if(gfn_length(gfn_trim(fv_closeRamak))!= 0)
				{
					sMsg = " ※ 신청서 확정 가능시간 초과\n";
					sMsg+= "    사유 : " + fv_closeRamak;
					g_Message("EE",sMsg);
					return;		
				}else{
                    g_Message("02","정상적으로 확정(저장)되었습니다.");
                    this.close("OK");
                }
            }else if(ds_save_out.rowcount >0){
                // 자재유효성체크에서 걸린 리스트
                var sRet = gfn_dialog("", "U_FSP::FSP00030P.xfdl", "", "", "", "", "", "", true, "", "", false);
            }else{
                g_Message("EE","저장 중 오류가 발생했습니다.\n에러메세지:" + sErrorMag);
            }

            break;
    }
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_transation_validation()
 * 기      능   : 조회 전 유효성체크
*----------------------------------------------------------------------------------------------*/
function fn_transation_validation(sSvcID)
{
    switch(sSvcID)
    {
        case "SEARCH_SUBINV" :
            break;

        case "SEARCH" :
            break;

        case "SAVE" :
            // 작성 내역 확인
            if(ds_pr_item.getCountNF() < 0){
                g_Message("EE","작성된 구매 신청 내역이 없습니다.");
                return false;
            }

            //발주 불가 자재 삭제 리스트로 이동
            var bConfirm = fn_MoveData();
            if(!bConfirm){return false;}

            ds_InsItem.clearData();
            if(ds_pr_item.getCaseCount("PR_QTY > 0")    < 1){
                g_Message("EE","구매신청내역중 확정이 가능한 자재가 없습니다.\n신청수량,발주가능여부등을 점검하시기 바랍니다.");
                return false;
            }

            // 구매신청수량이 0개인 자재 조회
            if(ds_pr_item.getCaseCount("PR_QTY <= 0")   > 0){
                g_Message("EE","단가계약이 안된 그룹레시피 필수자재가 존재합니다.\n단가계약, 신청수량,발주가능여부 등을 점검하시기 바랍니다.");
                return false;
            }

//             //D-Day 점검
//             if(!fn_CheckDateTime()) {
//                 return false;
//             }

            //마감 여부 점검
            if(!fn_CheckCloseYN()){
                return false;
            }

//             //선발주 점검,의무자재 제한 점검
//             if(!fn_CheckDutyAndPreOrder()){
//                 return false;
//             }
//             break;

    }

    return true;
}
/************************************************************************************************
 * Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 버튼별 클릭 이벤트
 *---------------------------------------------------------------------------------------------*/
function Common_Btn_common_OnClick(obj:Button, e:ClickEventInfo)
{
    switch(obj.name)
    {
        case "btn_Search":
            fn_search();
            break;
        case "btn_Save":
            fn_save();
            break;
        case "btn_Close":
            fn_Close();
            break;
        case "btn_Help":
            break;
        default:
            break;
    }
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_Close
 * 기      능   : 닫기 버튼 클릭 이벤트
*----------------------------------------------------------------------------------------------*/
function fn_Close()
{
    if(!fn_GetUpdate()) return;
    this.close();
}

 // 사용안함
 function fn_search_prlistYN()
 {
    if(!fn_Validation("")) return;

    var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;

    // 경로 설정
    strSvcID = "FSP00032E_T003";
    strURL   = "U_svc::" + "fs/fsp/FSP00032E_T003.jsp";

    // 데이터셋 설정
    strInDatasets = "";
    strOutDatasets = "";

    // 파라메터 설정
    strArgument  = "p_PoType=" + wrapQuote(dsPoType.getColumn(0,"FoodAutoFS"));
    strArgument += " p_PRCancel=" + wrapQuote(dsPoLineStatus.getColumn(0,"PRCancel"));
    strArgument += " p_PRApprove=" + wrapQuote(dsPoLineStatus.getColumn(0,"PRApprove"));
    strArgument += " p_SubinvCode=" + wrapQuote(cbo_subInv.value);
    strArgument += " p_NeedDate=" + wrapQuote(msk_need_date.value);

    // 콜백함수 지정
    strCallbackFunc = "fn_CallbackSearchPrYN";

    Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc);
 }


/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_CallbackSearchPrYN
 * 기      능   : 식단 구매신청 취소 이력 조회
*----------------------------------------------------------------------------------------------*/
var v_PrYN, v_PrCancelYN;
function fn_CallbackSearchPrYN()
{
    if(v_PrYN == "Y")
    {
        g_Message("EE"," ※ 구매신청 창고를 선택하세요.");
        return;
    }

    if(v_PrCancelYN == "Y")
    {
        if (g_Confirm("04", " ※ 식단 구매신청을 취소한 이력이 있습니다.\n\n"
                               +"  창    고 : " + cbo_subInv.text + "\n"
                               +"  입고일자 : " + msk_need_date.value + "\n"
                               +" 구매신청에 취소내역을 포함하시겠습니까?"
                     )
           )
           {
                v_PrCancelYN = "Y";
           }
           else
           {
                v_PrCancelYN = "N";
           }
    }

    fn_search(v_PrCancelYN);

}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_Validation(p_Type)
 * 기      능   : 기타 유효성 체크트랜잭션을 위한 유효성 검사
*----------------------------------------------------------------------------------------------*/
function fn_Validation(p_Type)
{

    // 필수 데이터 입력 점검(창고, 입고일)
    if( gfn_length(cbo_subInv.value)== 0 )
    {
        g_Message("EE"," ※ 구매신청 창고를 선택하세요.");
        cbo_subInv.setFocus();
        return false;
    }
    if( gfn_length(msk_need_date.value)== 0 )
    {
        g_Message("EE"," ※ 입고일자가 지정되지 않았습니다.");
        cbo_subInv.setFocus();
        return false;
    }

    return true;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_OpenPopupDiv(nRow, nCell, nTop, nLeft)
 * 기      능   : 식단 자재 내역
*----------------------------------------------------------------------------------------------*/
function fn_OpenPopupDiv(nRow, nCell, nTop, nLeft)
{
    var nCellRect = grd_PrItem.getCellRect(nRow, nCell); //left,right,top,bottom
    var nX1 = system.clientToScreenX(grd_PrItem, 0)
    var nY1 = system.clientToScreenY(grd_PrItem, nCellRect.top);

    pdiv_Menu.trackPopup(nX1+120, nY1+24);

}

// /*----------------------------------------------------------------------------------------------
//  * 함  수  명   : fn_CheckDutyAndPreOrder()
//  * 기      능   : 선발주 제한 및 의무자재 사용량 점검
// *----------------------------------------------------------------------------------------------*/
// function fn_CheckDutyAndPreOrder()
// {
//     var v_Msg;
// 
//     var f_CurrDateTime = fn_CurrDateWeek("ymdtm");
// 
//     for(var i = 0; i < ds_pr_item.getRowCount(); i++)
//     {
//         if( (toNumber(ds_pr_item.getColumn(i,"DUTY_QTY")) > 0) && (toNumber(ds_pr_item.getColumn(i,"DUTY_QTY")) < toNumber(ds_pr_item.getColumn(i,"REAL_USE_QTY")) + toNumber(ds_pr_item.getColumn(i,"PR_QTY"))) )
//         {
// 
//             v_Msg  = " ※ 의무사용량 초과!! \n\n";
//             v_Msg += "    자  재  명 : " + ds_pr_item.getColumn(i,"ITEM_NAME") + "\n";
//             v_Msg += "    의무사용량 : " + gfn_toString(ds_pr_item.getColumn(i,"DUTY_QTY"))+ ds_pr_item.getColumn(i,"PO_UOM") + "\n";
//             v_Msg += "    기간신청량 : " + gfn_toString(toNumber(ds_pr_item.getColumn(i,"REAL_USE_QTY")) + toNumber(ds_pr_item.getColumn(i,"PR_QTY")))+ ds_pr_item.getColumn(i,"PO_UOM");
// 
//             g_Message("EE",v_Msg);
//             return false;
//         }
//         else if( (ds_pr_item.getColumn(i,"NEED_DATE") == ds_pr_item.getColumn(i,"DUTY_END_DATE")) && (toNumber(ds_pr_item.getColumn(i,"MIN_DUTY_QTY")) > 0) && (toNumber(ds_pr_item.getColumn(i,"MIN_DUTY_QTY")) > toNumber(ds_pr_item.getColumn(i,"REAL_USE_QTY")) + toNumber(ds_pr_item.getColumn(i,"PR_QTY"))) )
//         {
// 
//             v_Msg  = " ※ 의무사용량 미달!! \n\n";
//             v_Msg += "    자  재  명 : " + ds_pr_item.getColumn(i,"ITEM_NAME") + "\n";
//             v_Msg += "    최소의무사용량 : " + gfn_toString(ds_pr_item.getColumn(i,"MIN_DUTY_QTY"))+ ds_pr_item.getColumn(i,"PO_UOM") + "\n";
//             v_Msg += "    기간신청량 : " + gfn_toString(toNumber(ds_pr_item.getColumn(i,"REAL_USE_QTY")) + toNumber(ds_pr_item.getColumn(i,"PR_QTY")))+ ds_pr_item.getColumn(i,"PO_UOM");
// 
//             g_Message("EE",v_Msg);
//             return false;
//         }
//     }
// 
//     return true;
// }

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_CheckCloseYN()
 * 기      능   : 수불마감 및 재고마감 점검 (2015.10.27 PI의견:주석처리)
*----------------------------------------------------------------------------------------------*/
var v_SubulCloseYN, v_JaegoCloseYN;
function fn_CheckCloseYN()
{
    if(!fn_Validation("")) return false;

    var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;

    // 경로 설정
    strSvcID = "FSP000000_T001";
    strURL   = "U_svc::" + "fs/fsp/FSP000000_T001.jsp";

    // 데이터셋 설정
    strInDatasets = "";
    strOutDatasets = "";

    // 파라메터 설정
    strArgument  = "p_SubinvCode=" + wrapQuote(cbo_subInv.value);
    strArgument += " p_NeedDate=" + wrapQuote(msk_need_date.value);

    // 콜백함수 지정
    strCallbackFunc = "";

    http.Sync = true;
    Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc);
    http.Sync = false;

    var strMsg;

    if(v_SubulCloseYN <> "N")
    {
        strMsg = " ※ 구매신청 불가!! 수불 마감 완료 창고\n";
        strMsg+= "    마감월 : " + v_SubulCloseYN;

        g_Message("EE",strMsg);
        return false;
    }

    if(v_JaegoCloseYN <> "N")
    {
        strMsg = " ※ 구매신청 불가!! 재고 반영 완료 창고\n";
        strMsg+= "    재고반영일 : " + v_JaegoCloseYN;

        g_Message("EE",strMsg);
        return false;
    }

    return true;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_CheckPoYN()
 * 기      능   : 신청서 수정 중 결의 여부 점검
*----------------------------------------------------------------------------------------------*/
var v_ItemName;
function fn_CheckPoYN(strPrNum)
{
    var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;

    // 경로 설정
    strSvcID = "FSP00032E_T008";
    strURL   = "U_svc::" + "fs/fsp/FSP00032E_T008.jsp";

    // 데이터셋 설정
    strInDatasets = "dsPoLineStatus=dsPoLineStatus";
    strOutDatasets = "";

    // 파라메터 설정
    strArgument  = "p_PrNum=" + wrapQuote(strPrNum);

    // 콜백함수 지정
    strCallbackFunc = "";

    http.Sync = true;
    Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc);
    http.Sync = false;

    var strMsg;

    if(gfn_length(v_ItemName)!= 0)
    {
        strMsg = " ※ 구매신청 불가!! 신청서 수정 중 일부 자재 구매 결의됨\n";
        strMsg+= "    결의된 자재명 : " + v_ItemName;
        g_Message("EE",strMsg);
        return false;
    }

    return true;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_CheckDateTime()
 * 기      능   : 구매유형별 신청수정가능 시간, 날짜 체크
*----------------------------------------------------------------------------------------------*/
function fn_CheckDateTime()
{
    //구매유형 재조회(디데이 설정등이 바뀌었을 수 있다.)
    //fn_SearchPoType();
    //
    if(ds_potype.getColumn(0, "D_DAYS") == "0") return true;

    var f_CurrDateTime = fn_CurrDateWeek("ymdtm");

    if( dateTime(msk_need_date.value)< dateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(ds_potype.getColumn(0, "D_DAYS")))))
    {
        var v_Msg;
        v_Msg  = " ※ 현재 입고일로는 구매신청할 수 없습니다. \n\n";
        v_Msg += "    구 매  유 형 : " + ds_potype.getColumn(0, "TYPE_NAME") + "\n";
        v_Msg += "    현 재  시 간 : " + fn_FormatDateTime(f_CurrDateTime) + "\n";
        v_Msg += "    신청가능일자 : " + fn_FormatDateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(ds_potype.getColumn(0, "D_DAYS")))) + " (D_DAY=" + ds_potype.getColumn(0, "D_DAYS") + "일" + ds_potype.getColumn(0, "D_TIMES") + "시) \n";

        g_Message("EE",v_Msg);

        return false;
    }

    if( dateTime(msk_need_date.value)== dateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(ds_potype.getColumn(0, "D_DAYS")))))
    {
        if(toNumber(ds_potype.getColumn(0, "D_TIMES")) == 0) return true;
        if( toNumber(gfn_subStr(f_CurrDateTime,8,2)) >= toNumber(ds_potype.getColumn(0, "D_TIMES")))
        {
            var v_Msg;
            v_Msg  = " ※ 현재 시간은 구매신청할 수 없습니다. \n\n";
            v_Msg += "    구 매  유 형 : " + ds_potype.getColumn(0, "TYPE_NAME") + "\n";
            v_Msg += "    현 재  시 간 : " + fn_FormatDateTime(f_CurrDateTime) + "\n";
            v_Msg += "    신청가능일시 : " + fn_FormatDateTime(gfn_addDate(gfn_subStr(f_CurrDateTime,0,8),toNumber(ds_potype.getColumn(0, "D_DAYS")))) + " " + ds_potype.getColumn(0, "D_TIMES") + "시 (D_DAY=" + ds_potype.getColumn(0, "D_DAYS") + "일" + ds_potype.getColumn(0, "D_TIMES") + "시) \n";
            g_Message("EE",v_Msg);
            return false;
        }
    }

    return true;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_GetUpdate()
 * 기      능   : 미저장 데이터 여부체크
*----------------------------------------------------------------------------------------------*/
function fn_GetUpdate()
{
    if(gfn_dsIsUpdated(ds_pr_item)== true)
    {
        if(!g_Confirm("02", "미저장 데이터가 있습니다.\n계속하시겠습니까?"))
        {
            return false;
        }
        else
        {
            return true;
        }
    }
    else
        return true;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_MoveData()
 * 기      능   : 구매신청전 신청리스트에서 구매불가자재들 자동 삭제(신청수량이 0인건, 미계약건, 요일제한 건 등등,,,)
*----------------------------------------------------------------------------------------------*/
function fn_MoveData()
{
    var sMsg = "";
    var nCnt = 0;
    
    if( ds_recUpjang.getColumn(0, "USE_YN") == "Y" )
    {
		nCnt = ds_pr_item.getCaseCount("PR_QTY == 0 && IS_ENF == 0 && IS_REC == 0");

		sMsg  = " ※ 신청량이 0개인 자재는 삭제리스트에 등록이 됩니다.\n";
		sMsg += "    (그룹레시피 필수자재, 권장식단 대표자재 제외)\n\n";
		sMsg += "    진행 하시겠습니까?";
    }
    else
    {
		nCnt = ds_pr_item.getCaseCount("PR_QTY == 0 && IS_ENF == 0");

		sMsg  = " ※ 신청량이 0개인 자재는 삭제리스트에 등록이 됩니다.\n";
		sMsg += "    (그룹레시피 필수자재 제외)\n\n";
		sMsg += "    진행 하시겠습니까?";
    }
    
    if(nCnt > 0)
    {
        if(!gfn_confirm(sMsg)){
            return false;
        }
    }
    
    // 삭제리스트에 복사
    for(var i = ds_pr_item.getRowCount(); i >= 0; i--)
    {
		if( ds_recUpjang.getColumn(0, "USE_YN") == "Y" )
		{
			if( ds_pr_item.getColumn(i, "PR_QTY") <= 0 && ds_pr_item.getColumn(i, "IS_ENF") < 1 &&  ds_pr_item.getColumn(i, "IS_REC") < 1 )
			{
				ds_del_item.addRow();
				ds_del_item.copyRow(GetLastRow(ds_del_item), ds_pr_item, i);
				ds_del_item.setColumn(GetLastRow(ds_del_item), "REMARK", "자동삭제 - " + ds_pr_item.getColumn(i, "PR_QTY"));
				//alert(ds_pr_item.getColumn(i, "ITEM_NAME") + '삭제');
				ds_pr_item.deleteRow(i);
			}
		}
		else
		{
			if( ds_pr_item.getColumn(i, "PR_QTY") <= 0 && ds_pr_item.getColumn(i, "IS_ENF") < 1 )
			{
				ds_del_item.addRow();
				ds_del_item.copyRow(GetLastRow(ds_del_item), ds_pr_item, i);
				ds_del_item.setColumn(GetLastRow(ds_del_item), "REMARK", "자동삭제 - " + ds_pr_item.getColumn(i, "PR_QTY"));
				//alert(ds_pr_item.getColumn(i, "ITEM_NAME") + '삭제');
				ds_pr_item.deleteRow(i);
			}
		}

	}

    return true;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_getRecUpjang()
 * 기      능   : 권장식단 관리대상업장 유무 체크
*----------------------------------------------------------------------------------------------*/
function fn_getRecUpjang()
{
	ds_recUpjang.clearData();
	
	var strInDatasets = "";
	var strOutDatasets = "ds_recUpjang=ds_recUpjang";
	var strArgument  = "fa_UPJANG=" + wrapQuote(ds_condi.getColumn(0, "PR_UPJANG"));
		strArgument += " fa_DATE=" + wrapQuote(msk_need_date.value);
	var strCallbackFunc = "";
	var strTrId = "";

	fsp_clear(this);
	fsp_addSingle(this, "fs/fsm:FSM00100E_S008");
	fsp_callService(this, "", "", strInDatasets, strOutDatasets, strArgument, strCallbackFunc, false, false, true, strTrId);

	if( ds_recUpjang.rowcount == 0 )
	{
		var nRow = ds_recUpjang.addRow();
		ds_recUpjang.setColumn(nRow, "USE_YN", "N");
		ds_recUpjang.setColumn(nRow, "COMP_YN", "N");
	}
}

//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : grd_PrItem_OnCellDblClick()
 * 기      능   : 신청리스트 자재 더블클릭시 자재가 등록된 식단을 팝업으로 조회
*----------------------------------------------------------------------------------------------*/
function grd_PrItem_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{

    curRw   = '';
    curCell = '';


    if(gfn_length(grd_PrItem.getCellProperty("body",e.cell,"text"))== 0) return;

    ds_menu_item.clearData();
    pdiv_Menu.closePopup();

    var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
    curRw   = e.row;
    curCell = e.cell;

    // 경로 설정
    strSvcID = "FSP00032E_T005";
    strURL   = "U_svc::" + "fs/fsp/FSP00032E_T005.jsp";

    // 데이터셋 설정
    strInDatasets = "";
    strOutDatasets = "ds_menu_item=ds_menu_item";

    // 파라메터 설정
    strArgument  = "SUBINV_CODE=" + wrapQuote(cbo_subInv.value);
    strArgument += " NEED_DATE="  + wrapQuote(msk_need_date.value);
    strArgument += " UPJANG="     + ds_pr_item.getColumn(e.row,"UPJANG")    ;
    strArgument += " ITEM_CODE="  + wrapQuote(ds_pr_item.getColumn(e.row,"ITEM_CODE"));


    // 콜백함수 지정
    strCallbackFunc = "fn_FSP00032E_T005_callback";

    Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc);
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_FSP00032E_T005_callback()
 * 기      능   : 자재가 등록된 식단 조회의 콜백
*----------------------------------------------------------------------------------------------*/
function fn_FSP00032E_T005_callback() {
    //ds_MenuItem.rowposition = -1;
    fn_OpenPopupDiv(curRw, curCell, grd_PrItem.position.top, grd_PrItem.position.left);
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : grd_OnHeadClick()
 * 기      능   : 그리드 헤더 클릭시
*----------------------------------------------------------------------------------------------*/
function grd_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
    gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : grd_PrItem_OnMouseOver()
 * 기      능   : 신청불가 자재에 대한 사유를 툴팁으로 표시
*----------------------------------------------------------------------------------------------*/
function grd_PrItem_OnMouseOver(obj:Grid, e:GridMouseEventInfo)
{
    if(gfn_length(ds_pr_item.getColumn(e.row,"RESTRICT_PERIOD"))> 0)
    {
        var strPR_REMARK = "금지자재(" + ds_pr_item.getColumn(e.row,"RESTRICT_PERIOD") + "," + ds_pr_item.getColumn(e.row,"RESTRICT_REASON") + ")";
        grd_PrItem.tooltiptext = strPR_REMARK;
    }
    else if(ds_pr_item.getColumn(e.row,"REQ_WKD") == "N")
    {
        grd_PrItem.tooltiptext = eval(obj.binddataset).getColumn(e.row, "PR_REMARK");
    }
    else if(ds_pr_item.getColumn(e.row,"SCH") == "N")
    {
        grd_PrItem.tooltiptext = eval(obj.binddataset).getColumn(e.row, "PR_REMARK");
    }
    else
    {
        grd_PrItem.tooltiptext = "";
    }
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : grd_DelItem_OnMouseOver()
 * 기      능   : 삭제그리드 툴팁표시
*----------------------------------------------------------------------------------------------*/
function grd_DelItem_OnMouseOver(obj:Grid, e:GridMouseEventInfo)
{
    if(e.cell == 2)
        div_bottom.grd_DelItem.tooltiptext = "클릭시 신청리스크로 추가됩니다.";
    else
        div_bottom.grd_DelItem.tooltiptext = "";
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : ds_pr_item_OnColumnChanged()
 * 기      능   : 구매신청량 수정시 이벤트
*----------------------------------------------------------------------------------------------*/
var ModYN = "N";
function ds_pr_item_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
    var strMsg;

    if(e.columnid <> "PR_QTY")
    {
        ModYN = "N";
        return;
    }
    
// 	var objString = e.newvalue;
// 	var nIndex;
// 	
// 	nIndex = objString.indexOf(".");
// 
// 	if(nIndex == 0){
// 		obj.setColumn(e.row, e.col, "0" + e.newvalue);
// 		grd_PrItem.showEditor(false);
// 		grd_PrItem.showEditor(true);
// 	}

    var sItemNm = obj.getColumn(e.row,"ITEM_NAME"); // 자재명
    var nAggQty = obj.getColumn(e.row,  "AGG_QTY") + (obj.getColumn(e.row,  "AGG_QTY") * 0.1);  // 평균수량의 +10%
   
    if( (obj.getColumn(e.row,"SHP_MAP") == "N")    ||
        (obj.getColumn(e.row,"PR_YN") ==    "N")       ||
        (obj.getColumn(e.row,"USE_YN") == "N")     ||
        (gfn_length(obj.getColumn(e.row,"RESTRICT_PERIOD")) > 0) ||
        ( (toNumber(obj.getColumn(e.row,"DUTY_QTY")) > 0) && (toNumber(obj.getColumn(e.row,"DUTY_QTY")) <= toNumber(obj.getColumn(e.row,"REAL_USE_QTY"))) ) ||
        (ds_pr_item.getColumn(e.row,"SCH") == "N")
      )
     {
        ModYN = "N";
        return;
     }

    //소숫점 발주 제한 점검
    if(obj.getColumn(e.row,"POINT_FLAG") == "N" && Math.ceil(toNumber(e.newvalue)) != toNumber(e.newvalue))
    {
        strMsg = " ※ 소숫점 신청 불가!!\n";
        strMsg+= "    자재명 : " + sItemNm;
        g_Message("EE", strMsg);
        obj.setColumn(e.row,"PR_QTY",e.oldvalue);
        ModYN = "Y";
        return;
    }
    //최소발주량 제한 점검
    else if(toNumber(obj.getColumn(e.row,"MIN_ORD_QTY")) > 0 && toNumber(e.newvalue) < toNumber(obj.getColumn(e.row,"MIN_ORD_QTY")) )
    {
    
        strMsg = " ※ 최소발주량 이하 신청 불가!!\n";
        strMsg+= "    자재명     : " + sItemNm + "\n";
        strMsg+= "    최소발주량 : " + obj.getColumn(e.row,"MIN_ORD_QTY") + "\n";
        g_Message("EE", strMsg);
        obj.setColumn(e.row,"PR_QTY",e.oldvalue);
        ModYN = "Y";
        return;
    }
    //최대발주량 제한 점검
    else if(toNumber(obj.getColumn(e.row,"MAX_ORD_QTY")) > 0 && toNumber(String(e.newvalue)) > toNumber(String(obj.getColumn(e.row,"MAX_ORD_QTY"))) )
    {
        strMsg = " ※ 최대발주량 이상 신청 불가!!\n";
        strMsg+= "    자재명     : " + sItemNm + "\n";
        strMsg+= "    최대발주량 : " + obj.getColumn(e.row,"MAX_ORD_QTY") + "\n";
        g_Message("EE", strMsg);
        obj.setColumn(e.row,"PR_QTY",e.oldvalue);
        ModYN = "Y";
        return;
    }
    //발주승수량 제한 점검
    else if(toNumber(String(obj.getColumn(e.row,"MULTIPLIER_QTY"))) !=  0 )
    {
		var nMqty = obj.getColumn(e.row,"MULTIPLIER_QTY");
		var nRt = e.newvalue - (Math.floor(e.newvalue / nMqty) * nMqty)

    	if(nRt != 0)
    	{
			strMsg = " ※ 발주승수량 이외 신청 불가!!\n";
			strMsg+= "    자재명     : " + sItemNm + "\n";
			strMsg+= "    발주승수량 : " + obj.getColumn(e.row,"MULTIPLIER_QTY")    + "\n";
			g_Message("EE", strMsg);
			obj.setColumn(e.row,"PR_QTY", e.oldvalue);
			ModYN = "Y";
			return;
		}
    }
    //마이너스 신청 여부 점검
    else if(toNumber(e.newvalue) < 0)
    {
        strMsg = " ※ (-)수량 신청 신청 불가!!\n";
        strMsg+= "    자재명 : " + sItemNm;

        g_Message("EE",strMsg);
        obj.setColumn(e.row,"PR_QTY",e.oldvalue);
        ModYN = "Y";
        return;
    }
    
    //평균발주량 제한 점검 else if에서 뺌 20180531 김호석
    if(nAggQty < e.newvalue)
    {
        strMsg = " ※ 평균발주량 10% 이상 신청하였습니다.\n";
        strMsg+= "     자재명     : " + sItemNm + "\n";
        strMsg+= "     평균발주량 : " + obj.getColumn(e.row,"AGG_QTY")   + "\n";
        strMsg+= "     신청하시겠습니까?";
        if(!gfn_confirm(strMsg))
        {
            obj.setColumn(e.row,"PR_QTY",e.oldvalue);
            return;
        }
    }

    obj.setColumn(e.row,"TOT_AMT", Math.floor(toNumber(obj.getColumn(e.row,"MARGIN_PRICE")) * toNumber(e.newvalue), 1));

    ModYN = "N";
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : FSP00032E_OnKeyDown()
 * 기      능   : 화면에서 키다운 이벤트
*----------------------------------------------------------------------------------------------*/
function FSP00032E_OnKeyDown(obj:Form, e:KeyEventInfo)
{
    gfn_formKeyDown(obj, e);
    if ( (e.keycode == 13) && (e.fromreferenceobject == cbo_subInv) ) fn_search();
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : btn_Zero_OnClick()
 * 기      능   : 양념/미곡 일괄 삭제
*----------------------------------------------------------------------------------------------*/
function btn_Zero_OnClick(obj:Button, e:ClickEventInfo)
{
	// 양념/미곡 삭제리스트에 복사
	for( var i = ds_pr_item.getRowCount(); i >= 0 ; i-- )
	{
		var recUpjangYn = ds_recUpjang.getColumn(0, "USE_YN");	// 권장메뉴대상업장 여부
		var recItemYn = ds_pr_item.getColumn(i, "IS_REC");	// 권장메뉴 대표자재여부

		if( recUpjangYn == "Y" && recItemYn == "1" )
		{
			//g_Message("EE","권장식단의 대표자재는 삭제가 불가합니다.");
			continue;
		}

		if( ds_pr_item.getColumn(i, "SPICE_YN") == "Y" || ds_pr_item.getColumn(i, "CORN_YN") == "Y" )
		{
			//처음 주문 시는 체크 안하도록 추가 2018.04.03 김호석
			if (ds_condi.getColumn(0,"TYPE") == "NEW") {
				//배송중인 자재 제외 추가 2017.11.24 김호석
					if (ds_pr_item.getColumn(i, "LINE_STATUS") != "DL") {
						ds_del_item.addRow();
						ds_del_item.copyRow(GetLastRow(ds_del_item), ds_pr_item, i);
						ds_del_item.setColumn(GetLastRow(ds_del_item), "REMARK", "양념미곡일괄삭제");
						ds_pr_item.deleteRow(i);
					}
			} else {
				//유효성 자재 제외되도록 추가 2018.04.02 김호석(이혜은, 윤지혜, 염병문 협의)
				if (ds_pr_item.getColumn(i, "PR_YN") == "Y") {			
					
					//배송중인 자재 제외 추가 2017.11.24 김호석
					if (ds_pr_item.getColumn(i, "LINE_STATUS") != "DL") {
						ds_del_item.addRow();
						ds_del_item.copyRow(GetLastRow(ds_del_item), ds_pr_item, i);
						ds_del_item.setColumn(GetLastRow(ds_del_item), "REMARK", "양념미곡일괄삭제");
						ds_pr_item.deleteRow(i);
					}
				}
			}
		}
	}

}

//일괄삭제 기능 추가 2018.03.15 김호석(윤지혜대리 요청)
function btn_ZeroAll_OnClick(obj:Button, e:ClickEventInfo)
{
	//모든 자재 삭제리스트에 복사
	for( var i = ds_pr_item.getRowCount()-1; i >= 0 ; i-- )
	{
		var recUpjangYn = ds_recUpjang.getColumn(0, "USE_YN");	// 권장메뉴대상업장 여부
		var recItemYn = ds_pr_item.getColumn(i, "IS_REC");	// 권장메뉴 대표자재여부

		if( recUpjangYn == "Y" && recItemYn == "1" )
		{
			//g_Message("EE","권장식단의 대표자재는 삭제가 불가합니다.");
			continue;
		}
		//처음 주문 시는 체크 안하도록 추가 2018.04.03 김호석
		if (ds_condi.getColumn(0,"TYPE") == "NEW") {
			//배송중인 자재 제외 추가 2017.11.24 김호석
				if (ds_pr_item.getColumn(i, "LINE_STATUS") != "DL") {
						ds_del_item.addRow();
						ds_del_item.copyRow(GetLastRow(ds_del_item), ds_pr_item, i);
						ds_del_item.setColumn(GetLastRow(ds_del_item), "REMARK", "모든자재일괄삭제");
						ds_pr_item.deleteRow(i);
				}
		} else {
			//유효성 자재 제외되도록 추가 2018.04.02 김호석(이혜은, 윤지혜, 염병문 협의)
			if (ds_pr_item.getColumn(i, "PR_YN") == "Y") {						
				//배송중인 자재 제외 추가 2017.11.24 김호석
				if (ds_pr_item.getColumn(i, "LINE_STATUS") != "DL") {
						ds_del_item.addRow();
						ds_del_item.copyRow(GetLastRow(ds_del_item), ds_pr_item, i);
						ds_del_item.setColumn(GetLastRow(ds_del_item), "REMARK", "모든자재일괄삭제");
						ds_pr_item.deleteRow(i);
				}
			}
		}
	}

}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : btn_AddItem_OnClick()
 * 기      능   : 양념/미곡버튼 클릭시 이벤트
*----------------------------------------------------------------------------------------------*/
function btn_AddItem_OnClick(obj:Button, e:ClickEventInfo)
{
    if(ds_pr_item.getCountNF() <= 0)
    {
        g_Message("EE","조회를 먼저 하신 후 추가하시기 바랍니다.\n내역이 없을 경우 양념/미곡 추가는 불가합니다.");
        return;
    }

    ds_add_itam.clearData();

    ds_pr_item.rowposition = ds_pr_item.rowcount-1;

    var strParam="";


    strParam = {p_SubinvCode:cbo_subInv.value, p_NeedDate:msk_need_date.value, p_PrDate:msk_pr_date.value};
    var sRet = gfn_dialog("", "U_FSP::FSP00032V3.xfdl", strParam, "", "", "", "", "", "", "", "", false);
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_CheckPreOrder()
 * 기      능   : 
*----------------------------------------------------------------------------------------------*/
var v_PreOrderMsg;
function fn_CheckPreOrder()
{
    v_PreOrderMsg = "";

    var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
    // 경로 설정
    strSvcID = "FSP00032E_T011";
    strURL   = "U_svc::" + "fs/fsp/FSP00032E_T011.jsp";
    // 데이터셋 설정
    strInDatasets = "ds_List=ds_pr_item";
    strOutDatasets = "";
    // 파라메터 설정
    strArgument  = "";
    // 콜백함수 지정
    strCallbackFunc = "fn_CheckPreOrder_callback";

    jsp_transaction(this, strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc,false,false,true);

    return v_PreOrderMsg;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : fn_CheckPreOrder_callback()
 * 기      능   : 콜백
*----------------------------------------------------------------------------------------------*/
function fn_CheckPreOrder_callback(errCode, errMsg) {

    if(errCode==0) {

    }else {

    }
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : grd_PrItem_onexpandup()
 * 기      능   : 신청리스트 expend 이벤트
*----------------------------------------------------------------------------------------------*/
function grd_PrItem_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
    ds_pr_item.rowposition = e.row;

    switch(e.col)
    {
        // 자재이미지 팝업
        case 3 :
            gfn_dialog("", "U_FSP::FSP00000P.xfdl",{fv_itemCode: ds_pr_item.getColumn(e.row, "ITEM_CODE")});
            break;

        // 구매시스템 자재상세 팝업
        case 4 :
            SCSysIf.eprocPopup (SCSysIf.EPROC_ITEM_POPUP, ds_pr_item.getColumn(e.row, "ITEM_CODE"));
            break;

        // 동일 자재 대체 팝업
        case 5 :
			if (ds_condi.getColumn(0,"TYPE") == "NEW") {
				//배송중인 자재 삭제불가 추가 2017.11.24 김호석
				if (ds_pr_item.getColumn(e.row, "LINE_STATUS") == "DL") {
					g_Message("EE","배송중인 자재는 대체가 불가합니다.");
				} else { 				
			
					var recUpjangYn = ds_recUpjang.getColumn(0, "USE_YN");	// 권장메뉴대상업장 여부
					var recItemYn = ds_pr_item.getColumn(e.row, "IS_REC");	// 권장메뉴 대표자재여부

					if( recUpjangYn == "Y" && recItemYn == "1" )
					{
						g_Message("EE","권장 메뉴 대상 사업장은\n대표자재의 자재대체가 불가합니다.");
					}
					else
					{
						var nAddRow = 0;
						var sRet    = "";
						var sUrl    = "U_FSP::FSP00032V1.xfdl";

						ds_condi_popup.clearData();

						nAddRow = ds_condi_popup.addRow();

						ds_condi_popup.setColumn(nAddRow, "ITEM_CLASS4"         , ds_pr_item.getColumn(e.row, "ITEM_CLASS4"));
						ds_condi_popup.setColumn(nAddRow, "PR_DATE"             , ds_condi.getColumn(0, "PR_DATE"));
						ds_condi_popup.setColumn(nAddRow, "NEED_DATE"           , ds_pr_item.getColumn(e.row, "NEED_DATE"));
						ds_condi_popup.setColumn(nAddRow, "SUBINV_CODE"         , ds_pr_item.getColumn(e.row, "SUBINV_CODE"));
						ds_condi_popup.setColumn(nAddRow, "UPJANG"              , ds_pr_item.getColumn(e.row, "UPJANG"));
						ds_condi_popup.setColumn(nAddRow, "AP_UNITPRICE_UPJANG" , ds_pr_item.getColumn(e.row, "AP_UNITPRICE_UPJANG"));
						ds_condi_popup.setColumn(nAddRow, "CENTER_CODE"         , ds_pr_item.getColumn(e.row, "CENTER_CODE"));

						sRet = gfn_dialog("", sUrl, "", "", "", "", "", "", "", "", "", true);

						trace( "sRet :: " + sRet );
						if(sRet == "OK")
						{
							nAddRow = ds_del_item.addRow();
							ds_del_item.copyRow(nAddRow, ds_pr_item, e.row);
							ds_del_item.setColumn(nAddRow, "REMARK", "동일자재 자동삭제");
							ds_pr_item.deleteRow(e.row);
							grd_PrItem.setFocus();
						}
					}
				}
			} else {
				//유효성 자재 대체 불가하도록 추가 2018.04.02 김호석(이혜은, 윤지혜, 염병문 협의)
				if (ds_pr_item.getColumn(e.row, "PR_YN") != "Y") {			
					g_Message("EE","유효성 체크 제한된 자재는 대체가 불가합니다. 비고를 참고해주세요.");
				} else {				
					//배송중인 자재 삭제불가 추가 2017.11.24 김호석
					if (ds_pr_item.getColumn(e.row, "LINE_STATUS") == "DL") {
						g_Message("EE","배송중인 자재는 대체가 불가합니다.");
					} else { 				
				
						var recUpjangYn = ds_recUpjang.getColumn(0, "USE_YN");	// 권장메뉴대상업장 여부
						var recItemYn = ds_pr_item.getColumn(e.row, "IS_REC");	// 권장메뉴 대표자재여부

						if( recUpjangYn == "Y" && recItemYn == "1" )
						{
							g_Message("EE","권장 메뉴 대상 사업장은\n대표자재의 자재대체가 불가합니다.");
						}
						else
						{
							var nAddRow = 0;
							var sRet    = "";
							var sUrl    = "U_FSP::FSP00032V1.xfdl";

							ds_condi_popup.clearData();

							nAddRow = ds_condi_popup.addRow();

							ds_condi_popup.setColumn(nAddRow, "ITEM_CLASS4"         , ds_pr_item.getColumn(e.row, "ITEM_CLASS4"));
							ds_condi_popup.setColumn(nAddRow, "PR_DATE"             , ds_condi.getColumn(0, "PR_DATE"));
							ds_condi_popup.setColumn(nAddRow, "NEED_DATE"           , ds_pr_item.getColumn(e.row, "NEED_DATE"));
							ds_condi_popup.setColumn(nAddRow, "SUBINV_CODE"         , ds_pr_item.getColumn(e.row, "SUBINV_CODE"));
							ds_condi_popup.setColumn(nAddRow, "UPJANG"              , ds_pr_item.getColumn(e.row, "UPJANG"));
							ds_condi_popup.setColumn(nAddRow, "AP_UNITPRICE_UPJANG" , ds_pr_item.getColumn(e.row, "AP_UNITPRICE_UPJANG"));
							ds_condi_popup.setColumn(nAddRow, "CENTER_CODE"         , ds_pr_item.getColumn(e.row, "CENTER_CODE"));

							sRet = gfn_dialog("", sUrl, "", "", "", "", "", "", "", "", "", true);

							trace( "sRet :: " + sRet );
							if(sRet == "OK")
							{
								nAddRow = ds_del_item.addRow();
								ds_del_item.copyRow(nAddRow, ds_pr_item, e.row);
								ds_del_item.setColumn(nAddRow, "REMARK", "동일자재 자동삭제");
								ds_pr_item.deleteRow(e.row);
								grd_PrItem.setFocus();
							}
						}
					}
				}
			}
			
            break;

        // 자재 삭제
        case 6 :
			//배송중인 자재 삭제불가 추가 2017.11.24 김호석
			//alert(ds_pr_item.getColumn(e.row, "PR_YN"));
			//수발주 제한(D-day)인 자재는 삭제 불가하도록 수정 2018.03.27 김호석(이헤은과장 요청)
			//다른 유효성 자재도 삭제 불가하도록 추가 2018.03.30 김호석(이혜은, 윤지혜, 염병문, 최학진 협의)
			if (ds_condi.getColumn(0,"TYPE") == "NEW") {
				if (ds_pr_item.getColumn(e.row, "LINE_STATUS") == "DL") {
					g_Message("EE","배송중인 자재는 삭제가 불가합니다.");
				} else {
					var recUpjangYn = ds_recUpjang.getColumn(0, "USE_YN");	// 권장메뉴대상업장 여부
					var recItemYn = ds_pr_item.getColumn(e.row, "IS_REC");	// 권장메뉴 대표자재여부
					var preRemark = ds_pr_item.getColumn(e.row, "PR_REMARK");	// 비고
					
					

					if( recUpjangYn == "Y" && recItemYn == "1" )
					{
						g_Message("EE","권장 메뉴 대상 사업장은\n대표자재의 삭제가 불가합니다.");
						
					//유효성체크에 걸린 자재는 삭제 못하도록 제한 2018.03.21 김호석 추가(이혜은과장 요청)
					//} else if (preRemark = "수발주제한" ) {
						//g_Message("EE","수발주 제한 자재는 삭제가 불가합니다.");
					}
					else
					{
						var nAddRow = 0;

						nAddRow = ds_del_item.addRow();
						ds_del_item.copyRow(nAddRow, ds_pr_item, e.row);
						ds_del_item.setColumn(nAddRow, "REMARK", "사용자삭제");
						ds_pr_item.deleteRow(e.row);
						grd_PrItem.setFocus();
					}
				}
			} else { 
				if (ds_pr_item.getColumn(e.row, "PR_YN") != "Y") {			
					g_Message("EE","유효성 체크 제한된 자재는 삭제가 불가합니다. 비고를 참고해주세요");
				} else {			
					if (ds_pr_item.getColumn(e.row, "LINE_STATUS") == "DL") {
						g_Message("EE","배송중인 자재는 삭제가 불가합니다.");
					} else {
						var recUpjangYn = ds_recUpjang.getColumn(0, "USE_YN");	// 권장메뉴대상업장 여부
						var recItemYn = ds_pr_item.getColumn(e.row, "IS_REC");	// 권장메뉴 대표자재여부
						var preRemark = ds_pr_item.getColumn(e.row, "PR_REMARK");	// 비고
						
						

						if( recUpjangYn == "Y" && recItemYn == "1" )
						{
							g_Message("EE","권장 메뉴 대상 사업장은\n대표자재의 삭제가 불가합니다.");
							
						//유효성체크에 걸린 자재는 삭제 못하도록 제한 2018.03.21 김호석 추가(이혜은과장 요청)
						//} else if (preRemark = "수발주제한" ) {
							//g_Message("EE","수발주 제한 자재는 삭제가 불가합니다.");
						}
						else
						{
							var nAddRow = 0;

							nAddRow = ds_del_item.addRow();
							ds_del_item.copyRow(nAddRow, ds_pr_item, e.row);
							ds_del_item.setColumn(nAddRow, "REMARK", "사용자삭제");
							ds_pr_item.deleteRow(e.row);
							grd_PrItem.setFocus();
						}
					}
				}
			}
			
            break;
    }
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : btn_DelItem_OnClick()
 * 기      능   : 자재 일괄 삭제 - 기능 제거
*----------------------------------------------------------------------------------------------*/
function btn_DelItem_OnClick(obj:Button, e:ClickEventInfo)
{
    var nIsEnf  = 0; // 그룹레시피필수자재여부
    var nAddRow = 0;
    
    // 선택된로우 삭제리스트에 복사(필수자재 제외)
    for(var i =0; i < ds_pr_item.rowcount; i++ ) {
        if (ds_pr_item.getSelect(i) == true) {

            nIsEnf = ds_pr_item.getColumn(i, "IS_ENF");
            if(toNumber(nIsEnf) < 1)
            {
                nAddRow = ds_del_item.addRow();
                ds_del_item.copyRow(nAddRow, ds_pr_item, i);
                ds_del_item.setColumn(nAddRow, "REMARK", "사용자일괄삭제");
            }
        }
    }
    
    ds_pr_item.deleteSelectedRows();

}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : FSP00032E_onsize()
 * 기      능   : 화면 사이즈 변경시 스플리터 최대값 최소값 변경
*----------------------------------------------------------------------------------------------*/
function FSP00032E_onsize(obj:Form, e:SizeEventInfo)
{
    var nSpt  = sp_line.position.y;
    var nForm = this.position.bottom;
    if(nForm -25 <  nSpt && nSpt > 112)
    {
        sp_line.position.y = nForm -25;
    }
    sp_line.max = this.position.bottom - 15;
    sp_line.min = 112;
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : div_bottom_grd_DelItem_onexpandup()
 * 기      능   : 삭제된 자재리스트 expend 이벤트
*----------------------------------------------------------------------------------------------*/
function div_bottom_grd_DelItem_onexpandup(obj:Grid, e:GridMouseEventInfo)
{
    switch(e.col)
    {
        case 1 :
            var nIdx = FindRowNF(ds_pr_item,"ITEM_CODE",ds_del_item.getColumn(e.row,"ITEM_CODE"));

            if(nIdx >= 0)
            {
                g_Message("EE","  선택된 자재는 신청내역에 이미 포함되어 있습니다.");
                return;
            }
            ds_pr_item.addRow();
            ds_pr_item.copyRow(GetLastRow(ds_pr_item)     , ds_del_item, e.row);
            ds_del_item.deleteRow(e.row);
            break;

        case 4 :
            gfn_dialog("", "U_FSP::FSP00000P.xfdl",{fv_itemCode: ds_del_item.getColumn(e.row, "ITEM_CODE")});
            break;
    }
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : cbo_subInv_onkeydown()
 * 기      능   : 창고콤보 엔터키다운시 자재조회
*----------------------------------------------------------------------------------------------*/
function cbo_subInv_onkeydown(obj:Combo, e:KeyEventInfo)
{
    if (e.keycode == 13) fn_search();
}

/*----------------------------------------------------------------------------------------------
 * 함  수  명   : chk_cheap_yn_onchanged()
 * 기      능   : 저렴자재 체크박스 값 변경시
*----------------------------------------------------------------------------------------------*/
function chk_cheap_yn_onchanged(obj:CheckBox, e:CheckBoxChangeEventInfo)
{
    var nIndex = grd_PrItem.getBindCellIndex("body", "ITEM_NAME");
    if(e.postvalue)
    {
        grd_PrItem.setCellProperty("body", nIndex, "edittype", "expr:CHEAP_YN == 'expand' :'none'");
        grd_PrItem.setCellProperty("body", nIndex, "expandimage", "theme://Images/new/grd_WF_Money2.png");
        grd_PrItem.setCellProperty("body", nIndex, "expandshow", "expr:CHEAP_YN == 'Y' ? 'show' : 'hide'");
    }
    else
    {
        grd_PrItem.setCellProperty("body", nIndex, "edittype", "none");
        grd_PrItem.setCellProperty("body", nIndex, "expandimage", "");
        grd_PrItem.setCellProperty("body", nIndex, "expandshow", "hide");
    }
}

function btn_dupItem_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow;
	for(var i=0; i < ds_dup_item.rowcount; i++)
	{
	    //trace(ds_dup_item.getColumn(i, "ITEM_CODE"));
		nRow = ds_pr_item.findRowExpr("ITEM_CODE=='" + ds_dup_item.getColumn(i, "ITEM_CODE") + "'");
		//trace(nRow);
		if(nRow > -1)
		{
			ds_pr_item.setColumn(nRow, "DUP_YN", "Y");
			//ds_pr_item.setColumn(nRow, "KG_QTY", ds_pr_item.getColumn(nRow, "KG_QTY") + ds_dup_item.getColumn(i, "KG_QTY"));
		}
		grd_PrItem.setCellProperty("body", 14, "background", "expr:DUP_YN == 'Y' ? '#ffdad7ff' : 'default'");
		grd_PrItem.setCellProperty("body", 14, "background2", "expr:DUP_YN == 'Y' ? '#ffdad7ff' : 'default'");
		grd_PrItem.setCellProperty("body", 14, "selectbackground", "expr:DUP_YN == 'Y' ? '#ffdad7ff' : 'default'");
		grd_PrItem.setCellProperty("body", 14, "color", "expr:DUP_YN == 'Y' ? 'black' : 'default'");
		grd_PrItem.setCellProperty("body", 14, "color2", "expr:DUP_YN == 'Y' ? 'black' : 'default'");
		grd_PrItem.setCellProperty("body", 14, "selectcolor", "expr:DUP_YN == 'Y' ? 'black' : 'default'");
	}
}



/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckDLYN()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 신청서 수정 중 배송중 여부 점검
 * 작  성  자   : 김호석
 * 작성  일자   : 2017-11-27
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
var v_ItemName;
function fn_CheckDLYN(strPrNum)
{
	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FSP00032E_T013";
	strURL   = "U_svc::" + "fs/fsp/FSP00032E_T013.jsp";
	
	// 데이터셋 설정	
    var nRowCnt = ds_pr_item2.assign(ds_pr_item);
    var nRowCnt2 = ds_del_item2.assign(ds_del_item);
    var nRowCnt3 = ds_condi2.assign(ds_condi);    
	strInDatasets = "ds_pr_item2=ds_pr_item2:A ds_condi2=ds_condi2 ds_del_item2=ds_del_item2";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "p_PrNum=" + wrapQuote(strPrNum);
	
	// 콜백함수 지정
	strCallbackFunc = "";

	http.Sync = true;
	Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc); 
	http.Sync = false;
	
	var strMsg;
	
	if(gfn_length(v_ItemName)!= 0)
	{		
		strMsg = "※ 신청서 수정 중 일부 자재 배송처리됨\n";
		strMsg+= "배송중 자재명 : " + v_ItemName;
	
		g_Message("EE",strMsg);
		return false;
	}
	
	return true;
}


/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckPDYN()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 신청서 수정 중 배송중 여부 점검
 * 작  성  자   : 김호석
 * 작성  일자   : 2018-03-13
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
*/
var v_ItemName;
function fn_CheckPDYN(strPrNum)
{
	var strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc;
	
	// 경로 설정
	strSvcID = "FSP00032E_T014";
	strURL   = "U_svc::" + "fs/fsp/FSP00032E_T014.jsp";
	
	// 데이터셋 설정	
    var nRowCnt = ds_pr_item3.assign(ds_pr_item);
    var nRowCnt2 = ds_del_item3.assign(ds_del_item);
    var nRowCnt3 = ds_condi3.assign(ds_condi);    
	strInDatasets = "ds_pr_item3=ds_pr_item3:A ds_condi3=ds_condi3 ds_del_item3=ds_del_item3";
	strOutDatasets = "";
	
	// 파라메터 설정
	strArgument  = "p_PrNum=" + wrapQuote(strPrNum);
	
	// 콜백함수 지정
	strCallbackFunc = "";

	http.Sync = true;
	Transaction(strSvcID,strURL,strInDatasets,strOutDatasets,strArgument,strCallbackFunc); 
	http.Sync = false;
	
	var strMsg;
	
	if(gfn_length(v_ItemName)!= 0)
	{		
		strMsg = "※ 신청서 수정 중 일부 자재 취소처리됨\n";
		strMsg+= "취소 자재명 : " + v_ItemName;
	
		g_Message("EE",strMsg);
		return false;
	}
	
	return true;
}]]></Script>
  </Form>
</FDL>
