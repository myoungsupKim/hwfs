<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="CmmnMsgPop" classname="frmMsg" inheritanceid="" position="absolute" titletext="공통메시지" left="0" width="420" top="0" height="358" cssclass="frm_POP_bg" onload="CmmnMsgPop_onload" scrollbars="autovert">
    <Layouts>
      <Layout>
        <Static id="staFormSize" position="absolute" left="0" width="420" top="0" height="358" taborder="3" cssclass="sta_POP_Bg"/>
        <TextArea id="txtMsg" taborder="5" position="absolute" left="10" width="400" top="80" height="201" readonly="true" wordwrap="true" style="padding:10 10 10 10;border:0 none #808080ff ;bordertype:normal 0 0 ;align:center middle;" cssclass="txt_POP_AltCfm" displaynulltext="Confirm 메세지 입니다."/>
        <Static id="staTitle" text="Title" position="absolute" left="0" top="0" height="70" cssclass="sta_POP_AltCfmTitleBg" width="420" taborder="0"/>
        <Static id="staFront" taborder="14" left="0" top="70" width="420" height="288" onclick="staFront_onclick"/>
        <Button id="btnOK" taborder="15" text="확인" onclick="common_onclick" left="164" top="291" width="91" height="47" visible="true"/>
        <Button id="btnYes" taborder="4" onclick="common_onclick" position="absolute" text="예" left="68" width="91" top="291" height="47" visible="true"/>
        <Button id="btnNo" taborder="2" onclick="common_onclick" position="absolute" text="아니오" left="260" width="91" top="291" height="47" visible="true"/>
      </Layout>
    </Layouts>
    <Script type="xscript5.0"><![CDATA[/*  Message Template
 Alert, Confirm 형태의 메세지 창
 gfn_Msg를 사용해서 띄워야함
 
 gfn_Msg 사용법 : gfn_Msg(id, title, desc, type, bCallback, callObj)
 - id : Msg ID
 - title : title에 표시할 내용 (OFFSIDE에서는 사용안함)
 - desc : 메세지 내용
 - type : 메세지 타입
 OK : Alert형
 YN : Confirm형
 - bCallback : 메세지 창을 닫을 때 콜백함수를 호출할지 여부 (true/false)
 - callObj : 콜백함수가 불려지는 form
 
 ex) gfn_Msg("ALERT", "타이틀", "메세지내용", "OK");
 gfn_Msg("ALERT", "타이틀", "메세지내용", "OK", true, this);
 */

this.arg = undefined;
this.gab = 5;
this.max = 400;

/**
 * @desc   : Form의 모든 컴포넌트가 생성되고, 모든 Object가 Load 되었을 때에 발생하는 Event
 메세지 길이에 따른 컴포넌트 크기 조절 등 초기 설정
 * @param  : obj : Event가 발생한 Object
 e : Event Object (LoadEventInfo)
 * @return : 없음
 */
this.CmmnMsgPop_onload = function (obj:Form, e:LoadEventInfo)
{
	// gfn_Msg 사용 시 onload에서 필수로 호출해야 하는 함수
	application.goMain.gfn_POP_resize(this);

	// 인자를 받아옴
	this.arg = application.goMain.gfn_POP_getArg();

	// Title SET
	this.staTitle.set_text(this.arg[0]);

	// 메세지 SET
	this.txtMsg.set_value(this.arg[1]);

	// TYPE에 따른 버튼 설정
	if (this.arg[2] == "YN") 
	{
		this.btnOK.set_visible(false);
		this.btnYes.bringToFront();
		this.btnNo.bringToFront();
	}
	else if (this.arg[2] == "OK") 
	{
		this.btnYes.set_visible(false);
		this.btnNo.set_visible(false);
		this.btnOK.bringToFront();
	}

	// value set 후 vscrollbar.visible를 바로 찍으면 스크롤바가 있어도 false로 나온다.
	// 하지만, 크기를 변경한 다음 찍으면 true로 나온다.
	// 런타임, pc 브라우저는 확인. 모바일은 확인 필요
	this.txtMsg.set_height(this.txtMsg.getPixelHeight() + 1);

// 	// 메세지 길이에 따른 컴포넌트 크기 조절
// 	while (1) 
// 	{
// 		if (!this.txtMsg.vscrollbar.visible) 
// 		{
// 			break;
// 		}
// 
// 		if (this.getOffsetHeight() >= this.max) 
// 		{
// 			break;
// 		}
// 
// 		this.txtMsg.set_height(this.txtMsg.getOffsetHeight() + this.gab);
// 
// 		this.btnYes.set_top(this.btnYes.getOffsetTop() + this.gab);
// 		this.btnNo.set_top(this.btnNo.getOffsetTop() + this.gab);
// 		this.btnOK.set_top(this.btnOK.getOffsetTop() + this.gab);
// 
// 		this.set_height(this.getOffsetHeight() + this.gab);
// 		this.staFormSize.set_height(this.staFormSize.getOffsetHeight() + this.gab);
// 		this.set_top(this.getOffsetTop() - this.gab / 2);
// 	}
// 
// 	this.resetScroll();
}

/**
 * @desc   : Button click Event
 * @param  : obj : Event가 발생한 Object
 e : Event Object (ClickEventInfo)
 * @return : 없음
 */
this.common_onclick = function (obj:Button, e:ClickEventInfo)
{
	switch (obj.name) 
	{
		case "btnOK":
			application.goMain.gfn_POP_close(this);
			break;
		case "btnYes":
			application.goMain.gfn_POP_close(this, "Y");
			break;
		case "btnNo":
			application.goMain.gfn_POP_close(this, "N");
			break;
	}
}
]]></Script>
  </Form>
</FDL>
