<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="../../../default_typedef.xml"/>
  <Form id="FMM00207E" onkeydown="frm_OnKeyDown" onload="form_onload" titletext="식단복사" position="absolute 0 0 1220 744" scrollbars="none">
    <Layouts>
      <Layout>
        <Static id="Static04" class="sta_WFDA_Labelbg" position="absolute 44 494 1205 521"/>
        <Tab id="Tab_list" onchanged="Tab_list_OnChanged" canchange="Tab_list_OnChanging" taborder="8" position="absolute 44 526 1205 729" showextrabutton="false">
          <Tabpages>
            <Tabpage id="tab1" taborder="1" text="개별복사" position="absolute 2 24 925 121" scrollbars="none">
              <Layouts>
                <Layout>
                  <Grid autoenter="select" binddataset="ds_list" cellsizingtype="both" readonly="false" enable="true" id="grd_Save" useinputpanel="false" oncellclick="Tab_list_tab1_grd_Save_OnCellClick" onheadclick="grd_List_OnHeadClick" taborder="0" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 10 10 1149 165" selecttype="row" autofittype="col" onexpanddown="Tab_list_tab1_grd_Save_onexpanddown" ondropdown="Tab_list_tab1_grd_Save_ondropdown">
                    <Formats>
                      <Format id="Default">
                        <Columns>
                          <Column size="30"/>
                          <Column size="95"/>
                          <Column size="94"/>
                          <Column size="117"/>
                          <Column size="745"/>
                          <Column size="35"/>
                        </Columns>
                        <Rows>
                          <Row size="26" band="head"/>
                          <Row size="24"/>
                        </Rows>
                        <Band id="head">
                          <Cell displaytype="text" class="head_Excel"/>
                          <Cell col="1" displaytype="text" text="제공일" wordwrap="word"/>
                          <Cell col="2" displaytype="text" text="끼니"/>
                          <Cell col="3" displaytype="text" text="코너" wordwrap="word"/>
                          <Cell col="4" displaytype="text" text="구성" wordwrap="word"/>
                          <Cell col="5" displaytype="text" text="삭제"/>
                        </Band>
                        <Band id="body">
                          <Cell displaytype="text" style="align:left;" expr="expr:currow+1"/>
                          <Cell col="1" displaytype="normal" edittype="masknumber" style="align:center;" text="bind:MENU_DATE" mask="@@@@-@@-@@" expandshow="show" expandsize="20" expandimage="URL('theme://Images\new\cal_WF_IconN.png')"/>
                          <Cell col="2" displaytype="combo" edittype="combo" style="align:left;" text="bind:MEAL" combodataset="ds_MEAL3" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="3" displaytype="combo" edittype="combo" style="align:left;" text="bind:CORNER" combodataset="ds_CORNER3" combocodecol="CODE" combodatacol="CODE_NAME"/>
                          <Cell col="4" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                          <Cell col="5" displaytype="image" style="align: ;" text="URL('theme://Images/new/grd_WF_ExpandImageX.png')"/>
                        </Band>
                      </Format>
                    </Formats>
                  </Grid>
                  <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 925 10"/>
                  <Static id="Static00" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 8 165 933 175"/>
                  <Static id="Static17" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 10 102"/>
                  <Static id="Static01" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1149 8 1159 110"/>
                </Layout>
              </Layouts>
            </Tabpage>
            <Tabpage id="tab2" taborder="5" text="기간복사" position="absolute 2 24 925 121" scrollbars="none">
              <Layouts>
                <Layout>
                  <Static id="Static0" position="absolute 10 10 571 37" class="sta_WFDA_Labelbg"/>
                  <Static id="Static2" text="끼니" position="absolute 10 10 73 37" class="sta_WFDA_Label01"/>
                  <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MEAL" index="0" innerdataset="ds_MEAL3" taborder="0" position="absolute 75 13 154 34" class="cmb_WF_Essential" onitemchanged="Tab_list_tab2_cbo_MEAL_onitemchanged" displayrowcount="10"/>
                  <Static id="Static6" text="코너" position="absolute 156 10 219 37" class="sta_WFDA_Label01"/>
                  <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_CORNER" index="0" innerdataset="@ds_CORNER4" taborder="1" position="absolute 221 13 308 34" class="cmb_WF_Essential" displayrowcount="10"/>
                  <Static id="Static8" text="기간" position="absolute 310 10 373 37" class="sta_WFDA_Label01"/>
                  <Static id="Static1" text="* 기간복사시에는 반드시 복사원본에서 끼니, 코너를 선택해주십시오." position="absolute 10 41 476 63" class="sta_WF_RedhelpB" style="color:crimson;"/>
                  <MaskEdit id="me_MENU_F_DATE" mask="####-##-##" onchar="Tab_list_tab2_me_MENU_F_DATE_OnChar" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="2" type="string" position="absolute 375 13 454 34" class="msk_WF_Essential"/>
                  <Button id="btn_MENU_F_DATE" onclick="Tab_list_tab2_btn_MENU_F_DATE_OnClick" taborder="3" position="absolute 453 13 474 34" class="btn_WF_calEssential" text="" image="" userdata="Tab_list.tab2.me_MENU_F_DATE" tabstop="false"/>
                  <Static id="Static7" text="~" position="absolute 477 13 485 34"/>
                  <MaskEdit enable="false" id="me_MENU_T_DATE" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="4" type="string" position="absolute 489 13 568 34" class="msk_WF_Essential"/>
                  <Static id="Static17" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 10 102"/>
                  <Static id="Static00" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 8 165 933 175"/>
                  <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 0 925 10"/>
                  <Static id="Static01" text="w10" class="Guide01_AreaRed" visible="false" position="absolute 1149 8 1159 110"/>
                </Layout>
              </Layouts>
            </Tabpage>
          </Tabpages>
        </Tab>
        <Grid autoenter="select" binddataset="ds_Detail" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="grd_Detail" useinputpanel="false" onheadclick="grd_List_OnHeadClick" taborder="4" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 44 303 1205 479" selecttype="row" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30"/>
                <Column size="78"/>
                <Column size="134"/>
                <Column size="80"/>
                <Column size="118"/>
                <Column size="80"/>
                <Column size="110"/>
                <Column size="39"/>
                <Column size="85"/>
                <Column size="80"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="레시피코드" wordwrap="word"/>
                <Cell col="2" displaytype="text" text="레시피명"/>
                <Cell col="3" displaytype="text" text="상품코드" wordwrap="word"/>
                <Cell col="4" displaytype="text" text="상품명" wordwrap="word"/>
                <Cell col="5" displaytype="text" text="상품정보" wordwrap="word"/>
                <Cell col="6" displaytype="text" text="규격" wordwrap="word"/>
                <Cell col="7" displaytype="text" text="단위"/>
                <Cell col="8" displaytype="text" text="1인량 (g)" wordwrap="word"/>
                <Cell col="9" displaytype="text" text="과거원가" wordwrap="word"/>
                <Cell col="10" displaytype="text" text="현재원가"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;background:white;background2:white;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_CD" suppress="2"/>
                <Cell col="2" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_NAME" suppress="3"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:ITEM_CODE"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:ITEM_NAME"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:FEATURE_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:PO_UOM"/>
                <Cell col="8" displaytype="number" style="align: ;" text="bind:NEED_QTY"/>
                <Cell col="9" displaytype="number" style="align: ;" text="bind:PAST_PRICE"/>
                <Cell col="10" displaytype="number" style="align: ;" text="bind:CUR_PRICE"/>
              </Band>
            </Format>
            <Format id="Default0">
              <Columns>
                <Column size="30"/>
                <Column size="78"/>
                <Column size="158"/>
                <Column size="87"/>
                <Column size="155"/>
                <Column size="85"/>
                <Column size="117"/>
                <Column size="39"/>
                <Column size="85"/>
                <Column size="80"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="레시피코드" wordwrap="word"/>
                <Cell col="2" displaytype="text" text="레시피명"/>
                <Cell col="3" displaytype="text" text="상품코드" wordwrap="word"/>
                <Cell col="4" displaytype="text" text="상품명" wordwrap="word"/>
                <Cell col="5" displaytype="text" text="상품정보" wordwrap="word"/>
                <Cell col="6" displaytype="text" text="규격" wordwrap="word"/>
                <Cell col="7" displaytype="text" text="단위"/>
                <Cell col="8" displaytype="text" text="1인량 (g)" wordwrap="word"/>
                <Cell col="9" displaytype="text" text="현재원가" wordwrap="word"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_CD" suppress="2"/>
                <Cell col="2" displaytype="text" style="align:left;background:white;background2:white;" text="bind:RECIPE_NAME" suppress="3"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:ITEM_CODE"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:ITEM_NAME"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:FEATURE_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:ITEM_SIZE"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:PO_UOM"/>
                <Cell col="8" displaytype="number" style="align: ;" text="bind:NEED_QTY"/>
                <Cell col="9" displaytype="number" style="align: ;" text="bind:UNIT_COST"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid autoenter="select" binddataset="ds_Master" cellmovingtype="col" cellsizingtype="both" readonly="false" enable="true" id="grd_Master" useinputpanel="false" oncellclick="grd_Master_OnCellClick" oncelldblclick="grd_Master_OnCellDblClick" onheadclick="grd_List_OnHeadClick" taborder="3" tabstop="true" usecontextmenu="true" useselcolor="true" visible="true" wheelscrollrow="1" position="absolute 44 124 1205 298" selecttype="row" autofittype="col">
          <Formats>
            <Format id="Default">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="83"/>
                <Column size="457"/>
                <Column size="0"/>
                <Column size="85"/>
                <Column size="55"/>
                <Column size="45"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" edittype="normal" text="선택"/>
                <Cell col="2" displaytype="text" text="과거원가"/>
                <Cell col="3" displaytype="text" text="현재원가"/>
                <Cell col="4" displaytype="text" text="구성"/>
                <Cell col="5" displaytype="text"/>
                <Cell col="6" displaytype="text" text="제공일"/>
                <Cell col="7" displaytype="text" text="날씨"/>
                <Cell col="8" displaytype="text" text="끼니"/>
                <Cell col="9" displaytype="text" text="코너"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" style="align: ;" text="bind:PAST_PRICE"/>
                <Cell col="3" displaytype="number" style="align: ;" text="bind:CUR_PRICE"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="5" displaytype="text" style="align:left;"/>
                <Cell col="6" displaytype="date" style="align: ;" text="bind:MENU_DATE"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:WDESC"/>
                <Cell col="8" displaytype="text" style="align:center;" text="bind:MEAL_NAME"/>
                <Cell col="9" displaytype="text" style="align:center;" text="bind:CORNER_NAME"/>
              </Band>
            </Format>
            <Format id="Default0">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="658"/>
                <Column size="85"/>
                <Column size="30"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="선택"/>
                <Cell col="2" displaytype="text" text="현재원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="식단명"/>
                <Cell col="5" displaytype="text" text="사진"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" style="align: ;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="text" style="align:left;" text="bind:MENU_NAME"/>
                <Cell col="5" displaytype="image" style="align: ;cursor:expr:iif(length(SPHOTO_PATH_1) +length(SPHOTO_PATH_2) &gt; 0,'hand','arrow');" text="expr:iif(gfn_length(SPHOTO_PATH_1)+gfn_length(SPHOTO_PATH_2)&gt; 0,&quot;URL('theme://Images/new/grd_WF_ExpandImage.png')&quot;,&quot;&quot;)"/>
              </Band>
            </Format>
            <Format id="Default1">
              <Columns>
                <Column size="30" band="left"/>
                <Column size="30" band="left"/>
                <Column size="85"/>
                <Column size="595"/>
                <Column size="85"/>
                <Column size="0"/>
                <Column size="45"/>
                <Column size="43"/>
              </Columns>
              <Rows>
                <Row size="26" band="head"/>
                <Row size="24"/>
              </Rows>
              <Band id="head">
                <Cell displaytype="text" class="head_Excel"/>
                <Cell col="1" displaytype="text" text="선택"/>
                <Cell col="2" displaytype="text" text="현재원가"/>
                <Cell col="3" displaytype="text" text="구성"/>
                <Cell col="4" displaytype="text" text="날짜"/>
                <Cell col="5" displaytype="text"/>
                <Cell col="6" displaytype="text" text="끼니"/>
                <Cell col="7" displaytype="text" text="코너"/>
              </Band>
              <Band id="body">
                <Cell displaytype="text" style="align:center;" expr="expr:currow+1"/>
                <Cell col="1" displaytype="checkbox" edittype="checkbox" style="align:center;" text="bind:CHK"/>
                <Cell col="2" displaytype="number" style="align: ;" text="bind:MENU_COST"/>
                <Cell col="3" displaytype="text" style="align:left;" text="bind:RECIPE_INFO"/>
                <Cell col="4" displaytype="date" style="align: ;" text="bind:MENU_DATE"/>
                <Cell col="5" displaytype="text" style="align:left;" text="bind:HALL_NAME"/>
                <Cell col="6" displaytype="text" style="align:left;" text="bind:MEAL_NAME"/>
                <Cell col="7" displaytype="text" style="align:left;" text="bind:CORNER_NAME"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static10" text="복&#10;&#10;사&#10;&#10;원&#10;&#10;본" position="absolute 15 40 43 479" wordwrap="both" class="sta_WFDA_Label03"/>
        <Static id="Static12" text="복사대상" position="absolute 15 493 43 729" wordwrap="both" class="sta_WFDA_Label03"/>
        <Static id="Static13" text="사업장" position="absolute 44 494 107 521" class="sta_WFDA_Label01"/>
        <Edit enable="false" id="ed_UPJANG_NM" readonly="true" taborder="5" position="absolute 109 497 259 518" class="edt_WF_Essential"/>
        <Static id="Static14" text="식당" position="absolute 261 494 324 521" class="sta_WFDA_Label01"/>
        <Edit enable="false" id="ed_SUBINV_NM" readonly="true" taborder="6" position="absolute 326 497 548 518" class="edt_WF_Essential"/>
        <Button id="btn_Copy" onclick="fn_save" taborder="9" text=" 복사" position="absolute 1152 497 1204 518" class="btn_WF_Copy" image=""/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="CODE_NAME" id="rdo_CType" index="0" innerdataset="ds_CType" onitemchanged="rdo_SType_OnChanged" taborder="7" position="absolute 938 497 1117 518"/>
        <Static id="Static0" text="* 레시피포함 선택시 사업장레시피까지 복사됩니다.(레시피미포함시 대상 사업장레시피로 적용)" position="absolute 689 531 1207 553"/>
        <MaskEdit enable="false" id="me_priod" mask="[ ####-##-## ~ ####-##-## ]" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="23" type="string" position="absolute 551 497 712 518" style=":disabled {background:transparent;border:0 none #aaaaaaff ;}"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 15 0 1207 10"/>
        <Button id="btn_search" taborder="25" text="조회" onclick="fn_search" class="btn_WF_searchCm" position="absolute 1099 10 1158 35"/>
        <Button id="btn_close" taborder="26" text="닫기" onclick="fn_close" class="btn_WF_CRUD" position="absolute 1160 10 1205 35"/>
        <Static id="sta_title" text="식단 복사" class="sta_WF_Title" position="absolute 14 14 184 33"/>
        <Static id="Static06" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 12 35 1210 40"/>
        <Static id="Static02" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1221 0 1236 733"/>
        <Static id="Static03" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 0 15 637"/>
        <Static id="Static07" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 23 729 1215 744"/>
        <Static id="Static08" class="sta_WFDA_Labelbg" position="absolute 44 40 1205 67"/>
        <Radio codecolumn="CODE" columncount="2" datacolumn="CODE_NAME" id="rdo_SType" index="0" innerdataset="ds_SType" onitemchanged="rdo_SType_OnChanged" taborder="0" position="absolute 56 44 221 66"/>
        <Div id="div_1" taborder="1" text="Div0" position="absolute 44 66 1205 119" scrollbars="none" style="border:1 solid #c3c3c3ff ;">
          <Layouts>
            <Layout>
              <Static id="Static08" class="sta_WFDA_Labelbg" position="absolute -17 -1 1160 26" anchor="default"/>
              <Static id="Static12" class="sta_WFDA_Labelbg" position="absolute -1 25 1160 52" anchor="default"/>
              <Static id="Static2" text="끼      니" position="absolute 509 -1 579 26" class="sta_WFDA_Label01" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MEAL" index="0" innerdataset="ds_MEAL1" taborder="3" position="absolute 581 2 698 23" anchor="default"/>
              <Static id="Static6" text="코     너" position="absolute 700 -1 764 26" class="sta_WFDA_Label01" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_CORNER" index="0" innerdataset="ds_CORNER1" taborder="4" position="absolute 766 2 865 23" anchor="default"/>
              <Static id="Static8" text="기     간" position="absolute -1 25 67 52" class="sta_WFDA_Label01" anchor="default"/>
              <Static id="Static7" text="~" position="absolute 169 28 177 49" anchor="default"/>
              <Static id="Static3" text="식단원가" position="absolute 700 25 764 52" class="sta_WFDA_Label01" anchor="default"/>
              <MaskEdit id="med_F_MENU_COST" taborder="11" value="MaskEdit0" position="absolute 766 28 865 49" anchor="default"/>
              <Static id="Static4" text="~" position="absolute 871 28 880 49" anchor="default"/>
              <MaskEdit id="med_T_MENU_COST" taborder="12" value="MaskEdit0" position="absolute 885 28 984 49" anchor="default"/>
              <Static id="Static1" text="레시피명" position="absolute 280 25 348 52" class="sta_WFDA_Label01" anchor="default"/>
              <Static id="Static11" text="상위건수" position="absolute 509 25 579 52" class="sta_WFDA_Label01" anchor="default"/>
              <MaskEdit id="med_Topcnt" taborder="10" position="absolute 581 28 698 49" anchor="default"/>
              <MaskEdit id="me_MENU_F_DATE" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="5" type="string" userdata="div_1.btn_MENU_F_DATE" position="absolute 69 28 148 49" class="msk_WF_Essential" anchor="default"/>
              <Button id="btn_MENU_F_DATE" onclick="btn_Date_OnClick" taborder="6" userdata="div_1.me_MENU_F_DATE" position="absolute 145 28 166 49" class="btn_WF_calEssential" text="" image="" anchor="default" tabstop="false"/>
              <MaskEdit id="me_MENU_T_DATE" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="7" type="string" userdata="div_1.btn_MENU_T_DATE" position="absolute 182 28 261 49" class="msk_WF_Essential" anchor="default"/>
              <Button id="btn_MENU_T_DATE" onclick="btn_Date_OnClick" taborder="8" userdata="div_1.me_MENU_T_DATE" position="absolute 257 28 278 49" class="btn_WF_calEssential" text="" image="" anchor="default" tabstop="false"/>
              <Edit id="ed_RECIPE" taborder="9" position="absolute 350 28 507 49" anchor="default"/>
              <Edit id="ed_Upjang" imemode="none" onkeydown="fn_edBtn_OnKeyDown" readonly="true" taborder="0" position="absolute 69 2 258 23" class="edt_WF_Essential" anchor="default"/>
              <Button id="btn_Upjang" onclick="fn_edBtn_OnClick" taborder="1" text="" position="absolute 257 2 278 23" class="btn_WF_popSearchEssential" image="" anchor="default" tabstop="false"/>
              <Static id="st_Upjang" text="사 업 장" userdata="strQuery_FMUpjang" position="absolute -1 -1 67 26" class="sta_WFDA_Label01" anchor="default"/>
              <Static id="Static0" text="식     당" position="absolute 280 -1 348 26" class="sta_WFDA_Label01" anchor="default"/>
              <Combo codecolumn="SUBINV_CODE" datacolumn="SUBINV_NAME_DISP" id="cbo_HALL_CD" index="0" innerdataset="ds_SUBINVENTORY" taborder="2" position="absolute 350 2 507 23" class="cmb_WF_Essential" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Div id="div_2" taborder="2" text="Div0" visible="false" position="absolute 44 66 1205 119" scrollbars="none" style="border:1 solid #c3c3c3ff ;">
          <Layouts>
            <Layout>
              <Static id="Static12" class="sta_WFDA_Labelbg" position="absolute -1 25 1160 52" anchor="default"/>
              <Static id="Static08" class="sta_WFDA_Labelbg" position="absolute -1 -1 1160 26" anchor="default"/>
              <Static id="Static6" text="코  너" position="absolute 280 25 348 52" class="sta_WFDA_Label01" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_CORNER" index="0" innerdataset="ds_CORNER2" taborder="8" position="absolute 350 28 507 49" anchor="default" class="cmb_WF_Essential" displayrowcount="15"/>
              <Static id="Static7" text="~" position="absolute 1044 2 1052 23" anchor="default"/>
              <MaskEdit id="med_F_MENU_COST" taborder="11" value="MaskEdit0" position="absolute 940 28 1039 49" anchor="default"/>
              <Static id="Static4" text="~" position="absolute 1044 28 1053 49" anchor="default"/>
              <MaskEdit id="med_T_MENU_COST" taborder="12" value="MaskEdit0" position="absolute 1058 28 1157 49" anchor="default"/>
              <Static id="Static1" text="레시피명" position="absolute 509 25 579 52" class="sta_WFDA_Label01" anchor="default"/>
              <Edit id="ed_MENU_NAME" taborder="10" position="absolute 766 28 865 49" anchor="default"/>
              <Static id="Static9" text="식 단 명" position="absolute 700 25 764 52" class="sta_WFDA_Label01" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_MENU_TYPE" index="0" innerdataset="ds_MENU_TYPE" taborder="2" position="absolute 766 2 865 23" anchor="default" class="cmb_WF_Essential" displayrowcount="15"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_COST_TYPE" index="0" innerdataset="ds_COST_TYPE" taborder="1" position="absolute 581 2 698 23" anchor="default" class="cmb_WF_Essential" displayrowcount="15"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_MENU_CLASS" index="0" innerdataset="ds_MENU_CLASS" taborder="13" position="absolute 350 2 507 23" anchor="default" class="cmb_WF_Essential" displayrowcount="15"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" id="cbo_SType2" index="0" innerdataset="ds_SType2" onitemchanged="div_2_cbo_SType2_OnChanged" taborder="0" position="absolute 69 2 278 23" anchor="default" class="cmb_WF_Essential" displayrowcount="15"/>
              <Static id="Static10" text="원가유형" position="absolute 509 -1 579 26" class="sta_WFDA_Label01" anchor="default"/>
              <Static id="Static11" text="식단유형" position="absolute 700 -1 764 26" class="sta_WFDA_Label01" anchor="default"/>
              <MaskEdit id="me_MENU_F_DATE" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="3" type="string" userdata="div_2.btn_MENU_F_DATE" position="absolute 940 2 1019 23" anchor="default" class="msk_WF_Essential"/>
              <Button id="btn_MENU_F_DATE" onclick="btn_Date_OnClick" taborder="4" userdata="div_2.me_MENU_F_DATE" position="absolute 1018 2 1039 23" class="btn_WF_calEssential" text="" image="" anchor="default" tabstop="false"/>
              <MaskEdit id="me_MENU_T_DATE" mask="####-##-##" oneditclick="g_Date_OnFocus" onsetfocus="g_Date_OnFocus" onkillfocus="g_Date_OnKillFocus" taborder="5" type="string" userdata="div_2.btn_MENU_T_DATE" position="absolute 1058 2 1137 23" anchor="default" class="msk_WF_Essential"/>
              <Button id="btn_MENU_T_DATE" onclick="btn_Date_OnClick" taborder="6" userdata="div_2.me_MENU_T_DATE" position="absolute 1136 2 1157 23" class="btn_WF_calEssential" text="" image="" anchor="default" tabstop="false"/>
              <Edit id="ed_RECIPE" taborder="9" position="absolute 581 28 698 49" anchor="default" class="edt_WF_Essential"/>
              <Static id="Static5" text="구  분" position="absolute -1 -1 67 26" class="sta_WFDA_Label01" anchor="default"/>
              <Static id="Static0" text="분  류" position="absolute 280 -1 348 26" class="sta_WFDA_Label01" anchor="default"/>
              <Static id="Static2" text="끼  니" position="absolute -1 25 67 52" class="sta_WFDA_Label01" anchor="default"/>
              <Combo codecolumn="CODE" datacolumn="CODE_NAME" enable="false" id="cbo_MEAL" index="0" innerdataset="ds_MEAL2" taborder="7" position="absolute 69 28 278 49" anchor="default" class="cmb_WF_Essential" displayrowcount="15"/>
              <Static id="Static3" text="식단원가" class="sta_WFDA_Label01" position="absolute 868 25 938 52" anchor="default"/>
              <Static id="Static8" text="기      간" class="sta_WFDA_Label01" position="absolute 868 -1 938 26" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Static id="Static09" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 44 119 994 124"/>
        <Static id="Static11" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 44 298 994 303"/>
        <Static id="Static16" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 12 479 1210 494"/>
        <Static id="Static15" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 44 521 1202 526"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_Master" oncolumnchanged="ds_Master_OnColumnChanged">
        <ColumnInfo>
          <Column id="CORNER" size="20" type="STRING"/>
          <Column id="CORNER_NAME" size="100" type="STRING"/>
          <Column id="CUR_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="HALL_CD" size="20" type="STRING"/>
          <Column id="HALL_NAME" size="50" type="STRING"/>
          <Column id="MEAL" size="20" type="STRING"/>
          <Column id="MEAL_NAME" size="100" type="STRING"/>
          <Column id="MENU_CD" size="20" type="STRING"/>
          <Column id="MENU_DATE" size="8" type="STRING"/>
          <Column id="PAST_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_INFO" size="4000" type="STRING"/>
          <Column id="UPJANG" size="22" type="BIGDECIMAL"/>
          <Column id="WDESC" size="100" type="STRING"/>
          <Column id="CHK" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_input" oncolumnchanged="ds_input_OnColumnChanged">
        <ColumnInfo>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="UPJANG_NM" size="256" type="STRING"/>
          <Column id="SUBINV_CODE" size="256" type="STRING"/>
          <Column id="MEAL1" size="256" type="STRING"/>
          <Column id="CORNER1" size="256" type="STRING"/>
          <Column id="MENU_F_DATE1" size="256" type="STRING"/>
          <Column id="MENU_T_DATE1" size="256" type="STRING"/>
          <Column id="RECIPE_NAME1" size="256" type="STRING"/>
          <Column id="SCHEDULE" size="256" type="STRING"/>
          <Column id="TOPCNT" size="256" type="STRING"/>
          <Column id="MENU_FEATURE" size="256" type="STRING"/>
          <Column id="STYPE2" size="256" type="STRING"/>
          <Column id="MENU_CLASS" size="256" type="STRING"/>
          <Column id="COST_TYPE" size="256" type="STRING"/>
          <Column id="MENU_TYPE" size="256" type="STRING"/>
          <Column id="MEAL2" size="256" type="STRING"/>
          <Column id="CORNER2" size="256" type="STRING"/>
          <Column id="MENU_F_DATE2" size="256" type="STRING"/>
          <Column id="MENU_T_DATE2" size="256" type="STRING"/>
          <Column id="RECIPE_NAME2" size="256" type="STRING"/>
          <Column id="MENU_NAME" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="FILEURL" size="256" type="STRING"/>
          <Column id="GBN" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CORNER1"/>
            <Col id="CORNER2"/>
            <Col id="COST_TYPE"/>
            <Col id="FILEURL"/>
            <Col id="GBN"/>
            <Col id="MEAL"/>
            <Col id="MEAL1"/>
            <Col id="MEAL2"/>
            <Col id="MENU_CLASS"/>
            <Col id="MENU_F_DATE1"/>
            <Col id="MENU_F_DATE2"/>
            <Col id="MENU_FEATURE"/>
            <Col id="MENU_NAME"/>
            <Col id="MENU_T_DATE1"/>
            <Col id="MENU_T_DATE2"/>
            <Col id="MENU_TYPE"/>
            <Col id="RECIPE_NAME1"/>
            <Col id="RECIPE_NAME2"/>
            <Col id="SCHEDULE"/>
            <Col id="STYPE2"/>
            <Col id="SUBINV_CODE"/>
            <Col id="TOPCNT"/>
            <Col id="UPJANG"/>
            <Col id="UPJANG_NM"/>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_SType">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NAME">사업장식단</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NAME">표준식단</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MEAL2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_COST_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_TYPE">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RECIPE_List">
        <ColumnInfo>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_SUBINVENTORY"/>
      <Dataset id="ds_Detail">
        <ColumnInfo>
          <Column id="CUR_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="FEATURE_NAME" size="100" type="STRING"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PAST_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Detail2" oncolumnchanged="ds_Detail2_OnColumnChanged" onrowposchanged="ds_OnRowPosChanged">
        <ColumnInfo>
          <Column id="CUT_SPEC" size="20" type="STRING"/>
          <Column id="DISH_INFO" size="20" type="STRING"/>
          <Column id="DISUSE_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="EDIBLE_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_CODE" size="12" type="STRING"/>
          <Column id="ITEM_COST" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_NAME" size="200" type="STRING"/>
          <Column id="ITEM_RATE" size="22" type="BIGDECIMAL"/>
          <Column id="ITEM_SIZE" size="100" type="STRING"/>
          <Column id="ITEM_SPEC" size="0" type="STRING"/>
          <Column id="MARGIN_PRICE" size="22" type="BIGDECIMAL"/>
          <Column id="NEED_QTY" size="22" type="BIGDECIMAL"/>
          <Column id="PO_UOM" size="10" type="STRING"/>
          <Column id="RECIPE_CD" size="20" type="STRING"/>
          <Column id="RECIPE_NAME" size="50" type="STRING"/>
          <Column id="RESTRICT_YN" size="1" type="STRING"/>
          <Column id="SINGLE_MENU_CD" size="20" type="STRING"/>
          <Column id="UNIT_COST" size="22" type="BIGDECIMAL"/>
          <Column id="RECIPE_SEQ" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CType">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NAME">레시피포함</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NAME">레시피미포함</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_SType2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="CODE">1</Col>
            <Col id="CODE_NAME">한화표준식단</Col>
          </Row>
          <Row>
            <Col id="CODE">3</Col>
            <Col id="CODE_NAME">본사표준식단</Col>
          </Row>
          <Row>
            <Col id="CODE">2</Col>
            <Col id="CODE_NAME">추천식단</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_MEAL1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list" oncolumnchanged="ds_list_OnColumnChanged">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
          <Column id="RECIPE_INFO" size="256" type="STRING"/>
          <Column id="MENU_ID" size="256" type="STRING"/>
          <Column id="COPY_TYPE" size="256" type="STRING"/>
          <Column id="UPJANG" size="256" type="STRING"/>
          <Column id="MENU_CD" size="256" type="STRING"/>
          <Column id="ORI_MENU_DATE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_RECIPE_LINK"/>
      <Dataset id="ds_MEAL3">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER3">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER4">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_Result">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="HALL_NAME" size="256" type="STRING"/>
          <Column id="MEAL_NAME" size="256" type="STRING"/>
          <Column id="CORNER_NAME" size="256" type="STRING"/>
          <Column id="RECIPE_CD" size="256" type="STRING"/>
          <Column id="RECIPE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_in"/>
      <Dataset id="ds_ResultDt">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MENU_CLASS2">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_chkMenuList">
        <ColumnInfo>
          <Column id="MENU_DATE" size="256" type="STRING"/>
          <Column id="MEAL" size="256" type="STRING"/>
          <Column id="CORNER" size="256" type="STRING"/>
          <Column id="EXPECT_MEAL_QTY" size="22" type="BIGDECIMAL"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_MEAL">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_CORNER1">
        <ColumnInfo>
          <Column id="CODE" size="256" type="STRING"/>
          <Column id="CODE_NAME" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="div_1_cbo_HALL_CD_value" compid="div_1.cbo_HALL_CD" propid="value" datasetid="ds_input" columnid="SUBINV_CODE"/>
      <BindItem id="div_1_cbo_MEAL_value" compid="div_1.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL1"/>
      <BindItem id="div_1_cbo_CORNER_value" compid="div_1.cbo_CORNER" propid="value" datasetid="ds_input" columnid="CORNER1"/>
      <BindItem id="div_1_med_Topcnt_value" compid="div_1.med_Topcnt" propid="value" datasetid="ds_input" columnid="TOPCNT"/>
      <BindItem id="div_1_me_MENU_F_DATE_value" compid="div_1.me_MENU_F_DATE" propid="value" datasetid="ds_input" columnid="MENU_F_DATE1"/>
      <BindItem id="div_1_me_MENU_T_DATE_value" compid="div_1.me_MENU_T_DATE" propid="value" datasetid="ds_input" columnid="MENU_T_DATE1"/>
      <BindItem id="div_1_ed_RECIPE_value" compid="div_1.ed_RECIPE" propid="value" datasetid="ds_input" columnid="RECIPE_NAME1"/>
      <BindItem id="div_2_cbo_MEAL_value" compid="div_2.cbo_MEAL" propid="value" datasetid="ds_input" columnid="MEAL2"/>
      <BindItem id="div_2_cbo_CORNER_value" compid="div_2.cbo_CORNER" propid="value" datasetid="ds_input" columnid="CORNER2"/>
      <BindItem id="div_2_ed_MENU_NAME_value" compid="div_2.ed_MENU_NAME" propid="value" datasetid="ds_input" columnid="MENU_NAME"/>
      <BindItem id="div_2_cbo_MENU_TYPE_value" compid="div_2.cbo_MENU_TYPE" propid="value" datasetid="ds_input" columnid="MENU_TYPE"/>
      <BindItem id="div_2_cbo_COST_TYPE_value" compid="div_2.cbo_COST_TYPE" propid="value" datasetid="ds_input" columnid="COST_TYPE"/>
      <BindItem id="div_2_cbo_MENU_CLASS_value" compid="div_2.cbo_MENU_CLASS" propid="value" datasetid="ds_input" columnid="MENU_CLASS"/>
      <BindItem id="div_2_cbo_SType2_value" compid="div_2.cbo_SType2" propid="value" datasetid="ds_input" columnid="STYPE2"/>
      <BindItem id="div_2_me_MENU_F_DATE_value" compid="div_2.me_MENU_F_DATE" propid="value" datasetid="ds_input" columnid="MENU_F_DATE2"/>
      <BindItem id="div_2_me_MENU_T_DATE_value" compid="div_2.me_MENU_T_DATE" propid="value" datasetid="ds_input" columnid="MENU_T_DATE2"/>
      <BindItem id="div_2_ed_RECIPE_value" compid="div_2.ed_RECIPE" propid="value" datasetid="ds_input" columnid="RECIPE_NAME2"/>
    </Bind>
    <Script type="xscript4.0"><![CDATA[/*
 ******************************************************************************************
 * 시스템구분   : 메뉴관리/식단관리/식단등록-식단복사
 * 프로그램명   : FMM00207E.XML
 * 기      능   : 식단복사
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04
 * 비      고   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
//=========================================================================================
// [ PART 1 ]
// Form에서 Include 할 내용을 정의
//
//=========================================================================================
include "U_lib::lib_conversionCom.xjs";
//@@컨버터에서 주석처리 #include "lib::sc_comon.js"				// 시스템 공통
//@@컨버터에서 주석처리 #include "LIB::lib_comm_0001.js"		//JAVA 코딩시
//@@컨버터에서 주석처리 #include "LIB::tit_comm_0001.js"		// X-Framework Lib
//@@컨버터에서 주석처리 #include "lib::sc_sql_common.js"		// 공통팝업
//@@컨버터에서 주석처리 #include "lib::fm_common.js"			// FM공통
//=========================================================================================
// [ PART 2 ]
// Form에서 사용될 전역변수를 선언
//
//=========================================================================================
//var fa_UPJANG,fa_UPJANG_NM,fa_SUBINV_CODE,fa_SUBINV_NM,fa_FROM_DT,fa_TO_DT;
var strCopyGubun = "0";		// 0 : 사업장식단, 1 : 한화표준식단, 3 : 본사표준식단, 2 : 기간표준식단
var serverSaveDir = "FSM_SINGLE_MENU_MST";		// 파일패스
var serverSaveUrl;								// 파일패스URL
//=========================================================================================
// [ PART 3 ]
// Form Loading 시 작업 정의
//
//=========================================================================================
function form_onload(obj:Form, e:LoadEventInfo)
{
	gfn_formOnLoad(obj, false);

	// 업데이트 DS
	v_ds_check = "ds_list";
	
	/*	
	fa_UPJANG = "106246";
	fa_UPJANG_NM = "올어바웃";
	fa_SUBINV_CODE = "S1000374";
	fa_SUBINV_NM = "테스트식당";
	fa_FROM_DT = "20080201";
	fa_TO_DT = "20080207";
	*/
	
	// X-Framework : Action 정보 생성 
	fsp_init(this);
	
	// 공통코드 조회
	var v_fil_cond;
	var v_ds = fn_common_code("'FS0023','FS0022','FS0030','FS0031','FS0029','FS0028'","","","all","Y");
	
	// 끼니(ds_MEAL, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0023'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MEAL,v_ds.name);		// 예상식수 팝업용
	
	// 끼니(ds_MEAL, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0023' && SET3=='Y'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MEAL2,v_ds.name);
	
	// 코너(ds_CORNER, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0022' && SET3 =='Y'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_CORNER2,v_ds.name);
	
	// 코너(ds_CORNER, GROUP_CODE : 'FS0028')
	v_fil_cond = "GROUP_CODE == 'FS0022'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_CORNER,v_ds.name);	// 예상식수 팝업용
	
	// 원가유형(ds_COST_TYPE, GROUP_CODE : 'FS0030')
	v_fil_cond = "(GROUP_CODE == 'FS0030') && (CODE_NAME != '전체')";
	//v_fil_cond = "GROUP_CODE == 'FS0030'";
	v_ds.filter(v_fil_cond);
	CopyF(ds_COST_TYPE,v_ds.name);
	
	// 식단유형(ds_MENU_TYPE, GROUP_CODE : 'FS0031')
	v_fil_cond = "(GROUP_CODE == 'FS0031') && (CODE_NAME != '전체')";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_TYPE,v_ds.name);

	// 개별식단분류(ds_MENU_CLASS1, GROUP_CODE : 'FS0028')
	v_fil_cond = "(GROUP_CODE == 'FS0028') && (CODE_NAME != '전체')";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_CLASS1,v_ds.name);
	
	// 기간식단분류(ds_MENU_CLASS1, GROUP_CODE : 'FS0029')
	v_fil_cond = "(GROUP_CODE == 'FS0029') && (CODE_NAME != '전체')";
	v_ds.filter(v_fil_cond);
	CopyF(ds_MENU_CLASS2,v_ds.name);
	
	// 끼니 조회(입력용)
	fn_SearchCommon("fm/fmz:FMS_MEAL_CORNER_S001","","ds_MEAL3=gds_Csqlout","USE_YN='Y' SUBINV_CODE="+wrapQuote(fa_SUBINV_CODE));
	
	// 코너 조회(입력용)
	fn_SearchCommon("fm/fmz:FMS_MEAL_CORNER_S002","","ds_CORNER3=gds_Csqlout","USE_YN='Y' SUBINV_CODE="+wrapQuote(fa_SUBINV_CODE));
	ds_CORNER4.copyData(ds_CORNER3);
		
	// 초기값 셋팅
	ds_input.setColumn(0,"MENU_F_DATE1",fa_FROM_DT);	
	ds_input.setColumn(0,"MENU_T_DATE1",fa_TO_DT);	
	ds_input.setColumn(0,"MENU_F_DATE2",fa_FROM_DT);	
	ds_input.setColumn(0,"MENU_T_DATE2",fa_TO_DT);	
	ds_input.setColumn(0,"STYPE2","1");								// 표준식단->구분 : 개별표준식단
	ds_input.setColumn(0,"UPJANG",fa_UPJANG);	
	ds_input.setColumn(0,"SUBINV_CODE",fa_SUBINV_CODE);						// 사업장식단->식당
	ed_UPJANG_NM.value			= fa_UPJANG_NM;
	ed_SUBINV_NM.value			= fa_SUBINV_NAME;
	div_1.ed_Upjang.userdata 	= fa_UPJANG;						// 사업장식단->사업장코드
	div_1.ed_Upjang.value 		= fa_UPJANG_NM;						// 사업장식단->사업장명
	me_priod.value = fa_FROM_DT + fa_TO_DT;
	
	// 초기값 셋팅
	serverSaveUrl = fsp_getServerDir(serverSaveDir);
	ds_input.setColumn(0,"FILEURL",serverSaveUrl);
	
	div_2.cbo_MEAL.index		= 0;
	div_2.cbo_COST_TYPE.index	= 0;
	div_2.cbo_MENU_TYPE.index	= 0;
	div_2.cbo_MENU_CLASS.index	= 0;
	
	Tab_list.tab2.cbo_MEAL.index = 0;
	ds_CORNER4.filter(fn_GetFilter(-1));
	Tab_list.tab2.cbo_CORNER.index = 0;
	
	// 식당 조회
	fn_SearchCommon("fm/fmz:FMS_SUBINVENTORY_S001","ds_in=ds_input","ds_SUBINVENTORY=gds_Csqlout","");
}

function frm_OnKeyDown(obj:Form, e:KeyEventInfo)
{
	gfn_formKeyDown(obj, e); //(obj,e.fromreferenceobject,e.keycode,e.shiftKey,e.ctrlKey,e.altKey,-1,-1);
}
//=========================================================================================
// [ PART 4 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,도움말,form닫기)
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_Search()
 * 기      능   : [조회버튼] 검색조건에 해당하는 정보를 조회
 ******************************************************************************************
 */
function fn_search(obj:Button, e:ClickEventInfo)
{
	// 조회조건체크
	if(!fn_SearchCheck())
	{
		return;
	}
	
	// 초기화
	ds_Master.clearData();
	ds_Detail.clearData();
	
	// 조회
	var actionName, cmdName, inData, outData, otherArg, callBackFnc, sqlId;
	
	ds_input.setColumn(0, "GBN", iif(rdo_SType.value=="1","0",ds_input.getColumn(0,"STYPE2")));
	//ds_input.setColumn(0, "UPJANG", );

    actionName		= "FMM00207E_S001";
	cmdName			= "U_svc::" + "fm/fmm/FMM00207E_S001.jsp";
	inData			= "ds_input=ds_input";
	outData			= "ds_Master=ds_list";
	otherArg		= "fa_UPJANG=" + wrapQuote(fa_UPJANG);
	callBackFnc		= "fn_afterSearch";

	jsp_transaction(this,actionName, cmdName ,inData ,outData,otherArg,callBackFnc,false,true,false);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_Save()
 * 기      능   : [저장버튼] 저장 시 처리되는 작업
 ******************************************************************************************
 */
function fn_save(obj:Button, e:ClickEventInfo)
{
	var strMsg = "이 작업은 시간이 소요되는 작업입니다.\n계속하시겠습니까?";
	
	//확인
	if(!g_Confirm("03",strMsg))
	{
		return false;
	}
	
	// 저장조건체크
	if(!fn_SaveCheck())
	{
		return;
	}

	var sqlId,inData, outData, otherArg, callBackFnc;
	
	ds_Result.clearData();

	// 파라미터셋팅
	otherArg	= "g_EmpNo=" + wrapQuote(g_EmpNo) + " fa_UPJANG=" + wrapQuote(fa_UPJANG) + " fa_SUBINV_CODE=" + wrapQuote(fa_SUBINV_CODE) + " SaveType=" + wrapQuote(Tab_list.tabindex);
	
	if (Tab_list.tabindex == 1)		// 기간복사
	{
		otherArg	+= " strCopyGubun=" + wrapQuote(strCopyGubun);
		
		if (strCopyGubun == "0" || strCopyGubun == "2")		// 사업장식단,기간표준식단
		{
			var sday,eday;
			
			sday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
			eday = Tab_list.tab2.me_MENU_F_DATE.value;
			
			otherArg	+= " MEAL=" 	+ wrapQuote(gfn_nvl(Tab_list.tab2.cbo_MEAL.value));
			otherArg	+= " CORNER=" 	+ wrapQuote(gfn_nvl(Tab_list.tab2.cbo_CORNER.value));
			otherArg	+= " D_DT=" 	+ wrapQuote(gfn_nvl(G_fn_GapDay(sday, eday)));
		}
	}
	
	// 예상식수 체크
	if(!fn_CheckQty())
	{
		return;
	}
	
	// 서비스셋팅
	if (rdo_CType.value=="1")		// 레시피포함
	{
		sqlId	= "U_svc::" + "fm/fmm/FMM00207E_T001.jsp";
	}
	else							// 레시피미포함
	{
		sqlId	= "U_svc::" + "fm/fmm/FMM00207E_T002.jsp";
	}
    
    inData		= "ds_list=ds_list ds_input=ds_input ds_Result=ds_Result ds_ResultDt=ds_ResultDt";
    outData		= "ds_Result=ds_Result ds_ResultDt=ds_ResultDt";
    
	//transaction("FMM00207E",sqlId,inData,outData,otherArg,"fn_SaveCallback");
	jsp_transaction(this,"FMM00207E",sqlId,inData,outData,otherArg,"fn_SaveCallbackCopy2");
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_close()
 * 기      능   : [닫기버튼] 화면을 닫을때 처리되는 작업
 ******************************************************************************************
 */
function fn_close(obj:Button, e:ClickEventInfo)
{
	this.close();
}
//=========================================================================================
// [ PART 5 ]
// Detail Process Event 정의 ( User Define function )
//
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchSub(nRow)
 * 입      력   : nRow = Master Row
 * 반      환   : 없음
 * 기      능   : 상세내역 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_SearchSub(nRow)
{
	// 초기화
	ds_Detail.clearData();
	
	var actionName, cmdName, inData, outData, otherArg, callBackFnc, sqlId;

    actionName		= "FMM00207E_S002";
	cmdName			= "U_svc::" + "fm/fmm/FMM00207E_S002.jsp";
	outData			= "ds_Detail=ds_list";
	
	otherArg		= "fa_UPJANG=" + wrapQuote(fa_UPJANG) + " GBN=" + wrapQuote(ds_Master.getColumn(nRow,"GBN"));
	otherArg		+= " MENU_CD=" + wrapQuote(ds_Master.getColumn(nRow,"MENU_CD"));

	if (rdo_SType.value=="1")
	{
		otherArg	+= " UPJANG=" + wrapQuote(ds_Master.getColumn(nRow,"UPJANG"));
	}
	
	jsp_transaction(this,actionName, cmdName ,inData ,outData,otherArg,callBackFnc,false,true,false);
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchCommon(sqlId,inDS,outDS,otherArg)
 * 입      력   : sqlId = 실행할 sqlID
				  inDS	= input DS
				  outDS	= out DS
				  otherArg = arg
 * 반      환   : 없음
 * 기      능   : 코드조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_SearchCommon(sqlId,inDS,outDS,otherArg)
{
	fsp_clear(this);
	fsp_addSearch(this, sqlId);
	http.Sync = true;
	fsp_callService(this, "", "", inDS, outDS ,otherArg, "");
	http.Sync = false;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_GetFilter(nRow)
 * 입      력   : nRow = 그리드의 현재로우
 * 반      환   : 없음
 * 기      능   : 필터리턴
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-12  
 ******************************************************************************************
 */
function fn_GetFilter(nRow)
{
	var strFilter;
	
	if (nRow == -1)
	{
		strFilter = "MEAL=="+wrapQuote(gfn_nvl(Tab_list.tab2.cbo_MEAL.value));
	}
	else
	{
		strFilter = "MEAL=="+wrapQuote(gfn_nvl(ds_list.getColumn(nRow,"MEAL")));
	}
	
	return strFilter;
}
/*
 ******************************************************************************************
 * 함  수  명   : fn_afterSearch()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 사업장 조회 후 실행 함수
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function fn_afterSearch(errCode, errMsg)
{
	// 식단원가 filter
	if (ds_Master.rowcount > 0)
	{
		var strFilter = "";			// Filter Script
		
		if (rdo_SType.value=="1")
		{
			if (toNumber(div_1.med_F_MENU_COST.value)>0)
			{
				strFilter	+= "CUR_PRICE>=" + toNumber(gfn_nvl(div_1.med_F_MENU_COST.value)) + " ";
			}
			
			if (toNumber(div_1.med_T_MENU_COST.value)>0)
			{
				strFilter	+= " CUR_PRICE<=" + toNumber(gfn_nvl(div_1.med_T_MENU_COST.value));
			}
		}
		else if (rdo_SType.value=="2" && ds_input.getColumn(0,"STYPE2") != "2")
		{
			if (toNumber(gfn_nvl(div_2.med_F_MENU_COST.value))>0)
			{
				strFilter	+= "MENU_COST>=" + toNumber(gfn_nvl(div_2.med_F_MENU_COST.value)) + " ";
			}
			
			if (toNumber(div_2.med_T_MENU_COST.value)>0)
			{
				strFilter	+= " MENU_COST<=" + toNumber(gfn_nvl(div_2.med_T_MENU_COST.value));
			}
		}
		
		strFilter	= gfn_replace(strFilter,"  "," && ");
		
		ds_Master.filter(strFilter);
	}
	
	// 그리드셋팅
	if (rdo_SType.value=="1")		//사업장식단
	{
		grd_Master.formatid = "Default";
		grd_Detail.formatid = "Default";
	}
	else							
	{
		if (ds_input.getColumn(0,"STYPE2") != "2")
		{
			if (ds_input.getColumn(0,"STYPE2")=="1")	// 본사표준
			{
				grd_Master.setFormatColProperty(4,"size",85);
				grd_Master.setFormatColProperty(5,"size",46);
			}
			else
			{
				grd_Master.setFormatColProperty(4,"size",131);
				grd_Master.setFormatColProperty(5,"size",0);
			}
			grd_Master.formatid = "Default0";
		}
		else
		{
			grd_Master.formatid = "Default1";	//기간표준식단
		}
		
		grd_Detail.formatid = "Default0";
	}
	
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SaveCallbackCopy2()
 * 입      력   : errCode 	= 에러코드
				  errMsg	= 에러메세지
 * 반      환   : 없음
 * 기      능   : 사업장 조회 후 실행 함수
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function fn_SaveCallbackCopy2(errCode, errMsg)
{
	// 식단원가 filter
	if (errCode != 0)
	{
		//g_Message("EE", errMsg);
		return;
	}
	
	if (ds_Result.rowcount + ds_ResultDt.rowcount == 0)
	{
		g_Message("03", "");
	}
	else
	{
		gfn_dialog("", "U_FMM::FMM00208P.xfdl",{OBJ_DS_RESULT:ds_Result});
	}
	
	this.close();
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SearchCheck()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 조회시 필수조회조건 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_SearchCheck()
{
	if (rdo_SType.value == "1")					// 1: 사업장식단
	{
		// 사업장
		if (gfn_length(div_1.ed_Upjang.userdata)==0)
		{
			g_Message("EE", "사업장을 선택하세요.");
			div_1.ed_Upjang.setFocus();
			return false;
		}
		
		// 식당
		if (gfn_length(ds_input.getColumn(0,"SUBINV_CODE"))==0)
		{
			g_Message("EE", "식당을 선택하세요.");
			div_1.cbo_HALL_CD.setFocus();
			return false;
		}
	
		// 기간 - from
		if (gfn_length(ds_input.getColumn(0,"MENU_F_DATE1"))==0)
		{
			g_Message("EE", "기간을 입력하세요.");
			div_1.me_MENU_F_DATE.setFocus();
			return false;
		}

		// 기간 -  to
		if (gfn_length(ds_input.getColumn(0,"MENU_T_DATE1"))==0)
		{
			g_Message("EE", "기간을 입력하세요.");
			div_1.me_MENU_T_DATE.setFocus();
			return false;
		}
		
		if (ds_input.getColumn(0,"MENU_F_DATE1")>ds_input.getColumn(0,"MENU_T_DATE1"))
		{
			g_Message("EE", "검색기간을 확인해 주십시오.");
			div_1.me_MENU_F_DATE.setFocus();
			return false;
		}
		
		if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE1"),1)<ds_input.getColumn(0,"MENU_T_DATE1"))
		{
			g_Message("EE", "기간은 최대 1개월입니다.");
			div_1.me_MENU_T_DATE.setFocus();
			return false;
		}
	}
	else										// 2 : 표준식단
	{
		// 구분
		if (gfn_length(ds_input.getColumn(0,"STYPE2"))==0)
		{
			g_Message("EE", "구분을 선택하세요.");
			div_2.cbo_SType2.setFocus();
			return false;
		}
		
		// 분류
		if (gfn_length(ds_input.getColumn(0,"MENU_CLASS"))==0)
		{
			g_Message("EE", "분류를 선택하세요.");
			div_2.cbo_MENU_CLASS.setFocus();
			return false;
		}
			
		if (div_2.cbo_SType2.value == "2")	// 기간표준식단
		{
			// 원가유형
			if (gfn_length(ds_input.getColumn(0,"COST_TYPE"))==0)
			{
				g_Message("EE", "원가유형을 선택하세요.");
				div_2.cbo_COST_TYPE.setFocus();
				return false;
			}
			
			// 식단유형
			if (gfn_length(ds_input.getColumn(0,"MENU_TYPE"))==0)
			{
				g_Message("EE", "식단유형을 선택하세요.");
				div_2.cbo_MENU_TYPE.setFocus();
				return false;
			}
			
			// 기간 - from
			if (gfn_length(ds_input.getColumn(0,"MENU_F_DATE2"))==0)
			{
				g_Message("EE", "기간을 입력하세요.");
				div_2.me_MENU_F_DATE.setFocus();
				return false;
			}
			
			// 기간 -  to
			if (gfn_length(ds_input.getColumn(0,"MENU_T_DATE2"))==0)
			{
				g_Message("EE", "기간을 입력하세요.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
			
			if (ds_input.getColumn(0,"MENU_F_DATE2")>ds_input.getColumn(0,"MENU_T_DATE2"))
			{
				g_Message("EE", "검색기간을 확인해 주십시오.");
				div_2.me_MENU_F_DATE.setFocus();
				return false;
			}	
					
			if (gfn_addMonth(ds_input.getColumn(0,"MENU_F_DATE2"),1)<ds_input.getColumn(0,"MENU_T_DATE2"))
			{
				g_Message("EE", "조회기간은 최대 1개월입니다.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
		}
	}
    
    return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_SaveCheck()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 저상시 필수입력 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_SaveCheck()
{
	// 조회조건체크
	if(!fn_SearchCheck())
	{
		return false;
	}
	
	var strGDt1,strGDt2;
	
	if (Tab_list.tabindex == 0)		// 개별복사시
	{
		var nFRow;
		
		if (ds_list.rowcount == 0)
		{
			g_Message("EE", "복사할 데이터가 없습니다.");
			Tab_list.tab1.grd_Save.setFocus();
			return false;
		}
		
		// 제공일
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(MENU_DATE))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "제공일을 입력해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(1);
			return false;
		}
		
		// 끼니
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(MEAL))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "끼니를 선택해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(2);
			return false;
		}
		
		// 코너
		nFRow = ds_list.findRowExpr("gfn_length(gfn_trim(CORNER))==0");
		if( nFRow !=-1 )
		{
			ds_list.rowposition = nFRow;
			g_Message("EE", "코너를 선택해주십시오.");
			Tab_list.tab1.grd_Save.setFocus();
			Tab_list.tab1.grd_Save.setCellPos(3);
			return false;
		}
	}
	else							// 기간복사시에는 끼니 코너도체크
	{
		var strSType = rdo_SType.value;
		
		// 끼니
		if (gfn_length(ds_input.getColumn(0,"MEAL" + strSType))==0)
		{
			g_Message("EE", "끼니를 선택하세요.");
			eval("div_" + strSType).cbo_MEAL.setFocus();
			return false;
		}
		
		// 코너
		if (gfn_length(ds_input.getColumn(0,"CORNER" + strSType))==0)
		{
			g_Message("EE", "코너를 선택하세요.");
			eval("div_" + strSType).cbo_CORNER.setFocus();
			return false;
		}
		
		// 복사대상 - 끼니
		if (gfn_length(Tab_list.tab2.cbo_MEAL.value)==0)
		{
			g_Message("EE", "끼니를 선택하세요.");
			Tab_list.tab2.cbo_MEAL.setFocus();
			return false;
		}
		
		if (strCopyGubun == "0")					// 0: 사업장식단
		{
			// 기간
			strGDt1 = G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE1"), ds_input.getColumn(0,"MENU_T_DATE1"));
			
			if (strGDt1>6)
			{
				g_Message("EE", "기간복사시 일주일 이내로 복사 가능합니다.");
				div_1.me_MENU_T_DATE.setFocus();
				return false;
			}
			
			
		}
		else
		{
			// 기간
			strGDt1 = G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE2"), ds_input.getColumn(0,"MENU_T_DATE2"));
			
			if (G_fn_GapDay(ds_input.getColumn(0,"MENU_F_DATE2"), ds_input.getColumn(0,"MENU_T_DATE2"))>6)
			{
				g_Message("EE", "기간복사시 일주일 이내로 복사 가능합니다.");
				div_2.me_MENU_T_DATE.setFocus();
				return false;
			}
		}
		
		// 검색기간과 기간복사 기간체크
		strGDt2 = G_fn_GapDay(Tab_list.tab2.me_MENU_F_DATE.value, Tab_list.tab2.me_MENU_T_DATE.value);
		//trace("strGDt1 : " + strGDt1 + " strGDt2 : " + strGDt2);
		if (strGDt1 != strGDt2)
		{
			g_Message("EE", "복사원본과 복사대상의 기간이 다릅니다.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
		
		// 복사대상 - 코너
		if (gfn_length(Tab_list.tab2.cbo_CORNER.value)==0)
		{
			g_Message("EE", "코너를 선택하세요.");
			Tab_list.tab2.cbo_CORNER.setFocus();
			return false;
		}
		
		// 복사대상 - 기간
		if (gfn_length(Tab_list.tab2.me_MENU_F_DATE.value)==0)
		{
			g_Message("EE", "기간를 선택하세요.");
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
		
		if (Tab_list.tab2.me_MENU_F_DATE.value < fa_FROM_DT || Tab_list.tab2.me_MENU_T_DATE.value > fa_TO_DT)
		{
			var strmsg;
			
			strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
			strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
			strmsg += "를 입력해 주십시오." ;
			
			g_Message("EE", strmsg);
			Tab_list.tab2.me_MENU_F_DATE.setFocus();
			return false;
		}
	}
	
    return true;
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_formSetting()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 화면버튼셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-10  
 ******************************************************************************************
 */
function fn_formSetting()
{
	var btp1,btp2;
	
	if (rdo_SType.value == "1")					// 1: 사업장식단
	{
		div_1.visible = true;
		div_2.visible = false;
		
		if (Tab_list.tabindex == 0)		// 개별복사
		{
			btp1 = true;
			
		}
		else							// 기간복사
		{
			btp1 = false;
		}
		
		div_1.ed_RECIPE.enable 			= btp1;
		div_1.med_Topcnt.enable 		= btp1;
		div_1.med_F_MENU_COST.enable 	= btp1;
		div_1.med_T_MENU_COST.enable 	= btp1;
	}
	else										// 2 : 기간표준식단
	{
		div_1.visible = false;
		div_2.visible = true;
		
		if (div_2.cbo_SType2.value != "2")	// 기간표준식단
		{
			Tab_list.tabindex = 0;
			
			btp1 = false;
			btp2 = true;
		}
		else								// 표분
		{
			btp1 = true;
			btp2 = false;
		}
		
		// 필수여부이미지
// 		div_2.img_imp1.visible = btp1;
// 		div_2.img_imp2.visible = btp1;
// 		div_2.img_imp3.visible = btp1;
		//div_2.img_imp4.Visible = btp1;
		//div_2.img_imp5.Visible = btp1;
		
		div_2.cbo_COST_TYPE.enable 		= btp1;
		div_2.cbo_MENU_TYPE.enable		= btp1;
		div_2.me_MENU_F_DATE.enable 	= btp1;
		div_2.me_MENU_T_DATE.enable 	= btp1;
		div_2.btn_MENU_F_DATE.enable 	= btp1;
		div_2.btn_MENU_T_DATE.enable 	= btp1;
		div_2.cbo_MEAL.enable 			= btp1;
		div_2.cbo_CORNER.enable 		= btp1;
		div_2.ed_RECIPE.enable 			= btp2;
		div_2.ed_MENU_NAME.enable 		= btp2;
		div_2.med_F_MENU_COST.enable 	= btp2;
		div_2.med_T_MENU_COST.enable 	= btp2;
	}
	
	if (Tab_list.tabindex == 0)		// 개별복사 : 선택
	{
		grd_Master.setFormatColProperty(1,"size",30);
	}
	else							// 기간복사 : 선택제거
	{
		grd_Master.setFormatColProperty(1,"size",0);
	}
	
	strCopyGubun = iif(rdo_SType.value=="1","0",ds_input.getColumn(0,"STYPE2"));
}

/*
 ******************************************************************************************
 * 함  수  명   : fn_CheckQty()
 * 입      력   : 없음
 * 반      환   : 없음
 * 기      능   : 예상식수 체크 및 없는 경우 저장 팝업 호출
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-05-22  
 ******************************************************************************************
 */
function fn_CheckQty()
{
	// 초기화
	ds_chkMenuList.clearData();
	
	var actionName, cmdName, inData, outData, otherArg, callBackFnc, sqlId;
	
	if (Tab_list.tabindex == 0)		// 개별복사시
	{
		Copy(ds_chkMenuList,ds_list);
		
		actionName		= "FMM00207E_S003";
		cmdName			= "U_svc::" + "fm/fmm/FMM00207E_S003.jsp";
		inData			= "ds_input=ds_input ds_chkMenuList=ds_chkMenuList";
		outData			= "ds_chkMenuList=ds_chkMenuList";
		
		otherArg		= "fa_UPJANG=" + wrapQuote(fa_UPJANG) + " fa_SUBINV_CODE=" + wrapQuote(fa_SUBINV_CODE);
	}
	else
	{
		actionName		= "FMM00207E_S004";
		cmdName			= "U_svc::" + "fm/fmm/FMM00207E_S004.jsp";
		inData			= "ds_input=ds_input";
		outData			= "ds_chkMenuList=ds_chkMenuList";
		
		
		var sday,eday;
		
		sday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
		eday = Tab_list.tab2.me_MENU_F_DATE.value;
		
		otherArg		= "fa_UPJANG=" 		+ wrapQuote(fa_UPJANG) + " fa_SUBINV_CODE=" + wrapQuote(fa_SUBINV_CODE);
		otherArg		+= " FROM_DT=" 		+ wrapQuote(Tab_list.tab2.me_MENU_F_DATE.value);
		otherArg		+= " TO_DT=" 		+ wrapQuote(Tab_list.tab2.me_MENU_T_DATE.value);
		otherArg		+= " MEAL=" 		+ wrapQuote(Tab_list.tab2.cbo_MEAL.value);
		otherArg		+= " CORNER=" 		+ wrapQuote(Tab_list.tab2.cbo_CORNER.value);
		otherArg		+= " D_DT=" 		+ wrapQuote(G_fn_GapDay(sday, eday));
		otherArg		+= " strCopyGubun=" + wrapQuote(strCopyGubun);	
	}
	//callBackFnc = "fn_SaveCallbackCopy1";
	
	jsp_transaction(this,actionName, cmdName ,inData ,outData,otherArg,callBackFnc,false,true,true);
	
	if (ds_chkMenuList.rowcount == 0)
	{
		return true;
	}
	else
	{
		ds_chkMenuList.addColumn("EXPECT_MEAL_QTY","DECIMAL",22);
		var args      = {OBJ_DS_CHKMENULIST:ds_chkMenuList
		                ,fa_UPJANG:fa_UPJANG
		                ,fa_SUBINV_CODE:fa_SUBINV_CODE
		                ,OBJ_DS_MEAL:ds_MEAL
		                ,OBJ_DS_CORNER:ds_CORNER
		                };
		var strResult = gfn_dialog("", "U_FMM::FMM00207P.xfdl",args);
		
		//trace(strResult);
		if ( gfn_isNull(strResult) ) 	strResult = 'cancel';
		
		if (strResult == "ok")
		{
			return true;
		}
		else
		{
			return false;
		}
	}
}
//=========================================================================================
// [ PART 6 ]
// component Event 정의 ( User Define function )
// --> component Event의 기요,기능,동작 등 상세내용은 MiPlatform 메뉴얼을 참조하시기 바랍니다.
//=========================================================================================
/*
 ******************************************************************************************
 * 함  수  명   : grd_List_OnHeadClick(obj,nCell,nX,nY,nPivotIndex)
 * 기      능   : 그리드헤드 더블클릭시 Sort
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function grd_List_OnHeadClick(obj:Grid, e:GridClickEventInfo)
{
	gfn_gridSort(obj, e); //(eval(obj.binddataset), obj, e.cell);
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_pop1_OnClick(obj)
 * 기      능   : 팝업버튼 클릭 -> 사업장 조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-05  
 ******************************************************************************************
 */
function fn_edBtn_OnClick(obj:Button, e:ClickEventInfo)
{
	var sAddWhere = "";
	
	switch(obj.name)
	{	
		case "btn_Upjang":
			if (application.g_UserKind == '사업장'){
//				sAddWhere = " AND A.USE_YN = 'Y' AND A.MAIN_UPJANG = " + g_Main_Upjang;			
//				sAddWhere += " AND ( A.UPJANG = " + global.g_Upjang + " OR EXISTS (SELECT 1 FROM FMS_USER_UPJANG B WHERE B.USE_YN = 'Y' AND B.UPJANG = A.UPJANG AND B.SABUN = '" + global.g_EmpNo + "') )";
				//sAddWhere = " AND T.GROUP_KEY IN (SELECT GROUP_KEY FROM FMM_MENU_SHARE_UPJANG WHERE UPJANG = " + "'" + global.g_Upjang + "'" + ")" + "GROUP BY T.UPJANG,S.UPJANGNM_DISP) S WHERE (1=1)";				
				div_1.st_Upjang.userdata = "strQuery_FM_MENU_Upjang";
				sAddWhere = " ";
				break;
			}
			else if (application.g_UserKind == '본사'){
				div_1.st_Upjang.userdata = "strQuery_FM_MENU_Upjang";
			    sAddWhere = " ";
				//sAddWhere = " AND T.GROUP_KEY IN (SELECT GROUP_KEY FROM FMM_MENU_SHARE_UPJANG WHERE UPJANG = " + "'" + global.g_Upjang + "'" + ")" + "GROUP BY T.UPJANG,S.UPJANGNM_DISP) S WHERE (1=1)";
				break;
			}
			
			if (application.g_UserKind == '본부'){
			    div_1.st_Upjang.userdata = "strQuery_FMUpjang";
				sAddWhere = " AND A.USE_YN = 'Y' AND  EXISTS (SELECT 1 FROM FMS_UPJANG WHERE MAIN_UPJANG = A.MAIN_UPJANG AND UPJANG = " + fa_UPJANG + ")" ;
				break;
			}
		
		default:
			break;
	}
	//fm공통 팝업클릭 호출
	if (ffn_btn_OnClick(obj, sAddWhere, "div_1.")) fn_Trigger_edBtn(eval("div_1.ed_" + gfn_subStr(obj.name, 4)));
	
	if( obj.name == "btn_Upjang" ) 
	{
		ds_input.setColumn(0,"UPJANG",div_1.ed_Upjang.userdata);
	}	
}

function fn_edBtn_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	ffn_ed_OnKeyDown(obj,e.keycode, "div_1.");
	//Del의 경우 뒷처리
	if (e.keycode == 46) fn_Trigger_edBtn(obj);		
	else if( obj.name == "ed_Upjang" ) 
	{
		if ( e.keycode == 13 ) 
		{
		}		
	}	
}

function fn_Trigger_edBtn(obj)
{
}

/*
 ******************************************************************************************
 * 함  수  명   : rdo_SType_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 식단에 따라 검색조건 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function rdo_SType_OnChanged(obj:Radio, e:ItemChangeEventInfo)
{
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : sp_line_OnMove(obj,nBeforePos,nPos)
 * 기      능   : 그리드 리사이즈시 최대,최소 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-20  
 ******************************************************************************************
 */
function sp_line_OnMove(obj,nBeforePos,nPos)
{
	// Top
	if (nPos < st_bk1.position.top)
	{
		sp_line.position.top = st_bk1.position.top -5;
	}
	
	// Bottom
	if (nPos > toNumber(st_bk2.position.top + st_bk2.position.height))
	{
		sp_line.position.top = toNumber(st_bk2.position.top + st_bk2.position.height);
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_input_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 조회조건이 변경된 경우
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function ds_input_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	fn_ds_input_OnColumnChanged(e.columnid, e.newvalue);
}

function fn_ds_input_OnColumnChanged(sColId, sNewVal)
{
	//trace("sColId==="+sColId+"::::sNewVal==="+sNewVal);
	// 업장선택시 식당리스트 조회
	if (sColId == "UPJANG")
	{
		if (gfn_length(gfn_toString(sNewVal))== 0)
		{
			ds_SUBINVENTORY.clearData();
			ds_MEAL1.clearData();
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"SUBINV_CODE","");
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 식당 조회
			http.Sync = true;
			fn_SearchCommon("fm/fmz:FMS_SUBINVENTORY_S001","ds_in=ds_input","ds_SUBINVENTORY=gds_Csqlout","");
			http.Sync = false;
			div_1.cbo_HALL_CD.index = 0;
			ds_input.setColumn(0,"SUBINV_CODE",div_1.cbo_HALL_CD.value);
			
			//식당조회후 끼니리스트 조회
			fn_ds_input_OnColumnChanged("SUBINV_CODE", div_1.cbo_HALL_CD.value);
		}
	}
	
	// 식당선택시 끼니리스트 조회
	if (sColId == "SUBINV_CODE")
	{
		if (gfn_length(sNewVal)== 0)
		{
			ds_MEAL1.clearData();
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"MEAL1","");
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 끼니 조회
			fn_SearchCommon("fm/fmz:FMS_MEAL_CORNER_S001","ds_in=ds_input","ds_MEAL1=gds_Csqlout","USE_YN='Y' nullyn='Y'" + " SUBINV_CODE="+wrapQuote(fa_SUBINV_CODE));
			div_1.cbo_MEAL.index = 0;
			
			// 끼니선택시 코너리스트 조회
			fn_ds_input_OnColumnChanged("MEAL1", div_1.cbo_MEAL.value);
		}
	}
	
	// 끼니선택시 코너리스트 조회
	if (sColId == "MEAL1")
	{
		if (gfn_length(sNewVal)== 0)
		{
			ds_CORNER1.clearData();
			
			ds_input.setColumn(0,"CORNER1","");
		}
		else
		{
			// 코너 조회
			ds_input.setColumn(0,"MEAL",ds_input.getColumn(0,"MEAL1"));
			fn_SearchCommon("fm/fmz:FMS_MEAL_CORNER_S002","ds_in=ds_input","ds_CORNER1=gds_Csqlout","USE_YN='Y' nullyn='Y'" + " SUBINV_CODE="+wrapQuote(fa_SUBINV_CODE));
			
			div_1.cbo_CORNER.index = 0;
			
		}
	}

	// 구분에 따라 분류셋팅
	if (sColId == "STYPE2")
	{
		// 단일
		if (sNewVal != "2")			// 개별표준식단
		{
			Copy(ds_MENU_CLASS,ds_MENU_CLASS1);
		}
		else							// 기간표준식단
		{
			Copy(ds_MENU_CLASS,ds_MENU_CLASS2);
		}
	}
	
	// 식단유형
	if (sColId == "MENU_TYPE")
	{
		// 단일
		if (sNewVal == "001")
		{
			ds_CORNER2.filter("CODE=='001'");
			ds_input.setColumn(0,"CORNER2","001");
		}
		else
		{
			ds_CORNER2.filter("");
		}
	}
	
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_OnChanged(obj,nOldIndex,nNewindex)
 * 기      능   : 텝클릭후 폼셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function Tab_list_OnChanged(obj:Tab, e:TabIndexChangeEventInfo)
{
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_OnChanging(obj,nOldIndex,nNewIndex)
 * 기      능   : 텝클릭시 체크
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function Tab_list_OnChanging(obj:Tab, e:TabIndexChangeEventInfo)
{
	if (rdo_SType.value == "2")
	{
		if (div_2.cbo_SType2.value != "2" && e.postindex == 1)
		{
			g_Message("EE", "표준식단인 경우 기간복사를 하실 수 없습니다.");
			return false;
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : div_2_cbo_SType2_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
 * 기      능   : 구분선택시
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function div_2_cbo_SType2_OnChanged(obj:Combo, e:ItemChangeEventInfo)
{
	fn_formSetting();
}

/*
 ******************************************************************************************
 * 함  수  명   : btn_Date_OnClick(obj,nX,nY)
 * 기      능   : 달력
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function btn_Date_OnClick(obj:Button, e:ClickEventInfo)
{
	g_CalButton_OnClick(obj);
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_Master_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 선택된 경우 개별복사에 추가
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function ds_Master_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	// 선택된 경우 개별복사에 추가
	if (e.columnid == "CHK")
	{
		if (e.newvalue == "1")
		{
			var nARow = ds_list.addRow();
			ds_list.copyRow(nARow,obj,e.row,"RECIPE_INFO=RECIPE_INFO,MENU_ID=MENU_ID,UPJANG=UPJANG,MENU_CD=MENU_CD,ORI_MENU_DATE=MENU_DATE");
			ds_list.setColumn(nARow,"COPY_TYPE",strCopyGubun); 
		}
		else
		{
			var nFRow = ds_list.findRow("MENU_ID",ds_Master.getColumn(e.row,"MENU_ID"));
			ds_list.deleteRow(nFRow);
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : ds_list_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
 * 기      능   : 개별복사시 데이터 셋팅
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function ds_list_OnColumnChanged(obj:Dataset, e:DSColChangeEventInfo)
{
	/*
	if (e.columnid == "MEAL")
	{
		ds_list.setColumn(e.row,"CORNER","");
		filCond = "MEAL=="+wrapQuote(e.newvalue);
		ds_CORNER3.filter(filCond);
	}
	*/
	
	if (e.columnid == "MENU_DATE" || e.columnid == "MEAL" || e.columnid == "CORNER")
	{
		var strMENU_DATE 	= ds_list.getColumn(e.row,"MENU_DATE");
		var strMEAL 		= ds_list.getColumn(e.row,"MEAL");
		var strCORNER 		= ds_list.getColumn(e.row,"CORNER");
		
		// 부모기간안에 있는지 체크
		if (e.columnid == "MENU_DATE" && gfn_length(e.newvalue)> 0)
		{
			if (strMENU_DATE < fa_FROM_DT || strMENU_DATE > fa_TO_DT)
			{
				var strmsg;
				
				strmsg = gfn_subStr(fa_FROM_DT,0,4)+ "/" + gfn_subStr(fa_FROM_DT,4,2)+ "/" + gfn_subStr(fa_FROM_DT,6)+ " ~ ";
				strmsg += gfn_subStr(fa_TO_DT,0,4)+ "/" + gfn_subStr(fa_TO_DT,4,2)+ "/" + gfn_subStr(fa_TO_DT,6);
				strmsg += "를 입력해 주십시오." ;
				
				g_Message("EE", strmsg);
				ds_list.setColumn(e.row,e.columnid,e.oldvalue);
				Tab_list.tab1.grd_Save.setCellPos(1);
			}
			
			if (gfn_length(strMENU_DATE)> 0 && gfn_length(strMEAL)> 0 && gfn_length(strCORNER)> 0)
			{
				var nCnt,otherArg,strMenuCD;
				
				// 중복체크
				nCnt = ds_list.getCaseCount("MENU_DATE=" + wrapQuote(strMENU_DATE) + " && MEAL=" + wrapQuote(strMEAL) + " && CORNER=" + wrapQuote(strCORNER));
				
				if (nCnt>1)
				{
					g_Message("EE", "중복된 식단이 있습니다.");
					ds_list.setColumn(e.row,e.columnid,"");
					Tab_list.tab1.grd_Save.setCellPos(decode(e.columnid,"MENU_DATE",1,"MEAL",2,"CORNER",3));
				}
			}
		}
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab1_grd_Save_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 개별복사 그리드 삭제버튼 클릭
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function Tab_list_tab1_grd_Save_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	// 삭제클릭
	if (e.cell==5)
	{
		var nFRow = ds_Master.findRow("MENU_ID",ds_list.getColumn(e.row,"MENU_ID"));
		ds_Master.setColumn(nFRow,"CHK","0");
		
		ds_list.deleteRow(e.row);
	}
}


/*
 ******************************************************************************************
 * 함  수  명   : grd_Master_OnCellDblClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 상세내역조회
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function grd_Master_OnCellDblClick(obj:Grid, e:GridClickEventInfo)
{
	fn_SearchSub(e.row);
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab2_btn_MENU_F_DATE_OnClick(obj)
 * 기      능   : 기간복사시 날짜
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function Tab_list_tab2_btn_MENU_F_DATE_OnClick(obj:Button, e:ClickEventInfo)
{
	var retDate,sday,eday;
	g_CalButton_OnClick(obj);

	sday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
	eday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_T_DATE1","MENU_T_DATE2"));

	retDate = Tab_list.tab2.me_MENU_F_DATE.value;
	Tab_list.tab2.me_MENU_T_DATE.value = gfn_addDate(retDate,G_fn_GapDay(sday, eday));
}

/*
 ******************************************************************************************
 * 함  수  명   : Tab_list_tab2_me_MENU_F_DATE_OnChar(obj,strPreText,nChar,strPostText,nLLParam,nHLParam)
 * 기      능   : 기간복사 날짜 입력
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function Tab_list_tab2_me_MENU_F_DATE_OnChar(obj:MaskEdit, e:CharEventInfo)
{
	var strDate = gfn_replace(e.posttext,"-","");

	if (gfn_right(strDate,1)!= "_")
	{
		sday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_F_DATE1","MENU_F_DATE2"));
		eday = ds_input.getColumn(0,iif(strCopyGubun == "0","MENU_T_DATE1","MENU_T_DATE2"));
		
		Tab_list.tab2.me_MENU_T_DATE.value = gfn_addDate(strDate,G_fn_GapDay(sday, eday));
	}
}
/*
 ******************************************************************************************
 * 함  수  명   : ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
 * 기      능   : 업장엔터시팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2008-02-04  
 ******************************************************************************************
 */
function ed_pop_OnKeyDown(obj,nChar,bShift,bCtrl, bAlt,LLParam,HLParam)
{
	if (nChar == 13)
	{
		var objme = eval(obj.userdata);
		objme.click();
	}
}

/*
 ******************************************************************************************
 * 함  수  명   : grd_Master_OnCellClick(obj,nRow,nCell,nX,nY,nPivotIndex)
 * 기      능   : 사진팝업
 * 작  성  자   : 박지영
 * 작성  일자   : 2007-12-03  
 ******************************************************************************************
 */
function grd_Master_OnCellClick(obj:Grid, e:GridClickEventInfo)
{
	if (e.cell==5)	// 사진팝업
	{
		if (gfn_length(ds_Master.getColumn(e.row,"SPHOTO_PATH_1") + ds_Master.getColumn(e.row,"SPHOTO_PATH_2"))== 0)
			return;
		
		ds_Master.rowposition = e.row;
		strReturn = gfn_dialog("", "U_FSM::FSM00010P.xfdl",{fa_Enable:"false",fa_ObjDs:ds_Master});
	}
}

function Tab_list_tab1_grd_Save_onexpanddown(obj:Grid, e:GridMouseEventInfo)
{
  	var str_ColumnTitle = fn_Get_ColHeaderTitle(obj, e.cell);

	if(str_ColumnTitle == '제공일') {

		var nCellRect  = obj.getCellRect(e.row, 1);  

		var nX = system.clientToScreenX(obj, nCellRect.left);

		var nY = system.clientToScreenY(obj, nCellRect.top);

		var orgDate = ds_list.getColumn(ds_list.rowposition, "MENU_DATE");		
		var retDate = gfn_callCalendarPopDiv(ds_list.getColumn(ds_list.rowposition, "MENU_DATE"),nX, nY-76);

		if(gfn_isNull(retDate)) {
		   ds_list.setColumn(ds_list.rowposition,"MENU_DATE",orgDate); 
		} else {
		   ds_list.setColumn(ds_list.rowposition,"MENU_DATE",retDate); 
		}
	}	 
	 
   obj.moveToNextCell(); 
}

function Tab_list_tab2_cbo_MEAL_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	//trace(fn_GetFilter(-1));
	ds_CORNER4.filter(fn_GetFilter(-1));
	Tab_list.tab2.cbo_CORNER.index = 0;
	//trace(ds_CORNER4.saveXML());
}


function Tab_list_tab1_grd_Save_ondropdown(obj:Grid, e:GridEditEventInfo)
{
	if (e.col == 3)
	{
		var filCond = "MEAL=="+wrapQuote(ds_list.getColumn(e.row, "MEAL"));
		ds_CORNER3.filter(filCond);
	}
}
]]></Script>
  </Form>
</FDL>
