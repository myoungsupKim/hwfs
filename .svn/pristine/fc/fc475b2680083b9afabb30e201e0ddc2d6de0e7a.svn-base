<?xml version="1.0" encoding="euc-kr"?>
<query>
	<type>select</type>
	<description><![CDATA[]]></description>
	<reload>true</reload>
	<monitoring>true</monitoring>
	<result-count>1</result-count>
	<statement>
<![CDATA[
SELECT B.WEEK_DATE FDAY,
-- 서울날씨조회 [ DS_head ]
-- 파라메터로 주일의 시작일자(월요일)를 넘겨준다
       B.WEEK_NAME WE,
       DECODE(B.WEEK_NAME,'일','FFCC00','토','99CCFF','FFFFFF') AS WE_COLOR,
       A.WCODE WCD,
       A.WDESC WNM,
       DECODE(A.WCODE,NULL,'','NEW' || LPAD(A.WCODE,2,'0')) AS WIMG,
       '' REM,
       TO_CHAR(TO_DATE(B.WEEK_DATE), 'd') AS WEEK       
  FROM
       (SELECT A.CUR_DATE, A.WCODE, A.WDESC
          FROM UPOS_SC_WEATHER_INFO_V A,
               FMS_UPJANG B
         WHERE A.AREA_CODE = B.LOCAL1
           AND A.CUR_DATE BETWEEN #MENU_SDATE# AND TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+6,'YYYYMMDD')
           AND B.UPJANG = #UPJANG#   
       ) A,
       (
        SELECT TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+0,'YYYYMMDD') WEEK_DATE, TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+0,'DY','NLS_DATE_LANGUAGE=KOREAN') WEEK_NAME FROM DUAL
        UNION ALL
        SELECT TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+1,'YYYYMMDD') WEEK_DATE, TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+1,'DY','NLS_DATE_LANGUAGE=KOREAN') WEEK_NAME FROM DUAL
        UNION ALL
        SELECT TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+2,'YYYYMMDD') WEEK_DATE, TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+2,'DY','NLS_DATE_LANGUAGE=KOREAN') WEEK_NAME FROM DUAL
        UNION ALL
        SELECT TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+3,'YYYYMMDD') WEEK_DATE, TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+3,'DY','NLS_DATE_LANGUAGE=KOREAN') WEEK_NAME FROM DUAL
        UNION ALL
        SELECT TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+4,'YYYYMMDD') WEEK_DATE, TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+4,'DY','NLS_DATE_LANGUAGE=KOREAN') WEEK_NAME FROM DUAL
        UNION ALL
        SELECT TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+5,'YYYYMMDD') WEEK_DATE, TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+5,'DY','NLS_DATE_LANGUAGE=KOREAN') WEEK_NAME FROM DUAL
        UNION ALL
        SELECT TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+6,'YYYYMMDD') WEEK_DATE, TO_CHAR(TO_DATE(#MENU_SDATE#,'YYYYMMDD')+6,'DY','NLS_DATE_LANGUAGE=KOREAN') WEEK_NAME FROM DUAL
       ) B
 WHERE B.WEEK_DATE = A.CUR_DATE(+)
 ORDER BY B.WEEK_DATE	]]></statement>
	<input default-name="ds_input">
	</input>
	<output default-name="DS_head">
	</output>
</query>