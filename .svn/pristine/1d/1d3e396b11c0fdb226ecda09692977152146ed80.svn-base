<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.4">
  <TypeDefinition url="..\..\..\default_typedef.xml"/>
  <Form id="UpjangSaleRegMgntNew" classname="COMP_GUIDE_13" inheritanceid="" position="absolute 0 0 1252 725" titletext="매출등록(UpjangSaleRegMgnt)" scrollbars="autoboth" onload="form_onload" onsize="UpjangSaleRegMgnt_onsize">
    <Layouts>
      <Layout>
        <Static id="sta_detail09" class="sta_WFDA_Labelbg" position="absolute 79 152 316 179"/>
        <Static id="sta_detail05" class="sta_WFDA_Labelbg" position="absolute 991 126 1237 153" anchor="left top right"/>
        <Static id="sta_detail02" class="sta_WFDA_Labelbg" position="absolute 687 100 913 127"/>
        <Static id="Static06" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1237 0 1252 710" anchor="top right"/>
        <Static id="Static71" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 0 710 1252 725" anchor="left bottom"/>
        <Div id="div_cmnBtn" anchor="left top right" taborder="31" url="cmn::CmnBtn.xfdl" text="Div00" scrollbars="none" position="absolute 0 0 1237 30" tabstop="false"/>
        <Static id="Static59" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 11 700 1226 710"/>
        <Static id="Static08" class="sta_WFSA_Labelbg" position="absolute 0 30 1237 71" anchor="left top right"/>
        <Static id="Static04" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 30 1237 40" anchor="left top"/>
        <Static id="Static05" text="h10" class="Guide01_AreaRed" visible="false" position="absolute 0 61 1237 71" anchor="left top"/>
        <Static id="Static07" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 0 40 15 61" anchor="left top"/>
        <Static id="Static14" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 664 40 694 61" anchor="left top"/>
        <Static id="Static15" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 179 450 192" anchor="left top"/>
        <Static id="Static22" text="매출 등록" class="sta_WF_Title01" position="absolute 5 192 455 210" anchor="default"/>
        <Static id="Static16" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 204 450 209" anchor="left top"/>
        <Static id="Static03" text="h06" class="Guide01_AreaRed" visible="false" position="absolute 1160 71 1238 77" anchor="top right"/>
        <Static id="Static10" text="h05" class="Guide01_AreaRed" visible="false" position="absolute 1160 113 1238 118" anchor="top right"/>
        <Button id="btn_add" taborder="32" class="btn_WF_GrdPlus" position="absolute 1111 77 1129 97" anchor="top right" onclick="btn_add_onclick" visible="false"/>
        <Button id="btn_del" taborder="33" class="btn_WF_GrdMinus" position="absolute 1131 77 1149 97" anchor="top right" onclick="btn_del_onclick" visible="false"/>
        <Static id="Static17" text="매출일자" class="sta_WFSA_label" position="absolute 957 40 1019 61" anchor="left top"/>
        <Static id="Static18" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 1015 40 1025 61" anchor="left top"/>
        <Static id="Static12" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1272 104 1287 395" anchor="top right"/>
        <Static id="Static13" text="w15" class="Guide01_AreaRed" visible="false" position="absolute 1513 105 1528 395" anchor="top right"/>
        <Static id="Static19" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 1273 379 1528 394" anchor="left bottom"/>
        <Static id="Static20" text="h15" class="Guide01_AreaRed" visible="false" position="absolute 1274 104 1528 119" anchor="left bottom"/>
        <Static id="Static21" text="사업부" class="sta_WFSA_label" position="absolute 15 40 77 61" anchor="left top"/>
        <Static id="Static23" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 60 40 70 61" anchor="left top"/>
        <MuSearchComponent id="edt_muNm" titletext="사업부 선택 Component" taborder="0" class="cmb_WF_Essential" position="absolute 71 40 230 61" bindDataset="ds_search" bindMuCdColumn="muCd" appendText="" onItemChangedEvent="fn_muItemChangedEvent" enable="true"/>
        <Static id="Static24" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 230 40 260 61" anchor="left top"/>
        <Static id="Static25" text="팀" class="sta_WFSA_label" position="absolute 260 40 322 61" anchor="left top"/>
        <Static id="Static26" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 279 40 289 61" anchor="left top"/>
        <TmSearchComponent id="edt_tmNm" titletext="팀 검색용 Component" taborder="1" text="TmSearchComponent00" class="edt_WF_Essential" position="absolute 287 40 432 61" bindDataset="ds_search" bindTmCdColumn="schTm" bindTmNmColumn="schTmNm" qoBuCd="" qoMuCd="" qoUseYn="Y" eventAfterTrigger="fn_tmChangedEvent" eventBeforeTrigger="fn_tmChangedEvent"/>
        <Static id="Static27" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 432 40 462 61" anchor="left top"/>
        <Static id="Static29" text="사업장" class="sta_WFSA_label" position="absolute 463 40 525 61" anchor="left top"/>
        <Static id="Static30" text="글자간격기준 w10" class="Guide01_AreaRed" visible="false" position="absolute 510 40 520 61" anchor="left top"/>
        <UpjangSearchComponent id="edt_upjangNm" titletext="사업장 검색용 Component" taborder="2" text="UpjangSearchComponent00" class="edt_WF_Essential" position="absolute 517 41 664 63" bindDataset="ds_search" bindUpjangCodeColumn="upjangCd" bindUpjangNameColumn="upjangNm" eventBeforeTrigger="" eventAfterTrigger="fn_upjangAfter" roleSetId=""/>
        <Static id="Static00" text="창고" class="sta_WFSA_label" position="absolute 693 41 755 62" anchor="left top"/>
        <Combo id="cboPos" taborder="3" innerdataset="@ds_posYn" codecolumn="code" datacolumn="codeName" position="absolute 737 40 929 61" enable="true" class="cmb_WF_Essential" onitemchanged="cboPos_onitemchanged"/>
        <Button id="btn_copy" taborder="35" text="전일 매출복사" class="btn_WF_Function" position="absolute 926 184 1012 204" anchor="top right" onclick="btn_copy_onclick"/>
        <ObjCalendar id="cal_receiveDateFr" titletext="캘린더" taborder="4" onclick="cal_procDateFr_onclick" scrollbars="autoboth" class="cal_WF_Essential" position="absolute 1025 40 1118 61" onkeydown="cal_receiveDateFr_onkeydown" onlbuttondown="cal_receiveDateFr_onlbuttondown"/>
        <Static id="Static01" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 928 40 958 61" anchor="left top"/>
        <Static id="Static02" text="w30" class="Guide01_AreaRed" visible="false" position="absolute 1118 40 1148 61" anchor="left top"/>
        <Static id="sta_detail01" class="sta_WFDA_Labelbg" position="absolute 79 100 316 127"/>
        <Static id="st_TRX_TYPE" text="매출유형" class="sta_WFDA_Label01" position="absolute 0 100 80 127" userdata="strMAQuery_UPJANG_TYPE_CD"/>
        <Edit id="edt_salsType" taborder="5" autoselect="true" position="absolute 82 103 289 124" enable="false" class="edt_WF_Essential" onkeydown="edt_onkeydown"/>
        <Button id="edtBtn_salsType" taborder="6" tabstop="false" class="btn_WF_popSearchEssential" position="absolute 292 103 312 124" enable="false" onclick="edtBtn_salsType_onclick"/>
        <Static id="sta_detail00" class="sta_WFDA_Labelbg" position="absolute 394 100 609 127"/>
        <Edit id="edt_pos" taborder="7" readonly="true" autoselect="true" onkeydown="edt_onkeydown" class="edt_WF_Essential" position="absolute 399 103 587 124" enable="false"/>
        <Static id="st_SUBINV_CODE" text="창고" class="sta_WFDA_Label01" position="absolute 315 100 395 127" userdata="strMAQuery_SUBINV_CODE"/>
        <CustSearchComponent id="edt_custnm000" titletext="거래처 검색용 Component" taborder="43" text="CustSearchComponent00" class="edt_WF_Essential" position="absolute 875 73 1096 94" bindDataset="ds_listSave" eventBeforeTrigger="fn_custPopup" eventAfterTrigger="fn_custPopupAfter" bindCustCodeColumn="custCd" bindCustNameColumn="custNm" enable="false" onkeydown="edt_custnm_onkeydown" visible="false"/>
        <Static id="st_CUSTCD" text="고객사" class="sta_WFDA_Label01" position="absolute 608 100 688 127" userdata="strMAQuery_UPJANG_CUST"/>
        <Static id="st_TAX_KIND" text="과세여부" class="sta_WFDA_Label01" position="absolute 912 100 992 127" userdata="strMAQuery_GwaGubun"/>
        <Static id="sta_detail08" class="sta_WFDA_Labelbg" position="absolute 991 100 1237 127" anchor="left top right"/>
        <Edit id="edt_vatClass" taborder="11" readonly="true" autoselect="true" onkeydown="edt_onkeydown" enable="false" position="absolute 994 103 1215 124" class="edt_WF_Essential"/>
        <Button id="edtBtn_vatClass" taborder="12" tabstop="false" class="btn_WF_popSearch" position="absolute 1214 103 1234 124" enable="false"/>
        <Button id="edtBtn_pos" taborder="8" tabstop="false" class="btn_WF_popSearchEssential" position="absolute 586 103 606 124" enable="false" onclick="edtBtn_pos_onclick"/>
        <Static id="st_QTY" text="단가" class="sta_WFDA_Label01" position="absolute 0 126 80 153"/>
        <Static id="sta_detail04" class="sta_WFDA_Labelbg" position="absolute 232 126 316 153"/>
        <MaskEdit id="edt_salQuantity" taborder="14" mask="###,##0" class="msk_WF_Essential" position="absolute 238 129 312 150" autoselect="true" enable="false" value="MaskEdit00"/>
        <Static id="st_PRICE" text="식수" class="sta_WFDA_Label01" position="absolute 153 126 233 153"/>
        <Static id="sta_detail06" class="sta_WFDA_Labelbg" position="absolute 79 126 154 153"/>
        <MaskEdit id="edt_uprice" taborder="13" mask="###,##0" class="msk_WF_Essential" position="absolute 82 129 148 150" autoselect="true" enable="false" value="MaskEdit00"/>
        <Static id="st_AMT" text="매출액" class="sta_WFDA_Label01" position="absolute 315 126 395 153"/>
        <Static id="sta_detail07" class="sta_WFDA_Labelbg" position="absolute 394 126 609 153"/>
        <MaskEdit id="edt_amt" taborder="15" mask="###,##0" class="msk_WF_Essential" position="absolute 399 129 606 150" autoselect="true" enable="false" value="MaskEdit00"/>
        <Static id="st_CUSTCD00" text="끼니" class="sta_WFDA_Label01" position="absolute 912 126 992 153" userdata="strMAQuery_UPJANG_CUST"/>
        <Static id="sta_detail03" class="sta_WFDA_Labelbg" position="absolute 687 126 913 153"/>
        <Edit id="edt_bldType" taborder="18" readonly="true" autoselect="true" onkeydown="edt_onkeydown" class="edt_WF_Essential" position="absolute 994 129 1097 150" enable="false"/>
        <Button id="edtBtn_bldType" taborder="19" tabstop="false" class="btn_WF_popSearchEssential" position="absolute 1096 129 1116 150" enable="false" onclick="edtBtn_bldType_onclick"/>
        <CheckBox id="chk_Auto" taborder="27" tabstop="false" text="자동저장" value="true" position="absolute 1148 40 1236 61"/>
        <Static id="st_SALE_GUBUN" text="매출구분" class="sta_WFDA_Label01" position="absolute 608 126 688 153" userdata="strMAQuery_GwaGubun"/>
        <CheckBox id="chk_Auto00" taborder="28" tabstop="true" text="매출식수 포함" value="true" position="absolute 1403 44 1510 65" onclick="chk_Auto00_onclick" truevalue="true" falsevalue="false" visible="false"/>
        <Static id="st_TRX_TYPE00" text="지불유형" class="sta_WFDA_Label01" position="absolute 0 152 80 179" userdata="strMAQuery_UPJANG_TYPE_CD"/>
        <Edit id="edt_pmntType" taborder="20" readonly="true" autoselect="true" onkeydown="edt_onkeydown" class="edt_WF_Essential" position="absolute 82 155 169 176" enable="false"/>
        <Button id="edtBtn_pmntType" taborder="21" tabstop="false" class="btn_WF_popSearchEssential" position="absolute 172 155 192 176" enable="false" onclick="edtBtn_pmntType_onclick"/>
        <Static id="st_TAX_KIND01" text="자재코드" class="sta_WFDA_Label01" position="absolute 912 152 992 179" userdata="strMAQuery_GwaGubun"/>
        <Static id="sta_detail10" class="sta_WFDA_Labelbg" position="absolute 991 152 1237 179" anchor="left top right"/>
        <Edit id="edt_ticket" taborder="25" readonly="true" autoselect="true" enable="false" position="absolute 994 155 1215 176" onkeydown="edt_onkeydown" class="edt_WF_Essential"/>
        <Button id="edtBtn_ticket" taborder="26" tabstop="false" class="btn_WF_popSearch" position="absolute 1214 155 1234 176" onclick="edtBtn_ticket_onclick" enable="false"/>
        <Static id="st_TRX_DESC" text="적요" class="sta_WFDA_Label01" position="absolute 315 152 395 179"/>
        <Static id="sta_detail11" class="sta_WFDA_Labelbg" position="absolute 394 152 913 179"/>
        <Edit id="edt_remark" taborder="24" maxlength="100" autoselect="true" onkeydown="edt_remark_OnKeyDown" class="edt_WF_Essential" position="absolute 399 155 910 176" enable="false" imemode="hangul"/>
        <Static id="Static09" text="매출 연계 내역" class="sta_WF_Title01" position="absolute 5 487 455 505" anchor="default"/>
        <Static id="Static11" text="h13" class="Guide01_AreaRed" visible="false" position="absolute 0 473 450 486" anchor="left top"/>
        <Static id="Static28" text="글자기준간격 h05" class="Guide01_AreaRed" visible="false" position="absolute 0 501 450 506" anchor="left top"/>
        <Button id="edtBtn_evidence6" taborder="23" tabstop="false" class="btn_WF_popSearchEssential" position="absolute 292 155 312 176" enable="false" onclick="edtBtn_evidence6_onclick"/>
        <Edit id="edt_evidence6" taborder="22" readonly="true" autoselect="true" onkeydown="edt_onkeydown" class="msk_WF_Essential" position="absolute 196 155 289 176" enable="false"/>
        <Grid id="grd_list" taborder="29" useinputpanel="false" position="absolute 2 209 1238 450" autofittype="col" anchor="left top" binddataset="ds_list" cellsizingtype="both" autoenter="none" cellsizebandtype="body" oncellclick="grd_list_oncellclick">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="44"/>
                <Column size="120"/>
                <Column size="150"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="50"/>
                <Column size="50"/>
                <Column size="100"/>
                <Column size="50"/>
                <Column size="83"/>
                <Column size="100"/>
                <Column size="100"/>
                <Column size="171"/>
                <Column size="64"/>
                <Column size="50"/>
                <Column size="50"/>
                <Column size="60"/>
                <Column size="50"/>
                <Column size="50"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" text="매출유형"/>
                <Cell col="2" text="창고"/>
                <Cell col="3" text="고객사"/>
                <Cell col="4" text="과/면세"/>
                <Cell col="5" text="단가"/>
                <Cell col="6" text="식수"/>
                <Cell col="7" text="매출액"/>
                <Cell col="8" text="끼니"/>
                <Cell col="9" text="지불유형"/>
                <Cell col="10" text="매입사/사원"/>
                <Cell col="11" text="적요"/>
                <Cell col="12" text="자재코드"/>
                <Cell col="13" text="매출구분"/>
                <Cell col="14" text="선발행"/>
                <Cell col="15" text="선수금"/>
                <Cell col="16" text="채권대체"/>
                <Cell col="17" text="발행"/>
                <Cell col="18" text="마감"/>
              </Band>
              <Band id="body">
                <Cell expr="expr:currow+1"/>
                <Cell col="1" text="bind:salsClassNm"/>
                <Cell col="2" style="align:left;" text="bind:posNm"/>
                <Cell col="3" style="align:left;" text="bind:custNm"/>
                <Cell col="4" text="bind:vatClassNm" expandshow="hide"/>
                <Cell col="5" displaytype="number" style="align:right;" text="bind:uprice" editautoselect="true"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:salQuantity" editautoselect="true"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:salAmt" editautoselect="true"/>
                <Cell col="8" text="bind:bldTypeNm"/>
                <Cell col="9" text="bind:payCdNm"/>
                <Cell col="10" text="bind:payCdNmInfo"/>
                <Cell col="11" style="align:left;" text="bind:remark"/>
                <Cell col="12" style="align:left;" text="bind:materialNm"/>
                <Cell col="13" text="bind:saleGubunNm"/>
                <Cell col="14" text="bind:taxShetPublishYn"/>
                <Cell col="15" displaytype="expr:iif(edt_muNm.getMuCode() == &quot;2003&quot;,&quot;text&quot;,iif(advanceYn == 'Y', 'button', 'text'))" text="bind:advanceYn"/>
                <Cell col="16" displaytype="expr:iif(edt_muNm.getMuCode() == &quot;2003&quot;,&quot;text&quot;,iif(arYn == 'Y', 'button', 'text'))" text="bind:arYn" expandshow="hide" expandimage="URL('theme://convertImages\ico_P.bmp')"/>
                <Cell col="17" displaytype="expr:iif(edt_muNm.getMuCode() == &quot;2003&quot;,&quot;text&quot;,iif(publishYn == 'Y', 'button', 'text'))" text="bind:publishYn"/>
                <Cell col="18" text="bind:journalzYn"/>
              </Band>
              <Band id="summary">
                <Cell text="합계"/>
                <Cell col="1"/>
                <Cell col="2"/>
                <Cell col="3"/>
                <Cell col="4"/>
                <Cell col="5" displaytype="number" style="align:right;"/>
                <Cell col="6" displaytype="number" style="align:right;" text="expr:getSum('salQuantity')"/>
                <Cell col="7" displaytype="number" style="align:right;" text="expr:getSum('salAmt')"/>
                <Cell col="8"/>
                <Cell col="9"/>
                <Cell col="10"/>
                <Cell col="11"/>
                <Cell col="12"/>
                <Cell col="13"/>
                <Cell col="14"/>
                <Cell col="15"/>
                <Cell col="16"/>
                <Cell col="17"/>
                <Cell col="18"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="grd_list2" taborder="30" useinputpanel="false" autofittype="col" position="absolute 2 505 1236 712" anchor="all" binddataset="ds_listSysClass" onheadclick="grd_list2_onheadclick" cellsizingtype="both">
          <Formats>
            <Format id="default">
              <Columns>
                <Column size="46"/>
                <Column size="100"/>
                <Column size="120"/>
                <Column size="150"/>
                <Column size="120"/>
                <Column size="100"/>
                <Column size="50"/>
                <Column size="50"/>
                <Column size="100"/>
                <Column size="50"/>
                <Column size="83"/>
                <Column size="100"/>
                <Column size="171"/>
                <Column size="50"/>
                <Column size="50"/>
                <Column size="60"/>
                <Column size="50"/>
                <Column size="50"/>
              </Columns>
              <Rows>
                <Row size="24" band="head"/>
                <Row size="24"/>
                <Row size="24" band="summ"/>
              </Rows>
              <Band id="head">
                <Cell class="head_Excel"/>
                <Cell col="1" text="연계구분"/>
                <Cell col="2" text="매출유형"/>
                <Cell col="3" text="창고"/>
                <Cell col="4" text="고객사"/>
                <Cell col="5" text="과/면세"/>
                <Cell col="6" text="단가"/>
                <Cell col="7" text="식수"/>
                <Cell col="8" text="매출액"/>
                <Cell col="9" text="끼니"/>
                <Cell col="10" text="지불유형"/>
                <Cell col="11" text="매입사/사원"/>
                <Cell col="12" text="적요"/>
                <Cell col="13" text="선발행"/>
                <Cell col="14" text="선수금"/>
                <Cell col="15" text="채권대체"/>
                <Cell col="16" text="발행"/>
                <Cell col="17" text="마감"/>
              </Band>
              <Band id="body">
                <Cell expr="expr:currow+1"/>
                <Cell col="1" text="bind:sysClassNm"/>
                <Cell col="2" text="bind:salsClassNm"/>
                <Cell col="3" style="align:left;" text="bind:posNm"/>
                <Cell col="4" style="align:left;" text="bind:custNm"/>
                <Cell col="5" text="bind:vatClassNm"/>
                <Cell col="6" displaytype="number" style="align:right;" text="bind:uprice" editautoselect="true"/>
                <Cell col="7" displaytype="number" style="align:right;" text="bind:salQuantity" editautoselect="true"/>
                <Cell col="8" displaytype="number" style="align:right;" text="bind:salAmt" editautoselect="true"/>
                <Cell col="9" text="bind:bldTypeNm"/>
                <Cell col="10" text="bind:payCdNm"/>
                <Cell col="11" text="bind:payCdNmInfo"/>
                <Cell col="12" style="align:left;" text="bind:remark"/>
                <Cell col="13" displaytype="text" style="align:center;" text="bind:taxShetPublishYn"/>
                <Cell col="14" displaytype="text" style="align:center;" text="bind:advanceYn"/>
                <Cell col="15" displaytype="text" style="align:center;" text="bind:arYn" expandshow="hide" expandimage="URL('theme://convertImages\ico_P.bmp')"/>
                <Cell col="16" displaytype="text" style="align:center;" text="bind:publishYn"/>
                <Cell col="17" displaytype="text" style="align:center;" text="bind:journalzYn"/>
              </Band>
              <Band id="summary">
                <Cell text="합계"/>
                <Cell col="1"/>
                <Cell col="2"/>
                <Cell col="3"/>
                <Cell col="4"/>
                <Cell col="5"/>
                <Cell col="6" displaytype="number" style="align:right;"/>
                <Cell col="7" displaytype="number" style="align:right;" text="expr:getSum('salQuantity')"/>
                <Cell col="8" displaytype="number" style="align:right;" text="expr:getSum('salAmt')"/>
                <Cell col="9"/>
                <Cell col="10"/>
                <Cell col="11"/>
                <Cell col="12"/>
                <Cell col="13"/>
                <Cell col="14"/>
                <Cell col="15"/>
                <Cell col="16"/>
                <Cell col="17"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Div id="dv_Copy" taborder="34" tabstop="false" text="Div0" scrollbars="none" class="div_WFGRD_graybg" visible="false" position="absolute 1272 104 1528 288">
          <Layouts>
            <Layout>
              <Static id="sta_detail03" class="sta_WFDA_Labelbg" position="absolute 94 39 240 66" anchor="default"/>
              <Button id="btn_DataCopy" taborder="12" text="매 출 복 사" onclick="dv_Copy_btn_DataCopy_OnClick" class="btn_WF_Custom" position="absolute 18 153 236 174" anchor="default"/>
              <Static id="Static23" text="☞ 지정한 날짜의 매출이 복사됩니다." position="absolute 14 14 236 35" anchor="default"/>
              <Static id="Static1" text="복사일자" class="sta_WFDA_Label01" position="absolute 13 39 95 66" anchor="default"/>
              <Static id="Static0" text="매출유형" class="sta_WFDA_Label01" position="absolute 13 65 95 143" anchor="default"/>
              <CheckBox id="chk1" taborder="15" tabstop="false" position="absolute 98 65 236 85" anchor="default"/>
              <CheckBox id="chk2" taborder="16" tabstop="false" position="absolute 98 85 236 105" anchor="default"/>
              <CheckBox id="chk3" taborder="17" tabstop="false" position="absolute 98 105 236 125" anchor="default"/>
              <CheckBox id="chk4" taborder="18" tabstop="false" position="absolute 98 125 236 145" anchor="default" onclick="dv_Copy_chk4_onclick"/>
              <ObjCalendar id="cal_receiveDateFr" titletext="캘린더" taborder="24" onclick="cal_procDateFr_onclick" scrollbars="none" class="cal_WF_Essential" position="absolute 798 -448 891 -427" anchor="default"/>
              <ObjCalendar id="cal_receiveDate" titletext="캘린더" taborder="25" onclick="cal_procDateFr_onclick" scrollbars="none" class="cal_WF_Essential" position="absolute 97 42 190 63" anchor="default"/>
            </Layout>
          </Layouts>
        </Div>
        <Edit id="edt_tmpSeq" taborder="36" enable="false" visible="false" position="absolute 591 181 701 202" anchor="left top" style="background:#e4e4e4ff;"/>
        <Grid id="Grid00" taborder="37" binddataset="ds_listSave" useinputpanel="false" position="absolute 7 590 1525 714" anchor="default" visible="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
              </Columns>
              <Rows>
                <Row band="head" size="24"/>
                <Row band="body" size="24"/>
              </Rows>
              <Band id="head">
                <Cell col="0" disptype="normal" text="tmpSeq"/>
                <Cell col="1" disptype="normal" text="salsClass"/>
                <Cell col="2" disptype="normal" text="salsClassNm"/>
                <Cell col="3" disptype="normal" text="posNum"/>
                <Cell col="4" disptype="normal" text="posNm"/>
                <Cell col="5" disptype="normal" text="posOutvatFlag"/>
                <Cell col="6" disptype="normal" text="custCd"/>
                <Cell col="7" disptype="normal" text="custNm"/>
                <Cell col="8" disptype="normal" text="vatClass"/>
                <Cell col="9" disptype="normal" text="vatClassNm"/>
                <Cell col="10" disptype="normal" text="uprice"/>
                <Cell col="11" disptype="normal" text="salQuantity"/>
                <Cell col="12" disptype="normal" text="salAmt"/>
                <Cell col="13" disptype="normal" text="bldType"/>
                <Cell col="14" disptype="normal" text="bldTypeNm"/>
                <Cell col="15" disptype="normal" text="payCd"/>
                <Cell col="16" disptype="normal" text="payCdNm"/>
                <Cell col="17" disptype="normal" text="payCdNmInfo"/>
                <Cell col="18" disptype="normal" text="remark"/>
                <Cell col="19" disptype="normal" text="materialNm"/>
                <Cell col="20" disptype="normal" text="materialCd"/>
                <Cell col="21" disptype="normal" text="advanceNum"/>
                <Cell col="22" disptype="normal" text="sumAdvanceAmt"/>
                <Cell col="23" disptype="normal" text="minusAdvanceAmt"/>
                <Cell col="24" disptype="normal" text="typeCd"/>
                <Cell col="25" disptype="normal" text="muCd"/>
                <Cell col="26" disptype="normal" text="upjangCd"/>
                <Cell col="27" disptype="normal" text="occurDate"/>
                <Cell col="28" disptype="normal" text="evidence1"/>
                <Cell col="29" disptype="normal" text="evidence2"/>
                <Cell col="30" disptype="normal" text="evidence3"/>
                <Cell col="31" disptype="normal" text="evidence4"/>
                <Cell col="32" disptype="normal" text="evidence5"/>
                <Cell col="33" disptype="normal" text="evidence6"/>
                <Cell col="34" disptype="normal" text="taxShetPublishYn"/>
                <Cell col="35" disptype="normal" text="taxShetYn"/>
                <Cell col="36" disptype="normal" text="ddddCloseYn"/>
                <Cell col="37" disptype="normal" text="sysClass"/>
                <Cell col="38" disptype="normal" text="sysClassNm"/>
                <Cell col="39" disptype="normal" text="receiptNum"/>
                <Cell col="40" disptype="normal" text="ccCd"/>
                <Cell col="41" disptype="normal" text="totPsn"/>
                <Cell col="42" disptype="normal" text="totPsnYn"/>
                <Cell col="43" disptype="normal" text="agesByPsn"/>
                <Cell col="44" disptype="normal" text="genderPsn"/>
                <Cell col="45" disptype="normal" text="guestTypeByPsn"/>
                <Cell col="46" disptype="normal" text="internalUseClass"/>
                <Cell col="47" disptype="normal" text="salsUuser"/>
                <Cell col="48" disptype="normal" text="wonOccurDate"/>
                <Cell col="49" disptype="normal" text="wonReceiptNum"/>
                <Cell col="50" disptype="normal" text="menuMgrp"/>
                <Cell col="51" disptype="normal" text="menuMcalss"/>
                <Cell col="52" disptype="normal" text="menuSclass"/>
                <Cell col="53" disptype="normal" text="menuCd"/>
                <Cell col="54" disptype="normal" text="menuNm"/>
                <Cell col="55" disptype="normal" text="materialClass"/>
                <Cell col="56" disptype="normal" text="netAmt"/>
                <Cell col="57" disptype="normal" text="svcAmt"/>
                <Cell col="58" disptype="normal" text="vatAmt"/>
                <Cell col="59" disptype="normal" text="encEvidenceNum"/>
                <Cell col="60" disptype="normal" text="amt"/>
                <Cell col="61" disptype="normal" text="exchAmt"/>
                <Cell col="62" disptype="normal" text="schTm"/>
                <Cell col="63" disptype="normal" text="itemTypenm"/>
                <Cell col="64" disptype="normal" text="itemCodenm"/>
                <Cell col="65" disptype="normal" text="seq"/>
                <Cell col="66" disptype="normal" text="cardComCd"/>
                <Cell col="67" disptype="normal" text="buycpnyCd"/>
                <Cell col="68" disptype="normal" text="frncStorNum"/>
                <Cell col="69" disptype="normal" text="advanceYn"/>
                <Cell col="70" disptype="normal" text="publishYn"/>
                <Cell col="71" disptype="normal" text="upjangSalsNum"/>
                <Cell col="72" disptype="normal" text="journalzYn"/>
                <Cell col="73" disptype="normal" text="journalzNum"/>
                <Cell col="74" disptype="normal" text="arYn"/>
                <Cell col="75" disptype="normal" text="arNum"/>
                <Cell col="76" disptype="normal" text="linkOccurDate"/>
                <Cell col="77" disptype="normal" text="linkReceiptNum"/>
                <Cell col="78" disptype="normal" text="denomAmt"/>
              </Band>
              <Band id="body">
                <Cell col="0" disptype="normal" text="bind:tmpSeq"/>
                <Cell col="1" disptype="normal" text="bind:salsClass"/>
                <Cell col="2" disptype="normal" text="bind:salsClassNm"/>
                <Cell col="3" disptype="normal" text="bind:posNum"/>
                <Cell col="4" disptype="normal" text="bind:posNm"/>
                <Cell col="5" disptype="normal" text="bind:posOutvatFlag"/>
                <Cell col="6" disptype="normal" text="bind:custCd"/>
                <Cell col="7" disptype="normal" text="bind:custNm"/>
                <Cell col="8" disptype="normal" text="bind:vatClass"/>
                <Cell col="9" disptype="normal" text="bind:vatClassNm"/>
                <Cell col="10" disptype="normal" text="bind:uprice"/>
                <Cell col="11" disptype="normal" text="bind:salQuantity"/>
                <Cell col="12" disptype="normal" text="bind:salAmt"/>
                <Cell col="13" disptype="normal" text="bind:bldType"/>
                <Cell col="14" disptype="normal" text="bind:bldTypeNm"/>
                <Cell col="15" disptype="normal" text="bind:payCd"/>
                <Cell col="16" disptype="normal" text="bind:payCdNm"/>
                <Cell col="17" disptype="normal" text="bind:payCdNmInfo"/>
                <Cell col="18" disptype="normal" text="bind:remark"/>
                <Cell col="19" disptype="normal" text="bind:materialNm"/>
                <Cell col="20" disptype="normal" text="bind:materialCd"/>
                <Cell col="21" disptype="normal" text="bind:advanceNum"/>
                <Cell col="22" disptype="normal" text="bind:sumAdvanceAmt"/>
                <Cell col="23" disptype="normal" text="bind:minusAdvanceAmt"/>
                <Cell col="24" disptype="normal" text="bind:typeCd"/>
                <Cell col="25" disptype="normal" text="bind:muCd"/>
                <Cell col="26" disptype="normal" text="bind:upjangCd"/>
                <Cell col="27" disptype="normal" text="bind:occurDate"/>
                <Cell col="28" disptype="normal" text="bind:evidence1"/>
                <Cell col="29" disptype="normal" text="bind:evidence2"/>
                <Cell col="30" disptype="normal" text="bind:evidence3"/>
                <Cell col="31" disptype="normal" text="bind:evidence4"/>
                <Cell col="32" disptype="normal" text="bind:evidence5"/>
                <Cell col="33" disptype="normal" text="bind:evidence6"/>
                <Cell col="34" disptype="normal" text="bind:taxShetPublishYn"/>
                <Cell col="35" disptype="normal" text="bind:taxShetYn"/>
                <Cell col="36" disptype="normal" text="bind:ddddCloseYn"/>
                <Cell col="37" disptype="normal" text="bind:sysClass"/>
                <Cell col="38" disptype="normal" text="bind:sysClassNm"/>
                <Cell col="39" disptype="normal" text="bind:receiptNum"/>
                <Cell col="40" disptype="normal" text="bind:ccCd"/>
                <Cell col="41" disptype="normal" text="bind:totPsn"/>
                <Cell col="42" disptype="normal" text="bind:totPsnYn"/>
                <Cell col="43" disptype="normal" text="bind:agesByPsn"/>
                <Cell col="44" disptype="normal" text="bind:genderPsn"/>
                <Cell col="45" disptype="normal" text="bind:guestTypeByPsn"/>
                <Cell col="46" disptype="normal" text="bind:internalUseClass"/>
                <Cell col="47" disptype="normal" text="bind:salsUuser"/>
                <Cell col="48" disptype="normal" text="bind:wonOccurDate"/>
                <Cell col="49" disptype="normal" text="bind:wonReceiptNum"/>
                <Cell col="50" disptype="normal" text="bind:menuMgrp"/>
                <Cell col="51" disptype="normal" text="bind:menuMcalss"/>
                <Cell col="52" disptype="normal" text="bind:menuSclass"/>
                <Cell col="53" disptype="normal" text="bind:menuCd"/>
                <Cell col="54" disptype="normal" text="bind:menuNm"/>
                <Cell col="55" disptype="normal" text="bind:materialClass"/>
                <Cell col="56" disptype="normal" text="bind:netAmt"/>
                <Cell col="57" disptype="normal" text="bind:svcAmt"/>
                <Cell col="58" disptype="normal" text="bind:vatAmt"/>
                <Cell col="59" disptype="normal" text="bind:encEvidenceNum"/>
                <Cell col="60" disptype="normal" text="bind:amt"/>
                <Cell col="61" disptype="normal" text="bind:exchAmt"/>
                <Cell col="62" disptype="normal" text="bind:schTm"/>
                <Cell col="63" disptype="normal" text="bind:itemTypenm"/>
                <Cell col="64" disptype="normal" text="bind:itemCodenm"/>
                <Cell col="65" disptype="normal" text="bind:seq"/>
                <Cell col="66" disptype="normal" text="bind:cardComCd"/>
                <Cell col="67" disptype="normal" text="bind:buycpnyCd"/>
                <Cell col="68" disptype="normal" text="bind:frncStorNum"/>
                <Cell col="69" disptype="normal" text="bind:advanceYn"/>
                <Cell col="70" disptype="normal" text="bind:publishYn"/>
                <Cell col="71" disptype="normal" text="bind:upjangSalsNum"/>
                <Cell col="72" disptype="normal" text="bind:journalzYn"/>
                <Cell col="73" disptype="normal" text="bind:journalzNum"/>
                <Cell col="74" disptype="normal" text="bind:arYn"/>
                <Cell col="75" disptype="normal" text="bind:arNum"/>
                <Cell col="76" disptype="normal" text="bind:linkOccurDate"/>
                <Cell col="77" disptype="normal" text="bind:linkReceiptNum"/>
                <Cell col="78" disptype="normal" text="bind:denomAmt"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="Grid01" taborder="38" binddataset="ds_list_ticket" useinputpanel="false" position="absolute 10 523 819 579" anchor="default" visible="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
              </Columns>
              <Rows>
                <Row band="head" size="24"/>
                <Row band="body" size="24"/>
              </Rows>
              <Band id="head">
                <Cell col="0" disptype="normal" text="itemType"/>
                <Cell col="1" disptype="normal" text="itemCode"/>
                <Cell col="2" disptype="normal" text="occurDate"/>
                <Cell col="3" disptype="normal" text="wwQty"/>
                <Cell col="4" disptype="normal" text="remarkDesc"/>
                <Cell col="5" disptype="normal" text="upjangCd"/>
                <Cell col="6" disptype="normal" text="uprice"/>
                <Cell col="7" disptype="normal" text="tmpSeq"/>
                <Cell col="8" disptype="normal" text="custCd"/>
                <Cell col="9" disptype="normal" text="muCd"/>
              </Band>
              <Band id="body">
                <Cell col="0" disptype="normal" text="bind:itemType"/>
                <Cell col="1" disptype="normal" text="bind:itemCode"/>
                <Cell col="2" disptype="normal" text="bind:occurDate"/>
                <Cell col="3" disptype="normal" text="bind:wwQty"/>
                <Cell col="4" disptype="normal" text="bind:remarkDesc"/>
                <Cell col="5" disptype="normal" text="bind:upjangCd"/>
                <Cell col="6" disptype="normal" text="bind:uprice"/>
                <Cell col="7" disptype="normal" text="bind:tmpSeq"/>
                <Cell col="8" disptype="normal" text="bind:custCd"/>
                <Cell col="9" disptype="normal" text="bind:muCd"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="Grid02" taborder="39" binddataset="ds_advanceAmt" useinputpanel="false" position="absolute 825 484 1068 581" visible="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
              </Columns>
              <Rows>
                <Row band="head" size="24"/>
                <Row band="body" size="24"/>
              </Rows>
              <Band id="head">
                <Cell col="0" disptype="normal" text="advanceNum"/>
                <Cell col="1" disptype="normal" text="sumAmt"/>
                <Cell col="2" disptype="normal" text="tmpSeq"/>
              </Band>
              <Band id="body">
                <Cell col="0" disptype="normal" text="bind:advanceNum"/>
                <Cell col="1" disptype="normal" text="bind:sumAmt"/>
                <Cell col="2" disptype="normal" text="bind:tmpSeq"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="Grid03" taborder="40" useinputpanel="false" position="absolute 9 302 1215 406" binddataset="ds_list" visible="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
              </Columns>
              <Rows>
                <Row band="head" size="24"/>
                <Row band="body" size="24"/>
              </Rows>
              <Band id="head">
                <Cell col="0" disptype="normal" text="tmpSeq"/>
                <Cell col="1" disptype="normal" text="salsClass"/>
                <Cell col="2" disptype="normal" text="salsClassNm"/>
                <Cell col="3" disptype="normal" text="posNum"/>
                <Cell col="4" disptype="normal" text="posNm"/>
                <Cell col="5" disptype="normal" text="posOutvatFlag"/>
                <Cell col="6" disptype="normal" text="custCd"/>
                <Cell col="7" disptype="normal" text="custNm"/>
                <Cell col="8" disptype="normal" text="vatClass"/>
                <Cell col="9" disptype="normal" text="vatClassNm"/>
                <Cell col="10" disptype="normal" text="uprice"/>
                <Cell col="11" disptype="normal" text="salQuantity"/>
                <Cell col="12" disptype="normal" text="salAmt"/>
                <Cell col="13" disptype="normal" text="bldType"/>
                <Cell col="14" disptype="normal" text="bldTypeNm"/>
                <Cell col="15" disptype="normal" text="payCd"/>
                <Cell col="16" disptype="normal" text="payCdNm"/>
                <Cell col="17" disptype="normal" text="payCdNmInfo"/>
                <Cell col="18" disptype="normal" text="remark"/>
                <Cell col="19" disptype="normal" text="materialNm"/>
                <Cell col="20" disptype="normal" text="materialCd"/>
                <Cell col="21" disptype="normal" text="advanceNum"/>
                <Cell col="22" disptype="normal" text="sumAdvanceAmt"/>
                <Cell col="23" disptype="normal" text="minusAdvanceAmt"/>
                <Cell col="24" disptype="normal" text="typeCd"/>
                <Cell col="25" disptype="normal" text="muCd"/>
                <Cell col="26" disptype="normal" text="upjangCd"/>
                <Cell col="27" disptype="normal" text="occurDate"/>
                <Cell col="28" disptype="normal" text="evidence1"/>
                <Cell col="29" disptype="normal" text="evidence2"/>
                <Cell col="30" disptype="normal" text="evidence3"/>
                <Cell col="31" disptype="normal" text="evidence4"/>
                <Cell col="32" disptype="normal" text="evidence5"/>
                <Cell col="33" disptype="normal" text="evidence6"/>
                <Cell col="34" disptype="normal" text="taxShetPublishYn"/>
                <Cell col="35" disptype="normal" text="ddddCloseYn"/>
                <Cell col="36" disptype="normal" text="sysClass"/>
                <Cell col="37" disptype="normal" text="sysClassNm"/>
                <Cell col="38" disptype="normal" text="receiptNum"/>
                <Cell col="39" disptype="normal" text="ccCd"/>
                <Cell col="40" disptype="normal" text="totPsn"/>
                <Cell col="41" disptype="normal" text="agesByPsn"/>
                <Cell col="42" disptype="normal" text="genderPsn"/>
                <Cell col="43" disptype="normal" text="guestTypeByPsn"/>
                <Cell col="44" disptype="normal" text="internalUseClass"/>
                <Cell col="45" disptype="normal" text="salsUuser"/>
                <Cell col="46" disptype="normal" text="wonOccurDate"/>
                <Cell col="47" disptype="normal" text="wonReceiptNum"/>
                <Cell col="48" disptype="normal" text="menuMgrp"/>
                <Cell col="49" disptype="normal" text="menuMcalss"/>
                <Cell col="50" disptype="normal" text="menuSclass"/>
                <Cell col="51" disptype="normal" text="menuCd"/>
                <Cell col="52" disptype="normal" text="menuNm"/>
                <Cell col="53" disptype="normal" text="materialClass"/>
                <Cell col="54" disptype="normal" text="netAmt"/>
                <Cell col="55" disptype="normal" text="svcAmt"/>
                <Cell col="56" disptype="normal" text="vatAmt"/>
                <Cell col="57" disptype="normal" text="encEvidenceNum"/>
                <Cell col="58" disptype="normal" text="amt"/>
                <Cell col="59" disptype="normal" text="exchAmt"/>
                <Cell col="60" disptype="normal" text="schTm"/>
                <Cell col="61" disptype="normal" text="itemTypenm"/>
                <Cell col="62" disptype="normal" text="itemCodenm"/>
                <Cell col="63" disptype="normal" text="seq"/>
                <Cell col="64" disptype="normal" text="cardComCd"/>
                <Cell col="65" disptype="normal" text="buycpnyCd"/>
                <Cell col="66" disptype="normal" text="frncStorNum"/>
                <Cell col="67" disptype="normal" text="advanceYn"/>
                <Cell col="68" disptype="normal" text="publishYn"/>
                <Cell col="69" disptype="normal" text="upjangSalsNum"/>
                <Cell col="70" disptype="normal" text="journalzYn"/>
                <Cell col="71" disptype="normal" text="journalzNum"/>
                <Cell col="72" disptype="normal" text="arYn"/>
                <Cell col="73" disptype="normal" text="arNum"/>
                <Cell col="74" disptype="normal" text="linkOccurDate"/>
                <Cell col="75" disptype="normal" text="linkReceiptNum"/>
              </Band>
              <Band id="body">
                <Cell col="0" disptype="normal" text="bind:tmpSeq"/>
                <Cell col="1" disptype="normal" text="bind:salsClass"/>
                <Cell col="2" disptype="normal" text="bind:salsClassNm"/>
                <Cell col="3" disptype="normal" text="bind:posNum"/>
                <Cell col="4" disptype="normal" text="bind:posNm"/>
                <Cell col="5" disptype="normal" text="bind:posOutvatFlag"/>
                <Cell col="6" disptype="normal" text="bind:custCd"/>
                <Cell col="7" disptype="normal" text="bind:custNm"/>
                <Cell col="8" disptype="normal" text="bind:vatClass"/>
                <Cell col="9" disptype="normal" text="bind:vatClassNm"/>
                <Cell col="10" disptype="normal" text="bind:uprice"/>
                <Cell col="11" disptype="normal" text="bind:salQuantity"/>
                <Cell col="12" disptype="normal" text="bind:salAmt"/>
                <Cell col="13" disptype="normal" text="bind:bldType"/>
                <Cell col="14" disptype="normal" text="bind:bldTypeNm"/>
                <Cell col="15" disptype="normal" text="bind:payCd"/>
                <Cell col="16" disptype="normal" text="bind:payCdNm"/>
                <Cell col="17" disptype="normal" text="bind:payCdNmInfo"/>
                <Cell col="18" disptype="normal" text="bind:remark"/>
                <Cell col="19" disptype="normal" text="bind:materialNm"/>
                <Cell col="20" disptype="normal" text="bind:materialCd"/>
                <Cell col="21" disptype="normal" text="bind:advanceNum"/>
                <Cell col="22" disptype="normal" text="bind:sumAdvanceAmt"/>
                <Cell col="23" disptype="normal" text="bind:minusAdvanceAmt"/>
                <Cell col="24" disptype="normal" text="bind:typeCd"/>
                <Cell col="25" disptype="normal" text="bind:muCd"/>
                <Cell col="26" disptype="normal" text="bind:upjangCd"/>
                <Cell col="27" disptype="normal" text="bind:occurDate"/>
                <Cell col="28" disptype="normal" text="bind:evidence1"/>
                <Cell col="29" disptype="normal" text="bind:evidence2"/>
                <Cell col="30" disptype="normal" text="bind:evidence3"/>
                <Cell col="31" disptype="normal" text="bind:evidence4"/>
                <Cell col="32" disptype="normal" text="bind:evidence5"/>
                <Cell col="33" disptype="normal" text="bind:evidence6"/>
                <Cell col="34" disptype="normal" text="bind:taxShetPublishYn"/>
                <Cell col="35" disptype="normal" text="bind:ddddCloseYn"/>
                <Cell col="36" disptype="normal" text="bind:sysClass"/>
                <Cell col="37" disptype="normal" text="bind:sysClassNm"/>
                <Cell col="38" disptype="normal" text="bind:receiptNum"/>
                <Cell col="39" disptype="normal" text="bind:ccCd"/>
                <Cell col="40" disptype="normal" text="bind:totPsn"/>
                <Cell col="41" disptype="normal" text="bind:agesByPsn"/>
                <Cell col="42" disptype="normal" text="bind:genderPsn"/>
                <Cell col="43" disptype="normal" text="bind:guestTypeByPsn"/>
                <Cell col="44" disptype="normal" text="bind:internalUseClass"/>
                <Cell col="45" disptype="normal" text="bind:salsUuser"/>
                <Cell col="46" disptype="normal" text="bind:wonOccurDate"/>
                <Cell col="47" disptype="normal" text="bind:wonReceiptNum"/>
                <Cell col="48" disptype="normal" text="bind:menuMgrp"/>
                <Cell col="49" disptype="normal" text="bind:menuMcalss"/>
                <Cell col="50" disptype="normal" text="bind:menuSclass"/>
                <Cell col="51" disptype="normal" text="bind:menuCd"/>
                <Cell col="52" disptype="normal" text="bind:menuNm"/>
                <Cell col="53" disptype="normal" text="bind:materialClass"/>
                <Cell col="54" disptype="normal" text="bind:netAmt"/>
                <Cell col="55" disptype="normal" text="bind:svcAmt"/>
                <Cell col="56" disptype="normal" text="bind:vatAmt"/>
                <Cell col="57" disptype="normal" text="bind:encEvidenceNum"/>
                <Cell col="58" disptype="normal" text="bind:amt"/>
                <Cell col="59" disptype="normal" text="bind:exchAmt"/>
                <Cell col="60" disptype="normal" text="bind:schTm"/>
                <Cell col="61" disptype="normal" text="bind:itemTypenm"/>
                <Cell col="62" disptype="normal" text="bind:itemCodenm"/>
                <Cell col="63" disptype="normal" text="bind:seq"/>
                <Cell col="64" disptype="normal" text="bind:cardComCd"/>
                <Cell col="65" disptype="normal" text="bind:buycpnyCd"/>
                <Cell col="66" disptype="normal" text="bind:frncStorNum"/>
                <Cell col="67" disptype="normal" text="bind:advanceYn"/>
                <Cell col="68" disptype="normal" text="bind:publishYn"/>
                <Cell col="69" disptype="normal" text="bind:upjangSalsNum"/>
                <Cell col="70" disptype="normal" text="bind:journalzYn"/>
                <Cell col="71" disptype="normal" text="bind:journalzNum"/>
                <Cell col="72" disptype="normal" text="bind:arYn"/>
                <Cell col="73" disptype="normal" text="bind:arNum"/>
                <Cell col="74" disptype="normal" text="bind:linkOccurDate"/>
                <Cell col="75" disptype="normal" text="bind:linkReceiptNum"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Grid id="Grid04" taborder="41" useinputpanel="false" position="absolute 1089 484 1524 583" binddataset="ds_search" visible="false">
          <Formats>
            <Format id="default">
              <Columns>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
                <Col size="80"/>
              </Columns>
              <Rows>
                <Row band="head" size="24"/>
                <Row band="body" size="24"/>
              </Rows>
              <Band id="head">
                <Cell col="0" disptype="normal" text="ccCd"/>
                <Cell col="1" disptype="normal" text="ccNm"/>
                <Cell col="2" disptype="normal" text="muCd"/>
                <Cell col="3" disptype="normal" text="custCd"/>
                <Cell col="4" disptype="normal" text="custNm"/>
                <Cell col="5" disptype="normal" text="occurDate"/>
                <Cell col="6" disptype="normal" text="schTm"/>
                <Cell col="7" disptype="normal" text="schTmNm"/>
                <Cell col="8" disptype="normal" text="schMu"/>
                <Cell col="9" disptype="normal" text="upjangCd"/>
                <Cell col="10" disptype="normal" text="upjangNm"/>
                <Cell col="11" disptype="normal" text="sysClass"/>
                <Cell col="12" disptype="normal" text="batchId"/>
                <Cell col="13" disptype="normal" text="occurCopyDate"/>
                <Cell col="14" disptype="normal" text="muNm"/>
                <Cell col="15" disptype="normal" text="saleClass"/>
                <Cell col="16" disptype="normal" text="posNum"/>
                <Cell col="17" disptype="normal" text="posNm"/>
                <Cell col="18" disptype="normal" text="payCd"/>
                <Cell col="19" disptype="normal" text="typeCd"/>
                <Cell col="20" disptype="normal" text="itemType"/>
                <Cell col="21" disptype="normal" text="acctCd"/>
                <Cell col="22" disptype="normal" text="taxShetPublishYn"/>
              </Band>
              <Band id="body">
                <Cell col="0" disptype="normal" text="bind:ccCd"/>
                <Cell col="1" disptype="normal" text="bind:ccNm"/>
                <Cell col="2" disptype="normal" text="bind:muCd"/>
                <Cell col="3" disptype="normal" text="bind:custCd"/>
                <Cell col="4" disptype="normal" text="bind:custNm"/>
                <Cell col="5" disptype="normal" text="bind:occurDate"/>
                <Cell col="6" disptype="normal" text="bind:schTm"/>
                <Cell col="7" disptype="normal" text="bind:schTmNm"/>
                <Cell col="8" disptype="normal" text="bind:schMu"/>
                <Cell col="9" disptype="normal" text="bind:upjangCd"/>
                <Cell col="10" disptype="normal" text="bind:upjangNm"/>
                <Cell col="11" disptype="normal" text="bind:sysClass"/>
                <Cell col="12" disptype="normal" text="bind:batchId"/>
                <Cell col="13" disptype="normal" text="bind:occurCopyDate"/>
                <Cell col="14" disptype="normal" text="bind:muNm"/>
                <Cell col="15" disptype="normal" text="bind:saleClass"/>
                <Cell col="16" disptype="normal" text="bind:posNum"/>
                <Cell col="17" disptype="normal" text="bind:posNm"/>
                <Cell col="18" disptype="normal" text="bind:payCd"/>
                <Cell col="19" disptype="normal" text="bind:typeCd"/>
                <Cell col="20" disptype="normal" text="bind:itemType"/>
                <Cell col="21" disptype="normal" text="bind:acctCd"/>
                <Cell col="22" disptype="normal" text="bind:taxShetPublishYn"/>
              </Band>
            </Format>
          </Formats>
        </Grid>
        <Static id="Static31" text="선수금 관련 항목은 삭제만 가능합니다." position="absolute 714 184 927 202" anchor="top right" style="color:red;font:arial,8,bold;"/>
        <Splitter id="sp_line" position="absolute 0 463 1237 473" type="vertical" min="187" max="605" anchor="left top right" class="spt_WF_2">
          <Formats>
            <Format id="default">
              <SplitterItems id="items">
                <SplitterItem id="item00" bindtype="resize" position="leftortop" offset="6" componentid="grd_list"/>
                <SplitterItem id="item01" bindtype="move" position="rightorbottom" offset="6" componentid="Static09"/>
                <SplitterItem id="item02" bindtype="resize" position="rightorbottom" offset="25" componentid="grd_list2"/>
              </SplitterItems>
            </Format>
          </Formats>
        </Splitter>
        <Static id="Static32" text="h13" class="Guide01_AreaRed" visible="false" position="absolute -1 450 449 463" anchor="left top"/>
        <Button id="btn_close" taborder="42" text="사업장일마감관리" position="absolute 1020 184 1128 204" class="btn_WF_Function" anchor="top right" onclick="btn_close_onclick"/>
        <Edit id="edt_custnm" taborder="9" autoselect="true" onkeydown="edt_onkeydown" class="edt_WF_Essential" enable="true" position="absolute 690 103 892 124"/>
        <Button id="edtBtn_custnm" taborder="10" tabstop="false" onclick="edtBtn_salsType_onclick" class="btn_WF_popSearchEssential" enable="true" position="absolute 890 103 910 124"/>
        <Button id="btn_apprvAdd" taborder="44" text="건별입력" class="btn_WF_CRUD" enable="true" position="absolute 719 0 784 25" anchor="left top" style="font:Gulim,9,bold;" onclick="btn_apprvAdd_onclick" visible="true"/>
        <Button id="btn_apprvdel" taborder="45" text="건별삭제" class="btn_WF_CRUD" enable="true" position="absolute 786 0 851 25" anchor="left top" style="font:Gulim,9,bold;" onclick="btn_apprvdel_onclick" visible="true"/>
        <Static id="Static33" text="※ 특판 매출 수기등록 절대 불가합니다!!  자동 연계 됩니다." position="absolute 14 77 609 95" anchor="top right" style="color:red;font:arial,10,bold;"/>
        <Static id="st_OPEN_YN00" text="운영 여부" class="sta_WFDA_Label01" position="absolute 1118 126 1187 153"/>
        <Edit id="edt_openYn" taborder="46" position="absolute 1191 129 1233 150" displaynulltext="Y" style="padding:0 0 0 0;align:center middle;" readonly="true" enable="false"/>
        <Button id="btn_nonSaleDay" taborder="47" text="영업휴무일 등록" position="absolute 1135 184 1232 204" class="btn_WF_Function" onclick="btn_nonSaleDay_onclick" anchor="top right"/>
        <Static id="st_TAX_KIND02" text="식수포함" class="sta_WFDA_Label01" position="absolute 1305 41 1385 68" userdata="strMAQuery_GwaGubun" visible="false"/>
        <Edit id="edt_saleGubun" taborder="16" readonly="true" autoselect="true" onkeydown="edt_onkeydown" class="edt_WF_Essential" enable="false" position="absolute 691 129 892 150"/>
        <Button id="edtBtn_saleGubun" taborder="17" tabstop="false" onclick="edtBtn_saleGubun_onclick" class="btn_WF_popSearchEssential" enable="false" position="absolute 890 128 910 149"/>
      </Layout>
    </Layouts>
    <Bind>
      <BindItem id="item4" compid="dv_Copy.cal_receiveDateFr00" propid="text" datasetid="ds_search" columnid="occurDate"/>
      <BindItem id="item2" compid="cal_receiveDateFr" propid="text" datasetid="ds_search" columnid="occurDate"/>
      <BindItem id="item0" compid="dv_Copy.cal_receiveDateFr" propid="text" datasetid="ds_search" columnid="occurDate"/>
      <BindItem id="item5" compid="dv_Copy.cal_receiveDate" propid="text" datasetid="ds_search" columnid="occurCopyDate"/>
      <BindItem id="item27" compid="cboPos" propid="value" datasetid="ds_search" columnid="posNum"/>
      <BindItem id="item1" compid="sta_detail01" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="edt_TRX_TYPE_value" compid="edt_salsType" propid="value" datasetid="ds_listSave" columnid="salsClassNm"/>
      <BindItem id="item3" compid="sta_detail00" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="edt_SUBINV_CODE_value" compid="edt_pos" propid="value" datasetid="ds_listSave" columnid="posNm"/>
      <BindItem id="item7" compid="sta_detail02" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item8" compid="sta_detail08" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="edt_TAX_KIND_value" compid="edt_vatClass" propid="value" datasetid="ds_listSave" columnid="vatClassNm"/>
      <BindItem id="me_QTY_value" compid="edt_salQuantity" propid="value" datasetid="ds_listSave" columnid="salQuantity"/>
      <BindItem id="item9" compid="sta_detail06" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="me_PRICE_value" compid="edt_uprice" propid="value" datasetid="ds_listSave" columnid="uprice"/>
      <BindItem id="item10" compid="sta_detail04" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="me_AMT_value" compid="edt_amt" propid="value" datasetid="ds_listSave" columnid="salAmt"/>
      <BindItem id="item11" compid="sta_detail07" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item12" compid="edt_bldType" propid="value" datasetid="ds_listSave" columnid="bldTypeNm"/>
      <BindItem id="item13" compid="sta_detail03" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item14" compid="sta_detail05" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item15" compid="edt_pmntType" propid="value" datasetid="ds_listSave" columnid="payCdNm"/>
      <BindItem id="item16" compid="sta_detail09" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item17" compid="sta_detail10" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="item18" compid="edt_ticket" propid="value" datasetid="ds_listSave" columnid="materialNm"/>
      <BindItem id="item19" compid="sta_detail11" propid="text" datasetid="ds_view" columnid="D_1"/>
      <BindItem id="edt_TRX_DESC_value" compid="edt_remark" propid="value" datasetid="ds_listSave" columnid="remark"/>
      <BindItem id="item20" compid="edt_evidence6" propid="value" datasetid="ds_listSave" columnid="evidence6"/>
      <BindItem id="item6" compid="edt_tmpSeq" propid="value" datasetid="ds_listSave" columnid="tmpSeq"/>
      <BindItem id="item21" compid="chk_Auto00" propid="value" datasetid="ds_listSave" columnid="totPsnYn"/>
      <BindItem id="item22" compid="edt_custnm" propid="value" datasetid="ds_listSave" columnid="custNm"/>
      <BindItem id="item23" compid="edt_saleGubun" propid="value" datasetid="ds_listSave" columnid="saleGubunNm"/>
    </Bind>
    <Objects>
      <Dataset id="ds_search" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" cancolumnchange="ds_search_cancolumnchange" oncolumnchanged="ds_search_oncolumnchanged">
        <ColumnInfo>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="ccNm" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="occurDate" type="STRING" size="256"/>
          <Column id="schTm" type="STRING" size="256"/>
          <Column id="schTmNm" type="STRING" size="256"/>
          <Column id="schMu" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="sysClass" type="STRING" size="256"/>
          <Column id="batchId" type="STRING" size="256"/>
          <Column id="occurCopyDate" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="posNum" type="STRING" size="256"/>
          <Column id="posNm" type="STRING" size="256"/>
          <Column id="payCd" type="STRING" size="256"/>
          <Column id="typeCd" type="STRING" size="256"/>
          <Column id="itemType" type="STRING" size="256"/>
          <Column id="acctCd" type="STRING" size="256"/>
          <Column id="taxShetPublishYn" type="STRING" size="256"/>
          <Column id="itemCode" type="STRING" size="256"/>
          <Column id="saleGubun" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tmCdSch" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="tmNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_vatYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="50"/>
          <Column id="code" type="STRING" size="50"/>
          <Column id="codeName" type="STRING" size="500"/>
          <Column id="contents" type="STRING" size="300"/>
          <Column id="sortSeq" type="BIGDECIMAL" size="22"/>
          <Column id="systemYn" type="STRING" size="1"/>
          <Column id="posYn" type="STRING" size="1"/>
          <Column id="set1" type="STRING" size="100"/>
          <Column id="set2" type="STRING" size="100"/>
          <Column id="set3" type="STRING" size="100"/>
          <Column id="set4" type="STRING" size="100"/>
          <Column id="set5" type="STRING" size="100"/>
          <Column id="remark" type="STRING" size="300"/>
          <Column id="useYn" type="STRING" size="1"/>
          <Column id="attr01" type="STRING" size="300"/>
          <Column id="attr02" type="STRING" size="300"/>
          <Column id="attr03" type="STRING" size="300"/>
          <Column id="attr04" type="STRING" size="300"/>
          <Column id="attr05" type="STRING" size="300"/>
          <Column id="attr06" type="STRING" size="300"/>
          <Column id="attr07" type="STRING" size="300"/>
          <Column id="attr08" type="STRING" size="300"/>
          <Column id="attr09" type="STRING" size="300"/>
          <Column id="attr10" type="STRING" size="300"/>
          <Column id="cuser" type="STRING" size="20"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="20"/>
          <Column id="udate" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sysGubun" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="typeCd" type="STRING" size="256"/>
          <Column id="typeNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_searchValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="occurDate" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="muCd">title:원가부서,required:true</Col>
            <Col id="occurDate">title:매출일자,required:true</Col>
            <Col id="upjangCd">title:사업장,required:true</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_receiptNum" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="receiptNum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cccd" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="ccNm" type="STRING" size="256"/>
          <Column id="vatCtrlYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listAdvance" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_listAdvance_oncolumnchanged">
        <ColumnInfo>
          <Column id="sumAdvanceAmt" type="STRING" size="256"/>
          <Column id="advanceNum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listAdvanceTicketP2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_listAdvance_oncolumnchanged">
        <ColumnInfo>
          <Column id="sumAdvanceAmt" type="STRING" size="256"/>
          <Column id="advanceNum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listValid" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="occurDate" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="salsClassNm" type="STRING" size="256"/>
          <Column id="posNum" type="STRING" size="256"/>
          <Column id="vatClass" type="STRING" size="3"/>
          <Column id="salAmt" type="STRING" size="22"/>
          <Column id="payCd" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="1000"/>
          <Column id="materialCd" type="STRING" size="20"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="muCd">title:원가부서,required:true</Col>
            <Col id="upjangCd">title:사업장,required:true</Col>
            <Col id="occurDate">title:매출일자,required:true</Col>
            <Col id="salsClassNm">title:매출유형,required:true</Col>
            <Col id="posNum">title:창고,required:true</Col>
            <Col id="custCd">title:고객사,required:true</Col>
            <Col id="vatClass">title:과세여부,required:true</Col>
            <Col id="salAmt">title:매출액,required:true</Col>
            <Col id="payCd">title:지불유형,required:true</Col>
            <Col id="remark">title:적요,required:true</Col>
            <Col id="materialCd">title:자재명,required:false</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_advanceData" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="altNum" type="STRING" size="256"/>
          <Column id="altDate" type="STRING" size="256"/>
          <Column id="advanceAltOccurClass" type="STRING" size="256"/>
          <Column id="altTypeCd" type="STRING" size="256"/>
          <Column id="sysClass" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="accCd" type="STRING" size="256"/>
          <Column id="altAmt" type="BIGDECIMAL" size="256"/>
          <Column id="adjustAmt" type="BIGDECIMAL" size="256"/>
          <Column id="excAmt" type="BIGDECIMAL" size="256"/>
          <Column id="payGrp" type="STRING" size="256"/>
          <Column id="payType" type="STRING" size="256"/>
          <Column id="paySchdDate" type="STRING" size="256"/>
          <Column id="remark" type="STRING" size="256"/>
          <Column id="batchId" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="posNum" type="STRING" size="256"/>
          <Column id="receiptNum" type="STRING" size="256"/>
          <Column id="couponNum" type="STRING" size="256"/>
          <Column id="custCd" type="INT" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="reservNum" type="STRING" size="256"/>
          <Column id="journalzYn" type="STRING" size="256"/>
          <Column id="journalzNum" type="STRING" size="256"/>
          <Column id="reservDate" type="STRING" size="256"/>
          <Column id="inqueryStartDate" type="STRING" size="256"/>
          <Column id="inqueryEndDate" type="STRING" size="256"/>
          <Column id="inqueryMuCd" type="STRING" size="256"/>
          <Column id="inqueryTmCd" type="STRING" size="256"/>
          <Column id="inqueryCcCd" type="STRING" size="256"/>
          <Column id="inqueryUpjangCd" type="STRING" size="256"/>
          <Column id="inqueryCustCd" type="INT" size="256"/>
          <Column id="inqueryAdvanceTypeCd" type="STRING" size="256"/>
          <Column id="inqueryAdvanceNum" type="STRING" size="256"/>
          <Column id="transCustCd" type="INT" size="256"/>
          <Column id="transCcCd" type="STRING" size="256"/>
          <Column id="recdStatus" type="STRING" size="256"/>
          <Column id="fiscalDate" type="STRING" size="256"/>
          <Column id="transTypeCd" type="STRING" size="256"/>
          <Column id="occurDateFrom" type="STRING" size="256"/>
          <Column id="occurDateTo" type="STRING" size="256"/>
          <Column id="fiscalDateFrom" type="STRING" size="256"/>
          <Column id="fiscalDateTo" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="ccNm" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="inqueryMuNm" type="STRING" size="256"/>
          <Column id="inqueryTmNm" type="STRING" size="256"/>
          <Column id="inqueryCcNm" type="STRING" size="256"/>
          <Column id="inqueryUpjangNm" type="STRING" size="256"/>
          <Column id="inqueryCustNm" type="STRING" size="256"/>
          <Column id="transCustNm" type="STRING" size="256"/>
          <Column id="transCcNm" type="STRING" size="256"/>
          <Column id="advanceNum" type="STRING" size="256"/>
          <Column id="advanceTypeCd" type="STRING" size="256"/>
          <Column id="rowStatus" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_exptDt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="payCdNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_posYn" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="groupCode" type="STRING" size="50"/>
          <Column id="code" type="STRING" size="50"/>
          <Column id="codeName" type="STRING" size="500"/>
          <Column id="contents" type="STRING" size="300"/>
          <Column id="sortSeq" type="BIGDECIMAL" size="22"/>
          <Column id="systemYn" type="STRING" size="1"/>
          <Column id="posYn" type="STRING" size="1"/>
          <Column id="set1" type="STRING" size="100"/>
          <Column id="set2" type="STRING" size="100"/>
          <Column id="set3" type="STRING" size="100"/>
          <Column id="set4" type="STRING" size="100"/>
          <Column id="set5" type="STRING" size="100"/>
          <Column id="remark" type="STRING" size="300"/>
          <Column id="useYn" type="STRING" size="1"/>
          <Column id="attr01" type="STRING" size="300"/>
          <Column id="attr02" type="STRING" size="300"/>
          <Column id="attr03" type="STRING" size="300"/>
          <Column id="attr04" type="STRING" size="300"/>
          <Column id="attr05" type="STRING" size="300"/>
          <Column id="attr06" type="STRING" size="300"/>
          <Column id="attr07" type="STRING" size="300"/>
          <Column id="attr08" type="STRING" size="300"/>
          <Column id="attr09" type="STRING" size="300"/>
          <Column id="attr10" type="STRING" size="300"/>
          <Column id="cuser" type="STRING" size="20"/>
          <Column id="cdate" type="DATETIME" size="7"/>
          <Column id="uuser" type="STRING" size="20"/>
          <Column id="udate" type="DATETIME" size="7"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_beforeDt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="dtCnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_beforeDtCopy" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="dtCntCopy" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_sysClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="custNm" type="STRING" size="256"/>
          <Column id="occurDate" type="STRING" size="256"/>
          <Column id="schTm" type="STRING" size="256"/>
          <Column id="schTmNm" type="STRING" size="256"/>
          <Column id="schMu" type="STRING" size="256"/>
          <Column id="upjangCd" type="STRING" size="256"/>
          <Column id="upjangNm" type="STRING" size="256"/>
          <Column id="sysClass" type="STRING" size="256"/>
          <Column id="batchId" type="STRING" size="256"/>
          <Column id="occurCopyDate" type="STRING" size="256"/>
          <Column id="muNm" type="STRING" size="256"/>
          <Column id="saleClass" type="STRING" size="256"/>
          <Column id="receiptNum" type="STRING" size="256"/>
          <Column id="ticketSeq" type="STRING" size="256"/>
          <Column id="ccCd" type="STRING" size="256"/>
          <Column id="itemCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listAdvanceTicketP3" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_listAdvance_oncolumnchanged">
        <ColumnInfo>
          <Column id="sumAdvanceAmt" type="STRING" size="256"/>
          <Column id="advanceNum" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list_ticket" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_ticket_oncolumnchanged">
        <ColumnInfo>
          <Column id="itemType" type="STRING" size="256"/>
          <Column id="itemCode" type="STRING" size="256"/>
          <Column id="occurDate" type="STRING" size="3"/>
          <Column id="wwQty" type="BIGDECIMAL" size="22"/>
          <Column id="remarkDesc" type="STRING" size="256"/>
          <Column id="upjangCd" type="BIGDECIMAL" size="22"/>
          <Column id="uprice" type="STRING" size="256"/>
          <Column id="tmpSeq" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="256"/>
          <Column id="muCd" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_tmpSeq" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="tmpSeq" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_list" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged" onrowposchanged="ds_list_onrowposchanged">
        <ColumnInfo>
          <Column id="tmpSeq" type="STRING" size="256"/>
          <Column id="salsClass" type="STRING" size="2"/>
          <Column id="salsClassNm" type="STRING" size="256"/>
          <Column id="posNum" type="STRING" size="2"/>
          <Column id="posNm" type="STRING" size="100"/>
          <Column id="posOutvatFlag" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="10"/>
          <Column id="custNm" type="STRING" size="255"/>
          <Column id="vatClass" type="STRING" size="3"/>
          <Column id="vatClassNm" type="STRING" size="3"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="salQuantity" type="BIGDECIMAL" size="22"/>
          <Column id="salAmt" type="BIGDECIMAL" size="22"/>
          <Column id="bldType" type="STRING" size="2"/>
          <Column id="bldTypeNm" type="STRING" size="2"/>
          <Column id="payCd" type="STRING" size="2"/>
          <Column id="payCdNm" type="STRING" size="100"/>
          <Column id="payCdNmInfo" type="STRING" size="100"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="materialNm" type="STRING" size="256"/>
          <Column id="materialCd" type="STRING" size="20"/>
          <Column id="advanceNum" type="STRING" size="256"/>
          <Column id="sumAdvanceAmt" type="BIGDECIMAL" size="4"/>
          <Column id="minusAdvanceAmt" type="BIGDECIMAL" size="4"/>
          <Column id="typeCd" type="STRING" size="4"/>
          <Column id="muCd" type="STRING" size="4"/>
          <Column id="upjangCd" type="STRING" size="22"/>
          <Column id="occurDate" type="STRING" size="8"/>
          <Column id="evidence1" type="STRING" size="50"/>
          <Column id="evidence2" type="STRING" size="50"/>
          <Column id="evidence3" type="STRING" size="50"/>
          <Column id="evidence4" type="STRING" size="50"/>
          <Column id="evidence5" type="STRING" size="50"/>
          <Column id="evidence6" type="STRING" size="50"/>
          <Column id="taxShetPublishYn" type="STRING" size="256"/>
          <Column id="taxShetYn" type="STRING" size="256"/>
          <Column id="ddddCloseYn" type="STRING" size="256"/>
          <Column id="sysClass" type="STRING" size="18"/>
          <Column id="sysClassNm" type="STRING" size="18"/>
          <Column id="receiptNum" type="STRING" size="7"/>
          <Column id="ccCd" type="STRING" size="6"/>
          <Column id="totPsn" type="BIGDECIMAL" size="22"/>
          <Column id="totPsnYn" type="STRING" size="22"/>
          <Column id="agesByPsn" type="BIGDECIMAL" size="22"/>
          <Column id="genderPsn" type="BIGDECIMAL" size="22"/>
          <Column id="guestTypeByPsn" type="BIGDECIMAL" size="22"/>
          <Column id="internalUseClass" type="STRING" size="1"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="wonOccurDate" type="STRING" size="8"/>
          <Column id="wonReceiptNum" type="STRING" size="7"/>
          <Column id="menuMgrp" type="STRING" size="18"/>
          <Column id="menuMcalss" type="STRING" size="18"/>
          <Column id="menuSclass" type="STRING" size="18"/>
          <Column id="menuCd" type="STRING" size="18"/>
          <Column id="menuNm" type="STRING" size="100"/>
          <Column id="materialClass" type="STRING" size="18"/>
          <Column id="netAmt" type="BIGDECIMAL" size="22"/>
          <Column id="svcAmt" type="BIGDECIMAL" size="22"/>
          <Column id="vatAmt" type="BIGDECIMAL" size="22"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="encEvidenceNum" type="STRING" size="200"/>
          <Column id="amt" type="BIGDECIMAL" size="22"/>
          <Column id="exchAmt" type="BIGDECIMAL" size="22"/>
          <Column id="netAmt" type="BIGDECIMAL" size="22"/>
          <Column id="vatAmt" type="BIGDECIMAL" size="22"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="schTm" type="STRING" size="256"/>
          <Column id="itemTypenm" type="STRING" size="256"/>
          <Column id="itemCodenm" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="cardComCd" type="STRING" size="256"/>
          <Column id="buycpnyCd" type="STRING" size="256"/>
          <Column id="frncStorNum" type="STRING" size="256"/>
          <Column id="advanceYn" type="STRING" size="256"/>
          <Column id="publishYn" type="STRING" size="256"/>
          <Column id="upjangSalsNum" type="STRING" size="256"/>
          <Column id="journalzYn" type="STRING" size="256"/>
          <Column id="journalzNum" type="STRING" size="256"/>
          <Column id="arYn" type="STRING" size="256"/>
          <Column id="arNum" type="STRING" size="256"/>
          <Column id="linkOccurDate" type="STRING" size="256"/>
          <Column id="linkReceiptNum" type="STRING" size="256"/>
          <Column id="taxShetYn" type="STRING" size="256"/>
          <Column id="exchAmt" type="STRING" size="256"/>
          <Column id="denomAmt" type="STRING" size="256"/>
          <Column id="saleGubun" type="STRING" size="256"/>
          <Column id="saleGubunNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listSave" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_listSave_oncolumnchanged" cancolumnchange="ds_listSave_cancolumnchange">
        <ColumnInfo>
          <Column id="tmpSeq" type="STRING" size="256"/>
          <Column id="salsClass" type="STRING" size="2"/>
          <Column id="salsClassNm" type="STRING" size="256"/>
          <Column id="posNum" type="STRING" size="2"/>
          <Column id="posNm" type="STRING" size="100"/>
          <Column id="posOutvatFlag" type="STRING" size="256"/>
          <Column id="custCd" type="STRING" size="10"/>
          <Column id="custNm" type="STRING" size="255"/>
          <Column id="vatClass" type="STRING" size="3"/>
          <Column id="vatClassNm" type="STRING" size="3"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="salQuantity" type="BIGDECIMAL" size="22"/>
          <Column id="salAmt" type="BIGDECIMAL" size="22"/>
          <Column id="bldType" type="STRING" size="100"/>
          <Column id="bldTypeNm" type="STRING" size="100"/>
          <Column id="payCd" type="STRING" size="100"/>
          <Column id="payCdNm" type="STRING" size="100"/>
          <Column id="payCdNmInfo" type="STRING" size="100"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="materialNm" type="STRING" size="256"/>
          <Column id="materialCd" type="STRING" size="20"/>
          <Column id="advanceNum" type="STRING" size="256"/>
          <Column id="sumAdvanceAmt" type="BIGDECIMAL" size="4"/>
          <Column id="minusAdvanceAmt" type="BIGDECIMAL" size="4"/>
          <Column id="typeCd" type="STRING" size="4"/>
          <Column id="muCd" type="STRING" size="4"/>
          <Column id="upjangCd" type="STRING" size="22"/>
          <Column id="occurDate" type="STRING" size="8"/>
          <Column id="evidence1" type="STRING" size="50"/>
          <Column id="evidence2" type="STRING" size="50"/>
          <Column id="evidence3" type="STRING" size="50"/>
          <Column id="evidence4" type="STRING" size="50"/>
          <Column id="evidence5" type="STRING" size="50"/>
          <Column id="evidence6" type="STRING" size="50"/>
          <Column id="taxShetPublishYn" type="STRING" size="256"/>
          <Column id="taxShetYn" type="STRING" size="256"/>
          <Column id="ddddCloseYn" type="STRING" size="256"/>
          <Column id="sysClass" type="STRING" size="18"/>
          <Column id="sysClassNm" type="STRING" size="18"/>
          <Column id="receiptNum" type="STRING" size="7"/>
          <Column id="ccCd" type="STRING" size="6"/>
          <Column id="totPsn" type="BIGDECIMAL" size="22"/>
          <Column id="totPsnYn" type="STRING" size="22"/>
          <Column id="agesByPsn" type="BIGDECIMAL" size="22"/>
          <Column id="genderPsn" type="BIGDECIMAL" size="22"/>
          <Column id="guestTypeByPsn" type="BIGDECIMAL" size="22"/>
          <Column id="internalUseClass" type="STRING" size="1"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="wonOccurDate" type="STRING" size="8"/>
          <Column id="wonReceiptNum" type="STRING" size="7"/>
          <Column id="menuMgrp" type="STRING" size="18"/>
          <Column id="menuMcalss" type="STRING" size="18"/>
          <Column id="menuSclass" type="STRING" size="18"/>
          <Column id="menuCd" type="STRING" size="18"/>
          <Column id="menuNm" type="STRING" size="100"/>
          <Column id="materialClass" type="STRING" size="18"/>
          <Column id="netAmt" type="BIGDECIMAL" size="22"/>
          <Column id="svcAmt" type="BIGDECIMAL" size="22"/>
          <Column id="vatAmt" type="BIGDECIMAL" size="22"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="encEvidenceNum" type="STRING" size="200"/>
          <Column id="amt" type="BIGDECIMAL" size="22"/>
          <Column id="exchAmt" type="BIGDECIMAL" size="22"/>
          <Column id="netAmt" type="BIGDECIMAL" size="22"/>
          <Column id="vatAmt" type="BIGDECIMAL" size="22"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="schTm" type="STRING" size="256"/>
          <Column id="itemTypenm" type="STRING" size="256"/>
          <Column id="itemCodenm" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="cardComCd" type="STRING" size="256"/>
          <Column id="buycpnyCd" type="STRING" size="256"/>
          <Column id="frncStorNum" type="STRING" size="256"/>
          <Column id="advanceYn" type="STRING" size="256"/>
          <Column id="publishYn" type="STRING" size="256"/>
          <Column id="upjangSalsNum" type="STRING" size="256"/>
          <Column id="journalzYn" type="STRING" size="256"/>
          <Column id="journalzNum" type="STRING" size="256"/>
          <Column id="arYn" type="STRING" size="256"/>
          <Column id="arNum" type="STRING" size="256"/>
          <Column id="linkOccurDate" type="STRING" size="256"/>
          <Column id="linkReceiptNum" type="STRING" size="256"/>
          <Column id="taxShetYn" type="STRING" size="256"/>
          <Column id="exchAmt" type="STRING" size="256"/>
          <Column id="denomAmt" type="STRING" size="256"/>
          <Column id="modifySalsYn" type="STRING" size="256"/>
          <Column id="tmCd" type="STRING" size="256"/>
          <Column id="saleGubun" type="STRING" size="256"/>
          <Column id="saleGubunNm" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_advanceAmt" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="advanceNum" type="STRING" size="256"/>
          <Column id="sumAmt" type="INT" size="256"/>
          <Column id="tmpSeq" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_listSysClass" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false" oncolumnchanged="ds_list_oncolumnchanged">
        <ColumnInfo>
          <Column id="tmpSeq" type="STRING" size="256"/>
          <Column id="advanceNum" type="STRING" size="256"/>
          <Column id="sumAdvanceAmt" type="BIGDECIMAL" size="4"/>
          <Column id="minusAdvanceAmt" type="BIGDECIMAL" size="4"/>
          <Column id="typeCd" type="STRING" size="4"/>
          <Column id="muCd" type="STRING" size="4"/>
          <Column id="upjangCd" type="STRING" size="22"/>
          <Column id="occurDate" type="STRING" size="8"/>
          <Column id="custCd" type="STRING" size="10"/>
          <Column id="custNm" type="STRING" size="255"/>
          <Column id="salsClass" type="STRING" size="2"/>
          <Column id="salsClassNm" type="STRING" size="256"/>
          <Column id="vatClass" type="STRING" size="3"/>
          <Column id="vatClassNm" type="STRING" size="3"/>
          <Column id="bldType" type="STRING" size="2"/>
          <Column id="bldTypeNm" type="STRING" size="2"/>
          <Column id="salQuantity" type="BIGDECIMAL" size="22"/>
          <Column id="salAmt" type="BIGDECIMAL" size="22"/>
          <Column id="payCd" type="STRING" size="2"/>
          <Column id="payCdNm" type="STRING" size="100"/>
          <Column id="payCdNmInfo" type="STRING" size="100"/>
          <Column id="posNum" type="STRING" size="2"/>
          <Column id="posNm" type="STRING" size="100"/>
          <Column id="materialNm" type="STRING" size="256"/>
          <Column id="materialCd" type="STRING" size="20"/>
          <Column id="sysClass" type="STRING" size="18"/>
          <Column id="sysClassNm" type="STRING" size="18"/>
          <Column id="receiptNum" type="STRING" size="7"/>
          <Column id="ccCd" type="STRING" size="6"/>
          <Column id="totPsn" type="BIGDECIMAL" size="22"/>
          <Column id="agesByPsn" type="BIGDECIMAL" size="22"/>
          <Column id="genderPsn" type="BIGDECIMAL" size="22"/>
          <Column id="guestTypeByPsn" type="BIGDECIMAL" size="22"/>
          <Column id="internalUseClass" type="STRING" size="1"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="wonOccurDate" type="STRING" size="8"/>
          <Column id="wonReceiptNum" type="STRING" size="7"/>
          <Column id="menuMgrp" type="STRING" size="18"/>
          <Column id="menuMcalss" type="STRING" size="18"/>
          <Column id="menuSclass" type="STRING" size="18"/>
          <Column id="menuCd" type="STRING" size="18"/>
          <Column id="menuNm" type="STRING" size="100"/>
          <Column id="materialClass" type="STRING" size="18"/>
          <Column id="uprice" type="BIGDECIMAL" size="22"/>
          <Column id="netAmt" type="BIGDECIMAL" size="22"/>
          <Column id="svcAmt" type="BIGDECIMAL" size="22"/>
          <Column id="vatAmt" type="BIGDECIMAL" size="22"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="evidence1" type="STRING" size="50"/>
          <Column id="evidence2" type="STRING" size="50"/>
          <Column id="evidence3" type="STRING" size="50"/>
          <Column id="evidence4" type="STRING" size="50"/>
          <Column id="evidence5" type="STRING" size="50"/>
          <Column id="evidence6" type="STRING" size="50"/>
          <Column id="encEvidenceNum" type="STRING" size="200"/>
          <Column id="amt" type="BIGDECIMAL" size="22"/>
          <Column id="exchAmt" type="BIGDECIMAL" size="22"/>
          <Column id="netAmt" type="BIGDECIMAL" size="22"/>
          <Column id="vatAmt" type="BIGDECIMAL" size="22"/>
          <Column id="salsUuser" type="STRING" size="18"/>
          <Column id="remark" type="STRING" size="100"/>
          <Column id="schTm" type="STRING" size="256"/>
          <Column id="itemTypenm" type="STRING" size="256"/>
          <Column id="itemCodenm" type="STRING" size="256"/>
          <Column id="seq" type="STRING" size="256"/>
          <Column id="cardComCd" type="STRING" size="256"/>
          <Column id="buycpnyCd" type="STRING" size="256"/>
          <Column id="frncStorNum" type="STRING" size="256"/>
          <Column id="linkOccurDate" type="STRING" size="256"/>
          <Column id="linkReceiptNum" type="STRING" size="256"/>
          <Column id="taxShetPublishYn" type="STRING" size="256"/>
          <Column id="ddddCloseYn" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_salesType" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="code" type="STRING" size="256"/>
          <Column id="codeName" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_beforeDt2" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="dtCnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_apprv" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="flagYn" type="STRING" size="256"/>
          <Column id="apprvDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_cmnAuth" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="srcYn" type="STRING" size="256"/>
          <Column id="insYn" type="STRING" size="256"/>
          <Column id="delYn" type="STRING" size="256"/>
          <Column id="savYn" type="STRING" size="256"/>
          <Column id="prtYn" type="STRING" size="256"/>
          <Column id="exlYn" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row>
            <Col id="srcYn">1</Col>
            <Col id="insYn">1</Col>
            <Col id="delYn">1</Col>
            <Col id="savYn">1</Col>
            <Col id="prtYn">0</Col>
            <Col id="exlYn">0</Col>
          </Row>
        </Rows>
      </Dataset>
      <Dataset id="ds_openDate" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="openDate" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_common">
        <ColumnInfo>
          <Column id="code" size="256" type="STRING"/>
          <Column id="codename" size="256" type="STRING"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_beforeDty" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="dtCnt" type="STRING" size="256"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_paramInfo" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="muCd" type="STRING" size="10"/>
          <Column id="tmCd" type="STRING" size="10"/>
          <Column id="upjangCd" type="STRING" size="10"/>
          <Column id="fromDt" type="STRING" size="10"/>
          <Column id="toDt" type="STRING" size="10"/>
        </ColumnInfo>
      </Dataset>
      <Dataset id="ds_open" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true" loadkeymode="keep" loadfiltermode="keep" reversesubsum="false">
        <ColumnInfo>
          <Column id="openYn" type="STRING" size="10"/>
        </ColumnInfo>
      </Dataset>
    </Objects>
    <Script type="xscript4.0"><![CDATA[/*
  화 면 명 : Template
  파 일 명 : Template.xfdl
  기    능 : Design 및 Script Template 

    수정일    수정자                  수정내용
  ----------   -------  --------------------------------------------------
  2014.11.01   김윤기   최초 생성
*/

/************************************************************************************************
 * 공통 라이브러리 INCLUDE 영역 (필수)
************************************************************************************************/
include "U_lib::lib_conversionCom.xjs";
include "U_lib::sc_comon.xjs";
include "lib::lib_com.xjs";
include "lib::SMCommon.xjs";

/************************************************************************************************
 * FORM 변수 선언 영역 (필수)
************************************************************************************************/
var fv_authLvl = g_AuthLevel;
var fv_sToday = gfn_today();
var nRow_receipt = "";
var searchboolean = false;
var copyFlag = false;
var listColumnInfo = ""; //ds_listSave 데이터셋 컬럼정보
//var posFlag = false;
var delFlag = false;
var fv_apprv = "N"
var delModifySalsYn = "N";

/************************************************************************************************
 * FORM EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Form Load (필수)
 *---------------------------------------------------------------------------------------------*/
function form_onload(obj:Form, e:LoadEventInfo)
{	
	// Form Load 시 공통 기능 처리(obj:Form, bCreateEvent:이벤트 생성 여부)
	gfn_formOnLoad(this);
	
	// 초기값 셋팅
	fsp_init(this);
	fn_init(obj);
	
	fn_CurrDateWeek();
	fn_searchSaleDay();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 초기값 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_init(obj)
{
	// 업데이트여부를 체크할 DataSet, 여러개 있을 경우 ;로 구분
	//v_ds_check = "ds_listSave";
	ds_search.addRow();
	
	ds_search.setColumn(0, "batchId", "TRANS");
	ds_search.setColumn(0, "sysClass", "");
	
	ds_search.setColumn(0, "muCd", g_Mu_Cd);             //사업부
    ds_search.setColumn(0, "muNm", g_Mu_Nm);
    ds_search.setColumn(0, "schTm", g_Tm_Cd);
    ds_search.setColumn(0, "schTmNm", g_Tm_Nm);
    ds_search.setColumn(0, "upjangCd", g_Upjang);
    ds_search.setColumn(0, "upjangNm", g_UpjangNm);
	
	edt_tmNm.applyAuthLevel(edt_muNm);
    edt_upjangNm.applyAuthLevel(edt_tmNm);
    edt_upjangNm.applyMainUpjang(null);   
    
	//업장에 대한 권한을 팀을 따라가도록 설정한다.
	edt_upjangNm.setTmComponent(edt_tmNm);
	
	SCAuth.setUserButton(this, {buttons : [{id:"btn_apprvAdd", role:"src", ischange:false},{id:"btn_apprvdel", role:"src", ischange:false}]});
	
	
/*----------------------------------------------------------------------------------------------
 * 매출복사 창 위치 조정 및 데이터 셋팅
 *---------------------------------------------------------------------------------------------*/
	//테스트용 운영1팀 한화빌딩 -- 테스트후 주석
	//edt_muNm.setMuCode("2002");             //사업부
    //edt_tmNm.setTmCode("CDG");
    //edt_tmNm.setTmName("FS운영1팀");
    //edt_upjangNm.setUpjangCode("100785");   //갤러압구정
    //edt_upjangNm.setUpjangName("FC 갤러리아압구정점");   //갤러압구정
    
    //edt_muNm.setMuCode("2002");             //사업부
    //edt_tmNm.setTmCode("CDG");
    //edt_tmNm.setTmName("FS운영1팀");
    //edt_upjangNm.setUpjangCode("100751");//FC 한화빌딩점
    //edt_upjangNm.setUpjangName("FC 한화빌딩점");//FC 한화빌딩점

    //edt_muNm.setMuCode("2003");             //사업부
    //edt_tmNm.setTmCode("CEF");              //컨세션영업팀
    //edt_tmNm.setTmName("컨세");              //컨세션영업팀
    //edt_upjangNm.setUpjangCode("112329");//C외식 공주(대전)휴게소점
    //edt_upjangNm.setUpjangName("공주(대전)휴게");//C외식 공주(대전)휴게소점
    
    //edt_muNm.setMuCode("2002");             //사업부
    //edt_tmNm.setTmCode("CDG");
    //edt_tmNm.setTmName("FS운영1팀");
    //edt_upjangNm.setUpjangCode("100763");//FC 한화빌딩점
    //edt_upjangNm.setUpjangName("FC빙그레2점");//FC빙그레2점
    
	cal_receiveDateFr.fn_initMonthCal(this, fv_sToday, null, ds_search, "occurDate");
	//cal_receiveDateFr.fn_initMonthCal(this, "20150913", null, ds_search, "occurDate");
	dv_Copy.cal_receiveDate.fn_initMonthCal(this, gfn_addDate(fv_sToday, -1), null, ds_search, "occurCopyDate");//매출복사 날짜
	
	//cccd 조회
	fn_upjangCcCdInfo();
	
	//창고조회
	fn_posClass();
	cboPos.value = "";
	
	// 사업장 오픈일자 조회 : 2015.11.04 추가
	fn_searchOpenDate();
	
	//사업부에 따라 매출유형이 달라진다
	fn_comCode("ds_salesType","SALS_TYPE","Y");//매출유형(FS사업부) 매출복사용
	if(ds_search.getColumn(0,"muCd") == "2001"){
	    ds_search.setColumn(0, "sysClass", "15");
	}else if(ds_search.getColumn(0,"muCd") == "2003"){
	    ds_search.setColumn(0, "sysClass", "12");
	}else if(ds_search.getColumn(0,"muCd") == "2002"){
		ds_search.setColumn(0, "sysClass", "11");
	}else if(ds_search.getColumn(0,"muCd") == "2005"){
		ds_search.setColumn(0, "sysClass", "23");
	}
	
	//팝업
	SCPopup.bind(this, "CustNm", "edt_custnm", "edtBtn_custnm", null, {upjang:"",sysClass:"",schTm:"",ccCd:""}, {before:"fn_BeforeCustNm", after:"fn_AfterCustNm"}); //거래처팝업
	SCPopup.bind(this, "SalsType", "edt_salsType", "edtBtn_salsType", null, {sysClass:"",schTm:"",ccCd:""}, {before:"fn_BeforeSalsType", after:"fn_AfterSalsType"}); //매출유형팝업
	SCPopup.bind(this, "PosList", "edt_pos", "edtBtn_pos", null, {upjangCd:ds_search.getColumn(0, "upjangCd"), ccCd:ds_search.getColumn(0, "ccCd"), acctCd:ds_search.getColumn(0, "acctCd")}, {before:"fn_posPopBefore", after:"fn_AfterPosList"}); //창고팝업
	SCPopup.bind(this, "VatClassList", "edt_vatClass", "edtBtn_vatClass", null, {upjangCd:ds_search.getColumn(0, "upjangCd"), ccCd:ds_search.getColumn(0, "ccCd")}, {before:"fn_BeforeVatClassList", after:"fn_AfterVatClassList"}); //과세유형팝업
	//SCPopup.bind(this, "BldTypeList", "edt_bldType", "edtBtn_bldType", null, {attr10:ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun"), groupCode:"FS0023", useYn:"Y"}, {before:"fn_BldPopBefore", after:"fn_AfterBldType"}); //끼니팝업
	SCPopup.bind(this, "SaleGubunList", "edt_saleGubun", "edtBtn_saleGubun", null, {groupCode:"FS0046", useYn:"Y"}, {before:"fn_salePopBefore", after:"fn_AfterSaleGubun"}); //매출구분팝업
	SCPopup.bind(this, "PmntTypeList", "edt_pmntType", "edtBtn_pmntType", null, {sysClass:"",schTm:"",ccCd:""}, {before:"fn_BeforePmntType", after:"fn_AfterPmntType"}); //지불유형팝업
		
	fn_SetChkBox();
	
	fn_searchSaleDay();
	
	//test용
	//ds_search.setColumn(0,"occurDate", "20191125");
}
function fn_custPopup(p){
	p.setQid("ScoUpjangCust");//거래처팝업에 반드시 필요
	p.setUpjang(ds_search.getColumn(0, "upjangCd"));
	return true;
}

//거래처
function fn_BeforeCustNm(p){
	p.option.sysClass = ds_search.getColumn(0, "sysClass");
	p.option.schTm = ds_search.getColumn(0, "schTm");
	p.option.ccCd = ds_search.getColumn(0, "ccCd");
	p.option.upjang = ds_search.getColumn(0, "upjangCd");
	return true;
}

//매출유형
function fn_BeforeSalsType(p){
	if(ds_search.getColumn(0, "schTm") == null || ds_search.getColumn(0, "schTm") == ""){
		gfn_alert("팀은 필수입력 입니다.");
		return;
	}
	if(ds_search.getColumn(0, "upjangCd") == null || ds_search.getColumn(0, "upjangCd") == ""){
		gfn_alert("업장은 필수입력 입니다.");
		return;
	}
	p.option.sysClass = ds_search.getColumn(0, "sysClass");
	p.option.schTm = ds_search.getColumn(0, "schTm");
	p.option.ccCd = ds_search.getColumn(0, "ccCd");
	return true;
}

//끼니
function fn_BldPopBefore(p){
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == null || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == undefined){
		gfn_alert("매출유형은 필수입력 입니다.");
		return;
	}
	//alert(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass"));
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "1103" || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "1108") {
		//alert(ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun"));
		if(ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun") == null || ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun") == undefined) {
			gfn_alert("식음료매출(FS) 매출유형은 매출구분이 필수 입니다.");
			return;		
		}
	}
	
	return true;
}

//창고팝업 
function fn_posPopBefore(data){
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == null || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == undefined){
		gfn_alert("매출유형은 필수입력 입니다.");
		return;
	}
	data.option.upjangCd = ds_search.getColumn(0, "upjangCd");
	data.option.ccCd = ds_search.getColumn(0, "ccCd");
	data.option.acctCd = ds_search.getColumn(0, "acctCd");
	return true;
	
}
//매출구분 팝업 
function fn_salePopBefore(data){
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == null || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == undefined){
		gfn_alert("매출유형은 필수입력 입니다.");
		return;
	}
	return true;
}
//지불유형
function fn_BeforePmntType(data){
	//고객사/과세 삭제
	if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "Z"){
		var rtVal = gfn_confirm("지불유형을 변경하시면 고객사/과세여부는 초기화 됩니다.");	// 선택된 자료를 삭제 하시겠습니까?
		if (rtVal == true) {	
			ds_listSave.setColumn(ds_listSave.rowposition, "custCd", "");
			ds_listSave.setColumn(ds_listSave.rowposition, "custNm", "");	
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "20");
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "과세매출 기타");
		}else{
			return false;
		}
	}
	
	edt_pmntType.value = "";
	ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "");
	
	data.option.sysClass = ds_search.getColumn(0, "sysClass");
	data.option.schTm = ds_search.getColumn(0, "schTm");
	data.option.ccCd = ds_search.getColumn(0, "ccCd");
		
	return true;
}


/***************************************************
*팝업 후처리
****************************************************/
//MU가 변경될 때에 대한 이벤트
function fn_muItemChangedEvent(obj, evt)
{
	dv_Copy.position.left = btn_copy.position.left - 165;
	dv_Copy.position.top = btn_copy.position.top + 35;
	dv_Copy.position.width = 256;
	dv_Copy.position.height = 200;

    edt_tmNm.setTmCode("");
    edt_upjangNm.setUpjangCode("");
    cboPos.value = "";
    
    if(obj.value == "2001"){
	    ds_search.setColumn(0, "sysClass", "15");
	}else if(obj.value == "2003"){
	    ds_search.setColumn(0, "sysClass", "12");
	}else if(obj.value == "2002"){
		ds_search.setColumn(0, "sysClass", "11");
	}else if(obj.value == "2005"){
		ds_search.setColumn(0, "sysClass", "23");
	}
    return true;
}

//TM이 변경될 때에 대한 이벤트
function fn_tmChangedEvent(obj, data)
{
    edt_upjangNm.setUpjangCode("");
    cboPos.value = "";
    return true;
}

//업장이 변경 이벤트
function fn_upjangAfter(){
	//cccd 조회
	fn_upjangCcCdInfo();
	
	//창고조회
	fn_posClass();
	cboPos.value = "";
	
	// 사업장 오픈일자 조회 : 2015.11.04
	fn_searchOpenDate();
}

//거래처
function fn_AfterCustNm(p, data){
	// 고객사 변경시 선수금 일반일때 데이터 clear
	if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P1"){
		//ds_advanceAmt.setColumn(ds_advanceAmt.rowposition, "sumAmt", "");
		//ds_advanceAmt.setColumn(ds_advanceAmt.rowposition, "advanceNum", "");
		ds_advanceAmt.clearData();
		ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "payCdNm", "");
	}
	
	edt_custnm.value = data.codeName;
	ds_listSave.setColumn(ds_listSave.rowposition, "custCd", data.code);
	ds_listSave.setColumn(ds_listSave.rowposition, "custNm", data.codeName);
}

//매출유형
function fn_AfterSalsType(p, data){
	if(gfn_transNullToEmpty(data.code)){
		edt_salsType.value = data.codeName;
		ds_listSave.setColumn(ds_listSave.rowposition, "salsClass", data.code);
		ds_listSave.setColumn(ds_listSave.rowposition, "salsClassNm", data.codeName);
		//trace("acctCd = " + data.acctCd);
		if(data.acctCd == "41203010"){
			ds_search.setColumn(0, "acctCd", "42203010");//매출유형계정
		}else if(data.acctCd == "41203020"){
			ds_search.setColumn(0, "acctCd", "42203020");//매출유형계정
		}else if(data.acctCd == "41201010"){
			ds_search.setColumn(0, "acctCd", "42201010");//매출유형계정
		}else if(data.acctCd == "41201020"){
			ds_search.setColumn(0, "acctCd", "42201020");//매출유형계정
		}else if(data.acctCd == "41201030"){
			ds_search.setColumn(0, "acctCd", "42201030");//매출유형계정
		}else if(data.acctCd == "41201040"){
			ds_search.setColumn(0, "acctCd", "42201040");//매출유형계정
		}else if(data.acctCd == "41206010" || data.acctCd == "41209040"){
			//ds_search.setColumn(0, "acctCd", data.acctCd);//매출유형계정
			ds_search.setColumn(0, "acctCd", "");//매출유형계정
		}else if(data.acctCd == "41203030"){	// 식음료매출(FS) / (-) 매출도 포함
			ds_search.setColumn(0, "acctCd", "42203030");//매출유형계정
		}else if(data.acctCd == "98001010"){ // 내부이용일때는 모든창고 보이게 세팅
			ds_search.setColumn(0, "acctCd", "");//매출유형계정
		}
		
		//식음료 매출일경우 금액 비활성화
		if(data.code == '1103' || data.code == '1104' || data.code == '1108' || data.code == '1109'){
			edt_amt.enable = false;
			chk_Auto00.enable = true;//식수포함
			chk_Auto00.value = "true";
			edt_bldType.enable = true;//끼니
			edtBtn_bldType.enable = true;
		}else{
			edt_amt.enable = true;
			chk_Auto00.value = "false";
		}
				
		//초기화
		edt_pos.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "posNum", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "posNm", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "posOutvatFlag", "");
		edtBtn_pos.enable = true;
		edt_custnm.enable = true;
		edtBtn_custnm.enable = true;
		edt_vatClass.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "");
		edtBtn_vatClass.enable = true;
		edt_salQuantity.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "salQuantity", "");
		edt_uprice.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "uprice", "");
		edt_amt.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "salAmt", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "netAmt", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "vatAmt", "");
		edt_bldType.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "bldType", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "bldTypeNm", "");
		edt_saleGubun.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "saleGubun", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "saleGubunNm", "");
		edtBtn_bldType.enable = true;
		edt_pmntType.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "payCdNm", "");
		edtBtn_pmntType.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "payCdNmInfo", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "evidence1", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "evidence2", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "evidence3", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "evidence4", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "evidence5", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "evidence6", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "cardComCd", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "buycpnyCd", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "frncStorNum", "");
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
		edt_remark.enable = true;
		ds_listSave.setColumn(ds_listSave.rowposition, "remark", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "materialNm", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "materialCd", "");
		
		ds_listSave.setColumn(ds_listSave.rowposition, "custNm", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "custCd", "");
	
	}else{
		edt_salsType.value = "";
	}

}
//창고
function fn_AfterPosList(p, data){
	if(gfn_transNullToEmpty(data.code)){
		edt_pos.value = data.codeName;
		ds_listSave.setColumn(ds_listSave.rowposition, "posNum", data.code);
		ds_listSave.setColumn(ds_listSave.rowposition, "posNm", data.codeName);
		ds_listSave.setColumn(ds_listSave.rowposition, "posOutvatFlag", data.outvatFlag);
	}else{
		ds_listSave.setColumn(ds_listSave.rowposition, "posNum", "");
		edt_pos.value = "";
	}
	
	/*//과세여부처리
	if(data.code != undefined){
		if(data.code.substring(0,1)=="C" ){
			edt_vatClass.enable = false;
			edtBtn_vatClass.enable = false;
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "20");
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "과세매출 기타");
		}
		if(data.code.substring(0,1)=="C" && data.outvatFlag == "Y"){
			edt_vatClass.enable = false;
			edtBtn_vatClass.enable = false;
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "43");
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "면세매출 기타");
		}
		if(data.code.substring(0,1)!="C"){
			edt_vatClass.enable = true;
			edtBtn_vatClass.enable = true;
		}
	}*/
	
	//과세여부처리 위와같이 처리되던것 변경 : 2015.11.03 
	trace("data.code.substring(0,1) : " + data.code.substring(0,1));
	trace("ds_cccd.getColumn(0, 'vatCtrlYn') : " + ds_cccd.getColumn(0, "vatCtrlYn"));
	trace("data.outvatFlag : " + data.outvatFlag);
	if(data.code != undefined){
		if(ds_search.getColumn(ds_search.rowposition,"muCd") == "2005"){//2015-11-24 구매사업부는 선택하게끔
			edt_vatClass.enable = true;
			edtBtn_vatClass.enable = true;
		}else{
			if(data.code.substring(0,1)=="C"){
			  if(ds_cccd.getColumn(0, "vatCtrlYn")=="Y"){
				edt_vatClass.enable = true;
				edtBtn_vatClass.enable = true;		  
			  } else {
				edt_vatClass.enable = false;
				edtBtn_vatClass.enable = false;
				ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "20");
				ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "과세매출 기타");
			  }
			}
			if(data.code.substring(0,1)=="C" && data.outvatFlag == "Y"){
				edt_vatClass.enable = false;
				edtBtn_vatClass.enable = false;
				ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "43");
				ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "면세매출 기타");
			}
			if(data.code.substring(0,1)!="C"){
				edt_vatClass.enable = true;
				edtBtn_vatClass.enable = true;
			}
		}
	}
	
}
//거래처
function fn_custPopupAfter(){
	
}
//과세유형
function fn_AfterVatClassList(p, data){
	if(gfn_transNullToEmpty(data.code)){
		edt_vatClass.value = data.codeName;
		ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", data.code);
		ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", data.codeName);
	}else{
		edt_vatClass.value = "";
	}
}
// 과세유형 팝업 호출전 사업부코드 세팅
function fn_BeforeVatClassList(p){
	p.option.muCd = edt_muNm.getMuCode();
	return true;
}

//끼니
function fn_AfterBldType(p, data){
	if(gfn_transNullToEmpty(data.set1)){
		edt_bldType.value = data.codeName;
		ds_listSave.setColumn(ds_listSave.rowposition, "bldType", data.set1);
		ds_listSave.setColumn(ds_listSave.rowposition, "bldTypeNm", data.codeName);
	}else{
		edt_bldType.value = "";
	}
}


//매출구분
function fn_AfterSaleGubun(p, data){
	
	if(gfn_transNullToEmpty(data.code)){
		edt_saleGubun.value = data.codeName;
		ds_listSave.setColumn(ds_listSave.rowposition, "saleGubun", data.code);
		ds_listSave.setColumn(ds_listSave.rowposition, "saleGubunNm", data.codeName);
		
		//끼니코드 팝업에 사용하는 코드 넣기
		//SCPopup.bind(this, "BldTypeList", "edt_bldType", "edtBtn_bldType", null, {attr10:data.code, groupCode:"FS0023", useYn:"Y"}, {after:"fn_AfterBldType"}); //끼니팝업		
	}else{
		edt_saleGubun.value = "";
	}
	
}
//지불유형
function fn_AfterPmntType(p, data){
	if(gfn_transNullToEmpty(data.code)){
		edt_pmntType.value = data.codeName;
		ds_listSave.setColumn(ds_listSave.rowposition, "payCd", data.code);
		ds_listSave.setColumn(ds_listSave.rowposition, "payCdNm", data.codeName);
		
		edt_evidence6.value = "";
		//ds_seach.setColumn(0, "saleGubun", data.code);
		
	}else{
		edt_pmntType.value = "";
	}
		 	
	//자재코드 삭제
	if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "1"){
		ds_listSave.setColumn(ds_listSave.rowposition,"materialNm","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"materialCd","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"taxShetPublishYn","");	
 		edt_ticket.enable = false;
 		edtBtn_ticket.enable = false;
 		
 		ds_advanceAmt.clearData();
	}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "2"){
		ds_listSave.setColumn(ds_listSave.rowposition,"materialNm","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"materialCd","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"taxShetPublishYn","");	
 		edt_ticket.enable = false;
 		edtBtn_ticket.enable = false;
 		
 		ds_advanceAmt.clearData();
	}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "7" || ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "11"){
		ds_listSave.setColumn(ds_listSave.rowposition,"materialNm","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"materialCd","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"taxShetPublishYn","");	
 		edt_ticket.enable = false;
 		edtBtn_ticket.enable = false;
 		
 		ds_advanceAmt.clearData();
 		if(ds_listSave.getColumn(ds_listSave.rowposition, "custNm") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "custNm") == null){
			gfn_alert("먼저 고객사를 선택하세요.");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCdNm", "");
			return false;
		}else{
			//회수예정일 조회
			fn_expDt(ds_listSave.rowposition);
		}
		
		//부가세셋팅
		if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "11"){
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "X");
			ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "부가세 없음");
		}
	//선수/외상 식권도 팝업으로 선수금 선택 하도록 변경 20180424 김호석 추가(김성권대리 요청)
	//}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P1" || ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P2" || ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P3"){
	}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P1"){
		ds_listSave.setColumn(ds_listSave.rowposition,"materialNm","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"materialCd","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"taxShetPublishYn","");	
 		//if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P2" || ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P3"){
			//ds_advanceAmt.clearData();
 		//} 		
 		edt_ticket.enable = false;
 		edtBtn_ticket.enable = false;
 		
 		//선수금 일반 //선수/외상 식권도 필수 20180424 김호석 추가(김성권대리 요청)
 		if(ds_listSave.getColumn(ds_listSave.rowposition,"custCd") == null || ds_listSave.getColumn(ds_listSave.rowposition,"custCd") == ""){
			gfn_alert("고객사는 필수입력 입니다.");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCdNm", "");
			//edt_custnm.setFocus();
			return false;
		}
		
		if(ds_listSave.getColumn(ds_listSave.rowposition,"salAmt") == null || ds_listSave.getColumn(ds_listSave.rowposition,"salAmt") == ""){
			gfn_alert("매출액은 필수입력 입니다.");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCdNm", "");
			//edt_amt.setFocus();
			return false;
		}
		
		if(ds_listSave.getColumn(ds_listSave.rowposition,"posNum") == null || ds_listSave.getColumn(ds_listSave.rowposition,"posNum") == ""){
			gfn_alert("창고번호는  필수입력 입니다.");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "");
			ds_listSave.setColumn(ds_listSave.rowposition, "payCdNm", "");
			//edt_pos.setFocus();
			return false;
		}
		//선수금팝업
		fn_AdvanceAmtPopup();
	
	}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P2"){
		ds_advanceAmt.clearData();
		edt_ticket.enable = true;
 		edtBtn_ticket.enable = true;
	}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P3"){
		ds_advanceAmt.clearData();
		edt_ticket.enable = true;
 		edtBtn_ticket.enable = true;
 	
	}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "Z"){
		ds_listSave.setColumn(ds_listSave.rowposition,"materialNm","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"materialCd","");	
 		ds_listSave.setColumn(ds_listSave.rowposition,"taxShetPublishYn","");	
 		edt_ticket.enable = false;
 		edtBtn_ticket.enable = false;
 		
 		ds_listSave.setColumn(ds_listSave.rowposition, "custCd", "999991");
		ds_listSave.setColumn(ds_listSave.rowposition, "custNm", "기타(내부거래)");	
		ds_listSave.setColumn(ds_listSave.rowposition, "vatClass", "X");
		ds_listSave.setColumn(ds_listSave.rowposition, "vatClassNm", "부가세 없음");
 		
 		ds_advanceAmt.clearData();
	}
}
/*----------------------------------------------------------------------------------------------
 * ComCode 조회
 *-------------------------------------------------------------------------'--------------------*/
function fn_comCode(dataset,type, str){

	if(type == "SALS_TYPE"){//매출유형	(FS)
		gfn_transaction(this
						,"salsType"
						,"sm/cmn/common/selectComCode.xdo"
						,""
						,dataset+"=ds_combo"
						,"groupCode="+wrapQuote(type)+" useYn="+wrapQuote(str)
						,"fn_callBack"
						,false);
	}
}

function fn_searchSaleDay(){
	
	//매출 미등록 여부 추가
	ds_open.addRow();
	var nIdx = ds_paramInfo.addRow();
	//trace(ds_openDate.getColumn(0,"openDate"));
	ds_paramInfo.setColumn(nIdx, "muCd",  gfn_nvl(ds_search.getColumn(0,"muCd"),""));
	ds_paramInfo.setColumn(nIdx, "tmCd",  gfn_nvl(ds_search.getColumn(0,"schTm"),""));
	ds_paramInfo.setColumn(nIdx, "upjangCd",  gfn_nvl(ds_search.getColumn(0,"upjangCd"),""));
	ds_paramInfo.setColumn(nIdx, "fromDt", gfn_nvl(cal_receiveDateFr.text,""));
		
	var strSvcID    = "searchSaleDay";
	var strURL      = "fs/fsl/upjangNonSaleDayInq/selectList.xdo";
	var strInDs     = "ds_paramInfo=ds_paramInfo";
	var strOutDs    = "ds_open=ds_open";
	var strArg      = "";
	var strCallback = "fn_callBack";
	var bAsync      = true;
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 화면 닫기 전 변경 유무 체크 (필수-Frame에서 창 닫힐때 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_close()
{	
//	// v_ds_check 미사용시 변경사항 체크(입력 프로그램일때 변경되는 Dataset 전체 기술)
// 	if (gfn_dsIsUpdated(ds_listSave) == true) 
// 	{
// 		// 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
//         if (!gfn_confirm("confirm.before.movepage")) return false;
//     }
//     
//	// 조회프로그램에도 Return true; 기술해 주세요!
// 	return true;

	// v_ds_check 사용시 변경사항 체크
//	if(gfn_length(v_ds_check) != 0)
//	{	
//		// v_ds_check 설정기준 변경사항 체크
//		if (gfn_isDataChange() == true) 
//		{		
//			// 변경된 데이터가 있습니다. 현재 화면을 닫겠습니까?
//			if (!gfn_confirm("confirm.before.movepage")) return false;
//		}
//	}
    
	// 조회프로그램에도 Return true; 기술해 주세요!
	return true;
}


/************************************************************************************************
 * 공통기능 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 조회 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_search()
{
// 	// v_ds_check 미사용시 변경사항 체크
// 	if (gfn_dsIsUpdated(ds_list) == true) 
// 	{
// 		var retValue = gfn_confirm("confirm.before.search");	// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
// 		if (retValue == false) return;
// 	}

// 	// v_ds_check 사용시 공통버튼에서 변경사항 체크함
// 	// 변경사항 체크
// 	if (gfn_isDataChange() == true) 
// 	{		
// 		var retValue = gfn_confirm("confirm.before.search");	// 검색을 진행하면 변경된 데이터가 사라집니다. 계속 진행 하시겠습니까?
// 		if (retValue == false) return;
// 	}
	
	// ds_listValid Dataset에 Validation할 칼럼별로 구성
	// 항목 추가시에는 ','로 구분
	// 예)title:금액1,required:false,minlength:2,digits:true
	
	// Alert시 칼럼 표시 명칭               - title:아이디(메시지의 치환할 명칭) 
	// 필수체크                              - required:true(체크여부 true/false)
	// size 크기                              - length:7(size 숫자)
	// 최대 size 크기                        - maxlength:7(size 숫자)
	// 최소 size 크기                        - minlength:7(size 숫자)
	// 최대 size 크기(Byte)                  - maxlengthB:7(size 숫자)
	// 최소 size 크기(Byte)                  - minlengthB:7(size 숫자)
	// 숫자 여부                             - digits:true(체크여부 true/false)
	// 해당 숫자 이하                       - min:7(size 숫자)
	// 해당 숫자 이상                       - max:7(size 숫자)
	// 소숫점 자리수 비교                   - declimit:3(size 숫자)
	// 날짜 년월일 체크                     - date:true(체크여부 true/false)
	// 날짜 년월 체크                       - dateym:true(체크여부 true/false)
	// 타 칼럼값보다 큰지 비교             - comparemax:Column4(Dataset 칼럼ID):시작일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값보다 작은지 비교           - comparemin:Column6(Dataset 칼럼ID):종료일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값과 같은 값인지 비교        - equalto:Column5(Dataset 칼럼ID):금액1(비교대상의 메시지 치환할 명칭)
	// 사이의 값인지 비교                   - range:40(from 숫자):100(to 숫자)
	// 코드값이 목록내의 값인지 비교       - code:1(목록 숫자):2(목록 숫자):3(목록 숫자)
	// 이메일 여부 체크(함수 체크시 예제)  - isEmail:true(체크여부 true/false)
	
	// 오류시 focus 지정                      - focus:cal_toDate(Componet ID로 form에서부터의 경로)
	
	//창고 필수 체크
	//alert(cboPos.value);
		
	if(ds_search.getColumn(0, "muCd") == "2001" || ds_search.getColumn(0, "muCd") == "2002" || ds_search.getColumn(0, "muCd") == "2003" || ds_search.getColumn(0, "muCd") == "2005"){
		//return true;
	}else{
		gfn_alert("조회권한이 없습니다.");
		return;
	}
	
	// 조회시 Validation Check
	if (gfn_validCheck(ds_search, ds_searchValid, true) == false) return;
	
	//서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
	listColumnInfo = gfn_getDatasetInfo(ds_listSave);	
	
    // Grid sort 표시 초기화(필수)
    //gfn_clearSortMark(grd_list);

    var strSvcID    = "search";
    var strURL      = "fs/fsl/upjangSaleRegMgnt/selectList.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "ds_list=ds_list ds_listSysClass=ds_listSysClass";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = false;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 신규 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_insert()
{
	// 해당월이 월마감이 된경우 매출등록을 할 수 없다.	
	mfn_GetClsStatus(gfn_subStr(cal_receiveDateFr.fn_getValue(), 0, 6));
	if (ds_common.rowcount > 0)
	{
		g_Message("EE", "해당월은 월마감이 완료되어 입력이 불가합니다.");
		return false;
	}

	if(gfn_isNull(edt_muNm.getMuCode())){
		gfn_alert("사업부는 필수입력 사항 입니다.");
		return;
	}else if(gfn_isNull(edt_tmNm.getTmCode())){
		gfn_alert("팀은 필수입력 사항 입니다.");
		return;
	}else if(gfn_isNull(edt_upjangNm.getUpjangCode())){
		gfn_alert("사업장은 필수입력 사항 입니다.");
		return;
	}
	
	if(ds_search.getColumn(0, "occurDate") > fv_sToday){
		gfn_alert("오늘날짜 이후는 입력할 수 없습니다.");
		fn_search();
		fn_searchSaleDay();
		return ;
	}
	
	if(ds_search.getColumn(0, "occurDate") < "20151001"){
		gfn_alert("10월 이전으로는  입력할 수 없습니다.");
		return;
	}
	
	mfn_GetCcMonthClsYn("U",edt_upjangNm.getUpjangCode(),gfn_subStr(ds_search.getColumn(0, "occurDate"),0,6),"01");
	if(ds_common.getColumn(0,0) == "Y"){
		g_Message("EE", "해당월은 월마감이 완료되어 입력이 불가합니다.\n-영업 월마감-");
		return false;
	}
	
	fn_beforeDt();//마감여부 조회
	
	for(var i=0; i<ds_beforeDt.rowcount; i++){
		if(ds_beforeDt.getColumn(i, "dtCnt") == "Y"){
			gfn_alert("마감이 완료되어 변경할 수 없습니다.");
			fn_search();
			fn_searchSaleDay();
			return false;
		}
	}
	

	
	// 오픈일자가 오늘이라면 전일자 미마감은 하지 않는다 : 2015.11.04 추가
	if(ds_openDate.getColumn(0, "openDate") != fv_sToday){
		fn_beforeDt2(); // 전일자 마감여부 조회
		for(var i=0; i<ds_beforeDt2.rowcount; i++){
			if(ds_beforeDt2.getColumn(i, "dtCnt") == "N"){
				gfn_alert("전일자 미마감건이 존재하여 변경할 수 없습니다.");
				fn_search();
				fn_searchSaleDay();
				return false;
			}
		}
	}
	
	if(edt_openYn.value == "N"){
		gfn_alert("해당일은 영업휴무일입니다, 영업휴무일자를 확인 하세요.");
		return
	}	
	
	if(fn_searchboolean())return;
	
	var salsFlag = false;
	
	if(ds_listSave.rowcount == 0){//데이터가 없는경우
		var nRow = ds_listSave.addRow();	
		
		fn_newRowData(nRow);
	}else{
		for(var i=0; i<ds_listSave.rowcount; i++){//데이터가 존재 하는경우 
			if(ds_listSave.getColumn(i, "receiptNum") != null && ds_listSave.getColumn(i, "receiptNum") != ""){
				salsFlag = true;
			}else{
				salsFlag = false;
			}
		}
		if(salsFlag == true){
			var nRow = ds_listSave.addRow();	
			fn_newRowData(nRow);
		}
	}

	//edit 활성화
	edt_salsType.enable = true;
	edt_salsType.setFocus();
	edtBtn_salsType.enable = true;
	//if(posFlag == false){
		edt_pos.enable = true;
		edtBtn_pos.enable = true;
	//}else{
		//ds_listSave.setColumn(ds_listSave.rowposition, "posNum" ,cboPos.value);  //20150909 윤지혜M 요청에 의해 취소
		//ds_listSave.setColumn(ds_listSave.rowposition, "posNm" ,cboPos.text);
		//edt_pos.enable = false;
		//edtBtn_pos.enable = false;
	//}
	edt_custnm.enable = true;
	edtBtn_custnm.enable = true;
	edt_vatClass.enable = true;
	edtBtn_vatClass.enable = true;
	edt_salQuantity.enable = true;
	edt_uprice.enable = true;
	edt_amt.enable = true;
	edt_bldType.enable = true;
	edtBtn_bldType.enable = true;
	edt_saleGubun.enable = true;
	edtBtn_saleGubun.enable = true;
	edt_pmntType.enable = true;
	edtBtn_pmntType.enable = true;
	edt_remark.enable = true;

	fn_tmpSeq();
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 삭제 버튼 클릭 시 (필수-공통버튼에서 호출됨)-->ds_listSave 생각해봄
 *---------------------------------------------------------------------------------------------*/
function fn_delete()	
{
	var nRow = ds_list.rowposition;
	
	if(ds_list.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "삭제할 row");	// 선택된 항목이 없습니다.
		return;
	}
	
	fn_beforeDt();//마감여부 조회
	for(var i=0; i<ds_beforeDt.rowcount; i++){
		if(ds_beforeDt.getColumn(i, "dtCnt") == "Y"){
			gfn_alert("마감이 완료되어 변경할 수 없습니다.");
			fn_search();
			fn_searchSaleDay();
			return false;
		}
	}

	for(var i=0; i<ds_listSave.rowcount; i++){
		//alert(ds_listSave.getColumn(i, "arYn")+" " + ds_listSave.getColumn(i, "publishYn") + " " + ds_listSave.getColumn(i, "journalzYn"));
		if(ds_listSave.getColumn(i, "arYn") == "Y" || ds_listSave.getColumn(i, "publishYn") == "Y" || ds_listSave.getColumn(i, "journalzYn") == "Y"){
			gfn_alert("채권대체/발행/마감 중 하나라도 Y 이면 삭제가 불가능 합니다.");
			ds_listSave.rowposition = i;
			return false;
		}
	}
	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) {	
		delModifySalsYn = ds_list.getColumn(nRow,"modifySalsYn");
		ds_list.deleteRow(nRow);
		
		//데이터셋 클리어
		ds_listSave.clearData();
		ds_advanceAmt.clearData();
		
		delFlag = true;
		fn_save();
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 저장 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_save()
{
	//자동 마감 시간에는 등록 불가처리(몇건만 미마감되는 문제 해결) 20180419 김호석
	//var workTime = (gfn_todayTime().substr(8, 4));	
	//서버시간으로 체크하도록 변경 20181113 김호석
	fn_CurrDateWeek();
	var workTime = gfn_subStr(gds_currdate.getColumn(0, "YMD_TM"),8,4);
		
	//var workTime = (gfn_todayTime().substr(8, 4));	
	if ( workTime >= 1030 && workTime <= 1040 ) {
		gfn_alert("자동 일마감 시간인 10:30 ~ 10:40 10분간은 매출등록이 불가합니다.");
		return;
	}
	
	// v_ds_check 미사용시 변경사항 체크
	if (gfn_dsIsUpdated(ds_listSave) == false && gfn_dsIsUpdated(ds_list) == false) 
	{
		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
		return;
	}
	
	// 해당월이 월마감이 된경우 매출등록을 할 수 없다.
	mfn_GetClsStatus(gfn_subStr(cal_receiveDateFr.fn_getValue(), 0, 6));
	if (ds_common.rowcount > 0)
	{
		g_Message("EE", "해당월은 월마감이 완료되어 저장이 불가합니다.");
		return false;
	}

	// v_ds_check 사용시 변경사항 체크
// 	if (gfn_isDataChange() == true) 
// 	{		
// 		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
// 		return;
// 	}
	
	
	// ds_listValid Dataset에 Validation할 칼럼별로 구성
	// 항목 추가시에는 ','로 구분
	// 예)title:금액1,required:false,minlength:2,digits:true
	
	// Alert시 칼럼 표시 명칭               - title:아이디(메시지의 치환할 명칭) 
	// 필수체크                              - required:true(체크여부 true/false)
	// size 크기                              - length:7(size 숫자)
	// 최대 size 크기                        - maxlength:7(size 숫자)
	// 최소 size 크기                        - minlength:7(size 숫자)
	// 최대 size 크기(Byte)                  - maxlengthB:7(size 숫자)
	// 최소 size 크기(Byte)                  - minlengthB:7(size 숫자)
	// 숫자 여부                             - digits:true(체크여부 true/false)
	// 해당 숫자 이하                       - min:7(size 숫자)
	// 해당 숫자 이상                       - max:7(size 숫자)
	// 소숫점 자리수 비교                   - declimit:3(size 숫자)
	// 날짜 년월일 체크                     - date:true(체크여부 true/false)
	// 날짜 년월 체크                       - dateym:true(체크여부 true/false)
	// 타 칼럼값보다 큰지 비교             - comparemax:Column4(Dataset 칼럼ID):시작일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값보다 작은지 비교           - comparemin:Column6(Dataset 칼럼ID):종료일(비교대상의 메시지 치환할 명칭)
	// 타 칼럼값과 같은 값인지 비교        - equalto:Column5(Dataset 칼럼ID):금액1(비교대상의 메시지 치환할 명칭)
	// 사이의 값인지 비교                   - range:40(from 숫자):100(to 숫자)
	// 코드값이 목록내의 값인지 비교       - code:1(목록 숫자):2(목록 숫자):3(목록 숫자)
	// 이메일 여부 체크(함수 체크시 예제)  - isEmail:true(체크여부 true/false)
	
	// 오류시 focus 지정                      - focus:cal_toDate(Componet ID로 form에서부터의 경로)
	//trace(ds_listSave.getColumn(ds_listSave.rowposition , "modifySalsYn"));
	if(ds_listSave.getColumn(ds_listSave.rowposition , "modifySalsYn") ==  "A"){
		delModifySalsYn = "A";//건별 입력 일경우 마감 PASS
	}else{
		delModifySalsYn = "N";
	}	
	
	//trace("listSave = " +ds_listSave.getRowType(ds_listSave.rowposition));
	//trace("list = " + ds_list.getRowType(ds_list.rowposition));
	//if(delModifySalsYn != "A" || ds_listSave.getRowType(ds_listSave.rowposition) == 4){//삭제한 행이 건별일경우 PASS
	if(delModifySalsYn != "A"){//삭제한 행이 건별일경우 PASS
	
		fn_beforeDt();//마감여부 조회
		for(var i=0; i<ds_beforeDt.rowcount; i++){
			if(ds_beforeDt.getColumn(i, "dtCnt") == "Y"){
				gfn_alert("마감이 완료되어 변경할 수 없습니다.");
				fn_search();
				fn_searchSaleDay();
				return false;
			}
		}		
		
		// 사업장 오픈일이 오늘이라면 전일마 미마감여부 체크를 하지 않는다 : 2015.11.04 : 추가
		if(ds_openDate.getColumn(0, "openDate") != fv_sToday){
			fn_beforeDt2(); // 전일자 마감여부 조회
			for(var i=0; i<ds_beforeDt2.rowcount; i++){
				if(ds_beforeDt2.getColumn(i, "dtCnt") == "N"){
					gfn_alert("전일자 미마감건이 존재하여 변경할 수 없습니다.");
					fn_search();
					fn_searchSaleDay();
					return false;
				}
			}			
			/*
			fn_beforeDty(); // 자동 일마감 확인 20171201 김호석(입력 중 자동마감되는 경우)
			for(var j=0; i<ds_beforeDty.rowcount; j++){
				if(ds_beforeDt2.getColumn(i, "dtCnt") == "Y"){
					gfn_alert("자동 일마감이 완료되어 등록 불가합니다. ");
					fn_search();
					return false;
				}
			}		
			*/
			
		}
	}
	
	// 미마감된 데이터가 있으면 저장할때도 미마감체크 : 2015.11.06
/*		if(ds_listSave.getColumn(ds_listSave.rowposition , "modifySalsYn") ==  "A"){
		//trace("저장할때도 미마감건 체크");
			fn_beforeDt();
			for(var i=0; i<ds_beforeDt.rowcount; i++){
				if(ds_beforeDt.getColumn(i, "dtCnt") == "N"){
					gfn_alert("미마감건이 있어 건별입력을 하실 수 없습니다.");
					fn_search();
					return false;
				}
			}
		}
*/		
	if (gfn_validCheck(ds_listSave, ds_listValid, true) == false) return;
	
	// 저장시 Validation Check	
// 	if (gfn_dsIsUpdated(ds_list) == false)
// 	{	 	
//  	gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
//  	return;
//  }
 	if(delFlag == false){
		if(chk_Auto.value == true){//자동 저장시 	
			var rtVal = gfn_confirm("입력하신 내용을 등록하시겠습니까?");	
			if (rtVal == true) {	
				if (fn_valid(true) == false) return;
			}else{
				return false;
			}
		}else{
			if (fn_valid(true) == false) return;
		}
	}else{
		if (fn_valid(true) == false) return;
	} 	
	
    //trace(ds_listSave.saveXML());
	trace(ds_list.saveXML());
 	
    var strSvcID    = "save";
    var strURL      = "/fs/fsl/upjangSaleRegMgnt/saveList.xdo";
	var strInDs     = "ds_list=ds_list:U ds_listSave=ds_listSave:U ds_list_ticket=ds_list_ticket:U ds_advanceAmt=ds_advanceAmt:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_valid(){	
	//cccd 조회
	fn_upjangCcCdInfo();
		
	for(var i=0; i<ds_listSave.rowcount; i++){
		// 끼니,단가,식수정보 필수 CHECK : 기 등록된 자료가 있으므로 실제 I/U 인 경우에만 CHECK 한다(Valid에서 못함)
		if (ds_listSave.getRowType(i) == Dataset.ROWTYPE_INSERT || ds_listSave.getRowType(i) == Dataset.ROWTYPE_UPDATE) {
			
			if (gfn_nvl(ds_listSave.getColumn(i, "uprice"), "0") == "0") {
				gfn_alert("단가는 필수입력 사항입니다.");
				ds_listSave.rowposition = i;
				return false;
			}
			
			if (gfn_nvl(ds_listSave.getColumn(i, "salQuantity"), "0") == "0") {
				gfn_alert("식수는 필수입력 사항입니다.");
				ds_listSave.rowposition = i;
				return false;
			}
			
			if (gfn_nvl(ds_listSave.getColumn(i, "bldType"), "") == "") {
				gfn_alert("끼니는 필수입력 사항입니다.");
				ds_listSave.rowposition = i;
				return false;
			}
		}
		
		//alert(ds_listSave.getColumn(i, "salsClass"));
		//alert(ds_listSave.getColumn(i, "saleGubun"));
		//매출유형이 식음료매출(FS)이면 매출구분 필수값 체크
		if (ds_listSave.getColumn(i, "salsClass") == "1103" ) {
			//alert(ds_listSave.getColumn(i, "saleGubun"));
			if(gfn_isNull(ds_listSave.getColumn(i, "saleGubun"))) {
				gfn_alert("매출유형이 식음료매출(FS) 일때 매출구분은 필수입력 입니다.");
				return false;
			}				
		}			
		
		if(ds_listSave.getColumn(i, "receiptNum") == undefined){
		
			//매출식수포함세팅
			if(ds_listSave.getColumn(i, "totPsnYn") == "true"){
				ds_listSave.setColumn(i, "totPsn", ds_listSave.getColumn(i, "salQuantity"));
			}else if(ds_listSave.getColumn(i, "totPsnYn") == "false"){
				ds_listSave.setColumn(i, "totPsn", "");
			}else if(ds_listSave.getColumn(i, "totPsnYn") == undefined){
				ds_listSave.setColumn(i, "totPsn", "");
			}
			
			//창고코드가C로 시작 하고 불공제가 Y인 경우 면세기타처리
			if(ds_listSave.getColumn(i, "posNum").substring(0,1)=="C" && ds_listSave.getColumn(i, "posOutvatFlag") == "Y"){
				if(ds_listSave.getColumn(i, "vatClass") != "43"){
					gfn_alert("식재료 창고이며 불공제여부가 Y인경우 과세는 면세기타만 가능합니다.");
					ds_listSave.setColumn(i, "vatClass", "43");
					ds_listSave.setColumn(i, "vatClassNm", "면세매출 기타");
					return false;
				}
			}
			
			//(-)유형 선택시 식수/매출액 (-)만 가능
			if(ds_listSave.getColumn(i, "salsClass") == "1108" || ds_listSave.getColumn(i, "salsClass") == "1109" || ds_listSave.getColumn(i, "salsClass") == "1110" ||
				ds_listSave.getColumn(i, "salsClass") == "1111" || ds_listSave.getColumn(i, "salsClass") == "1112" || ds_listSave.getColumn(i, "salsClass") == "1113"){
				if(Number(ds_listSave.getColumn(i, "salQuantity")) > 0 || Number(ds_listSave.getColumn(i, "salAmt")) > 0){
					gfn_alert("매출유형이 (-)유형 선택시 식수/매출액은 (-)만 가능합니다.");
					ds_listSave.setColumn(i, "salQuantity", 0);
					ds_listSave.setColumn(i, "salAmt", 0);
					return false;
				}
				
			}
			
			//20150610 추가 - 지불유형이 식권일때 끼니/총식수/단가는 필수입력
			if(ds_listSave.getColumn(i, "payCd") == "P2" || ds_listSave.getColumn(i, "payCd") == "P3"){ //지불유형이 식권일때  materialCd
				//식권이 세금게산서 여부가 y 이면 과세는 부가세없음만가능 , y가 아니면 부가세 없음은 불가
				if(ds_listSave.getColumn(i, "taxShetPublishYn") == "Y"){
					if(ds_listSave.getColumn(i, "vatClass") != "X"){
						gfn_alert("지불유형이 식권이고 세금계산서발행이 가능하면 과세는 부가세 없음만 가능합니다.\n또한 매출액은 부가세 제외로 처리됩니다.");
						ds_listSave.setColumn(i, "vatClass", "X");
						ds_listSave.setColumn(i, "vatClassNm", "부가세 없음");
						return false;
					}
				}
				
				if(ds_listSave.getColumn(i, "taxShetPublishYn") != "Y"){
					if(ds_listSave.getColumn(i, "vatClass") == "X"){
						gfn_alert("지불유형이 식권이고 세금계산서발행이 불가면  부가세없음은 선택할 수 없습니다.");
						ds_listSave.setColumn(i, "vatClass", "");
						ds_listSave.setColumn(i, "vatClassNm", "");
						return false;
					}
				}
				
				//식권 수량 단가 체크
			//예외처리 시 사용	
			if (g_EmpNo == "Z9952396") {
			
			} else {
				if(ds_listSave.getColumn(i, "materialNm") != "" && ds_listSave.getColumn(i, "materialNm") != null){
					if(ds_list_ticket.getColumn(0, "wwQty") != ds_listSave.getColumn(i, "salQuantity")){
						gfn_alert("입력하신 식수와 식권수량이 다릅니다.");
						return false;
					}
					
					if(ds_list_ticket.getColumn(0, "uprice") != ds_listSave.getColumn(i, "uprice")){
						gfn_alert("입력하신 단가와 식권단가가 다릅니다.");
						return false;
					}
				}
			}
				//음수체크
				if(toNumber(ds_listSave.getColumn(i, "salQuantity")) < 0 ){
					gfn_alert("지불유형이 식권일때 식수는 음수를 입력할수 없습니다.");
					ds_listSave.setColumn(i, "salQuantity", "");
					return false;
				}else if(toNumber(ds_listSave.getColumn(i, "uprice")) < 0 ){
					gfn_alert("지불유형이 식권일때 단가는 음수를 입력할수 없습니다.");
					ds_listSave.setColumn(i, "uprice", "");
					return false;
				}
			
				if(ds_listSave.getColumn(i, "bldType") == null || ds_listSave.getColumn(i, "salQuantity") == null 
					|| ds_listSave.getColumn(i, "uprice") == null || ds_listSave.getColumn(i, "materialNm") == null){
					gfn_alert("지불유형이 식권일때 끼니/총식수/단가/자재명은  필수입력 입니다.\n확인하여 주십시요.");
					return false;
				}else if(ds_listSave.getColumn(i, "bldType") == "" || ds_listSave.getColumn(i, "salQuantity") == "" 
					|| ds_listSave.getColumn(i, "uprice") == "" || ds_listSave.getColumn(i, "materialNm") == ""){
					gfn_alert("지불유형이 식권일때 끼니/총식수/단가/자재명은 필수입력 입니다.\n확인하여 주십시요.");
					return false;
				}
				
				//매출총액 - 총식수* 단가 
				ds_listSave.setColumn(i, "salAmt", ds_listSave.getColumn(i, "salQuantity")*ds_listSave.getColumn(i, "uprice"));	
			}
			
			//지불유형이 식권이 아닐때 자재명/자재코드는 널처리
			if(ds_listSave.getColumn(i, "payCd") != "P2" && ds_listSave.getColumn(i, "payCd") != "P3"){
				ds_listSave.setColumn(i, "materialNm", ""); //자재명
				ds_listSave.setColumn(i, "materialCd", ""); //자재코드
				ds_listSave.setColumn(i, "taxShetPublishYn","");
			}
			
			//매출유형이 식음료매출_식료,음료 일때 끼니,총식수,단가 필수
			if(grd_list.formatid == "default"){
				if(ds_listSave.getColumn(i, "salsClass") == "1103" || ds_listSave.getColumn(i, "salsClass") == "1104"){
					if(ds_listSave.getColumn(i, "bldType") == null || ds_listSave.getColumn(i, "salQuantity") == null 
						|| ds_listSave.getColumn(i, "uprice") == null){
						gfn_alert("매출유형이 식음료매출 일때 끼니/총식수/단가는 필수입력 입니다.\n확인하여 주십시요.");
						ds_listSave.setColumn(i, "uprice", "");
						ds_listSave.setColumn(i, "salAmt", "");
						ds_listSave.setColumn(i, "payCd", "");
						return false;
					}else if(ds_listSave.getColumn(i, "bldType") == "" || ds_listSave.getColumn(i, "salQuantity") == "" 
						|| ds_listSave.getColumn(i, "uprice") == ""){
						gfn_alert("매출유형이 식음료매출 일때 끼니/총식수/단가는 필수입력 입니다.\n확인하여 주십시요.");
						ds_listSave.setColumn(i, "uprice", "");
						ds_listSave.setColumn(i, "salAmt", "");
						ds_listSave.setColumn(i, "payCd", "");
						return false;
					}
				}
			}
			
			if(ds_listSave.getColumn(i, "payCd") == "2"){ //지불유형이 카드일때
				if(ds_listSave.getColumn(i, "evidence6") == "" || ds_listSave.getColumn(i, "evidence6") == null){
					gfn_alert("지불유형이 카드일때 카드사는 필수입력 입니다.\n확인하여 주십시요.");
					return false;
				}
			}else if(ds_listSave.getColumn(i, "payCd") == "Z"){ //지불유형이 내부이용
				if(ds_listSave.getColumn(i, "evidence6") == "" || ds_listSave.getColumn(i, "evidence6") == null){
					gfn_alert("지불유형이 내부이용일때 사원명은 필수입력 입니다.\n확인하여 주십시요.");
					return false;
				}
			}
			
			//부가세가 과세일반 , 면세일반 (부가세0), 영세일반 (부가세 0) 세팅
			if(ds_listSave.getColumn(i, "vatClass") == "20" || ds_listSave.getColumn(i, "vatClass") == "10"){
				ds_listSave.setColumn(i, "netAmt", gfn_round(ds_listSave.getColumn(i, "salAmt")/1.1));//공급가액(총액/1.1)
				ds_listSave.setColumn(i, "vatAmt", ds_listSave.getColumn(i, "salAmt") - ds_listSave.getColumn(i, "netAmt"));//부가세금액(매출액 - 공급가)
			}else if(ds_listSave.getColumn(i, "vatClass") == "43"){
				ds_listSave.setColumn(i, "netAmt", ds_listSave.getColumn(i, "salAmt"));//
				ds_listSave.setColumn(i, "vatAmt", 0);//부가세금액(0)
			}else if(ds_listSave.getColumn(i, "vatClass") == "21"){
				ds_listSave.setColumn(i, "netAmt", ds_listSave.getColumn(i, "salAmt"));//
				ds_listSave.setColumn(i, "vatAmt", 0);//부가세금액(0)
			}else if(ds_listSave.getColumn(i, "vatClass") == "X"){
			
				//if(ds_listSave.getColumn(i, "payCd") == "Z" || ds_listSave.getColumn(i, "payCd") == "P2" || ds_listSave.getColumn(i, "payCd") == "P3" || ds_listSave.getColumn(i, "payCd") == "11"){
				//부가세 없음으로 공통코드에 관리되는 업장은 처리 가능하도록 추가  처리자 : 맹수영  20160418 
				if(ds_cccd.getColumn(0,"vatCtrlYn") == "Y" || ds_listSave.getColumn(i, "payCd") == "Z" || ds_listSave.getColumn(i, "payCd") == "P2" || ds_listSave.getColumn(i, "payCd") == "P3" || ds_listSave.getColumn(i, "payCd") == "11"){
					ds_listSave.setColumn(i, "netAmt", ds_listSave.getColumn(i, "salAmt"));
					ds_listSave.setColumn(i, "vatAmt", 0);//부가세금액(0)
					
			
				}else{
					gfn_alert("지불유형이 "+ds_listSave.getColumn(i, "payCdNm")+"이면 부가세없음은 선택할 수 없습니다.");
					ds_listSave.setColumn(i, "vatClass", "");
					ds_listSave.setColumn(i, "vatClassNm", "");
					return false;
					
				}
			}
			
			//payCd 세팅
			if(ds_listSave.getColumn(i, "payCd") == "1"){ //현금
				ds_listSave.setColumn(i, "internalUseClass", "N");//
			}else if(ds_listSave.getColumn(i, "payCd") == "2"){ //카드
				ds_listSave.setColumn(i, "internalUseClass", "N");//
				ds_listSave.setColumn(i, "taxShetYn", "N");//
			}else if(ds_listSave.getColumn(i, "payCd") == "7" || ds_listSave.getColumn(i, "payCd") == "11"){ //후불(외상)/보조금
				ds_listSave.setColumn(i, "evidence1", ds_listSave.getColumn(i, "custCd"));
				ds_listSave.setColumn(i, "evidence2", ds_exptDt.getColumn(0,"payCdNm"));	
				ds_listSave.setColumn(i, "internalUseClass", "N");//
				if(ds_listSave.getColumn(i, "payCd") == "11"){
					if(ds_listSave.getColumn(i, "vatClass") != "X"){
						gfn_alert("지불유형이 보조금이면 [과세:부가세 없음] 만 가능합니다.");
						ds_listSave.setColumn(i, "vatClass", "X");
						ds_listSave.setColumn(i, "vatClassNm", "부가세 없음");
						return false;
					}
				}
			}else if(ds_listSave.getColumn(i, "payCd") == "8"){ //직원후불
				ds_listSave.setColumn(i, "evidence1", ds_listSave.getColumn(i, "custCd"));
				ds_listSave.setColumn(i, "internalUseClass", "N");//
			}else if(ds_listSave.getColumn(i, "payCd") == "P1"){ //선수금(일반)
				if(ds_listSave.getColumn(i, "tmpSeq") == edt_tmpSeq.value){
					if(ds_advanceAmt.rowcount == 0){
						gfn_alert("지불유형이 "+ds_listSave.getColumn(i, "payCdNm")+"이면 선수금은 필수입력 입니다.");
						return false;
					}
				}
				ds_listSave.setColumn(i, "internalUseClass", "N");//
			}else if(ds_listSave.getColumn(i, "payCd") == "P2"){ //선수금(식권)
				ds_listSave.setColumn(i, "internalUseClass", "N");//
			}else if(ds_listSave.getColumn(i, "payCd") == "P3"){ //선수금(식권)
				ds_listSave.setColumn(i, "internalUseClass", "N");//
			}else if(ds_listSave.getColumn(i, "payCd") == "Z"){ //내부이용
				ds_listSave.setColumn(i, "evidence1", "1");
				ds_listSave.setColumn(i, "internalUseClass", "Y");//
				
				//부가세없음, 기타(내부거래로 세팅)
				if(ds_listSave.getColumn(i, "custCd") != "999991"){
					gfn_alert("지불유형이 내부이용이면 [고객사명:기타(내부거래)]만 가능합니다.");
					ds_listSave.setColumn(i, "custCd", "999991");
					ds_listSave.setColumn(i, "custNm", "기타(내부거래)");	
					return false;
				}
				
				if(ds_listSave.getColumn(i, "vatClass") != "X"){
					gfn_alert("지불유형이 내부이용이면 [과세:부가세 없음] 만 가능합니다.");
					ds_listSave.setColumn(i, "vatClass", "X");
					ds_listSave.setColumn(i, "vatClassNm", "부가세 없음");
					return false;
				}
			}
		}else if(ds_listSave.getColumn(i, "receiptNum") != null && ds_listSave.getColumn(i, "receiptNum") != ""){
			//수정부분 중요
			for(var j=0; j<ds_list.rowcount; j++){
				if(ds_listSave.getColumn(i, "receiptNum") == ds_list.getColumn(j, "receiptNum")){
					if(ds_listSave.getColumn(i, "uprice") != ds_listSave.getOrgColumn(i, "uprice")){
						ds_list.setColumn(j, "uprice", ds_listSave.getColumn(i, "uprice"));	
					}
					if(ds_listSave.getColumn(i, "salQuantity") != ds_listSave.getOrgColumn(i, "salQuantity")){
						ds_list.setColumn(j, "salQuantity", ds_listSave.getColumn(i, "salQuantity"));	
					}
					if(ds_listSave.getColumn(i, "salAmt") != ds_listSave.getOrgColumn(i, "salAmt")){
						ds_list.setColumn(j, "salAmt", ds_listSave.getColumn(i, "salAmt"));	
					}
					if(ds_listSave.getColumn(i, "bldType") != ds_listSave.getOrgColumn(i, "bldType")){
						ds_list.setColumn(j, "bldType", ds_listSave.getColumn(i, "bldType"));	
					}
					if(ds_listSave.getColumn(i, "bldTypeNm") != ds_listSave.getOrgColumn(i, "bldTypeNm")){
						ds_list.setColumn(j, "bldTypeNm", ds_listSave.getColumn(i, "bldTypeNm"));
					}
					if(ds_listSave.getColumn(i, "saleGubun") != ds_listSave.getOrgColumn(i, "saleGubun")){
						ds_list.setColumn(j, "saleGubun", ds_listSave.getColumn(i, "saleGubun"));	
					}
					if(ds_listSave.getColumn(i, "saleGubunNm") != ds_listSave.getOrgColumn(i, "saleGubunNm")){
						ds_list.setColumn(j, "saleGubunNm", ds_listSave.getColumn(i, "saleGubunNm"));
					}
					if(ds_listSave.getColumn(i, "remark") != ds_listSave.getOrgColumn(i, "remark")){
						ds_list.setColumn(j, "remark", ds_listSave.getColumn(i, "remark"));//적요
					}
					
					// 매출식수 수정할때도 다시 계산되게 수정 : 2015.11.04
					if(ds_listSave.getColumn(i, "totPsnYn") == "true"){
						ds_list.setColumn(i, "totPsn", ds_listSave.getColumn(i, "salQuantity"));
					}else if(ds_listSave.getColumn(i, "totPsnYn") == "false"){
						ds_list.setColumn(i, "totPsn", "");
					}else if(ds_listSave.getColumn(i, "totPsnYn") == undefined){
						ds_list.setColumn(i, "totPsn", "");
					}
				
					if(ds_list.getColumn(j, "payCd") == "2"){
						if(ds_listSave.getColumn(i, "evidence6") != ds_listSave.getOrgColumn(i, "evidence6")){
							ds_list.setColumn(j, "evidence6", ds_listSave.getColumn(i, "evidence6"));//카드정보/사원정보
						}
						if(ds_listSave.getColumn(i, "evidence5") != ds_listSave.getOrgColumn(i, "evidence5")){
							ds_list.setColumn(j, "evidence5", ds_listSave.getColumn(i, "evidence5"));//카드정보
						}
						if(ds_listSave.getColumn(i, "cardComCd") != ds_listSave.getOrgColumn(i, "cardComCd")){
							ds_list.setColumn(j, "cardComCd", ds_listSave.getColumn(i, "cardComCd"));//카드정보
						}
						if(ds_listSave.getColumn(i, "buycpnyCd") != ds_listSave.getOrgColumn(i, "buycpnyCd")){
							ds_list.setColumn(j, "buycpnyCd", ds_listSave.getColumn(i, "buycpnyCd"));	//카드정보
						}
						if(ds_listSave.getColumn(i, "frncStorNum") != ds_listSave.getOrgColumn(i, "frncStorNum")){
							ds_list.setColumn(j, "frncStorNum", ds_listSave.getColumn(i, "frncStorNum"));	//카드정보
						}	
					}else if(ds_list.getColumn(j, "payCd") == "Z"){
						if(ds_listSave.getColumn(i, "evidence6") != ds_listSave.getOrgColumn(i, "evidence6")){
							ds_list.setColumn(j, "evidence6", ds_listSave.getColumn(i, "evidence6"));//카드정보/사원정보
						}	
						if(ds_listSave.getColumn(i, "evidence2") != ds_listSave.getOrgColumn(i, "evidence2")){
							ds_list.setColumn(j, "evidence2", ds_listSave.getColumn(i, "evidence2"));//사원정보
						}	
						if(ds_listSave.getColumn(i, "vatClass") != ds_listSave.getOrgColumn(i, "vatClass")){
							ds_list.setColumn(j, "vatClass", ds_listSave.getColumn(i, "vatClass"));//사원정보
						}	
						if(ds_listSave.getColumn(i, "vatClassNm") != ds_listSave.getOrgColumn(i, "vatClassNm")){
							ds_list.setColumn(j, "vatClassNm", ds_listSave.getColumn(i, "vatClassNm"));//사원정보
						}	
						if(ds_listSave.getColumn(i, "custCd") != ds_listSave.getOrgColumn(i, "custCd")){
							ds_list.setColumn(j, "custCd", ds_listSave.getColumn(i, "custCd"));//사원정보
						}	
						if(ds_listSave.getColumn(i, "custNm") != ds_listSave.getOrgColumn(i, "custNm")){
							ds_list.setColumn(j, "custNm", ds_listSave.getColumn(i, "custNm"));//사원정보
						}		
					}
									
					//부가세가 과세일반 , 면세일반 (부가세0), 영세일반 (부가세 0) 세팅
					if(ds_list.getColumn(j, "vatClass") == "20" || ds_list.getColumn(j, "vatClass") == "10"){
						if(gfn_round(ds_list.getColumn(j, "salAmt")/1.1) != gfn_round(ds_list.getOrgColumn(j, "salAmt")/1.1)){
							ds_list.setColumn(j, "netAmt", gfn_round(ds_list.getColumn(j, "salAmt")/1.1));//공급가액(총액/1.1)
							ds_list.setColumn(j, "vatAmt", ds_list.getColumn(j, "salAmt") - ds_list.getColumn(j, "netAmt"));//부가세금액(매출액 - 공급가)
						}			
					}else if(ds_list.getColumn(j, "vatClass") == "43"){
						if(ds_list.getColumn(j, "salAmt") != ds_list.getOrgColumn(j, "salAmt")){
							ds_list.setColumn(j, "netAmt", ds_list.getColumn(j, "salAmt"));//
							ds_list.setColumn(j, "vatAmt", 0);//부가세금액(0)
						}	
					}else if(ds_list.getColumn(j, "vatClass") == "21"){
						if(ds_list.getColumn(j, "salAmt") != ds_list.getOrgColumn(j, "salAmt")){
							ds_list.setColumn(j, "netAmt", ds_list.getColumn(j, "salAmt"));//
							ds_list.setColumn(j, "vatAmt", 0);//부가세금액(0)
						}
					}else if(ds_list.getColumn(j, "vatClass") == "X"){
					//alert(ds_cccd.getColumn(j,"vatCtrlYn"));
						//if(ds_list.getColumn(j, "payCd") == "Z" || ds_list.getColumn(j, "payCd") == "P2" || ds_list.getColumn(j, "payCd") == "P3" || ds_list.getColumn(j, "payCd") == "11"){
						////부가세 없음으로 공통코드에 관리되는 업장은 처리 가능하도록 추가  처리자 : 맹수영  20160418 
						if(ds_cccd.getColumn(0,"vatCtrlYn") == "Y" || ds_listSave.getColumn(i, "payCd") == "Z" || ds_listSave.getColumn(i, "payCd") == "P2" || ds_listSave.getColumn(i, "payCd") == "P3" || ds_listSave.getColumn(i, "payCd") == "11"){
							if(ds_list.getColumn(j, "salAmt") != ds_list.getOrgColumn(j, "salAmt")){
								ds_list.setColumn(j, "netAmt", ds_list.getColumn(j, "salAmt"));
								ds_list.setColumn(j, "vatAmt", 0);//부가세금액(0)
								//alert("1");						
								
							}
						}else{
							gfn_alert("지불유형이 "+ds_list.getColumn(j, "payCdNm")+"이면 부가세없음은 선택할 수 없습니다.");
							ds_list.setColumn(j, "vatClass", "");
							ds_list.setColumn(j, "vatClassNm", "");
							return false;
						}

					}
				}
			}
		}
		
	}// for end
		
	return true;

}
/*----------------------------------------------------------------------------------------------
 * 설명      : 출력 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_print()
{
	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 도움말 버튼 클릭 시 (필수-공통버튼에서 호출됨)
 *---------------------------------------------------------------------------------------------*/
function fn_help()
{
	
}

/************************************************************************************************
 * TRANSACTION 및 CallBack 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : 트랜잭션 콜백 함수 (필수)
 *---------------------------------------------------------------------------------------------*/
function fn_callBack(strSvcID, nErrorCode, strErrorMsg)
{
	// 에러시 gfn_callBack에서 메시지 제공, 화면별 특정 에러 발생시에만 사용하세요.
	if (nErrorCode < 0) 
	{
		fn_search();
		fn_searchSaleDay();
		return;
	}
	
    switch(strSvcID)
    {
		// 코드분류 조회
        case "search" :
            //서비스 쿼리결과로 데이터가 없는 경우 데이터셋 컬럼정보가 사라지는 현상을 복원하기 위해 현재 컬럼정보 저장
            if(ds_list.getRowCount() == 0){
				gfn_loadDatasetInfo (ds_listSave, listColumnInfo);
				ds_listSave.clearData();
				fn_searchSaleDay();
            }else{
				fn_virData(-1);
				fn_searchSaleDay();
            }
            
            //데이터셋 초기화
            ds_advanceAmt.clearData();
            ds_list_ticket.clearData();
            
           
        //전일자 셋팅
        fn_beforeDt();//마감여부 조회
        fn_apprvSearch(); // 건별입력 버튼 활성화 조회
        //fn_beforeDt2(); // 전일자 마감여부 조회

       //trace(ds_listSave.saveXML());	
        
			//지불유형이 내부이용일시 사번 제거-매출복사% 한건씩 저장으로 바뀌어서 제거하면 안됨
// 			if(copyFlag == true){
// 				for(var i=0; i < ds_list.rowcount; i++){
// 					if(ds_list.getColumn(i, "payCd") == "Z"){
// 						ds_list.setColumn(i, "evidence2", "");
// 						ds_list.setColumn(i, "evidence6", "");
// 						ds_list.setColumn(i, "payCdNm", "");	
// 					}
// 				}
// 				copyFlag = false;
// 			}
		searchboolean = true;
	   
		break;
		
		case "searchSaleDay" :
			edt_openYn.value = ds_open.getColumn(1,"openYn");
			ds_open.clearData();
			ds_paramInfo.clearData();
		break;
        
        // 저장
        case "save" :
			gfn_alert("msg.save.success");	// 저장 되었습니다.;
			ds_listSave.clearData();
			fn_search();
			fn_searchSaleDay();
			
			//자동저장
			var Autoyn = fn_closeYn();
			if(chk_Auto.value == true && Autoyn){
				fn_insert();
			}
			delFlag = false;
			break;    
            
        case "salsType" : 	//유형코드 기본값 셋팅
	
			break;
		
		case "saveCopy" : 	//전일 매출 복사
			dv_Copy.visible = (! dv_Copy.visible);
			gfn_alert("msg.action.success");	// 처리 되었습니다.;
			fn_search();
			fn_searchSaleDay();
			copyFlag = true;
		
			break;
		case "selectTmpSeq" :
			if(ds_tmpSeq.getRowCount() > 0){
				ds_listSave.setColumn(ds_listSave.rowposition,"tmpSeq",ds_tmpSeq.getColumn(0,"tmpSeq"));
			}
			break; 
		case "selectUpjangCcCdInfo" : //사업장 CC_CD 조회
			
			ds_search.setColumn(0, "ccCd", ds_cccd.getColumn(0, "ccCd"));
			if(ds_listSave.rowcount >0){
				ds_listSave.setColumn(ds_listSave.rowposition, "ccCd", ds_cccd.getColumn(0, "ccCd"));
			}
		
			break;	
			
		case "selectExpDt" : //회수 예정일 
		    break;
		    
		case "posClass" :
			break;
			
			case "selectCloseModifyreq" ://건별 입력 승인 여부
			//건별 승인이후 3일까지 처리 가능하게 변경  20160617 처리자 : 맹수영 요청자 : 김성권
			if(ds_apprv.getRowCount() > 0 && ds_apprv.getColumn(0,"apprvFlag") == "Y" && (ds_apprv.getColumn(0, "apprvDate") == gfn_addDate(fv_sToday,-2) || ds_apprv.getColumn(0, "apprvDate") == gfn_addDate(fv_sToday,-1) || ds_apprv.getColumn(0, "apprvDate") == fv_sToday)){
			//if(ds_apprv.getRowCount() > 0 && ds_apprv.getColumn(0,"apprvFlag") == "Y" && ds_apprv.getColumn(0, "apprvDate") == fv_sToday){
				btn_apprvAdd.visible = true;
				btn_apprvdel.visible = true;
				fv_apprv = "Y";
				//alert("1");
			}else{
				btn_apprvAdd.visible = false;
				btn_apprvdel.visible = false;
				fv_apprv = "N";
				//alert("2");
			}
			
			//업장별 마감건인경우 건별취소, 건별입력 버튼은 비활성화 시킴
			mfn_GetCcMonthClsYn("U",edt_upjangNm.getUpjangCode(),gfn_subStr(ds_search.getColumn(0, "occurDate"),0,6),"01");			
			
			//if(ds_search.getColumn(0, "occurDate") == "20160229" && ds_search.getColumn(0,"muCd") == "2002")
			if(gfn_subStr(ds_search.getColumn(0, "occurDate"),6,8) == GetLastDay(gfn_subStr(ds_search.getColumn(0, "occurDate")),0,7) && ds_search.getColumn(0,"muCd") == "2002")
			{
				//alert("3");
				if (ds_common.getColumn(0,0) == "Y")
				{
					btn_apprvAdd.visible = false;
					btn_apprvdel.visible = false;
					//fv_apprv = "N";
					//alert("4");	
				}
				else
				{
// 				    fn_beforeDt();
// 				    if (ds_beforeDt.getColumn(i, "dtCnt") == "Y") 
// 				    {
// 					btn_apprvAdd.visible = true;
// 					btn_apprvdel.visible = true;
// 					fv_apprv = "Y";
// 					}
                    //미마감인데 일반 입력하면 건별처럼 다 마감되어서 수정  20160401 맹수영
				    fn_beforeDt();
	                for(var i=0; i<ds_beforeDt.rowcount; i++){
	                //alert(ds_beforeDt.getColumn(i, "dtCnt"));
	              	    if(ds_beforeDt.getColumn(i, "dtCnt") == "Y")
	              	    {
					       btn_apprvAdd.visible = true;
					       btn_apprvdel.visible = true;
					       fv_apprv = "Y";
		                 }
		                 else
		                 {
					       btn_apprvAdd.visible = false;
					       btn_apprvdel.visible = false;
					       fv_apprv = "N";
					       //alert("5");
		                 }
	                }

		
					
					
					//
				}			
			}		
				
				
			//미마감인 경우 건별입력버튼 안뜨도록 수정  20160819 처리자:맹수영
			for(var i=0; i<ds_beforeDt.rowcount; i++){
	           if(ds_beforeDt.getColumn(i, "dtCnt") == "N")
		       {
					btn_apprvAdd.visible = false;
					btn_apprvdel.visible = false;
				    fv_apprv = "N";
				    //alert("6");
		        }
	        }	
	        //미마감인 경우 건별입력버튼 안뜨도록 수정 
	        				
			break;
			
	}
}

/************************************************************************************************
 * 사용자 FUNCTION 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명		: 식권팝업용 번호를  생성한다
 *---------------------------------------------------------------------------------------------*/
function fn_tmpSeq(){
    gfn_transaction(this
					,"selectTmpSeq"
					,"fs/fsl/upjangSaleRegMgnt/selectTmpSeq.xdo"
					,"ds_search=ds_search"
					,"ds_tmpSeq=ds_tmpSeq"
					,""
					,"fn_callBack"
					,false);
}


/*----------------------------------------------------------------------------------------------
 * 설명		: 사업장 CC_CD 조회 및 생성 
 *---------------------------------------------------------------------------------------------*/
function fn_upjangCcCdInfo(){
	if(gfn_isNull(ds_search.getColumn(0, "upjangCd"))) return;
	gfn_transaction(this
					,"selectUpjangCcCdInfo"
					,"fs/fsl/upjangSaleRegMgnt/selectUpjangCcCdInfo.xdo"
					,"ds_search=ds_search"
					,"ds_cccd=ds_cccd"
					,""
					,"fn_callBack"
					,false);
}

/*----------------------------------------------------------------------------------------------
 * 설명		: 마감여부조회
 *---------------------------------------------------------------------------------------------*/
function fn_beforeDt(){
	gfn_transaction(this
					,"beforeDt"
					,"fs/fsl/upjangSaleRegMgnt/beforeDt.xdo"
					,"ds_search=ds_search"
					,"ds_beforeDt=ds_beforeDt"
					,""
					,"fn_callBack"
					,false);
}

/*----------------------------------------------------------------------------------------------
 * 설명		: 전일자 마감여부조회
 *---------------------------------------------------------------------------------------------*/
function fn_beforeDt2(){

	// 조회전 데이터셋 클리어
	ds_beforeDt2.clearData();
	
	// 전일자 체크는 10월 1일 기준으로 체크
	if(ds_search.getColumn(0, "occurDate") == "20151001")return;
	
	gfn_transaction(this
					,"beforeDt2"
					,"fs/fsl/upjangSaleRegMgnt/beforeDt2.xdo"
					,"ds_search=ds_search"
					,"ds_beforeDt2=ds_beforeDt2"
					,""
					,"fn_callBack"
					,false);
}


/*----------------------------------------------------------------------------------------------
 * 설명		: 마감여부조회(자동 일마감 확인)
 *---------------------------------------------------------------------------------------------*/
function fn_beforeDty(){

	// 조회전 데이터셋 클리어
	ds_beforeDt2.clearData();
	
	// 전일자 체크는 10월 1일 기준으로 체크
	if(ds_search.getColumn(0, "occurDate") == "20151001")return;
	
	gfn_transaction(this
					,"beforeDty"
					,"fs/fsl/upjangSaleRegMgnt/beforeDty.xdo"
					,"ds_search=ds_search"
					,"ds_beforeDty=ds_beforeDty"
					,""
					,"fn_callBack"
					,false);
}

/*----------------------------------------------------------------------------------------------
 * 설명		: 전일자체크(전일매출복사용)
 *---------------------------------------------------------------------------------------------*/
function fn_beforeDtCopy(){
	gfn_transaction(this
					,"beforeDtCopy"
					,"fs/fsl/upjangSaleRegMgnt/beforeDtCopy.xdo"
					,"ds_search=ds_search"
					,"ds_beforeDtCopy=ds_beforeDtCopy"
					,""
					,"fn_callBack"
					,false);
}
/*----------------------------------------------------------------------------------------------
 * 설명		: 지불유형이 후불(외상)일때 회수예장일  조회 및 생성 fn_expDt(e.row);
 *---------------------------------------------------------------------------------------------*/
function fn_expDt(row){

	ds_search.setColumn(0, "custCd" ,ds_listSave.getColumn(row, "custCd"));
	//지불유형이 후불(외상)일때 회수예정일 구할때 OCCURDATE 파라미터 추가   20160328 맹수영
	ds_search.setColumn(0, "occurDate" ,ds_listSave.getColumn(row, "occurDate"));
	//trace(ds_listSave.getColumn(row, "linkOccurDate"));
	//trace(ds_search.saveXML());
    gfn_transaction(this
					,"selectExpDt"
					,"fs/fsl/upjangSaleRegMgnt/selectExpDt.xdo"
					,"ds_search=ds_search:A"
					,"ds_exptDt=ds_exptDt"
					,""
					,"fn_callBack"
					,false);
}

/*----------------------------------------------------------------------------------------------
 * 설명		: 창고조회
 *---------------------------------------------------------------------------------------------*/
function fn_posClass(){

	if(ds_search.getColumn(0, "upjangCd") != "" && ds_search.getColumn(0, "upjangCd") != null){
		gfn_transaction(this
						,"posClass"
						,"fs/fsl/upjangSaleRegMgnt/posClass.xdo"
						,"ds_search=ds_search"
						,"ds_posYn=ds_posYn"
						,""
						,"fn_callBack"
						,false);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명		: 사업장 오픈일자 조회
 *---------------------------------------------------------------------------------------------*/
function fn_searchOpenDate(){

	if(ds_search.getColumn(0, "upjangCd") != "" && ds_search.getColumn(0, "upjangCd") != null){
		gfn_transaction(this
						,"searchOpenDate"
						,"fs/fsl/upjangSaleRegMgnt/searchOpenDate.xdo"
						,"ds_search=ds_search"
						,"ds_openDate=ds_openDate"
						,""
						,"fn_callBack"
						,false);
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명		: 선수금 금액 확인(선수식권)
 *---------------------------------------------------------------------------------------------*/
function fn_selectSumAdvanceAmtTicketP2(){
	
	ds_search.setColumn(0, "taxShetPublishYn", ds_listSave.getColumn(ds_listSave.rowposition,"taxShetPublishYn"));
	//선수 식권 선수금에서 선입선출방식으로 차감 2018.08.20 김호석(김성권대리 요청)
	ds_search.setColumn(0, "itemCode", ds_list_ticket.getColumn(0, "itemCode"));
	
	gfn_transaction(this
					,"selectSumAdvanceAmtTicketP2"
					,"fs/fsl/upjangSaleRegMgnt/selectSumAdvanceAmtTicketP2.xdo"
					,"ds_search=ds_search"
					,"ds_listAdvanceTicketP2=ds_listAdvanceTicketP2"
					,""
					,"fn_callBack"
					,false);
	
}
/*----------------------------------------------------------------------------------------------
 * 설명		: 선수금 금액 확인(외상식권)
 *---------------------------------------------------------------------------------------------*/
function fn_selectSumAdvanceAmtTicketP3(){

	ds_search.setColumn(0, "taxShetPublishYn", ds_listSave.getColumn(ds_listSave.rowposition,"taxShetPublishYn"));
	//외상 식권 선수금에서 선입선출방식으로 차감 2018.08.20 김호석(김성권대리 요청)
	ds_search.setColumn(0, "itemCode", ds_list_ticket.getColumn(0, "itemCode"));
	
	gfn_transaction(this
					,"selectSumAdvanceAmtTicketP3"
					,"fs/fsl/upjangSaleRegMgnt/selectSumAdvanceAmtTicketP3.xdo"
					,"ds_search=ds_search"
					,"ds_listAdvanceTicketP3=ds_listAdvanceTicketP3"
					,""
					,"fn_callBack"
					,false);
	
}

/************************************************************************************************
 * 설명      : 식권 관리 팝업
************************************************************************************************/
function fn_ticketPopup()
{
	
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == null){
		gfn_alert("매출유형은 필수입력 입니다.");
		//edt_salsType.setFocus();
		return;
	}
	
	if(ds_listSave.getColumn(ds_listSave.rowposition, "posNum") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "posNum") == null){
		gfn_alert("창고는 필수입력 입니다.");
		//edt_pos.setFocus();
		return;
	}
	if(ds_listSave.getColumn(ds_listSave.rowposition, "custCd") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "custCd") == null){                
		gfn_alert("고객사는 필수입력 입니다.");
		//edt_custnm.setFocus();
		return;
	}
	if(ds_listSave.getColumn(ds_listSave.rowposition, "vatClass") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "vatClass") == null){
		gfn_alert("과세여부는 필수입력 입니다.");
		//edt_vatClass.setFocus();
		return;
	}
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salQuantity") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "salQuantity") == null){
		gfn_alert("식수는 필수입력 입니다.");
		//edt_salQuantity.setFocus();
		return;
	}
	if(ds_listSave.getColumn(ds_listSave.rowposition, "uprice") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "uprice") == null){                
		gfn_alert("단가는 필수입력 입니다.");
		//edt_uprice.setFocus();
		return;
	}
	if(ds_listSave.getColumn(ds_listSave.rowposition, "bldType") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "bldType") == null){
		gfn_alert("끼니는 필수입력 입니다.");
		//edt_bldType.setFocus();
		return;
	}
	if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == null){
		gfn_alert("지불유형은 필수입력 입니다.");
		//edt_pmntType.setFocus();
		return;
	}
	
	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = ds_search.getColumn(0, "upjangCd");
	arrArg[1] = ds_search.getColumn(0, "occurDate");
	if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P2"){
		arrArg[2] = "001";
	}else if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P3"){
		arrArg[2] = "002";
	}
	arrArg[3] = ds_listSave.getColumn(ds_listSave.rowposition, "taxShetPublishYn");
	arrArg[4] = ds_listSave.getColumn(ds_listSave.rowposition, "salQuantity");
	arrArg[5] = ds_listSave.getColumn(ds_listSave.rowposition, "uprice");
	arrArg[6] = ds_listSave.getColumn(ds_listSave.rowposition, "remark");
	arrArg[7] = ds_listSave.getColumn(ds_listSave.rowposition, "custCd");
	arrArg[8] = ds_search.getColumn(0, "muCd");
	arrArg[9] = edt_tmpSeq.value;
	
	var strId       = "MealTicketPopup";
	var strURL      = "X_FSL::MealTicketPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;
 	
 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);

 	if(arr != undefined){
		ds_listSave.setColumn(ds_listSave.rowposition,"materialCd",arr["itemCode"]);
		ds_listSave.setColumn(ds_listSave.rowposition,"materialNm",arr["itemCodenm"]);
		ds_listSave.setColumn(ds_listSave.rowposition,"taxShetPublishYn",arr["taxShetPublishYn"]);	
		
		//선수금 가능금액 체크
		if (fn_chkAdvanceAmt(true) == false) return;
		
		fn_save();
 	}		
}
function edtBtn_ticket_onclick(obj:Button,  e:ClickEventInfo)
{
	fn_ticketPopup();
}
function fn_chkAdvanceAmt(){
	if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P2"){//선수금(식권)
		//선수금 금액 체크
		if(ds_listSave.getColumn(ds_listSave.rowposition, "evidence1") == "" ||ds_listSave.getColumn(ds_listSave.rowposition, "evidence1") == null){
			if(toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "salAmt")) > 0){
				//선수금 가능 잔액 조회(선수식권)
				ds_search.setColumn(0, "custCd", ds_listSave.getColumn(ds_listSave.rowposition, "custCd"));
				ds_search.setColumn(0, "payCd", "P2");
				ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "P2");
				
				fn_selectSumAdvanceAmtTicketP2();
				trace("선수금선수식권조회");
				ds_listSave.setColumn(ds_listSave.rowposition, "sumAdvanceAmt", ds_listAdvanceTicketP2.getColumn(0, "sumAdvanceAmt"));
				var curSum = 0;
				var curCust = ds_listSave.getColumn(ds_listSave.rowposition, "custCd");
				var payCd = ds_listSave.getColumn(ds_listSave.rowposition, "payCd");
			
// 				for(var i=0; i<ds_listSave.rowcount; i++){
// 					if(ds_listSave.getColumn(i, "payCd") == "P2"){
// 						if(curCust == ds_listSave.getColumn(i, "custCd")){
// 							curSum = ds_listSave.getCaseSum("payCd == 'P2' && custCd=='"+ds_listSave.getColumn(ds_listSave.rowposition, "custCd")+"'","salAmt");
// 							trace(curSum+" "+ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"));
// 							if(curSum > toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))){
// 								gfn_alert("[선수금가능금액:"+gfn_numFormat(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))+"]"+" " +"[매출총액:"+gfn_numFormat(curSum)+"]"+"\n매출액이 선수금 가능금액을 초과하였습니다.");
// 								ds_listSave.setColumn(ds_listSave.rowposition, "salQuantity", "");
// 								ds_listSave.setColumn(ds_listSave.rowposition, "uprice", "");
// 								ds_listSave.setColumn(ds_listSave.rowposition, "salAmt", "");
// 								return false;
// 							}
// 						}
// 					}
// 				}	
				if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P2"){
					curSum = ds_listSave.getColumn(ds_listSave.rowposition, "salAmt");
					curSum2 = gfn_round(Number(ds_listSave.getColumn(ds_listSave.rowposition, "salAmt"))/1.1);
					trace(curSum+" "+ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"));
					if(ds_listSave.getColumn(ds_listSave.rowposition, "taxShetPublishYn") == "Y"){
						if(curSum2 > toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))){
							gfn_alert("[선수금가능금액:"+gfn_numFormat(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))+"]"+" " +"[매출총액:"+curSum+"]"+"\n매출액이 선수금 가능금액을 초과하였습니다.");
							ds_listSave.setColumn(ds_listSave.rowposition, "salQuantity", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "uprice", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "salAmt", "");
							return false;
						}
					}else{
						if(curSum > toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))){
							gfn_alert("[선수금가능금액:"+gfn_numFormat(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))+"]"+" " +"[매출총액:"+curSum+"]"+"\n매출액이 선수금 가능금액을 초과하였습니다.");
							ds_listSave.setColumn(ds_listSave.rowposition, "salQuantity", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "uprice", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "salAmt", "");
							return false;
						}
					}
				}
			}
		}	
	}else if(ds_listSave.getColumn(ds_listSave.rowposition,"payCd") == "P3"){//선수금(외상식권)	
		//선수금 금액 체크
		if(ds_listSave.getColumn(ds_listSave.rowposition, "evidence1") == "" ||ds_listSave.getColumn(ds_listSave.rowposition, "evidence1") == null){
			if(toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "salAmt")) > 0){
				//선수금 가능 잔액 조회(외상식권)
				ds_search.setColumn(0, "custCd", ds_listSave.getColumn(ds_listSave.rowposition, "custCd"));
				ds_search.setColumn(0, "payCd", "P3");
				ds_listSave.setColumn(ds_listSave.rowposition, "payCd", "P3");
				
				fn_selectSumAdvanceAmtTicketP3();
				trace("선수금외상식권조회");
				ds_listSave.setColumn(ds_listSave.rowposition, "sumAdvanceAmt", ds_listAdvanceTicketP3.getColumn(0, "sumAdvanceAmt"));
				var curSum = 0;
				var curCust = ds_listSave.getColumn(ds_listSave.rowposition, "custCd");
				var payCd = ds_listSave.getColumn(ds_listSave.rowposition, "payCd");
			
// 				for(var i=0; i<ds_listSave.rowcount; i++){
// 					if(ds_listSave.getColumn(i, "payCd") == "P3"){
// 						if(curCust == ds_listSave.getColumn(i, "custCd")){
// 							curSum = ds_listSave.getCaseSum("payCd == 'P3' && custCd=='"+ds_listSave.getColumn(ds_listSave.rowposition, "custCd")+"'","salAmt");
// 							trace(curSum+" "+ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"));
// 							if(curSum > toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))){
// 								gfn_alert("[선수금가능금액:"+gfn_numFormat(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))+"]"+" " +"[매출총액:"+gfn_numFormat(curSum)+"]"+"\n매출액이 선수금 가능금액을 초과하였습니다.");
// 								ds_listSave.setColumn(ds_listSave.rowposition, "salQuantity", "");
// 								ds_listSave.setColumn(ds_listSave.rowposition, "uprice", "");
// 								ds_listSave.setColumn(ds_listSave.rowposition, "salAmt", "");
// 								return false;
// 							}
// 						}
// 					}
// 				}
				if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P3"){
					curSum = ds_listSave.getColumn(ds_listSave.rowposition, "salAmt");
					curSum2 = gfn_round(Number(ds_listSave.getColumn(ds_listSave.rowposition, "salAmt"))/1.1);
					trace(curSum+" "+ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"));
					if(ds_listSave.getColumn(ds_listSave.rowposition, "taxShetPublishYn") == "Y"){
						if(curSum2 > toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))){
							gfn_alert("[선수금가능금액:"+gfn_numFormat(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))+"]"+" " +"[매출총액:"+curSum+"]"+"\n매출액이 선수금 가능금액을 초과하였습니다.");
							ds_listSave.setColumn(ds_listSave.rowposition, "salQuantity", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "uprice", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "salAmt", "");
							return false;
						}
					}else{
						if(curSum > toNumber(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))){
							gfn_alert("[선수금가능금액:"+gfn_numFormat(ds_listSave.getColumn(ds_listSave.rowposition, "sumAdvanceAmt"))+"]"+" " +"[매출총액:"+curSum+"]"+"\n매출액이 선수금 가능금액을 초과하였습니다.");
							ds_listSave.setColumn(ds_listSave.rowposition, "salQuantity", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "uprice", "");
							ds_listSave.setColumn(ds_listSave.rowposition, "salAmt", "");
							return false;
						}
					}
				}
			}
		}	
	}
}
/************************************************************************************************
 * 설명      : 카드사 조회 팝업
************************************************************************************************/
function fn_cardPop(row)
{
	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = row;
	arrArg[1] = ds_search.getColumn(0, "upjangCd");
	
	var strId       = "MealTicketPopup";
	var strURL      = "X_FSL::CardPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);

 	if(arr != undefined){		
		ds_listSave.setColumn(row,"buycpnyCd",arr["buycpnyCd"]);
		ds_listSave.setColumn(row,"evidence6",arr["buycpnyNm"]);
		ds_listSave.setColumn(row,"evidence5",arr["cardCustCd"]);
		ds_listSave.setColumn(row,"cardComCd",arr["bankCd"]);
		ds_listSave.setColumn(row,"frncStorNum",arr["frncStorNum"]);
 	}		
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 사원조회 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_personalPopup(row)
{
	//[[Before Event를 정의한다.
	//if (!gfn_isNull(this.eventBeforeTrigger))
	//{
	//	var beforeEvent = eval("parent."+this.eventBeforeTrigger);
	//	var rtn = beforeEvent(this);
		
	//	if (!rtn) return;
	//}
	//Before Event를 정의한다.]]
	
	//[[팝업창을 호출한다.
	var strId       = "PersonalSearch";
	var strURL      = "X_FSL::PersonalSearchPopFC.xfdl"; //FC만 검색되도록 수정(외식 및 리조트 조회 불가)
	
	var objArgument = {
		P_MU_CD : "", //ds_search.getColumn(0, "muCd"),
		P_TM_CD : "", //ds_search.getColumn(0, "schTm"),
		P_TM_NM : "",  //ds_search.getColumn(0, "schTmNm"),
		P_CC_CD : "",  //ds_search.getColumn(0, "ccCd"),
		P_CC_NM : "",   //ds_search.getColumn(0, "ccNm"),
		P_DATE : ds_search.getColumn(0, "occurDate") //매출일자로 내부이용 제한 
	};
	var nWidth      = 726;
	var nHeight     = 495;
	var strStyle    = "";
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";

	// 리턴값을 배열로 받을 경우	
	var arrRtn = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
	if (arrRtn instanceof Object)
	{
		//alert(arrRtn.sabun + " " + arrRtn.nmKor);
		ds_listSave.setColumn(row,"evidence2",arrRtn.sabun);
		ds_listSave.setColumn(row,"evidence6",arrRtn.nmKor);
/*		ds_listSave.setColumn(row,"payCdNm",arrRtn.nmKor);*/
		
		//setNmKor(arrRtn.nmKor);	
		//setSabun(arrRtn.sabun);
		//setNmKor(arrRtn.nmKor);
// 		edt_userName.userId = arrRtn.userid;
// 		edt_userName.sosokCode = arrRtn.sosokCode;
// 		edt_userName.sosokName = arrRtn.sosokName;
// 		edt_userName.upjangCode = arrRtn.upjang;
// 		edt_userName.upjangName = arrRtn.upjangnm;
// 		edt_userName.custCode = arrRtn.custcd;
// 		edt_userName.custName = arrRtn.custnm;
// 		edt_userName.otCustCode = arrRtn.otcustcd;
// 		edt_userName.otCustName = arrRtn.otcustnm;
// 		edt_userName.userType = arrRtn.userType;
// 		edt_userName.userGroupCode = arrRtn.userGroup;
// 		edt_userName.userGroupName = arrRtn.userGroupName;
		
		//[[After Event를 정의한다.
		//if (!gfn_isNull(this.eventAfterTrigger))
		//{
		//	var afterEvent = eval("parent."+this.eventAfterTrigger);
		//	afterEvent(this, arrRtn);
		//}
		//After Event를 정의한다.]]
	}
	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 선수금일반 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_AdvanceAmtPopup()
{
	//cccd 조회
	fn_upjangCcCdInfo();

	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = ds_search.getColumn(0, "upjangCd");
	arrArg[1] = ds_search.getColumn(0, "ccCd");
	arrArg[2] = ds_listSave.getColumn(ds_listSave.rowposition, "custCd");
	arrArg[3] = ds_search.getColumn(0, "muCd");
	arrArg[4] = ds_listSave.getColumn(ds_listSave.rowposition, "salAmt");
	arrArg[5] = edt_tmpSeq.value;
	arrArg[6] = ds_listSave.getColumn(ds_listSave.rowposition, "posNum");
	arrArg[7] = ds_search.getColumn(0, "occurDate");
	
	var strId       = "AdvanceAmtPopup";
	var strURL      = "X_FSL::AdvanceAmtPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);

}
/*----------------------------------------------------------------------------------------------
 * 설명      : 선수금YN 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_advanceYnPop()
{
	//cccd 조회
	//fn_upjangCcCdInfo();

	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = ds_listSave.getColumn(ds_listSave.rowposition, "occurDate");
	arrArg[1] = ds_listSave.getColumn(ds_listSave.rowposition, "sysClass");
	arrArg[2] = ds_listSave.getColumn(ds_listSave.rowposition, "upjangCd");
	arrArg[3] = ds_listSave.getColumn(ds_listSave.rowposition, "receiptNum");
	arrArg[4] = ds_listSave.getColumn(ds_listSave.rowposition, "advanceNum");
	trace(arrArg);
	var strId       = "AdvanceYnPopup";
	var strURL      = "X_FSL::AdvanceYnPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;
 	
 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 체권대체YN 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_arYnPop()
{
	/*//cccd 조회
	//fn_upjangCcCdInfo();

	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = ds_listSave.getColumn(ds_listSave.rowposition, "arNum");
	//arrArg[1] = ds_listSave.getColumn(ds_listSave.rowposition, "occurDate");
	//arrArg[2] = ds_listSave.getColumn(ds_listSave.rowposition, "upjangCd");

	var strId       = "ArYnPopup";
	var strURL      = "X_FSL::ArYnPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;
 	
 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
 	*/
 	
 	// 2015.11.11 영업장부 채권대체 팝업과 동일하게 변경
 	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	//trace("fn_arPop");
	arrArg[0] = "채권대체"; // 구분
	arrArg[1] = ds_listSave.getColumn(ds_listSave.rowposition, "arNum"); // 채권 번호
	arrArg[2] = ds_listSave.getColumn(ds_listSave.rowposition, "occurDate"); // 발생일자
	arrArg[3] = ds_listSave.getColumn(ds_listSave.rowposition, "tmCd"); // 팀
	arrArg[4] = ds_listSave.getColumn(ds_listSave.rowposition, "upjangCd");
	
	var strId       = "arPop";
	var strURL      = "U_MAG::MAG10020P.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;
 	
 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 세금계산서YN 팝업
 *---------------------------------------------------------------------------------------------*/
function fn_publishYnPop()
{
	//cccd 조회
	//fn_upjangCcCdInfo();

	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = ds_listSave.getColumn(ds_listSave.rowposition, "upjangSalsNum");
	arrArg[1] = ds_listSave.getColumn(ds_listSave.rowposition, "occurDate");

	var strId       = "PublishYnPopup";
	var strURL      = "X_FSL::PublishYnPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;
 	
 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);
	
}
/*********************************************************************
*설명      : 그리드 ds_list 클릭
**********************************************************************/
function grd_list_oncellclick(obj:Grid, e:GridClickEventInfo)
{
	
	if(fn_virData(ds_list.rowposition)){
		
		
		//선수금YN조회 팝업 (col 15)
		trace(e.col);
		if(e.col == 15){
			// 외식일때 리턴 2015.10.21
			if(edt_muNm.getMuCode() == "2003")return;
			if(ds_listSave.getColumn(e.row, "advanceYn") == "Y"){
				fn_advanceYnPop();
			}
		}
		
		//체권대체YN 팝업
		if(e.col == 16){
			if(ds_listSave.getColumn(e.row, "arYn") == "Y"){
				fn_arYnPop();
			}
		}
		
		//세금계산서YN 팝업
		if(e.col == 17){
			if(ds_listSave.getColumn(e.row, "publishYn") == "Y"){
				fn_publishYnPop();
			}
		}
		
		//매출식수
		
		if(ds_listSave.getColumn(e.row,"totPsnYn") == "true"){
			chk_Auto00.value = "true";
		}else{
			chk_Auto00.value = "false";
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 사업부 선택 후 팀 팝업 호출 시 인자값 전달
 *---------------------------------------------------------------------------------------------*/
function fn_tmBeforeEvent(o)
{
	var v_mu = "";
	v_mu = gfn_transNullToEmpty(ds_search.getColumn(ds_search.rowposition, "muCd"));		// 사업부코드
	if(v_mu=="") {
		gfn_alert("msg.noselect", "사업부");	// $1 을(를) 선택해 주십시요.
		return;
	}
	o.qoMuCd = v_mu;
	return true;	
	
}


function fn_SetChkBox()
{
	// 복사 매출유형 식음료(-)매출(FS) 제외 : 2015.11.13
 	ds_salesType.filter(" code == '1103'");

	var chkObj;
	for(var i=0; i<4; i++) //총 체크박스 5개
	{
		chkObj = eval("dv_Copy.chk"+(i+1));
		if (i < ds_salesType.rowcount)
		{
			chkObj.text     =  ds_salesType.getColumn(i, "codeName");
			chkObj.userdata =  ds_salesType.getColumn(i, "code");
		}
		else
		{
			chkObj.enable=false;
			chkObj.visible=false;
		}
	}
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 팀 선택 후 사업장 팝업 호출 시 인자값 전달
 
function fn_upjangBeforeEvent(o)
{
	var v_tm = "";
	v_tm = gfn_transNullToEmpty(ds_search.getColumn(ds_search.rowposition, "schTm"));		// 팀코드
	if(v_tm=="") {
		gfn_alert("msg.noselect", "팀");	// $1 을(를) 선택해 주십시요.
		return;
	}
	o.gtmCd = v_tm;
	return true;	
}
*---------------------------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------------------------
 * 설명      : 신규Row 데이터 셋팅
 *---------------------------------------------------------------------------------------------*/
function fn_newRowData(nRow){
	ds_listSave.setColumn(ds_listSave.rowposition,"muCd", ds_search.getColumn(0,"muCd"));
	//ds_listSave.setColumn(nRow,"schTm", ds_search.getColumn(0,"schTm")); 팀
	ds_listSave.setColumn(ds_listSave.rowposition,"occurDate", ds_search.getColumn(0,"occurDate"));
	ds_listSave.setColumn(ds_listSave.rowposition,"upjangCd", ds_search.getColumn(0,"upjangCd"));
	ds_listSave.setColumn(ds_listSave.rowposition,"salAmt", "");
	
		
	if(ds_search.getColumn(0,"muCd") == "2001"){
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClass","15");
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClassNm","FC본사");
	}else if(ds_search.getColumn(0,"muCd") == "2002"){
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClass","11");
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClassNm","단체급식");
	}else if(ds_search.getColumn(0,"muCd") == "2003"){
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClass","12");
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClassNm","외식컨세션");
	}else if(ds_search.getColumn(0,"muCd") == "2005"){
		//ds_listSave.setColumn(ds_listSave.rowposition,"sysClass","18");
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClass","23");//2015-11-24 변경
		ds_listSave.setColumn(ds_listSave.rowposition,"sysClassNm","구매사업부");
	}	
	
	if(fv_apprv == "Y"){//건별 추가건 플레그
		ds_listSave.setColumn(ds_listSave.rowposition,"modifySalsYn", "A");
	}else{
		ds_listSave.setColumn(ds_listSave.rowposition,"modifySalsYn", "N");
	}
}

/************************************************************************************************
 * 설명      :  조회 여부 확인
************************************************************************************************/
function fn_searchboolean(){
// 	if(searchboolean){
// 		return false;
// 	}else{
// 		gfn_alert("조회 후 실행해 주세요.");
// 		return true;
// 	}	
}

/************************************************************************************************
 * 각 COMPONENT 별 EVENT 영역 (필수)
************************************************************************************************/
/*----------------------------------------------------------------------------------------------
 * 설명      : Row 추가 버튼
 *---------------------------------------------------------------------------------------------*/
function btn_add_onclick(obj:Button,  e:ClickEventInfo)
{
}

/*----------------------------------------------------------------------------------------------
 * 설명      : Row 삭제 버튼
 *---------------------------------------------------------------------------------------------*/
function btn_del_onclick(obj:Button,  e:ClickEventInfo)
{

}
/*----------------------------------------------------------------------------------------------
 * 설명      : 전일 매출복사 div컨트롤
 *---------------------------------------------------------------------------------------------*/
function btn_copy_onclick(obj:Button,  e:ClickEventInfo)
{	
	if(ds_search.getColumn(0, "occurDate") > fv_sToday){
		gfn_alert("오늘날짜 이후는 매출복사할 수 없습니다.");
		fn_search();
		fn_searchSaleDay();
		return ;
	}
	
	fn_beforeDt();//마감여부 조회
	for(var i=0; i<ds_beforeDt.rowcount; i++){
		if(ds_beforeDt.getColumn(i, "dtCnt") == "Y"){
			gfn_alert("마감이 완료되어 변경할 수 없습니다.");
			fn_search();
			fn_searchSaleDay();
			return false;
		}
	}
	
	fn_beforeDt2(); // 전일자 마감여부 조회
	for(var i=0; i<ds_beforeDt2.rowcount; i++){
		if(ds_beforeDt2.getColumn(i, "dtCnt") == "N"){
			gfn_alert("전일자 미마감건이 존재하여 변경할 수 없습니다.");
			fn_search();
			fn_searchSaleDay();
			return false;
		}
	}
	
	if(ds_search.getColumn(0, "muCd") == "2002" || ds_search.getColumn(0, "muCd") == "2003"){
		//return true;
	}else{
		gfn_alert("복사권한이 없습니다.");
		return;
	}
	
	//전일자 세팅
	ds_search.setColumn(0,"occurCopyDate", gfn_addDate(cal_receiveDateFr.text, -1));
	
	/*
	*		전일 매출 복사 버튼 위치에 따라 이동
	*/
	dv_Copy.position.left = btn_copy.position.left - 165;
	dv_Copy.position.top = btn_copy.position.top + 25;
	dv_Copy.position.width = 256;
	dv_Copy.position.height = 200;
	
	dv_Copy.visible = (! dv_Copy.visible);
}
/*----------------------------------------------------------------------------------------------
 * 설명      : 전일 매출 복사 
 *---------------------------------------------------------------------------------------------*/
function dv_Copy_btn_DataCopy_OnClick(obj:Button, e:ClickEventInfo)
{
	if (gfn_length(ds_search.getColumn(0,"occurCopyDate"))== 0 && gfn_length(dv_Copy.cal_receiveDate.text)== 0)
	{
		gfn_alert("복사일자를 지정하여 주십시요.");
		return;
	}
	ds_search.setColumn(0,"occurCopyDate",dv_Copy.cal_receiveDate.text);
	if (cal_receiveDateFr.text <= dv_Copy.cal_receiveDate.text)
	{
		gfn_alert("복사일자는 매출일자보다 이전이어야합니다.");
		return;
	}
	
	//전일자 셋팅(매출복사용)
    fn_beforeDtCopy();//마감여부조회
	if(ds_beforeDtCopy.getColumn(0, "dtCntCopy") == "N"){
		gfn_alert("복사일자의 마감 체크가 되지 않았습니다.");
		fn_search();
		fn_searchSaleDay();
		return ;
	}else if(ds_beforeDtCopy.getColumn(0, "dtCntCopy") == undefined){
		gfn_alert("복사할 매출이 없습니다.");
		fn_search();
		fn_searchSaleDay();
		return ;
	}
	
	gfn_alert("선수금 및 카드매출은 복사되지 않습니다.");
	
	var strChkLst = "";
	if (dv_Copy.chk1.value)	strChkLst += ",'" + dv_Copy.chk1.userdata + "'";
	if (dv_Copy.chk2.value)	strChkLst += ",'" + dv_Copy.chk2.userdata + "'";
	if (dv_Copy.chk3.value)	strChkLst += ",'" + dv_Copy.chk3.userdata + "'";
	if (dv_Copy.chk4.value)	strChkLst += ",'" + dv_Copy.chk4.userdata + "'";
// 	if (dv_Copy.chk5.value)	strChkLst += ",'" + dv_Copy.chk5.userdata + "'";
// 	if (dv_Copy.chk6.value)	strChkLst += ",'" + dv_Copy.chk6.userdata + "'";
// 	if (dv_Copy.chk7.value)	strChkLst += ",'" + dv_Copy.chk7.userdata + "'";
// 	if (dv_Copy.chk8.value)	strChkLst += ",'" + dv_Copy.chk8.userdata + "'";
// 	if (dv_Copy.chk9.value)	strChkLst += ",'" + dv_Copy.chk9.userdata + "'";

	if(gfn_length(strChkLst)<=0)
	{
		gfn_alert("매출유형을 선택하여 주십시요.");
		return;
	}
	strChkLst = gfn_mid(strChkLst,2);
	
	ds_search.setColumn(0,"saleClass",strChkLst);
	
	var sDate = dv_Copy.cal_receiveDate.text;
	var nYear = gfn_subStr(sDate,0, 4);
	var nMonth = gfn_subStr(sDate,4, 2);
	var nDate = gfn_subStr(sDate,6, 2);
	
	if (!gfn_message("C", nYear+"-"+nMonth+"-"+nDate + "일자 매출을 복사하시겠습니까?")) return;
	
    // Grid sort 표시 초기화(필수)
    //gfn_clearSortMark(grd_list);

    var strSvcID    = "saveCopy";
    var strURL      = "fs/fsl/upjangSaleRegMgntCopy/saveList.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 폼 사이즈 변경시 그리드 넓이 조절
 *---------------------------------------------------------------------------------------------*/
function UpjangSaleRegMgnt_onsize(obj:Form, e:SizeEventInfo)
{
	var nSpt  = sp_line.position.y;
	var nForm = this.position.bottom;
	
	if(nForm -85	 <  nSpt && nSpt > 153)
	{
		sp_line.position.y = nForm -85;
	}
	sp_line.max = this.position.bottom - 85;
	sp_line.min = 133;
	
	if(e.cx > 1237){
		grd_list.position.width = e.cx - 20;
		
	}
	/*
	*		전일 매출 복사 버튼 위치에 따라 이동
	*/
	dv_Copy.position.left = btn_copy.position.left - 165;
	dv_Copy.position.top = btn_copy.position.top + 25;
	dv_Copy.position.width = 256;
	dv_Copy.position.height = 200;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 지원금 여부 이미지 변경
 *---------------------------------------------------------------------------------------------*/
function fn_img(id){
	var img = "URL('theme://images/new/grd_WF_Plusbtn.png')";
	if(!gfn_isNull(id)){
		img = "URL('theme://images/new/grd_WF_Minusbtn.png')";
	}
	return img;
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 검색 조건 변경전 데이터 초기화 여부 확인
 *---------------------------------------------------------------------------------------------*/
function ds_search_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(ds_listSave.getRowCount() > 0){
		if(e.columnid == "muCd" || e.columnid == "schTm" || e.columnid == "upjangCd" || e.columnid == "occurDate"){		
			if(gfn_confirm("confirm.before.search")){
				ds_list.clearData();
				ds_listSave.clearData();
				searchboolean = false;
			}else{
				return false;
			}
		}
	}
	return true;
}
/*----------------------------------------------------------------------------------------------
 * 설명      : listSave_oncolumnchanged 
 *---------------------------------------------------------------------------------------------*/
function ds_listSave_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{	
	var old_salAmt = "";
	// 매출유형이 바뀌면 창고정보 초기화
	if (e.columnid == "salsClassNm") {
		ds_listSave.setColumn(ds_listSave.rowposition, "salsClass", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "posNum", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "posNm", "");
		//매출구분 초기화 20200611
		ds_listSave.setColumn(ds_listSave.rowposition, "saleGubun", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "saleGubunNm", "");
		//끼니 초기화 20200611
		ds_listSave.setColumn(ds_listSave.rowposition, "bldType", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "bldTypeNm", "");
	}
	
	//매출구분이 바뀌면 끼니 초기화 20200611
	if (e.columnid == "saleGubun") {
		//끼니
		ds_listSave.setColumn(ds_listSave.rowposition, "bldType", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "bldTypeNm", "");
	}

	//식권입력제어
	if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P2" || ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P3"){
		edt_ticket.enable = true;
		edtBtn_ticket.enable = true;
	}else{
		edt_ticket.enable = false;
		edtBtn_ticket.enable = false;
	}
	
	//선수금(일반) 선택 후 단가 및 식수를 변경하는 경우 선수금 일반 초기화(매출/지불 차이발생) 후 다시 선택하도록 함 20180530 김호석
	//이전 매출금액 저장	
	/*
	if ((e.columnid == "salQuantity" || e.columnid == "uprice") && ds_listSave.getColumn(e.row.rowposition, "payCd") == "P1") {	
		if (ds_listSave.getColumn(e.row.rowposition, "payCd") == "P1") {
			var old_salAmt = ds_listSave.getColumn(e.row, "salAmt");
		}
		alert(old_salAmt);
	}
	*/
	
	//매출 총액 / 단가 계산
	if(e.columnid == "salQuantity" || e.columnid == "uprice" || e.columnid == "salAmt"){
		if(!gfn_isNull(obj.getColumn(e.row,"salQuantity")) && !gfn_isNull(obj.getColumn(e.row,"uprice"))){
			var amt = Number(obj.getColumn(e.row,"salQuantity")) * Number(obj.getColumn(e.row,"uprice"));
			if(gfn_length(amt) > 12){
				gfn_alert("단가와 식수를 확인해 주세요.\n매출액이 올바르지 않습니다.\n매출액은 천억단위를 넘을 수 없습니다.");
				return;
			}
			if (ds_listSave.getColumn(e.row, "payCd") == "P1") {
				old_salAmt = ds_listSave.getColumn(e.row, "salAmt");
			}		
			
			ds_listSave.setColumn(e.row,"salAmt" , amt);
			ds_listSave.setColumn(e.row,"vatAmt" , amt * 0.1);
			ds_listSave.setColumn(e.row,"netAmt" , amt - (amt * 0.1));
			
			if (ds_listSave.getColumn(e.row, "payCd") == "P1") {
				if(e.columnid == "salQuantity" || e.columnid == "uprice") {
					if (!(old_salAmt == ds_listSave.getColumn(e.row,"salAmt"))) {
						alert("매출금액이 변동되었습니다.\n선수금(일반) 선택이 초기화됩니다.");
						ds_advanceAmt.clear;
						edt_pmntType.value = "";
						ds_listSave.setColumn(e.row,"payCd" ,"");
						ds_listSave.setColumn(e.row,"payNm" ,"");		
						edt_evidence6.value = "";
					}
				}
			}
		}
		edt_ticket.value = "";
	}
	
	
	if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == "P1") {
		if (e.columnid == "salsClassNm") {
			alert(ds_listSave.getColumn(e.row, "salAmt"));
		}
	}
	
	//선수금(일반) 선택 후 단가 및 식수를 변경하는 경우 선수금 일반 초기화(매출/지불 차이발생) 후 다시 선택하도록 함 20180530 김호석
	//이전 매출금액과 차이가 발생하는 경우
	/*
	if ((e.columnid == "salQuantity" || e.columnid == "uprice")  && ds_listSave.getColumn(e.row.rowposition, "payCd") == "P1") {	
		if (!(old_salAmt == ds_listSave.getColumn(e.row,"salAmt"))) {
			alert("매출금액이 변동되었습니다.\n선수금(일반) 선택이 초기화됩니다.");
			ds_advanceAmt.clear;
			edt_pmntType.value = "";
			ds_listSave.setColumn(e.row,"payCd" ,"");
			ds_listSave.setColumn(e.row,"payNm" ,"");		
			edt_evidence6.value = "";
		}
	}
	*/
	
	//지불유형 컨트롤
	if(obj.getColumn(e.row,"payCd") == "1"){//현금
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
	}else if(obj.getColumn(e.row,"payCd") == "2"){//신용카드
		edt_evidence6.enable = true;
		edtBtn_evidence6.enable = true;
	}else if(obj.getColumn(e.row,"payCd") == "7" || obj.getColumn(e.row,"payCd") == "11"){//후불외상
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
	}else if(obj.getColumn(e.row,"payCd") == "P2"){//선수금(식권)	
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
		edt_evidence6.value = "";
	}else if(obj.getColumn(e.row,"payCd") == "P3"){//선수금(외상식권)		
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
		edt_evidence6.value = "";
	}else if(obj.getColumn(e.row,"payCd") == "P1"){//선수금(일반)
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
	}else if(obj.getColumn(e.row,"payCd") == "Z"){//내부이용
		edt_evidence6.enable = true;
		edtBtn_evidence6.enable = true;	
	}	
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 창고조회조건 클릭 이벤트
 *---------------------------------------------------------------------------------------------*/
function cboPos_onitemchanged(obj:Combo, e:ItemChangeEventInfo)
{
	if(obj.value != ""){//창고가 전체가 아닐때
// 		ds_salesType.filter(" code == '1101' || code == '1102' || code == '1103' || code == '1104' || code == '1105' || code == '1106' ||" 
// 		                 +  " code == '1107' || code == '1108' || code == '1109' || code == '1110' || code == '1111' || code == '1112' ||"
// 		                 +  " code == '1113' ");
	}
	
	fn_search();
	fn_searchSaleDay();
	
//	if(obj.value != null && obj.value != ""){
//		posFlag = true;
//	}else{
//		posFlag = false;
//	}
	
}

//매입사/사원
function edtBtn_evidence6_onclick(obj:Button,  e:ClickEventInfo)
{
	if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == '2'){
		fn_cardPop(ds_listSave.rowposition);
	}else if(ds_listSave.getColumn(ds_listSave.rowposition, "payCd") == 'Z'){
		fn_personalPopup(ds_listSave.rowposition);
	}
	
	
}
function fn_virData(row){

	if(row != -1 && ds_listSave.getColumn(ds_listSave.rowposition, "modifySalsYn") == "A" && ds_listSave.getRowType(ds_listSave.rowposition) == Dataset.ROWTYPE_INSERT){
		gfn_alert("건별 입력중에는 데이터 수정이 불가능 합니다.\n\n건별 입력을 취소하려면 조회후 작업을 진행해 주세요.");
		return false;
	}else if(row == -1){
		row = 0;
	}

	ds_listSave.copyData(ds_list);
	
	if(ds_advanceAmt.getRowCount() > 0)ds_advanceAmt.clearData();//입력중 행선택시 선수금 삭제.
	if(ds_list_ticket.getRowCount() > 0)ds_list_ticket.clearData();//입력중 행선택시 식권 삭제.


	//2015-12-01  헤더 정렬시 데이터가 맞지않아 ds_listSave에서 findRow로 찾기. 추가
	var receiptNum = ds_list.getColumn(row,"receiptNum");
	var seq =ds_list.getColumn(row,"seq");
	
	var fRow = ds_listSave.findRowExpr("receiptNum =='"+receiptNum+"' && seq == '"+seq+"'");
	ds_listSave.rowposition = fRow;
	//수정조건-지불유형이 외상,현금,카드일때 식수,단가,매출액,끼니,적요,매입사/사원 수정가능
	if(ds_list.getColumn(row, "payCd") == "1"){//현금
		edt_salsType.enable = false;
		edtBtn_salsType.enable = false;
		edt_pos.enable = false;
		edtBtn_pos.enable = false;
		edt_custnm.enable = false;
		edtBtn_custnm.enable = false;
		edt_vatClass.enable = false;
		edtBtn_vatClass.enable = false;
		edt_pmntType.enable = false;
		edtBtn_pmntType.enable = false;
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
		chk_Auto00.enable = false;
		
		edt_uprice.enable = true;
		edt_salQuantity.enable = true;
		edt_amt.enable = true;
		edt_bldType.enable = true;
		edtBtn_bldType.enable = true;
		edt_remark.enable = true;
	}else if(ds_list.getColumn(row, "payCd") == "2"){//카드
		edt_salsType.enable = false;
		edtBtn_salsType.enable = false;
		edt_pos.enable = false;
		edtBtn_pos.enable = false;
		edt_custnm.enable = false;
		edtBtn_custnm.enable = false;
		edt_vatClass.enable = false;
		edtBtn_vatClass.enable = false;
		edt_pmntType.enable = false;
		edtBtn_pmntType.enable = false;
		chk_Auto00.enable = false;
		
		edt_uprice.enable = true;
		edt_salQuantity.enable = true;
		edt_amt.enable = true;
		edt_bldType.enable = true;
		edtBtn_bldType.enable = true;
		edt_evidence6.enable = true;
		edtBtn_evidence6.enable = true;
		edt_remark.enable = true;
	}else if(ds_list.getColumn(row, "payCd") == "7" || ds_list.getColumn(row, "payCd") == "11"){//후불(외상)
		edt_salsType.enable = false;
		edtBtn_salsType.enable = false;
		edt_pos.enable = false;
		edtBtn_pos.enable = false;
		edt_custnm.enable = false;
		edtBtn_custnm.enable = false;
		edt_vatClass.enable = false;
		edtBtn_vatClass.enable = false;
		edt_pmntType.enable = false;
		edtBtn_pmntType.enable = false;
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
		chk_Auto00.enable = false;
		
		edt_uprice.enable = true;
		edt_salQuantity.enable = true;
		edt_amt.enable = true;
		edt_bldType.enable = true;
		edtBtn_bldType.enable = true;
		edt_remark.enable = true;
	}else if(ds_list.getColumn(row, "payCd") == "Z"){//내부이용
		edt_salsType.enable = false;
		edtBtn_salsType.enable = false;
		edt_pos.enable = false;
		edtBtn_pos.enable = false;
		edt_custnm.enable = false;
		edtBtn_custnm.enable = false;
		edt_vatClass.enable = false;
		edtBtn_vatClass.enable = false;
		edt_pmntType.enable = false;
		edtBtn_pmntType.enable = false;
		chk_Auto00.enable = false;
		
		edt_uprice.enable = true;
		edt_salQuantity.enable = true;
		edt_amt.enable = true;
		edt_bldType.enable = true;
		edtBtn_bldType.enable = true;
		edt_evidence6.enable = true;
		edtBtn_evidence6.enable = true;
		edt_remark.enable = true;
	}else{
		edt_salsType.enable = false;
		edtBtn_salsType.enable = false;
		edt_pos.enable = false;
		edtBtn_pos.enable = false;
		edt_custnm.enable = false;
		edtBtn_custnm.enable = false;
		edt_vatClass.enable = false;
		edtBtn_vatClass.enable = false;
		edt_pmntType.enable = false;
		edtBtn_pmntType.enable = false;
		chk_Auto00.enable = false;
		
		edt_uprice.enable = false;
		edt_salQuantity.enable = false;
		edt_amt.enable = false;
		edt_bldType.enable = false;
		edtBtn_bldType.enable = false;
		edt_evidence6.enable = false;
		edtBtn_evidence6.enable = false;
		edt_remark.enable = false;
	}
	edt_saleGubun.enable = true;
	edtBtn_saleGubun.enable = true;
	//일마감 된 건은 단가,수량,금액 수정못하도록 수정(마감금액과 차이 발생 오류 방지)-> 건별삭제 후 건별입력해야함 
	//2017.12.01 김호석 선조치
	if (ds_list.getColumn(row, "ddddCloseYn") == "Y") {
		edt_uprice.enable = false;
		edt_salQuantity.enable = false;
		edt_amt.enable = false;
		//내부이용 사용자 마감후에 변경 못하도록 제한 추가 20180406 김호석
		edtBtn_evidence6.enable =false;
		edt_evidence6.enable = false;
	}

	
	return true;
}
/*********************************************************************
*설명      : 엔터 이벤트
**********************************************************************/
//달력 엔터 - 조회
function cal_receiveDateFr_onkeydown(obj:ObjCalendar, e:KeyEventInfo)
{
	if(e.keycode == 13){			
		fn_search();
		fn_searchSaleDay();
	}
}

//공통팝업 엔터
function edt_onkeydown(obj:Edit, e:KeyEventInfo)
{
	if(e.keycode == 13){
		eval("edtBtn_" + gfn_subStr(obj.name, 4)).click();
	}else if(e.keycode == 46){
		ds_listSave.setColumn(ds_listSave.rowposition, "bldType", "");
		ds_listSave.setColumn(ds_listSave.rowposition, "bldTypeNm", "");
	}
}

//적요 저장
function edt_remark_OnKeyDown(obj:Edit, e:KeyEventInfo)
{
	if(e.keycode == 13){
		fn_save();
	}
}

function btn_close_onclick(obj:Button,  e:ClickEventInfo)
{
	gfn_openMenuForm("MAG10120E.xfdl","U_MAG","","사업장일마감관리");
}


function grd_list_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	//지우지마셈
	if(e.col == 0){
		gfn_exportExcel(obj);
	}
}

function grd_list2_onheadclick(obj:Grid, e:GridClickEventInfo)
{
	//지우지마셈
	if(e.col == 0){
		gfn_exportExcel(obj);
	}
}


/*----------------------------------------------------------------------------------------------
 * 설명      : 건별 권한 가져오기.
 *---------------------------------------------------------------------------------------------*/
function fn_apprvSearch()
{
    if(gfn_isNull(ds_search.getColumn(0,"upjangCd")) || gfn_isNull(ds_search.getColumn(0,"occurDate"))){
		btn_apprvAdd.visible = false;
		btn_apprvdel.visible = false;
		fv_apprv = "N";
		return;
    }
    var strSvcID    = "selectCloseModifyreq";
    var strURL      = "fs/fsl/upjangSaleRegMgnt/selectCloseModifyreq.xdo";
    var strInDs     = "ds_search=ds_search";
    var strOutDs    = "ds_apprv=ds_apprv";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
	gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

/*----------------------------------------------------------------------------------------------
 * 설명      : 건별 입력 버튼 클릭.
 *---------------------------------------------------------------------------------------------*/
function btn_apprvAdd_onclick(obj:Button,  e:ClickEventInfo)
{
	// 해당월이 월마감이 된경우 매출등록을 할 수 없다.
	mfn_GetClsStatus(gfn_subStr(cal_receiveDateFr.fn_getValue(), 0, 6));
	if (ds_common.rowcount > 0)
	{
		g_Message("EE", "해당월은 월마감이 완료되어 입력이 불가합니다.");
		return false;
	}
	
	if(gfn_isNull(edt_muNm.getMuCode())){
		gfn_alert("사업부는 필수입력 사항 입니다.");
		return;
	}else if(gfn_isNull(edt_tmNm.getTmCode())){
		gfn_alert("팀은 필수입력 사항 입니다.");
		return;
	}else if(gfn_isNull(edt_upjangNm.getUpjangCode())){
		gfn_alert("사업장은 필수입력 사항 입니다.");
		return;
	}
	
	if(ds_search.getColumn(0, "occurDate") > fv_sToday){
		gfn_alert("오늘날짜 이후는 입력할 수 없습니다.");
		fn_search();
		fn_searchSaleDay();
		return ;
	}
	
	if(ds_search.getColumn(0, "occurDate") < "20151001"){
		gfn_alert("10월 이전으로는  입력할 수 없습니다.");
		return;
	}
	
	
	if(fn_searchboolean())return;
	
	// 마감이 완료되지 않으면 건별입력 불가 : 2015.11.02 추가
	fn_beforeDt();//마감여부 조회
	
	for(var i=0; i<ds_beforeDt.rowcount; i++){
		if(ds_beforeDt.getColumn(i, "dtCnt") == "N"){
			gfn_alert("미마감건이 있어 건별입력을 하실 수 없습니다.");
			fn_search();
			fn_searchSaleDay();
			return false;
		}
	}
	
	var salsFlag = false;
	
	// 건별입력시 데이터셋 초기상태로 reset : 2015.11.02 추가
	if (gfn_dsIsUpdated(ds_listSave) == true || gfn_dsIsUpdated(ds_list) == true) 
	{	
		var retVal = gfn_confirm("변경된 데이터가 있습니다.\n\n건별입력시 데이터가 사라집니다.\n\n계속하시겠습니까 ?");
		if(retVal){
			ds_list.reset();
			ds_listSave.reset();
		}else{
			return;
		}
	}
	
	if(ds_listSave.rowcount == 0){//데이터가 없는경우
		var nRow = ds_listSave.addRow();	
		
		fn_newRowData(nRow);
	}else{
		for(var i=0; i<ds_listSave.rowcount; i++){//데이터가 존재 하는경우 
			if(ds_listSave.getColumn(i, "receiptNum") != null && ds_listSave.getColumn(i, "receiptNum") != ""){
				salsFlag = true;
			}else{
				salsFlag = false;
			}
		}
		if(salsFlag == true){
			var nRow = ds_listSave.addRow();	
			fn_newRowData(nRow);
		}
	}

	//edit 활성화
	edt_salsType.enable = true;
	edt_salsType.setFocus();
	edtBtn_salsType.enable = true;
	//if(posFlag == false){
		edt_pos.enable = true;
		edtBtn_pos.enable = true;
	//}else{
		//ds_listSave.setColumn(ds_listSave.rowposition, "posNum" ,cboPos.value);  //20150909 윤지혜M 요청에 의해 취소
		//ds_listSave.setColumn(ds_listSave.rowposition, "posNm" ,cboPos.text);
		//edt_pos.enable = false;
		//edtBtn_pos.enable = false;
	//}
	edt_custnm.enable = true;
	edtBtn_custnm.enable = true;
	edt_vatClass.enable = true;
	edtBtn_vatClass.enable = true;
	edt_salQuantity.enable = true;
	edt_uprice.enable = true;
	edt_amt.enable = true;
	edt_bldType.enable = true;
	edtBtn_bldType.enable = true;
	edt_saleGubun.enable = true;
	edtBtn_saleGubun.enable = true;	
	edt_pmntType.enable = true;
	edtBtn_pmntType.enable = true;
	edt_remark.enable = true;

	fn_tmpSeq();
}

function ds_search_oncolumnchanged(obj:Dataset, e:DSColChangeEventInfo)
{
		if(e.columnid == "upjangCd" || e.columnid == "occurDate"){
			fn_apprvSearch();
		}
}

function btn_apprvdel_onclick(obj:Button,  e:ClickEventInfo)
{
	var nRow = ds_list.rowposition;
	
	if(ds_list.rowposition == -1) 
	{
		gfn_alert("msg.err.grid.noselect", "삭제할 row");	// 선택된 항목이 없습니다.
		return;
	}
	
	// 해당월이 월마감이 된경우 매출등록을 할 수 없다.
	mfn_GetClsStatus(gfn_subStr(cal_receiveDateFr.fn_getValue(), 0, 6));
	if (ds_common.rowcount > 0)
	{
		g_Message("EE", "해당월은 월마감이 완료되어 삭제가 불가합니다.");
		return false;
	}
	
	if(ds_list.getColumn(nRow,"ddddCloseYn") != "Y"){
		gfn_alert("마감데이터만 삭제가 가능합니다.");
		return;
	}
	
		//alert(ds_listSave.getColumn(i, "arYn")+" " + ds_listSave.getColumn(i, "publishYn") + " " + ds_listSave.getColumn(i, "journalzYn"));
	if(ds_list.getColumn(nRow, "arYn") == "Y" || ds_list.getColumn(nRow, "publishYn") == "Y" || ds_list.getColumn(nRow, "journalzYn") == "Y"){
		gfn_alert("채권대체/발행/마감 중 하나라도 Y 이면 삭제가 불가능 합니다.");
		ds_list.rowposition = nRow;
		return false;
	}
	
	for(var i=0; i<ds_beforeDt.rowcount; i++){
		if(ds_beforeDt.getColumn(i, "dtCnt") == "N"){
			gfn_alert("미마감건이 있어 건별삭제를 하실 수 없습니다.");
			fn_search();
			fn_searchSaleDay();
			return false;
		}
	}
	
	var rtVal = gfn_confirm("confirm.before.delete");	// 선택된 자료를 삭제 하시겠습니까?
	if (rtVal == true) {	
		delModifySalsYn = ds_list.getColumn(nRow,"modifySalsYn");
		ds_list.deleteRow(nRow);
		
		//데이터셋 클리어
		ds_listSave.clearData();
		ds_advanceAmt.clearData();
		
		delFlag = true;
		fn_apprvsave();
	}	
}

function fn_apprvsave()
{
	// v_ds_check 미사용시 변경사항 체크
	if (gfn_dsIsUpdated(ds_listSave) == false && gfn_dsIsUpdated(ds_list) == false) 
	{
		gfn_alert("msg.save.nochange");	// 변경된 내역이 없습니다.
		return;
	}

    var strSvcID    = "save";
    var strURL      = "/fs/fsl/upjangSaleRegMgnt/saveList.xdo";
	var strInDs     = "ds_list=ds_list:U ds_listSave=ds_listSave:U ds_list_ticket=ds_list_ticket:U ds_advanceAmt=ds_advanceAmt:U";
    var strOutDs    = "";
    var strArg      = "";
    var strCallback = "fn_callBack";
    var bAsync      = true;
    
    gfn_transaction(this, strSvcID, strURL, strInDs, strOutDs, strArg, strCallback, bAsync);
}

function fn_closeYn(){
	fn_beforeDt();//마감여부 조회
	for(var i=0; i<ds_beforeDt.rowcount; i++){
		if(ds_beforeDt.getColumn(i, "dtCnt") == "Y"){
			return false;
		}
	}
	return true;
}
function edtBtn_vatClass_onclick(obj:Button,  e:ClickEventInfo)
{
	
}
function ds_list_onrowposchanged(obj:Dataset, e:DSRowPosChangeEventInfo)
{
	//2015-12-01 그리드 키 이동시 데이터 조회 요청사항.
	fn_virData(e.newrow);
}

function ds_listSave_cancolumnchange(obj:Dataset, e:DSColChangeEventInfo)
{
	if(e.columnid == "uprice" && !gfn_isNull(e.newvalue)){
		if(gfn_isNull(ds_listSave.getColumn(ds_listSave.rowposition,"salsClass"))){
			edt_salsType.setFocus();
			gfn_alert("매출유형을 선택해 주세요.");
			return false;
		}
		if(ds_listSave.getColumn(ds_listSave.rowposition,"salsClass") == "1108" ||
		   ds_listSave.getColumn(ds_listSave.rowposition,"salsClass") == "1110" ||
		   ds_listSave.getColumn(ds_listSave.rowposition,"salsClass") == "1111" ||
		   ds_listSave.getColumn(ds_listSave.rowposition,"salsClass") == "1112" ||
		   ds_listSave.getColumn(ds_listSave.rowposition,"salsClass") == "1113" ||
		   ds_listSave.getColumn(ds_listSave.rowposition,"salsClass") == "1115" ||
		   ds_listSave.getColumn(ds_listSave.rowposition,"salsClass") == "1209"){
			return true;
		}else if(e.newvalue < 0){
			gfn_alert("마이너스(-)금액은 입력 할 수 없습니다.");
			return false;
		}
	}
	return true;
}

//매출일자 변경시 전일복사 tab 사라지게 하기  20160819 처리자:맹수영
function cal_receiveDateFr_onlbuttondown(obj:ObjCalendar, e:MouseEventInfo)
{
	dv_Copy.visible = false;
}

function btn_nonSaleDay_onclick(obj:Button,  e:ClickEventInfo)
{
	if( !gfn_isNull( ds_search.getColumn( 0,"upjangCd" ) ) )
	{      		//업장 선택 후 팝업 출력
		var arrParam = new Array();
		arrParam[0] = ds_search.getColumn(0,"upjangCd");
		arrParam[1] = ds_search.getColumn(0,"schTmNm");
		arrParam[2] = ds_search.getColumn(0,"upjangNm");
		arrParam[3] = gfn_getYear(gfn_today());
		var rtnVal = gfn_dialog(
								"UpjangNonSaleDayPop"							// dialogId
							  , "X_FSL::UpjangNonSaleDayPop.xfdl"	    // Url
							  , { fv_Contents:arrParam }				// 배열
							  , null, null, null, null, null, false, true, -1); 
	}
	else
	{
		gfn_alert("업장을 선택 해주세요.");
	}
}


function edtBtn_bldType_onclick(obj:Button,  e:ClickEventInfo)
{
	
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == null || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == undefined){
		gfn_alert("매출유형은 필수입력 입니다.");
		return;
	}
	//alert(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass"));
	if(ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "1103" || ds_listSave.getColumn(ds_listSave.rowposition, "salsClass") == "1108") {
		//alert(ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun"));
		if(ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun") == null || ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun") == "" || ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun") == undefined) {
			gfn_alert("식음료매출(FS) 매출유형은 매출구분이 필수 입니다.");
			return;		
		}
	}

	var arrArg = new Array();
	//조회 조건값을 다시 팝업으로 전달.
	
	arrArg[0] = ds_listSave.getColumn(ds_listSave.rowposition, "salsClass");
	arrArg[1] = ds_listSave.getColumn(ds_listSave.rowposition, "saleGubun");
	
	var strId       = "MealPopup";
	var strURL      = "X_FSL::MealPopup.xfdl";
	var objArgument = {arrSchVal:arrArg}; 
	var nWidth      = -1;
	var nHeight     = -1;
	var strStyle    = "";	
	var nLeft       = -1;
	var nTop        = -1;
	var isModeless  = false;
	var bShowTitle  = true;
	var strAlign    = "-1";
	var bResizable  = true;

 	var arr = gfn_dialog(strId, strURL, objArgument, nWidth, nHeight, strStyle, nLeft, nTop, isModeless, bShowTitle, strAlign);

 	if(arr != undefined){
		edt_bldType.value = arr["mealCd"];
		ds_listSave.setColumn(ds_listSave.rowposition, "bldType", toNumber(arr["mealCd"]));
		ds_listSave.setColumn(ds_listSave.rowposition, "bldTypeNm", arr["mealNm"]); 	
	}else{
		edt_bldType.value = "";
	}	
 
}
]]></Script>
  </Form>
</FDL>
