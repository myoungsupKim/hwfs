<?xml version="1.0" encoding="utf-8"?>
<FDL version="1.5">
  <TypeDefinition url="..\default_typedef.xml"/>
  <Form id="CmmnFrameJoin" classname="frameLogin" left="0" top="0" width="540" height="923" titletext="회원가입" scrollbars="autovert" onload="CmmnFrameLogin_onload">
    <Layouts>
      <Layout>
        <Static id="staFormSize" taborder="24" cssclass="sta_POP_Bg" left="0" top="0" width="540" height="923"/>
        <Static id="Static00" taborder="11" left="0%" top="0" height="346" cssclass="sta_LOGIN_Bg01" right="0%"/>
        <Static id="Static01" taborder="10" cssclass="sta_LOGIN_Bg02" left="0%" top="346" right="0%" bottom="0"/>
        <Static id="Static02" taborder="19" cssclass="sta_LOGIN_BgImg" left="0" top="0" height="393" right="0" onclick="Static02_onclick"/>
        <Static id="Static04" taborder="9" cssclass="sta_LOGIN_Copyright" left="0" height="22" bottom="20" right="0" onclick="Static04_onclick"/>
        <Edit id="edtId" taborder="0" displaynulltext="ID를 입력하세요" cssclass="edt_LOGIN_Login" left="30" top="456" height="55" right="30" onkeydown="edtId_onkeydown" autoselect="false" ontextchanged="edtId_ontextchanged"/>
        <Button id="btnJoin" taborder="2" left="30" top="661" height="80" right="30" cssclass="btn_LOGIN_Login" text="회원가입" style="background:#47475aff center middle;color:#ffffffff;" onclick="btnJoin_onclick"/>
        <Edit id="edtPwd" taborder="1" displaynulltext="패스워드를 입력하세요" cssclass="edt_LOGIN_Login" left="30" top="517" right="30" height="55" password="true" imemode="alpha" onkeydown="edtPwd_onkeydown" autoselect="false" ontextchanged="edtPwd_ontextchanged"/>
        <Combo id="cbo_test" taborder="5" innerdataset="@ds_test" codecolumn="cd" datacolumn="cdNm" left="456" top="465" width="47" height="36" index="-1" displaynulltext="테스트" ondropdown="cbo_test_ondropdown" onitemchanged="cbo_test_onitemchanged" visible="false"/>
        <Button id="btn_clearId" taborder="26" onclick="Common_Btn_common_OnClick" visible="false" top="470" right="37" width="29" height="29" style="background:gray URL('theme://Image\btn_close.jpg') stretch;border:1 solid #9a9a9aff ;color:white;bordertype:round 50 50 ;font:bold antialias 19 Droid Sans;"/>
        <Button id="btn_clearPw" taborder="27" onclick="Common_Btn_common_OnClick" visible="false" top="530" right="37" width="29" height="29" style="background:transparent URL('theme://Image\btn_close.jpg') stretch;border:1 solid #9a9a9aff ;bordertype:round 50 50 ;"/>
        <Edit id="edtName" taborder="28" imemode="none" displaynulltext="성명을 입력하세요" onkeydown="edtPwd_onkeydown" ontextchanged="edtPwd_ontextchanged" cssclass="edt_LOGIN_Login" left="30" top="578" right="30" height="55"/>
        <Button id="btnClose" taborder="29" text="닫기" cssclass="btn_LOGIN_Login" left="30" top="749" right="30" height="80" style="background:#47475aff center middle;color:#ffffffff;" onclick="btnClose_onclick"/>
      </Layout>
    </Layouts>
    <Objects>
      <Dataset id="ds_cond" preload="true" firefirstcount="0" firenextcount="0" useclientlayout="false" updatecontrol="true" enableevent="true">
        <ColumnInfo>
          <Column id="ID" size="255" type="STRING"/>
          <Column id="PWD" size="255" type="STRING"/>
          <Column id="NAME" type="STRING" size="256"/>
        </ColumnInfo>
        <Rows>
          <Row/>
        </Rows>
      </Dataset>
    </Objects>
    <Bind>
      <BindItem id="item0" compid="edtId" propid="value" datasetid="ds_cond" columnid="ID"/>
      <BindItem id="item1" compid="edtPwd" propid="value" datasetid="ds_cond" columnid="PWD"/>
      <BindItem id="item2" compid="edtName" propid="value" datasetid="ds_cond" columnid="NAME"/>
    </Bind>
    <Script type="xscript5.0"><![CDATA[include "lib::lib_Com.xjs"

this.CmmnFrameLogin_onload = function(obj:Form, e:nexacro.LoadEventInfo) {
	this.fn_init();
}

this.fn_init = function () { 
	application.goMain.gfn_POP_resize(this);
}

//버튼 클릭시(공통)
this.Common_Btn_common_OnClick = function (obj:Button, e:ClickEventInfo) {
	switch ( obj.name )	{
		case "btn_clearId":
			this.edtId.set_value("");
			this.btn_clearId.set_visible(false);
			this.edtId.setFocus()
			break;
		case "btn_clearPw":
			this.edtPwd.set_value("");
			this.btn_clearPw.set_visible(false);
			this.edtPwd.setFocus()
			break;		
	}
}

this.fn_join = function () {
	if( application.gfn_IsNull(this.edtId.text) ) {
        application.goMain.gfn_Msg("errorId", "Information", "사용자ID를 입력하여 주십시요.", "OK", true, this);
        return;
    }
     
    if( application.gfn_IsNull(this.edtPwd.text) ) {
        application.goMain.gfn_Msg("errorPw", "Information", "패스워드를 입력하여 주십시요.", "OK", true, this);
        return;
    }
    
    if( application.gfn_IsNull(this.edtName.text) ) {
        application.goMain.gfn_Msg("errorNm", "Information", "패스워드를 입력하여 주십시요.", "OK", true, this);
        return;
    }
    
    var strSvcID   	  = "join";
    var strUrl     	  = "hwfs_svc/fm/fmp/FMP99999E_T001.jsp";
    var strInDataset     = "ds_cond=ds_cond";
    var strOutDataset    = "";
    var strArguments	 = "";
    var strCallbackFunc  = "fn_callBack";
    var bAsync			 = false;
     
    this.gfn_transaction(this, strSvcID, strUrl, strInDataset, strOutDataset, strArguments, strCallbackFunc, bAsync);
}

	
this.fn_callBack = function (strSvcID, nErrorCode, strErrorMsg) {	
	
	if ( nErrorCode < 0 ) {
		application.goMain.gfn_Msg("OK", "알림", strErrorMsg.split(":")[1], "OK", "OK");
		return;
	}
	
	switch ( strSvcID ) {
		case "join" :
		    application.goMain.gfn_Msg("success", "Information", "가입이 완료됐습니다.", "OK", true, this);
		break;
    }
} 

this.msg_callback = function (id, rtn)
{ 
	if (id == "errorId") {
		this.edtId.setFocus();
	}
	
	if (id == "errorPw") {
		this.edtPwd.setFocus();
	}
	
	if (id == "errorNm") {
		this.edtName.setFocus();
	}
	
	if (id == "success") {
		var arg = new Array();
		application.goMain.gfn_POP_close(this, arg);
	}
	
	if (id == "exit") {	
		application.exit();
	}
	
}

this.btnJoin_onclick = function(obj:Button, e:nexacro.ClickEventInfo) {
	this.fn_join();
}

this.btnClose_onclick = function(obj:Button, e:nexacro.ClickEventInfo) {
	var arg = new Array();
		application.goMain.gfn_POP_close(this, arg);
}]]></Script>
  </Form>
</FDL>
